var Oa=Object.defineProperty;var ka=d=>{throw TypeError(d)};var Ra=(d,i,t)=>i in d?Oa(d,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[i]=t;var et=(d,i,t)=>Ra(d,typeof i!="symbol"?i+"":i,t),wa=(d,i,t)=>i.has(d)||ka("Cannot "+t);var nt=(d,i,t)=>(wa(d,i,"read from private field"),t?t.call(d):i.get(d)),Ot=(d,i,t)=>i.has(d)?ka("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(d):i.set(d,t),na=(d,i,t,v)=>(wa(d,i,"write to private field"),v?v.call(d,t):i.set(d,t),t);import{s as Da,r as Wa,a as S,b as Ka,l as za,g as e,d as Pa,p as lt,c as Ie,m as De,i as vt,t as o,e as a,f as k,h,j as he,k as Ae,n as ht,o as ke,q as s,u as dt,v as $e,D as Va,w as Se,x as N,y as r,z as oe,A as Ut,B as ae,C as ve,E as y,F as Ga,G as at,H as ca,I as Xa,J as Qa,K as Lt,L as ot,M as Rt,N as qa,O as _a,P as ea,Q as ua,R as ta,S as fa,T as aa,U as ra,V as Ja,W as Za,X as er,Y as tr,Z as ar,_ as rr,$ as sr,a0 as Xt,a1 as Fa,a2 as ir,a3 as nr,a4 as Qt,a5 as oa,a6 as Ct,a7 as or,a8 as lr,a9 as vr,aa as bt,ab as dr,ac as cr,ad as _r,ae as Ca,af as ja,ag as $a,ah as Sa,ai as Ma,aj as Ta,ak as At,al as Ft,am as Ht,an as kt,ao as ur,ap as fr,aq as Ba,ar as qt,as as Yt,at as pr,au as hr,av as yr,aw as Ea,ax as gr,ay as mr,az as br}from"../chunk/entity_proc_20260103_213850.js";import"../chunk/json_20260103_213850.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))v(p);new MutationObserver(p=>{for(const c of p)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&v(u)}).observe(document,{childList:!0,subtree:!0});function t(p){const c={};return p.integrity&&(c.integrity=p.integrity),p.referrerPolicy&&(c.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?c.credentials="include":p.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function v(p){if(p.ep)return;p.ep=!0;const c=t(p);fetch(p.href,c)}})();const xr=d=>d;function pa(d){const i=d-1;return i*i*i+1}function Aa(d){const i=typeof d=="string"&&d.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[d,"px"]}function kr(d,{delay:i=0,duration:t=400,easing:v=xr}={}){const p=+getComputedStyle(d).opacity;return{delay:i,duration:t,easing:v,css:c=>`opacity: ${c*p}`}}function wr(d,{delay:i=0,duration:t=400,easing:v=pa,x:p=0,y:c=0,opacity:u=0}={}){const l=getComputedStyle(d),U=+l.opacity,z=l.transform==="none"?"":l.transform,D=U*(1-u),[n,R]=Aa(p),[F,H]=Aa(c);return{delay:i,duration:t,easing:v,css:(O,E)=>`
			transform: ${z} translate(${(1-O)*n}${R}, ${(1-O)*F}${H});
			opacity: ${U-D*E}`}}function ge(d,{delay:i=0,duration:t=400,easing:v=pa,axis:p="y"}={}){const c=getComputedStyle(d),u=+c.opacity,l=p==="y"?"height":"width",U=parseFloat(c[l]),z=p==="y"?["top","bottom"]:["left","right"],D=z.map(A=>`${A[0].toUpperCase()}${A.slice(1)}`),n=parseFloat(c[`padding${D[0]}`]),R=parseFloat(c[`padding${D[1]}`]),F=parseFloat(c[`margin${D[0]}`]),H=parseFloat(c[`margin${D[1]}`]),O=parseFloat(c[`border${D[0]}Width`]),E=parseFloat(c[`border${D[1]}Width`]);return{delay:i,duration:t,easing:v,css:A=>`overflow: hidden;opacity: ${Math.min(A*20,1)*u};${l}: ${A*U}px;padding-${z[0]}: ${A*n}px;padding-${z[1]}: ${A*R}px;margin-${z[0]}: ${A*F}px;margin-${z[1]}: ${A*H}px;border-${z[0]}-width: ${A*O}px;border-${z[1]}-width: ${A*E}px;min-${l}: 0`}}function Ya(d,i){for(const t in i)d[t]=i[t];return d}function Dr({fallback:d,...i}){const t=new Map,v=new Map;function p(u,l,U){const{delay:z=0,duration:D=$=>Math.sqrt($)*30,easing:n=pa}=Ya(Ya({},i),U),R=u.getBoundingClientRect(),F=l.getBoundingClientRect(),H=R.left-F.left,O=R.top-F.top,E=R.width/F.width,A=R.height/F.height,se=Math.sqrt(H*H+O*O),le=getComputedStyle(l),Be=le.transform==="none"?"":le.transform,j=+le.opacity;return{delay:z,duration:typeof D=="function"?D(se):D,easing:n,css:($,Q)=>`
			   opacity: ${$*j};
			   transform-origin: top left;
			   transform: ${Be} translate(${Q*H}px,${Q*O}px) scale(${$+(1-$)*E}, ${$+(1-$)*A});
		   `}}function c(u,l,U){return(z,D)=>(u.set(D.key,z),()=>{if(l.has(D.key)){const n=l.get(D.key);return l.delete(D.key),p(n,z,D)}return u.delete(D.key),d&&d(z,D,U)})}return[c(v,t,!1),c(t,v,!0)]}function Ua(d){return Object.prototype.toString.call(d)==="[object Date]"}function Cr(d){return d}function la(d){const i=d-1;return i*i*i+1}function va(d,i){if(d===i||d!==d)return()=>d;const t=typeof d;if(t!==typeof i||Array.isArray(d)!==Array.isArray(i))throw new Error("Cannot interpolate values of different type");if(Array.isArray(d)){const v=i.map((p,c)=>va(d[c],p));return p=>v.map(c=>c(p))}if(t==="object"){if(!d||!i)throw new Error("Object cannot be null");if(Ua(d)&&Ua(i)){const c=d.getTime(),l=i.getTime()-c;return U=>new Date(c+U*l)}const v=Object.keys(i),p={};return v.forEach(c=>{p[c]=va(d[c],i[c])}),c=>{const u={};return v.forEach(l=>{u[l]=p[l](c)}),u}}if(t==="number"){const v=i-d;return p=>d+p*v}return()=>i}var jt,It,Wt,Nt;const ha=class ha{constructor(i,t={}){Ot(this,jt,Da(void 0));Ot(this,It,Da(void 0));Ot(this,Wt);Ot(this,Nt,null);nt(this,jt).v=nt(this,It).v=i,na(this,Wt,t)}static of(i,t){const v=new ha(i(),t);return Wa(()=>{v.set(i())}),v}set(i,t){var n;S(nt(this,It),i);let{delay:v=0,duration:p=400,easing:c=Cr,interpolate:u=va}={...nt(this,Wt),...t};if(p===0)return(n=nt(this,Nt))==null||n.abort(),S(nt(this,jt),i),Promise.resolve();const l=Ka.now()+v;let U,z=!1,D=nt(this,Nt);return na(this,Nt,za(R=>{if(R<l)return!0;if(!z){z=!0;const H=nt(this,jt).v;U=u(H,i),typeof p=="function"&&(p=p(H,i)),D==null||D.abort()}const F=R-l;return F>p?(S(nt(this,jt),i),!1):(S(nt(this,jt),U(c(F/p))),!0)})),nt(this,Nt).promise}get current(){return e(nt(this,jt))}get target(){return e(nt(this,It))}set target(i){this.set(i)}};jt=new WeakMap,It=new WeakMap,Wt=new WeakMap,Nt=new WeakMap;let Jt=ha;var jr=o('<div class="phase_display svelte-1ycsdg6"><span class="svelte-1ycsdg6"> </span> </div>'),$r=o('<div class="lifepoint_display svelte-1ycsdg6"><div class="svelte-1ycsdg6"> </div> <div class="svelte-1ycsdg6"> </div></div>'),Sr=(d,i,t)=>i(e(t)),Mr=o('<div class="svelte-1ycsdg6"><button class="phase_button svelte-1ycsdg6"> </button></div>'),Tr=o("<div><!></div>"),Br=o('<div class="svelte-1ycsdg6"><!></div>'),Er=o("<div><!></div>"),Ar=o('<div class="config_button_wrapper svelte-1ycsdg6"><button id="config_button" class="svelte-1ycsdg6">⚙</button></div>'),Yr=o("<!> <!> <!> <!>",1),Ur=o('<div style="position: absolute;" class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Lr=o('<div style="position: absolute; top:0rem" class="svelte-1ycsdg6">｛効果対象｝</div>'),Nr=o('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Pr=o(" <!> 】",1),qr=o('<div style="position: absolute; bottom:0rem" class="svelte-1ycsdg6"> <!></div>'),Fr=o("<!> <!>",1),Hr=o('<div class="badge svelte-1ycsdg6"> </div>'),Ir=o('<div class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Or=o("<!> <!> <!> <!>",1),Rr=o('<td><div role="listitem"><!></div></td>');function Wr(d,i){lt(i,!1);let t=Ie(i,"view",12),v=Ie(i,"row",8),p=Ie(i,"column",8),c=Ie(i,"selectedEntities",28,()=>[]),u=Ie(i,"selectedCells",28,()=>[]),l=De(t().getCell(v(),p())),U=De(new Jt(e(l).field.duel.duelists.Above.lp,{duration:400,easing:la})),z=De(new Jt(e(l).field.duel.duelists.Below.lp,{duration:400,easing:la}));const D=()=>{S(l,t().getCell(v(),p())),$e(U,e(U).target=e(l).field.duel.duelists.Above.lp),$e(z,e(z).target=e(l).field.duel.duelists.Below.lp)};e(l).onUpdate.append(D),t().onDuelUpdate.append(D),t().modalController.onUpdate.append(D);let n,R=De([]),F=()=>console.log("hoge"),H,O=De([]),E=De(!1),A=De(!1),se=!1;const le=C=>{var M,L;S(de,[]),c().reset(),n=C.activator,F=C.resolve,S(R,C.dummyActionInfos),S(O,C.chainBlockInfos.flatMap(ee=>ee.selectedEntities).getDistinct()),H=C.entitiesChoices,S(E,!1),S(A,((M=C.cellsChoices)==null?void 0:M.selectables.includes(e(l)))??!1),se=e(A)&&((L=C.cellsChoices)==null?void 0:L.qty)===1,D()};t().onWaitStart.append(le);const Be=()=>{n=void 0,S(R,[]),F=()=>{console.log("hoge")},H=void 0,S(O,[]),S(E,!1),S(A,!1),se=!1};t().onWaitEnd.append(Be);let j=De(!1),$=[];const Q=C=>{$=C.filter(M=>M.dests.includes(e(l))),S(j,$.length>0),D()},_e=()=>{$=[],S(j,!1),D()};t().onDragStart.append(Q),t().onDragEnd.append(_e);const[Ce,ie]=ei;let de=De([]);const Ee=C=>{if(n=void 0,e(l)===C.to||e(l).entities.includes(C.entity)){S(de,[...e(de),C]);const M=C.resolve;S(l,e(l)),setTimeout(()=>{S(de,e(de).filter(L=>L!==C)),C.count++,C.count>1&&M()},600)}};t().onAnimation.append(Ee);const B=C=>{F({phaseChange:C})},I=()=>e(l).isStackCell&&e(l).entities.flatMap(C=>C.actions).filter(C=>e(R).map(M=>M.action.seq).some(M=>M===C.seq)).length>0,V=C=>{var M;if(((M=C.target)==null?void 0:M.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),se)F({selectedCells:[e(l)]});else if(e(A))S(E,!e(E)),u(e(E)?[...u(),e(l)]:u().filter(L=>L!==e(l)));else if(e(l).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(l),!0),t().requireUpdate();const L=e(l).entities.flatMap(re=>re.actions).map(re=>re.seq),ee=e(R).filter(re=>L.includes(re.action.seq));if(ee.length){if(!n)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:n,dummyActionInfos:ee,cancelable:!0}).then(re=>{re&&F({actionInfo:re})});return}}t().requireUpdate(),console.info(e(l),ue(...e(l).visibleEntities))},ce=C=>{C.preventDefault(),C.dataTransfer&&(C.dataTransfer.dropEffect="move")},je=C=>{C.preventDefault(),console.info("drop",C,e(j),$),C.dataTransfer&&(C.dataTransfer.dropEffect="move");try{if(e(j)&&$){if($.length===1){const M=$[0];F({actionInfo:{...M,dest:e(l)}})}else if($.length>1){if(!n)throw new Va("想定されない状態");e(l).field.duel.view.modalController.terminateAll(),e(l).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:n,dummyActionInfos:$.map(M=>({...M,dest:e(l)})),cancelable:!1}).then(M=>{F({actionInfo:M})})}}}finally{t().removeDraggingActions()}},ue=(...C)=>{if(t().waitMode==="Animation")return"Disabled";if(H&&H.selectables.find(L=>C.find(ee=>L===ee)))return"Selectable";if(!e(R)||e(R).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(L=>L.state==="Shown"))return"Disabled";const M=e(R).filter(L=>C.includes(L.action.entity));return M.length===0?"Disabled":e(l).isStackCell||M[0].action.entity!==C[0]?"Clickable":M.some(L=>L.dests.length)?"Draggable":"Clickable"};vt();var Y=Rr(),b=a(Y);b.__click=V;var G=a(b);{var te=C=>{var M=Se(),L=N(M);{var ee=re=>{var me=Se(),f=N(me);{var w=m=>{var P=jr(),q=a(P),we=a(q),be=r(q,1,!0);h((fe,X)=>{y(we,fe),y(be,X)},[()=>String(e(l).field.duel.clock.turn).padStart(2,"0"),()=>e(l).field.duel.phase.toUpperCase()],he),s(m,P)},_=m=>{var P=Se(),q=N(P);{var we=fe=>{var X=$r(),J=a(X),W=a(J),xe=r(J,2),Le=a(xe);h((Fe,Ne)=>{y(W,Fe),y(Le,Ne)},[()=>Math.floor(e(U).current),()=>Math.floor(e(z).current)],he),s(fe,X)},be=fe=>{var X=Se(),J=N(X);{var W=xe=>{var Le=Se(),Fe=N(Le);{var Ne=Ye=>{var We=Se(),x=N(We);{var g=T=>{var Z=Se(),ye=N(Z);oe(ye,1,()=>t().duel.nextPhaseList,ve,(Me,K)=>{var pe=Mr(),Te=a(pe);Te.__click=[Sr,B,K];var ze=a(Te);h(Ue=>y(ze,Ue),[()=>e(K).toUpperCase()],he),s(Me,pe)}),s(T,Z)};k(x,T=>{t().duel.isEnded||T(g)})}s(Ye,We)};k(Fe,Ye=>{t().waitMode==="Free"&&Ye(Ne)})}s(xe,Le)};k(J,xe=>{e(l).column===5&&xe(W)},!0)}s(fe,X)};k(q,fe=>{e(l).column===3?fe(we):fe(be,!1)},!0)}s(m,P)};k(f,m=>{e(l).column===1?m(w):m(_,!1)})}s(re,me)};k(L,re=>{e(l).row===3&&re(ee)})}s(C,M)},ne=C=>{var M=Se(),L=N(M);{var ee=me=>{var f=Yr();const w=he(()=>e(de).find(X=>X.to===e(l)));var _=N(f);{var m=X=>{var J=Tr(),W=a(J);Ut(W,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),h(()=>Ae(J,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),ae(1,J,()=>ie,()=>({key:e(w).entity.seq})),s(X,J)};k(_,X=>{e(w)&&e(w).index==="Top"&&X(m)})}var P=r(_,2);oe(P,1,()=>e(l).visibleEntities,ve,(X,J)=>{var W=Se(),xe=N(W);{var Le=Fe=>{var Ne=Br(),Ye=a(Ne);const We=he(()=>ue(e(J))),x=he(()=>e(R).filter(g=>g.action.entity===e(J)));Ut(Ye,{get entity(){return e(J)},get state(){return e(We)},get dummyActionInfos(){return e(x)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(g){c(g)},$$legacy:!0}),ae(2,Ne,()=>Ce,()=>({key:e(J).seq})),s(Fe,Ne)};k(xe,Fe=>{e(de).every(Ne=>Ne.entity.seq!==e(J).seq)&&Fe(Le)})}s(X,W)});var q=r(P,2);{var we=X=>{var J=Er(),W=a(J);Ut(W,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),h(()=>Ae(J,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),ae(1,J,()=>ie,()=>({key:e(w).entity.seq})),s(X,J)};k(q,X=>{e(w)&&e(w).index!=="Top"&&X(we)})}var be=r(q,2);{var fe=X=>{var J=Ar();s(X,J)};k(be,X=>{e(l).owner.seat==="Below"&&X(fe)})}s(me,f)},re=me=>{var f=Or();const w=he(()=>e(de).find(J=>J.to===e(l)));var _=N(f);{var m=J=>{var W=Ur(),xe=a(W);Ut(xe,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),ae(1,W,()=>ie,()=>({key:e(w).entity.seq})),s(J,W)};k(_,J=>{e(w)&&e(w).index!=="Top"&&J(m)})}var P=r(_,2);{var q=J=>{var W=Fr(),xe=N(W);oe(xe,1,()=>e(l).visibleEntities.map((Ne,Ye)=>({index:Ye,entity:Ne})).toReversed(),ve,(Ne,Ye)=>{var We=Se(),x=N(We);{var g=T=>{var Z=Nr();const ye=he(()=>!e(l).isStackCell&&e(Ye).index===0?ue(...e(l).visibleEntities):void 0);var Me=N(Z);{var K=Ue=>{var Ve=Lr();s(Ue,Ve)};k(Me,Ue=>{e(O).includes(e(Ye).entity)&&Ue(K)})}var pe=r(Me,2),Te=a(pe);const ze=he(()=>e(Ye).index===0?e(R).filter(Ue=>e(l).visibleEntities.includes(Ue.action.entity)):void 0);Ut(Te,{get entity(){return e(Ye).entity},get state(){return e(ye)},get dummyActionInfos(){return e(ze)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(Ue){c(Ue)},$$legacy:!0}),h(()=>Ae(pe,`duel_card_wrapper ${(e(Ye).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1ycsdg6`)),ae(2,pe,()=>Ce,()=>({key:e(Ye).entity.seq})),s(T,Z)};k(x,T=>{e(de).every(Z=>Z.entity.seq!==e(Ye).entity.seq)&&T(g)})}s(Ne,We)});var Le=r(xe,2);{var Fe=Ne=>{var Ye=qr(),We=a(Ye),x=r(We);oe(x,1,()=>ca(e(l).visibleEntities[0].status.maxCounterQty),ve,(g,T)=>{var Z=Pr(),ye=N(Z),Me=r(ye);{var K=pe=>{var Te=at();h(()=>y(Te,`/${e(l).visibleEntities[0].status.maxCounterQty[e(T)]??""}`)),s(pe,Te)};k(Me,pe=>{(e(l).visibleEntities[0].status.maxCounterQty[e(T)]??9999)<100&&pe(K)})}h((pe,Te)=>y(ye,`【
              ${pe??""}${Te??""} `),[()=>Ga(e(T)),()=>e(l).visibleEntities[0].counterHolder.getQty(e(T))],he),s(g,Z)}),h(()=>y(We,`【${e(l).visibleEntities[0].battlePositionName??""}】 `)),s(Ne,Ye)};k(Le,Ne=>{e(l).visibleEntities[0].battlePosition&&Ne(Fe)})}s(J,W)};k(P,J=>{e(l).visibleEntities.length>0&&J(q)})}var we=r(P,2);{var be=J=>{var W=Hr(),xe=a(W);h(()=>y(xe,e(l).visibleEntities.length)),s(J,W)};k(we,J=>{e(l).isStackCell&&J(be)})}var fe=r(we,2);{var X=J=>{var W=Ir(),xe=a(W);Ut(xe,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),ae(1,W,()=>ie,()=>({key:e(w).entity.seq})),s(J,W)};k(fe,J=>{e(w)&&e(w).index==="Top"&&J(X)})}s(me,f)};k(L,me=>{e(l).cellType==="Hand"?me(ee):me(re,!1)},!0)}s(C,M)};k(G,C=>{e(l).isDisabledCell?C(te):C(ne,!1)})}h(C=>{Ae(Y,`${`duel_field_cell duel_field_cell_${e(l).cellType} ${e(l).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1ycsdg6`),ht(Y,"colspan",e(l).cellType==="Hand"?7:1),Ae(b,`${C??""} svelte-1ycsdg6`)},[()=>`duel_field_cell_inner_box ${e(l).cellType} ${e(j)?"can_accept_drop":""} ${I()?"can_action":""} ${e(E)?"is_selected":e(A)?"is_selectable":""} `],he),ke("dragover",b,ce),ke("drop",b,je),s(d,Y),dt()}Pa(["click"]);const Kr=(d,i,t=void 0,v="!!!circular reference!!!")=>{let p=[];return JSON.stringify(d,(c,u)=>{if(typeof u=="object"){if(p.indexOf(u)>-1)return v;p.push(u)}let l=u;if(i&&(l=i(c,u)),typeof l=="function")return l.toString();if(l!==u&&typeof l=="object"){if(p.indexOf(l)>-1)return v;p.push(l)}return l},t)};var zr=o('<div class="title svelte-14z6bdh"> </div>'),Vr=o('<div class="title svelte-14z6bdh"> </div>'),Gr=o('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),Xr=o('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),Qr=o("<div><!> <!></div>"),Jr=o('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),Zr=o("<div><!> <!></div>"),es=o("<div><!> <!></div>"),ts=o('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function as(d,i){lt(i,!1);let t=De(void 0),v=Ie(i,"log",8),p,c=De([]);const u=()=>{const D=((p==null?void 0:p.seq)??-1)+1;v().records.slice(D).forEach(n=>{if(!p){S(c,[[[[n]]]]),p=n;return}if(!e(c)[n.clock.turn]){$e(c,e(c)[n.clock.turn]=[[[n]]]),p=n;return}if(!e(c)[n.clock.turn][n.clock.phaseSeq]){$e(c,e(c)[n.clock.turn][n.clock.phaseSeq]=[[n]]),p=n;return}if(p.clock.chainSeq===n.clock.chainSeq&&p.clock.chainBlockSeq===n.clock.chainBlockSeq&&p.duelist===n.duelist){e(c)[n.clock.turn][n.clock.phaseSeq].slice(-1)[0].push(n),p=n;return}e(c)[n.clock.turn][n.clock.phaseSeq].push([n]),p=n}),S(c,e(c)),Xa().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};v().onUpdate.append(u),v().duel.view.onDuelUpdate.append(u),u(),vt();var l=Se(),U=N(l);{var z=D=>{var n=ts(),R=r(a(n),2);oe(R,5,()=>e(c),ve,(F,H)=>{var O=es(),E=a(O);{var A=le=>{var Be=zr(),j=a(Be);h(()=>y(j,`ターン：${e(H)[0][0][0].clock.turn??""}`)),s(le,Be)};k(E,le=>{e(H)[0][0][0].clock.turn>0&&le(A)})}var se=r(E,2);oe(se,1,()=>e(H),ve,(le,Be)=>{var j=Zr(),$=a(j);{var Q=Ce=>{var ie=Vr(),de=a(ie);h(()=>y(de,e(Be)[0][0].clock.period.name)),s(Ce,ie)};k($,Ce=>{e(Be)[0][0].clock.turn>0&&Ce(Q)})}var _e=r($,2);oe(_e,1,()=>e(Be),ve,(Ce,ie)=>{var de=Jr();const Ee=he(()=>{var Y;return((Y=e(ie).find(b=>b.chainNumber!==void 0))==null?void 0:Y.chainNumber)??0});var B=a(de),I=a(B),V=a(I),ce=r(I,2);{var je=Y=>{var b=Gr(),G=a(b);h(()=>y(G,`チェーン：${e(Ee)??""}`)),s(Y,b)};k(ce,Y=>{e(Ee)&&Y(je)})}var ue=r(B,2);oe(ue,1,()=>e(ie),ve,(Y,b)=>{var G=Qr(),te=a(G);{var ne=ee=>{var re=at();h(()=>y(re,e(b).text)),s(ee,re)},C=ee=>{var re=Se(),me=N(re);{var f=_=>{var m=at();h((P,q,we)=>y(m,`移動：${P??""} ${q??""} ⇒ ${we??""}`),[()=>{var P;return(P=e(b).mainEntity)==null?void 0:P.toString()},()=>{var P;return(P=e(b).from)==null?void 0:P.toString()},()=>{var P;return(P=e(b).to)==null?void 0:P.toString()}],he),s(_,m)},w=_=>{var m=Se(),P=N(m);{var q=be=>{var fe=at();h((X,J)=>y(fe,`生成：${X??""} void ⇒ ${J??""}`),[()=>{var X;return(X=e(b).mainEntity)==null?void 0:X.toString()},()=>{var X;return(X=e(b).to)==null?void 0:X.toString()}],he),s(be,fe)},we=be=>{var fe=Se(),X=N(fe);{var J=xe=>{var Le=at();h((Fe,Ne)=>y(Le,`消滅：${Fe??""} ${Ne??""} ⇒ void`),[()=>{var Fe;return(Fe=e(b).mainEntity)==null?void 0:Fe.toString()},()=>{var Fe;return(Fe=e(b).from)==null?void 0:Fe.toString()}],he),s(xe,Le)},W=xe=>{var Le=at();h(()=>y(Le,e(b).text)),s(xe,Le)};k(X,xe=>{e(b).type==="EntityDisappear"?xe(J):xe(W,!1)},!0)}s(be,fe)};k(P,be=>{e(b).type==="EntityAppear"?be(q):be(we,!1)},!0)}s(_,m)};k(me,_=>{e(b).type==="EntityMove"?_(f):_(w,!1)},!0)}s(ee,re)};k(te,ee=>{e(b).type==="ChainBlockHeader"?ee(ne):ee(C,!1)})}var M=r(te,2);{var L=ee=>{var re=Xr(),me=a(re);h(f=>ht(me,"href",f),[()=>window.URL.createObjectURL(new Blob([Kr(e(b).error,(f,w)=>["pool","bundles","duel"].includes(f)||typeof w=="function"?void 0:w,4)],{type:"text/plain"}))],he),s(ee,re)};k(M,ee=>{e(b).error&&ee(L)})}h(ee=>Ae(G,`duel_log_record duel_log_record_${ee??""} svelte-14z6bdh`),[()=>e(b).type.toSnakeCase()],he),s(Y,G)}),h(()=>{var Y,b,G;Ae(de,`duel_log_block_duelist duel_log_block_duelist_${((Y=e(ie)[0].duelist)==null?void 0:Y.seat)??"system"} svelte-14z6bdh`),Ae(I,`duelist ${((b=e(ie)[0].duelist)==null?void 0:b.seat)??""} svelte-14z6bdh`),y(V,((G=e(ie)[0].duelist)==null?void 0:G.profile.name)||"SYSTEM")}),s(Ce,de)}),h(()=>Ae(j,`duel_log_block_phase duel_log_block_phase_${e(Be)[0][0].clock.period.key??""} svelte-14z6bdh`)),s(le,j)}),h(()=>Ae(O,`duel_log_block_turn duel_log_block_turn_${e(H)[0][0][0].clock.turn??""} svelte-14z6bdh`)),s(F,O)}),Qa(R,F=>S(t,F),()=>e(t)),s(D,n)};k(U,D=>{(v().duel.view.infoBoardState==="Log"||v().duel.view.infoBoardState==="Default")&&D(z)})}s(d,l),dt()}var rs=o("<div><div> </div> <div> </div></div>");function La(d,i){lt(i,!1);let t=Ie(i,"duelist",12),v=De(0),p=De();const c=async()=>{const R=t().lp-e(v);if(!e(p)||Math.abs(R)<10){S(v,t().lp),e(p)&&(e(p)(),S(p,void 0));return}S(v,e(v)+Math.floor(Math.random()*R)),await Lt(100),c()},u=()=>{t(t()),!e(p)&&t().lp!==e(v)&&new Promise(R=>{S(p,R),Math.abs(t().lp-e(v)),c()})};t().duel.log.onUpdate.append(u),c(),vt();var l=rs(),U=a(l),z=a(U),D=r(U,2),n=a(D);h(R=>{Ae(l,`duelist duelist_${R??""} svelte-1sy3trd`),Ae(U,`duelist_name duelist_${R??""}_name svelte-1sy3trd`),y(z,t().profile.name),Ae(D,`duelist_lp ${(e(p)?"vibration":"")??""} svelte-1sy3trd`),y(n,e(v))},[()=>t().seat.toLowerCase()],he),s(d,l),dt()}const ss=(d,i,t)=>(i(i()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),is=(d,i,t)=>(i(i()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var ns=o('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),os=o('<div></div> <div class="svelte-1uevs9j"> </div>',1),ls=o("<div> </div>"),vs=o('<span class="svelte-1uevs9j">/</span> <div class="monster_defense svelte-1uevs9j"> </div>',1),ds=o("<div> </div>"),cs=o('<div class="duel_card_info_row svelte-1uevs9j"><!> <!> <div style="flex-grow: 1;" class="svelte-1uevs9j"></div> <div class="monster_attack svelte-1uevs9j"> </div> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),_s=o('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),us=o('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),fs=o("<!> <!>",1),ps=o('<pre class="description svelte-1uevs9j"> </pre>'),hs=o('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),ys=o('<pre class="description svelte-1uevs9j"> </pre>'),gs=o('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),ms=o('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),bs=o('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),xs=o("[ <!> ],",1),ks=o('<div class="svelte-1uevs9j"> <!></div>'),ws=o('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),Ds=o('<div class="svelte-1uevs9j"> </div>'),Cs=o('<div class="svelte-1uevs9j"> </div>'),js=o('<div class="svelte-1uevs9j"> </div>'),$s=o('<div class="svelte-1uevs9j"> </div>'),Ss=o('<div class="svelte-1uevs9j"> </div>'),Ms=o('<div class="svelte-1uevs9j"> </div>'),Ts=o('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Bs=o('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Es=o('<div class="svelte-1uevs9j">※テスト用カードです</div>'),As=o('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),Ys=o('<div class="duel_card_info_links svelte-1uevs9j"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a> <!></div>'),Us=o("<!> <!>",1),Ls=o('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Ns(d,i){lt(i,!1);let t=Ie(i,"entity",8,void 0),v=Ie(i,"mode",12,"Normal");const p=async()=>{if(!t())return;const D=(await Rt).getCardInfo(t().origin.name);if(D)return D.cardId!==void 0&&!D.description&&!D.pendulumDescription&&await qa([D.cardId]),D},c=()=>t()&&t().entityType==="Card"&&(t().origin.cardId??!1)?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t().origin.cardId}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:"";vt();var u=Se(),l=N(u);{var U=z=>{var D=Ls();D.__click=[ss,v,t],D.__contextmenu=[is,v,t];var n=a(D),R=a(n),F=a(R),H=a(F),O=r(R,2),E=a(O),A=a(E),se=r(E,2),le=a(se),Be=r(O,2);{var j=B=>{var I=fs(),V=N(I);{var ce=b=>{var G=ns(),te=a(G),ne=a(te),C=r(te,2),M=a(C);h(()=>{y(ne,`◀ ${t().psL??""}`),y(M,`${t().psR??""} ▶`)}),s(b,G)};k(V,b=>{var G;(G=t().origin.monsterCategories)!=null&&G.includes("Pendulum")&&b(ce)})}var je=r(V,2);{var ue=b=>{var G=cs(),te=N(G),ne=a(te);oe(ne,1,()=>t().attr,ve,(f,w)=>{var _=os(),m=N(_),P=r(m,2),q=a(P);h(()=>{Ae(m,`monster_attr ${e(w)??""} svelte-1uevs9j`),y(q,`${_a[e(w)]??""}属性`)}),s(f,_)});var C=r(ne,2);oe(C,1,()=>t().types,ve,(f,w)=>{var _=ls(),m=a(_);h(()=>{Ae(_,`monster_cat ${e(w)??""} svelte-1uevs9j`),y(m,`${ea[e(w)]??""}${ua[e(w)]??""}族`)}),s(f,_)});var M=r(C,4),L=a(M),ee=r(M,2);{var re=f=>{var w=vs(),_=r(N(w),2),m=a(_);h(()=>y(m,t().def??"?")),s(f,w)};k(ee,f=>{var w;(w=t().status.monsterCategories)!=null&&w.includes("Link")||f(re)})}var me=r(te,2);oe(me,5,()=>t().status.monsterCategories??[],ve,(f,w)=>{var _=ds(),m=a(_);h(()=>{Ae(_,`monster_cat ${e(w)??""} svelte-1uevs9j`),y(m,`${ta[e(w)]??""}${fa[e(w)]??""}`)}),s(f,_)}),h(()=>y(L,t().atk??"?")),s(b,G)},Y=b=>{var G=Se(),te=N(G);{var ne=M=>{var L=_s(),ee=r(a(L),2),re=a(ee);h(()=>y(re,`${aa[t().status.spellCategory]??""}魔法`)),s(M,L)},C=M=>{var L=Se(),ee=N(L);{var re=me=>{var f=us(),w=r(a(f),2),_=a(w);h(()=>y(_,`${ra[t().status.trapCategory]??""}罠`)),s(me,f)};k(ee,me=>{t().kind==="Trap"&&t().status.trapCategory&&me(re)},!0)}s(M,L)};k(te,M=>{t().kind==="Spell"&&t().status.spellCategory?M(ne):M(C,!1)},!0)}s(b,G)};k(je,b=>{t().kind==="Monster"?b(ue):b(Y,!1)})}s(B,I)};k(Be,B=>{v()!=="Debug"&&B(j)})}var $=r(n,2),Q=a($);{var _e=B=>{var I=gs(),V=N(I);{var ce=Y=>{var b=hs(),G=a(b);ot(G,p,te=>{var ne=at('"読み込み中"');s(te,ne)},(te,ne)=>{var C=ps(),M=a(C);h(()=>{var L;return y(M,(L=e(ne))==null?void 0:L.pendulumDescription)}),s(te,C)}),s(Y,b)};k(V,Y=>{var b;(b=t().status.monsterCategories)!=null&&b.includes("Pendulum")&&Y(ce)})}var je=r(V,2),ue=a(je);ot(ue,p,Y=>{var b=at('"読み込み中"');s(Y,b)},(Y,b)=>{var G=ys(),te=a(G);h(()=>{var ne;return y(te,(ne=e(b))==null?void 0:ne.description)}),s(Y,G)}),s(B,I)},Ce=B=>{var I=Se(),V=N(I);{var ce=ue=>{var Y=Se(),b=N(Y);{var G=te=>{var ne=bs(),C=r(a(ne),2);oe(C,5,()=>t().actions,ve,(M,L)=>{var ee=Se();const re=he(()=>e(L).actionCountUpperBound),me=he(()=>e(L).actionCount);var f=N(ee);{var w=_=>{var m=ms(),P=a(m),q=a(P),we=r(P,2),be=a(we),fe=r(we,4),X=a(fe);h(()=>{y(q,e(L).title),y(be,e(me)),y(X,e(re))}),s(_,m)};k(f,_=>{e(re)!==void 0&&e(me)!==void 0&&_(w)})}s(M,ee)}),s(te,ne)};k(b,te=>{t().actions.some(ne=>ne.actionCountUpperBoundKey)&&te(G)})}s(ue,Y)},je=ue=>{var Y=Ts(),b=a(Y),G=a(b);oe(G,0,()=>["info","status"],ve,(x,g)=>{var T=ws(),Z=N(T),ye=a(Z),Me=r(Z,2);oe(Me,1,()=>Object.entries(t()[g]),ve,(pe,Te)=>{let ze=()=>e(Te)[0],Ue=()=>e(Te)[1];var Ve=ks(),ct=a(Ve),_t=r(ct);{var xt=Oe=>{var Ge=xs(),it=r(N(Ge));oe(it,1,Ue,ve,(wt,Mt)=>{var Dt=at();h($t=>y(Dt,`${$t??""},`),[()=>e(Mt).toString()],he),s(wt,Dt)}),s(Oe,Ge)},Ke=Oe=>{var Ge=at();h(it=>y(Ge,`${it??""},`),[()=>{var it;return(it=Ue())==null?void 0:it.toString()}],he),s(Oe,Ge)};k(_t,Oe=>{Array.isArray(Ue())?Oe(xt):Oe(Ke,!1)})}h(()=>y(ct,`"${ze()??""}" : `)),s(pe,Ve)});var K=r(Me,2);K.textContent="},",h(()=>y(ye,`"${g??""}" :{`)),s(x,T)});var te=r(G,2);te.textContent='"actions" :[';var ne=r(te,2);oe(ne,1,()=>t().actions,ve,(x,g)=>{var T=Ds(),Z=a(T);h(()=>y(Z,`"${e(g).playType??""} ${e(g).title??""}",`)),s(x,T)});var C=r(ne,2);C.textContent="],";var M=r(C,2);M.textContent='"substituteEffects" :[';var L=r(M,2);oe(L,1,()=>t().substituteEffects,ve,(x,g)=>{var T=Cs(),Z=a(T);h(()=>y(Z,`"${e(g).title??""}",`)),s(x,T)});var ee=r(L,2);ee.textContent="],";var re=r(ee,2);re.textContent='"continuousEffects" :[';var me=r(re,2);oe(me,1,()=>t().continuousEffects,ve,(x,g)=>{var T=js(),Z=a(T);h(()=>y(Z,`"${e(g).isStarted??""}",`)),s(x,T)});var f=r(me,2);f.textContent="],";var w=r(f,2);w.textContent='"procFilters" :[';var _=r(w,2);oe(_,1,()=>t().procFilterBundle.operators,ve,(x,g)=>{var T=$s(),Z=a(T);h(ye=>y(Z,`"${ye??""} ${e(g).title??""} ${e(g).isEffective??""} ",`),[()=>e(g).isSpawnedBy.toString()],he),s(x,T)});var m=r(_,2);m.textContent="],";var P=r(m,2);P.textContent='"numericStateOperators" :[';var q=r(P,2);oe(q,1,()=>t().numericOprsBundle.operators,ve,(x,g)=>{var T=Ss(),Z=a(T);h(ye=>y(Z,`"${ye??""} ${e(g).title??""} ${e(g).isEffective??""} ${e(g).isContinuous??""} ${e(g).targetState??""} ${e(g).targetStateGen??""} ",`),[()=>e(g).isSpawnedBy.toString()],he),s(x,T)});var we=r(q,2);we.textContent="],";var be=r(we,2);be.textContent='"stateOperators" :[';var fe=r(be,2);oe(fe,1,()=>t().statusOperatorBundle.operators,ve,(x,g)=>{var T=Ms(),Z=a(T);h(ye=>y(Z,`"${ye??""} ${e(g).title??""} ${e(g).isEffective??""} ",`),[()=>e(g).isSpawnedBy.toString()],he),s(x,T)});var X=r(fe,2);X.textContent="],";var J=r(X,2);J.textContent='"lastMoveLogRecord" :{';var W=r(J,2),xe=a(W),Le=r(W,2),Fe=a(Le),Ne=r(Le,2),Ye=a(Ne),We=r(Ne,2);We.textContent="},",h((x,g)=>{y(xe,`"movedBy":"${x??""}",`),y(Fe,`"movedAs":"${g??""}",`),y(Ye,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var x;return(x=t().moveLog.latestRecord.movedBy)==null?void 0:x.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],he),s(ue,Y)};k(V,ue=>{v()==="Detail"?ue(ce):ue(je,!1)},!0)}s(B,I)};k(Q,B=>{v()==="Normal"?B(_e):B(Ce,!1)})}var ie=r($,2),de=a(ie);{var Ee=B=>{var I=Us(),V=N(I);{var ce=b=>{var G=Bs();s(b,G)};k(V,b=>{t().origin.isOldVersion&&b(ce)})}var je=r(V,2);{var ue=b=>{var G=Es();s(b,G)},Y=b=>{var G=Ys(),te=a(G),ne=r(te,2);{var C=M=>{var L=As(),ee=a(L);h(re=>{var me;ht(L,"href",re),y(ee,`⇒${((me=t())!=null&&me.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[c],he),s(M,L)};k(ne,M=>{t()&&t().entityType==="Card"&&M(C)})}h(()=>ht(te,"href",`https://yugioh-wiki.net/index.php?${t().origin.wikiEncodedName}`)),s(b,G)};k(je,b=>{t().origin.isForTest?b(ue):b(Y,!1)})}s(B,I)};k(de,B=>{t()&&B(Ee)})}h((B,I,V)=>{Ae(D,`duel_card duel_card_info ${t().origin.kind??""} ${B??""} svelte-1uevs9j`),y(H,t().nm),y(A,I),y(le,V)},[()=>{var B;return(B=t().origin.monsterCategories)==null?void 0:B.join(" ")},()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],he),s(z,D)};k(l,z=>{t()&&z(U)})}s(d,u),dt()}Pa(["click","contextmenu"]);var Ps=o('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),qs=o('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),Fs=o('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Hs(d,i){lt(i,!1);let t=Ie(i,"cell",12);const v=()=>{t(t())},p=U=>t().cardEntities.filter(z=>z.face===U);t().field.duel.view.onDuelUpdate.append(v),vt();var c=Se(),u=N(c);{var l=U=>{var z=Fs(),D=a(z),n=a(D),R=a(n),F=r(n,2),H=a(F),O=r(D,2);oe(O,4,()=>["FaceUp","FaceDown"],ve,(E,A)=>{var se=Se(),le=N(se);{var Be=j=>{var $=qs(),Q=a($),_e=a(Q),Ce=r(Q,2);oe(Ce,1,()=>p(A).toSorted(Ja),ve,(ie,de)=>{var Ee=Ps(),B=a(Ee);const I=he(()=>t().owner===t().field.duel.duelists.Below);Ut(B,{get entity(){return e(de)},get isVisibleForcibly(){return e(I)},isWideMode:!0,cardActionResolve:void 0}),s(ie,Ee)}),h(()=>y(_e,A==="FaceUp"?"表向き":"裏向き")),s(j,$)};k(le,j=>{p(A).length&&j(Be)})}s(E,se)}),h(()=>{var E;y(R,(E=t().owner)==null?void 0:E.profile.name),y(H,t().cellType)}),s(U,z)};k(u,U=>{t().field.duel.view.infoBoardState==="CellInfo"&&U(l)})}s(d,c),dt()}var Is=o('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),Os=o('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function Rs(d,i){lt(i,!1);let t=Ie(i,"viewController",8),v=Ie(i,"userProfile",12);vt();var p=Se(),c=N(p);{var u=l=>{var U=Os(),z=r(a(U),2),D=r(a(z),2);oe(D,1,()=>tr,ve,(n,R)=>{var F=Is(),H=a(F),O=a(H),E=r(H,2),A=a(E);h(()=>y(A,Za[e(R)])),er(O,()=>v().chainConfig[e(R)],se=>v(v().chainConfig[e(R)]=se,!0)),ke("change",O,()=>v().save()),s(n,F)}),s(l,U)};k(c,l=>{t().infoBoardState==="Config"&&l(u)})}s(d,p),dt()}function Ws(d,{from:i,to:t},v={}){var{delay:p=0,duration:c=$=>Math.sqrt($)*120,easing:u=la}=v,l=getComputedStyle(d),U=l.transform==="none"?"":l.transform,[z,D]=l.transformOrigin.split(" ").map(parseFloat);z/=d.clientWidth,D/=d.clientHeight;var n=Ks(d),R=d.clientWidth/t.width/n,F=d.clientHeight/t.height/n,H=i.left+i.width*z,O=i.top+i.height*D,E=t.left+t.width*z,A=t.top+t.height*D,se=(H-E)*R,le=(O-A)*F,Be=i.width/t.width,j=i.height/t.height;return{delay:p,duration:typeof c=="function"?c(Math.sqrt(se*se+le*le)):c,easing:u,css:($,Q)=>{var _e=Q*se,Ce=Q*le,ie=$+Q*Be,de=$+Q*j;return`transform: ${U} translate(${_e}px, ${Ce}px) scale(${ie}, ${de});`}}}function Ks(d){if("currentCSSZoom"in d)return d.currentCSSZoom;for(var i=d,t=1;i!==null;)t*=+getComputedStyle(i).zoom,i=i.parentElement;return t}var zs=o('<div class="chain_number svelte-lqu21u"> </div>'),Vs=o('<div class="duel_card_row svelte-lqu21u"> </div>'),Gs=o('<div class="appendix svelte-lqu21u"> </div>'),Xs=o('<div class="appendix_wrapper svelte-lqu21u"></div>'),Qs=o('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),Js=o("<div></div>");function Zs(d,i){lt(i,!1);let t=Ie(i,"duel",8),v=Ie(i,"position",8,"left");const p=-100,c=()=>v()==="left"?-100:100;let u=De([]),l=Promise.resolve(),U=Promise.resolve();const z=1e3,D=500,n=400,R=H=>{const O={...H};O.isKnown=H.chainBlockInfo.action.entity.controller.duelistType==="Player"||H.chainBlockInfo.action.entity.face==="FaceUp",O.chainBlockInfo.onStateChange.append(E=>{if(E==="done"||E==="failed"||E==="negated")return l=l.then(async()=>{const A=new Date().getTime()-O.chainBlockInfo.wasSpawnedAt.getTime();A<z&&await Lt(z-A),S(u,e(u).filter(se=>se.seq!==O.seq)),await Lt(D+n)}).then(),"RemoveMe";S(u,e(u))}),U=U.then(async()=>{S(u,[O,...e(u)].sort((E,A)=>ar.isSameChain(E.clock,A.clock)&&E.chainBlockInfo.action.isWithChainBlock&&A.chainBlockInfo.action.isWithChainBlock?A.clock.totalProcSeq-E.clock.totalProcSeq:E.clock.totalProcSeq-A.clock.totalProcSeq)),await Lt(300)}),l=l.then(()=>Lt(1e3))};t().chainBlockLog.onInsert.append(R),vt();var F=Js();oe(F,13,()=>e(u),H=>H.seq,(H,O)=>{var E=Qs();const A=he(()=>{const{activator:V,action:ce,appendix:je}=e(O).chainBlockInfo;return{activator:V,action:ce,appendix:je}});var se=a(E),le=a(se);{var Be=V=>{var ce=zs(),je=a(ce);h(()=>y(je,`チェーン：${e(O).chainBlockInfo.chainNumber??""}`)),s(V,ce)};k(le,V=>{e(O).chainBlockInfo.chainNumber&&V(Be)})}var j=r(le,2),$=a(j),Q=r(j,2),_e=a(Q);{var Ce=V=>{var ce=Vs(),je=a(ce);h(()=>y(je,e(O).isKnown?e(A).action.entity.nm:"？？？")),s(V,ce)};k(_e,V=>{(e(A).action.entity.entityType==="Card"||e(A).action.entity.entityType==="Token")&&V(Ce)})}var ie=r(_e,2),de=a(ie),Ee=a(de),B=r(de,2);{var I=V=>{var ce=Xs();oe(ce,5,()=>e(A).appendix,ve,(je,ue)=>{var Y=Gs(),b=a(Y);h(()=>y(b,e(ue))),s(je,Y)}),s(V,ce)};k(B,V=>{e(A).appendix&&V(I)})}h((V,ce,je)=>{Ae(E,`cut_in_row ${(!e(O).chainBlockInfo.chainNumber||e(O).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Ae(se,`cut_in_item cut_in_item_${V??""} cut_in_item_${e(O).chainBlockInfo.state??""} svelte-lqu21u`),Ae(j,`duelist_name duelist_${V??""}_name svelte-lqu21u`),y($,e(A).activator.profile.name),Ae(Q,`duel_card duel_card_${V??""} ${ce??""} ${(e(O).isKnown?e(A).action.entity.origin.kind:"")??""} ${e(A).action.entity.entityType??""}  svelte-lqu21u`),y(Ee,je)},[()=>e(A).activator.seat.toLowerCase(),()=>e(O).isKnown?(e(A).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(A).action.toString()],he),ae(3,se,()=>wr,()=>new Date().getTime()-e(O).chainBlockInfo.wasSpawnedAt.getTime()<z?{x:c(),duration:n}:{y:p,duration:n}),rr(E,()=>Ws,()=>({duration:D})),s(H,E)}),h(()=>Ae(F,`cut_in_container cut_in_container_${v()??""} svelte-lqu21u`)),s(d,F),dt()}const ei=Dr({duration:400});var ti=o('<div class="duel_desk_left v_flex svelte-1i63tk9"><!> <!> <!></div>'),ai=o('<button class="duel_field_header_message svelte-1i63tk9"> </button> <div class="duel_field_header_buttons svelte-1i63tk9"><button class="svelte-1i63tk9">サレンダー</button></div>',1),ri=o("<tr></tr>"),si=o('<table class="duel_field svelte-1i63tk9"><tbody class="svelte-1i63tk9"></tbody></table>'),ii=o('<button class="svelte-1i63tk9">OK</button>'),ni=o('<button class="svelte-1i63tk9">cancel</button>'),oi=o("<!> <!>",1),li=o('<button class="svelte-1i63tk9"> </button>'),vi=o('<div style="text-align: left;"><!> <!> <!></div>'),di=o('<div><!> <div class=" duel_desk_center v_flex svelte-1i63tk9"><div class="duel_field_header svelte-1i63tk9"><!></div> <div class="duel_field_body svelte-1i63tk9"><!></div> <div class="duel_field_footer svelte-1i63tk9"><!></div></div> <!></div> <div style="position:fixed;left:0;bottom:0"> </div> <!> <div><!></div>',1);function ci(d,i){lt(i,!1);let t=Ie(i,"duel",12),v=Ie(i,"userProfile",8),p=De(0),c=De(0),u=De([]),l=De([]),U=()=>{},z=De([]),D=De(),n=De(),R=De(()=>!1),F=De(!1);const H=_=>{U=_.resolve,S(z,_.dummyActionInfos.filter(m=>m.action.entity.entityType==="Duelist").filter(m=>m.action.entity.controller.seat==="Below")),S(D,void 0),S(n,void 0),S(l,[]),S(u,[]),S(F,!1),_.entitiesChoices&&(S(D,_.entitiesChoices),S(R,()=>{var m;return((m=_.entitiesChoices)==null?void 0:m.validator(e(u)))??!1}),S(F,_.entitiesChoices.cancelable),e(D).selectables.every(m=>m.cell.isPlayFieldCell&&m.getIndexInCell()===0||m.cell.cellType==="Hand"&&m.controller.duelistType==="Player"||m.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:_.entitiesChoices,chainBlockInfos:_.chainBlockInfos,cancelable:_.entitiesChoices.cancelable}).then(m=>{U({selectedEntities:m})})),_.cellsChoices&&(S(n,_.cellsChoices),S(R,()=>{var m;return((m=_.cellsChoices)==null?void 0:m.validator(e(l)))??!1}),S(F,_.cellsChoices.cancelable))};t().view.onWaitStart.append(H);const O=()=>{U=()=>{},S(n,void 0),S(D,void 0),S(l,[]),S(u,[]),S(R,()=>!1),S(F,!1)};t().view.onWaitEnd.append(O);let E=De(void 0),A=De("Normal");const se=({card:_,mode:m})=>{S(E,_),S(A,m??(e(E)===_||e(A)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(se);const le=()=>{t(t())};t().view.onDuelUpdate.append(le),t().log.onUpdate.append(le);const Be=()=>{e(D)&&e(D).validator(e(u))&&U({selectedEntities:e(u)}),e(n)&&e(n).validator(e(l))&&U({selectedCells:e(l)})},j=()=>{U({})},$=_=>{U({actionInfo:_})},Q=()=>{U({surrender:!0})};t().main();const _e=()=>e(p)<=1400?"compact":"wide";vt();var Ce=di(),ie=N(Ce),de=a(ie);{var Ee=_=>{var m=ti(),P=a(m);La(P,{get duelist(){return t().duelists.Above}});var q=r(P,2);Ns(q,{get entity(){return e(E)},get mode(){return e(A)}});var we=r(q,2);La(we,{get duelist(){return t().duelists.Below}}),s(_,m)};k(de,_=>{_e()==="wide"&&_(Ee)})}var B=r(de,2),I=a(B),V=a(I);{var ce=_=>{var m=ai(),P=N(m),q=a(P),we=r(P,2),be=a(we);h(()=>y(q,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),ke("click",P,()=>{t(t().view.infoBoardState="Log",!0)}),ke("click",be,Q),s(_,m)};k(V,_=>{t().isEnded||_(ce)})}var je=r(I,2),ue=a(je);{var Y=_=>{var m=si(),P=a(m);oe(P,5,()=>t().field.cells,ve,(q,we,be)=>{var fe=ri();Ae(fe,`${`duel_desk_row_${be}`??""} svelte-1i63tk9`),oe(fe,5,()=>e(we),ve,(X,J,W)=>{Wr(X,{get view(){return t().view},row:be,column:W,get selectedEntities(){return e(u)},set selectedEntities(xe){S(u,xe)},get selectedCells(){return e(l)},set selectedCells(xe){S(l,xe)},$$legacy:!0})}),s(q,fe)}),s(_,m)};k(ue,_=>{t().clock.turn>0&&_(Y)})}var b=r(je,2),G=a(b);{var te=_=>{var m=oi(),P=N(m);{var q=fe=>{var X=ii();h(J=>X.disabled=J,[()=>!e(R)()],he),ke("click",X,Be),s(fe,X)};k(P,fe=>{((e(D)&&e(D).qty)??(e(n)&&e(n).qty)??9999)>1&&fe(q)})}var we=r(P,2);{var be=fe=>{var X=ni();ke("click",X,j),s(fe,X)};k(we,fe=>{e(F)&&fe(be)})}s(_,m)},ne=_=>{var m=Se(),P=N(m);oe(P,1,()=>e(z),ve,(q,we)=>{var be=li(),fe=a(be);h(()=>y(fe,e(we).action.title)),ke("click",be,()=>$(e(we))),s(q,be)}),s(_,m)};k(G,_=>{e(D)&&e(D).selectables.length||e(n)&&e(n).selectables?_(te):_(ne,!1)})}var C=r(B,2);{var M=_=>{var m=vi(),P=a(m);as(P,{get log(){return t().log}});var q=r(P,2);Hs(q,{get cell(){return t().view.infoBoardCell}});var we=r(q,2);Rs(we,{get userProfile(){return v()},get viewController(){return t().view}}),h(be=>Ae(m,`duel_desk_right duel_desk_right_${be??""}  svelte-1i63tk9`),[()=>t().view.infoBoardState.toLowerCase()],he),ae(3,m,()=>ge,()=>({duration:e(p)>1400?0:200,axis:"x"})),s(_,m)};k(C,_=>{(e(p)>1400||t().view.infoBoardState!=="Default")&&_(M)})}var L=r(ie,2),ee=a(L),re=r(L,2);sr(re,{get modalController(){return t().view.modalController}});var me=r(re,2),f=a(me);const w=he(()=>_e()==="wide"?"right":"left");Zs(f,{get duel(){return t()},get position(){return e(w)}}),h((_,m)=>{Ae(ie,`flex duel_desk ${_??""}_mode svelte-1i63tk9`),y(ee,m),Ae(me,`cutin ${_??""}_mode svelte-1i63tk9`)},[_e,()=>t().clock.toFullString()],he),Xt("innerWidth",_=>S(p,_)),Xt("innerHeight",_=>S(c,_)),s(d,Ce),dt()}var _i=o('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),ui=o('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),fi=o("<div></div>"),pi=o("<!> <!> <!> <!> <!>",1),hi=o('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),yi=o('<li class="deck_editor_item svelte-niobyr"><div role="listitem"><div class="svelte-niobyr"><div class="svelte-niobyr"> </div> <div style="display:flex" class="svelte-niobyr"><div class="svelte-niobyr"><!> <!> <!></div> <div style="flex-grow: 1; width:0.1rem" class="svelte-niobyr"></div> <div class="svelte-niobyr"><!></div></div></div></div> <button class="button_style_reset svelte-niobyr">+</button> <button class="button_style_reset svelte-niobyr">-</button></li>'),gi=o('<div class="deck_editor_card_kind svelte-niobyr"><div class="deck_editor_card_kind_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <ul class="svelte-niobyr"></ul></div>'),mi=o('<div class="deck_editor_deck_type svelte-niobyr"><div class="deck_editor_deck_type_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <!></div>'),bi=o('<div class="svelte-niobyr">読み込み中...</div>'),xi=o('<div class="deck_editor_card_list svelte-niobyr"><!></div>');function Na(d,i){lt(i,!1);let t=Ie(i,"allCardInfos",8),v=Ie(i,"deckCardInfos",12),p=Ie(i,"mode",8),c=Ie(i,"onAttention",8),u=Ie(i,"searchCondition",8,void 0);const l={Deck:["Monster","Spell","Trap"],ExtraDeck:["Monster"]},U={Deck:{Monster:[],Spell:[],Trap:[]},ExtraDeck:{Monster:[],Spell:[],Trap:[]}},z=j=>{var $;return($=j.monsterCategories)!=null&&$.union(Qt).length?"ExtraDeck":"Deck"},D=j=>{Object.values(U).forEach($=>Object.values($).forEach(Q=>Q.reset())),j.filter($=>$.kind!=="XyzMaterial").forEach($=>{var _e;if($.kind==="XyzMaterial")return;const Q=(_e=$.monsterCategories)!=null&&_e.union(Qt).length?"ExtraDeck":"Deck";U[Q][$.kind].push($)}),Object.values(U).forEach($=>Object.values($).forEach(Q=>Q.sort(oa)))},n=p()==="List"?new Promise(j=>{D(t()),j()}):Promise.resolve(),R=()=>(p()==="Deck"&&(D(v()),S(E,v().length)),U),F=(j,$,Q)=>{v(v().filter(_e=>z(_e)!==$||_e.kind!==Q&&Q))},H=(j,$)=>{try{if(j.ctrlKey){v().push($);return}const Q=v().filter(Ce=>Ce.name===$.name).length;if(Q>2)return;const _e=j.shiftKey?3-Q:1;if(_e<1)return;v().push(...Array(_e).fill($))}finally{v().sort(oa),v(v())}},O=(j,$)=>{let Q=0;v(v().filter(_e=>_e.name!==$.name?!0:(Q++,!j.shiftKey&&Q>1))),v().sort(oa)};let E=De(100);const A=()=>{S(E,e(E)+10),!(e(E)>499)&&(e(E)>t().length+v().length||Lt(100).then(A))},se=(j,$,Q,_e)=>{if($===0&&_e==="Monster"&&(S(E,100),Lt(100).then(A)),!u())return!0;if(!u().cardKinds.includes(j.kind)||u().name.trim().length&&[j.name,...j.nameTags??[],...j.textTags??[]].every(ie=>!ie.includes(u().name))||!j.isImplemented&&!u().others.includes("implemented")||j.isForTest&&!u().others.includes("test")||j.isOldVersion&&!u().others.includes("oldVersion"))return!1;if(j.kind==="Monster"){if(j.attributes&&!u().monsterAttributes.union(j.attributes).length||j.types&&!u().monsterTypes.union(j.types).length)return!1;const Ce=j.level??j.rank??j.link;return Ct(u().starLowerBound)&&(Ce??0)<u().starLowerBound||Ct(u().starUpperBound)&&(Ce??0)>u().starUpperBound||Ct(u().atkLowerBound)&&(j.attack??0)<u().atkLowerBound||Ct(u().atkUpperBound)&&(j.attack??0)>u().atkUpperBound||Ct(u().defLowerBound)&&(j.defense??0)<u().defLowerBound||Ct(u().defUpperBound)&&(j.defense??0)>u().defUpperBound||Ct(u().atkPlusDef)&&(!Ct(j.attack)||!Ct(j.defense)||j.attack+j.defense!==u().atkPlusDef)||!j.monsterCategories?!1:j.monsterCategories.union(u().monsterCategories).length}if(j.kind==="Spell")return j.spellCategory&&u().spellCategories.includes(j.spellCategory);if(j.kind==="Trap")return j.trapCategory&&u().trapCategories.includes(j.trapCategory)};vt();var le=xi(),Be=a(le);ot(Be,()=>n,j=>{var $=bi();s(j,$)},j=>{var $=Se();const Q=he(R);var _e=N($);oe(_e,1,()=>nr,ve,(Ce,ie)=>{var de=mi();const Ee=he(()=>Object.values(e(Q)[e(ie)]).flatMap(Y=>Y));var B=a(de),I=a(B),V=a(I),ce=r(I,2);{var je=Y=>{var b=_i(),G=a(b);ke("click",G,te=>F(te,e(ie),void 0)),s(Y,b)};k(ce,Y=>{p()==="Deck"&&e(Ee).some(se)&&Y(je)})}var ue=r(B,2);oe(ue,1,()=>ca(e(Q)[e(ie)]).filter(Y=>l[e(ie)].includes(Y)),ve,(Y,b)=>{var G=gi();const te=he(()=>e(Q)[e(ie)][e(b)].filter((...me)=>se(...me,e(b))));var ne=a(G),C=a(ne),M=a(C),L=r(C,2);{var ee=me=>{var f=ui(),w=a(f);ke("click",w,_=>F(_,e(ie),e(b))),s(me,f)};k(L,me=>{p()==="Deck"&&e(te).length&&me(ee)})}var re=r(ne,2);oe(re,5,()=>e(te),ve,(me,f,w)=>{var _=Se(),m=N(_);{var P=q=>{var we=yi(),be=a(we),fe=a(be),X=a(fe),J=a(X),W=r(X,2),xe=a(W),Le=a(xe);{var Fe=K=>{var pe=pi(),Te=N(pe);{var ze=Ke=>{var Oe=at();h(()=>y(Oe,`★${e(f).level??""}`)),s(Ke,Oe)};k(Te,Ke=>{e(f).level&&Ke(ze)})}var Ue=r(Te,2);{var Ve=Ke=>{var Oe=at();h(()=>y(Oe,`☆${e(f).rank??""}`)),s(Ke,Oe)};k(Ue,Ke=>{e(f).rank&&Ke(Ve)})}var ct=r(Ue,2);oe(ct,1,()=>e(f).attributes??[],ve,(Ke,Oe)=>{var Ge=fi();h(()=>Ae(Ge,`monster_attr ${e(Oe)??""} svelte-niobyr`)),s(Ke,Ge)});var _t=r(ct,2);oe(_t,1,()=>e(f).types??[],ve,(Ke,Oe)=>{var Ge=at();h(()=>y(Ge,ea[e(Oe)])),s(Ke,Ge)});var xt=r(_t,2);oe(xt,1,()=>e(f).monsterCategories??[],ve,(Ke,Oe)=>{var Ge=at();h(()=>y(Ge,ta[e(Oe)])),s(Ke,Ge)}),s(K,pe)};k(Le,K=>{e(f).kind==="Monster"&&K(Fe)})}var Ne=r(Le,2);{var Ye=K=>{var pe=at();h(()=>y(pe,`${aa[e(f).spellCategory]??""}魔法`)),s(K,pe)};k(Ne,K=>{e(f).spellCategory&&K(Ye)})}var We=r(Ne,2);{var x=K=>{var pe=at();h(()=>y(pe,`${ra[e(f).trapCategory]??""}罠`)),s(K,pe)};k(We,K=>{e(f).trapCategory&&K(x)})}var g=r(xe,4),T=a(g);{var Z=K=>{var pe=hi(),Te=N(pe),ze=a(Te),Ue=r(Te,2),Ve=a(Ue);h(()=>{y(ze,e(f).attack??"?"),y(Ve,e(f).defense??"?")}),s(K,pe)};k(T,K=>{e(f).kind==="Monster"&&K(Z)})}var ye=r(be,2),Me=r(ye,2);h(K=>{Ae(be,`${K??""} svelte-niobyr`),y(J,e(f).name),ye.disabled=!e(f).isImplemented,ht(ye,"title",e(f).isImplemented?"※shiftキー同時押しで一括投入":""),Me.disabled=!e(f).isImplemented,ht(Me,"title",e(f).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>{var K,pe;return`deck_editor_card duel_card ${e(f).kind} ${(pe=(K=e(f))==null?void 0:K.monsterCategories)==null?void 0:pe.join(" ")} ${e(f).isImplemented?"is_implemented":"is_not_implemented"}`}],he),ke("mouseenter",be,()=>c()(e(f))),ke("click",ye,K=>H(K,e(f))),ke("click",Me,K=>O(K,e(f))),s(q,we)};k(m,q=>{w<e(E)&&q(P)})}s(me,_)}),h(()=>y(M,`${Fa[e(b)]??""}（${e(te).length??""} / ${e(Q)[e(ie)][e(b)].length??""}枚）`)),s(Y,G)}),h(Y=>y(V,`${ir[e(ie)]??""}（${Y??""} / ${e(Ee).length??""}枚）`),[()=>e(Ee).filter(se).length],he),s(Ce,de)}),s(j,$)}),s(d,le),dt()}var ki=o('<div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>'),wi=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),Di=o('<div></div> <div class="svelte-rccxcp"> </div>',1),Ci=o("<div> </div>"),ji=o('<span class="svelte-rccxcp">/</span> <div class="monster_defense svelte-rccxcp"> </div>',1),$i=o("<div> </div>"),Si=o('<div class="duel_card_info_row svelte-rccxcp"><!> <!> <div style="flex-grow: 1;" class="svelte-rccxcp"></div> <div class="monster_attack svelte-rccxcp"> </div> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),Mi=o('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Ti=o('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Bi=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※エラッタ前カードです</div></div>'),Ei=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),Ai=o('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),Yi=o('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <!></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!> <!></div></div>');function Ui(d,i){lt(i,!1);let t=Ie(i,"cardInfo",8,void 0);vt();var v=Se(),p=N(v);{var c=u=>{var l=Yi(),U=a(l),z=a(U),D=a(z),n=a(D),R=r(z,2);{var F=B=>{var I=ki(),V=a(I),ce=a(V),je=r(V,2),ue=a(je);h((Y,b)=>{y(ce,Y),y(ue,b)},[()=>"★".repeat(t().level||0),()=>"☆".repeat(t().rank||0)],he),s(B,I)};k(R,B=>{t().kind==="Monster"&&B(F)})}var H=r(U,2),O=a(H);{var E=B=>{var I=wi(),V=N(I),ce=a(V),je=a(ce),ue=a(je),Y=r(V,2),b=a(Y),G=a(b),te=r(b,2),ne=a(te);h(()=>{y(ue,t().pendulumDescription),y(G,`◀ ${t().pendulumScaleL??""}`),y(ne,`${t().pendulumScaleR??""} ▶`)}),s(B,I)};k(O,B=>{var I;(I=t().monsterCategories)!=null&&I.includes("Pendulum")&&B(E)})}var A=r(O,2);{var se=B=>{var I=Si(),V=N(I),ce=a(V);{var je=M=>{var L=Di(),ee=N(L),re=r(ee,2),me=a(re);h(()=>{Ae(ee,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),y(me,`${_a[t().attributes[0]]??""}属性`)}),s(M,L)};k(ce,M=>{t().attributes&&M(je)})}var ue=r(ce,2);{var Y=M=>{var L=Ci(),ee=a(L);h(()=>{Ae(L,`monster_cat ${t().types[0]??""} svelte-rccxcp`),y(ee,`${ea[t().types[0]]??""}${ua[t().types[0]]??""}族`)}),s(M,L)};k(ue,M=>{t().types&&M(Y)})}var b=r(ue,4),G=a(b),te=r(b,2);{var ne=M=>{var L=ji(),ee=r(N(L),2),re=a(ee);h(()=>y(re,t().defense??"?")),s(M,L)};k(te,M=>{var L;(L=t().monsterCategories)!=null&&L.includes("Link")||M(ne)})}var C=r(V,2);oe(C,5,()=>t().monsterCategories??[],ve,(M,L)=>{var ee=$i(),re=a(ee);h(()=>{Ae(ee,`monster_cat ${e(L)??""} svelte-rccxcp`),y(re,`${ta[e(L)]??""}${fa[e(L)]??""}`)}),s(M,ee)}),h(()=>y(G,t().attack??"?")),s(B,I)},le=B=>{var I=Se(),V=N(I);{var ce=ue=>{var Y=Mi(),b=r(a(Y),2),G=a(b);h(()=>y(G,`${aa[t().spellCategory]??""}魔法`)),s(ue,Y)},je=ue=>{var Y=Se(),b=N(Y);{var G=te=>{var ne=Ti(),C=r(a(ne),2),M=a(C);h(()=>y(M,`${ra[t().trapCategory]??""}罠`)),s(te,ne)};k(b,te=>{t().kind==="Trap"&&t().trapCategory&&te(G)},!0)}s(ue,Y)};k(V,ue=>{t().kind==="Spell"&&t().spellCategory?ue(ce):ue(je,!1)},!0)}s(B,I)};k(A,B=>{t().kind==="Monster"?B(se):B(le,!1)})}var Be=r(A,2),j=a(Be),$=a(j),Q=a($),_e=r(Be,2);{var Ce=B=>{var I=Bi();s(B,I)};k(_e,B=>{t().isOldVersion&&B(Ce)})}var ie=r(_e,2);{var de=B=>{var I=Ei();s(B,I)},Ee=B=>{var I=Ai(),V=a(I),ce=r(V,2),je=a(ce);h(ue=>{ht(V,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),ht(ce,"href",ue),y(je,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>or(t())],he),s(B,I)};k(ie,B=>{t().isForTest?B(de):B(Ee,!1)})}h(B=>{Ae(l,`duel_card duel_card_info ${t().kind??""} ${B??""} svelte-rccxcp`),y(n,t().name),y(Q,t().description)},[()=>{var B;return(B=t().monsterCategories)==null?void 0:B.join(" ")}],he),s(u,l)};k(p,u=>{t()&&u(c)})}s(d,v),dt()}const Li={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class Ni{constructor(){et(this,"DefaultSeparator1","/");et(this,"DefaultSeparator2"," ");et(this,"DefaultSeparator3",":");et(this,"createDate",i=>{if(!i)return;const t=new Date(i);if(!isNaN(t.getTime()))return t});et(this,"createDateOr",(i,t)=>this.createDate(i)||t||new Date);et(this,"truncateDate",i=>{const t=i||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});et(this,"addDate",(i,t)=>{const v=this.createDateOr(i);return v.setDate(v.getDate()+t),v});et(this,"addMonth",(i,t)=>{const v=this.createDateOr(i);return v.setMonth(v.getMonth()+t),v});et(this,"addYear",(i,t)=>{const v=this.createDateOr(i);return v.setFullYear(v.getFullYear()+t),v});et(this,"getDayOfWeek",(i,t="dddd")=>{const v=this.createDate(i);return v?Li[v.getDay()][t]:""});et(this,"formatToYYYYMMDD",(i,t=this.DefaultSeparator1)=>{const v=this.createDate(i);if(!v)return"";const p=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2),u=("0"+v.getDate()).slice(-2);return p+t+c+t+u});et(this,"formatToYYYYMM",(i,t=this.DefaultSeparator1)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const p=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2);return p+t+c});et(this,"formatToHHMMSS",(i,t=this.DefaultSeparator3)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const p=v.getHours(),c=v.getMinutes(),u=v.getSeconds();return("0"+p).slice(-2)+t+("0"+c).slice(-2)+t+("0"+u).slice(-2)});et(this,"formatToHHMM",(i,t=this.DefaultSeparator3)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const p=("0"+v.getHours()).slice(-2),c=("0"+v.getMinutes()).slice(-2);return p+t+c});et(this,"formatToYYYYMMDD_HHMM",(i,t=this.DefaultSeparator1,v=this.DefaultSeparator2,p=this.DefaultSeparator3)=>{const c=this.createDate(i);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMM(c,p):""});et(this,"formatToYYYYMMDD_HHMMSS",(i,t=this.DefaultSeparator1,v=this.DefaultSeparator2,p=this.DefaultSeparator3)=>{const c=this.createDate(i);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMMSS(c,p):""})}}const yt=new Ni;Date.prototype.truncateDate=function(){return yt.truncateDate(this)};Date.prototype.getCloneOr=function(d){return yt.createDateOr(this,d)};Date.prototype.addDate=function(d){return yt.addDate(this,d)};Date.prototype.addMonth=function(d){return yt.addDate(this,d)};Date.prototype.addYear=function(d){return yt.addDate(this,d)};Date.prototype.getDayOfWeek=function(d="dddd"){return yt.getDayOfWeek(this,d)};Date.prototype.formatToYYYYMM=function(d){return yt.formatToYYYYMM(this,d)};Date.prototype.formatToYYYYMMDD=function(d){return yt.formatToYYYYMMDD(this,d)};Date.prototype.formatToYYYYMMDD_HHMM=function(d,i,t){return yt.formatToYYYYMMDD_HHMM(this,d,i,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(d,i,t){return yt.formatToYYYYMMDD_HHMMSS(this,d,i,t)};Date.prototype.formatToHHMM=function(d){return yt.formatToHHMM(this,d)};Date.prototype.formatToHHMMSS=function(d){return yt.formatToHHMMSS(this,d)};var Pi=o('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),qi=o('<ul class="deck_info_list svelte-2wdgc8"></ul>'),Fi=o('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),Hi=o('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),Ii=o('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),Oi=o('<button class="svelte-2wdgc8">Cancel</button>'),Ri=o('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function Wi(d,i){lt(i,!1);let t=Ie(i,"eventHolder",8),v=Ie(i,"args",8),p=Ie(i,"resolve",8),c=De(Promise.resolve([])),u=De();const l=()=>{S(u,new DataTransfer().files),S(c,Promise.resolve([]))},U=async F=>{F.preventDefault(),console.log("hoge",F)},z=async F=>{F.preventDefault(),F.dataTransfer&&n(F.dataTransfer.files)},D=()=>{n(e(u))},n=async F=>{if(!F.length)return;const H=[],O=[];for(const E of F)try{O.push(...await bt.createfromJson(E))}catch(A){A instanceof Error&&H.push(A.message)}if(H.length){console.log(...H);return}S(c,e(c).then(()=>O))},R=l;vt(),lr(d,{get eventHolder(){return t()},get args(){return v()},$$slots:{body:(F,H)=>{var O=Hi(),E=a(O);ot(E,()=>Rt,null,(A,se)=>{var le=Se(),Be=N(le);ot(Be,()=>e(c),null,(j,$)=>{var Q=Se(),_e=N(Q);{var Ce=de=>{var Ee=qi();oe(Ee,5,()=>e($),ve,(B,I)=>{var V=Pi(),ce=a(V),je=a(ce),ue=r(ce,2),Y=a(ue),b=r(ue,2),G=a(b);h((te,ne,C)=>{y(je,e(I).name),y(Y,`${te??""}
                  /
                  ${ne??""}`),y(G,`最終使用日時 ： ${C??""}`)},[()=>e(I).cardNames.filter(te=>{var ne,C;return!((C=(ne=e(se).getCardInfo(te))==null?void 0:ne.monsterCategories)!=null&&C.union(Qt).length)}).length,()=>e(I).cardNames.filter(te=>{var ne,C;return(C=(ne=e(se).getCardInfo(te))==null?void 0:ne.monsterCategories)==null?void 0:C.union(Qt).length}).length,()=>e(I).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],he),s(B,V)}),s(de,Ee)},ie=de=>{var Ee=Fi(),B=r(a(Ee),2),I=a(B);vr(I,()=>e(u),V=>S(u,V)),ke("change",I,D),ke("cancel",I,R),ke("drop",Ee,z),ke("dragover",Ee,U),s(de,Ee)};k(_e,de=>{e($).length?de(Ce):de(ie,!1)})}s(j,Q)}),s(A,le)}),s(F,O)},footer:(F,H)=>{var O=Ri(),E=a(O);ot(E,()=>e(c),null,(A,se)=>{var le=Se(),Be=N(le);{var j=Q=>{var _e=Ii(),Ce=N(_e),ie=r(Ce,2),de=r(ie,2);h(()=>{Ce.disabled=e(se).length===0,ie.disabled=e(se).length===0}),ke("click",Ce,()=>p()({deckInfos:e(se),replaceAll:!1})),ke("click",ie,()=>p()({deckInfos:e(se),replaceAll:!0})),ke("click",de,R),s(Q,_e)},$=Q=>{var _e=Se(),Ce=N(_e);{var ie=de=>{var Ee=Oi();ke("click",Ee,()=>p()(void 0)),s(de,Ee)};k(Ce,de=>{v().cancelable&&de(ie)},!0)}s(Q,_e)};k(Be,Q=>{e(se).length?Q(j):Q($,!1)})}s(A,le)}),s(F,O)}}}),dt()}const Zt=class Zt extends cr{constructor(i,t){super(i,...Object.values(t))}};et(Zt,"createModalController",i=>{const t={deckUploader:new _r({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new Zt(i,t),t)});let da=Zt;function Ki(d,i){lt(i,!1);let t=Ie(i,"modalController",8);vt(),dr(d,{get modalController(){return t()},children:(v,p)=>{var c=Se(),u=N(c);{var l=U=>{Wi(U,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};k(u,U=>{t().deckUploader.state==="Shown"&&U(l)})}s(v,c)},$$slots:{default:!0}}),dt()}var zi=o('<label class="svelte-hbchxj"><input type="checkbox" class="search_condition svelte-hbchxj"> </label>'),Vi=o('<label class="svelte-hbchxj"><input type="checkbox" class="search_condition svelte-hbchxj"> </label>'),Gi=o('<label class="svelte-hbchxj"><input type="checkbox" class="search_condition svelte-hbchxj"> <div style="display: inline-block;"></div> </label>'),Xi=o('<label class="svelte-hbchxj"><input type="checkbox" class="search_condition svelte-hbchxj"> </label>'),Qi=o('<div class="deck_editor_search_box_row svelte-hbchxj"><div class="svelte-hbchxj"><button class="search_condition_title black_button svelte-hbchxj">モンスター</button></div> <div class="svelte-hbchxj"></div></div> <div class="deck_editor_search_box_row monster_attributes svelte-hbchxj"><div class="svelte-hbchxj"><button class="search_condition_title black_button svelte-hbchxj">属性</button></div> <div class="svelte-hbchxj"></div></div> <div class="deck_editor_search_box_row svelte-hbchxj"><div class="svelte-hbchxj"><button class="search_condition_title black_button svelte-hbchxj">種族</button></div> <div class="svelte-hbchxj"></div></div> <div class="deck_editor_search_box_row svelte-hbchxj"><div class="svelte-hbchxj"><button class="search_condition_title black_button svelte-hbchxj">星攻守</button></div> <div class="svelte-hbchxj"><div><span>星</span> <input type="number" min="0" max="13" style="width: 2.5rem;" class="svelte-hbchxj"> <span>～</span> <input type="number" min="0" max="13" style="width: 2.5rem;" class="svelte-hbchxj"></div> <div><span>攻</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;" class="svelte-hbchxj"> <span>～</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;" class="svelte-hbchxj"></div> <div><span>守</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;" class="svelte-hbchxj"> <span>～</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;" class="svelte-hbchxj"></div> <div><span>攻+守</span> <input type="number" min="0" max="10000" step="100" style="width: 4rem;" class="svelte-hbchxj"></div></div></div>',1),Ji=o('<label class="svelte-hbchxj"><input type="checkbox" class="search_condition svelte-hbchxj"> </label>'),Zi=o('<div class="deck_editor_search_box_row svelte-hbchxj"><div class="svelte-hbchxj"><button class="search_condition_title black_button svelte-hbchxj">魔法</button></div> <div class="svelte-hbchxj"></div></div>'),en=o('<label class="svelte-hbchxj"><input type="checkbox" class="search_condition svelte-hbchxj"> </label>'),tn=o('<div class="deck_editor_search_box_row svelte-hbchxj"><div class="svelte-hbchxj"><button class="search_condition_title black_button svelte-hbchxj">罠</button></div> <div class="svelte-hbchxj"></div></div>'),an=o('<label class="svelte-hbchxj"><input type="checkbox" class="search_condition svelte-hbchxj"> </label>'),rn=o("<div>カード情報読込中</div>"),sn=o("<option> </option>"),nn=o('<div class="svelte-hbchxj"><a class="white_button svelte-hbchxj" download="SVS_DeckInfos.json">ダウンロード</a></div>'),on=o('<div class="svelte-hbchxj"></div>'),ln=o('<div class="svelte-hbchxj"><a class="white_button svelte-hbchxj" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),vn=o('<div class="svelte-hbchxj"></div>'),dn=o('<div class="deck_editor_body_right_header svelte-hbchxj"><div class="deck_editor_body_right_header_row svelte-hbchxj"><div class="svelte-hbchxj">編集対象</div> <div class="svelte-hbchxj"><select style="width:100%" class="svelte-hbchxj"></select></div></div> <div class="deck_editor_body_right_header_row svelte-hbchxj"><div class="svelte-hbchxj">新規名称</div> <div class="svelte-hbchxj"><input type="text" style="width:100%" class="svelte-hbchxj"></div></div> <div class="deck_editor_body_right_header_row svelte-hbchxj"></div> <div class="deck_editor_body_right_header_row svelte-hbchxj"><div class="svelte-hbchxj">基本操作</div> <div class="svelte-hbchxj"><button class="white_button svelte-hbchxj">デッキを保存</button></div> <div class="svelte-hbchxj"><button class="white_button svelte-hbchxj">デッキを複製</button></div> <div class="svelte-hbchxj"><button class="white_button svelte-hbchxj" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-hbchxj"><div class="svelte-hbchxj">DL/UL</div> <!> <!> <div class="svelte-hbchxj"><button class="white_button svelte-hbchxj">アップロード</button></div></div></div> <!>',1),cn=o("<div>デッキ情報読込中</div>"),_n=o('<div class="deck_editor svelte-hbchxj"><div class="deck_editor_header"></div> <div class="deck_editor_body svelte-hbchxj"><div class="deck_editor_body_left svelte-hbchxj"><div role="contentinfo"><div class="deck_editor_search_box_header svelte-hbchxj"><div>検索条件</div> <div><button class="white_button svelte-hbchxj">条件クリア</button></div></div> <div class="deck_editor_search_box_row svelte-hbchxj"><div class="svelte-hbchxj"><button class="search_condition_title black_button svelte-hbchxj">名称</button></div> <div class="svelte-hbchxj"><input type="text" style="width:100%" placeholder="※ルビには対応していません" class="svelte-hbchxj"></div></div> <div class="deck_editor_search_box_row card_kind svelte-hbchxj"><div class="svelte-hbchxj"><button class="search_condition_title black_button svelte-hbchxj">種類</button></div> <div class="svelte-hbchxj"></div></div> <!> <!> <!> <div class="deck_editor_search_box_row svelte-hbchxj"><div class="svelte-hbchxj"><button class="search_condition_title black_button svelte-hbchxj">その他</button></div> <div class="svelte-hbchxj"></div></div></div> <!></div> <div class="deck_editor_body_center svelte-hbchxj"><!></div> <div class="deck_editor_body_right svelte-hbchxj"><!></div></div> <div class="footer svelte-hbchxj"></div></div> <!>',1);function un(d,i){lt(i,!1);const t=[],v=[],p=[],c=[],u=[],l=[],U=[],z=da.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),D={name:"",cardKinds:Ma.filter(x=>x!=="XyzMaterial"),monsterCategories:[...Ta],monsterAttributes:[...Sa],monsterTypes:[...$a],spellCategories:ja.filter(x=>x!=="PendulumScale"),trapCategories:[...Ca],starLowerBound:0,starUpperBound:13,atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:["test","oldVersion","implemented"]},n=De(structuredClone(D));$e(n,e(n).others=["oldVersion"]);let R=De("SearchCondition");const F=async()=>{$e(n,e(n).name=""),$e(n,e(n).cardKinds=[]),$e(n,e(n).monsterCategories=[]),$e(n,e(n).monsterAttributes=[]),$e(n,e(n).monsterTypes=[]),$e(n,e(n).spellCategories=[]),$e(n,e(n).trapCategories=[]),$e(n,e(n).others=[]),$e(n,e(n).atkLowerBound=0),$e(n,e(n).atkUpperBound=5e3),$e(n,e(n).defLowerBound=0),$e(n,e(n).defUpperBound=5e3),$e(n,e(n).atkPlusDef=void 0)},H=x=>{x.forEach(g=>{Array.isArray(e(n)[g])&&Array.isArray(D[g])?$e(n,e(n)[g]=e(n)[g].length?[]:[...D[g]]):$e(n,e(n)[g]=D[g])})},O=(x,g,T)=>{Array.isArray(e(n)[g])&&Array.isArray(D[g])&&$e(n,e(n)[g]=[T])},E=async()=>{const g=(await e(le)).find(Z=>Z.id===e(se));if(!g)return;const T=await Rt;S($,{...g,cardInfos:g.cardNames.map(Z=>{const ye=T.getCardInfo(Z);return ye===void 0&&console.error(Z),ye}).filter(Z=>Z!==void 0)})},A=()=>bt.getAllDeckInfo().then(x=>(S(se,(x.find(g=>g.lastUsedAt.getTime()===Math.max(...x.map(T=>T.lastUsedAt.getTime())))??x[0]).id),x));let se=De(-1),le=De(A()),Be=De(e(le).then(x=>bt.convertToObjectURL(x)));e(le).then(E);const j=()=>{S(le,A()),S(Be,e(le).then(x=>bt.convertToObjectURL(x))),E()};let $=De({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),Q=De(void 0),_e=0;const Ce=x=>{S(R,"CardDetail"),x.cardId!==void 0&&!x.description&&!x.pendulumDescription&&(_e=x.cardId,qa([x.cardId]).then(()=>{x.cardId===_e&&S(Q,x)})),S(Q,x)},ie=async()=>{const g=(await e(le)).find(T=>T.id===e(se));if(!g)throw new Error("illegal state");return g},de=async()=>{const x=await ie();await x.saveDeckInfo({...x,name:e($).name,cardNames:e($).cardInfos.map(g=>g.name),lastUsedAt:new Date}),j()},Ee=async()=>{(await bt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,e($).cardInfos.map(g=>g.name))).saveDeckInfo(),j()},B=async x=>{const g=await ie();!x.shiftKey&&!confirm(`デッキ【${g.name}】を削除します。
よろしいですか？`)||(await g.delete(),j())},I=async()=>{const x=await z.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!x)return;const g=[];if(x.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;g.push(...(await e(le)).map(T=>T.id))}await Promise.all(x.deckInfos.map(T=>bt.createNewDeck(T.name,T.description,T.cardNames,T.lastUsedAt))),g.length&&await Promise.all(g.map(bt.remove)),j()};vt();var V=_n(),ce=N(V),je=r(a(ce),2),ue=a(je),Y=a(ue),b=a(Y),G=r(a(b),2),te=a(G),ne=r(b,2),C=a(ne),M=a(C),L=r(C,2),ee=a(L),re=r(ne,2),me=a(re),f=a(me),w=r(me,2);oe(w,5,()=>Ma.filter(x=>x!=="XyzMaterial"),ve,(x,g)=>{var T=zi(),Z=a(T),ye,Me=r(Z);h(()=>{ye!==(ye=e(g))&&(Z.value=(Z.__value=e(g))==null?"":e(g)),y(Me,` ${Fa[e(g)]??""}`)}),At(t,[],Z,()=>(e(g),e(n).cardKinds),K=>$e(n,e(n).cardKinds=K)),s(x,T)});var _=r(re,2);{var m=x=>{var g=Qi(),T=N(g),Z=a(T),ye=a(Z),Me=r(Z,2);oe(Me,5,()=>Ta,ve,(Pe,qe)=>{var Je=Vi(),Xe=a(Je),ut,gt=r(Xe);h(()=>{ut!==(ut=e(qe))&&(Xe.value=(Xe.__value=e(qe))==null?"":e(qe)),y(gt,` ${ta[e(qe)]??""}${fa[e(qe)]??""}`)}),At(v,[],Xe,()=>(e(qe),e(n).monsterCategories),ft=>$e(n,e(n).monsterCategories=ft)),s(Pe,Je)});var K=r(T,2),pe=a(K),Te=a(pe),ze=r(pe,2);oe(ze,5,()=>Sa,ve,(Pe,qe)=>{var Je=Gi(),Xe=a(Je),ut,gt=r(Xe,2),ft=r(gt);h(()=>{ut!==(ut=e(qe))&&(Xe.value=(Xe.__value=e(qe))==null?"":e(qe)),Ae(gt,`monster_attr ${e(qe)??""} svelte-hbchxj`),y(ft,` ${_a[e(qe)]??""}`)}),At(p,[],Xe,()=>(e(qe),e(n).monsterAttributes),Tt=>$e(n,e(n).monsterAttributes=Tt)),s(Pe,Je)});var Ue=r(K,2),Ve=a(Ue),ct=a(Ve),_t=r(Ve,2);oe(_t,5,()=>$a,ve,(Pe,qe)=>{var Je=Xi(),Xe=a(Je),ut,gt=r(Xe);h(()=>{ut!==(ut=e(qe))&&(Xe.value=(Xe.__value=e(qe))==null?"":e(qe)),y(gt,` ${ea[e(qe)]??""}
                  ${ua[e(qe)]??""}`)}),At(c,[],Xe,()=>(e(qe),e(n).monsterTypes),ft=>$e(n,e(n).monsterTypes=ft)),ke("dblclick",Je,ft=>O(ft,"monsterTypes",e(qe))),s(Pe,Je)});var xt=r(Ue,2),Ke=a(xt),Oe=a(Ke),Ge=r(Ke,2),it=a(Ge),wt=r(a(it),2),Mt=r(wt,4),Dt=r(it,2),$t=r(a(Dt),2),Qe=r($t,4),tt=r(Dt,2),He=r(a(tt),2),Re=r(He,4),Ze=r(tt,2),rt=r(a(Ze),2);ke("click",ye,()=>H(["monsterCategories"])),ae(3,T,()=>ge,()=>({delay:0,duration:100})),ke("click",Te,()=>H(["monsterAttributes"])),ae(3,K,()=>ge,()=>({delay:0,duration:100})),ke("click",ct,()=>H(["monsterTypes"])),ae(3,Ue,()=>ge,()=>({delay:0,duration:100})),ke("click",Oe,()=>H(["starLowerBound","starUpperBound","atkLowerBound","atkUpperBound","defLowerBound","defUpperBound","atkPlusDef"])),kt(wt,()=>e(n).starLowerBound,Pe=>$e(n,e(n).starLowerBound=Pe)),kt(Mt,()=>e(n).starUpperBound,Pe=>$e(n,e(n).starUpperBound=Pe)),kt($t,()=>e(n).atkLowerBound,Pe=>$e(n,e(n).atkLowerBound=Pe)),kt(Qe,()=>e(n).atkUpperBound,Pe=>$e(n,e(n).atkUpperBound=Pe)),kt(He,()=>e(n).defLowerBound,Pe=>$e(n,e(n).defLowerBound=Pe)),kt(Re,()=>e(n).defUpperBound,Pe=>$e(n,e(n).defUpperBound=Pe)),kt(rt,()=>e(n).atkPlusDef,Pe=>$e(n,e(n).atkPlusDef=Pe)),ae(3,xt,()=>ge,()=>({delay:0,duration:100})),s(x,g)};k(_,x=>{e(n).cardKinds.includes("Monster")&&x(m)})}var P=r(_,2);{var q=x=>{var g=Zi(),T=a(g),Z=a(T),ye=r(T,2);oe(ye,5,()=>ja.filter(Me=>Me!=="PendulumScale"),ve,(Me,K)=>{var pe=Ji(),Te=a(pe),ze,Ue=r(Te);h(()=>{ze!==(ze=e(K))&&(Te.value=(Te.__value=e(K))==null?"":e(K)),y(Ue,` ${aa[e(K)]??""}`)}),At(u,[],Te,()=>(e(K),e(n).spellCategories),Ve=>$e(n,e(n).spellCategories=Ve)),s(Me,pe)}),ke("click",Z,()=>H(["spellCategories"])),ae(3,g,()=>ge,()=>({delay:0,duration:100})),s(x,g)};k(P,x=>{e(n).cardKinds.includes("Spell")&&x(q)})}var we=r(P,2);{var be=x=>{var g=tn(),T=a(g),Z=a(T),ye=r(T,2);oe(ye,5,()=>Ca,ve,(Me,K)=>{var pe=en(),Te=a(pe),ze,Ue=r(Te);h(()=>{ze!==(ze=e(K))&&(Te.value=(Te.__value=e(K))==null?"":e(K)),y(Ue,` ${ra[e(K)]??""}`)}),At(l,[],Te,()=>(e(K),e(n).trapCategories),Ve=>$e(n,e(n).trapCategories=Ve)),s(Me,pe)}),ke("click",Z,()=>H(["trapCategories"])),ae(3,g,()=>ge,()=>({delay:0,duration:100})),s(x,g)};k(we,x=>{e(n).cardKinds.includes("Trap")&&x(be)})}var fe=r(we,2),X=a(fe),J=a(X),W=r(X,2);oe(W,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],ve,(x,g)=>{var T=an(),Z=a(T),ye,Me=r(Z);h(()=>{ye!==(ye=g.key)&&(Z.value=(Z.__value=g.key)==null?"":g.key),y(Me,` ${g.text??""}`)}),At(U,[],Z,()=>(g.key,e(n).others),K=>$e(n,e(n).others=K)),s(x,T)});var xe=r(Y,2);Ui(xe,{get cardInfo(){return e(Q)}});var Le=r(ue,2),Fe=a(Le);ot(Fe,()=>Rt,x=>{var g=rn();s(x,g)},(x,g)=>{const T=he(()=>Object.values(e(g).dic));Na(x,{mode:"List",get allCardInfos(){return e(T)},onAttention:Ce,get searchCondition(){return e(n)},get deckCardInfos(){return e($).cardInfos},set deckCardInfos(Z){$e($,e($).cardInfos=Z)},$$legacy:!0})});var Ne=r(Le,2),Ye=a(Ne);ot(Ye,()=>e(le),x=>{var g=cn();s(x,g)},(x,g)=>{var T=dn(),Z=N(T),ye=a(Z),Me=r(a(ye),2),K=a(Me);h(()=>{e(se),Ft(()=>{e(g)})}),oe(K,5,()=>e(g),ve,(Qe,tt)=>{var He=sn(),Re={},Ze=a(He);h(()=>{Re!==(Re=e(tt).id)&&(He.value=(He.__value=e(tt).id)==null?"":e(tt).id),y(Ze,e(tt).name)}),s(Qe,He)});var pe=r(ye,2),Te=r(a(pe),2),ze=a(Te),Ue=r(pe,4),Ve=r(a(Ue),2),ct=a(Ve),_t=r(Ve,2),xt=a(_t),Ke=r(_t,2),Oe=a(Ke),Ge=r(Ue,2),it=r(a(Ge),2);ot(it,ie,Qe=>{var tt=on();s(Qe,tt)},(Qe,tt)=>{var He=nn(),Re=a(He);h(Ze=>ht(Re,"href",Ze),[()=>bt.convertToObjectURL([e(tt)])],he),s(Qe,He)});var wt=r(it,2);ot(wt,()=>e(Be),Qe=>{var tt=vn();s(Qe,tt)},(Qe,tt)=>{var He=ln(),Re=a(He);h(()=>ht(Re,"href",e(tt))),s(Qe,He)});var Mt=r(wt,2),Dt=a(Mt),$t=r(Z,2);Na($t,{mode:"Deck",allCardInfos:[],onAttention:Ce,get deckCardInfos(){return e($).cardInfos},set deckCardInfos(Qe){$e($,e($).cardInfos=Qe)},$$legacy:!0}),Ht(K,()=>e(se),Qe=>S(se,Qe)),ke("change",K,E),kt(ze,()=>e($).name,Qe=>$e($,e($).name=Qe)),ke("click",ct,de),ke("click",xt,Ee),ke("click",Oe,B),ke("click",Dt,I),s(x,T)});var We=r(ce,2);Ki(We,{modalController:z}),h(()=>Ae(Y,`deck_editor_search_box ${(e(R)==="SearchCondition"?"":"minimum")??""} svelte-hbchxj`)),ke("click",te,F),ke("click",M,()=>H(["name"])),kt(ee,()=>e(n).name,x=>$e(n,e(n).name=x)),ke("click",f,()=>H(["cardKinds"])),ke("click",J,()=>H(["others"])),ae(3,fe,()=>ge,()=>({delay:0,duration:100})),ke("mouseenter",Y,()=>S(R,"SearchCondition")),s(d,V),dt()}const fn=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],pn=3;var hn=o('<input class="game_mode_radio svelte-sy4ydn" type="radio" name="game_mode"> <label> </label>',1),yn=o('<option class="svelte-sy4ydn"> </option>'),gn=o('<option class="svelte-sy4ydn"> </option>'),mn=o('<option class="svelte-sy4ydn"> </option>'),bn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_deck_selector" class="deck_selector svelte-sy4ydn"><option class="svelte-sy4ydn">デフォルト</option><!></select></div></td></tr>'),xn=o('<option class="svelte-sy4ydn"> </option>'),kn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">対戦相手：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select> <div class="svelte-sy4ydn"> </div></div></td></tr> <!> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">先攻後攻：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select></div></td></tr>',1),wn=o('<option class="svelte-sy4ydn"> </option>'),Dn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-sy4ydn">難易度：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="difficulty_selector" class="difficulty_selector svelte-sy4ydn"></select></div></td></tr>'),Cn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label class="config_row_label svelte-sy4ydn" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"></div></td></tr> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="deck_selector" class="deck_selector svelte-sy4ydn"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">duel start!</button></div></td></tr>',1),jn=o('<tr><td colspan="2" class="svelte-sy4ydn"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),$n=o('<tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">deck edit</button></div></td></tr>'),Sn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="duelist_name" class="config_row_label duelist_name svelte-sy4ydn">名前：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><input id="duelist_name" class="duelist_name svelte-sy4ydn" type="text"></div></td></tr> <!> <!>',1),Mn=o('<tr><td colspan="2" class="svelte-sy4ydn"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),Tn=o('<div class="app_body svelte-sy4ydn"><table class="config_table svelte-sy4ydn"><tbody><!></tbody></table></div>'),Bn=o('<span class="svelte-sy4ydn"> </span> <span class="svelte-sy4ydn"> </span>',1),En=o('<div class="result_title result_win svelte-sy4ydn">YOU WIN</div>'),An=o('<div class="result_title result_lose svelte-sy4ydn">YOU LOSE</div>'),Yn=o('<div class="result_title result_draw svelte-sy4ydn">DRAW</div>'),Un=o('<div class="twitter_share_button_wrapper svelte-sy4ydn"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-sy4ydn">X(twitter)でシェアする</a></div>'),Ln=o('<div class="result svelte-sy4ydn"><!> <div class="reason_of_end svelte-sy4ydn"> </div> <!> <div class="svelte-sy4ydn"><button class="white_button svelte-sy4ydn">TOPへ戻る</button></div></div>'),Nn=o('<main style="flex-direction: column; display :flex" class="svelte-sy4ydn"><div class="link link_left svelte-sy4ydn"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-sy4ydn">posfie(toggeter)</a></div> <div class="link link_right svelte-sy4ydn"><a class="a_button svelte-sy4ydn" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">現時点とこの先のこと</a></div> <!> <div class="footer card_summary svelte-sy4ydn"><!></div> <div class="footer debug_info svelte-sy4ydn"><span class="svelte-sy4ydn"> </span> <span class="user_agent_info svelte-sy4ydn"> </span> <span class="screen_info svelte-sy4ydn"> </span></div> <!></main>');function Pn(d,i){lt(i,!1);const t=new ur("stk_ygo_svelte",pn,fn);let v=De(0),p=De(0),c=De(),u=De("FtkChallenge"),l=De("None"),U=De(0),z=De(""),D=De(void 0);const n="https://setta238.github.io/stk_ygo_svelte/",R="遊戯王deそりてあ",F="ninja_no",H=fr.getOrCreateNew(t).then(f=>(S(u,Ba.includes(f.previousGameMode)?f.previousGameMode:"FtkChallenge"),Ee(f.previousNpcId),f)),O=f=>{var _;const w=f.find(m=>m.lastUsedAt.getTime()===Math.max(...f.map(P=>P.lastUsedAt.getTime())))??f[0];S(U,w.id),e(u)==="FtkChallenge"&&w.deckType!=="Preset"&&S(U,((_=Yt.find(m=>m.deckType==="Preset"))==null?void 0:_.id)??e(U))};let E=De(bt.getAllDeckInfo(t).then(f=>(Promise.all(f.filter(w=>!w.lastUsedAt).map(w=>{w.saveDeckInfo()})),O(f),f)));const A=async()=>{const f=e(U);let w=(await e(E)).find(m=>m.id===f)??(await le()).find(m=>m.id===f);w&&await w.updateTimestamp();let _=w;if(_||(_=Yt.find(m=>m.id===f)),!_)throw new Error("illegal state");return _},se=async()=>{(await H).save({previousGameMode:e(u)})},le=()=>(S(E,bt.getAllDeckInfo(t).then(f=>(O(f),f))),e(E)),Be=async()=>{(await e(E)).length||(await bt.prepareSampleDeck(),le())},j=async()=>{await Promise.all([se(),Be()]);const f=await A(),w=await H;let _=qt.find(q=>q.id===Number.MIN_SAFE_INTEGER)??qt[0],m=Yt.find(q=>q.id===Number.MIN_SAFE_INTEGER)??Yt[0],P="PlayFirst";e(u)==="FtkChallenge"?_=qt.filter(q=>q.npcType==="FtkChallenge").find(q=>q.difficulty===w.previousDifficulty)??_:e(u)==="Free"&&(_=qt.find(q=>q.id===w.previousNpcId)??_,m=Yt.slice(-1)[0],P=w.previousStartMode),_.npcType!=="FtkChallenge"&&w.previousNpcDeckId>-1?m=(await e(E)).find(q=>q.id===w.previousNpcDeckId)??m:m=Yt.find(q=>q.id===_.id)??m,S(c,new gr(w,"Player",f,[],_,"NPC",m,[],P)),e(c).onDuelEnd.append(()=>(S(c,e(c)),"RemoveMe"))},$=async()=>{await Promise.all([se(),Be()]),S(l,"DeckEdit")},Q=async f=>{await se(),f.key==="Enter"&&!f.repeat&&(await H).save()},_e=()=>{S(E,le()),S(c,void 0),S(l,"None")};let Ce=Date.now();const ie=f=>{Date.now()-Ce<200||(Ce=Date.now(),S(u,f),le())},de=f=>{Ee(Number(f.currentTarget.value))},Ee=f=>{var w;S(D,qt.find(_=>_.id===f)),S(z,((w=e(D))==null?void 0:w.description)??"")};Be(),vt();var B=Nn(),I=r(a(B),2),V=a(I),ce=r(I,2);{var je=f=>{var w=Se(),_=N(w);ot(_,()=>H,null,(m,P)=>{ci(m,{get duel(){return e(c)},get userProfile(){return e(P)}})}),s(f,w)},ue=f=>{var w=Se(),_=N(w);{var m=q=>{un(q,{})},P=q=>{var we=Tn(),be=a(we),fe=a(be),X=a(fe);ot(X,()=>H,J=>{var W=Mn();s(J,W)},(J,W)=>{var xe=Sn(),Le=N(xe),Fe=a(Le),Ne=a(Fe),Ye=r(Fe),We=a(Ye),x=a(We),g=r(Le,2);ot(g,()=>e(E),ye=>{var Me=jn();s(ye,Me)},(ye,Me)=>{var K=Cn(),pe=N(K),Te=a(pe),ze=a(Te),Ue=r(Te),Ve=a(Ue);oe(Ve,5,()=>Ba,ve,(He,Re)=>{var Ze=hn(),rt=N(Ze),Pe=r(rt,2),qe=a(Pe);h(Je=>{ht(rt,"id",`game_mode_radio_${Je??""}`),hr(rt,e(Re)),yr(rt,e(u)===e(Re)),Ae(Pe,`game_mode_tab_label game_mode_tab_${Je??""} svelte-sy4ydn`),ht(Pe,"for",`game_mode_radio_${Je??""}`),y(qe,e(Re))},[()=>e(Re).toLowerCase()],he),ke("change",rt,()=>ie(e(Re))),s(He,Ze)});var ct=r(pe,2),_t=a(ct),xt=a(_t),Ke=r(_t),Oe=a(Ke),Ge=a(Oe);h(()=>{e(U),Ft(()=>{e(u),e(Me)})}),oe(Ge,5,()=>e(u)==="FtkChallenge"?Yt.filter(He=>He.deckType==="Preset"):e(Me),ve,(He,Re)=>{var Ze=yn(),rt={},Pe=a(Ze);h(()=>{rt!==(rt=e(Re).id)&&(Ze.value=(Ze.__value=e(Re).id)==null?"":e(Re).id),y(Pe,e(Re).name)}),s(He,Ze)});var it=r(ct,2);{var wt=He=>{var Re=kn(),Ze=N(Re),rt=a(Ze),Pe=a(rt),qe=r(rt),Je=a(qe),Xe=a(Je);h(()=>{e(W),Ft(()=>{})}),oe(Xe,5,()=>qt,ve,(mt,st)=>{var pt=gn(),Et={},Pt=a(pt);h(()=>{Et!==(Et=e(st).id)&&(pt.value=(pt.__value=e(st).id)==null?"":e(st).id),y(Pt,e(st).name)}),s(mt,pt)});var ut=r(Xe,2),gt=a(ut),ft=r(Ze,2);{var Tt=mt=>{var st=bn(),pt=a(st),Et=a(pt),Pt=r(pt),ma=a(Pt),ba=a(ma);h(()=>{e(W),Ft(()=>{e(Me)})});var sa=a(ba);sa.value=(sa.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Ha=r(sa);oe(Ha,1,()=>e(Me),ve,(ia,Vt)=>{var Gt=mn(),xa={},Ia=a(Gt);h(()=>{xa!==(xa=e(Vt).id)&&(Gt.value=(Gt.__value=e(Vt).id)==null?"":e(Vt).id),y(Ia,e(Vt).name)}),s(ia,Gt)}),ae(3,Et,()=>ge,()=>({duration:200})),ae(3,pt,()=>ge,()=>({duration:200})),Ht(ba,()=>e(W).previousNpcDeckId,ia=>e(W).previousNpcDeckId=ia),ae(3,ma,()=>ge,()=>({duration:200})),ae(3,Pt,()=>ge,()=>({duration:200})),ae(3,st,()=>ge,()=>({duration:200})),s(mt,st)};k(ft,mt=>{var st;((st=e(D))==null?void 0:st.npcType)!=="FtkChallenge"&&mt(Tt)})}var Bt=r(ft,2),St=a(Bt),Kt=a(St),zt=r(St),ya=a(zt),ga=a(ya);h(()=>{e(W),Ft(()=>{})}),oe(ga,5,()=>ca(Ea),ve,(mt,st)=>{var pt=xn(),Et={},Pt=a(pt);h(()=>{Et!==(Et=e(st))&&(pt.value=(pt.__value=e(st))==null?"":e(st)),y(Pt,Ea[e(st)])}),s(mt,pt)}),h(()=>y(gt,`※${e(z)??""}`)),ae(3,Pe,()=>ge,()=>({duration:200})),ae(3,rt,()=>ge,()=>({duration:200})),ke("change",Xe,de),Ht(Xe,()=>e(W).previousNpcId,mt=>e(W).previousNpcId=mt),ae(3,Je,()=>ge,()=>({duration:200})),ae(3,qe,()=>ge,()=>({duration:200})),ae(3,Ze,()=>ge,()=>({duration:200})),ae(3,Kt,()=>ge,()=>({duration:200})),ae(3,St,()=>ge,()=>({duration:200})),Ht(ga,()=>e(W).previousStartMode,mt=>e(W).previousStartMode=mt),ae(3,ya,()=>ge,()=>({duration:200})),ae(3,zt,()=>ge,()=>({duration:200})),ae(3,Bt,()=>ge,()=>({duration:200})),s(He,Re)},Mt=He=>{var Re=Se(),Ze=N(Re);{var rt=Pe=>{var qe=Dn(),Je=a(qe),Xe=a(Je),ut=r(Je),gt=a(ut),ft=a(gt);h(()=>{e(W),Ft(()=>{})}),oe(ft,5,()=>mr,ve,(Tt,Bt)=>{var St=wn(),Kt={},zt=a(St);h(()=>{Kt!==(Kt=e(Bt))&&(St.value=(St.__value=e(Bt))==null?"":e(Bt)),y(zt,e(Bt))}),s(Tt,St)}),ae(3,Xe,()=>ge,()=>({duration:200})),ae(3,Je,()=>ge,()=>({duration:200})),Ht(ft,()=>e(W).previousDifficulty,Tt=>e(W).previousDifficulty=Tt),ae(3,gt,()=>ge,()=>({duration:200})),ae(3,ut,()=>ge,()=>({duration:200})),ae(3,qe,()=>ge,()=>({duration:200})),s(Pe,qe)};k(Ze,Pe=>{e(u)==="FtkChallenge"&&Pe(rt)},!0)}s(He,Re)};k(it,He=>{e(u)==="Free"?He(wt):He(Mt,!1)})}var Dt=r(it,2),$t=a(Dt),Qe=a($t),tt=a(Qe);ae(3,ze,()=>ge,()=>({duration:200})),ae(3,Te,()=>ge,()=>({duration:200})),ae(3,Ve,()=>ge,()=>({duration:200})),ae(3,Ue,()=>ge,()=>({duration:200})),ae(3,pe,()=>ge,()=>({duration:200})),ae(3,xt,()=>ge,()=>({duration:200})),ae(3,_t,()=>ge,()=>({duration:200})),Ht(Ge,()=>e(U),He=>S(U,He)),ae(3,Oe,()=>ge,()=>({duration:200})),ae(3,Ke,()=>ge,()=>({duration:200})),ae(3,ct,()=>ge,()=>({duration:200})),ke("click",tt,j),ae(3,Qe,()=>ge,()=>({duration:200})),s(ye,K)});var T=r(g,2);{var Z=ye=>{var Me=$n(),K=a(Me),pe=a(K),Te=a(pe);ke("click",Te,$),ae(3,pe,()=>ge,()=>({duration:200})),ae(3,K,()=>ge,()=>({duration:200})),ae(3,Me,()=>ge,()=>({duration:200})),s(ye,Me)};k(T,ye=>{e(u)==="Free"&&ye(Z)})}ae(3,Ne,()=>ge,()=>({duration:200})),ae(3,Fe,()=>ge,()=>({duration:200})),kt(x,()=>e(W).name,ye=>e(W).name=ye),ke("keypress",x,Q),ae(3,We,()=>ge,()=>({duration:200})),ae(3,Ye,()=>ge,()=>({duration:200})),ae(3,Le,()=>ge,()=>({duration:200})),s(J,xe)}),s(q,we)};k(_,q=>{e(l)==="DeckEdit"?q(m):q(P,!1)},!0)}s(f,w)};k(ce,f=>{e(c)?f(je):f(ue,!1)})}var Y=r(ce,2),b=a(Y);ot(b,()=>Rt,f=>{var w=at("読み込み中");s(f,w)},(f,w)=>{var _=Bn(),m=N(_),P=a(m),q=r(m,2),we=a(q);h((be,fe,X)=>{y(P,`公式DB上のカード${be??""}枚`),y(we,`実装済カード（効果あり）${fe??""}枚 （効果なし）${X??""}枚`)},[()=>e(w).knmCount.toLocaleString(),()=>e(w).definitionCount.toLocaleString(),()=>e(w).nonDefinitionCount.toLocaleString()],he),s(f,_)});var G=r(Y,2),te=a(G),ne=a(te),C=r(te,2),M=a(C),L=r(C,2),ee=a(L),re=r(G,2);{var me=f=>{var w=Ln(),_=a(w);{var m=W=>{var xe=Se(),Le=N(xe);{var Fe=Ye=>{var We=En();s(Ye,We)},Ne=Ye=>{var We=Se(),x=N(We);{var g=T=>{var Z=An();s(T,Z)};k(x,T=>{e(c).winner.seat==="Above"&&T(g)},!0)}s(Ye,We)};k(Le,Ye=>{e(c).winner.seat==="Below"?Ye(Fe):Ye(Ne,!1)})}s(W,xe)},P=W=>{var xe=Yn();s(W,xe)};k(_,W=>{e(c).winner?W(m):W(P,!1)})}var q=r(_,2),we=a(q),be=r(q,2);{var fe=W=>{var xe=Un(),Le=a(xe);h(()=>ht(Le,"href",`https://x.com/share?url=${n}&text=${e(c).twitterShareText??""}&hashtags=${R}&via=${F}`)),s(W,xe)};k(be,W=>{e(c).twitterShareText&&W(fe)})}var X=r(be,2),J=a(X);h(()=>y(we,e(c).reasonOfEnd)),ke("click",J,_e),ae(3,w,()=>kr,()=>({delay:200,duration:200})),s(f,w)};k(re,f=>{e(c)&&e(c).isEnded&&f(me)})}h(()=>{y(ne,"build at: 20260103_213850"),y(M,pr.text),y(ee,`w:${e(v)??""}px h:${e(p)??""}px`)}),Xt("innerWidth",f=>S(v,f)),Xt("innerHeight",f=>S(p,f)),ke("click",V,_e),s(d,B),dt()}br(Pn,{target:document.getElementById("app")});
