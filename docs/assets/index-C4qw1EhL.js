var tr=Object.defineProperty;var Aa=_=>{throw TypeError(_)};var ar=(_,i,t)=>i in _?tr(_,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):_[i]=t;var nt=(_,i,t)=>ar(_,typeof i!="symbol"?i+"":i,t),Ba=(_,i,t)=>i.has(_)||Aa("Cannot "+t);var bt=(_,i,t)=>(Ba(_,i,"read from private field"),t?t.call(_):i.get(_)),ia=(_,i,t)=>i.has(_)?Aa("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(_):i.set(_,t),ka=(_,i,t,d)=>(Ba(_,i,"write to private field"),d?d.call(_,t):i.set(_,t),t);import{s as La,r as rr,a as x,b as sr,l as ir,g as e,d as Va,p as _t,c as Ae,m as ne,i as ut,t as l,e as a,f as C,h as u,j as re,k as Ye,n as rt,o as W,q as r,u as ft,v as ge,D as nr,w as xe,x as H,y as s,z as _e,A as Vt,B as oe,C as ue,E as b,F as lr,G as lt,H as Xt,I as or,J as Xa,K as ta,L as ca,M as $a,N as na,O as wa,P as Rt,Q as Sa,R as ga,S as Ma,T as la,U as _a,V as gt,W as Ga,X as ya,Y as ha,Z as dr,_ as vr,$ as cr,a0 as _r,a1 as ur,a2 as fr,a3 as mr,a4 as ua,a5 as Qa,a6 as aa,a7 as Ja,a8 as fa,a9 as Pt,aa as pr,ab as gr,ac as ra,ad as yr,ae as Mt,af as hr,ag as br,ah as kr,ai as Ya,aj as qa,ak as Ua,al as Pa,am as Ha,an as Na,ao as wr,ap as Bt,aq as Ft,ar as Ot,as as Cr,at as It,au as xr,av as Dr,aw as Fa,ax as ea,ay as zt,az as $r,aA as Sr,aB as Mr,aC as Oa,aD as Tr,aE as Er,aF as jr}from"../chunk/entity_proc_20260228_204417.js";import"../chunk/json_20260228_204417.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))d(f);new MutationObserver(f=>{for(const p of f)if(p.type==="childList")for(const c of p.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function t(f){const p={};return f.integrity&&(p.integrity=f.integrity),f.referrerPolicy&&(p.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?p.credentials="include":f.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function d(f){if(f.ep)return;f.ep=!0;const p=t(f);fetch(f.href,p)}})();const Ar=_=>_;function Ta(_){const i=_-1;return i*i*i+1}function Ia(_){const i=typeof _=="string"&&_.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[_,"px"]}function Br(_,{delay:i=0,duration:t=400,easing:d=Ar}={}){const f=+getComputedStyle(_).opacity;return{delay:i,duration:t,easing:d,css:p=>`opacity: ${p*f}`}}function Lr(_,{delay:i=0,duration:t=400,easing:d=Ta,x:f=0,y:p=0,opacity:c=0}={}){const o=getComputedStyle(_),U=+o.opacity,E=o.transform==="none"?"":o.transform,D=U*(1-c),[M,Y]=Ia(f),[n,z]=Ia(p);return{delay:i,duration:t,easing:d,css:(N,y)=>`
			transform: ${E} translate(${(1-N)*M}${Y}, ${(1-N)*n}${z});
			opacity: ${U-D*y}`}}function ye(_,{delay:i=0,duration:t=400,easing:d=Ta,axis:f="y"}={}){const p=getComputedStyle(_),c=+p.opacity,o=f==="y"?"height":"width",U=parseFloat(p[o]),E=f==="y"?["top","bottom"]:["left","right"],D=E.map(g=>`${g[0].toUpperCase()}${g.slice(1)}`),M=parseFloat(p[`padding${D[0]}`]),Y=parseFloat(p[`padding${D[1]}`]),n=parseFloat(p[`margin${D[0]}`]),z=parseFloat(p[`margin${D[1]}`]),N=parseFloat(p[`border${D[0]}Width`]),y=parseFloat(p[`border${D[1]}Width`]);return{delay:i,duration:t,easing:d,css:g=>`overflow: hidden;opacity: ${Math.min(g*20,1)*c};${o}: ${g*U}px;padding-${E[0]}: ${g*M}px;padding-${E[1]}: ${g*Y}px;margin-${E[0]}: ${g*n}px;margin-${E[1]}: ${g*z}px;border-${E[0]}-width: ${g*N}px;border-${E[1]}-width: ${g*y}px;min-${o}: 0`}}function Ra(_,i){for(const t in i)_[t]=i[t];return _}function Yr({fallback:_,...i}){const t=new Map,d=new Map;function f(c,o,U){const{delay:E=0,duration:D=j=>Math.sqrt(j)*30,easing:M=Ta}=Ra(Ra({},i),U),Y=c.getBoundingClientRect(),n=o.getBoundingClientRect(),z=Y.left-n.left,N=Y.top-n.top,y=Y.width/n.width,g=Y.height/n.height,O=Math.sqrt(z*z+N*N),J=getComputedStyle(o),pe=J.transform==="none"?"":J.transform,B=+J.opacity;return{delay:E,duration:typeof D=="function"?D(O):D,easing:M,css:(j,ve)=>`
			   opacity: ${j*B};
			   transform-origin: top left;
			   transform: ${pe} translate(${ve*z}px,${ve*N}px) scale(${j+(1-j)*y}, ${j+(1-j)*g});
		   `}}function p(c,o,U){return(E,D)=>(c.set(D.key,E),()=>{if(o.has(D.key)){const M=o.get(D.key);return o.delete(D.key),f(M,E,D)}return c.delete(D.key),_&&_(E,D,U)})}return[p(d,t,!1),p(t,d,!0)]}function Ka(_){return Object.prototype.toString.call(_)==="[object Date]"}function qr(_){return _}function Ca(_){const i=_-1;return i*i*i+1}function xa(_,i){if(_===i||_!==_)return()=>_;const t=typeof _;if(t!==typeof i||Array.isArray(_)!==Array.isArray(i))throw new Error("Cannot interpolate values of different type");if(Array.isArray(_)){const d=i.map((f,p)=>xa(_[p],f));return f=>d.map(p=>p(f))}if(t==="object"){if(!_||!i)throw new Error("Object cannot be null");if(Ka(_)&&Ka(i)){const p=_.getTime(),o=i.getTime()-p;return U=>new Date(p+U*o)}const d=Object.keys(i),f={};return d.forEach(p=>{f[p]=xa(_[p],i[p])}),p=>{const c={};return d.forEach(o=>{c[o]=f[o](p)}),c}}if(t==="number"){const d=i-_;return f=>_+f*d}return()=>i}var Ht,sa,oa,Gt;const Ea=class Ea{constructor(i,t={}){ia(this,Ht,La(void 0));ia(this,sa,La(void 0));ia(this,oa);ia(this,Gt,null);bt(this,Ht).v=bt(this,sa).v=i,ka(this,oa,t)}static of(i,t){const d=new Ea(i(),t);return rr(()=>{d.set(i())}),d}set(i,t){var M;x(bt(this,sa),i);let{delay:d=0,duration:f=400,easing:p=qr,interpolate:c=xa}={...bt(this,oa),...t};if(f===0)return(M=bt(this,Gt))==null||M.abort(),x(bt(this,Ht),i),Promise.resolve();const o=sr.now()+d;let U,E=!1,D=bt(this,Gt);return ka(this,Gt,ir(Y=>{if(Y<o)return!0;if(!E){E=!0;const z=bt(this,Ht).v;U=c(z,i),typeof f=="function"&&(f=f(z,i)),D==null||D.abort()}const n=Y-o;return n>f?(x(bt(this,Ht),i),!1):(x(bt(this,Ht),U(p(n/f))),!0)})),bt(this,Gt).promise}get current(){return e(bt(this,Ht))}get target(){return e(bt(this,sa))}set target(i){this.set(i)}};Ht=new WeakMap,sa=new WeakMap,oa=new WeakMap,Gt=new WeakMap;let ma=Ea;var Ur=l('<div class="phase_display svelte-1boxe40"><span class="svelte-1boxe40"> </span> </div>'),Pr=l('<div class="lifepoint_display svelte-1boxe40"><div class="svelte-1boxe40"> </div> <div class="svelte-1boxe40"> </div></div>'),Hr=(_,i,t)=>i(e(t)),Nr=l('<div class="svelte-1boxe40"><button class="phase_button svelte-1boxe40"> </button></div>'),Fr=l("<div><!></div>"),Or=l('<div class="svelte-1boxe40"><!></div>'),Ir=l("<div><!></div>"),Rr=l('<div class="config_button_wrapper svelte-1boxe40"><button id="config_button" class="svelte-1boxe40">⚙</button></div>'),Kr=l("<!> <!> <!> <!>",1),Wr=l('<div style="position: absolute;" class="card_animation_receiver svelte-1boxe40"><!></div>'),zr=l('<div style="position: absolute; top:0rem" class="svelte-1boxe40">｛効果対象｝</div>'),Vr=l('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Xr=l(" <!> 】",1),Gr=l('<div style="position: absolute; bottom:0rem" class="svelte-1boxe40"> <!></div>'),Qr=l("<!> <!>",1),Jr=l('<div class="badge svelte-1boxe40"> </div>'),Zr=l('<div class="card_animation_receiver svelte-1boxe40"><!></div>'),es=l("<!> <!> <!> <!>",1),ts=l('<td><div role="listitem"><!></div></td>');function as(_,i){_t(i,!1);let t=Ae(i,"view",12),d=Ae(i,"row",8),f=Ae(i,"column",8),p=Ae(i,"selectedEntities",28,()=>[]),c=Ae(i,"selectedCells",28,()=>[]),o=ne(t().getCell(d(),f())),U=ne(new ma(e(o).field.duel.duelists.Above.lp,{duration:400,easing:Ca})),E=ne(new ma(e(o).field.duel.duelists.Below.lp,{duration:400,easing:Ca}));const D=()=>{x(o,t().getCell(d(),f())),ge(U,e(U).target=e(o).field.duel.duelists.Above.lp),ge(E,e(E).target=e(o).field.duel.duelists.Below.lp)};e(o).onUpdate.append(D),t().onDuelUpdate.append(D),t().modalController.onUpdate.append(D);let M,Y=ne([]),n=()=>console.log("hoge"),z,N=ne([]),y=ne(!1),g=ne(!1),O=!1;const J=S=>{var q,L;x(Z,[]),p().reset(),M=S.activator,n=S.resolve,x(Y,S.dummyActionInfos),x(N,S.chainBlockInfos.flatMap(K=>K.selectedEntities).getDistinct()),z=S.entitiesChoices,x(y,!1),x(g,((q=S.cellsChoices)==null?void 0:q.selectables.includes(e(o)))??!1),O=e(g)&&((L=S.cellsChoices)==null?void 0:L.qty)===1,D()};t().onWaitStart.append(J);const pe=()=>{M=void 0,x(Y,[]),n=()=>{console.log("hoge")},z=void 0,x(N,[]),x(y,!1),x(g,!1),O=!1};t().onWaitEnd.append(pe);let B=ne(!1),j=[];const ve=S=>{j=S.filter(q=>q.dests.includes(e(o))),x(B,j.length>0),D()},Be=()=>{j=[],x(B,!1),D()};t().onDragStart.append(ve),t().onDragEnd.append(Be);const[Se,de]=mi;let Z=ne([]);const Le=S=>{if(M=void 0,e(o)===S.to||e(o).entities.includes(S.entity)){x(Z,[...e(Z),S]);const q=S.resolve;x(o,e(o)),setTimeout(()=>{x(Z,e(Z).filter(L=>L!==S)),S.count++,S.count>1&&q()},600)}};t().onAnimation.append(Le);const De=S=>{n({phaseChange:S})},F=()=>e(o).isStackCell&&e(o).entities.flatMap(S=>S.actions).filter(S=>e(Y).map(q=>q.action.seq).some(q=>q===S.seq)).length>0,A=S=>{var q;if(((q=S.target)==null?void 0:q.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),O)n({selectedCells:[e(o)]});else if(e(g))x(y,!e(y)),c(e(y)?[...c(),e(o)]:c().filter(L=>L!==e(o)));else if(e(o).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(o),!0),t().requireUpdate();const L=e(o).entities.flatMap(I=>I.actions).map(I=>I.seq),K=e(Y).filter(I=>L.includes(I.action.seq));if(K.length){if(!M)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:M,dummyActionInfos:K,cancelable:!0}).then(I=>{I&&n({actionInfo:I})});return}}t().requireUpdate(),console.info(e(o),te(...e(o).visibleEntities))},G=S=>{S.preventDefault(),S.dataTransfer&&(S.dataTransfer.dropEffect="move")},me=S=>{S.preventDefault(),console.info("drop",S,e(B),j),S.dataTransfer&&(S.dataTransfer.dropEffect="move");try{if(e(B)&&j){if(j.length===1){const q=j[0];n({actionInfo:{...q,dest:e(o)}})}else if(j.length>1){if(!M)throw new nr("想定されない状態");e(o).field.duel.view.modalController.terminateAll(),e(o).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:M,dummyActionInfos:j.map(q=>({...q,dest:e(o)})),cancelable:!1}).then(q=>{n({actionInfo:q})})}}}finally{t().removeDraggingActions()}},te=(...S)=>{if(t().waitMode==="Animation")return"Disabled";if(z&&z.selectables.find(L=>S.find(K=>L===K)))return"Selectable";if(!e(Y)||e(Y).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(L=>L.state==="Shown"))return"Disabled";const q=e(Y).filter(L=>S.includes(L.action.entity));return q.length===0?"Disabled":e(o).isStackCell||q[0].action.entity!==S[0]?"Clickable":q.some(L=>L.dests.length)?"Draggable":"Clickable"};ut();var ae=ts(),X=a(ae);X.__click=A;var T=a(X);{var P=S=>{var q=xe(),L=H(q);{var K=I=>{var se=xe(),he=H(se);{var k=m=>{var $=Ur(),ee=a($),V=a(ee),be=s(ee,1,!0);u((ce,le)=>{b(V,ce),b(be,le)},[()=>String(e(o).field.duel.clock.turn).padStart(2,"0"),()=>e(o).field.duel.phase.toUpperCase()],re),r(m,$)},v=m=>{var $=xe(),ee=H($);{var V=ce=>{var le=Pr(),ie=a(le),qe=a(ie),$e=s(ie,2),Oe=a($e);u((Ne,Te)=>{b(qe,Ne),b(Oe,Te)},[()=>Math.floor(e(U).current),()=>Math.floor(e(E).current)],re),r(ce,le)},be=ce=>{var le=xe(),ie=H(le);{var qe=$e=>{var Oe=xe(),Ne=H(Oe);{var Te=Ke=>{var Ve=xe(),Je=H(Ve);{var He=we=>{var je=xe(),We=H(je);_e(We,1,()=>t().duel.nextPhaseList,ue,(Ze,kt)=>{var ot=Nr(),Ge=a(ot);Ge.__click=[Hr,De,kt];var st=a(Ge);u(it=>b(st,it),[()=>e(kt).toUpperCase()],re),r(Ze,ot)}),r(we,je)};C(Je,we=>{t().duel.isEnded||we(He)})}r(Ke,Ve)};C(Ne,Ke=>{t().waitMode==="Free"&&Ke(Te)})}r($e,Oe)};C(ie,$e=>{e(o).column===5&&$e(qe)},!0)}r(ce,le)};C(ee,ce=>{e(o).column===3?ce(V):ce(be,!1)},!0)}r(m,$)};C(he,m=>{e(o).column===1?m(k):m(v,!1)})}r(I,se)};C(L,I=>{e(o).row===3&&I(K)})}r(S,q)},Q=S=>{var q=xe(),L=H(q);{var K=se=>{var he=Kr();const k=re(()=>e(Z).find(le=>le.to===e(o)));var v=H(he);{var m=le=>{var ie=Fr(),qe=a(ie);Vt(qe,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),u(()=>Ye(ie,`card_animation_receiver ${e(o).cellType??""} svelte-1boxe40`)),oe(1,ie,()=>de,()=>({key:e(k).entity.seq})),r(le,ie)};C(v,le=>{e(k)&&e(k).index==="Top"&&le(m)})}var $=s(v,2);_e($,1,()=>e(o).visibleEntities,ue,(le,ie)=>{var qe=xe(),$e=H(qe);{var Oe=Ne=>{var Te=Or(),Ke=a(Te);const Ve=re(()=>te(e(ie))),Je=re(()=>e(Y).filter(He=>He.action.entity===e(ie)));Vt(Ke,{get entity(){return e(ie)},get state(){return e(Ve)},get dummyActionInfos(){return e(Je)},cardActionResolve:void 0,get selectedList(){return p()},set selectedList(He){p(He)},$$legacy:!0}),oe(2,Te,()=>Se,()=>({key:e(ie).seq})),r(Ne,Te)};C($e,Ne=>{e(Z).every(Te=>Te.entity.seq!==e(ie).seq)&&Ne(Oe)})}r(le,qe)});var ee=s($,2);{var V=le=>{var ie=Ir(),qe=a(ie);Vt(qe,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),u(()=>Ye(ie,`card_animation_receiver ${e(o).cellType??""} svelte-1boxe40`)),oe(1,ie,()=>de,()=>({key:e(k).entity.seq})),r(le,ie)};C(ee,le=>{e(k)&&e(k).index!=="Top"&&le(V)})}var be=s(ee,2);{var ce=le=>{var ie=Rr();r(le,ie)};C(be,le=>{e(o).owner.seat==="Below"&&le(ce)})}r(se,he)},I=se=>{var he=es();const k=re(()=>e(Z).find(ie=>ie.to===e(o)));var v=H(he);{var m=ie=>{var qe=Wr(),$e=a(qe);Vt($e,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),oe(1,qe,()=>de,()=>({key:e(k).entity.seq})),r(ie,qe)};C(v,ie=>{e(k)&&e(k).index!=="Top"&&ie(m)})}var $=s(v,2);{var ee=ie=>{var qe=Qr(),$e=H(qe);_e($e,1,()=>e(o).visibleEntities.map((Te,Ke)=>({index:Ke,entity:Te})).toReversed(),ue,(Te,Ke)=>{var Ve=xe(),Je=H(Ve);{var He=we=>{var je=Vr();const We=re(()=>!e(o).isStackCell&&e(Ke).index===0?te(...e(o).visibleEntities):void 0);var Ze=H(je);{var kt=it=>{var mt=zr();r(it,mt)};C(Ze,it=>{e(N).includes(e(Ke).entity)&&it(kt)})}var ot=s(Ze,2),Ge=a(ot);const st=re(()=>e(Ke).index===0?e(Y).filter(it=>e(o).visibleEntities.includes(it.action.entity)):void 0);Vt(Ge,{get entity(){return e(Ke).entity},get state(){return e(We)},get dummyActionInfos(){return e(st)},cardActionResolve:void 0,get selectedList(){return p()},set selectedList(it){p(it)},$$legacy:!0}),u(()=>Ye(ot,`duel_card_wrapper ${(e(Ke).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1boxe40`)),oe(2,ot,()=>Se,()=>({key:e(Ke).entity.seq})),r(we,je)};C(Je,we=>{e(Z).every(je=>je.entity.seq!==e(Ke).entity.seq)&&we(He)})}r(Te,Ve)});var Oe=s($e,2);{var Ne=Te=>{var Ke=Gr(),Ve=a(Ke),Je=s(Ve);_e(Je,1,()=>Xt(e(o).visibleEntities[0].status.maxCounterQty),ue,(He,we)=>{var je=Xr(),We=H(je),Ze=s(We);{var kt=ot=>{var Ge=lt();u(()=>b(Ge,`/${e(o).visibleEntities[0].status.maxCounterQty[e(we)]??""}`)),r(ot,Ge)};C(Ze,ot=>{(e(o).visibleEntities[0].status.maxCounterQty[e(we)]??9999)<100&&ot(kt)})}u((ot,Ge)=>b(We,`【
              ${ot??""}${Ge??""} `),[()=>lr(e(we)),()=>e(o).visibleEntities[0].counterHolder.getQty(e(we))],re),r(He,je)}),u(()=>b(Ve,`【${e(o).visibleEntities[0].battlePositionName??""}】 `)),r(Te,Ke)};C(Oe,Te=>{e(o).visibleEntities[0].battlePosition&&Te(Ne)})}r(ie,qe)};C($,ie=>{e(o).visibleEntities.length>0&&ie(ee)})}var V=s($,2);{var be=ie=>{var qe=Jr(),$e=a(qe);u(()=>b($e,e(o).visibleEntities.length)),r(ie,qe)};C(V,ie=>{e(o).isStackCell&&ie(be)})}var ce=s(V,2);{var le=ie=>{var qe=Zr(),$e=a(qe);Vt($e,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),oe(1,qe,()=>de,()=>({key:e(k).entity.seq})),r(ie,qe)};C(ce,ie=>{e(k)&&e(k).index==="Top"&&ie(le)})}r(se,he)};C(L,se=>{e(o).cellType==="Hand"?se(K):se(I,!1)},!0)}r(S,q)};C(T,S=>{e(o).isDisabledCell?S(P):S(Q,!1)})}u(S=>{Ye(ae,`${`duel_field_cell duel_field_cell_${e(o).cellType} ${e(o).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1boxe40`),rt(ae,"colspan",e(o).cellType==="Hand"?7:1),Ye(X,`${S??""} svelte-1boxe40`)},[()=>`duel_field_cell_inner_box ${e(o).cellType} ${e(B)?"can_accept_drop":""} ${F()?"can_action":""} ${e(y)?"is_selected":e(g)?"is_selectable":""} `],re),W("dragover",X,G),W("drop",X,me),r(_,ae),ft()}Va(["click"]);const rs=(_,i,t=void 0,d="!!!circular reference!!!")=>{let f=[];return JSON.stringify(_,(p,c)=>{if(typeof c=="object"){if(f.indexOf(c)>-1)return d;f.push(c)}let o=c;if(i&&(o=i(p,c)),typeof o=="function")return o.toString();if(o!==c&&typeof o=="object"){if(f.indexOf(o)>-1)return d;f.push(o)}return o},t)};var ss=l('<div class="title svelte-14z6bdh"> </div>'),is=l('<div class="title svelte-14z6bdh"> </div>'),ns=l('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),ls=l('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),os=l("<div><!> <!></div>"),ds=l('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),vs=l("<div><!> <!></div>"),cs=l("<div><!> <!></div>"),_s=l('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function us(_,i){_t(i,!1);let t=ne(void 0),d=Ae(i,"log",8),f,p=ne([]);const c=()=>{const D=((f==null?void 0:f.seq)??-1)+1;d().records.slice(D).forEach(M=>{if(!f){x(p,[[[[M]]]]),f=M;return}if(!e(p)[M.clock.turn]){ge(p,e(p)[M.clock.turn]=[[[M]]]),f=M;return}if(!e(p)[M.clock.turn][M.clock.phaseSeq]){ge(p,e(p)[M.clock.turn][M.clock.phaseSeq]=[[M]]),f=M;return}if(f.clock.chainSeq===M.clock.chainSeq&&f.clock.chainBlockSeq===M.clock.chainBlockSeq&&f.duelist===M.duelist){e(p)[M.clock.turn][M.clock.phaseSeq].slice(-1)[0].push(M),f=M;return}e(p)[M.clock.turn][M.clock.phaseSeq].push([M]),f=M}),x(p,e(p)),or().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};d().onUpdate.append(c),d().duel.view.onDuelUpdate.append(c),c(),ut();var o=xe(),U=H(o);{var E=D=>{var M=_s(),Y=s(a(M),2);_e(Y,5,()=>e(p),ue,(n,z)=>{var N=cs(),y=a(N);{var g=J=>{var pe=ss(),B=a(pe);u(()=>b(B,`ターン：${e(z)[0][0][0].clock.turn??""}`)),r(J,pe)};C(y,J=>{e(z)[0][0][0].clock.turn>0&&J(g)})}var O=s(y,2);_e(O,1,()=>e(z),ue,(J,pe)=>{var B=vs(),j=a(B);{var ve=Se=>{var de=is(),Z=a(de);u(()=>b(Z,e(pe)[0][0].clock.period.name)),r(Se,de)};C(j,Se=>{e(pe)[0][0].clock.turn>0&&Se(ve)})}var Be=s(j,2);_e(Be,1,()=>e(pe),ue,(Se,de)=>{var Z=ds();const Le=re(()=>{var ae;return((ae=e(de).find(X=>X.chainNumber!==void 0))==null?void 0:ae.chainNumber)??0});var De=a(Z),F=a(De),A=a(F),G=s(F,2);{var me=ae=>{var X=ns(),T=a(X);u(()=>b(T,`チェーン：${e(Le)??""}`)),r(ae,X)};C(G,ae=>{e(Le)&&ae(me)})}var te=s(De,2);_e(te,1,()=>e(de),ue,(ae,X)=>{var T=os(),P=a(T);{var Q=K=>{var I=lt();u(()=>b(I,e(X).text)),r(K,I)},S=K=>{var I=xe(),se=H(I);{var he=v=>{var m=lt();u(($,ee,V)=>b(m,`移動：${$??""} ${ee??""} ⇒ ${V??""}`),[()=>{var $;return($=e(X).mainEntity)==null?void 0:$.toString()},()=>{var $;return($=e(X).from)==null?void 0:$.toString()},()=>{var $;return($=e(X).to)==null?void 0:$.toString()}],re),r(v,m)},k=v=>{var m=xe(),$=H(m);{var ee=be=>{var ce=lt();u((le,ie)=>b(ce,`生成：${le??""} void ⇒ ${ie??""}`),[()=>{var le;return(le=e(X).mainEntity)==null?void 0:le.toString()},()=>{var le;return(le=e(X).to)==null?void 0:le.toString()}],re),r(be,ce)},V=be=>{var ce=xe(),le=H(ce);{var ie=$e=>{var Oe=lt();u((Ne,Te)=>b(Oe,`消滅：${Ne??""} ${Te??""} ⇒ void`),[()=>{var Ne;return(Ne=e(X).mainEntity)==null?void 0:Ne.toString()},()=>{var Ne;return(Ne=e(X).from)==null?void 0:Ne.toString()}],re),r($e,Oe)},qe=$e=>{var Oe=lt();u(()=>b(Oe,e(X).text)),r($e,Oe)};C(le,$e=>{e(X).type==="EntityDisappear"?$e(ie):$e(qe,!1)},!0)}r(be,ce)};C($,be=>{e(X).type==="EntityAppear"?be(ee):be(V,!1)},!0)}r(v,m)};C(se,v=>{e(X).type==="EntityMove"?v(he):v(k,!1)},!0)}r(K,I)};C(P,K=>{e(X).type==="ChainBlockHeader"?K(Q):K(S,!1)})}var q=s(P,2);{var L=K=>{var I=ls(),se=a(I);u(he=>rt(se,"href",he),[()=>window.URL.createObjectURL(new Blob([rs(e(X).error,(he,k)=>["pool","bundles","duel"].includes(he)||typeof k=="function"?void 0:k,4)],{type:"text/plain"}))],re),r(K,I)};C(q,K=>{e(X).error&&K(L)})}u(K=>Ye(T,`duel_log_record duel_log_record_${K??""} svelte-14z6bdh`),[()=>e(X).type.toSnakeCase()],re),r(ae,T)}),u(()=>{var ae,X,T;Ye(Z,`duel_log_block_duelist duel_log_block_duelist_${((ae=e(de)[0].duelist)==null?void 0:ae.seat)??"system"} svelte-14z6bdh`),Ye(F,`duelist ${((X=e(de)[0].duelist)==null?void 0:X.seat)??""} svelte-14z6bdh`),b(A,((T=e(de)[0].duelist)==null?void 0:T.profile.name)||"SYSTEM")}),r(Se,Z)}),u(()=>Ye(B,`duel_log_block_phase duel_log_block_phase_${e(pe)[0][0].clock.period.key??""} svelte-14z6bdh`)),r(J,B)}),u(()=>Ye(N,`duel_log_block_turn duel_log_block_turn_${e(z)[0][0][0].clock.turn??""} svelte-14z6bdh`)),r(n,N)}),Xa(Y,n=>x(t,n),()=>e(t)),r(D,M)};C(U,D=>{(d().duel.view.infoBoardState==="Log"||d().duel.view.infoBoardState==="Default")&&D(E)})}r(_,o),ft()}var fs=l("<div><div> </div> <div> </div></div>");function Wa(_,i){_t(i,!1);let t=Ae(i,"duelist",12),d=ne(0),f=ne();const p=async()=>{const Y=t().lp-e(d);if(!e(f)||Math.abs(Y)<10){x(d,t().lp),e(f)&&(e(f)(),x(f,void 0));return}x(d,e(d)+Math.floor(Math.random()*Y)),await ta(100),p()},c=()=>{t(t()),!e(f)&&t().lp!==e(d)&&new Promise(Y=>{x(f,Y),Math.abs(t().lp-e(d)),p()})};t().duel.log.onUpdate.append(c),p(),ut();var o=fs(),U=a(o),E=a(U),D=s(U,2),M=a(D);u(Y=>{Ye(o,`duelist duelist_${Y??""} svelte-1sy3trd`),Ye(U,`duelist_name duelist_${Y??""}_name svelte-1sy3trd`),b(E,t().profile.name),Ye(D,`duelist_lp ${(e(f)?"vibration":"")??""} svelte-1sy3trd`),b(M,e(d))},[()=>t().seat.toLowerCase()],re),r(_,o),ft()}const ms=(_,i,t)=>(i(i()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),ps=(_,i,t)=>(i(i()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var gs=l('<div class="svelte-1uevs9j"> </div>'),ys=l('<div class="svelte-1uevs9j"> </div>'),hs=l('<div class="link_arrow_emoji svelte-1uevs9j"> </div>'),bs=l('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),ks=l('<div></div> <div class="svelte-1uevs9j"> </div>',1),ws=l("<div> </div>"),Cs=l('<span class="svelte-1uevs9j">/</span> <div class="monster_defense svelte-1uevs9j"> </div>',1),xs=l("<div> </div>"),Ds=l('<div class="duel_card_info_row svelte-1uevs9j"><!> <!> <div style="flex-grow: 1;" class="svelte-1uevs9j"></div> <div class="monster_attack svelte-1uevs9j"> </div> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),$s=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),Ss=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),Ms=l("<!> <!>",1),Ts=l('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),Es=l('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),js=l('<pre class="description svelte-1uevs9j"> </pre>'),As=l('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),Bs=l('<pre class="description svelte-1uevs9j"> </pre>'),Ls=l('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),Ys=l("[ <!> ],",1),qs=l('<div class="svelte-1uevs9j"> <!></div>'),Us=l('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),Ps=l('<div class="svelte-1uevs9j"> </div>'),Hs=l('<div class="svelte-1uevs9j"> </div>'),Ns=l('<div class="svelte-1uevs9j"> </div>'),Fs=l('<div class="svelte-1uevs9j"> </div>'),Os=l('<div class="svelte-1uevs9j"> </div>'),Is=l('<div class="svelte-1uevs9j"> </div>'),Rs=l('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Ks=l('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Ws=l('<div class="svelte-1uevs9j">※テスト用カードです</div>'),zs=l('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),Vs=l('<a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a>'),Xs=l('<div class="duel_card_info_links svelte-1uevs9j"><!> <!> <a target="_blank" rel="noopener noreferrer" title="google" class="svelte-1uevs9j">⇒google検索</a></div>'),Gs=l("<!> <!>",1),Qs=l('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><!> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Js(_,i){_t(i,!1);let t=Ae(i,"entity",8),d=Ae(i,"mode",12,"Normal"),f=ne(new Promise(()=>{}));const p=()=>{var D,M;let E=t()&&t().entityType==="Card"?t().origin.cardId:(M=(D=t())==null?void 0:D.parent)==null?void 0:M.origin.cardId;return E??!1?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${E}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:""};ca(()=>(Rt(t()),wa),()=>{x(f,na.then(async E=>{if(t().origin.description||t().origin.pendulumDescription||t().origin.wikiEncodedName)return t().origin;const D=E.getCardInfo(t().origin.name);if(D)return D.cardId!==void 0&&!D.description&&!D.pendulumDescription&&await wa([D.cardId]),D}))}),$a(),ut();var c=xe(),o=H(c);{var U=E=>{var D=Qs();D.__click=[ms,d,t],D.__contextmenu=[ps,d,t];var M=a(D),Y=a(M),n=a(Y),z=a(n),N=s(Y,2),y=a(N);{var g=F=>{var A=gs(),G=a(A);u(me=>b(G,me),[()=>"★".repeat(t().lvl)],re),r(F,A)},O=F=>{var A=xe(),G=H(A);{var me=ae=>{var X=ys(),T=a(X);u(P=>b(T,P),[()=>"☆".repeat(t().rank)],re),r(ae,X)},te=ae=>{var X=xe(),T=H(X);{var P=Q=>{var S=hs(),q=a(S);u(L=>b(q,L),[()=>t().origin.linkArrowKeys.map(L=>Ga[L].emoji).join("")],re),r(Q,S)};C(T,Q=>{t().origin.linkArrowKeys&&Q(P)},!0)}r(ae,X)};C(G,ae=>{t().rank&&t().rank>0?ae(me):ae(te,!1)},!0)}r(F,A)};C(y,F=>{t().lvl&&t().lvl>0?F(g):F(O,!1)})}var J=s(y,2),pe=a(J),B=s(N,2);{var j=F=>{var A=Ms(),G=H(A);{var me=T=>{var P=bs(),Q=a(P),S=a(Q),q=s(Q,2),L=a(q);u(()=>{b(S,`◀ ${t().psL??""}`),b(L,`${t().psR??""} ▶`)}),r(T,P)};C(G,T=>{var P;(P=t().origin.monsterCategories)!=null&&P.includes("Pendulum")&&T(me)})}var te=s(G,2);{var ae=T=>{var P=Ds(),Q=H(P),S=a(Q);_e(S,1,()=>t().attr,ue,(k,v)=>{var m=ks(),$=H(m),ee=s($,2),V=a(ee);u(()=>{Ye($,`monster_attr ${e(v)??""} svelte-1uevs9j`),b(V,`${Sa[e(v)]??""}属性`)}),r(k,m)});var q=s(S,2);_e(q,1,()=>t().types,ue,(k,v)=>{var m=ws(),$=a(m);u(()=>{Ye(m,`monster_cat ${e(v)??""} svelte-1uevs9j`),b($,`${ga[e(v)]??""}${Ma[e(v)]??""}族`)}),r(k,m)});var L=s(q,4),K=a(L),I=s(L,2);{var se=k=>{var v=Cs(),m=s(H(v),2),$=a(m);u(()=>b($,t().def??"?")),r(k,v)};C(I,k=>{var v;(v=t().status.monsterCategories)!=null&&v.includes("Link")||k(se)})}var he=s(Q,2);_e(he,5,()=>t().status.monsterCategories??[],ue,(k,v)=>{var m=xs(),$=a(m);u(()=>{Ye(m,`monster_cat ${e(v)??""} svelte-1uevs9j`),b($,`${la[e(v)]??""}${_a[e(v)]??""}`)}),r(k,m)}),u(()=>b(K,t().atk??"?")),r(T,P)},X=T=>{var P=xe(),Q=H(P);{var S=L=>{var K=$s(),I=s(a(K),2),se=a(I);u(()=>b(se,`${ya[t().status.spellCategory]??""}魔法`)),r(L,K)},q=L=>{var K=xe(),I=H(K);{var se=he=>{var k=Ss(),v=s(a(k),2),m=a(v);u(()=>b(m,`${ha[t().status.trapCategory]??""}罠`)),r(he,k)};C(I,he=>{t().kind==="Trap"&&t().status.trapCategory&&he(se)},!0)}r(L,K)};C(Q,L=>{t().kind==="Spell"&&t().status.spellCategory?L(S):L(q,!1)},!0)}r(T,P)};C(te,T=>{t().kind==="Monster"?T(ae):T(X,!1)})}r(F,A)};C(B,F=>{d()!=="Debug"&&F(j)})}var ve=s(M,2),Be=a(ve);{var Se=F=>{var A=Es(),G=s(a(A),2);_e(G,5,()=>t().actions,ue,(me,te)=>{var ae=xe();const X=re(()=>e(te).actionCountUpperBound),T=re(()=>e(te).actionCount);var P=H(ae);{var Q=S=>{var q=Ts(),L=a(q),K=a(L),I=s(L,2),se=a(I),he=s(I,4),k=a(he);u(()=>{b(K,e(te).title),b(se,e(T)),b(k,e(X))}),r(S,q)};C(P,S=>{e(X)!==void 0&&e(T)!==void 0&&S(Q)})}r(me,ae)}),r(F,A)},de=F=>{var A=xe(),G=H(A);{var me=ae=>{var X=Ls(),T=H(X);{var P=q=>{var L=As(),K=a(L);gt(K,()=>e(f),I=>{var se=lt('"読み込み中"');r(I,se)},(I,se)=>{var he=js(),k=a(he);u(()=>{var v;return b(k,(v=e(se))==null?void 0:v.pendulumDescription)}),r(I,he)}),r(q,L)};C(T,q=>{var L;(L=t().status.monsterCategories)!=null&&L.includes("Pendulum")&&q(P)})}var Q=s(T,2),S=a(Q);gt(S,()=>e(f),q=>{var L=lt('"読み込み中"');r(q,L)},(q,L)=>{var K=Bs(),I=a(K);u(()=>{var se;return b(I,(se=e(L))==null?void 0:se.description)}),r(q,K)}),r(ae,X)},te=ae=>{var X=Rs(),T=a(X),P=a(T);_e(P,0,()=>["info","status"],ue,(He,we)=>{var je=Us(),We=H(je),Ze=a(We),kt=s(We,2);_e(kt,1,()=>Object.entries(t()[we]),ue,(Ge,st)=>{let it=()=>e(st)[0],mt=()=>e(st)[1];var Tt=qs(),Qt=a(Tt),Jt=s(Qt);{var Zt=wt=>{var Lt=Ys(),h=s(H(Lt));_e(h,1,mt,ue,(w,R)=>{var fe=lt();u(Ue=>b(fe,`${Ue??""},`),[()=>e(R).toString()],re),r(w,fe)}),r(wt,Lt)},Nt=wt=>{var Lt=lt();u(h=>b(Lt,`${h??""},`),[()=>{var h;return(h=mt())==null?void 0:h.toString()}],re),r(wt,Lt)};C(Jt,wt=>{Array.isArray(mt())?wt(Zt):wt(Nt,!1)})}u(()=>b(Qt,`"${it()??""}" : `)),r(Ge,Tt)});var ot=s(kt,2);ot.textContent="},",u(()=>b(Ze,`"${we??""}" :{`)),r(He,je)});var Q=s(P,2);Q.textContent='"actions" :[';var S=s(Q,2);_e(S,1,()=>t().actions,ue,(He,we)=>{var je=Ps(),We=a(je);u(()=>b(We,`"${e(we).playType??""} ${e(we).title??""}",`)),r(He,je)});var q=s(S,2);q.textContent="],";var L=s(q,2);L.textContent='"substituteEffects" :[';var K=s(L,2);_e(K,1,()=>t().substituteEffects,ue,(He,we)=>{var je=Hs(),We=a(je);u(()=>b(We,`"${e(we).title??""}",`)),r(He,je)});var I=s(K,2);I.textContent="],";var se=s(I,2);se.textContent='"continuousEffects" :[';var he=s(se,2);_e(he,1,()=>t().continuousEffects,ue,(He,we)=>{var je=Ns(),We=a(je);u(()=>b(We,`"${e(we).isStarted??""}",`)),r(He,je)});var k=s(he,2);k.textContent="],";var v=s(k,2);v.textContent='"procFilters" :[';var m=s(v,2);_e(m,1,()=>t().procFilterBundle.operators,ue,(He,we)=>{var je=Fs(),We=a(je);u(Ze=>b(We,`"${Ze??""} ${e(we).title??""} ${e(we).isEffective??""} ",`),[()=>e(we).isSpawnedBy.toString()],re),r(He,je)});var $=s(m,2);$.textContent="],";var ee=s($,2);ee.textContent='"numericStateOperators" :[';var V=s(ee,2);_e(V,1,()=>t().numericOprsBundle.operators,ue,(He,we)=>{var je=Os(),We=a(je);u(Ze=>b(We,`"${Ze??""} ${e(we).title??""} ${e(we).isEffective??""} ${e(we).isContinuous??""} ${e(we).targetState??""} ${e(we).targetStateGen??""} ",`),[()=>e(we).isSpawnedBy.toString()],re),r(He,je)});var be=s(V,2);be.textContent="],";var ce=s(be,2);ce.textContent='"stateOperators" :[';var le=s(ce,2);_e(le,1,()=>t().statusOperatorBundle.operators,ue,(He,we)=>{var je=Is(),We=a(je);u(Ze=>b(We,`"${Ze??""} ${e(we).title??""} ${e(we).isEffective??""} ",`),[()=>e(we).isSpawnedBy.toString()],re),r(He,je)});var ie=s(le,2);ie.textContent="],";var qe=s(ie,2);qe.textContent='"lastMoveLogRecord" :{';var $e=s(qe,2),Oe=a($e),Ne=s($e,2),Te=a(Ne),Ke=s(Ne,2),Ve=a(Ke),Je=s(Ke,2);Je.textContent="},",u((He,we)=>{b(Oe,`"movedBy":"${He??""}",`),b(Te,`"movedAs":"${we??""}",`),b(Ve,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var He;return(He=t().moveLog.latestRecord.movedBy)==null?void 0:He.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],re),r(ae,X)};C(G,ae=>{d()==="Normal"||d()==="Detail"?ae(me):ae(te,!1)},!0)}r(F,A)};C(Be,F=>{d()==="Detail"&&t().actions.some(A=>A.actionCountUpperBoundKey)?F(Se):F(de,!1)})}var Z=s(ve,2),Le=a(Z);{var De=F=>{var A=Gs(),G=H(A);{var me=T=>{var P=Ks();r(T,P)};C(G,T=>{t().origin.isOldVersion&&T(me)})}var te=s(G,2);{var ae=T=>{var P=Ws();r(T,P)},X=T=>{var P=Xs(),Q=a(P);{var S=K=>{var I=zs();const se=re(()=>t().entityType==="Card"?t():t().parent);var he=a(I);u(k=>{var v;rt(I,"href",k),b(he,`⇒${((v=e(se))!=null&&v.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[p],re),r(K,I)};C(Q,K=>{var I;t()&&(t().entityType==="Card"||((I=t().parent)==null?void 0:I.entityType)==="Card")&&K(S)})}var q=s(Q,2);gt(q,()=>e(f),null,(K,I)=>{var se=xe(),he=H(se);{var k=v=>{var m=Vs();u(()=>rt(m,"href",`https://yugioh-wiki.net/index.php?${e(I).wikiEncodedName}`)),r(v,m)};C(he,v=>{e(I)&&e(I).wikiEncodedName&&v(k)})}r(K,se)});var L=s(q,2);u(K=>rt(L,"href",K),[()=>`https://www.google.com/search?q=遊戯王 ${t().origin.name.replaceAll("[エラッタ前]","")}`],re),r(T,P)};C(te,T=>{t().origin.isForTest?T(ae):T(X,!1)})}r(F,A)};C(Le,F=>{t()&&F(De)})}u((F,A)=>{Ye(D,`duel_card duel_card_info ${t().origin.kind??""} ${F??""} svelte-1uevs9j`),b(z,t().nm),b(pe,A)},[()=>{var F;return(F=t().origin.monsterCategories)==null?void 0:F.join(" ")},()=>"★".repeat(t().lvl||0)],re),r(E,D)};C(o,E=>{t()&&E(U)})}r(_,c),ft()}Va(["click","contextmenu"]);var Zs=l('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),ei=l('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),ti=l('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function ai(_,i){_t(i,!1);let t=Ae(i,"cell",12);const d=()=>{t(t())},f=U=>t().cardEntities.filter(E=>E.face===U);t().field.duel.view.onDuelUpdate.append(d),ut();var p=xe(),c=H(p);{var o=U=>{var E=ti(),D=a(E),M=a(D),Y=a(M),n=s(M,2),z=a(n),N=s(D,2);_e(N,4,()=>["FaceUp","FaceDown"],ue,(y,g)=>{var O=xe(),J=H(O);{var pe=B=>{var j=ei(),ve=a(j),Be=a(ve),Se=s(ve,2);_e(Se,1,()=>f(g).toSorted(dr),ue,(de,Z)=>{var Le=Zs(),De=a(Le);const F=re(()=>t().owner===t().field.duel.duelists.Below);Vt(De,{get entity(){return e(Z)},get isVisibleForcibly(){return e(F)},isWideMode:!0,cardActionResolve:void 0}),r(de,Le)}),u(()=>b(Be,g==="FaceUp"?"表向き":"裏向き")),r(B,j)};C(J,B=>{f(g).length&&B(pe)})}r(y,O)}),u(()=>{var y;b(Y,(y=t().owner)==null?void 0:y.profile.name),b(z,t().cellType)}),r(U,E)};C(c,U=>{t().field.duel.view.infoBoardState==="CellInfo"&&U(o)})}r(_,p),ft()}var ri=l('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),si=l('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function ii(_,i){_t(i,!1);let t=Ae(i,"viewController",8),d=Ae(i,"userProfile",12);ut();var f=xe(),p=H(f);{var c=o=>{var U=si(),E=s(a(U),2),D=s(a(E),2);_e(D,1,()=>_r,ue,(M,Y)=>{var n=ri(),z=a(n),N=a(z),y=s(z,2),g=a(y);u(()=>b(g,vr[e(Y)])),cr(N,()=>d().chainConfig[e(Y)],O=>d(d().chainConfig[e(Y)]=O,!0)),W("change",N,()=>d().save()),r(M,n)}),r(o,U)};C(p,o=>{t().infoBoardState==="Config"&&o(c)})}r(_,f),ft()}function ni(_,{from:i,to:t},d={}){var{delay:f=0,duration:p=j=>Math.sqrt(j)*120,easing:c=Ca}=d,o=getComputedStyle(_),U=o.transform==="none"?"":o.transform,[E,D]=o.transformOrigin.split(" ").map(parseFloat);E/=_.clientWidth,D/=_.clientHeight;var M=li(_),Y=_.clientWidth/t.width/M,n=_.clientHeight/t.height/M,z=i.left+i.width*E,N=i.top+i.height*D,y=t.left+t.width*E,g=t.top+t.height*D,O=(z-y)*Y,J=(N-g)*n,pe=i.width/t.width,B=i.height/t.height;return{delay:f,duration:typeof p=="function"?p(Math.sqrt(O*O+J*J)):p,easing:c,css:(j,ve)=>{var Be=ve*O,Se=ve*J,de=j+ve*pe,Z=j+ve*B;return`transform: ${U} translate(${Be}px, ${Se}px) scale(${de}, ${Z});`}}}function li(_){if("currentCSSZoom"in _)return _.currentCSSZoom;for(var i=_,t=1;i!==null;)t*=+getComputedStyle(i).zoom,i=i.parentElement;return t}var oi=l('<div class="chain_number svelte-lqu21u"> </div>'),di=l('<div class="duel_card_row svelte-lqu21u"> </div>'),vi=l('<div class="appendix svelte-lqu21u"> </div>'),ci=l('<div class="appendix_wrapper svelte-lqu21u"></div>'),_i=l('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),ui=l("<div></div>");function fi(_,i){_t(i,!1);let t=Ae(i,"duel",8),d=Ae(i,"position",8,"left");const f=-100,p=()=>d()==="left"?-100:100;let c=ne([]),o=Promise.resolve(),U=Promise.resolve();const E=1e3,D=500,M=400,Y=z=>{const N={...z};N.isKnown=z.chainBlockInfo.action.entity.controller.duelistType==="Player"||z.chainBlockInfo.action.entity.face==="FaceUp",N.chainBlockInfo.onStateChange.append(y=>{if(y==="done"||y==="failed"||y==="negated")return o=o.then(async()=>{const g=new Date().getTime()-N.chainBlockInfo.wasSpawnedAt.getTime();g<E&&await ta(E-g),x(c,e(c).filter(O=>O.seq!==N.seq)),await ta(D+M)}).then(),"RemoveMe";x(c,e(c))}),U=U.then(async()=>{x(c,[N,...e(c)].sort((y,g)=>ur.isSameChain(y.clock,g.clock)&&y.chainBlockInfo.action.isWithChainBlock&&g.chainBlockInfo.action.isWithChainBlock?g.clock.totalProcSeq-y.clock.totalProcSeq:y.clock.totalProcSeq-g.clock.totalProcSeq)),await ta(300)}),o=o.then(()=>ta(1e3))};t().chainBlockLog.onInsert.append(Y),ut();var n=ui();_e(n,13,()=>e(c),z=>z.seq,(z,N)=>{var y=_i();const g=re(()=>{const{activator:A,action:G,appendix:me}=e(N).chainBlockInfo;return{activator:A,action:G,appendix:me}});var O=a(y),J=a(O);{var pe=A=>{var G=oi(),me=a(G);u(()=>b(me,`チェーン：${e(N).chainBlockInfo.chainNumber??""}`)),r(A,G)};C(J,A=>{e(N).chainBlockInfo.chainNumber&&A(pe)})}var B=s(J,2),j=a(B),ve=s(B,2),Be=a(ve);{var Se=A=>{var G=di(),me=a(G);u(()=>b(me,e(N).isKnown?e(g).action.entity.nm:"？？？")),r(A,G)};C(Be,A=>{(e(g).action.entity.entityType==="Card"||e(g).action.entity.entityType==="Token")&&A(Se)})}var de=s(Be,2),Z=a(de),Le=a(Z),De=s(Z,2);{var F=A=>{var G=ci();_e(G,5,()=>e(g).appendix,ue,(me,te)=>{var ae=vi(),X=a(ae);u(()=>b(X,e(te))),r(me,ae)}),r(A,G)};C(De,A=>{e(g).appendix&&A(F)})}u((A,G,me)=>{Ye(y,`cut_in_row ${(!e(N).chainBlockInfo.chainNumber||e(N).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Ye(O,`cut_in_item cut_in_item_${A??""} cut_in_item_${e(N).chainBlockInfo.state??""} svelte-lqu21u`),Ye(B,`duelist_name duelist_${A??""}_name svelte-lqu21u`),b(j,e(g).activator.profile.name),Ye(ve,`duel_card duel_card_${A??""} ${G??""} ${(e(N).isKnown?e(g).action.entity.origin.kind:"")??""} ${e(g).action.entity.entityType??""}  svelte-lqu21u`),b(Le,me)},[()=>e(g).activator.seat.toLowerCase(),()=>e(N).isKnown?(e(g).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(g).action.toString()],re),oe(3,O,()=>Lr,()=>new Date().getTime()-e(N).chainBlockInfo.wasSpawnedAt.getTime()<E?{x:p(),duration:M}:{y:f,duration:M}),fr(y,()=>ni,()=>({duration:D})),r(z,y)}),u(()=>Ye(n,`cut_in_container cut_in_container_${d()??""} svelte-lqu21u`)),r(_,n),ft()}const mi=Yr({duration:400});var pi=l('<div class="duel_desk_left v_flex svelte-1w535im"><!> <!> <!></div>'),gi=l('<button class="duel_field_header_message svelte-1w535im"> </button> <div class="duel_field_header_buttons svelte-1w535im"><button class="svelte-1w535im">サレンダー</button></div>',1),yi=l("<tr></tr>"),hi=l('<table class="duel_field svelte-1w535im"><tbody class="svelte-1w535im"></tbody></table>'),bi=l('<button class="svelte-1w535im">OK</button>'),ki=l('<button class="svelte-1w535im">cancel</button>'),wi=l("<!> <!>",1),Ci=l('<button class="svelte-1w535im"> </button>'),xi=l('<div style="text-align: left;"><!> <!> <!></div>'),Di=l('<div><!> <div class=" duel_desk_center v_flex svelte-1w535im"><div class="duel_field_header svelte-1w535im"><!></div> <div class="duel_field_body svelte-1w535im"><!></div> <div class="duel_field_footer svelte-1w535im"><!></div></div> <!></div> <div style="position:fixed;bottom:0"> </div> <!> <div><!></div>',1);function $i(_,i){_t(i,!1);let t=Ae(i,"duel",12),d=Ae(i,"userProfile",8),f=ne(0),p=ne(0),c=ne([]),o=ne([]),U=()=>{},E=ne([]),D=ne(),M=ne(),Y=ne(()=>!1),n=ne(!1);const z=v=>{U=v.resolve,x(E,v.dummyActionInfos.filter(m=>m.action.entity.entityType==="Duelist").filter(m=>m.action.entity.controller.seat==="Below")),x(D,void 0),x(M,void 0),x(o,[]),x(c,[]),x(n,!1),v.entitiesChoices&&(x(D,v.entitiesChoices),x(Y,()=>{var m;return((m=v.entitiesChoices)==null?void 0:m.validator(e(c)))??!1}),x(n,v.entitiesChoices.cancelable),e(D).selectables.every(m=>m.cell.isPlayFieldCell&&m.getIndexInCell()===0||m.cell.cellType==="Hand"&&m.controller.duelistType==="Player"||m.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:v.entitiesChoices,chainBlockInfos:v.chainBlockInfos,cancelable:v.entitiesChoices.cancelable}).then(m=>{U({selectedEntities:m})})),v.cellsChoices&&(x(M,v.cellsChoices),x(Y,()=>{var m;return((m=v.cellsChoices)==null?void 0:m.validator(e(o)))??!1}),x(n,v.cellsChoices.cancelable))};t().view.onWaitStart.append(z);const N=()=>{U=()=>{},x(M,void 0),x(D,void 0),x(o,[]),x(c,[]),x(Y,()=>!1),x(n,!1)};t().view.onWaitEnd.append(N);let y=ne(void 0),g=ne("Normal");const O=({card:v,mode:m})=>{x(y,v),x(g,m??(e(y)===v||e(g)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(O);const J=()=>{t(t())};t().view.onDuelUpdate.append(J),t().log.onUpdate.append(J);const pe=()=>{e(D)&&e(D).validator(e(c))&&U({selectedEntities:e(c)}),e(M)&&e(M).validator(e(o))&&U({selectedCells:e(o)})},B=()=>{U({})},j=v=>{U({actionInfo:v})},ve=()=>{U({surrender:!0})};t().main();const Be=()=>e(f)<=1400?"compact":"wide";ut();var Se=Di(),de=H(Se),Z=a(de);{var Le=v=>{var m=pi(),$=a(m);Wa($,{get duelist(){return t().duelists.Above}});var ee=s($,2);{var V=ce=>{Js(ce,{get entity(){return e(y)},get mode(){return e(g)}})};C(ee,ce=>{e(y)&&ce(V)})}var be=s(ee,2);Wa(be,{get duelist(){return t().duelists.Below}}),r(v,m)};C(Z,v=>{Be()==="wide"&&v(Le)})}var De=s(Z,2),F=a(De),A=a(F);{var G=v=>{var m=gi(),$=H(m),ee=a($),V=s($,2),be=a(V);u(()=>b(ee,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),W("click",$,()=>{t(t().view.infoBoardState="Log",!0)}),W("click",be,ve),r(v,m)};C(A,v=>{t().isEnded||v(G)})}var me=s(F,2),te=a(me);{var ae=v=>{var m=hi(),$=a(m);_e($,5,()=>t().field.cells,ue,(ee,V,be)=>{var ce=yi();Ye(ce,`${`duel_desk_row_${be}`??""} svelte-1w535im`),_e(ce,5,()=>e(V),ue,(le,ie,qe)=>{as(le,{get view(){return t().view},row:be,column:qe,get selectedEntities(){return e(c)},set selectedEntities($e){x(c,$e)},get selectedCells(){return e(o)},set selectedCells($e){x(o,$e)},$$legacy:!0})}),r(ee,ce)}),r(v,m)};C(te,v=>{t().clock.turn>0&&v(ae)})}var X=s(me,2),T=a(X);{var P=v=>{var m=wi(),$=H(m);{var ee=ce=>{var le=bi();u(ie=>le.disabled=ie,[()=>!e(Y)()],re),W("click",le,pe),r(ce,le)};C($,ce=>{((e(D)&&e(D).qty)??(e(M)&&e(M).qty)??9999)>1&&ce(ee)})}var V=s($,2);{var be=ce=>{var le=ki();W("click",le,B),r(ce,le)};C(V,ce=>{e(n)&&ce(be)})}r(v,m)},Q=v=>{var m=xe(),$=H(m);_e($,1,()=>e(E),ue,(ee,V)=>{var be=Ci(),ce=a(be);u(()=>b(ce,e(V).action.title)),W("click",be,()=>j(e(V))),r(ee,be)}),r(v,m)};C(T,v=>{e(D)&&e(D).selectables.length||e(M)&&e(M).selectables?v(P):v(Q,!1)})}var S=s(De,2);{var q=v=>{var m=xi(),$=a(m);us($,{get log(){return t().log}});var ee=s($,2);ai(ee,{get cell(){return t().view.infoBoardCell}});var V=s(ee,2);ii(V,{get userProfile(){return d()},get viewController(){return t().view}}),u(be=>Ye(m,`duel_desk_right duel_desk_right_${be??""}  svelte-1w535im`),[()=>t().view.infoBoardState.toLowerCase()],re),oe(3,m,()=>ye,()=>({duration:e(f)>1400?0:200,axis:"x"})),r(v,m)};C(S,v=>{(e(f)>1400||t().view.infoBoardState!=="Default")&&v(q)})}var L=s(de,2),K=a(L),I=s(L,2);mr(I,{get modalController(){return t().view.modalController}});var se=s(I,2),he=a(se);const k=re(()=>Be()==="wide"?"right":"left");fi(he,{get duel(){return t()},get position(){return e(k)}}),u((v,m)=>{Ye(de,`flex duel_desk ${v??""}_mode svelte-1w535im`),b(K,m),Ye(se,`cutin ${v??""}_mode svelte-1w535im`)},[Be,()=>t().clock.toFullString()],re),ua("innerWidth",v=>x(f,v)),ua("innerHeight",v=>x(p,v)),r(_,Se),ft()}var Si=l("<div></div>"),Mi=l("<!> <!> <!> <!>",1),Ti=l('<span class="atk svelte-1y1qbq4"> </span> <span class="slash svelte-1y1qbq4">/</span> <span class="def svelte-1y1qbq4"> </span>',1),Ei=l('<div role="listitem"><div class="svelte-1y1qbq4"><div class="duel_card_row card_name svelte-1y1qbq4"> </div> <div style="display:flex; flex-wrap: wrap;" class="svelte-1y1qbq4"><div style="" class="svelte-1y1qbq4"><!> <!> <!></div> <div class="atk_def svelte-1y1qbq4"><!></div></div></div></div>');function Za(_,i){_t(i,!1);let t=Ae(i,"mode",8),d=Ae(i,"cardInfo",8),f=Ae(i,"onAttention",8),p=Ae(i,"cardControlEventHandlers",8);ut();var c=Ei(),o=a(c),U=a(o),E=a(U),D=s(U,2),M=a(D),Y=a(M);{var n=B=>{var j=Mi(),ve=H(j);{var Be=De=>{var F=lt();u(()=>b(F,`★${d().level??""}`)),r(De,F)},Se=De=>{var F=xe(),A=H(F);{var G=te=>{var ae=lt();u(()=>b(ae,`☆${d().rank??""}`)),r(te,ae)},me=te=>{var ae=xe(),X=H(ae);{var T=P=>{var Q=lt();u(()=>b(Q,`Ｌ${d().link??""}`)),r(P,Q)};C(X,P=>{d().link&&P(T)},!0)}r(te,ae)};C(A,te=>{d().rank?te(G):te(me,!1)},!0)}r(De,F)};C(ve,De=>{d().level?De(Be):De(Se,!1)})}var de=s(ve,2);_e(de,1,()=>d().attributes??[],ue,(De,F)=>{var A=Si();u(()=>Ye(A,`monster_attr ${e(F)??""} svelte-1y1qbq4`)),r(De,A)});var Z=s(de,2);_e(Z,1,()=>d().types??[],ue,(De,F)=>{var A=lt();u(()=>b(A,ga[e(F)])),r(De,A)});var Le=s(Z,2);_e(Le,1,()=>d().monsterCategories??[],ue,(De,F)=>{var A=lt();u(()=>b(A,la[e(F)])),r(De,A)}),r(B,j)};C(Y,B=>{d().kind==="Monster"&&B(n)})}var z=s(Y,2);{var N=B=>{var j=lt();u(()=>b(j,`${ya[d().spellCategory]??""}魔法`)),r(B,j)};C(z,B=>{d().spellCategory&&B(N)})}var y=s(z,2);{var g=B=>{var j=lt();u(()=>b(j,`${ha[d().trapCategory]??""}罠`)),r(B,j)};C(y,B=>{d().trapCategory&&B(g)})}var O=s(M,2),J=a(O);{var pe=B=>{var j=Ti(),ve=H(j),Be=a(ve),Se=s(ve,4),de=a(Se);u(()=>{b(Be,d().attack??"?"),b(de,d().defense??"?")}),r(B,j)};C(J,B=>{d().kind==="Monster"&&B(pe)})}u(B=>{Ye(c,`${B??""} svelte-1y1qbq4`),b(E,d().name)},[()=>{var B,j;return`deck_editor_card duel_card ${d().kind} ${(j=(B=d())==null?void 0:B.monsterCategories)==null?void 0:j.join(" ")} ${d().isImplemented?"is_implemented":"is_not_implemented"} card_id_${d().cardId}`}],re),W("click",c,()=>f()(d())),W("touchstart",c,B=>p().onCardDragStart(B,t(),d())),W("touchmove",c,B=>p().onCardDragging(B,t())),W("touchend",c,function(...B){var j;(j=p().onCardDragEnd)==null||j.apply(this,B)}),W("touchcancel",c,function(...B){var j;(j=p().onCardDragCancel)==null||j.apply(this,B)}),W("mousedown",c,B=>p().onCardDragStart(B,t(),d())),W("mousemove",c,B=>p().onCardDragging(B,t())),W("mouseup",c,function(...B){var j;(j=p().onCardDragEnd)==null||j.apply(this,B)}),r(_,c),ft()}var ji=l('<button class="button_style_reset plus_minus_button svelte-1ty6ui7">+</button> <button class="button_style_reset plus_minus_button svelte-1ty6ui7">-</button>',1),Ai=l('<li class="deck_editor_item svelte-1ty6ui7"><!> <!></li>'),Bi=l('<div class="deck_editor_card_list_wrapper svelte-1ty6ui7"><ul></ul></div>');function Li(_,i){_t(i,!1);let t=Ae(i,"cardList",8),d=Ae(i,"mode",8),f=Ae(i,"state",8),p=Ae(i,"onAttention",8),c=Ae(i,"cardControlEventHandlers",8);const o=20;let U=ne(0),E=ne(o),D=ne(0),M=ne(0),Y=ne(0),n=ne();ca(()=>(e(n),Rt(d()),Rt(t()),e(Y),e(M),Rt(f())),()=>{if(e(n))if(ge(n,e(n).scrollTop=0),d()==="List"){const y=t().length>o?o:t().length;e(Y)||(x(M,e(n).scrollHeight/y),x(Y,Math.ceil(e(M)))),console.log(f(),t().length),t().length>o?x(D,e(Y)*(t().length-o*2)+Math.ceil(e(M)*(o*2-1))):x(D,e(Y)*t().length)}else x(E,t().length)}),$a(),ut();var z=Bi(),N=a(z);_e(N,5,t,ue,(y,g,O)=>{var J=xe(),pe=H(J);{var B=j=>{var ve=Ai(),Be=a(ve);Za(Be,{get mode(){return d()},get cardInfo(){return e(g)},get onAttention(){return p()},get cardControlEventHandlers(){return c()}});var Se=s(Be,2);{var de=Z=>{var Le=ji(),De=H(Le),F=s(De,2);u(A=>{De.disabled=!e(g).isImplemented,rt(De,"title",e(g).isImplemented?`※shiftキー同時押しで一括投入
※ctrlキー同時押しで枚数制限無視`:""),F.disabled=A,rt(F,"title",e(g).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>t().every(A=>A.name!==e(g).name)],re),W("click",De,A=>c().onCardAppend(A,e(g))),W("click",F,A=>c().onCardRemove(A,e(g))),r(Z,Le)};C(Se,Z=>{d()==="Deck"&&Z(de)})}r(j,ve)};C(pe,j=>{O>=e(U)&&O<=e(E)&&j(B)})}r(y,J)}),Xa(N,y=>x(n,y),()=>e(n)),u(y=>{Ye(N,`deck_editor_card_list ${y??""}  indexLowerBound_${e(U)??""} indexUpperBound=${e(E)??""} svelte-1ty6ui7`),rt(N,"style",`height: ${(e(D)?e(D)+"px":"fit-content")??""};padding-top: ${e(U)*e(Y)}px`)},[()=>f().toLowerCase()],re),W("scroll",z,y=>{if(!e(Y))return;const g=Math.ceil(y.currentTarget.scrollTop/e(Y));x(U,g<o?0:g-o),x(E,g+o)}),r(_,z),ft()}var Yi=l('<div class="svelte-bxy0h6"><button class="button_style_reset svelte-bxy0h6">クリア</button></div>'),qi=l('<div><div class="deck_editor_card_kind_header svelte-bxy0h6"><div class="svelte-bxy0h6"> <!> 枚）</div> <div style="display: flex;" class="svelte-bxy0h6"><!> <div class="triangle svelte-bxy0h6">▲</div></div></div> <div class="deck_editor_card_kind_body svelte-bxy0h6"><!></div></div>'),Ui=l('<div class="deck_editor_card_list svelte-bxy0h6"></div>');function za(_,i){_t(i,!1);let t=Ae(i,"allCardTree",8),d=Ae(i,"deckCardTree",12),f=Ae(i,"mode",8),p=Ae(i,"onAttention",8),c=Ae(i,"searchCondition",8,void 0),o=Ae(i,"cardControlEventHandlers",8),U=ne("ExtraMonster");const E=ne(f()==="List"?t():d()),D=(...y)=>{const g=y.length?y:Xt(e(E)),O=(J,pe)=>{var B;return Ja(J,pe,(B=c())==null?void 0:B.sort.filter(j=>j.priority>0).toSorted((j,ve)=>j.priority-ve.priority))};g.forEach(J=>e(E)[J].sort(O))},M=(y,g)=>{d(d()[g]=[],!0)};let Y=ne(f()==="Deck"?structuredClone(e(E)):{ExtraMonster:[],Monster:[],Spell:[],Trap:[]}),n=ne("");const z=y=>{if(!c())return!0;if(y.kind==="XyzMaterial")return!1;const g=fa(y);if(!c().deckCardKinds.includes(g)||c().name.trim().length&&[y.name,...y.nameTags??[],...y.textTags??[]].every(J=>!J.includes(c().name))||!y.isImplemented&&!c().others.includes("implemented")||y.isForTest&&!c().others.includes("test")||y.isOldVersion&&!c().others.includes("oldVersion"))return!1;if(y.kind==="Monster"){if(y.attributes&&!c().monsterAttributes.union(y.attributes).length||y.types&&!c().monsterTypes.union(y.types).length)return!1;const O=y.level??y.rank??y.link;return Pt(c().starLowerBound)&&(O??0)<c().starLowerBound||Pt(c().starUpperBound)&&(O??0)>c().starUpperBound||Pt(c().atkLowerBound)&&(y.attack??0)<c().atkLowerBound||Pt(c().atkUpperBound)&&(y.attack??0)>c().atkUpperBound||Pt(c().defLowerBound)&&(y.defense??0)<c().defLowerBound||Pt(c().defUpperBound)&&(y.defense??0)>c().defUpperBound||Pt(c().atkPlusDef)&&(!Pt(y.attack)||!Pt(y.defense)||y.attack+y.defense!==c().atkPlusDef)||!y.monsterCategories||g==="ExtraMonster"&&!y.monsterCategories.union(c().exMonsterCategories).length?!1:y.monsterCategories.union(c().monsterCategories).length}if(y.kind==="Spell")return y.spellCategory&&c().spellCategories.includes(y.spellCategory);if(y.kind==="Trap")return y.trapCategory&&c().trapCategories.includes(y.trapCategory)};ca(()=>(Rt(f()),e(E),Rt(d()),e(U),e(Y)),()=>{if(f()==="Deck"){if(Xt(e(E)).forEach(y=>ge(E,e(E)[y]=d()[y])),e(E)[e(U)].length){const y=Xt(e(E)).map(g=>({kind:g,cardInfos:e(E)[g]})).filter(({cardInfos:g})=>g.length).find(({kind:g,cardInfos:O})=>O.length!==e(Y)[g].length);y&&e(U)!==y.kind&&x(U,y.kind)}else x(U,Xt(e(E)).find(y=>e(E)[y].find(z))??"ExtraMonster");x(Y,structuredClone(e(E)))}}),ca(()=>(Rt(f()),Rt(c()),e(n)),()=>{var y;if(f()==="List"){const g=JSON.stringify((y=c())==null?void 0:y.sort);e(n)!==g&&(x(n,g),D())}}),$a(),ut();var N=Ui();_e(N,5,()=>aa,ue,(y,g,O)=>{var J=qi();const pe=re(()=>e(E)[e(g)].filter(z));var B=a(J),j=a(B),ve=a(j),Be=s(ve);{var Se=G=>{var me=lt();u(te=>b(me,`/ ${te??""}`),[()=>e(E)[e(g)].length.toLocaleString()],re),r(G,me)};C(Be,G=>{f()==="List"&&G(Se)})}var de=s(j,2),Z=a(de);{var Le=G=>{var me=Yi(),te=a(me);W("click",te,ae=>M(ae,e(g))),r(G,me)};C(Z,G=>{f()==="Deck"&&e(pe).length&&G(Le)})}var De=s(B,2),F=a(De);const A=re(()=>e(U)===e(g)?"Open":"Close");Li(F,{get mode(){return f()},get cardList(){return e(pe)},get onAttention(){return p()},get cardControlEventHandlers(){return o()},get state(){return e(A)}}),u(G=>{Ye(J,`deck_editor_card_kind deckCardKind ${(e(g)===e(U)?"selected":"")??""} ${(e(pe).length?"":"empty")??""} svelte-bxy0h6`),b(ve,`${Qa[e(g)]??""}（${G??""} `)},[()=>e(pe).length.toLocaleString()],re),W("click",B,()=>{if(e(U)!==e(g)){x(U,e(g));return}x(U,aa.map((G,me)=>me+O).map(G=>G%aa.length).map(G=>aa[G]).filter(G=>G!==e(g)).find(G=>e(E)[G].some(z))??e(g))}),r(y,J)}),r(_,N),ft()}var Pi=l('<div class="svelte-1e9s0mh"> </div>'),Hi=l('<div class="svelte-1e9s0mh"> </div>'),Ni=l('<div class="link_arrow_emoji svelte-1e9s0mh"> </div>'),Fi=l('<div class="duel_card_info_row svelte-1e9s0mh" style="position:sticky; top:0;"><!></div>'),Oi=l('<div class="plus_minus_button_area svelte-1e9s0mh"><button class="button_style_reset plus_minus_button svelte-1e9s0mh">+</button> <button class="button_style_reset plus_minus_button svelte-1e9s0mh">-</button></div>'),Ii=l('<div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"><pre class="description svelte-1e9s0mh"> </pre></div></div> <div class="duel_card_info_row svelte-1e9s0mh" style=" justify-content: space-between;"><div class="svelte-1e9s0mh"> </div> <div class="svelte-1e9s0mh"> </div></div>',1),Ri=l('<div></div> <div class="svelte-1e9s0mh"> </div>',1),Ki=l("<div> </div>"),Wi=l('<span class="svelte-1e9s0mh">/</span> <div class="monster_defense svelte-1e9s0mh"> </div>',1),zi=l("<div> </div>"),Vi=l('<div class="duel_card_info_row svelte-1e9s0mh"><!> <!> <div style="flex-grow: 1;" class="svelte-1e9s0mh"></div> <div class="monster_attack svelte-1e9s0mh"> </div> <!></div> <div class="duel_card_info_row svelte-1e9s0mh"></div>',1),Xi=l('<div class="duel_card_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"></div> <div class="svelte-1e9s0mh"> </div></div>'),Gi=l('<div class="duel_card_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"></div> <div class="svelte-1e9s0mh"> </div></div>'),Qi=l('<div class="svelte-1e9s0mh"> </div>'),Ji=l('<div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh">※エラッタ前カードです</div></div>'),Zi=l('<div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh">※テスト用カードです</div></div>'),en=l('<div class="duel_card_info_links svelte-1e9s0mh"><a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1e9s0mh"> </a> <a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1e9s0mh">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="google" class="svelte-1e9s0mh">⇒google検索</a></div>'),tn=l('<div><div class="duel_card_info_header svelte-1e9s0mh"><div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"> </div></div> <!> <!></div> <div class="duel_card_info_body svelte-1e9s0mh"><!> <!> <div class="duel_card_info_row description svelte-1e9s0mh"><div class="svelte-1e9s0mh"><pre class="description svelte-1e9s0mh"> </pre></div> <!></div> <!> <!></div></div>');function an(_,i){_t(i,!1);let t=Ae(i,"cardInfo",8,void 0),d=Ae(i,"onAttention",8),f=Ae(i,"cardControlEventHandlers",8),p=Ae(i,"deckCardTree",8),c=Ae(i,"refOnly",8);ut();var o=xe(),U=H(o);{var E=D=>{var M=tn(),Y=a(M),n=a(Y),z=a(n),N=a(z),y=s(n,2);{var g=T=>{var P=Fi(),Q=a(P);{var S=L=>{var K=Pi(),I=a(K);u(se=>b(I,se),[()=>"★".repeat(t().level)],re),r(L,K)},q=L=>{var K=xe(),I=H(K);{var se=k=>{var v=Hi(),m=a(v);u($=>b(m,$),[()=>"★".repeat(t().rank)],re),r(k,v)},he=k=>{var v=xe(),m=H(v);{var $=ee=>{var V=Ni(),be=a(V);u(ce=>b(be,ce),[()=>t().linkArrowKeys.map(ce=>Ga[ce].emoji).join("")],re),r(ee,V)};C(m,ee=>{t().linkArrowKeys&&ee($)},!0)}r(k,v)};C(I,k=>{t().rank&&t().rank>0?k(se):k(he,!1)},!0)}r(L,K)};C(Q,L=>{t().level&&t().level>0?L(S):L(q,!1)})}r(T,P)};C(y,T=>{t().kind==="Monster"&&T(g)})}var O=s(y,2);{var J=T=>{var P=Oi(),Q=a(P),S=s(Q,2);u(q=>{Q.disabled=!t().isImplemented,rt(Q,"title",t().isImplemented?`※shiftキー同時押しで一括投入
※ctrlキー同時押しで枚数制限無視`:""),S.disabled=q,rt(S,"title",t().isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>p()[fa(t())].every(q=>q.name!==t().name)],re),W("click",Q,q=>f().onCardAppend(q,t())),W("click",S,q=>f().onCardRemove(q,t())),r(T,P)};C(O,T=>{c()||T(J)})}var pe=s(Y,2),B=a(pe);{var j=T=>{var P=Ii(),Q=H(P),S=a(Q),q=a(S),L=a(q),K=s(Q,2),I=a(K),se=a(I),he=s(I,2),k=a(he);u(()=>{b(L,t().pendulumDescription),b(se,`◀ ${t().pendulumScaleL??""}`),b(k,`${t().pendulumScaleR??""} ▶`)}),r(T,P)};C(B,T=>{var P;(P=t().monsterCategories)!=null&&P.includes("Pendulum")&&T(j)})}var ve=s(B,2);{var Be=T=>{var P=Vi(),Q=H(P),S=a(Q);{var q=m=>{var $=Ri(),ee=H($),V=s(ee,2),be=a(V);u(()=>{Ye(ee,`monster_attr ${t().attributes[0]??""} svelte-1e9s0mh`),b(be,`${Sa[t().attributes[0]]??""}属性`)}),r(m,$)};C(S,m=>{t().attributes&&m(q)})}var L=s(S,2);{var K=m=>{var $=Ki(),ee=a($);u(()=>{Ye($,`monster_cat ${t().types[0]??""} svelte-1e9s0mh`),b(ee,`${ga[t().types[0]]??""}${Ma[t().types[0]]??""}族`)}),r(m,$)};C(L,m=>{t().types&&m(K)})}var I=s(L,4),se=a(I),he=s(I,2);{var k=m=>{var $=Wi(),ee=s(H($),2),V=a(ee);u(()=>b(V,t().defense??"?")),r(m,$)};C(he,m=>{var $;($=t().monsterCategories)!=null&&$.includes("Link")||m(k)})}var v=s(Q,2);_e(v,5,()=>t().monsterCategories??[],ue,(m,$)=>{var ee=zi(),V=a(ee);u(()=>{Ye(ee,`monster_cat ${e($)??""} svelte-1e9s0mh`),b(V,`${la[e($)]??""}${_a[e($)]??""}`)}),r(m,ee)}),u(()=>b(se,t().attack??"?")),r(T,P)},Se=T=>{var P=xe(),Q=H(P);{var S=L=>{var K=Xi(),I=s(a(K),2),se=a(I);u(()=>b(se,`${ya[t().spellCategory]??""}魔法`)),r(L,K)},q=L=>{var K=xe(),I=H(K);{var se=he=>{var k=Gi(),v=s(a(k),2),m=a(v);u(()=>b(m,`${ha[t().trapCategory]??""}罠`)),r(he,k)};C(I,he=>{t().kind==="Trap"&&t().trapCategory&&he(se)},!0)}r(L,K)};C(Q,L=>{t().kind==="Spell"&&t().spellCategory?L(S):L(q,!1)},!0)}r(T,P)};C(ve,T=>{t().kind==="Monster"?T(Be):T(Se,!1)})}var de=s(ve,2),Z=a(de),Le=a(Z),De=a(Le),F=s(Z,2);{var A=T=>{var P=Qi(),Q=a(P);u(S=>b(Q,`初版発売日：${S??""}`),[()=>t().releaseDate.formatToYYYYMMDD("-")],re),r(T,P)};C(F,T=>{t().releaseDate&&T(A)})}var G=s(de,2);{var me=T=>{var P=Ji();r(T,P)};C(G,T=>{t().isOldVersion&&T(me)})}var te=s(G,2);{var ae=T=>{var P=Zi();r(T,P)},X=T=>{var P=en(),Q=a(P),S=a(Q),q=s(Q,2),L=s(q,2);u((K,I)=>{rt(Q,"href",K),b(S,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`),rt(q,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),rt(L,"href",I)},[()=>pr(t()),()=>`https://www.google.com/search?q=遊戯王 ${t().name.replaceAll("[エラッタ前]","")}`],re),r(T,P)};C(te,T=>{t().isForTest?T(ae):T(X,!1)})}u(T=>{Ye(M,`duel_card duel_card_info ${t().kind??""} ${T??""} svelte-1e9s0mh`),b(N,t().name),b(De,t().description)},[()=>{var T;return(T=t().monsterCategories)==null?void 0:T.join(" ")}],re),W("click",M,()=>d()(t())),r(D,M)};C(U,D=>{t()&&D(E)})}r(_,o),ft()}const rn={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class sn{constructor(){nt(this,"DefaultSeparator1","/");nt(this,"DefaultSeparator2"," ");nt(this,"DefaultSeparator3",":");nt(this,"createDate",i=>{if(!i)return;const t=new Date(i);if(!isNaN(t.getTime()))return t});nt(this,"createDateOr",(i,t)=>this.createDate(i)||t||new Date);nt(this,"truncateDate",i=>{const t=i||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});nt(this,"addDate",(i,t)=>{const d=this.createDateOr(i);return d.setDate(d.getDate()+t),d});nt(this,"addMonth",(i,t)=>{const d=this.createDateOr(i);return d.setMonth(d.getMonth()+t),d});nt(this,"addYear",(i,t)=>{const d=this.createDateOr(i);return d.setFullYear(d.getFullYear()+t),d});nt(this,"getDayOfWeek",(i,t="dddd")=>{const d=this.createDate(i);return d?rn[d.getDay()][t]:""});nt(this,"formatToYYYYMMDD",(i,t=this.DefaultSeparator1)=>{const d=this.createDate(i);if(!d)return"";const f=d.getFullYear().toString(),p=("0"+(d.getMonth()+1)).slice(-2),c=("0"+d.getDate()).slice(-2);return f+t+p+t+c});nt(this,"formatToYYYYMM",(i,t=this.DefaultSeparator1)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const f=d.getFullYear().toString(),p=("0"+(d.getMonth()+1)).slice(-2);return f+t+p});nt(this,"formatToHHMMSS",(i,t=this.DefaultSeparator3)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const f=d.getHours(),p=d.getMinutes(),c=d.getSeconds();return("0"+f).slice(-2)+t+("0"+p).slice(-2)+t+("0"+c).slice(-2)});nt(this,"formatToHHMM",(i,t=this.DefaultSeparator3)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const f=("0"+d.getHours()).slice(-2),p=("0"+d.getMinutes()).slice(-2);return f+t+p});nt(this,"formatToYYYYMMDD_HHMM",(i,t=this.DefaultSeparator1,d=this.DefaultSeparator2,f=this.DefaultSeparator3)=>{const p=this.createDate(i);return p?this.formatToYYYYMMDD(p,t)+d+this.formatToHHMM(p,f):""});nt(this,"formatToYYYYMMDD_HHMMSS",(i,t=this.DefaultSeparator1,d=this.DefaultSeparator2,f=this.DefaultSeparator3)=>{const p=this.createDate(i);return p?this.formatToYYYYMMDD(p,t)+d+this.formatToHHMMSS(p,f):""})}}const Dt=new sn;Date.prototype.truncateDate=function(){return Dt.truncateDate(this)};Date.prototype.getCloneOr=function(_){return Dt.createDateOr(this,_)};Date.prototype.addDate=function(_){return Dt.addDate(this,_)};Date.prototype.addMonth=function(_){return Dt.addDate(this,_)};Date.prototype.addYear=function(_){return Dt.addDate(this,_)};Date.prototype.getDayOfWeek=function(_="dddd"){return Dt.getDayOfWeek(this,_)};Date.prototype.formatToYYYYMM=function(_){return Dt.formatToYYYYMM(this,_)};Date.prototype.formatToYYYYMMDD=function(_){return Dt.formatToYYYYMMDD(this,_)};Date.prototype.formatToYYYYMMDD_HHMM=function(_,i,t){return Dt.formatToYYYYMMDD_HHMM(this,_,i,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(_,i,t){return Dt.formatToYYYYMMDD_HHMMSS(this,_,i,t)};Date.prototype.formatToHHMM=function(_){return Dt.formatToHHMM(this,_)};Date.prototype.formatToHHMMSS=function(_){return Dt.formatToHHMMSS(this,_)};var nn=l('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),ln=l('<ul class="deck_info_list svelte-2wdgc8"></ul>'),on=l('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),dn=l('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),vn=l('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),cn=l('<button class="svelte-2wdgc8">Cancel</button>'),_n=l('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function un(_,i){_t(i,!1);let t=Ae(i,"eventHolder",8),d=Ae(i,"args",8),f=Ae(i,"resolve",8),p=ne(Promise.resolve([])),c=ne();const o=()=>{x(c,new DataTransfer().files),x(p,Promise.resolve([]))},U=async n=>{n.preventDefault(),console.log("hoge",n)},E=async n=>{n.preventDefault(),n.dataTransfer&&M(n.dataTransfer.files)},D=()=>{M(e(c))},M=async n=>{if(!n.length)return;const z=[],N=[];for(const y of n)try{N.push(...await Mt.createfromJson(y))}catch(g){g instanceof Error&&z.push(g.message)}if(z.length){console.log(...z);return}x(p,e(p).then(()=>N))},Y=o;ut(),gr(_,{get eventHolder(){return t()},get args(){return d()},$$slots:{body:(n,z)=>{var N=dn(),y=a(N);gt(y,()=>na,null,(g,O)=>{var J=xe(),pe=H(J);gt(pe,()=>e(p),null,(B,j)=>{var ve=xe(),Be=H(ve);{var Se=Z=>{var Le=ln();_e(Le,5,()=>e(j),ue,(De,F)=>{var A=nn(),G=a(A),me=a(G),te=s(G,2),ae=a(te),X=s(te,2),T=a(X);u((P,Q,S)=>{b(me,e(F).name),b(ae,`${P??""}
                  /
                  ${Q??""}`),b(T,`最終使用日時 ： ${S??""}`)},[()=>e(F).cardNames.filter(P=>{var Q,S;return!((S=(Q=e(O).getCardInfo(P))==null?void 0:Q.monsterCategories)!=null&&S.union(ra).length)}).length,()=>e(F).cardNames.filter(P=>{var Q,S;return(S=(Q=e(O).getCardInfo(P))==null?void 0:Q.monsterCategories)==null?void 0:S.union(ra).length}).length,()=>e(F).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],re),r(De,A)}),r(Z,Le)},de=Z=>{var Le=on(),De=s(a(Le),2),F=a(De);yr(F,()=>e(c),A=>x(c,A)),W("change",F,D),W("cancel",F,Y),W("drop",Le,E),W("dragover",Le,U),r(Z,Le)};C(Be,Z=>{e(j).length?Z(Se):Z(de,!1)})}r(B,ve)}),r(g,J)}),r(n,N)},footer:(n,z)=>{var N=_n(),y=a(N);gt(y,()=>e(p),null,(g,O)=>{var J=xe(),pe=H(J);{var B=ve=>{var Be=vn(),Se=H(Be),de=s(Se,2),Z=s(de,2);u(()=>{Se.disabled=e(O).length===0,de.disabled=e(O).length===0}),W("click",Se,()=>f()({deckInfos:e(O),replaceAll:!1})),W("click",de,()=>f()({deckInfos:e(O),replaceAll:!0})),W("click",Z,Y),r(ve,Be)},j=ve=>{var Be=xe(),Se=H(Be);{var de=Z=>{var Le=cn();W("click",Le,()=>f()(void 0)),r(Z,Le)};C(Se,Z=>{d().cancelable&&Z(de)},!0)}r(ve,Be)};C(pe,ve=>{e(O).length?ve(B):ve(j,!1)})}r(g,J)}),r(n,N)}}}),ft()}const pa=class pa extends br{constructor(i,t){super(i,...Object.values(t))}};nt(pa,"createModalController",i=>{const t={deckUploader:new kr({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new pa(i,t),t)});let Da=pa;function fn(_,i){_t(i,!1);let t=Ae(i,"modalController",8);ut(),hr(_,{get modalController(){return t()},children:(d,f)=>{var p=xe(),c=H(p);{var o=U=>{un(U,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};C(c,U=>{t().deckUploader.state==="Shown"&&U(o)})}r(d,p)},$$slots:{default:!0}}),ft()}var mn=l("<button> </button>"),pn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),gn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),yn=l('<div class="deck_editor_search_box_row monster_ex_categories svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">エクストラ</button></div> <div class="svelte-1m129ml"></div></div>'),hn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),bn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> <div style="display: inline-block;"></div> </label>'),kn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),wn=l('<option class="svelte-1m129ml"></option>'),Cn=l('<option class="svelte-1m129ml"></option>'),xn=l('<div class="deck_editor_search_box_row monster_categories svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">モンスター</button></div> <div class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row monster_attributes svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">属性</button></div> <div class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">種族</button></div> <div class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">星攻守</button></div> <div class="svelte-1m129ml"><div class="star_range svelte-1m129ml"><span class="svelte-1m129ml">星</span> <select class="svelte-1m129ml"></select> <span class="svelte-1m129ml">～</span> <select class="svelte-1m129ml"></select></div> <div class="atk_range svelte-1m129ml"><span class="svelte-1m129ml">攻</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"> <span class="svelte-1m129ml">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"></div> <div class="def_range svelte-1m129ml"><span class="svelte-1m129ml">守</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"> <span class="svelte-1m129ml">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"></div> <div class="atk_plus_def svelte-1m129ml"><span class="svelte-1m129ml">攻+守</span> <input type="number" min="0" max="10000" step="100" class="svelte-1m129ml"></div></div></div>',1),Dn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),$n=l('<div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">魔法</button></div> <div class="svelte-1m129ml"></div></div>'),Sn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),Mn=l('<div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">罠</button></div> <div class="svelte-1m129ml"></div></div>'),Tn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),En=l('<div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">その他</button></div> <div class="svelte-1m129ml"></div></div>'),jn=l('<div class="deck_editor_card_detail svelte-1m129ml"><!></div>'),An=l("<div>カード情報整理中</div>"),Bn=l("<div>カード情報読込中</div>"),Ln=l("<option> </option>"),Yn=l('<div class="svelte-1m129ml"><a class="white_button svelte-1m129ml" download="SVS_DeckInfos.json">ダウンロード</a></div>'),qn=l('<div class="svelte-1m129ml"></div>'),Un=l('<div class="svelte-1m129ml"><a class="white_button svelte-1m129ml" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),Pn=l('<div class="svelte-1m129ml"></div>'),Hn=l('<div class="deck_editor_body_right_header svelte-1m129ml"><div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">編集対象</div> <div class="svelte-1m129ml"><select style="width:100%" class="svelte-1m129ml"></select></div></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">新規名称</div> <div class="svelte-1m129ml"><input type="text" style="width:100%" class="svelte-1m129ml"></div></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">基本操作</div> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml">デッキを保存</button></div> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml">デッキを複製</button></div> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">DL/UL</div> <!> <!> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml">アップロード</button></div></div></div> <div><!></div>',1),Nn=l("<div>デッキ情報読込中</div>"),Fn=l('<div class="deck_editor_body_right_dummy svelte-1m129ml"></div>'),On=l('<div class="deck_editor_body_right svelte-1m129ml"><!></div>'),In=l("<div><!></div>"),Rn=l('<div><div class="deck_editor_header svelte-1m129ml"></div> <div class="deck_editor_body svelte-1m129ml"><div class="deck_editor_body_left svelte-1m129ml"><div role="contentinfo" class="deck_editor_search_box svelte-1m129ml"><div class="deck_editor_search_box_header svelte-1m129ml"><div class="svelte-1m129ml"><button class="deck_editor_search_box_title svelte-1m129ml">検索条件</button></div> <div class="deck_editor_sort_setting_container svelte-1m129ml"></div></div> <div class="deck_editor_search_box_body svelte-1m129ml"><div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">名称</button></div> <div class="svelte-1m129ml"><input type="text" style="width:100%" placeholder="※ルビには対応していません" class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row card_kind svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">種類</button></div> <div class="svelte-1m129ml"></div></div> <!> <!> <!> <!> <!></div></div> <!></div> <div class="deck_editor_body_center svelte-1m129ml"><div class="deck_editor_body_center_body svelte-1m129ml"><!></div></div> <!></div> <div class="footer svelte-1m129ml"></div></div> <!> <!>',1);function Kn(_,i){_t(i,!1);const t=[],d=[],f=[],p=[],c=[],o=[],U=[],E=[];let D=Ae(i,"refOnly",8);const M=Da.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),Y={name:"",deckCardKinds:[...aa],exMonsterCategories:[...ra],monsterCategories:Ha.filter(h=>!ra.includes(h)),monsterAttributes:[...Pa],monsterTypes:[...Ua],spellCategories:qa.filter(h=>h!=="PendulumScale"),trapCategories:[...Ya],starLowerBound:0,starUpperBound:13,atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:D()?["implemented"]:["oldVersion"],sort:[...Na]},n=ne(structuredClone(Y));ge(n,e(n).monsterCategories=["Effect","Tuner","Pendulum"]);let z=ne("DeckEdit"),N=ne("SearchCondition");const y=()=>{if(!e(n).deckCardKinds.length){Xt(e(n)).forEach(h=>{Array.isArray(e(n)[h])&&Array.isArray(Y[h])?ge(n,e(n)[h]=[...Y[h]]):ge(n,e(n)[h]=Y[h])});return}ge(n,e(n).name=""),ge(n,e(n).deckCardKinds=[]),ge(n,e(n).exMonsterCategories=[]),ge(n,e(n).monsterCategories=[]),ge(n,e(n).monsterAttributes=[]),ge(n,e(n).monsterTypes=[]),ge(n,e(n).spellCategories=[]),ge(n,e(n).trapCategories=[]),ge(n,e(n).others=[]),ge(n,e(n).atkLowerBound=0),ge(n,e(n).atkUpperBound=5e3),ge(n,e(n).defLowerBound=0),ge(n,e(n).defUpperBound=5e3),ge(n,e(n).atkPlusDef=void 0),ge(n,e(n).sort=[...Na])},g=h=>{h.forEach(w=>{Array.isArray(e(n)[w])&&Array.isArray(Y[w])?ge(n,e(n)[w]=e(n)[w].length?[]:[...Y[w]]):ge(n,e(n)[w]=Y[w])})};let O=ne(),J,pe=ne(!1);const B=200,j=()=>{x(pe,!1),x(O,void 0),J=void 0},ve=(h,w)=>{const R=fa(w),fe=e(te).cardTree[R].filter(Fe=>Fe.name===w.name).length;let Ue=h.shiftKey?3-fe:1;console.debug(w,R,fe,Ue),!h.ctrlKey&&fe>2&&(Ue=0),Ue&&ge(te,e(te).cardTree[R]=[...e(te).cardTree[R],...Array(Ue).fill(w)].sort(Ja)),j(),T(w)},Be=(h,w)=>{const R=fa(w);let fe=0;ge(te,e(te).cardTree[R]=e(te).cardTree[R].filter(Ue=>Ue.name!==w.name?!0:(fe++,!h.shiftKey&&fe>1))),j(),T(w)},Se=h=>{if(h.changedTouches&&h.changedTouches.length!==1)return;const{clientX:w,clientY:R}=h.changedTouches?h.changedTouches[0]:h;return{clientX:w,clientY:R}},de={onCardAppend:ve,onCardRemove:Be,onCardDragCancel:j,onCardDragStart:(h,w,R)=>{if(T(R),D()){j();return}if(w!=="List"&&w!=="Deck"){j();return}if(w==="List"&&!R.isImplemented){j();return}const fe=Se(h);if(!fe){j();return}J={from:w,cardInfo:R,pos:fe,startPos:fe},ta(B).then(()=>{(J==null?void 0:J.cardInfo)===R&&x(O,J)}),x(pe,!1)},onCardDragging:(h,w)=>{if(e(O)&&h.preventDefault&&h.preventDefault(),e(O)&&h.stopPropagation&&h.stopPropagation(),!J){j();return}const R=Se(h);if(!R){j();return}const fe=e(O)||J;x(pe,!!(fe.from==="List"&&fe.cardInfo.isImplemented&&document.elementsFromPoint(R.clientX,R.clientY).some(Ue=>Ue.classList.contains("deck_editor_body_right_body")||Ue.classList.contains("deck_editor_body_right_dummy")))),e(pe)&&x(z,"DeckEdit"),e(O)?x(O,{...e(O),pos:R}):J.pos={...R}},onCardDragEnd:h=>{if(!J||!e(O)){j();return}const w=Se(h);if(!w){j();return}e(O).from==="List"&&e(O).cardInfo.isImplemented&&document.elementsFromPoint(w.clientX,w.clientY).some(R=>R.classList.contains("deck_editor_body_right_body"))&&ve(h,e(O).cardInfo),e(O).from==="Deck"&&!document.elementsFromPoint(w.clientX,w.clientY).some(R=>R.classList.contains("deck_editor_body_right_body"))&&Be(h,e(O).cardInfo),j()}},Z=(h,w,R)=>{Array.isArray(e(n)[w])&&Array.isArray(Y[w])&&ge(n,e(n)[w]=[R])},Le=async()=>{const w=(await e(A)).find(fe=>fe.id===e(F));if(!w)return;const R=await na;x(te,{...w,cardTree:Cr(w.cardNames.map(fe=>{const Ue=R.getCardInfo(fe);return Ue===void 0&&console.error(fe),Ue}).filter(fe=>fe!==void 0))})},De=()=>Mt.getAllDeckInfo().then(h=>(x(F,(h.find(w=>w.lastUsedAt.getTime()===Math.max(...h.map(R=>R.lastUsedAt.getTime())))??h[0]).id),h));let F=ne(-1),A=ne(De()),G=ne(e(A).then(h=>Mt.convertToObjectURL(h)));e(A).then(Le);const me=()=>{x(A,De()),x(G,e(A).then(h=>Mt.convertToObjectURL(h))),Le()};let te=ne({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardTree:{ExtraMonster:[],Monster:[],Spell:[],Trap:[]}}),ae=ne(void 0),X=0;const T=h=>{x(N,"CardDetail"),h.cardId!==void 0&&!h.description&&!h.pendulumDescription&&(X=h.cardId,wa([h.cardId]).then(()=>{h.cardId===X&&x(ae,h)})),x(ae,h)},P=async()=>{const w=(await e(A)).find(R=>R.id===e(F));if(!w)throw new Error("illegal state");return w},Q=async()=>{const h=await P();await h.saveDeckInfo({...h,name:e(te).name,cardNames:Object.values(e(te).cardTree).flatMap(w=>w).map(w=>w.name),lastUsedAt:new Date}),me()},S=async()=>{(await Mt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,Object.values(e(te).cardTree).flatMap(w=>w).map(w=>w.name))).saveDeckInfo(),me()},q=async h=>{const w=await P();!h.shiftKey&&!confirm(`デッキ【${w.name}】を削除します。
よろしいですか？`)||(await w.delete(),me())},L=async()=>{const h=await M.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!h)return;const w=[];if(h.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;w.push(...(await e(A)).map(R=>R.id))}await Promise.all(h.deckInfos.map(R=>Mt.createNewDeck(R.name,R.description,R.cardNames,R.lastUsedAt))),w.length&&await Promise.all(w.map(Mt.remove)),me()},K=()=>innerWidth<=1400?"compact":"wide";ut();var I=Rn(),se=H(I),he=s(a(se),2),k=a(he),v=a(k),m=a(v),$=a(m),ee=a($),V=s($,2);_e(V,5,()=>e(n).sort,ue,(h,w,R)=>{var fe=mn(),Ue=a(fe);u(()=>{Ye(fe,`deck_editor_sort_setting_item ${e(w).order??""} priority_${e(w).priority??""} svelte-1m129ml`),b(Ue,`${wr[e(w).key]??""}
                ${(e(w).order==="asc"?"▲":"▼")??""}`)}),W("click",fe,()=>{e(n).sort.forEach(Fe=>Fe.priority++),e(w).order=e(w).order==="asc"?"desc":"asc",Bt(()=>e(n).sort),e(w).priority=1,Bt(()=>e(n).sort)}),r(h,fe)});var be=s(m,2),ce=a(be),le=a(ce),ie=a(le),qe=s(le,2),$e=a(qe),Oe=s(ce,2),Ne=a(Oe),Te=a(Ne),Ke=s(Ne,2);_e(Ke,5,()=>aa,ue,(h,w)=>{var R=pn(),fe=a(R),Ue,Fe=s(fe);u(()=>{Ue!==(Ue=e(w))&&(fe.value=(fe.__value=e(w))==null?"":e(w)),b(Fe,` ${Qa[e(w)]??""}`)}),Ft(t,[],fe,()=>(e(w),e(n).deckCardKinds),Me=>ge(n,e(n).deckCardKinds=Me)),W("dblclick",R,Me=>Z(Me,"deckCardKinds",e(w))),r(h,R)});var Ve=s(Oe,2);{var Je=h=>{var w=yn(),R=a(w),fe=a(R),Ue=s(R,2);_e(Ue,5,()=>ra,ue,(Fe,Me)=>{var Qe=gn(),ze=a(Qe),et,Ie=s(ze);u(()=>{et!==(et=e(Me))&&(ze.value=(ze.__value=e(Me))==null?"":e(Me)),b(Ie,` ${la[e(Me)]??""}${_a[e(Me)]??""}`)}),Ft(d,[],ze,()=>(e(Me),e(n).exMonsterCategories),Pe=>ge(n,e(n).exMonsterCategories=Pe)),W("dblclick",Qe,Pe=>Z(Pe,"exMonsterCategories",e(Me))),r(Fe,Qe)}),W("click",fe,()=>g(["exMonsterCategories"])),oe(3,w,()=>ye,()=>({delay:0,duration:100})),r(h,w)};C(Ve,h=>{e(n).deckCardKinds.includes("ExtraMonster")&&h(Je)})}var He=s(Ve,2);{var we=h=>{var w=xn(),R=H(w),fe=a(R),Ue=a(fe),Fe=s(fe,2);_e(Fe,5,()=>Ha.filter(Ce=>!ra.includes(Ce)).filter(Ce=>Ce!=="Token"),ue,(Ce,Ee)=>{var Re=hn(),ke=a(Re),Xe,tt=s(ke);u(()=>{Xe!==(Xe=e(Ee))&&(ke.value=(ke.__value=e(Ee))==null?"":e(Ee)),b(tt,` ${la[e(Ee)]??""}${_a[e(Ee)]??""}`)}),Ft(f,[],ke,()=>(e(Ee),e(n).monsterCategories),at=>ge(n,e(n).monsterCategories=at)),W("dblclick",Re,at=>Z(at,"monsterCategories",e(Ee))),r(Ce,Re)});var Me=s(R,2),Qe=a(Me),ze=a(Qe),et=s(Qe,2);_e(et,5,()=>Pa,ue,(Ce,Ee)=>{var Re=bn(),ke=a(Re),Xe,tt=s(ke,2),at=s(tt);u(()=>{Xe!==(Xe=e(Ee))&&(ke.value=(ke.__value=e(Ee))==null?"":e(Ee)),Ye(tt,`monster_attr ${e(Ee)??""} svelte-1m129ml`),b(at,` ${Sa[e(Ee)]??""}`)}),Ft(p,[],ke,()=>(e(Ee),e(n).monsterAttributes),Ut=>ge(n,e(n).monsterAttributes=Ut)),W("dblclick",Re,Ut=>Z(Ut,"monsterAttributes",e(Ee))),r(Ce,Re)});var Ie=s(Me,2),Pe=a(Ie),dt=a(Pe),vt=s(Pe,2);_e(vt,5,()=>Ua,ue,(Ce,Ee)=>{var Re=kn(),ke=a(Re),Xe,tt=s(ke);u(()=>{Xe!==(Xe=e(Ee))&&(ke.value=(ke.__value=e(Ee))==null?"":e(Ee)),b(tt,` ${ga[e(Ee)]??""}
                    ${Ma[e(Ee)]??""}`)}),Ft(c,[],ke,()=>(e(Ee),e(n).monsterTypes),at=>ge(n,e(n).monsterTypes=at)),W("dblclick",Re,at=>Z(at,"monsterTypes",e(Ee))),r(Ce,Re)});var ct=s(Ie,2),yt=a(ct),ht=a(yt),Et=s(yt,2),jt=a(Et),$t=s(a(jt),2);u(()=>{e(n),Bt(()=>{})}),_e($t,4,()=>Array(14),ue,(Ce,Ee,Re)=>{var ke=wn();ke.value=(ke.__value=Re)==null?"":Re,ke.textContent=Re,r(Ce,ke)});var At=s($t,4);u(()=>{e(n),Bt(()=>{})}),_e(At,4,()=>Array(14),ue,(Ce,Ee,Re)=>{var ke=Cn();ke.value=(ke.__value=Re)==null?"":Re,ke.textContent=Re,r(Ce,ke)});var St=s(jt,2),Ct=s(a(St),2),xt=s(Ct,4),Yt=s(St,2),qt=s(a(Yt),2),Kt=s(qt,4),Wt=s(Yt,2),pt=s(a(Wt),2);W("click",Ue,()=>g(["monsterCategories"])),oe(3,R,()=>ye,()=>({delay:0,duration:100})),W("click",ze,()=>g(["monsterAttributes"])),oe(3,Me,()=>ye,()=>({delay:0,duration:100})),W("click",dt,()=>g(["monsterTypes"])),oe(3,Ie,()=>ye,()=>({delay:0,duration:100})),W("click",ht,()=>g(["starLowerBound","starUpperBound","atkLowerBound","atkUpperBound","defLowerBound","defUpperBound","atkPlusDef"])),It($t,()=>e(n).starLowerBound,Ce=>ge(n,e(n).starLowerBound=Ce)),It(At,()=>e(n).starUpperBound,Ce=>ge(n,e(n).starUpperBound=Ce)),Ot(Ct,()=>e(n).atkLowerBound,Ce=>ge(n,e(n).atkLowerBound=Ce)),Ot(xt,()=>e(n).atkUpperBound,Ce=>ge(n,e(n).atkUpperBound=Ce)),Ot(qt,()=>e(n).defLowerBound,Ce=>ge(n,e(n).defLowerBound=Ce)),Ot(Kt,()=>e(n).defUpperBound,Ce=>ge(n,e(n).defUpperBound=Ce)),Ot(pt,()=>e(n).atkPlusDef,Ce=>ge(n,e(n).atkPlusDef=Ce)),oe(3,ct,()=>ye,()=>({delay:0,duration:100})),r(h,w)};C(He,h=>{(e(n).deckCardKinds.includes("Monster")||e(n).deckCardKinds.includes("ExtraMonster"))&&h(we)})}var je=s(He,2);{var We=h=>{var w=$n(),R=a(w),fe=a(R),Ue=s(R,2);_e(Ue,5,()=>qa.filter(Fe=>Fe!=="PendulumScale"),ue,(Fe,Me)=>{var Qe=Dn(),ze=a(Qe),et,Ie=s(ze);u(()=>{et!==(et=e(Me))&&(ze.value=(ze.__value=e(Me))==null?"":e(Me)),b(Ie,` ${ya[e(Me)]??""}`)}),Ft(o,[],ze,()=>(e(Me),e(n).spellCategories),Pe=>ge(n,e(n).spellCategories=Pe)),W("dblclick",Qe,Pe=>Z(Pe,"spellCategories",e(Me))),r(Fe,Qe)}),W("click",fe,()=>g(["spellCategories"])),oe(3,w,()=>ye,()=>({delay:0,duration:100})),r(h,w)};C(je,h=>{e(n).deckCardKinds.includes("Spell")&&h(We)})}var Ze=s(je,2);{var kt=h=>{var w=Mn(),R=a(w),fe=a(R),Ue=s(R,2);_e(Ue,5,()=>Ya,ue,(Fe,Me)=>{var Qe=Sn(),ze=a(Qe),et,Ie=s(ze);u(()=>{et!==(et=e(Me))&&(ze.value=(ze.__value=e(Me))==null?"":e(Me)),b(Ie,` ${ha[e(Me)]??""}`)}),Ft(U,[],ze,()=>(e(Me),e(n).trapCategories),Pe=>ge(n,e(n).trapCategories=Pe)),W("dblclick",Qe,Pe=>Z(Pe,"trapCategories",e(Me))),r(Fe,Qe)}),W("click",fe,()=>g(["trapCategories"])),oe(3,w,()=>ye,()=>({delay:0,duration:100})),r(h,w)};C(Ze,h=>{e(n).deckCardKinds.includes("Trap")&&h(kt)})}var ot=s(Ze,2);{var Ge=h=>{var w=En(),R=a(w),fe=a(R),Ue=s(R,2);_e(Ue,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],ue,(Fe,Me)=>{var Qe=Tn(),ze=a(Qe),et,Ie=s(ze);u(()=>{et!==(et=Me.key)&&(ze.value=(ze.__value=Me.key)==null?"":Me.key),b(Ie,` ${Me.text??""}`)}),Ft(E,[],ze,()=>(Me.key,e(n).others),Pe=>ge(n,e(n).others=Pe)),r(Fe,Qe)}),W("click",fe,()=>g(["others"])),oe(3,w,()=>ye,()=>({delay:0,duration:100})),r(h,w)};C(ot,h=>{D()||h(Ge)})}var st=s(v,2);{var it=h=>{var w=jn(),R=a(w);an(R,{get cardInfo(){return e(ae)},onAttention:T,cardControlEventHandlers:de,get deckCardTree(){return e(te).cardTree},get refOnly(){return D()}}),r(h,w)};C(st,h=>{e(N)==="CardDetail"&&e(ae)&&h(it)})}var mt=s(k,2),Tt=a(mt),Qt=a(Tt);gt(Qt,()=>na,h=>{var w=Bn();r(h,w)},(h,w)=>{var R=xe(),fe=H(R);gt(fe,()=>e(w).treePrms,Ue=>{var Fe=An();r(Ue,Fe)},(Ue,Fe)=>{za(Ue,{mode:"List",get allCardTree(){return e(Fe)},onAttention:T,get searchCondition(){return e(n)},cardControlEventHandlers:de,get deckCardTree(){return e(te).cardTree},set deckCardTree(Me){ge(te,e(te).cardTree=Me)},$$legacy:!0})}),r(h,R)});var Jt=s(mt,2);{var Zt=h=>{var w=On(),R=a(w);{var fe=Fe=>{var Me=xe(),Qe=H(Me);gt(Qe,()=>e(A),ze=>{var et=Nn();r(ze,et)},(ze,et)=>{var Ie=Hn(),Pe=H(Ie),dt=a(Pe),vt=s(a(dt),2),ct=a(vt);u(()=>{e(F),Bt(()=>{e(et)})}),_e(ct,5,()=>e(et),ue,(ke,Xe)=>{var tt=Ln(),at={},Ut=a(tt);u(()=>{at!==(at=e(Xe).id)&&(tt.value=(tt.__value=e(Xe).id)==null?"":e(Xe).id),b(Ut,e(Xe).name)}),r(ke,tt)});var yt=s(dt,2),ht=s(a(yt),2),Et=a(ht),jt=s(yt,4),$t=s(a(jt),2),At=a($t),St=s($t,2),Ct=a(St),xt=s(St,2),Yt=a(xt),qt=s(jt,2),Kt=s(a(qt),2);gt(Kt,P,ke=>{var Xe=qn();r(ke,Xe)},(ke,Xe)=>{var tt=Yn(),at=a(tt);u(Ut=>rt(at,"href",Ut),[()=>Mt.convertToObjectURL([e(Xe)])],re),r(ke,tt)});var Wt=s(Kt,2);gt(Wt,()=>e(G),ke=>{var Xe=Pn();r(ke,Xe)},(ke,Xe)=>{var tt=Un(),at=a(tt);u(()=>rt(at,"href",e(Xe))),r(ke,tt)});var pt=s(Wt,2),Ce=a(pt),Ee=s(Pe,2),Re=a(Ee);za(Re,{mode:"Deck",allCardTree:{ExtraMonster:[],Monster:[],Spell:[],Trap:[]},onAttention:T,cardControlEventHandlers:de,get deckCardTree(){return e(te).cardTree},set deckCardTree(ke){ge(te,e(te).cardTree=ke)},$$legacy:!0}),u(()=>Ye(Ee,`deck_editor_body_right_body ${(e(pe)?"can_drop":"")??""} svelte-1m129ml`)),It(ct,()=>e(F),ke=>x(F,ke)),W("change",ct,Le),Ot(Et,()=>e(te).name,ke=>ge(te,e(te).name=ke)),W("click",At,Q),W("click",Ct,S),W("click",Yt,q),W("click",Ce,L),r(ze,Ie)}),r(Fe,Me)},Ue=Fe=>{var Me=Fn();r(Fe,Me)};C(R,Fe=>{e(z)==="DeckEdit"||K()==="wide"?Fe(fe):Fe(Ue,!1)})}W("click",w,()=>{x(z,"DeckEdit")}),W("focusin",w,()=>{x(z,"DeckEdit")}),r(h,w)};C(Jt,h=>{D()||h(Zt)})}var Nt=s(se,2);{var wt=h=>{var w=In(),R=a(w);Za(R,{mode:"Dragging",get cardInfo(){return e(O).cardInfo},onAttention:T,cardControlEventHandlers:de}),u(()=>rt(w,"style",`position: fixed;
          top:${e(O).pos.clientY??""}px;
          left:${e(O).pos.clientX??""}px;
          z-index:3; 
          filter: opacity(0.8);
        	transform: translateX(-50%) translateY(-50%);`)),r(h,w)};C(Nt,h=>{e(O)&&h(wt)})}var Lt=s(Nt,2);fn(Lt,{modalController:M}),u((h,w,R)=>Ye(se,`deck_editor
         screen_size_${h??""}
         left_pain_mode_${w??""}
         main_view_mode_${R??""}
         ${(e(O)?"dragging_card":"")??""}
          svelte-1m129ml`),[K,()=>e(N).toLowerCase(),()=>e(z).toLowerCase()],re),W("click",ee,y),W("click",ie,()=>g(["name"])),Ot($e,()=>e(n).name,h=>ge(n,e(n).name=h)),W("click",Te,()=>g(["deckCardKinds"])),W("focusin",v,()=>{x(N,"SearchCondition"),x(z,"SearchCondition")}),W("click",v,()=>{x(N,"SearchCondition"),x(z,"SearchCondition")}),W("touchmove",se,h=>e(O)&&de.onCardDragging(h,"Overlay")),W("mousemove",se,h=>e(O)&&de.onCardDragging(h,"Overlay")),r(_,I),ft()}class Wn{constructor(){nt(this,"openMode");new URLSearchParams(window.location.search).get("mode")==="search"?this.openMode="CardSearch":this.openMode="Normal"}}const zn=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],Vn=3;var Xn=l('<input class="game_mode_radio svelte-sy4ydn" type="radio" name="game_mode"> <label> </label>',1),Gn=l('<option class="svelte-sy4ydn"> </option>'),Qn=l('<option class="svelte-sy4ydn"> </option>'),Jn=l('<option class="svelte-sy4ydn"> </option>'),Zn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_deck_selector" class="deck_selector svelte-sy4ydn"><option class="svelte-sy4ydn">デフォルト</option><!></select></div></td></tr>'),el=l('<option class="svelte-sy4ydn"> </option>'),tl=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">対戦相手：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select> <div class="svelte-sy4ydn"> </div></div></td></tr> <!> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">先攻後攻：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select></div></td></tr>',1),al=l('<option class="svelte-sy4ydn"> </option>'),rl=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-sy4ydn">難易度：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="difficulty_selector" class="difficulty_selector svelte-sy4ydn"></select></div></td></tr>'),sl=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label class="config_row_label svelte-sy4ydn" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"></div></td></tr> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="deck_selector" class="deck_selector svelte-sy4ydn"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">duel start!</button></div></td></tr>',1),il=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),nl=l('<tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">deck edit</button></div></td></tr>'),ll=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="duelist_name" class="config_row_label duelist_name svelte-sy4ydn">名前：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><input id="duelist_name" class="duelist_name svelte-sy4ydn" type="text"></div></td></tr> <!> <!>',1),ol=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),dl=l('<div class="app_body svelte-sy4ydn"><table class="config_table svelte-sy4ydn"><tbody><!></tbody></table></div> <div style="margin: 0.8rem;"><a>※※カード検索専用モード切り替え※※</a></div>',1),vl=l('<span class="svelte-sy4ydn"> </span> <span class="svelte-sy4ydn"> </span>',1),cl=l('<div class="result_title result_win svelte-sy4ydn">YOU WIN</div>'),_l=l('<div class="result_title result_lose svelte-sy4ydn">YOU LOSE</div>'),ul=l('<div class="result_title result_draw svelte-sy4ydn">DRAW</div>'),fl=l('<div class="twitter_share_button_wrapper svelte-sy4ydn"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-sy4ydn">X(twitter)でシェアする</a></div>'),ml=l('<div class="result svelte-sy4ydn"><!> <div class="reason_of_end svelte-sy4ydn"> </div> <!> <div class="svelte-sy4ydn"><button class="white_button svelte-sy4ydn">TOPへ戻る</button></div></div>'),pl=l('<main style="flex-direction: column; display :flex" class="svelte-sy4ydn"><div class="link link_left svelte-sy4ydn"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-sy4ydn">posfie(toggeter)</a></div> <div class="link link_right svelte-sy4ydn"><a class="a_button svelte-sy4ydn" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">現時点とこの先のこと</a></div> <!> <div class="footer card_summary svelte-sy4ydn"><!></div> <div class="footer debug_info svelte-sy4ydn"><span class="svelte-sy4ydn"> </span> <span class="user_agent_info svelte-sy4ydn"> </span> <span class="screen_info svelte-sy4ydn"> </span></div> <!></main>');function gl(_,i){_t(i,!1);const t=new xr("stk_ygo_svelte",Vn,zn),d=new Wn;let f=ne(0),p=ne(0),c=ne(),o=ne("FtkChallenge"),U=ne(d.openMode==="CardSearch"?"DeckEdit":"None"),E=ne(0),D=ne(""),M=ne(void 0);const Y="https://setta238.github.io/stk_ygo_svelte/",n="遊戯王deそりてあ",z="ninja_no",N=Dr.getOrCreateNew(t).then(k=>(x(o,Fa.includes(k.previousGameMode)?k.previousGameMode:"FtkChallenge"),De(k.previousNpcId),k)),y=k=>{var m;const v=k.find($=>$.lastUsedAt.getTime()===Math.max(...k.map(ee=>ee.lastUsedAt.getTime())))??k[0];x(E,v.id),e(o)==="FtkChallenge"&&v.deckType!=="Preset"&&x(E,((m=zt.find($=>$.deckType==="Preset"))==null?void 0:m.id)??e(E))};let g=ne(Mt.getAllDeckInfo(t).then(k=>(Promise.all(k.filter(v=>!v.lastUsedAt).map(v=>{v.saveDeckInfo()})),y(k),k)));const O=async()=>{const k=e(E);let v=(await e(g)).find($=>$.id===k)??(await pe()).find($=>$.id===k);v&&await v.updateTimestamp();let m=v;if(m||(m=zt.find($=>$.id===k)),!m)throw new Error("illegal state");return m},J=async()=>{(await N).save({previousGameMode:e(o)})},pe=()=>(x(g,Mt.getAllDeckInfo(t).then(k=>(y(k),k))),e(g)),B=async()=>{(await e(g)).length||(await Mt.prepareSampleDeck(),pe())},j=async()=>{await Promise.all([J(),B()]);const k=await O(),v=await N;let m=ea.find(V=>V.id===Number.MIN_SAFE_INTEGER)??ea[0],$=zt.find(V=>V.id===Number.MIN_SAFE_INTEGER)??zt[0],ee="PlayFirst";e(o)==="FtkChallenge"?m=ea.filter(V=>V.npcType==="FtkChallenge").find(V=>V.difficulty===v.previousDifficulty)??m:e(o)==="Free"&&(m=ea.find(V=>V.id===v.previousNpcId)??m,$=zt.slice(-1)[0],ee=v.previousStartMode),m.npcType!=="FtkChallenge"&&v.previousNpcDeckId>-1?$=(await e(g)).find(V=>V.id===v.previousNpcDeckId)??$:$=zt.find(V=>V.id===m.id)??$,x(c,new Tr(v,"Player",k,[],m,"NPC",$,[],ee)),e(c).onDuelEnd.append(()=>(x(c,e(c)),"RemoveMe"))},ve=async()=>{await Promise.all([J(),B()]),x(U,"DeckEdit")},Be=async k=>{await J(),k.key==="Enter"&&!k.repeat&&(await N).save()},Se=()=>{if(d.openMode==="CardSearch"){window.location.assign(window.location.origin+window.location.pathname);return}x(g,pe()),x(c,void 0),x(U,"None")};let de=Date.now();const Z=k=>{Date.now()-de<200||(de=Date.now(),x(o,k),pe())},Le=k=>{De(Number(k.currentTarget.value))},De=k=>{var v;x(M,ea.find(m=>m.id===k)),x(D,((v=e(M))==null?void 0:v.description)??"")};B(),ut();var F=pl(),A=s(a(F),2),G=a(A),me=s(A,2);{var te=k=>{var v=xe(),m=H(v);gt(m,()=>N,null,($,ee)=>{$i($,{get duel(){return e(c)},get userProfile(){return e(ee)}})}),r(k,v)},ae=k=>{var v=xe(),m=H(v);{var $=V=>{const be=re(()=>d.openMode==="CardSearch");Kn(V,{get refOnly(){return e(be)}})},ee=V=>{var be=dl(),ce=H(be),le=a(ce),ie=a(le),qe=a(ie);gt(qe,()=>N,Ne=>{var Te=ol();r(Ne,Te)},(Ne,Te)=>{var Ke=ll(),Ve=H(Ke),Je=a(Ve),He=a(Je),we=s(Je),je=a(we),We=a(je),Ze=s(Ve,2);gt(Ze,()=>e(g),Ge=>{var st=il();r(Ge,st)},(Ge,st)=>{var it=sl(),mt=H(it),Tt=a(mt),Qt=a(Tt),Jt=s(Tt),Zt=a(Jt);_e(Zt,5,()=>Fa,ue,(Ie,Pe)=>{var dt=Xn(),vt=H(dt),ct=s(vt,2),yt=a(ct);u(ht=>{rt(vt,"id",`game_mode_radio_${ht??""}`),Sr(vt,e(Pe)),Mr(vt,e(o)===e(Pe)),Ye(ct,`game_mode_tab_label game_mode_tab_${ht??""} svelte-sy4ydn`),rt(ct,"for",`game_mode_radio_${ht??""}`),b(yt,e(Pe))},[()=>e(Pe).toLowerCase()],re),W("change",vt,()=>Z(e(Pe))),r(Ie,dt)});var Nt=s(mt,2),wt=a(Nt),Lt=a(wt),h=s(wt),w=a(h),R=a(w);u(()=>{e(E),Bt(()=>{e(o),e(st)})}),_e(R,5,()=>e(o)==="FtkChallenge"?zt.filter(Ie=>Ie.deckType==="Preset"):e(st),ue,(Ie,Pe)=>{var dt=Gn(),vt={},ct=a(dt);u(()=>{vt!==(vt=e(Pe).id)&&(dt.value=(dt.__value=e(Pe).id)==null?"":e(Pe).id),b(ct,e(Pe).name)}),r(Ie,dt)});var fe=s(Nt,2);{var Ue=Ie=>{var Pe=tl(),dt=H(Pe),vt=a(dt),ct=a(vt),yt=s(vt),ht=a(yt),Et=a(ht);u(()=>{e(Te),Bt(()=>{})}),_e(Et,5,()=>ea,ue,(pt,Ce)=>{var Ee=Qn(),Re={},ke=a(Ee);u(()=>{Re!==(Re=e(Ce).id)&&(Ee.value=(Ee.__value=e(Ce).id)==null?"":e(Ce).id),b(ke,e(Ce).name)}),r(pt,Ee)});var jt=s(Et,2),$t=a(jt),At=s(dt,2);{var St=pt=>{var Ce=Zn(),Ee=a(Ce),Re=a(Ee),ke=s(Ee),Xe=a(ke),tt=a(Xe);u(()=>{e(Te),Bt(()=>{e(st)})});var at=a(tt);at.value=(at.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Ut=s(at);_e(Ut,1,()=>e(st),ue,(ba,da)=>{var va=Jn(),ja={},er=a(va);u(()=>{ja!==(ja=e(da).id)&&(va.value=(va.__value=e(da).id)==null?"":e(da).id),b(er,e(da).name)}),r(ba,va)}),oe(3,Re,()=>ye,()=>({duration:200})),oe(3,Ee,()=>ye,()=>({duration:200})),It(tt,()=>e(Te).previousNpcDeckId,ba=>e(Te).previousNpcDeckId=ba),oe(3,Xe,()=>ye,()=>({duration:200})),oe(3,ke,()=>ye,()=>({duration:200})),oe(3,Ce,()=>ye,()=>({duration:200})),r(pt,Ce)};C(At,pt=>{var Ce;((Ce=e(M))==null?void 0:Ce.npcType)!=="FtkChallenge"&&pt(St)})}var Ct=s(At,2),xt=a(Ct),Yt=a(xt),qt=s(xt),Kt=a(qt),Wt=a(Kt);u(()=>{e(Te),Bt(()=>{})}),_e(Wt,5,()=>Xt(Oa),ue,(pt,Ce)=>{var Ee=el(),Re={},ke=a(Ee);u(()=>{Re!==(Re=e(Ce))&&(Ee.value=(Ee.__value=e(Ce))==null?"":e(Ce)),b(ke,Oa[e(Ce)])}),r(pt,Ee)}),u(()=>b($t,`※${e(D)??""}`)),oe(3,ct,()=>ye,()=>({duration:200})),oe(3,vt,()=>ye,()=>({duration:200})),W("change",Et,Le),It(Et,()=>e(Te).previousNpcId,pt=>e(Te).previousNpcId=pt),oe(3,ht,()=>ye,()=>({duration:200})),oe(3,yt,()=>ye,()=>({duration:200})),oe(3,dt,()=>ye,()=>({duration:200})),oe(3,Yt,()=>ye,()=>({duration:200})),oe(3,xt,()=>ye,()=>({duration:200})),It(Wt,()=>e(Te).previousStartMode,pt=>e(Te).previousStartMode=pt),oe(3,Kt,()=>ye,()=>({duration:200})),oe(3,qt,()=>ye,()=>({duration:200})),oe(3,Ct,()=>ye,()=>({duration:200})),r(Ie,Pe)},Fe=Ie=>{var Pe=xe(),dt=H(Pe);{var vt=ct=>{var yt=rl(),ht=a(yt),Et=a(ht),jt=s(ht),$t=a(jt),At=a($t);u(()=>{e(Te),Bt(()=>{})}),_e(At,5,()=>Er,ue,(St,Ct)=>{var xt=al(),Yt={},qt=a(xt);u(()=>{Yt!==(Yt=e(Ct))&&(xt.value=(xt.__value=e(Ct))==null?"":e(Ct)),b(qt,e(Ct))}),r(St,xt)}),oe(3,Et,()=>ye,()=>({duration:200})),oe(3,ht,()=>ye,()=>({duration:200})),It(At,()=>e(Te).previousDifficulty,St=>e(Te).previousDifficulty=St),oe(3,$t,()=>ye,()=>({duration:200})),oe(3,jt,()=>ye,()=>({duration:200})),oe(3,yt,()=>ye,()=>({duration:200})),r(ct,yt)};C(dt,ct=>{e(o)==="FtkChallenge"&&ct(vt)},!0)}r(Ie,Pe)};C(fe,Ie=>{e(o)==="Free"?Ie(Ue):Ie(Fe,!1)})}var Me=s(fe,2),Qe=a(Me),ze=a(Qe),et=a(ze);oe(3,Qt,()=>ye,()=>({duration:200})),oe(3,Tt,()=>ye,()=>({duration:200})),oe(3,Zt,()=>ye,()=>({duration:200})),oe(3,Jt,()=>ye,()=>({duration:200})),oe(3,mt,()=>ye,()=>({duration:200})),oe(3,Lt,()=>ye,()=>({duration:200})),oe(3,wt,()=>ye,()=>({duration:200})),It(R,()=>e(E),Ie=>x(E,Ie)),oe(3,w,()=>ye,()=>({duration:200})),oe(3,h,()=>ye,()=>({duration:200})),oe(3,Nt,()=>ye,()=>({duration:200})),W("click",et,j),oe(3,ze,()=>ye,()=>({duration:200})),r(Ge,it)});var kt=s(Ze,2);{var ot=Ge=>{var st=nl(),it=a(st),mt=a(it),Tt=a(mt);W("click",Tt,ve),oe(3,mt,()=>ye,()=>({duration:200})),oe(3,it,()=>ye,()=>({duration:200})),oe(3,st,()=>ye,()=>({duration:200})),r(Ge,st)};C(kt,Ge=>{e(o)==="Free"&&Ge(ot)})}oe(3,He,()=>ye,()=>({duration:200})),oe(3,Je,()=>ye,()=>({duration:200})),Ot(We,()=>e(Te).name,Ge=>e(Te).name=Ge),W("keypress",We,Be),oe(3,je,()=>ye,()=>({duration:200})),oe(3,we,()=>ye,()=>({duration:200})),oe(3,Ve,()=>ye,()=>({duration:200})),r(Ne,Ke)});var $e=s(ce,2),Oe=a($e);rt(Oe,"href",`${window.location.origin+window.location.pathname}?mode=search`),r(V,be)};C(m,V=>{e(U)==="DeckEdit"?V($):V(ee,!1)},!0)}r(k,v)};C(me,k=>{e(c)?k(te):k(ae,!1)})}var X=s(me,2),T=a(X);gt(T,()=>na,k=>{var v=lt("読み込み中");r(k,v)},(k,v)=>{var m=vl(),$=H(m),ee=a($),V=s($,2),be=a(V);u((ce,le,ie)=>{b(ee,`公式DB上のカード${ce??""}枚`),b(be,`実装済カード（効果あり）${le??""}枚 （効果なし）${ie??""}枚`)},[()=>e(v).knmCount.toLocaleString(),()=>e(v).definitionCount.toLocaleString(),()=>e(v).nonDefinitionCount.toLocaleString()],re),r(k,m)});var P=s(X,2),Q=a(P),S=a(Q),q=s(Q,2),L=a(q),K=s(q,2),I=a(K),se=s(P,2);{var he=k=>{var v=ml(),m=a(v);{var $=$e=>{var Oe=xe(),Ne=H(Oe);{var Te=Ve=>{var Je=cl();r(Ve,Je)},Ke=Ve=>{var Je=xe(),He=H(Je);{var we=je=>{var We=_l();r(je,We)};C(He,je=>{e(c).winner.seat==="Above"&&je(we)},!0)}r(Ve,Je)};C(Ne,Ve=>{e(c).winner.seat==="Below"?Ve(Te):Ve(Ke,!1)})}r($e,Oe)},ee=$e=>{var Oe=ul();r($e,Oe)};C(m,$e=>{e(c).winner?$e($):$e(ee,!1)})}var V=s(m,2),be=a(V),ce=s(V,2);{var le=$e=>{var Oe=fl(),Ne=a(Oe);u(()=>rt(Ne,"href",`https://x.com/share?url=${Y}&text=${e(c).twitterShareText??""}&hashtags=${n}&via=${z}`)),r($e,Oe)};C(ce,$e=>{e(c).twitterShareText&&$e(le)})}var ie=s(ce,2),qe=a(ie);u(()=>b(be,e(c).reasonOfEnd)),W("click",qe,Se),oe(3,v,()=>Br,()=>({delay:200,duration:200})),r(k,v)};C(se,k=>{e(c)&&e(c).isEnded&&k(he)})}u(()=>{b(S,"build at: 20260228_204417"),b(L,$r.text),b(I,`w:${e(f)??""}px h:${e(p)??""}px`)}),ua("innerWidth",k=>x(f,k)),ua("innerHeight",k=>x(p,k)),W("click",G,Se),r(_,F),ft()}jr(gl,{target:document.getElementById("app")});
