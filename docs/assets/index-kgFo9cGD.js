var tr=Object.defineProperty;var Aa=_=>{throw TypeError(_)};var ar=(_,i,t)=>i in _?tr(_,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):_[i]=t;var nt=(_,i,t)=>ar(_,typeof i!="symbol"?i+"":i,t),Ba=(_,i,t)=>i.has(_)||Aa("Cannot "+t);var bt=(_,i,t)=>(Ba(_,i,"read from private field"),t?t.call(_):i.get(_)),ia=(_,i,t)=>i.has(_)?Aa("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(_):i.set(_,t),ka=(_,i,t,d)=>(Ba(_,i,"write to private field"),d?d.call(_,t):i.set(_,t),t);import{s as La,r as rr,a as x,b as sr,l as ir,g as e,d as Va,p as _t,c as Ae,m as ne,i as ut,t as l,e as a,f as C,h as f,j as se,k as Ye,n as rt,o as V,q as r,u as ft,v as ye,D as nr,w as ke,x as U,y as s,z as ce,A as Vt,B as oe,C as ue,E as b,F as lr,G as lt,H as Xt,I as or,J as Xa,K as ta,L as ca,M as $a,N as na,O as wa,P as Rt,Q as gt,R as Sa,S as ga,T as Ma,U as la,V as _a,W as Ga,X as ya,Y as ha,Z as dr,_ as vr,$ as cr,a0 as _r,a1 as ur,a2 as fr,a3 as mr,a4 as ua,a5 as Qa,a6 as aa,a7 as Ja,a8 as fa,a9 as Pt,aa as pr,ab as gr,ac as ra,ad as yr,ae as Mt,af as hr,ag as br,ah as kr,ai as Ya,aj as qa,ak as Ua,al as Pa,am as Ha,an as Na,ao as wr,ap as Bt,aq as Ft,ar as Ot,as as Cr,at as It,au as xr,av as Dr,aw as Fa,ax as ea,ay as zt,az as $r,aA as Sr,aB as Mr,aC as Oa,aD as Tr,aE as Er,aF as jr}from"../chunk/entity_proc_20260211_154211.js";import"../chunk/json_20260211_154211.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))d(m);new MutationObserver(m=>{for(const p of m)if(p.type==="childList")for(const c of p.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function t(m){const p={};return m.integrity&&(p.integrity=m.integrity),m.referrerPolicy&&(p.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?p.credentials="include":m.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function d(m){if(m.ep)return;m.ep=!0;const p=t(m);fetch(m.href,p)}})();const Ar=_=>_;function Ta(_){const i=_-1;return i*i*i+1}function Ia(_){const i=typeof _=="string"&&_.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[_,"px"]}function Br(_,{delay:i=0,duration:t=400,easing:d=Ar}={}){const m=+getComputedStyle(_).opacity;return{delay:i,duration:t,easing:d,css:p=>`opacity: ${p*m}`}}function Lr(_,{delay:i=0,duration:t=400,easing:d=Ta,x:m=0,y:p=0,opacity:c=0}={}){const o=getComputedStyle(_),q=+o.opacity,E=o.transform==="none"?"":o.transform,M=q*(1-c),[T,L]=Ia(m),[n,X]=Ia(p);return{delay:i,duration:t,easing:d,css:(P,y)=>`
			transform: ${E} translate(${(1-P)*T}${L}, ${(1-P)*n}${X});
			opacity: ${q-M*y}`}}function he(_,{delay:i=0,duration:t=400,easing:d=Ta,axis:m="y"}={}){const p=getComputedStyle(_),c=+p.opacity,o=m==="y"?"height":"width",q=parseFloat(p[o]),E=m==="y"?["top","bottom"]:["left","right"],M=E.map(g=>`${g[0].toUpperCase()}${g.slice(1)}`),T=parseFloat(p[`padding${M[0]}`]),L=parseFloat(p[`padding${M[1]}`]),n=parseFloat(p[`margin${M[0]}`]),X=parseFloat(p[`margin${M[1]}`]),P=parseFloat(p[`border${M[0]}Width`]),y=parseFloat(p[`border${M[1]}Width`]);return{delay:i,duration:t,easing:d,css:g=>`overflow: hidden;opacity: ${Math.min(g*20,1)*c};${o}: ${g*q}px;padding-${E[0]}: ${g*T}px;padding-${E[1]}: ${g*L}px;margin-${E[0]}: ${g*n}px;margin-${E[1]}: ${g*X}px;border-${E[0]}-width: ${g*P}px;border-${E[1]}-width: ${g*y}px;min-${o}: 0`}}function Ra(_,i){for(const t in i)_[t]=i[t];return _}function Yr({fallback:_,...i}){const t=new Map,d=new Map;function m(c,o,q){const{delay:E=0,duration:M=j=>Math.sqrt(j)*30,easing:T=Ta}=Ra(Ra({},i),q),L=c.getBoundingClientRect(),n=o.getBoundingClientRect(),X=L.left-n.left,P=L.top-n.top,y=L.width/n.width,g=L.height/n.height,F=Math.sqrt(X*X+P*P),Z=getComputedStyle(o),ge=Z.transform==="none"?"":Z.transform,A=+Z.opacity;return{delay:E,duration:typeof M=="function"?M(F):M,easing:T,css:(j,ve)=>`
			   opacity: ${j*A};
			   transform-origin: top left;
			   transform: ${ge} translate(${ve*X}px,${ve*P}px) scale(${j+(1-j)*y}, ${j+(1-j)*g});
		   `}}function p(c,o,q){return(E,M)=>(c.set(M.key,E),()=>{if(o.has(M.key)){const T=o.get(M.key);return o.delete(M.key),m(T,E,M)}return c.delete(M.key),_&&_(E,M,q)})}return[p(d,t,!1),p(t,d,!0)]}function Ka(_){return Object.prototype.toString.call(_)==="[object Date]"}function qr(_){return _}function Ca(_){const i=_-1;return i*i*i+1}function xa(_,i){if(_===i||_!==_)return()=>_;const t=typeof _;if(t!==typeof i||Array.isArray(_)!==Array.isArray(i))throw new Error("Cannot interpolate values of different type");if(Array.isArray(_)){const d=i.map((m,p)=>xa(_[p],m));return m=>d.map(p=>p(m))}if(t==="object"){if(!_||!i)throw new Error("Object cannot be null");if(Ka(_)&&Ka(i)){const p=_.getTime(),o=i.getTime()-p;return q=>new Date(p+q*o)}const d=Object.keys(i),m={};return d.forEach(p=>{m[p]=xa(_[p],i[p])}),p=>{const c={};return d.forEach(o=>{c[o]=m[o](p)}),c}}if(t==="number"){const d=i-_;return m=>_+m*d}return()=>i}var Ht,sa,oa,Gt;const Ea=class Ea{constructor(i,t={}){ia(this,Ht,La(void 0));ia(this,sa,La(void 0));ia(this,oa);ia(this,Gt,null);bt(this,Ht).v=bt(this,sa).v=i,ka(this,oa,t)}static of(i,t){const d=new Ea(i(),t);return rr(()=>{d.set(i())}),d}set(i,t){var T;x(bt(this,sa),i);let{delay:d=0,duration:m=400,easing:p=qr,interpolate:c=xa}={...bt(this,oa),...t};if(m===0)return(T=bt(this,Gt))==null||T.abort(),x(bt(this,Ht),i),Promise.resolve();const o=sr.now()+d;let q,E=!1,M=bt(this,Gt);return ka(this,Gt,ir(L=>{if(L<o)return!0;if(!E){E=!0;const X=bt(this,Ht).v;q=c(X,i),typeof m=="function"&&(m=m(X,i)),M==null||M.abort()}const n=L-o;return n>m?(x(bt(this,Ht),i),!1):(x(bt(this,Ht),q(p(n/m))),!0)})),bt(this,Gt).promise}get current(){return e(bt(this,Ht))}get target(){return e(bt(this,sa))}set target(i){this.set(i)}};Ht=new WeakMap,sa=new WeakMap,oa=new WeakMap,Gt=new WeakMap;let ma=Ea;var Ur=l('<div class="phase_display svelte-1boxe40"><span class="svelte-1boxe40"> </span> </div>'),Pr=l('<div class="lifepoint_display svelte-1boxe40"><div class="svelte-1boxe40"> </div> <div class="svelte-1boxe40"> </div></div>'),Hr=(_,i,t)=>i(e(t)),Nr=l('<div class="svelte-1boxe40"><button class="phase_button svelte-1boxe40"> </button></div>'),Fr=l("<div><!></div>"),Or=l('<div class="svelte-1boxe40"><!></div>'),Ir=l("<div><!></div>"),Rr=l('<div class="config_button_wrapper svelte-1boxe40"><button id="config_button" class="svelte-1boxe40">⚙</button></div>'),Kr=l("<!> <!> <!> <!>",1),Wr=l('<div style="position: absolute;" class="card_animation_receiver svelte-1boxe40"><!></div>'),zr=l('<div style="position: absolute; top:0rem" class="svelte-1boxe40">｛効果対象｝</div>'),Vr=l('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Xr=l(" <!> 】",1),Gr=l('<div style="position: absolute; bottom:0rem" class="svelte-1boxe40"> <!></div>'),Qr=l("<!> <!>",1),Jr=l('<div class="badge svelte-1boxe40"> </div>'),Zr=l('<div class="card_animation_receiver svelte-1boxe40"><!></div>'),es=l("<!> <!> <!> <!>",1),ts=l('<td><div role="listitem"><!></div></td>');function as(_,i){_t(i,!1);let t=Ae(i,"view",12),d=Ae(i,"row",8),m=Ae(i,"column",8),p=Ae(i,"selectedEntities",28,()=>[]),c=Ae(i,"selectedCells",28,()=>[]),o=ne(t().getCell(d(),m())),q=ne(new ma(e(o).field.duel.duelists.Above.lp,{duration:400,easing:Ca})),E=ne(new ma(e(o).field.duel.duelists.Below.lp,{duration:400,easing:Ca}));const M=()=>{x(o,t().getCell(d(),m())),ye(q,e(q).target=e(o).field.duel.duelists.Above.lp),ye(E,e(E).target=e(o).field.duel.duelists.Below.lp)};e(o).onUpdate.append(M),t().onDuelUpdate.append(M),t().modalController.onUpdate.append(M);let T,L=ne([]),n=()=>console.log("hoge"),X,P=ne([]),y=ne(!1),g=ne(!1),F=!1;const Z=D=>{var N,I;x(ee,[]),p().reset(),T=D.activator,n=D.resolve,x(L,D.dummyActionInfos),x(P,D.chainBlockInfos.flatMap(R=>R.selectedEntities).getDistinct()),X=D.entitiesChoices,x(y,!1),x(g,((N=D.cellsChoices)==null?void 0:N.selectables.includes(e(o)))??!1),F=e(g)&&((I=D.cellsChoices)==null?void 0:I.qty)===1,M()};t().onWaitStart.append(Z);const ge=()=>{T=void 0,x(L,[]),n=()=>{console.log("hoge")},X=void 0,x(P,[]),x(y,!1),x(g,!1),F=!1};t().onWaitEnd.append(ge);let A=ne(!1),j=[];const ve=D=>{j=D.filter(N=>N.dests.includes(e(o))),x(A,j.length>0),M()},Be=()=>{j=[],x(A,!1),M()};t().onDragStart.append(ve),t().onDragEnd.append(Be);const[Se,de]=mi;let ee=ne([]);const Le=D=>{if(T=void 0,e(o)===D.to||e(o).entities.includes(D.entity)){x(ee,[...e(ee),D]);const N=D.resolve;x(o,e(o)),setTimeout(()=>{x(ee,e(ee).filter(I=>I!==D)),D.count++,D.count>1&&N()},600)}};t().onAnimation.append(Le);const xe=D=>{n({phaseChange:D})},H=()=>e(o).isStackCell&&e(o).entities.flatMap(D=>D.actions).filter(D=>e(L).map(N=>N.action.seq).some(N=>N===D.seq)).length>0,Y=D=>{var N;if(((N=D.target)==null?void 0:N.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),F)n({selectedCells:[e(o)]});else if(e(g))x(y,!e(y)),c(e(y)?[...c(),e(o)]:c().filter(I=>I!==e(o)));else if(e(o).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(o),!0),t().requireUpdate();const I=e(o).entities.flatMap(G=>G.actions).map(G=>G.seq),R=e(L).filter(G=>I.includes(G.action.seq));if(R.length){if(!T)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:T,dummyActionInfos:R,cancelable:!0}).then(G=>{G&&n({actionInfo:G})});return}}t().requireUpdate(),console.info(e(o),re(...e(o).visibleEntities))},Q=D=>{D.preventDefault(),D.dataTransfer&&(D.dataTransfer.dropEffect="move")},me=D=>{D.preventDefault(),console.info("drop",D,e(A),j),D.dataTransfer&&(D.dataTransfer.dropEffect="move");try{if(e(A)&&j){if(j.length===1){const N=j[0];n({actionInfo:{...N,dest:e(o)}})}else if(j.length>1){if(!T)throw new nr("想定されない状態");e(o).field.duel.view.modalController.terminateAll(),e(o).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:T,dummyActionInfos:j.map(N=>({...N,dest:e(o)})),cancelable:!1}).then(N=>{n({actionInfo:N})})}}}finally{t().removeDraggingActions()}},re=(...D)=>{if(t().waitMode==="Animation")return"Disabled";if(X&&X.selectables.find(I=>D.find(R=>I===R)))return"Selectable";if(!e(L)||e(L).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(I=>I.state==="Shown"))return"Disabled";const N=e(L).filter(I=>D.includes(I.action.entity));return N.length===0?"Disabled":e(o).isStackCell||N[0].action.entity!==D[0]?"Clickable":N.some(I=>I.dests.length)?"Draggable":"Clickable"};ut();var te=ts(),K=a(te);K.__click=Y;var S=a(K);{var B=D=>{var N=ke(),I=U(N);{var R=G=>{var _e=ke(),De=U(_e);{var k=u=>{var $=Ur(),J=a($),z=a(J),pe=s(J,1,!0);f((le,ie)=>{b(z,le),b(pe,ie)},[()=>String(e(o).field.duel.clock.turn).padStart(2,"0"),()=>e(o).field.duel.phase.toUpperCase()],se),r(u,$)},v=u=>{var $=ke(),J=U($);{var z=le=>{var ie=Pr(),ae=a(ie),qe=a(ae),$e=s(ae,2),Oe=a($e);f((Ne,Te)=>{b(qe,Ne),b(Oe,Te)},[()=>Math.floor(e(q).current),()=>Math.floor(e(E).current)],se),r(le,ie)},pe=le=>{var ie=ke(),ae=U(ie);{var qe=$e=>{var Oe=ke(),Ne=U(Oe);{var Te=Ke=>{var Ve=ke(),Je=U(Ve);{var He=we=>{var je=ke(),We=U(je);ce(We,1,()=>t().duel.nextPhaseList,ue,(Ze,kt)=>{var ot=Nr(),Ge=a(ot);Ge.__click=[Hr,xe,kt];var st=a(Ge);f(it=>b(st,it),[()=>e(kt).toUpperCase()],se),r(Ze,ot)}),r(we,je)};C(Je,we=>{t().duel.isEnded||we(He)})}r(Ke,Ve)};C(Ne,Ke=>{t().waitMode==="Free"&&Ke(Te)})}r($e,Oe)};C(ae,$e=>{e(o).column===5&&$e(qe)},!0)}r(le,ie)};C(J,le=>{e(o).column===3?le(z):le(pe,!1)},!0)}r(u,$)};C(De,u=>{e(o).column===1?u(k):u(v,!1)})}r(G,_e)};C(I,G=>{e(o).row===3&&G(R)})}r(D,N)},W=D=>{var N=ke(),I=U(N);{var R=_e=>{var De=Kr();const k=se(()=>e(ee).find(ie=>ie.to===e(o)));var v=U(De);{var u=ie=>{var ae=Fr(),qe=a(ae);Vt(qe,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),f(()=>Ye(ae,`card_animation_receiver ${e(o).cellType??""} svelte-1boxe40`)),oe(1,ae,()=>de,()=>({key:e(k).entity.seq})),r(ie,ae)};C(v,ie=>{e(k)&&e(k).index==="Top"&&ie(u)})}var $=s(v,2);ce($,1,()=>e(o).visibleEntities,ue,(ie,ae)=>{var qe=ke(),$e=U(qe);{var Oe=Ne=>{var Te=Or(),Ke=a(Te);const Ve=se(()=>re(e(ae))),Je=se(()=>e(L).filter(He=>He.action.entity===e(ae)));Vt(Ke,{get entity(){return e(ae)},get state(){return e(Ve)},get dummyActionInfos(){return e(Je)},cardActionResolve:void 0,get selectedList(){return p()},set selectedList(He){p(He)},$$legacy:!0}),oe(2,Te,()=>Se,()=>({key:e(ae).seq})),r(Ne,Te)};C($e,Ne=>{e(ee).every(Te=>Te.entity.seq!==e(ae).seq)&&Ne(Oe)})}r(ie,qe)});var J=s($,2);{var z=ie=>{var ae=Ir(),qe=a(ae);Vt(qe,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),f(()=>Ye(ae,`card_animation_receiver ${e(o).cellType??""} svelte-1boxe40`)),oe(1,ae,()=>de,()=>({key:e(k).entity.seq})),r(ie,ae)};C(J,ie=>{e(k)&&e(k).index!=="Top"&&ie(z)})}var pe=s(J,2);{var le=ie=>{var ae=Rr();r(ie,ae)};C(pe,ie=>{e(o).owner.seat==="Below"&&ie(le)})}r(_e,De)},G=_e=>{var De=es();const k=se(()=>e(ee).find(ae=>ae.to===e(o)));var v=U(De);{var u=ae=>{var qe=Wr(),$e=a(qe);Vt($e,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),oe(1,qe,()=>de,()=>({key:e(k).entity.seq})),r(ae,qe)};C(v,ae=>{e(k)&&e(k).index!=="Top"&&ae(u)})}var $=s(v,2);{var J=ae=>{var qe=Qr(),$e=U(qe);ce($e,1,()=>e(o).visibleEntities.map((Te,Ke)=>({index:Ke,entity:Te})).toReversed(),ue,(Te,Ke)=>{var Ve=ke(),Je=U(Ve);{var He=we=>{var je=Vr();const We=se(()=>!e(o).isStackCell&&e(Ke).index===0?re(...e(o).visibleEntities):void 0);var Ze=U(je);{var kt=it=>{var mt=zr();r(it,mt)};C(Ze,it=>{e(P).includes(e(Ke).entity)&&it(kt)})}var ot=s(Ze,2),Ge=a(ot);const st=se(()=>e(Ke).index===0?e(L).filter(it=>e(o).visibleEntities.includes(it.action.entity)):void 0);Vt(Ge,{get entity(){return e(Ke).entity},get state(){return e(We)},get dummyActionInfos(){return e(st)},cardActionResolve:void 0,get selectedList(){return p()},set selectedList(it){p(it)},$$legacy:!0}),f(()=>Ye(ot,`duel_card_wrapper ${(e(Ke).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1boxe40`)),oe(2,ot,()=>Se,()=>({key:e(Ke).entity.seq})),r(we,je)};C(Je,we=>{e(ee).every(je=>je.entity.seq!==e(Ke).entity.seq)&&we(He)})}r(Te,Ve)});var Oe=s($e,2);{var Ne=Te=>{var Ke=Gr(),Ve=a(Ke),Je=s(Ve);ce(Je,1,()=>Xt(e(o).visibleEntities[0].status.maxCounterQty),ue,(He,we)=>{var je=Xr(),We=U(je),Ze=s(We);{var kt=ot=>{var Ge=lt();f(()=>b(Ge,`/${e(o).visibleEntities[0].status.maxCounterQty[e(we)]??""}`)),r(ot,Ge)};C(Ze,ot=>{(e(o).visibleEntities[0].status.maxCounterQty[e(we)]??9999)<100&&ot(kt)})}f((ot,Ge)=>b(We,`【
              ${ot??""}${Ge??""} `),[()=>lr(e(we)),()=>e(o).visibleEntities[0].counterHolder.getQty(e(we))],se),r(He,je)}),f(()=>b(Ve,`【${e(o).visibleEntities[0].battlePositionName??""}】 `)),r(Te,Ke)};C(Oe,Te=>{e(o).visibleEntities[0].battlePosition&&Te(Ne)})}r(ae,qe)};C($,ae=>{e(o).visibleEntities.length>0&&ae(J)})}var z=s($,2);{var pe=ae=>{var qe=Jr(),$e=a(qe);f(()=>b($e,e(o).visibleEntities.length)),r(ae,qe)};C(z,ae=>{e(o).isStackCell&&ae(pe)})}var le=s(z,2);{var ie=ae=>{var qe=Zr(),$e=a(qe);Vt($e,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),oe(1,qe,()=>de,()=>({key:e(k).entity.seq})),r(ae,qe)};C(le,ae=>{e(k)&&e(k).index==="Top"&&ae(ie)})}r(_e,De)};C(I,_e=>{e(o).cellType==="Hand"?_e(R):_e(G,!1)},!0)}r(D,N)};C(S,D=>{e(o).isDisabledCell?D(B):D(W,!1)})}f(D=>{Ye(te,`${`duel_field_cell duel_field_cell_${e(o).cellType} ${e(o).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1boxe40`),rt(te,"colspan",e(o).cellType==="Hand"?7:1),Ye(K,`${D??""} svelte-1boxe40`)},[()=>`duel_field_cell_inner_box ${e(o).cellType} ${e(A)?"can_accept_drop":""} ${H()?"can_action":""} ${e(y)?"is_selected":e(g)?"is_selectable":""} `],se),V("dragover",K,Q),V("drop",K,me),r(_,te),ft()}Va(["click"]);const rs=(_,i,t=void 0,d="!!!circular reference!!!")=>{let m=[];return JSON.stringify(_,(p,c)=>{if(typeof c=="object"){if(m.indexOf(c)>-1)return d;m.push(c)}let o=c;if(i&&(o=i(p,c)),typeof o=="function")return o.toString();if(o!==c&&typeof o=="object"){if(m.indexOf(o)>-1)return d;m.push(o)}return o},t)};var ss=l('<div class="title svelte-14z6bdh"> </div>'),is=l('<div class="title svelte-14z6bdh"> </div>'),ns=l('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),ls=l('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),os=l("<div><!> <!></div>"),ds=l('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),vs=l("<div><!> <!></div>"),cs=l("<div><!> <!></div>"),_s=l('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function us(_,i){_t(i,!1);let t=ne(void 0),d=Ae(i,"log",8),m,p=ne([]);const c=()=>{const M=((m==null?void 0:m.seq)??-1)+1;d().records.slice(M).forEach(T=>{if(!m){x(p,[[[[T]]]]),m=T;return}if(!e(p)[T.clock.turn]){ye(p,e(p)[T.clock.turn]=[[[T]]]),m=T;return}if(!e(p)[T.clock.turn][T.clock.phaseSeq]){ye(p,e(p)[T.clock.turn][T.clock.phaseSeq]=[[T]]),m=T;return}if(m.clock.chainSeq===T.clock.chainSeq&&m.clock.chainBlockSeq===T.clock.chainBlockSeq&&m.duelist===T.duelist){e(p)[T.clock.turn][T.clock.phaseSeq].slice(-1)[0].push(T),m=T;return}e(p)[T.clock.turn][T.clock.phaseSeq].push([T]),m=T}),x(p,e(p)),or().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};d().onUpdate.append(c),d().duel.view.onDuelUpdate.append(c),c(),ut();var o=ke(),q=U(o);{var E=M=>{var T=_s(),L=s(a(T),2);ce(L,5,()=>e(p),ue,(n,X)=>{var P=cs(),y=a(P);{var g=Z=>{var ge=ss(),A=a(ge);f(()=>b(A,`ターン：${e(X)[0][0][0].clock.turn??""}`)),r(Z,ge)};C(y,Z=>{e(X)[0][0][0].clock.turn>0&&Z(g)})}var F=s(y,2);ce(F,1,()=>e(X),ue,(Z,ge)=>{var A=vs(),j=a(A);{var ve=Se=>{var de=is(),ee=a(de);f(()=>b(ee,e(ge)[0][0].clock.period.name)),r(Se,de)};C(j,Se=>{e(ge)[0][0].clock.turn>0&&Se(ve)})}var Be=s(j,2);ce(Be,1,()=>e(ge),ue,(Se,de)=>{var ee=ds();const Le=se(()=>{var te;return((te=e(de).find(K=>K.chainNumber!==void 0))==null?void 0:te.chainNumber)??0});var xe=a(ee),H=a(xe),Y=a(H),Q=s(H,2);{var me=te=>{var K=ns(),S=a(K);f(()=>b(S,`チェーン：${e(Le)??""}`)),r(te,K)};C(Q,te=>{e(Le)&&te(me)})}var re=s(xe,2);ce(re,1,()=>e(de),ue,(te,K)=>{var S=os(),B=a(S);{var W=R=>{var G=lt();f(()=>b(G,e(K).text)),r(R,G)},D=R=>{var G=ke(),_e=U(G);{var De=v=>{var u=lt();f(($,J,z)=>b(u,`移動：${$??""} ${J??""} ⇒ ${z??""}`),[()=>{var $;return($=e(K).mainEntity)==null?void 0:$.toString()},()=>{var $;return($=e(K).from)==null?void 0:$.toString()},()=>{var $;return($=e(K).to)==null?void 0:$.toString()}],se),r(v,u)},k=v=>{var u=ke(),$=U(u);{var J=pe=>{var le=lt();f((ie,ae)=>b(le,`生成：${ie??""} void ⇒ ${ae??""}`),[()=>{var ie;return(ie=e(K).mainEntity)==null?void 0:ie.toString()},()=>{var ie;return(ie=e(K).to)==null?void 0:ie.toString()}],se),r(pe,le)},z=pe=>{var le=ke(),ie=U(le);{var ae=$e=>{var Oe=lt();f((Ne,Te)=>b(Oe,`消滅：${Ne??""} ${Te??""} ⇒ void`),[()=>{var Ne;return(Ne=e(K).mainEntity)==null?void 0:Ne.toString()},()=>{var Ne;return(Ne=e(K).from)==null?void 0:Ne.toString()}],se),r($e,Oe)},qe=$e=>{var Oe=lt();f(()=>b(Oe,e(K).text)),r($e,Oe)};C(ie,$e=>{e(K).type==="EntityDisappear"?$e(ae):$e(qe,!1)},!0)}r(pe,le)};C($,pe=>{e(K).type==="EntityAppear"?pe(J):pe(z,!1)},!0)}r(v,u)};C(_e,v=>{e(K).type==="EntityMove"?v(De):v(k,!1)},!0)}r(R,G)};C(B,R=>{e(K).type==="ChainBlockHeader"?R(W):R(D,!1)})}var N=s(B,2);{var I=R=>{var G=ls(),_e=a(G);f(De=>rt(_e,"href",De),[()=>window.URL.createObjectURL(new Blob([rs(e(K).error,(De,k)=>["pool","bundles","duel"].includes(De)||typeof k=="function"?void 0:k,4)],{type:"text/plain"}))],se),r(R,G)};C(N,R=>{e(K).error&&R(I)})}f(R=>Ye(S,`duel_log_record duel_log_record_${R??""} svelte-14z6bdh`),[()=>e(K).type.toSnakeCase()],se),r(te,S)}),f(()=>{var te,K,S;Ye(ee,`duel_log_block_duelist duel_log_block_duelist_${((te=e(de)[0].duelist)==null?void 0:te.seat)??"system"} svelte-14z6bdh`),Ye(H,`duelist ${((K=e(de)[0].duelist)==null?void 0:K.seat)??""} svelte-14z6bdh`),b(Y,((S=e(de)[0].duelist)==null?void 0:S.profile.name)||"SYSTEM")}),r(Se,ee)}),f(()=>Ye(A,`duel_log_block_phase duel_log_block_phase_${e(ge)[0][0].clock.period.key??""} svelte-14z6bdh`)),r(Z,A)}),f(()=>Ye(P,`duel_log_block_turn duel_log_block_turn_${e(X)[0][0][0].clock.turn??""} svelte-14z6bdh`)),r(n,P)}),Xa(L,n=>x(t,n),()=>e(t)),r(M,T)};C(q,M=>{(d().duel.view.infoBoardState==="Log"||d().duel.view.infoBoardState==="Default")&&M(E)})}r(_,o),ft()}var fs=l("<div><div> </div> <div> </div></div>");function Wa(_,i){_t(i,!1);let t=Ae(i,"duelist",12),d=ne(0),m=ne();const p=async()=>{const L=t().lp-e(d);if(!e(m)||Math.abs(L)<10){x(d,t().lp),e(m)&&(e(m)(),x(m,void 0));return}x(d,e(d)+Math.floor(Math.random()*L)),await ta(100),p()},c=()=>{t(t()),!e(m)&&t().lp!==e(d)&&new Promise(L=>{x(m,L),Math.abs(t().lp-e(d)),p()})};t().duel.log.onUpdate.append(c),p(),ut();var o=fs(),q=a(o),E=a(q),M=s(q,2),T=a(M);f(L=>{Ye(o,`duelist duelist_${L??""} svelte-1sy3trd`),Ye(q,`duelist_name duelist_${L??""}_name svelte-1sy3trd`),b(E,t().profile.name),Ye(M,`duelist_lp ${(e(m)?"vibration":"")??""} svelte-1sy3trd`),b(T,e(d))},[()=>t().seat.toLowerCase()],se),r(_,o),ft()}const ms=(_,i,t)=>(i(i()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),ps=(_,i,t)=>(i(i()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var gs=l('<div class="svelte-1uevs9j"> </div>'),ys=l('<div class="svelte-1uevs9j"> </div>'),hs=l('<div class="link_arrow_emoji svelte-1uevs9j"> </div>'),bs=l('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),ks=l('<div></div> <div class="svelte-1uevs9j"> </div>',1),ws=l("<div> </div>"),Cs=l('<span class="svelte-1uevs9j">/</span> <div class="monster_defense svelte-1uevs9j"> </div>',1),xs=l("<div> </div>"),Ds=l('<div class="duel_card_info_row svelte-1uevs9j"><!> <!> <div style="flex-grow: 1;" class="svelte-1uevs9j"></div> <div class="monster_attack svelte-1uevs9j"> </div> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),$s=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),Ss=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),Ms=l("<!> <!>",1),Ts=l('<pre class="description svelte-1uevs9j"> </pre>'),Es=l('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),js=l('<pre class="description svelte-1uevs9j"> </pre>'),As=l('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),Bs=l('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),Ls=l('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),Ys=l("[ <!> ],",1),qs=l('<div class="svelte-1uevs9j"> <!></div>'),Us=l('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),Ps=l('<div class="svelte-1uevs9j"> </div>'),Hs=l('<div class="svelte-1uevs9j"> </div>'),Ns=l('<div class="svelte-1uevs9j"> </div>'),Fs=l('<div class="svelte-1uevs9j"> </div>'),Os=l('<div class="svelte-1uevs9j"> </div>'),Is=l('<div class="svelte-1uevs9j"> </div>'),Rs=l('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Ks=l('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Ws=l('<div class="svelte-1uevs9j">※テスト用カードです</div>'),zs=l('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),Vs=l('<a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a>'),Xs=l('<div class="duel_card_info_links svelte-1uevs9j"><!> <!> <a target="_blank" rel="noopener noreferrer" title="google" class="svelte-1uevs9j">⇒google検索</a></div>'),Gs=l("<!> <!>",1),Qs=l('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><!> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Js(_,i){_t(i,!1);let t=Ae(i,"entity",8),d=Ae(i,"mode",12,"Normal"),m=ne(new Promise(()=>{}));const p=()=>{var M,T;let E=t()&&t().entityType==="Card"?t().origin.cardId:(T=(M=t())==null?void 0:M.parent)==null?void 0:T.origin.cardId;return E??!1?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${E}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:""};ca(()=>(Rt(t()),wa),()=>{x(m,na.then(async E=>{if(t().origin.description||t().origin.pendulumDescription||t().origin.wikiEncodedName)return t().origin;const M=E.getCardInfo(t().origin.name);if(M)return M.cardId!==void 0&&!M.description&&!M.pendulumDescription&&await wa([M.cardId]),M}))}),$a(),ut();var c=ke(),o=U(c);{var q=E=>{var M=Qs();M.__click=[ms,d,t],M.__contextmenu=[ps,d,t];var T=a(M),L=a(T),n=a(L),X=a(n),P=s(L,2),y=a(P);{var g=H=>{var Y=gs(),Q=a(Y);f(me=>b(Q,me),[()=>"★".repeat(t().lvl)],se),r(H,Y)},F=H=>{var Y=ke(),Q=U(Y);{var me=te=>{var K=ys(),S=a(K);f(B=>b(S,B),[()=>"☆".repeat(t().rank)],se),r(te,K)},re=te=>{var K=ke(),S=U(K);{var B=W=>{var D=hs(),N=a(D);f(I=>b(N,I),[()=>t().origin.linkArrowKeys.map(I=>Ga[I].emoji).join("")],se),r(W,D)};C(S,W=>{t().origin.linkArrowKeys&&W(B)},!0)}r(te,K)};C(Q,te=>{t().rank&&t().rank>0?te(me):te(re,!1)},!0)}r(H,Y)};C(y,H=>{t().lvl&&t().lvl>0?H(g):H(F,!1)})}var Z=s(y,2),ge=a(Z),A=s(P,2);{var j=H=>{var Y=Ms(),Q=U(Y);{var me=S=>{var B=bs(),W=a(B),D=a(W),N=s(W,2),I=a(N);f(()=>{b(D,`◀ ${t().psL??""}`),b(I,`${t().psR??""} ▶`)}),r(S,B)};C(Q,S=>{var B;(B=t().origin.monsterCategories)!=null&&B.includes("Pendulum")&&S(me)})}var re=s(Q,2);{var te=S=>{var B=Ds(),W=U(B),D=a(W);ce(D,1,()=>t().attr,ue,(k,v)=>{var u=ks(),$=U(u),J=s($,2),z=a(J);f(()=>{Ye($,`monster_attr ${e(v)??""} svelte-1uevs9j`),b(z,`${Sa[e(v)]??""}属性`)}),r(k,u)});var N=s(D,2);ce(N,1,()=>t().types,ue,(k,v)=>{var u=ws(),$=a(u);f(()=>{Ye(u,`monster_cat ${e(v)??""} svelte-1uevs9j`),b($,`${ga[e(v)]??""}${Ma[e(v)]??""}族`)}),r(k,u)});var I=s(N,4),R=a(I),G=s(I,2);{var _e=k=>{var v=Cs(),u=s(U(v),2),$=a(u);f(()=>b($,t().def??"?")),r(k,v)};C(G,k=>{var v;(v=t().status.monsterCategories)!=null&&v.includes("Link")||k(_e)})}var De=s(W,2);ce(De,5,()=>t().status.monsterCategories??[],ue,(k,v)=>{var u=xs(),$=a(u);f(()=>{Ye(u,`monster_cat ${e(v)??""} svelte-1uevs9j`),b($,`${la[e(v)]??""}${_a[e(v)]??""}`)}),r(k,u)}),f(()=>b(R,t().atk??"?")),r(S,B)},K=S=>{var B=ke(),W=U(B);{var D=I=>{var R=$s(),G=s(a(R),2),_e=a(G);f(()=>b(_e,`${ya[t().status.spellCategory]??""}魔法`)),r(I,R)},N=I=>{var R=ke(),G=U(R);{var _e=De=>{var k=Ss(),v=s(a(k),2),u=a(v);f(()=>b(u,`${ha[t().status.trapCategory]??""}罠`)),r(De,k)};C(G,De=>{t().kind==="Trap"&&t().status.trapCategory&&De(_e)},!0)}r(I,R)};C(W,I=>{t().kind==="Spell"&&t().status.spellCategory?I(D):I(N,!1)},!0)}r(S,B)};C(re,S=>{t().kind==="Monster"?S(te):S(K,!1)})}r(H,Y)};C(A,H=>{d()!=="Debug"&&H(j)})}var ve=s(T,2),Be=a(ve);{var Se=H=>{var Y=As(),Q=U(Y);{var me=K=>{var S=Es(),B=a(S);gt(B,()=>e(m),W=>{var D=lt('"読み込み中"');r(W,D)},(W,D)=>{var N=Ts(),I=a(N);f(()=>{var R;return b(I,(R=e(D))==null?void 0:R.pendulumDescription)}),r(W,N)}),r(K,S)};C(Q,K=>{var S;(S=t().status.monsterCategories)!=null&&S.includes("Pendulum")&&K(me)})}var re=s(Q,2),te=a(re);gt(te,()=>e(m),K=>{var S=lt('"読み込み中"');r(K,S)},(K,S)=>{var B=js(),W=a(B);f(()=>{var D;return b(W,(D=e(S))==null?void 0:D.description)}),r(K,B)}),r(H,Y)},de=H=>{var Y=ke(),Q=U(Y);{var me=te=>{var K=ke(),S=U(K);{var B=W=>{var D=Ls(),N=s(a(D),2);ce(N,5,()=>t().actions,ue,(I,R)=>{var G=ke();const _e=se(()=>e(R).actionCountUpperBound),De=se(()=>e(R).actionCount);var k=U(G);{var v=u=>{var $=Bs(),J=a($),z=a(J),pe=s(J,2),le=a(pe),ie=s(pe,4),ae=a(ie);f(()=>{b(z,e(R).title),b(le,e(De)),b(ae,e(_e))}),r(u,$)};C(k,u=>{e(_e)!==void 0&&e(De)!==void 0&&u(v)})}r(I,G)}),r(W,D)};C(S,W=>{t().actions.some(D=>D.actionCountUpperBoundKey)&&W(B)})}r(te,K)},re=te=>{var K=Rs(),S=a(K),B=a(S);ce(B,0,()=>["info","status"],ue,(He,we)=>{var je=Us(),We=U(je),Ze=a(We),kt=s(We,2);ce(kt,1,()=>Object.entries(t()[we]),ue,(Ge,st)=>{let it=()=>e(st)[0],mt=()=>e(st)[1];var Tt=qs(),Qt=a(Tt),Jt=s(Qt);{var Zt=wt=>{var Lt=Ys(),h=s(U(Lt));ce(h,1,mt,ue,(w,O)=>{var fe=lt();f(Ue=>b(fe,`${Ue??""},`),[()=>e(O).toString()],se),r(w,fe)}),r(wt,Lt)},Nt=wt=>{var Lt=lt();f(h=>b(Lt,`${h??""},`),[()=>{var h;return(h=mt())==null?void 0:h.toString()}],se),r(wt,Lt)};C(Jt,wt=>{Array.isArray(mt())?wt(Zt):wt(Nt,!1)})}f(()=>b(Qt,`"${it()??""}" : `)),r(Ge,Tt)});var ot=s(kt,2);ot.textContent="},",f(()=>b(Ze,`"${we??""}" :{`)),r(He,je)});var W=s(B,2);W.textContent='"actions" :[';var D=s(W,2);ce(D,1,()=>t().actions,ue,(He,we)=>{var je=Ps(),We=a(je);f(()=>b(We,`"${e(we).playType??""} ${e(we).title??""}",`)),r(He,je)});var N=s(D,2);N.textContent="],";var I=s(N,2);I.textContent='"substituteEffects" :[';var R=s(I,2);ce(R,1,()=>t().substituteEffects,ue,(He,we)=>{var je=Hs(),We=a(je);f(()=>b(We,`"${e(we).title??""}",`)),r(He,je)});var G=s(R,2);G.textContent="],";var _e=s(G,2);_e.textContent='"continuousEffects" :[';var De=s(_e,2);ce(De,1,()=>t().continuousEffects,ue,(He,we)=>{var je=Ns(),We=a(je);f(()=>b(We,`"${e(we).isStarted??""}",`)),r(He,je)});var k=s(De,2);k.textContent="],";var v=s(k,2);v.textContent='"procFilters" :[';var u=s(v,2);ce(u,1,()=>t().procFilterBundle.operators,ue,(He,we)=>{var je=Fs(),We=a(je);f(Ze=>b(We,`"${Ze??""} ${e(we).title??""} ${e(we).isEffective??""} ",`),[()=>e(we).isSpawnedBy.toString()],se),r(He,je)});var $=s(u,2);$.textContent="],";var J=s($,2);J.textContent='"numericStateOperators" :[';var z=s(J,2);ce(z,1,()=>t().numericOprsBundle.operators,ue,(He,we)=>{var je=Os(),We=a(je);f(Ze=>b(We,`"${Ze??""} ${e(we).title??""} ${e(we).isEffective??""} ${e(we).isContinuous??""} ${e(we).targetState??""} ${e(we).targetStateGen??""} ",`),[()=>e(we).isSpawnedBy.toString()],se),r(He,je)});var pe=s(z,2);pe.textContent="],";var le=s(pe,2);le.textContent='"stateOperators" :[';var ie=s(le,2);ce(ie,1,()=>t().statusOperatorBundle.operators,ue,(He,we)=>{var je=Is(),We=a(je);f(Ze=>b(We,`"${Ze??""} ${e(we).title??""} ${e(we).isEffective??""} ",`),[()=>e(we).isSpawnedBy.toString()],se),r(He,je)});var ae=s(ie,2);ae.textContent="],";var qe=s(ae,2);qe.textContent='"lastMoveLogRecord" :{';var $e=s(qe,2),Oe=a($e),Ne=s($e,2),Te=a(Ne),Ke=s(Ne,2),Ve=a(Ke),Je=s(Ke,2);Je.textContent="},",f((He,we)=>{b(Oe,`"movedBy":"${He??""}",`),b(Te,`"movedAs":"${we??""}",`),b(Ve,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var He;return(He=t().moveLog.latestRecord.movedBy)==null?void 0:He.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],se),r(te,K)};C(Q,te=>{d()==="Detail"?te(me):te(re,!1)},!0)}r(H,Y)};C(Be,H=>{d()==="Normal"?H(Se):H(de,!1)})}var ee=s(ve,2),Le=a(ee);{var xe=H=>{var Y=Gs(),Q=U(Y);{var me=S=>{var B=Ks();r(S,B)};C(Q,S=>{t().origin.isOldVersion&&S(me)})}var re=s(Q,2);{var te=S=>{var B=Ws();r(S,B)},K=S=>{var B=Xs(),W=a(B);{var D=R=>{var G=zs();const _e=se(()=>t().entityType==="Card"?t():t().parent);var De=a(G);f(k=>{var v;rt(G,"href",k),b(De,`⇒${((v=e(_e))!=null&&v.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[p],se),r(R,G)};C(W,R=>{var G;t()&&(t().entityType==="Card"||((G=t().parent)==null?void 0:G.entityType)==="Card")&&R(D)})}var N=s(W,2);gt(N,()=>e(m),null,(R,G)=>{var _e=ke(),De=U(_e);{var k=v=>{var u=Vs();f(()=>rt(u,"href",`https://yugioh-wiki.net/index.php?${e(G).wikiEncodedName}`)),r(v,u)};C(De,v=>{e(G)&&e(G).wikiEncodedName&&v(k)})}r(R,_e)});var I=s(N,2);f(()=>rt(I,"href",`https://www.google.com/search?q=遊戯王 ${t().origin.name}`)),r(S,B)};C(re,S=>{t().origin.isForTest?S(te):S(K,!1)})}r(H,Y)};C(Le,H=>{t()&&H(xe)})}f((H,Y)=>{Ye(M,`duel_card duel_card_info ${t().origin.kind??""} ${H??""} svelte-1uevs9j`),b(X,t().nm),b(ge,Y)},[()=>{var H;return(H=t().origin.monsterCategories)==null?void 0:H.join(" ")},()=>"★".repeat(t().lvl||0)],se),r(E,M)};C(o,E=>{t()&&E(q)})}r(_,c),ft()}Va(["click","contextmenu"]);var Zs=l('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),ei=l('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),ti=l('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function ai(_,i){_t(i,!1);let t=Ae(i,"cell",12);const d=()=>{t(t())},m=q=>t().cardEntities.filter(E=>E.face===q);t().field.duel.view.onDuelUpdate.append(d),ut();var p=ke(),c=U(p);{var o=q=>{var E=ti(),M=a(E),T=a(M),L=a(T),n=s(T,2),X=a(n),P=s(M,2);ce(P,4,()=>["FaceUp","FaceDown"],ue,(y,g)=>{var F=ke(),Z=U(F);{var ge=A=>{var j=ei(),ve=a(j),Be=a(ve),Se=s(ve,2);ce(Se,1,()=>m(g).toSorted(dr),ue,(de,ee)=>{var Le=Zs(),xe=a(Le);const H=se(()=>t().owner===t().field.duel.duelists.Below);Vt(xe,{get entity(){return e(ee)},get isVisibleForcibly(){return e(H)},isWideMode:!0,cardActionResolve:void 0}),r(de,Le)}),f(()=>b(Be,g==="FaceUp"?"表向き":"裏向き")),r(A,j)};C(Z,A=>{m(g).length&&A(ge)})}r(y,F)}),f(()=>{var y;b(L,(y=t().owner)==null?void 0:y.profile.name),b(X,t().cellType)}),r(q,E)};C(c,q=>{t().field.duel.view.infoBoardState==="CellInfo"&&q(o)})}r(_,p),ft()}var ri=l('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),si=l('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function ii(_,i){_t(i,!1);let t=Ae(i,"viewController",8),d=Ae(i,"userProfile",12);ut();var m=ke(),p=U(m);{var c=o=>{var q=si(),E=s(a(q),2),M=s(a(E),2);ce(M,1,()=>_r,ue,(T,L)=>{var n=ri(),X=a(n),P=a(X),y=s(X,2),g=a(y);f(()=>b(g,vr[e(L)])),cr(P,()=>d().chainConfig[e(L)],F=>d(d().chainConfig[e(L)]=F,!0)),V("change",P,()=>d().save()),r(T,n)}),r(o,q)};C(p,o=>{t().infoBoardState==="Config"&&o(c)})}r(_,m),ft()}function ni(_,{from:i,to:t},d={}){var{delay:m=0,duration:p=j=>Math.sqrt(j)*120,easing:c=Ca}=d,o=getComputedStyle(_),q=o.transform==="none"?"":o.transform,[E,M]=o.transformOrigin.split(" ").map(parseFloat);E/=_.clientWidth,M/=_.clientHeight;var T=li(_),L=_.clientWidth/t.width/T,n=_.clientHeight/t.height/T,X=i.left+i.width*E,P=i.top+i.height*M,y=t.left+t.width*E,g=t.top+t.height*M,F=(X-y)*L,Z=(P-g)*n,ge=i.width/t.width,A=i.height/t.height;return{delay:m,duration:typeof p=="function"?p(Math.sqrt(F*F+Z*Z)):p,easing:c,css:(j,ve)=>{var Be=ve*F,Se=ve*Z,de=j+ve*ge,ee=j+ve*A;return`transform: ${q} translate(${Be}px, ${Se}px) scale(${de}, ${ee});`}}}function li(_){if("currentCSSZoom"in _)return _.currentCSSZoom;for(var i=_,t=1;i!==null;)t*=+getComputedStyle(i).zoom,i=i.parentElement;return t}var oi=l('<div class="chain_number svelte-lqu21u"> </div>'),di=l('<div class="duel_card_row svelte-lqu21u"> </div>'),vi=l('<div class="appendix svelte-lqu21u"> </div>'),ci=l('<div class="appendix_wrapper svelte-lqu21u"></div>'),_i=l('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),ui=l("<div></div>");function fi(_,i){_t(i,!1);let t=Ae(i,"duel",8),d=Ae(i,"position",8,"left");const m=-100,p=()=>d()==="left"?-100:100;let c=ne([]),o=Promise.resolve(),q=Promise.resolve();const E=1e3,M=500,T=400,L=X=>{const P={...X};P.isKnown=X.chainBlockInfo.action.entity.controller.duelistType==="Player"||X.chainBlockInfo.action.entity.face==="FaceUp",P.chainBlockInfo.onStateChange.append(y=>{if(y==="done"||y==="failed"||y==="negated")return o=o.then(async()=>{const g=new Date().getTime()-P.chainBlockInfo.wasSpawnedAt.getTime();g<E&&await ta(E-g),x(c,e(c).filter(F=>F.seq!==P.seq)),await ta(M+T)}).then(),"RemoveMe";x(c,e(c))}),q=q.then(async()=>{x(c,[P,...e(c)].sort((y,g)=>ur.isSameChain(y.clock,g.clock)&&y.chainBlockInfo.action.isWithChainBlock&&g.chainBlockInfo.action.isWithChainBlock?g.clock.totalProcSeq-y.clock.totalProcSeq:y.clock.totalProcSeq-g.clock.totalProcSeq)),await ta(300)}),o=o.then(()=>ta(1e3))};t().chainBlockLog.onInsert.append(L),ut();var n=ui();ce(n,13,()=>e(c),X=>X.seq,(X,P)=>{var y=_i();const g=se(()=>{const{activator:Y,action:Q,appendix:me}=e(P).chainBlockInfo;return{activator:Y,action:Q,appendix:me}});var F=a(y),Z=a(F);{var ge=Y=>{var Q=oi(),me=a(Q);f(()=>b(me,`チェーン：${e(P).chainBlockInfo.chainNumber??""}`)),r(Y,Q)};C(Z,Y=>{e(P).chainBlockInfo.chainNumber&&Y(ge)})}var A=s(Z,2),j=a(A),ve=s(A,2),Be=a(ve);{var Se=Y=>{var Q=di(),me=a(Q);f(()=>b(me,e(P).isKnown?e(g).action.entity.nm:"？？？")),r(Y,Q)};C(Be,Y=>{(e(g).action.entity.entityType==="Card"||e(g).action.entity.entityType==="Token")&&Y(Se)})}var de=s(Be,2),ee=a(de),Le=a(ee),xe=s(ee,2);{var H=Y=>{var Q=ci();ce(Q,5,()=>e(g).appendix,ue,(me,re)=>{var te=vi(),K=a(te);f(()=>b(K,e(re))),r(me,te)}),r(Y,Q)};C(xe,Y=>{e(g).appendix&&Y(H)})}f((Y,Q,me)=>{Ye(y,`cut_in_row ${(!e(P).chainBlockInfo.chainNumber||e(P).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Ye(F,`cut_in_item cut_in_item_${Y??""} cut_in_item_${e(P).chainBlockInfo.state??""} svelte-lqu21u`),Ye(A,`duelist_name duelist_${Y??""}_name svelte-lqu21u`),b(j,e(g).activator.profile.name),Ye(ve,`duel_card duel_card_${Y??""} ${Q??""} ${(e(P).isKnown?e(g).action.entity.origin.kind:"")??""} ${e(g).action.entity.entityType??""}  svelte-lqu21u`),b(Le,me)},[()=>e(g).activator.seat.toLowerCase(),()=>e(P).isKnown?(e(g).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(g).action.toString()],se),oe(3,F,()=>Lr,()=>new Date().getTime()-e(P).chainBlockInfo.wasSpawnedAt.getTime()<E?{x:p(),duration:T}:{y:m,duration:T}),fr(y,()=>ni,()=>({duration:M})),r(X,y)}),f(()=>Ye(n,`cut_in_container cut_in_container_${d()??""} svelte-lqu21u`)),r(_,n),ft()}const mi=Yr({duration:400});var pi=l('<div class="duel_desk_left v_flex svelte-1w535im"><!> <!> <!></div>'),gi=l('<button class="duel_field_header_message svelte-1w535im"> </button> <div class="duel_field_header_buttons svelte-1w535im"><button class="svelte-1w535im">サレンダー</button></div>',1),yi=l("<tr></tr>"),hi=l('<table class="duel_field svelte-1w535im"><tbody class="svelte-1w535im"></tbody></table>'),bi=l('<button class="svelte-1w535im">OK</button>'),ki=l('<button class="svelte-1w535im">cancel</button>'),wi=l("<!> <!>",1),Ci=l('<button class="svelte-1w535im"> </button>'),xi=l('<div style="text-align: left;"><!> <!> <!></div>'),Di=l('<div><!> <div class=" duel_desk_center v_flex svelte-1w535im"><div class="duel_field_header svelte-1w535im"><!></div> <div class="duel_field_body svelte-1w535im"><!></div> <div class="duel_field_footer svelte-1w535im"><!></div></div> <!></div> <div style="position:fixed;bottom:0"> </div> <!> <div><!></div>',1);function $i(_,i){_t(i,!1);let t=Ae(i,"duel",12),d=Ae(i,"userProfile",8),m=ne(0),p=ne(0),c=ne([]),o=ne([]),q=()=>{},E=ne([]),M=ne(),T=ne(),L=ne(()=>!1),n=ne(!1);const X=v=>{q=v.resolve,x(E,v.dummyActionInfos.filter(u=>u.action.entity.entityType==="Duelist").filter(u=>u.action.entity.controller.seat==="Below")),x(M,void 0),x(T,void 0),x(o,[]),x(c,[]),x(n,!1),v.entitiesChoices&&(x(M,v.entitiesChoices),x(L,()=>{var u;return((u=v.entitiesChoices)==null?void 0:u.validator(e(c)))??!1}),x(n,v.entitiesChoices.cancelable),e(M).selectables.every(u=>u.cell.isPlayFieldCell&&u.getIndexInCell()===0||u.cell.cellType==="Hand"&&u.controller.duelistType==="Player"||u.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:v.entitiesChoices,chainBlockInfos:v.chainBlockInfos,cancelable:v.entitiesChoices.cancelable}).then(u=>{q({selectedEntities:u})})),v.cellsChoices&&(x(T,v.cellsChoices),x(L,()=>{var u;return((u=v.cellsChoices)==null?void 0:u.validator(e(o)))??!1}),x(n,v.cellsChoices.cancelable))};t().view.onWaitStart.append(X);const P=()=>{q=()=>{},x(T,void 0),x(M,void 0),x(o,[]),x(c,[]),x(L,()=>!1),x(n,!1)};t().view.onWaitEnd.append(P);let y=ne(void 0),g=ne("Normal");const F=({card:v,mode:u})=>{x(y,v),x(g,u??(e(y)===v||e(g)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(F);const Z=()=>{t(t())};t().view.onDuelUpdate.append(Z),t().log.onUpdate.append(Z);const ge=()=>{e(M)&&e(M).validator(e(c))&&q({selectedEntities:e(c)}),e(T)&&e(T).validator(e(o))&&q({selectedCells:e(o)})},A=()=>{q({})},j=v=>{q({actionInfo:v})},ve=()=>{q({surrender:!0})};t().main();const Be=()=>e(m)<=1400?"compact":"wide";ut();var Se=Di(),de=U(Se),ee=a(de);{var Le=v=>{var u=pi(),$=a(u);Wa($,{get duelist(){return t().duelists.Above}});var J=s($,2);{var z=le=>{Js(le,{get entity(){return e(y)},get mode(){return e(g)}})};C(J,le=>{e(y)&&le(z)})}var pe=s(J,2);Wa(pe,{get duelist(){return t().duelists.Below}}),r(v,u)};C(ee,v=>{Be()==="wide"&&v(Le)})}var xe=s(ee,2),H=a(xe),Y=a(H);{var Q=v=>{var u=gi(),$=U(u),J=a($),z=s($,2),pe=a(z);f(()=>b(J,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),V("click",$,()=>{t(t().view.infoBoardState="Log",!0)}),V("click",pe,ve),r(v,u)};C(Y,v=>{t().isEnded||v(Q)})}var me=s(H,2),re=a(me);{var te=v=>{var u=hi(),$=a(u);ce($,5,()=>t().field.cells,ue,(J,z,pe)=>{var le=yi();Ye(le,`${`duel_desk_row_${pe}`??""} svelte-1w535im`),ce(le,5,()=>e(z),ue,(ie,ae,qe)=>{as(ie,{get view(){return t().view},row:pe,column:qe,get selectedEntities(){return e(c)},set selectedEntities($e){x(c,$e)},get selectedCells(){return e(o)},set selectedCells($e){x(o,$e)},$$legacy:!0})}),r(J,le)}),r(v,u)};C(re,v=>{t().clock.turn>0&&v(te)})}var K=s(me,2),S=a(K);{var B=v=>{var u=wi(),$=U(u);{var J=le=>{var ie=bi();f(ae=>ie.disabled=ae,[()=>!e(L)()],se),V("click",ie,ge),r(le,ie)};C($,le=>{((e(M)&&e(M).qty)??(e(T)&&e(T).qty)??9999)>1&&le(J)})}var z=s($,2);{var pe=le=>{var ie=ki();V("click",ie,A),r(le,ie)};C(z,le=>{e(n)&&le(pe)})}r(v,u)},W=v=>{var u=ke(),$=U(u);ce($,1,()=>e(E),ue,(J,z)=>{var pe=Ci(),le=a(pe);f(()=>b(le,e(z).action.title)),V("click",pe,()=>j(e(z))),r(J,pe)}),r(v,u)};C(S,v=>{e(M)&&e(M).selectables.length||e(T)&&e(T).selectables?v(B):v(W,!1)})}var D=s(xe,2);{var N=v=>{var u=xi(),$=a(u);us($,{get log(){return t().log}});var J=s($,2);ai(J,{get cell(){return t().view.infoBoardCell}});var z=s(J,2);ii(z,{get userProfile(){return d()},get viewController(){return t().view}}),f(pe=>Ye(u,`duel_desk_right duel_desk_right_${pe??""}  svelte-1w535im`),[()=>t().view.infoBoardState.toLowerCase()],se),oe(3,u,()=>he,()=>({duration:e(m)>1400?0:200,axis:"x"})),r(v,u)};C(D,v=>{(e(m)>1400||t().view.infoBoardState!=="Default")&&v(N)})}var I=s(de,2),R=a(I),G=s(I,2);mr(G,{get modalController(){return t().view.modalController}});var _e=s(G,2),De=a(_e);const k=se(()=>Be()==="wide"?"right":"left");fi(De,{get duel(){return t()},get position(){return e(k)}}),f((v,u)=>{Ye(de,`flex duel_desk ${v??""}_mode svelte-1w535im`),b(R,u),Ye(_e,`cutin ${v??""}_mode svelte-1w535im`)},[Be,()=>t().clock.toFullString()],se),ua("innerWidth",v=>x(m,v)),ua("innerHeight",v=>x(p,v)),r(_,Se),ft()}var Si=l("<div></div>"),Mi=l("<!> <!> <!> <!>",1),Ti=l('<span class="atk svelte-1y1qbq4"> </span> <span class="slash svelte-1y1qbq4">/</span> <span class="def svelte-1y1qbq4"> </span>',1),Ei=l('<div role="listitem"><div class="svelte-1y1qbq4"><div class="duel_card_row card_name svelte-1y1qbq4"> </div> <div style="display:flex; flex-wrap: wrap;" class="svelte-1y1qbq4"><div style="" class="svelte-1y1qbq4"><!> <!> <!></div> <div class="atk_def svelte-1y1qbq4"><!></div></div></div></div>');function Za(_,i){_t(i,!1);let t=Ae(i,"mode",8),d=Ae(i,"cardInfo",8),m=Ae(i,"onAttention",8),p=Ae(i,"cardControlEventHandlers",8);ut();var c=Ei(),o=a(c),q=a(o),E=a(q),M=s(q,2),T=a(M),L=a(T);{var n=A=>{var j=Mi(),ve=U(j);{var Be=xe=>{var H=lt();f(()=>b(H,`★${d().level??""}`)),r(xe,H)},Se=xe=>{var H=ke(),Y=U(H);{var Q=re=>{var te=lt();f(()=>b(te,`☆${d().rank??""}`)),r(re,te)},me=re=>{var te=ke(),K=U(te);{var S=B=>{var W=lt();f(()=>b(W,`Ｌ${d().link??""}`)),r(B,W)};C(K,B=>{d().link&&B(S)},!0)}r(re,te)};C(Y,re=>{d().rank?re(Q):re(me,!1)},!0)}r(xe,H)};C(ve,xe=>{d().level?xe(Be):xe(Se,!1)})}var de=s(ve,2);ce(de,1,()=>d().attributes??[],ue,(xe,H)=>{var Y=Si();f(()=>Ye(Y,`monster_attr ${e(H)??""} svelte-1y1qbq4`)),r(xe,Y)});var ee=s(de,2);ce(ee,1,()=>d().types??[],ue,(xe,H)=>{var Y=lt();f(()=>b(Y,ga[e(H)])),r(xe,Y)});var Le=s(ee,2);ce(Le,1,()=>d().monsterCategories??[],ue,(xe,H)=>{var Y=lt();f(()=>b(Y,la[e(H)])),r(xe,Y)}),r(A,j)};C(L,A=>{d().kind==="Monster"&&A(n)})}var X=s(L,2);{var P=A=>{var j=lt();f(()=>b(j,`${ya[d().spellCategory]??""}魔法`)),r(A,j)};C(X,A=>{d().spellCategory&&A(P)})}var y=s(X,2);{var g=A=>{var j=lt();f(()=>b(j,`${ha[d().trapCategory]??""}罠`)),r(A,j)};C(y,A=>{d().trapCategory&&A(g)})}var F=s(T,2),Z=a(F);{var ge=A=>{var j=Ti(),ve=U(j),Be=a(ve),Se=s(ve,4),de=a(Se);f(()=>{b(Be,d().attack??"?"),b(de,d().defense??"?")}),r(A,j)};C(Z,A=>{d().kind==="Monster"&&A(ge)})}f(A=>{Ye(c,`${A??""} svelte-1y1qbq4`),b(E,d().name)},[()=>{var A,j;return`deck_editor_card duel_card ${d().kind} ${(j=(A=d())==null?void 0:A.monsterCategories)==null?void 0:j.join(" ")} ${d().isImplemented?"is_implemented":"is_not_implemented"} card_id_${d().cardId}`}],se),V("click",c,()=>m()(d())),V("touchstart",c,A=>p().onCardDragStart(A,t(),d())),V("touchmove",c,A=>p().onCardDragging(A,t())),V("touchend",c,function(...A){var j;(j=p().onCardDragEnd)==null||j.apply(this,A)}),V("touchcancel",c,function(...A){var j;(j=p().onCardDragCancel)==null||j.apply(this,A)}),V("mousedown",c,A=>p().onCardDragStart(A,t(),d())),V("mousemove",c,A=>p().onCardDragging(A,t())),V("mouseup",c,function(...A){var j;(j=p().onCardDragEnd)==null||j.apply(this,A)}),r(_,c),ft()}var ji=l('<button class="button_style_reset plus_minus_button svelte-1ty6ui7">+</button> <button class="button_style_reset plus_minus_button svelte-1ty6ui7">-</button>',1),Ai=l('<li class="deck_editor_item svelte-1ty6ui7"><!> <!></li>'),Bi=l('<div class="deck_editor_card_list_wrapper svelte-1ty6ui7"><ul></ul></div>');function Li(_,i){_t(i,!1);let t=Ae(i,"cardList",8),d=Ae(i,"mode",8),m=Ae(i,"state",8),p=Ae(i,"onAttention",8),c=Ae(i,"cardControlEventHandlers",8);const o=20;let q=ne(0),E=ne(o),M=ne(0),T=ne(0),L=ne(0),n=ne();ca(()=>(e(n),Rt(d()),Rt(t()),e(L),e(T),Rt(m())),()=>{if(e(n))if(ye(n,e(n).scrollTop=0),d()==="List"){const y=t().length>o?o:t().length;e(L)||(x(T,e(n).scrollHeight/y),x(L,Math.ceil(e(T)))),console.log(m(),t().length),t().length>o?x(M,e(L)*(t().length-o*2)+Math.ceil(e(T)*(o*2-1))):x(M,e(L)*t().length)}else x(E,t().length)}),$a(),ut();var X=Bi(),P=a(X);ce(P,5,t,ue,(y,g,F)=>{var Z=ke(),ge=U(Z);{var A=j=>{var ve=Ai(),Be=a(ve);Za(Be,{get mode(){return d()},get cardInfo(){return e(g)},get onAttention(){return p()},get cardControlEventHandlers(){return c()}});var Se=s(Be,2);{var de=ee=>{var Le=ji(),xe=U(Le),H=s(xe,2);f(Y=>{xe.disabled=!e(g).isImplemented,rt(xe,"title",e(g).isImplemented?`※shiftキー同時押しで一括投入
※ctrlキー同時押しで枚数制限無視`:""),H.disabled=Y,rt(H,"title",e(g).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>t().every(Y=>Y.name!==e(g).name)],se),V("click",xe,Y=>c().onCardAppend(Y,e(g))),V("click",H,Y=>c().onCardRemove(Y,e(g))),r(ee,Le)};C(Se,ee=>{d()==="Deck"&&ee(de)})}r(j,ve)};C(ge,j=>{F>=e(q)&&F<=e(E)&&j(A)})}r(y,Z)}),Xa(P,y=>x(n,y),()=>e(n)),f(y=>{Ye(P,`deck_editor_card_list ${y??""}  indexLowerBound_${e(q)??""} indexUpperBound=${e(E)??""} svelte-1ty6ui7`),rt(P,"style",`height: ${(e(M)?e(M)+"px":"fit-content")??""};padding-top: ${e(q)*e(L)}px`)},[()=>m().toLowerCase()],se),V("scroll",X,y=>{if(!e(L))return;const g=Math.ceil(y.currentTarget.scrollTop/e(L));x(q,g<o?0:g-o),x(E,g+o)}),r(_,X),ft()}var Yi=l('<div class="svelte-bxy0h6"><button class="button_style_reset svelte-bxy0h6">クリア</button></div>'),qi=l('<div><div class="deck_editor_card_kind_header svelte-bxy0h6"><div class="svelte-bxy0h6"> <!> 枚）</div> <div style="display: flex;" class="svelte-bxy0h6"><!> <div class="triangle svelte-bxy0h6">▲</div></div></div> <div class="deck_editor_card_kind_body svelte-bxy0h6"><!></div></div>'),Ui=l('<div class="deck_editor_card_list svelte-bxy0h6"></div>');function za(_,i){_t(i,!1);let t=Ae(i,"allCardTree",8),d=Ae(i,"deckCardTree",12),m=Ae(i,"mode",8),p=Ae(i,"onAttention",8),c=Ae(i,"searchCondition",8,void 0),o=Ae(i,"cardControlEventHandlers",8),q=ne("ExtraMonster");const E=ne(m()==="List"?t():d()),M=(...y)=>{const g=y.length?y:Xt(e(E)),F=(Z,ge)=>{var A;return Ja(Z,ge,(A=c())==null?void 0:A.sort.filter(j=>j.priority>0).toSorted((j,ve)=>j.priority-ve.priority))};g.forEach(Z=>e(E)[Z].sort(F))},T=(y,g)=>{d(d()[g]=[],!0)};let L=ne(m()==="Deck"?structuredClone(e(E)):{ExtraMonster:[],Monster:[],Spell:[],Trap:[]}),n=ne("");const X=y=>{if(!c())return!0;if(y.kind==="XyzMaterial")return!1;const g=fa(y);if(!c().deckCardKinds.includes(g)||c().name.trim().length&&[y.name,...y.nameTags??[],...y.textTags??[]].every(Z=>!Z.includes(c().name))||!y.isImplemented&&!c().others.includes("implemented")||y.isForTest&&!c().others.includes("test")||y.isOldVersion&&!c().others.includes("oldVersion"))return!1;if(y.kind==="Monster"){if(y.attributes&&!c().monsterAttributes.union(y.attributes).length||y.types&&!c().monsterTypes.union(y.types).length)return!1;const F=y.level??y.rank??y.link;return Pt(c().starLowerBound)&&(F??0)<c().starLowerBound||Pt(c().starUpperBound)&&(F??0)>c().starUpperBound||Pt(c().atkLowerBound)&&(y.attack??0)<c().atkLowerBound||Pt(c().atkUpperBound)&&(y.attack??0)>c().atkUpperBound||Pt(c().defLowerBound)&&(y.defense??0)<c().defLowerBound||Pt(c().defUpperBound)&&(y.defense??0)>c().defUpperBound||Pt(c().atkPlusDef)&&(!Pt(y.attack)||!Pt(y.defense)||y.attack+y.defense!==c().atkPlusDef)||!y.monsterCategories||g==="ExtraMonster"&&!y.monsterCategories.union(c().exMonsterCategories).length?!1:y.monsterCategories.union(c().monsterCategories).length}if(y.kind==="Spell")return y.spellCategory&&c().spellCategories.includes(y.spellCategory);if(y.kind==="Trap")return y.trapCategory&&c().trapCategories.includes(y.trapCategory)};ca(()=>(Rt(m()),e(E),Rt(d()),e(q),e(L)),()=>{if(m()==="Deck"){if(Xt(e(E)).forEach(y=>ye(E,e(E)[y]=d()[y])),e(E)[e(q)].length){const y=Xt(e(E)).map(g=>({kind:g,cardInfos:e(E)[g]})).filter(({cardInfos:g})=>g.length).find(({kind:g,cardInfos:F})=>F.length!==e(L)[g].length);y&&e(q)!==y.kind&&x(q,y.kind)}else x(q,Xt(e(E)).find(y=>e(E)[y].find(X))??"ExtraMonster");x(L,structuredClone(e(E)))}}),ca(()=>(Rt(m()),Rt(c()),e(n)),()=>{var y;if(m()==="List"){const g=JSON.stringify((y=c())==null?void 0:y.sort);e(n)!==g&&(x(n,g),M())}}),$a(),ut();var P=Ui();ce(P,5,()=>aa,ue,(y,g,F)=>{var Z=qi();const ge=se(()=>e(E)[e(g)].filter(X));var A=a(Z),j=a(A),ve=a(j),Be=s(ve);{var Se=Q=>{var me=lt();f(re=>b(me,`/ ${re??""}`),[()=>e(E)[e(g)].length.toLocaleString()],se),r(Q,me)};C(Be,Q=>{m()==="List"&&Q(Se)})}var de=s(j,2),ee=a(de);{var Le=Q=>{var me=Yi(),re=a(me);V("click",re,te=>T(te,e(g))),r(Q,me)};C(ee,Q=>{m()==="Deck"&&e(ge).length&&Q(Le)})}var xe=s(A,2),H=a(xe);const Y=se(()=>e(q)===e(g)?"Open":"Close");Li(H,{get mode(){return m()},get cardList(){return e(ge)},get onAttention(){return p()},get cardControlEventHandlers(){return o()},get state(){return e(Y)}}),f(Q=>{Ye(Z,`deck_editor_card_kind deckCardKind ${(e(g)===e(q)?"selected":"")??""} ${(e(ge).length?"":"empty")??""} svelte-bxy0h6`),b(ve,`${Qa[e(g)]??""}（${Q??""} `)},[()=>e(ge).length.toLocaleString()],se),V("click",A,()=>{if(e(q)!==e(g)){x(q,e(g));return}x(q,aa.map((Q,me)=>me+F).map(Q=>Q%aa.length).map(Q=>aa[Q]).filter(Q=>Q!==e(g)).find(Q=>e(E)[Q].some(X))??e(g))}),r(y,Z)}),r(_,P),ft()}var Pi=l('<div class="svelte-1e9s0mh"> </div>'),Hi=l('<div class="svelte-1e9s0mh"> </div>'),Ni=l('<div class="link_arrow_emoji svelte-1e9s0mh"> </div>'),Fi=l('<div class="duel_card_info_row svelte-1e9s0mh" style="position:sticky; top:0;"><!></div>'),Oi=l('<div class="plus_minus_button_area svelte-1e9s0mh"><button class="button_style_reset plus_minus_button svelte-1e9s0mh">+</button> <button class="button_style_reset plus_minus_button svelte-1e9s0mh">-</button></div>'),Ii=l('<div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"><pre class="description svelte-1e9s0mh"> </pre></div></div> <div class="duel_card_info_row svelte-1e9s0mh" style=" justify-content: space-between;"><div class="svelte-1e9s0mh"> </div> <div class="svelte-1e9s0mh"> </div></div>',1),Ri=l('<div></div> <div class="svelte-1e9s0mh"> </div>',1),Ki=l("<div> </div>"),Wi=l('<span class="svelte-1e9s0mh">/</span> <div class="monster_defense svelte-1e9s0mh"> </div>',1),zi=l("<div> </div>"),Vi=l('<div class="duel_card_info_row svelte-1e9s0mh"><!> <!> <div style="flex-grow: 1;" class="svelte-1e9s0mh"></div> <div class="monster_attack svelte-1e9s0mh"> </div> <!></div> <div class="duel_card_info_row svelte-1e9s0mh"></div>',1),Xi=l('<div class="duel_card_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"></div> <div class="svelte-1e9s0mh"> </div></div>'),Gi=l('<div class="duel_card_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"></div> <div class="svelte-1e9s0mh"> </div></div>'),Qi=l('<div class="svelte-1e9s0mh"> </div>'),Ji=l('<div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh">※エラッタ前カードです</div></div>'),Zi=l('<div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh">※テスト用カードです</div></div>'),en=l('<div class="duel_card_info_links svelte-1e9s0mh"><a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1e9s0mh"> </a> <a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1e9s0mh">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="google" class="svelte-1e9s0mh">⇒google検索</a></div>'),tn=l('<div><div class="duel_card_info_header svelte-1e9s0mh"><div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"> </div></div> <!> <!></div> <div class="duel_card_info_body svelte-1e9s0mh"><!> <!> <div class="duel_card_info_row description svelte-1e9s0mh"><div class="svelte-1e9s0mh"><pre class="description svelte-1e9s0mh"> </pre></div> <!></div> <!> <!></div></div>');function an(_,i){_t(i,!1);let t=Ae(i,"cardInfo",8,void 0),d=Ae(i,"onAttention",8),m=Ae(i,"cardControlEventHandlers",8),p=Ae(i,"deckCardTree",8),c=Ae(i,"refOnly",8);ut();var o=ke(),q=U(o);{var E=M=>{var T=tn(),L=a(T),n=a(L),X=a(n),P=a(X),y=s(n,2);{var g=S=>{var B=Fi(),W=a(B);{var D=I=>{var R=Pi(),G=a(R);f(_e=>b(G,_e),[()=>"★".repeat(t().level)],se),r(I,R)},N=I=>{var R=ke(),G=U(R);{var _e=k=>{var v=Hi(),u=a(v);f($=>b(u,$),[()=>"★".repeat(t().rank)],se),r(k,v)},De=k=>{var v=ke(),u=U(v);{var $=J=>{var z=Ni(),pe=a(z);f(le=>b(pe,le),[()=>t().linkArrowKeys.map(le=>Ga[le].emoji).join("")],se),r(J,z)};C(u,J=>{t().linkArrowKeys&&J($)},!0)}r(k,v)};C(G,k=>{t().rank&&t().rank>0?k(_e):k(De,!1)},!0)}r(I,R)};C(W,I=>{t().level&&t().level>0?I(D):I(N,!1)})}r(S,B)};C(y,S=>{t().kind==="Monster"&&S(g)})}var F=s(y,2);{var Z=S=>{var B=Oi(),W=a(B),D=s(W,2);f(N=>{W.disabled=!t().isImplemented,rt(W,"title",t().isImplemented?`※shiftキー同時押しで一括投入
※ctrlキー同時押しで枚数制限無視`:""),D.disabled=N,rt(D,"title",t().isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>p()[fa(t())].every(N=>N.name!==t().name)],se),V("click",W,N=>m().onCardAppend(N,t())),V("click",D,N=>m().onCardRemove(N,t())),r(S,B)};C(F,S=>{c()||S(Z)})}var ge=s(L,2),A=a(ge);{var j=S=>{var B=Ii(),W=U(B),D=a(W),N=a(D),I=a(N),R=s(W,2),G=a(R),_e=a(G),De=s(G,2),k=a(De);f(()=>{b(I,t().pendulumDescription),b(_e,`◀ ${t().pendulumScaleL??""}`),b(k,`${t().pendulumScaleR??""} ▶`)}),r(S,B)};C(A,S=>{var B;(B=t().monsterCategories)!=null&&B.includes("Pendulum")&&S(j)})}var ve=s(A,2);{var Be=S=>{var B=Vi(),W=U(B),D=a(W);{var N=u=>{var $=Ri(),J=U($),z=s(J,2),pe=a(z);f(()=>{Ye(J,`monster_attr ${t().attributes[0]??""} svelte-1e9s0mh`),b(pe,`${Sa[t().attributes[0]]??""}属性`)}),r(u,$)};C(D,u=>{t().attributes&&u(N)})}var I=s(D,2);{var R=u=>{var $=Ki(),J=a($);f(()=>{Ye($,`monster_cat ${t().types[0]??""} svelte-1e9s0mh`),b(J,`${ga[t().types[0]]??""}${Ma[t().types[0]]??""}族`)}),r(u,$)};C(I,u=>{t().types&&u(R)})}var G=s(I,4),_e=a(G),De=s(G,2);{var k=u=>{var $=Wi(),J=s(U($),2),z=a(J);f(()=>b(z,t().defense??"?")),r(u,$)};C(De,u=>{var $;($=t().monsterCategories)!=null&&$.includes("Link")||u(k)})}var v=s(W,2);ce(v,5,()=>t().monsterCategories??[],ue,(u,$)=>{var J=zi(),z=a(J);f(()=>{Ye(J,`monster_cat ${e($)??""} svelte-1e9s0mh`),b(z,`${la[e($)]??""}${_a[e($)]??""}`)}),r(u,J)}),f(()=>b(_e,t().attack??"?")),r(S,B)},Se=S=>{var B=ke(),W=U(B);{var D=I=>{var R=Xi(),G=s(a(R),2),_e=a(G);f(()=>b(_e,`${ya[t().spellCategory]??""}魔法`)),r(I,R)},N=I=>{var R=ke(),G=U(R);{var _e=De=>{var k=Gi(),v=s(a(k),2),u=a(v);f(()=>b(u,`${ha[t().trapCategory]??""}罠`)),r(De,k)};C(G,De=>{t().kind==="Trap"&&t().trapCategory&&De(_e)},!0)}r(I,R)};C(W,I=>{t().kind==="Spell"&&t().spellCategory?I(D):I(N,!1)},!0)}r(S,B)};C(ve,S=>{t().kind==="Monster"?S(Be):S(Se,!1)})}var de=s(ve,2),ee=a(de),Le=a(ee),xe=a(Le),H=s(ee,2);{var Y=S=>{var B=Qi(),W=a(B);f(D=>b(W,`初版発売日：${D??""}`),[()=>t().releaseDate.formatToYYYYMMDD("-")],se),r(S,B)};C(H,S=>{t().releaseDate&&S(Y)})}var Q=s(de,2);{var me=S=>{var B=Ji();r(S,B)};C(Q,S=>{t().isOldVersion&&S(me)})}var re=s(Q,2);{var te=S=>{var B=Zi();r(S,B)},K=S=>{var B=en(),W=a(B),D=a(W),N=s(W,2),I=s(N,2);f(R=>{rt(W,"href",R),b(D,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`),rt(N,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),rt(I,"href",`https://www.google.com/search?q=遊戯王 ${t().name}`)},[()=>pr(t())],se),r(S,B)};C(re,S=>{t().isForTest?S(te):S(K,!1)})}f(S=>{Ye(T,`duel_card duel_card_info ${t().kind??""} ${S??""} svelte-1e9s0mh`),b(P,t().name),b(xe,t().description)},[()=>{var S;return(S=t().monsterCategories)==null?void 0:S.join(" ")}],se),V("click",T,()=>d()(t())),r(M,T)};C(q,M=>{t()&&M(E)})}r(_,o),ft()}const rn={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class sn{constructor(){nt(this,"DefaultSeparator1","/");nt(this,"DefaultSeparator2"," ");nt(this,"DefaultSeparator3",":");nt(this,"createDate",i=>{if(!i)return;const t=new Date(i);if(!isNaN(t.getTime()))return t});nt(this,"createDateOr",(i,t)=>this.createDate(i)||t||new Date);nt(this,"truncateDate",i=>{const t=i||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});nt(this,"addDate",(i,t)=>{const d=this.createDateOr(i);return d.setDate(d.getDate()+t),d});nt(this,"addMonth",(i,t)=>{const d=this.createDateOr(i);return d.setMonth(d.getMonth()+t),d});nt(this,"addYear",(i,t)=>{const d=this.createDateOr(i);return d.setFullYear(d.getFullYear()+t),d});nt(this,"getDayOfWeek",(i,t="dddd")=>{const d=this.createDate(i);return d?rn[d.getDay()][t]:""});nt(this,"formatToYYYYMMDD",(i,t=this.DefaultSeparator1)=>{const d=this.createDate(i);if(!d)return"";const m=d.getFullYear().toString(),p=("0"+(d.getMonth()+1)).slice(-2),c=("0"+d.getDate()).slice(-2);return m+t+p+t+c});nt(this,"formatToYYYYMM",(i,t=this.DefaultSeparator1)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const m=d.getFullYear().toString(),p=("0"+(d.getMonth()+1)).slice(-2);return m+t+p});nt(this,"formatToHHMMSS",(i,t=this.DefaultSeparator3)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const m=d.getHours(),p=d.getMinutes(),c=d.getSeconds();return("0"+m).slice(-2)+t+("0"+p).slice(-2)+t+("0"+c).slice(-2)});nt(this,"formatToHHMM",(i,t=this.DefaultSeparator3)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const m=("0"+d.getHours()).slice(-2),p=("0"+d.getMinutes()).slice(-2);return m+t+p});nt(this,"formatToYYYYMMDD_HHMM",(i,t=this.DefaultSeparator1,d=this.DefaultSeparator2,m=this.DefaultSeparator3)=>{const p=this.createDate(i);return p?this.formatToYYYYMMDD(p,t)+d+this.formatToHHMM(p,m):""});nt(this,"formatToYYYYMMDD_HHMMSS",(i,t=this.DefaultSeparator1,d=this.DefaultSeparator2,m=this.DefaultSeparator3)=>{const p=this.createDate(i);return p?this.formatToYYYYMMDD(p,t)+d+this.formatToHHMMSS(p,m):""})}}const Dt=new sn;Date.prototype.truncateDate=function(){return Dt.truncateDate(this)};Date.prototype.getCloneOr=function(_){return Dt.createDateOr(this,_)};Date.prototype.addDate=function(_){return Dt.addDate(this,_)};Date.prototype.addMonth=function(_){return Dt.addDate(this,_)};Date.prototype.addYear=function(_){return Dt.addDate(this,_)};Date.prototype.getDayOfWeek=function(_="dddd"){return Dt.getDayOfWeek(this,_)};Date.prototype.formatToYYYYMM=function(_){return Dt.formatToYYYYMM(this,_)};Date.prototype.formatToYYYYMMDD=function(_){return Dt.formatToYYYYMMDD(this,_)};Date.prototype.formatToYYYYMMDD_HHMM=function(_,i,t){return Dt.formatToYYYYMMDD_HHMM(this,_,i,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(_,i,t){return Dt.formatToYYYYMMDD_HHMMSS(this,_,i,t)};Date.prototype.formatToHHMM=function(_){return Dt.formatToHHMM(this,_)};Date.prototype.formatToHHMMSS=function(_){return Dt.formatToHHMMSS(this,_)};var nn=l('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),ln=l('<ul class="deck_info_list svelte-2wdgc8"></ul>'),on=l('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),dn=l('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),vn=l('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),cn=l('<button class="svelte-2wdgc8">Cancel</button>'),_n=l('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function un(_,i){_t(i,!1);let t=Ae(i,"eventHolder",8),d=Ae(i,"args",8),m=Ae(i,"resolve",8),p=ne(Promise.resolve([])),c=ne();const o=()=>{x(c,new DataTransfer().files),x(p,Promise.resolve([]))},q=async n=>{n.preventDefault(),console.log("hoge",n)},E=async n=>{n.preventDefault(),n.dataTransfer&&T(n.dataTransfer.files)},M=()=>{T(e(c))},T=async n=>{if(!n.length)return;const X=[],P=[];for(const y of n)try{P.push(...await Mt.createfromJson(y))}catch(g){g instanceof Error&&X.push(g.message)}if(X.length){console.log(...X);return}x(p,e(p).then(()=>P))},L=o;ut(),gr(_,{get eventHolder(){return t()},get args(){return d()},$$slots:{body:(n,X)=>{var P=dn(),y=a(P);gt(y,()=>na,null,(g,F)=>{var Z=ke(),ge=U(Z);gt(ge,()=>e(p),null,(A,j)=>{var ve=ke(),Be=U(ve);{var Se=ee=>{var Le=ln();ce(Le,5,()=>e(j),ue,(xe,H)=>{var Y=nn(),Q=a(Y),me=a(Q),re=s(Q,2),te=a(re),K=s(re,2),S=a(K);f((B,W,D)=>{b(me,e(H).name),b(te,`${B??""}
                  /
                  ${W??""}`),b(S,`最終使用日時 ： ${D??""}`)},[()=>e(H).cardNames.filter(B=>{var W,D;return!((D=(W=e(F).getCardInfo(B))==null?void 0:W.monsterCategories)!=null&&D.union(ra).length)}).length,()=>e(H).cardNames.filter(B=>{var W,D;return(D=(W=e(F).getCardInfo(B))==null?void 0:W.monsterCategories)==null?void 0:D.union(ra).length}).length,()=>e(H).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],se),r(xe,Y)}),r(ee,Le)},de=ee=>{var Le=on(),xe=s(a(Le),2),H=a(xe);yr(H,()=>e(c),Y=>x(c,Y)),V("change",H,M),V("cancel",H,L),V("drop",Le,E),V("dragover",Le,q),r(ee,Le)};C(Be,ee=>{e(j).length?ee(Se):ee(de,!1)})}r(A,ve)}),r(g,Z)}),r(n,P)},footer:(n,X)=>{var P=_n(),y=a(P);gt(y,()=>e(p),null,(g,F)=>{var Z=ke(),ge=U(Z);{var A=ve=>{var Be=vn(),Se=U(Be),de=s(Se,2),ee=s(de,2);f(()=>{Se.disabled=e(F).length===0,de.disabled=e(F).length===0}),V("click",Se,()=>m()({deckInfos:e(F),replaceAll:!1})),V("click",de,()=>m()({deckInfos:e(F),replaceAll:!0})),V("click",ee,L),r(ve,Be)},j=ve=>{var Be=ke(),Se=U(Be);{var de=ee=>{var Le=cn();V("click",Le,()=>m()(void 0)),r(ee,Le)};C(Se,ee=>{d().cancelable&&ee(de)},!0)}r(ve,Be)};C(ge,ve=>{e(F).length?ve(A):ve(j,!1)})}r(g,Z)}),r(n,P)}}}),ft()}const pa=class pa extends br{constructor(i,t){super(i,...Object.values(t))}};nt(pa,"createModalController",i=>{const t={deckUploader:new kr({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new pa(i,t),t)});let Da=pa;function fn(_,i){_t(i,!1);let t=Ae(i,"modalController",8);ut(),hr(_,{get modalController(){return t()},children:(d,m)=>{var p=ke(),c=U(p);{var o=q=>{un(q,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};C(c,q=>{t().deckUploader.state==="Shown"&&q(o)})}r(d,p)},$$slots:{default:!0}}),ft()}var mn=l("<button> </button>"),pn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),gn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),yn=l('<div class="deck_editor_search_box_row monster_ex_categories svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">エクストラ</button></div> <div class="svelte-1m129ml"></div></div>'),hn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),bn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> <div style="display: inline-block;"></div> </label>'),kn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),wn=l('<option class="svelte-1m129ml"></option>'),Cn=l('<option class="svelte-1m129ml"></option>'),xn=l('<div class="deck_editor_search_box_row monster_categories svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">モンスター</button></div> <div class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row monster_attributes svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">属性</button></div> <div class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">種族</button></div> <div class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">星攻守</button></div> <div class="svelte-1m129ml"><div class="star_range svelte-1m129ml"><span class="svelte-1m129ml">星</span> <select class="svelte-1m129ml"></select> <span class="svelte-1m129ml">～</span> <select class="svelte-1m129ml"></select></div> <div class="atk_range svelte-1m129ml"><span class="svelte-1m129ml">攻</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"> <span class="svelte-1m129ml">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"></div> <div class="def_range svelte-1m129ml"><span class="svelte-1m129ml">守</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"> <span class="svelte-1m129ml">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"></div> <div class="atk_plus_def svelte-1m129ml"><span class="svelte-1m129ml">攻+守</span> <input type="number" min="0" max="10000" step="100" class="svelte-1m129ml"></div></div></div>',1),Dn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),$n=l('<div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">魔法</button></div> <div class="svelte-1m129ml"></div></div>'),Sn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),Mn=l('<div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">罠</button></div> <div class="svelte-1m129ml"></div></div>'),Tn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),En=l('<div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">その他</button></div> <div class="svelte-1m129ml"></div></div>'),jn=l('<div class="deck_editor_card_detail svelte-1m129ml"><!></div>'),An=l("<div>カード情報整理中</div>"),Bn=l("<div>カード情報読込中</div>"),Ln=l("<option> </option>"),Yn=l('<div class="svelte-1m129ml"><a class="white_button svelte-1m129ml" download="SVS_DeckInfos.json">ダウンロード</a></div>'),qn=l('<div class="svelte-1m129ml"></div>'),Un=l('<div class="svelte-1m129ml"><a class="white_button svelte-1m129ml" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),Pn=l('<div class="svelte-1m129ml"></div>'),Hn=l('<div class="deck_editor_body_right_header svelte-1m129ml"><div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">編集対象</div> <div class="svelte-1m129ml"><select style="width:100%" class="svelte-1m129ml"></select></div></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">新規名称</div> <div class="svelte-1m129ml"><input type="text" style="width:100%" class="svelte-1m129ml"></div></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">基本操作</div> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml">デッキを保存</button></div> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml">デッキを複製</button></div> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">DL/UL</div> <!> <!> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml">アップロード</button></div></div></div> <div><!></div>',1),Nn=l("<div>デッキ情報読込中</div>"),Fn=l('<div class="deck_editor_body_right_dummy svelte-1m129ml"></div>'),On=l('<div class="deck_editor_body_right svelte-1m129ml"><!></div>'),In=l("<div><!></div>"),Rn=l('<div><div class="deck_editor_header svelte-1m129ml"></div> <div class="deck_editor_body svelte-1m129ml"><div class="deck_editor_body_left svelte-1m129ml"><div role="contentinfo" class="deck_editor_search_box svelte-1m129ml"><div class="deck_editor_search_box_header svelte-1m129ml"><div class="svelte-1m129ml"><button class="deck_editor_search_box_title svelte-1m129ml">検索条件</button></div> <div class="deck_editor_sort_setting_container svelte-1m129ml"></div></div> <div class="deck_editor_search_box_body svelte-1m129ml"><div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">名称</button></div> <div class="svelte-1m129ml"><input type="text" style="width:100%" placeholder="※ルビには対応していません" class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row card_kind svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">種類</button></div> <div class="svelte-1m129ml"></div></div> <!> <!> <!> <!> <!></div></div> <!></div> <div class="deck_editor_body_center svelte-1m129ml"><div class="deck_editor_body_center_body svelte-1m129ml"><!></div></div> <!></div> <div class="footer svelte-1m129ml"></div></div> <!> <!>',1);function Kn(_,i){_t(i,!1);const t=[],d=[],m=[],p=[],c=[],o=[],q=[],E=[];let M=Ae(i,"refOnly",8);const T=Da.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),L={name:"",deckCardKinds:[...aa],exMonsterCategories:[...ra],monsterCategories:Ha.filter(h=>!ra.includes(h)),monsterAttributes:[...Pa],monsterTypes:[...Ua],spellCategories:qa.filter(h=>h!=="PendulumScale"),trapCategories:[...Ya],starLowerBound:0,starUpperBound:13,atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:M()?["implemented"]:["oldVersion"],sort:[...Na]},n=ne(structuredClone(L));ye(n,e(n).monsterCategories=["Effect","Tuner","Pendulum"]);let X=ne("DeckEdit"),P=ne("SearchCondition");const y=()=>{if(!e(n).deckCardKinds.length){Xt(e(n)).forEach(h=>{Array.isArray(e(n)[h])&&Array.isArray(L[h])?ye(n,e(n)[h]=[...L[h]]):ye(n,e(n)[h]=L[h])});return}ye(n,e(n).name=""),ye(n,e(n).deckCardKinds=[]),ye(n,e(n).exMonsterCategories=[]),ye(n,e(n).monsterCategories=[]),ye(n,e(n).monsterAttributes=[]),ye(n,e(n).monsterTypes=[]),ye(n,e(n).spellCategories=[]),ye(n,e(n).trapCategories=[]),ye(n,e(n).others=[]),ye(n,e(n).atkLowerBound=0),ye(n,e(n).atkUpperBound=5e3),ye(n,e(n).defLowerBound=0),ye(n,e(n).defUpperBound=5e3),ye(n,e(n).atkPlusDef=void 0),ye(n,e(n).sort=[...Na])},g=h=>{h.forEach(w=>{Array.isArray(e(n)[w])&&Array.isArray(L[w])?ye(n,e(n)[w]=e(n)[w].length?[]:[...L[w]]):ye(n,e(n)[w]=L[w])})};let F=ne(),Z,ge=ne(!1);const A=200,j=()=>{x(ge,!1),x(F,void 0),Z=void 0},ve=(h,w)=>{const O=fa(w),fe=e(re).cardTree[O].filter(Fe=>Fe.name===w.name).length;let Ue=h.shiftKey?3-fe:1;console.debug(w,O,fe,Ue),!h.ctrlKey&&fe>2&&(Ue=0),Ue&&ye(re,e(re).cardTree[O]=[...e(re).cardTree[O],...Array(Ue).fill(w)].sort(Ja)),j(),S(w)},Be=(h,w)=>{const O=fa(w);let fe=0;ye(re,e(re).cardTree[O]=e(re).cardTree[O].filter(Ue=>Ue.name!==w.name?!0:(fe++,!h.shiftKey&&fe>1))),j(),S(w)},Se=h=>{if(h.changedTouches&&h.changedTouches.length!==1)return;const{clientX:w,clientY:O}=h.changedTouches?h.changedTouches[0]:h;return{clientX:w,clientY:O}},de={onCardAppend:ve,onCardRemove:Be,onCardDragCancel:j,onCardDragStart:(h,w,O)=>{if(S(O),M()){j();return}if(w!=="List"&&w!=="Deck"){j();return}if(w==="List"&&!O.isImplemented){j();return}const fe=Se(h);if(!fe){j();return}Z={from:w,cardInfo:O,pos:fe,startPos:fe},ta(A).then(()=>{(Z==null?void 0:Z.cardInfo)===O&&x(F,Z)}),x(ge,!1)},onCardDragging:(h,w)=>{if(e(F)&&h.preventDefault&&h.preventDefault(),e(F)&&h.stopPropagation&&h.stopPropagation(),!Z){j();return}const O=Se(h);if(!O){j();return}const fe=e(F)||Z;x(ge,!!(fe.from==="List"&&fe.cardInfo.isImplemented&&document.elementsFromPoint(O.clientX,O.clientY).some(Ue=>Ue.classList.contains("deck_editor_body_right_body")||Ue.classList.contains("deck_editor_body_right_dummy")))),e(ge)&&x(X,"DeckEdit"),e(F)?x(F,{...e(F),pos:O}):Z.pos={...O}},onCardDragEnd:h=>{if(!Z||!e(F)){j();return}const w=Se(h);if(!w){j();return}e(F).from==="List"&&e(F).cardInfo.isImplemented&&document.elementsFromPoint(w.clientX,w.clientY).some(O=>O.classList.contains("deck_editor_body_right_body"))&&ve(h,e(F).cardInfo),e(F).from==="Deck"&&!document.elementsFromPoint(w.clientX,w.clientY).some(O=>O.classList.contains("deck_editor_body_right_body"))&&Be(h,e(F).cardInfo),j()}},ee=(h,w,O)=>{Array.isArray(e(n)[w])&&Array.isArray(L[w])&&ye(n,e(n)[w]=[O])},Le=async()=>{const w=(await e(Y)).find(fe=>fe.id===e(H));if(!w)return;const O=await na;x(re,{...w,cardTree:Cr(w.cardNames.map(fe=>{const Ue=O.getCardInfo(fe);return Ue===void 0&&console.error(fe),Ue}).filter(fe=>fe!==void 0))})},xe=()=>Mt.getAllDeckInfo().then(h=>(x(H,(h.find(w=>w.lastUsedAt.getTime()===Math.max(...h.map(O=>O.lastUsedAt.getTime())))??h[0]).id),h));let H=ne(-1),Y=ne(xe()),Q=ne(e(Y).then(h=>Mt.convertToObjectURL(h)));e(Y).then(Le);const me=()=>{x(Y,xe()),x(Q,e(Y).then(h=>Mt.convertToObjectURL(h))),Le()};let re=ne({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardTree:{ExtraMonster:[],Monster:[],Spell:[],Trap:[]}}),te=ne(void 0),K=0;const S=h=>{x(P,"CardDetail"),h.cardId!==void 0&&!h.description&&!h.pendulumDescription&&(K=h.cardId,wa([h.cardId]).then(()=>{h.cardId===K&&x(te,h)})),x(te,h)},B=async()=>{const w=(await e(Y)).find(O=>O.id===e(H));if(!w)throw new Error("illegal state");return w},W=async()=>{const h=await B();await h.saveDeckInfo({...h,name:e(re).name,cardNames:Object.values(e(re).cardTree).flatMap(w=>w).map(w=>w.name),lastUsedAt:new Date}),me()},D=async()=>{(await Mt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,Object.values(e(re).cardTree).flatMap(w=>w).map(w=>w.name))).saveDeckInfo(),me()},N=async h=>{const w=await B();!h.shiftKey&&!confirm(`デッキ【${w.name}】を削除します。
よろしいですか？`)||(await w.delete(),me())},I=async()=>{const h=await T.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!h)return;const w=[];if(h.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;w.push(...(await e(Y)).map(O=>O.id))}await Promise.all(h.deckInfos.map(O=>Mt.createNewDeck(O.name,O.description,O.cardNames,O.lastUsedAt))),w.length&&await Promise.all(w.map(Mt.remove)),me()},R=()=>innerWidth<=1400?"compact":"wide";ut();var G=Rn(),_e=U(G),De=s(a(_e),2),k=a(De),v=a(k),u=a(v),$=a(u),J=a($),z=s($,2);ce(z,5,()=>e(n).sort,ue,(h,w,O)=>{var fe=mn(),Ue=a(fe);f(()=>{Ye(fe,`deck_editor_sort_setting_item ${e(w).order??""} priority_${e(w).priority??""} svelte-1m129ml`),b(Ue,`${wr[e(w).key]??""}
                ${(e(w).order==="asc"?"▲":"▼")??""}`)}),V("click",fe,()=>{e(n).sort.forEach(Fe=>Fe.priority++),e(w).order=e(w).order==="asc"?"desc":"asc",Bt(()=>e(n).sort),e(w).priority=1,Bt(()=>e(n).sort)}),r(h,fe)});var pe=s(u,2),le=a(pe),ie=a(le),ae=a(ie),qe=s(ie,2),$e=a(qe),Oe=s(le,2),Ne=a(Oe),Te=a(Ne),Ke=s(Ne,2);ce(Ke,5,()=>aa,ue,(h,w)=>{var O=pn(),fe=a(O),Ue,Fe=s(fe);f(()=>{Ue!==(Ue=e(w))&&(fe.value=(fe.__value=e(w))==null?"":e(w)),b(Fe,` ${Qa[e(w)]??""}`)}),Ft(t,[],fe,()=>(e(w),e(n).deckCardKinds),Me=>ye(n,e(n).deckCardKinds=Me)),V("dblclick",O,Me=>ee(Me,"deckCardKinds",e(w))),r(h,O)});var Ve=s(Oe,2);{var Je=h=>{var w=yn(),O=a(w),fe=a(O),Ue=s(O,2);ce(Ue,5,()=>ra,ue,(Fe,Me)=>{var Qe=gn(),ze=a(Qe),et,Ie=s(ze);f(()=>{et!==(et=e(Me))&&(ze.value=(ze.__value=e(Me))==null?"":e(Me)),b(Ie,` ${la[e(Me)]??""}${_a[e(Me)]??""}`)}),Ft(d,[],ze,()=>(e(Me),e(n).exMonsterCategories),Pe=>ye(n,e(n).exMonsterCategories=Pe)),V("dblclick",Qe,Pe=>ee(Pe,"exMonsterCategories",e(Me))),r(Fe,Qe)}),V("click",fe,()=>g(["exMonsterCategories"])),oe(3,w,()=>he,()=>({delay:0,duration:100})),r(h,w)};C(Ve,h=>{e(n).deckCardKinds.includes("ExtraMonster")&&h(Je)})}var He=s(Ve,2);{var we=h=>{var w=xn(),O=U(w),fe=a(O),Ue=a(fe),Fe=s(fe,2);ce(Fe,5,()=>Ha.filter(Ce=>!ra.includes(Ce)).filter(Ce=>Ce!=="Token"),ue,(Ce,Ee)=>{var Re=hn(),be=a(Re),Xe,tt=s(be);f(()=>{Xe!==(Xe=e(Ee))&&(be.value=(be.__value=e(Ee))==null?"":e(Ee)),b(tt,` ${la[e(Ee)]??""}${_a[e(Ee)]??""}`)}),Ft(m,[],be,()=>(e(Ee),e(n).monsterCategories),at=>ye(n,e(n).monsterCategories=at)),V("dblclick",Re,at=>ee(at,"monsterCategories",e(Ee))),r(Ce,Re)});var Me=s(O,2),Qe=a(Me),ze=a(Qe),et=s(Qe,2);ce(et,5,()=>Pa,ue,(Ce,Ee)=>{var Re=bn(),be=a(Re),Xe,tt=s(be,2),at=s(tt);f(()=>{Xe!==(Xe=e(Ee))&&(be.value=(be.__value=e(Ee))==null?"":e(Ee)),Ye(tt,`monster_attr ${e(Ee)??""} svelte-1m129ml`),b(at,` ${Sa[e(Ee)]??""}`)}),Ft(p,[],be,()=>(e(Ee),e(n).monsterAttributes),Ut=>ye(n,e(n).monsterAttributes=Ut)),V("dblclick",Re,Ut=>ee(Ut,"monsterAttributes",e(Ee))),r(Ce,Re)});var Ie=s(Me,2),Pe=a(Ie),dt=a(Pe),vt=s(Pe,2);ce(vt,5,()=>Ua,ue,(Ce,Ee)=>{var Re=kn(),be=a(Re),Xe,tt=s(be);f(()=>{Xe!==(Xe=e(Ee))&&(be.value=(be.__value=e(Ee))==null?"":e(Ee)),b(tt,` ${ga[e(Ee)]??""}
                    ${Ma[e(Ee)]??""}`)}),Ft(c,[],be,()=>(e(Ee),e(n).monsterTypes),at=>ye(n,e(n).monsterTypes=at)),V("dblclick",Re,at=>ee(at,"monsterTypes",e(Ee))),r(Ce,Re)});var ct=s(Ie,2),yt=a(ct),ht=a(yt),Et=s(yt,2),jt=a(Et),$t=s(a(jt),2);f(()=>{e(n),Bt(()=>{})}),ce($t,4,()=>Array(14),ue,(Ce,Ee,Re)=>{var be=wn();be.value=(be.__value=Re)==null?"":Re,be.textContent=Re,r(Ce,be)});var At=s($t,4);f(()=>{e(n),Bt(()=>{})}),ce(At,4,()=>Array(14),ue,(Ce,Ee,Re)=>{var be=Cn();be.value=(be.__value=Re)==null?"":Re,be.textContent=Re,r(Ce,be)});var St=s(jt,2),Ct=s(a(St),2),xt=s(Ct,4),Yt=s(St,2),qt=s(a(Yt),2),Kt=s(qt,4),Wt=s(Yt,2),pt=s(a(Wt),2);V("click",Ue,()=>g(["monsterCategories"])),oe(3,O,()=>he,()=>({delay:0,duration:100})),V("click",ze,()=>g(["monsterAttributes"])),oe(3,Me,()=>he,()=>({delay:0,duration:100})),V("click",dt,()=>g(["monsterTypes"])),oe(3,Ie,()=>he,()=>({delay:0,duration:100})),V("click",ht,()=>g(["starLowerBound","starUpperBound","atkLowerBound","atkUpperBound","defLowerBound","defUpperBound","atkPlusDef"])),It($t,()=>e(n).starLowerBound,Ce=>ye(n,e(n).starLowerBound=Ce)),It(At,()=>e(n).starUpperBound,Ce=>ye(n,e(n).starUpperBound=Ce)),Ot(Ct,()=>e(n).atkLowerBound,Ce=>ye(n,e(n).atkLowerBound=Ce)),Ot(xt,()=>e(n).atkUpperBound,Ce=>ye(n,e(n).atkUpperBound=Ce)),Ot(qt,()=>e(n).defLowerBound,Ce=>ye(n,e(n).defLowerBound=Ce)),Ot(Kt,()=>e(n).defUpperBound,Ce=>ye(n,e(n).defUpperBound=Ce)),Ot(pt,()=>e(n).atkPlusDef,Ce=>ye(n,e(n).atkPlusDef=Ce)),oe(3,ct,()=>he,()=>({delay:0,duration:100})),r(h,w)};C(He,h=>{(e(n).deckCardKinds.includes("Monster")||e(n).deckCardKinds.includes("ExtraMonster"))&&h(we)})}var je=s(He,2);{var We=h=>{var w=$n(),O=a(w),fe=a(O),Ue=s(O,2);ce(Ue,5,()=>qa.filter(Fe=>Fe!=="PendulumScale"),ue,(Fe,Me)=>{var Qe=Dn(),ze=a(Qe),et,Ie=s(ze);f(()=>{et!==(et=e(Me))&&(ze.value=(ze.__value=e(Me))==null?"":e(Me)),b(Ie,` ${ya[e(Me)]??""}`)}),Ft(o,[],ze,()=>(e(Me),e(n).spellCategories),Pe=>ye(n,e(n).spellCategories=Pe)),V("dblclick",Qe,Pe=>ee(Pe,"spellCategories",e(Me))),r(Fe,Qe)}),V("click",fe,()=>g(["spellCategories"])),oe(3,w,()=>he,()=>({delay:0,duration:100})),r(h,w)};C(je,h=>{e(n).deckCardKinds.includes("Spell")&&h(We)})}var Ze=s(je,2);{var kt=h=>{var w=Mn(),O=a(w),fe=a(O),Ue=s(O,2);ce(Ue,5,()=>Ya,ue,(Fe,Me)=>{var Qe=Sn(),ze=a(Qe),et,Ie=s(ze);f(()=>{et!==(et=e(Me))&&(ze.value=(ze.__value=e(Me))==null?"":e(Me)),b(Ie,` ${ha[e(Me)]??""}`)}),Ft(q,[],ze,()=>(e(Me),e(n).trapCategories),Pe=>ye(n,e(n).trapCategories=Pe)),V("dblclick",Qe,Pe=>ee(Pe,"trapCategories",e(Me))),r(Fe,Qe)}),V("click",fe,()=>g(["trapCategories"])),oe(3,w,()=>he,()=>({delay:0,duration:100})),r(h,w)};C(Ze,h=>{e(n).deckCardKinds.includes("Trap")&&h(kt)})}var ot=s(Ze,2);{var Ge=h=>{var w=En(),O=a(w),fe=a(O),Ue=s(O,2);ce(Ue,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],ue,(Fe,Me)=>{var Qe=Tn(),ze=a(Qe),et,Ie=s(ze);f(()=>{et!==(et=Me.key)&&(ze.value=(ze.__value=Me.key)==null?"":Me.key),b(Ie,` ${Me.text??""}`)}),Ft(E,[],ze,()=>(Me.key,e(n).others),Pe=>ye(n,e(n).others=Pe)),r(Fe,Qe)}),V("click",fe,()=>g(["others"])),oe(3,w,()=>he,()=>({delay:0,duration:100})),r(h,w)};C(ot,h=>{M()||h(Ge)})}var st=s(v,2);{var it=h=>{var w=jn(),O=a(w);an(O,{get cardInfo(){return e(te)},onAttention:S,cardControlEventHandlers:de,get deckCardTree(){return e(re).cardTree},get refOnly(){return M()}}),r(h,w)};C(st,h=>{e(P)==="CardDetail"&&e(te)&&h(it)})}var mt=s(k,2),Tt=a(mt),Qt=a(Tt);gt(Qt,()=>na,h=>{var w=Bn();r(h,w)},(h,w)=>{var O=ke(),fe=U(O);gt(fe,()=>e(w).treePrms,Ue=>{var Fe=An();r(Ue,Fe)},(Ue,Fe)=>{za(Ue,{mode:"List",get allCardTree(){return e(Fe)},onAttention:S,get searchCondition(){return e(n)},cardControlEventHandlers:de,get deckCardTree(){return e(re).cardTree},set deckCardTree(Me){ye(re,e(re).cardTree=Me)},$$legacy:!0})}),r(h,O)});var Jt=s(mt,2);{var Zt=h=>{var w=On(),O=a(w);{var fe=Fe=>{var Me=ke(),Qe=U(Me);gt(Qe,()=>e(Y),ze=>{var et=Nn();r(ze,et)},(ze,et)=>{var Ie=Hn(),Pe=U(Ie),dt=a(Pe),vt=s(a(dt),2),ct=a(vt);f(()=>{e(H),Bt(()=>{e(et)})}),ce(ct,5,()=>e(et),ue,(be,Xe)=>{var tt=Ln(),at={},Ut=a(tt);f(()=>{at!==(at=e(Xe).id)&&(tt.value=(tt.__value=e(Xe).id)==null?"":e(Xe).id),b(Ut,e(Xe).name)}),r(be,tt)});var yt=s(dt,2),ht=s(a(yt),2),Et=a(ht),jt=s(yt,4),$t=s(a(jt),2),At=a($t),St=s($t,2),Ct=a(St),xt=s(St,2),Yt=a(xt),qt=s(jt,2),Kt=s(a(qt),2);gt(Kt,B,be=>{var Xe=qn();r(be,Xe)},(be,Xe)=>{var tt=Yn(),at=a(tt);f(Ut=>rt(at,"href",Ut),[()=>Mt.convertToObjectURL([e(Xe)])],se),r(be,tt)});var Wt=s(Kt,2);gt(Wt,()=>e(Q),be=>{var Xe=Pn();r(be,Xe)},(be,Xe)=>{var tt=Un(),at=a(tt);f(()=>rt(at,"href",e(Xe))),r(be,tt)});var pt=s(Wt,2),Ce=a(pt),Ee=s(Pe,2),Re=a(Ee);za(Re,{mode:"Deck",allCardTree:{ExtraMonster:[],Monster:[],Spell:[],Trap:[]},onAttention:S,cardControlEventHandlers:de,get deckCardTree(){return e(re).cardTree},set deckCardTree(be){ye(re,e(re).cardTree=be)},$$legacy:!0}),f(()=>Ye(Ee,`deck_editor_body_right_body ${(e(ge)?"can_drop":"")??""} svelte-1m129ml`)),It(ct,()=>e(H),be=>x(H,be)),V("change",ct,Le),Ot(Et,()=>e(re).name,be=>ye(re,e(re).name=be)),V("click",At,W),V("click",Ct,D),V("click",Yt,N),V("click",Ce,I),r(ze,Ie)}),r(Fe,Me)},Ue=Fe=>{var Me=Fn();r(Fe,Me)};C(O,Fe=>{e(X)==="DeckEdit"||R()==="wide"?Fe(fe):Fe(Ue,!1)})}V("click",w,()=>{x(X,"DeckEdit")}),V("focusin",w,()=>{x(X,"DeckEdit")}),r(h,w)};C(Jt,h=>{M()||h(Zt)})}var Nt=s(_e,2);{var wt=h=>{var w=In(),O=a(w);Za(O,{mode:"Dragging",get cardInfo(){return e(F).cardInfo},onAttention:S,cardControlEventHandlers:de}),f(()=>rt(w,"style",`position: fixed;
          top:${e(F).pos.clientY??""}px;
          left:${e(F).pos.clientX??""}px;
          z-index:3; 
          filter: opacity(0.8);
        	transform: translateX(-50%) translateY(-50%);`)),r(h,w)};C(Nt,h=>{e(F)&&h(wt)})}var Lt=s(Nt,2);fn(Lt,{modalController:T}),f((h,w,O)=>Ye(_e,`deck_editor
         screen_size_${h??""}
         left_pain_mode_${w??""}
         main_view_mode_${O??""}
         ${(e(F)?"dragging_card":"")??""}
          svelte-1m129ml`),[R,()=>e(P).toLowerCase(),()=>e(X).toLowerCase()],se),V("click",J,y),V("click",ae,()=>g(["name"])),Ot($e,()=>e(n).name,h=>ye(n,e(n).name=h)),V("click",Te,()=>g(["deckCardKinds"])),V("focusin",v,()=>{x(P,"SearchCondition"),x(X,"SearchCondition")}),V("click",v,()=>{x(P,"SearchCondition"),x(X,"SearchCondition")}),V("touchmove",_e,h=>e(F)&&de.onCardDragging(h,"Overlay")),V("mousemove",_e,h=>e(F)&&de.onCardDragging(h,"Overlay")),r(_,G),ft()}class Wn{constructor(){nt(this,"openMode");new URLSearchParams(window.location.search).get("mode")==="search"?this.openMode="CardSearch":this.openMode="Normal"}}const zn=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],Vn=3;var Xn=l('<input class="game_mode_radio svelte-sy4ydn" type="radio" name="game_mode"> <label> </label>',1),Gn=l('<option class="svelte-sy4ydn"> </option>'),Qn=l('<option class="svelte-sy4ydn"> </option>'),Jn=l('<option class="svelte-sy4ydn"> </option>'),Zn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_deck_selector" class="deck_selector svelte-sy4ydn"><option class="svelte-sy4ydn">デフォルト</option><!></select></div></td></tr>'),el=l('<option class="svelte-sy4ydn"> </option>'),tl=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">対戦相手：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select> <div class="svelte-sy4ydn"> </div></div></td></tr> <!> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">先攻後攻：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select></div></td></tr>',1),al=l('<option class="svelte-sy4ydn"> </option>'),rl=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-sy4ydn">難易度：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="difficulty_selector" class="difficulty_selector svelte-sy4ydn"></select></div></td></tr>'),sl=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label class="config_row_label svelte-sy4ydn" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"></div></td></tr> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="deck_selector" class="deck_selector svelte-sy4ydn"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">duel start!</button></div></td></tr>',1),il=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),nl=l('<tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">deck edit</button></div></td></tr>'),ll=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="duelist_name" class="config_row_label duelist_name svelte-sy4ydn">名前：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><input id="duelist_name" class="duelist_name svelte-sy4ydn" type="text"></div></td></tr> <!> <!>',1),ol=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),dl=l('<div class="app_body svelte-sy4ydn"><table class="config_table svelte-sy4ydn"><tbody><!></tbody></table></div> <div style="margin: 0.8rem;"><a>※※カード検索専用モード切り替え※※</a></div>',1),vl=l('<span class="svelte-sy4ydn"> </span> <span class="svelte-sy4ydn"> </span>',1),cl=l('<div class="result_title result_win svelte-sy4ydn">YOU WIN</div>'),_l=l('<div class="result_title result_lose svelte-sy4ydn">YOU LOSE</div>'),ul=l('<div class="result_title result_draw svelte-sy4ydn">DRAW</div>'),fl=l('<div class="twitter_share_button_wrapper svelte-sy4ydn"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-sy4ydn">X(twitter)でシェアする</a></div>'),ml=l('<div class="result svelte-sy4ydn"><!> <div class="reason_of_end svelte-sy4ydn"> </div> <!> <div class="svelte-sy4ydn"><button class="white_button svelte-sy4ydn">TOPへ戻る</button></div></div>'),pl=l('<main style="flex-direction: column; display :flex" class="svelte-sy4ydn"><div class="link link_left svelte-sy4ydn"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-sy4ydn">posfie(toggeter)</a></div> <div class="link link_right svelte-sy4ydn"><a class="a_button svelte-sy4ydn" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">現時点とこの先のこと</a></div> <!> <div class="footer card_summary svelte-sy4ydn"><!></div> <div class="footer debug_info svelte-sy4ydn"><span class="svelte-sy4ydn"> </span> <span class="user_agent_info svelte-sy4ydn"> </span> <span class="screen_info svelte-sy4ydn"> </span></div> <!></main>');function gl(_,i){_t(i,!1);const t=new xr("stk_ygo_svelte",Vn,zn),d=new Wn;let m=ne(0),p=ne(0),c=ne(),o=ne("FtkChallenge"),q=ne(d.openMode==="CardSearch"?"DeckEdit":"None"),E=ne(0),M=ne(""),T=ne(void 0);const L="https://setta238.github.io/stk_ygo_svelte/",n="遊戯王deそりてあ",X="ninja_no",P=Dr.getOrCreateNew(t).then(k=>(x(o,Fa.includes(k.previousGameMode)?k.previousGameMode:"FtkChallenge"),xe(k.previousNpcId),k)),y=k=>{var u;const v=k.find($=>$.lastUsedAt.getTime()===Math.max(...k.map(J=>J.lastUsedAt.getTime())))??k[0];x(E,v.id),e(o)==="FtkChallenge"&&v.deckType!=="Preset"&&x(E,((u=zt.find($=>$.deckType==="Preset"))==null?void 0:u.id)??e(E))};let g=ne(Mt.getAllDeckInfo(t).then(k=>(Promise.all(k.filter(v=>!v.lastUsedAt).map(v=>{v.saveDeckInfo()})),y(k),k)));const F=async()=>{const k=e(E);let v=(await e(g)).find($=>$.id===k)??(await ge()).find($=>$.id===k);v&&await v.updateTimestamp();let u=v;if(u||(u=zt.find($=>$.id===k)),!u)throw new Error("illegal state");return u},Z=async()=>{(await P).save({previousGameMode:e(o)})},ge=()=>(x(g,Mt.getAllDeckInfo(t).then(k=>(y(k),k))),e(g)),A=async()=>{(await e(g)).length||(await Mt.prepareSampleDeck(),ge())},j=async()=>{await Promise.all([Z(),A()]);const k=await F(),v=await P;let u=ea.find(z=>z.id===Number.MIN_SAFE_INTEGER)??ea[0],$=zt.find(z=>z.id===Number.MIN_SAFE_INTEGER)??zt[0],J="PlayFirst";e(o)==="FtkChallenge"?u=ea.filter(z=>z.npcType==="FtkChallenge").find(z=>z.difficulty===v.previousDifficulty)??u:e(o)==="Free"&&(u=ea.find(z=>z.id===v.previousNpcId)??u,$=zt.slice(-1)[0],J=v.previousStartMode),u.npcType!=="FtkChallenge"&&v.previousNpcDeckId>-1?$=(await e(g)).find(z=>z.id===v.previousNpcDeckId)??$:$=zt.find(z=>z.id===u.id)??$,x(c,new Tr(v,"Player",k,[],u,"NPC",$,[],J)),e(c).onDuelEnd.append(()=>(x(c,e(c)),"RemoveMe"))},ve=async()=>{await Promise.all([Z(),A()]),x(q,"DeckEdit")},Be=async k=>{await Z(),k.key==="Enter"&&!k.repeat&&(await P).save()},Se=()=>{if(d.openMode==="CardSearch"){window.location.assign(window.location.origin+window.location.pathname);return}x(g,ge()),x(c,void 0),x(q,"None")};let de=Date.now();const ee=k=>{Date.now()-de<200||(de=Date.now(),x(o,k),ge())},Le=k=>{xe(Number(k.currentTarget.value))},xe=k=>{var v;x(T,ea.find(u=>u.id===k)),x(M,((v=e(T))==null?void 0:v.description)??"")};A(),ut();var H=pl(),Y=s(a(H),2),Q=a(Y),me=s(Y,2);{var re=k=>{var v=ke(),u=U(v);gt(u,()=>P,null,($,J)=>{$i($,{get duel(){return e(c)},get userProfile(){return e(J)}})}),r(k,v)},te=k=>{var v=ke(),u=U(v);{var $=z=>{const pe=se(()=>d.openMode==="CardSearch");Kn(z,{get refOnly(){return e(pe)}})},J=z=>{var pe=dl(),le=U(pe),ie=a(le),ae=a(ie),qe=a(ae);gt(qe,()=>P,Ne=>{var Te=ol();r(Ne,Te)},(Ne,Te)=>{var Ke=ll(),Ve=U(Ke),Je=a(Ve),He=a(Je),we=s(Je),je=a(we),We=a(je),Ze=s(Ve,2);gt(Ze,()=>e(g),Ge=>{var st=il();r(Ge,st)},(Ge,st)=>{var it=sl(),mt=U(it),Tt=a(mt),Qt=a(Tt),Jt=s(Tt),Zt=a(Jt);ce(Zt,5,()=>Fa,ue,(Ie,Pe)=>{var dt=Xn(),vt=U(dt),ct=s(vt,2),yt=a(ct);f(ht=>{rt(vt,"id",`game_mode_radio_${ht??""}`),Sr(vt,e(Pe)),Mr(vt,e(o)===e(Pe)),Ye(ct,`game_mode_tab_label game_mode_tab_${ht??""} svelte-sy4ydn`),rt(ct,"for",`game_mode_radio_${ht??""}`),b(yt,e(Pe))},[()=>e(Pe).toLowerCase()],se),V("change",vt,()=>ee(e(Pe))),r(Ie,dt)});var Nt=s(mt,2),wt=a(Nt),Lt=a(wt),h=s(wt),w=a(h),O=a(w);f(()=>{e(E),Bt(()=>{e(o),e(st)})}),ce(O,5,()=>e(o)==="FtkChallenge"?zt.filter(Ie=>Ie.deckType==="Preset"):e(st),ue,(Ie,Pe)=>{var dt=Gn(),vt={},ct=a(dt);f(()=>{vt!==(vt=e(Pe).id)&&(dt.value=(dt.__value=e(Pe).id)==null?"":e(Pe).id),b(ct,e(Pe).name)}),r(Ie,dt)});var fe=s(Nt,2);{var Ue=Ie=>{var Pe=tl(),dt=U(Pe),vt=a(dt),ct=a(vt),yt=s(vt),ht=a(yt),Et=a(ht);f(()=>{e(Te),Bt(()=>{})}),ce(Et,5,()=>ea,ue,(pt,Ce)=>{var Ee=Qn(),Re={},be=a(Ee);f(()=>{Re!==(Re=e(Ce).id)&&(Ee.value=(Ee.__value=e(Ce).id)==null?"":e(Ce).id),b(be,e(Ce).name)}),r(pt,Ee)});var jt=s(Et,2),$t=a(jt),At=s(dt,2);{var St=pt=>{var Ce=Zn(),Ee=a(Ce),Re=a(Ee),be=s(Ee),Xe=a(be),tt=a(Xe);f(()=>{e(Te),Bt(()=>{e(st)})});var at=a(tt);at.value=(at.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Ut=s(at);ce(Ut,1,()=>e(st),ue,(ba,da)=>{var va=Jn(),ja={},er=a(va);f(()=>{ja!==(ja=e(da).id)&&(va.value=(va.__value=e(da).id)==null?"":e(da).id),b(er,e(da).name)}),r(ba,va)}),oe(3,Re,()=>he,()=>({duration:200})),oe(3,Ee,()=>he,()=>({duration:200})),It(tt,()=>e(Te).previousNpcDeckId,ba=>e(Te).previousNpcDeckId=ba),oe(3,Xe,()=>he,()=>({duration:200})),oe(3,be,()=>he,()=>({duration:200})),oe(3,Ce,()=>he,()=>({duration:200})),r(pt,Ce)};C(At,pt=>{var Ce;((Ce=e(T))==null?void 0:Ce.npcType)!=="FtkChallenge"&&pt(St)})}var Ct=s(At,2),xt=a(Ct),Yt=a(xt),qt=s(xt),Kt=a(qt),Wt=a(Kt);f(()=>{e(Te),Bt(()=>{})}),ce(Wt,5,()=>Xt(Oa),ue,(pt,Ce)=>{var Ee=el(),Re={},be=a(Ee);f(()=>{Re!==(Re=e(Ce))&&(Ee.value=(Ee.__value=e(Ce))==null?"":e(Ce)),b(be,Oa[e(Ce)])}),r(pt,Ee)}),f(()=>b($t,`※${e(M)??""}`)),oe(3,ct,()=>he,()=>({duration:200})),oe(3,vt,()=>he,()=>({duration:200})),V("change",Et,Le),It(Et,()=>e(Te).previousNpcId,pt=>e(Te).previousNpcId=pt),oe(3,ht,()=>he,()=>({duration:200})),oe(3,yt,()=>he,()=>({duration:200})),oe(3,dt,()=>he,()=>({duration:200})),oe(3,Yt,()=>he,()=>({duration:200})),oe(3,xt,()=>he,()=>({duration:200})),It(Wt,()=>e(Te).previousStartMode,pt=>e(Te).previousStartMode=pt),oe(3,Kt,()=>he,()=>({duration:200})),oe(3,qt,()=>he,()=>({duration:200})),oe(3,Ct,()=>he,()=>({duration:200})),r(Ie,Pe)},Fe=Ie=>{var Pe=ke(),dt=U(Pe);{var vt=ct=>{var yt=rl(),ht=a(yt),Et=a(ht),jt=s(ht),$t=a(jt),At=a($t);f(()=>{e(Te),Bt(()=>{})}),ce(At,5,()=>Er,ue,(St,Ct)=>{var xt=al(),Yt={},qt=a(xt);f(()=>{Yt!==(Yt=e(Ct))&&(xt.value=(xt.__value=e(Ct))==null?"":e(Ct)),b(qt,e(Ct))}),r(St,xt)}),oe(3,Et,()=>he,()=>({duration:200})),oe(3,ht,()=>he,()=>({duration:200})),It(At,()=>e(Te).previousDifficulty,St=>e(Te).previousDifficulty=St),oe(3,$t,()=>he,()=>({duration:200})),oe(3,jt,()=>he,()=>({duration:200})),oe(3,yt,()=>he,()=>({duration:200})),r(ct,yt)};C(dt,ct=>{e(o)==="FtkChallenge"&&ct(vt)},!0)}r(Ie,Pe)};C(fe,Ie=>{e(o)==="Free"?Ie(Ue):Ie(Fe,!1)})}var Me=s(fe,2),Qe=a(Me),ze=a(Qe),et=a(ze);oe(3,Qt,()=>he,()=>({duration:200})),oe(3,Tt,()=>he,()=>({duration:200})),oe(3,Zt,()=>he,()=>({duration:200})),oe(3,Jt,()=>he,()=>({duration:200})),oe(3,mt,()=>he,()=>({duration:200})),oe(3,Lt,()=>he,()=>({duration:200})),oe(3,wt,()=>he,()=>({duration:200})),It(O,()=>e(E),Ie=>x(E,Ie)),oe(3,w,()=>he,()=>({duration:200})),oe(3,h,()=>he,()=>({duration:200})),oe(3,Nt,()=>he,()=>({duration:200})),V("click",et,j),oe(3,ze,()=>he,()=>({duration:200})),r(Ge,it)});var kt=s(Ze,2);{var ot=Ge=>{var st=nl(),it=a(st),mt=a(it),Tt=a(mt);V("click",Tt,ve),oe(3,mt,()=>he,()=>({duration:200})),oe(3,it,()=>he,()=>({duration:200})),oe(3,st,()=>he,()=>({duration:200})),r(Ge,st)};C(kt,Ge=>{e(o)==="Free"&&Ge(ot)})}oe(3,He,()=>he,()=>({duration:200})),oe(3,Je,()=>he,()=>({duration:200})),Ot(We,()=>e(Te).name,Ge=>e(Te).name=Ge),V("keypress",We,Be),oe(3,je,()=>he,()=>({duration:200})),oe(3,we,()=>he,()=>({duration:200})),oe(3,Ve,()=>he,()=>({duration:200})),r(Ne,Ke)});var $e=s(le,2),Oe=a($e);rt(Oe,"href",`${window.location.origin+window.location.pathname}?mode=search`),r(z,pe)};C(u,z=>{e(q)==="DeckEdit"?z($):z(J,!1)},!0)}r(k,v)};C(me,k=>{e(c)?k(re):k(te,!1)})}var K=s(me,2),S=a(K);gt(S,()=>na,k=>{var v=lt("読み込み中");r(k,v)},(k,v)=>{var u=vl(),$=U(u),J=a($),z=s($,2),pe=a(z);f((le,ie,ae)=>{b(J,`公式DB上のカード${le??""}枚`),b(pe,`実装済カード（効果あり）${ie??""}枚 （効果なし）${ae??""}枚`)},[()=>e(v).knmCount.toLocaleString(),()=>e(v).definitionCount.toLocaleString(),()=>e(v).nonDefinitionCount.toLocaleString()],se),r(k,u)});var B=s(K,2),W=a(B),D=a(W),N=s(W,2),I=a(N),R=s(N,2),G=a(R),_e=s(B,2);{var De=k=>{var v=ml(),u=a(v);{var $=$e=>{var Oe=ke(),Ne=U(Oe);{var Te=Ve=>{var Je=cl();r(Ve,Je)},Ke=Ve=>{var Je=ke(),He=U(Je);{var we=je=>{var We=_l();r(je,We)};C(He,je=>{e(c).winner.seat==="Above"&&je(we)},!0)}r(Ve,Je)};C(Ne,Ve=>{e(c).winner.seat==="Below"?Ve(Te):Ve(Ke,!1)})}r($e,Oe)},J=$e=>{var Oe=ul();r($e,Oe)};C(u,$e=>{e(c).winner?$e($):$e(J,!1)})}var z=s(u,2),pe=a(z),le=s(z,2);{var ie=$e=>{var Oe=fl(),Ne=a(Oe);f(()=>rt(Ne,"href",`https://x.com/share?url=${L}&text=${e(c).twitterShareText??""}&hashtags=${n}&via=${X}`)),r($e,Oe)};C(le,$e=>{e(c).twitterShareText&&$e(ie)})}var ae=s(le,2),qe=a(ae);f(()=>b(pe,e(c).reasonOfEnd)),V("click",qe,Se),oe(3,v,()=>Br,()=>({delay:200,duration:200})),r(k,v)};C(_e,k=>{e(c)&&e(c).isEnded&&k(De)})}f(()=>{b(D,"build at: 20260211_154211"),b(I,$r.text),b(G,`w:${e(m)??""}px h:${e(p)??""}px`)}),ua("innerWidth",k=>x(m,k)),ua("innerHeight",k=>x(p,k)),V("click",Q,Se),r(_,H),ft()}jr(gl,{target:document.getElementById("app")});
