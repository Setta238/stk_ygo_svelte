var Za=Object.defineProperty;var ja=f=>{throw TypeError(f)};var er=(f,i,t)=>i in f?Za(f,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):f[i]=t;var nt=(f,i,t)=>er(f,typeof i!="symbol"?i+"":i,t),Aa=(f,i,t)=>i.has(f)||ja("Cannot "+t);var ft=(f,i,t)=>(Aa(f,i,"read from private field"),t?t.call(f):i.get(f)),la=(f,i,t)=>i.has(f)?ja("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(f):i.set(f,t),ka=(f,i,t,o)=>(Aa(f,i,"write to private field"),o?o.call(f,t):i.set(f,t),t);import{s as Ba,r as tr,a as C,b as ar,l as rr,g as e,d as za,p as ct,c as Ae,m as oe,i as _t,t as l,e as a,f as w,h as p,j as le,k as Be,n as rt,o as X,q as r,u as ut,v as we,D as sr,w as De,x as P,y as s,z as ue,A as Vt,B as de,C as fe,E as b,F as ir,G as at,H as Xt,I as nr,J as Va,K as ea,L as ca,M as $a,N as oa,O as wa,P as Kt,Q as mt,R as Sa,S as ga,T as Ma,U as da,V as _a,W as Xa,X as ya,Y as ha,Z as lr,_ as or,$ as dr,a0 as vr,a1 as cr,a2 as _r,a3 as ur,a4 as ua,a5 as Ga,a6 as ta,a7 as Qa,a8 as fa,a9 as Lt,aa as fr,ab as mr,ac as aa,ad as pr,ae as Dt,af as gr,ag as yr,ah as hr,ai as La,aj as Ya,ak as qa,al as Ua,am as Ha,an as Pa,ao as br,ap as Et,aq as It,ar as Ot,as as kr,at as Rt,au as wr,av as Cr,aw as Na,ax as Zt,ay as zt,az as xr,aA as Dr,aB as $r,aC as Fa,aD as Sr,aE as Mr,aF as Tr}from"../chunk/entity_proc_20260125_214327.js";import"../chunk/json_20260125_214327.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))o(g);new MutationObserver(g=>{for(const v of g)if(v.type==="childList")for(const _ of v.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&o(_)}).observe(document,{childList:!0,subtree:!0});function t(g){const v={};return g.integrity&&(v.integrity=g.integrity),g.referrerPolicy&&(v.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?v.credentials="include":g.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function o(g){if(g.ep)return;g.ep=!0;const v=t(g);fetch(g.href,v)}})();const Er=f=>f;function Ta(f){const i=f-1;return i*i*i+1}function Ia(f){const i=typeof f=="string"&&f.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[f,"px"]}function jr(f,{delay:i=0,duration:t=400,easing:o=Er}={}){const g=+getComputedStyle(f).opacity;return{delay:i,duration:t,easing:o,css:v=>`opacity: ${v*g}`}}function Ar(f,{delay:i=0,duration:t=400,easing:o=Ta,x:g=0,y:v=0,opacity:_=0}={}){const d=getComputedStyle(f),B=+d.opacity,A=d.transform==="none"?"":d.transform,S=B*(1-_),[M,n]=Ia(g),[L,z]=Ia(v);return{delay:i,duration:t,easing:o,css:(O,c)=>`
			transform: ${A} translate(${(1-O)*M}${n}, ${(1-O)*L}${z});
			opacity: ${B-S*c}`}}function Ce(f,{delay:i=0,duration:t=400,easing:o=Ta,axis:g="y"}={}){const v=getComputedStyle(f),_=+v.opacity,d=g==="y"?"height":"width",B=parseFloat(v[d]),A=g==="y"?["top","bottom"]:["left","right"],S=A.map(y=>`${y[0].toUpperCase()}${y.slice(1)}`),M=parseFloat(v[`padding${S[0]}`]),n=parseFloat(v[`padding${S[1]}`]),L=parseFloat(v[`margin${S[0]}`]),z=parseFloat(v[`margin${S[1]}`]),O=parseFloat(v[`border${S[0]}Width`]),c=parseFloat(v[`border${S[1]}Width`]);return{delay:i,duration:t,easing:o,css:y=>`overflow: hidden;opacity: ${Math.min(y*20,1)*_};${d}: ${y*B}px;padding-${A[0]}: ${y*M}px;padding-${A[1]}: ${y*n}px;margin-${A[0]}: ${y*L}px;margin-${A[1]}: ${y*z}px;border-${A[0]}-width: ${y*O}px;border-${A[1]}-width: ${y*c}px;min-${d}: 0`}}function Oa(f,i){for(const t in i)f[t]=i[t];return f}function Br({fallback:f,...i}){const t=new Map,o=new Map;function g(_,d,B){const{delay:A=0,duration:S=Y=>Math.sqrt(Y)*30,easing:M=Ta}=Oa(Oa({},i),B),n=_.getBoundingClientRect(),L=d.getBoundingClientRect(),z=n.left-L.left,O=n.top-L.top,c=n.width/L.width,y=n.height/L.height,V=Math.sqrt(z*z+O*O),te=getComputedStyle(d),$e=te.transform==="none"?"":te.transform,E=+te.opacity;return{delay:A,duration:typeof S=="function"?S(V):S,easing:M,css:(Y,ce)=>`
			   opacity: ${Y*E};
			   transform-origin: top left;
			   transform: ${$e} translate(${ce*z}px,${ce*O}px) scale(${Y+(1-Y)*c}, ${Y+(1-Y)*y});
		   `}}function v(_,d,B){return(A,S)=>(_.set(S.key,A),()=>{if(d.has(S.key)){const M=d.get(S.key);return d.delete(S.key),g(M,A,S)}return _.delete(S.key),f&&f(A,S,B)})}return[v(o,t,!1),v(t,o,!0)]}function Ra(f){return Object.prototype.toString.call(f)==="[object Date]"}function Lr(f){return f}function Ca(f){const i=f-1;return i*i*i+1}function xa(f,i){if(f===i||f!==f)return()=>f;const t=typeof f;if(t!==typeof i||Array.isArray(f)!==Array.isArray(i))throw new Error("Cannot interpolate values of different type");if(Array.isArray(f)){const o=i.map((g,v)=>xa(f[v],g));return g=>o.map(v=>v(g))}if(t==="object"){if(!f||!i)throw new Error("Object cannot be null");if(Ra(f)&&Ra(i)){const v=f.getTime(),d=i.getTime()-v;return B=>new Date(v+B*d)}const o=Object.keys(i),g={};return o.forEach(v=>{g[v]=xa(f[v],i[v])}),v=>{const _={};return o.forEach(d=>{_[d]=g[d](v)}),_}}if(t==="number"){const o=i-f;return g=>f+g*o}return()=>i}var Yt,ra,va,Gt;const Ea=class Ea{constructor(i,t={}){la(this,Yt,Ba(void 0));la(this,ra,Ba(void 0));la(this,va);la(this,Gt,null);ft(this,Yt).v=ft(this,ra).v=i,ka(this,va,t)}static of(i,t){const o=new Ea(i(),t);return tr(()=>{o.set(i())}),o}set(i,t){var M;C(ft(this,ra),i);let{delay:o=0,duration:g=400,easing:v=Lr,interpolate:_=xa}={...ft(this,va),...t};if(g===0)return(M=ft(this,Gt))==null||M.abort(),C(ft(this,Yt),i),Promise.resolve();const d=ar.now()+o;let B,A=!1,S=ft(this,Gt);return ka(this,Gt,rr(n=>{if(n<d)return!0;if(!A){A=!0;const z=ft(this,Yt).v;B=_(z,i),typeof g=="function"&&(g=g(z,i)),S==null||S.abort()}const L=n-d;return L>g?(C(ft(this,Yt),i),!1):(C(ft(this,Yt),B(v(L/g))),!0)})),ft(this,Gt).promise}get current(){return e(ft(this,Yt))}get target(){return e(ft(this,ra))}set target(i){this.set(i)}};Yt=new WeakMap,ra=new WeakMap,va=new WeakMap,Gt=new WeakMap;let ma=Ea;var Yr=l('<div class="phase_display svelte-1boxe40"><span class="svelte-1boxe40"> </span> </div>'),qr=l('<div class="lifepoint_display svelte-1boxe40"><div class="svelte-1boxe40"> </div> <div class="svelte-1boxe40"> </div></div>'),Ur=(f,i,t)=>i(e(t)),Hr=l('<div class="svelte-1boxe40"><button class="phase_button svelte-1boxe40"> </button></div>'),Pr=l("<div><!></div>"),Nr=l('<div class="svelte-1boxe40"><!></div>'),Fr=l("<div><!></div>"),Ir=l('<div class="config_button_wrapper svelte-1boxe40"><button id="config_button" class="svelte-1boxe40">⚙</button></div>'),Or=l("<!> <!> <!> <!>",1),Rr=l('<div style="position: absolute;" class="card_animation_receiver svelte-1boxe40"><!></div>'),Kr=l('<div style="position: absolute; top:0rem" class="svelte-1boxe40">｛効果対象｝</div>'),Wr=l('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),zr=l(" <!> 】",1),Vr=l('<div style="position: absolute; bottom:0rem" class="svelte-1boxe40"> <!></div>'),Xr=l("<!> <!>",1),Gr=l('<div class="badge svelte-1boxe40"> </div>'),Qr=l('<div class="card_animation_receiver svelte-1boxe40"><!></div>'),Jr=l("<!> <!> <!> <!>",1),Zr=l('<td><div role="listitem"><!></div></td>');function es(f,i){ct(i,!1);let t=Ae(i,"view",12),o=Ae(i,"row",8),g=Ae(i,"column",8),v=Ae(i,"selectedEntities",28,()=>[]),_=Ae(i,"selectedCells",28,()=>[]),d=oe(t().getCell(o(),g())),B=oe(new ma(e(d).field.duel.duelists.Above.lp,{duration:400,easing:Ca})),A=oe(new ma(e(d).field.duel.duelists.Below.lp,{duration:400,easing:Ca}));const S=()=>{C(d,t().getCell(o(),g())),we(B,e(B).target=e(d).field.duel.duelists.Above.lp),we(A,e(A).target=e(d).field.duel.duelists.Below.lp)};e(d).onUpdate.append(S),t().onDuelUpdate.append(S),t().modalController.onUpdate.append(S);let M,n=oe([]),L=()=>console.log("hoge"),z,O=oe([]),c=oe(!1),y=oe(!1),V=!1;const te=$=>{var Q,F;C(ie,[]),v().reset(),M=$.activator,L=$.resolve,C(n,$.dummyActionInfos),C(O,$.chainBlockInfos.flatMap(R=>R.selectedEntities).getDistinct()),z=$.entitiesChoices,C(c,!1),C(y,((Q=$.cellsChoices)==null?void 0:Q.selectables.includes(e(d)))??!1),V=e(y)&&((F=$.cellsChoices)==null?void 0:F.qty)===1,S()};t().onWaitStart.append(te);const $e=()=>{M=void 0,C(n,[]),L=()=>{console.log("hoge")},z=void 0,C(O,[]),C(c,!1),C(y,!1),V=!1};t().onWaitEnd.append($e);let E=oe(!1),Y=[];const ce=$=>{Y=$.filter(Q=>Q.dests.includes(e(d))),C(E,Y.length>0),S()},Me=()=>{Y=[],C(E,!1),S()};t().onDragStart.append(ce),t().onDragEnd.append(Me);const[xe,ve]=ui;let ie=oe([]);const je=$=>{if(M=void 0,e(d)===$.to||e(d).entities.includes($.entity)){C(ie,[...e(ie),$]);const Q=$.resolve;C(d,e(d)),setTimeout(()=>{C(ie,e(ie).filter(F=>F!==$)),$.count++,$.count>1&&Q()},600)}};t().onAnimation.append(je);const ge=$=>{L({phaseChange:$})},U=()=>e(d).isStackCell&&e(d).entities.flatMap($=>$.actions).filter($=>e(n).map(Q=>Q.action.seq).some(Q=>Q===$.seq)).length>0,N=$=>{var Q;if(((Q=$.target)==null?void 0:Q.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),V)L({selectedCells:[e(d)]});else if(e(y))C(c,!e(c)),_(e(c)?[..._(),e(d)]:_().filter(F=>F!==e(d)));else if(e(d).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(d),!0),t().requireUpdate();const F=e(d).entities.flatMap(W=>W.actions).map(W=>W.seq),R=e(n).filter(W=>F.includes(W.action.seq));if(R.length){if(!M)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:M,dummyActionInfos:R,cancelable:!0}).then(W=>{W&&L({actionInfo:W})});return}}t().requireUpdate(),console.info(e(d),Te(...e(d).visibleEntities))},G=$=>{$.preventDefault(),$.dataTransfer&&($.dataTransfer.dropEffect="move")},J=$=>{$.preventDefault(),console.info("drop",$,e(E),Y),$.dataTransfer&&($.dataTransfer.dropEffect="move");try{if(e(E)&&Y){if(Y.length===1){const Q=Y[0];L({actionInfo:{...Q,dest:e(d)}})}else if(Y.length>1){if(!M)throw new sr("想定されない状態");e(d).field.duel.view.modalController.terminateAll(),e(d).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:M,dummyActionInfos:Y.map(Q=>({...Q,dest:e(d)})),cancelable:!1}).then(Q=>{L({actionInfo:Q})})}}}finally{t().removeDraggingActions()}},Te=(...$)=>{if(t().waitMode==="Animation")return"Disabled";if(z&&z.selectables.find(F=>$.find(R=>F===R)))return"Selectable";if(!e(n)||e(n).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(F=>F.state==="Shown"))return"Disabled";const Q=e(n).filter(F=>$.includes(F.action.entity));return Q.length===0?"Disabled":e(d).isStackCell||Q[0].action.entity!==$[0]?"Clickable":Q.some(F=>F.dests.length)?"Draggable":"Clickable"};_t();var se=Zr(),I=a(se);I.__click=N;var D=a(I);{var q=$=>{var Q=De(),F=P(Q);{var R=W=>{var ye=De(),T=P(ye);{var x=m=>{var j=Yr(),H=a(j),me=a(H),he=s(H,1,!0);p((_e,ne)=>{b(me,_e),b(he,ne)},[()=>String(e(d).field.duel.clock.turn).padStart(2,"0"),()=>e(d).field.duel.phase.toUpperCase()],le),r(m,j)},u=m=>{var j=De(),H=P(j);{var me=_e=>{var ne=qr(),re=a(ne),ae=a(re),Se=s(re,2),Re=a(Se);p((Ie,Ke)=>{b(ae,Ie),b(Re,Ke)},[()=>Math.floor(e(B).current),()=>Math.floor(e(A).current)],le),r(_e,ne)},he=_e=>{var ne=De(),re=P(ne);{var ae=Se=>{var Re=De(),Ie=P(Re);{var Ke=Ue=>{var Ge=De(),lt=P(Ge);{var qe=ke=>{var Le=De(),He=P(Le);ue(He,1,()=>t().duel.nextPhaseList,fe,(We,st)=>{var Xe=Hr(),et=a(Xe);et.__click=[Ur,ge,st];var $t=a(et);p(vt=>b($t,vt),[()=>e(st).toUpperCase()],le),r(We,Xe)}),r(ke,Le)};w(lt,ke=>{t().duel.isEnded||ke(qe)})}r(Ue,Ge)};w(Ie,Ue=>{t().waitMode==="Free"&&Ue(Ke)})}r(Se,Re)};w(re,Se=>{e(d).column===5&&Se(ae)},!0)}r(_e,ne)};w(H,_e=>{e(d).column===3?_e(me):_e(he,!1)},!0)}r(m,j)};w(T,m=>{e(d).column===1?m(x):m(u,!1)})}r(W,ye)};w(F,W=>{e(d).row===3&&W(R)})}r($,Q)},Z=$=>{var Q=De(),F=P(Q);{var R=ye=>{var T=Or();const x=le(()=>e(ie).find(ne=>ne.to===e(d)));var u=P(T);{var m=ne=>{var re=Pr(),ae=a(re);Vt(ae,{get entity(){return e(x).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),p(()=>Be(re,`card_animation_receiver ${e(d).cellType??""} svelte-1boxe40`)),de(1,re,()=>ve,()=>({key:e(x).entity.seq})),r(ne,re)};w(u,ne=>{e(x)&&e(x).index==="Top"&&ne(m)})}var j=s(u,2);ue(j,1,()=>e(d).visibleEntities,fe,(ne,re)=>{var ae=De(),Se=P(ae);{var Re=Ie=>{var Ke=Nr(),Ue=a(Ke);const Ge=le(()=>Te(e(re))),lt=le(()=>e(n).filter(qe=>qe.action.entity===e(re)));Vt(Ue,{get entity(){return e(re)},get state(){return e(Ge)},get dummyActionInfos(){return e(lt)},cardActionResolve:void 0,get selectedList(){return v()},set selectedList(qe){v(qe)},$$legacy:!0}),de(2,Ke,()=>xe,()=>({key:e(re).seq})),r(Ie,Ke)};w(Se,Ie=>{e(ie).every(Ke=>Ke.entity.seq!==e(re).seq)&&Ie(Re)})}r(ne,ae)});var H=s(j,2);{var me=ne=>{var re=Fr(),ae=a(re);Vt(ae,{get entity(){return e(x).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),p(()=>Be(re,`card_animation_receiver ${e(d).cellType??""} svelte-1boxe40`)),de(1,re,()=>ve,()=>({key:e(x).entity.seq})),r(ne,re)};w(H,ne=>{e(x)&&e(x).index!=="Top"&&ne(me)})}var he=s(H,2);{var _e=ne=>{var re=Ir();r(ne,re)};w(he,ne=>{e(d).owner.seat==="Below"&&ne(_e)})}r(ye,T)},W=ye=>{var T=Jr();const x=le(()=>e(ie).find(re=>re.to===e(d)));var u=P(T);{var m=re=>{var ae=Rr(),Se=a(ae);Vt(Se,{get entity(){return e(x).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),de(1,ae,()=>ve,()=>({key:e(x).entity.seq})),r(re,ae)};w(u,re=>{e(x)&&e(x).index!=="Top"&&re(m)})}var j=s(u,2);{var H=re=>{var ae=Xr(),Se=P(ae);ue(Se,1,()=>e(d).visibleEntities.map((Ke,Ue)=>({index:Ue,entity:Ke})).toReversed(),fe,(Ke,Ue)=>{var Ge=De(),lt=P(Ge);{var qe=ke=>{var Le=Wr();const He=le(()=>!e(d).isStackCell&&e(Ue).index===0?Te(...e(d).visibleEntities):void 0);var We=P(Le);{var st=vt=>{var St=Kr();r(vt,St)};w(We,vt=>{e(O).includes(e(Ue).entity)&&vt(st)})}var Xe=s(We,2),et=a(Xe);const $t=le(()=>e(Ue).index===0?e(n).filter(vt=>e(d).visibleEntities.includes(vt.action.entity)):void 0);Vt(et,{get entity(){return e(Ue).entity},get state(){return e(He)},get dummyActionInfos(){return e($t)},cardActionResolve:void 0,get selectedList(){return v()},set selectedList(vt){v(vt)},$$legacy:!0}),p(()=>Be(Xe,`duel_card_wrapper ${(e(Ue).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1boxe40`)),de(2,Xe,()=>xe,()=>({key:e(Ue).entity.seq})),r(ke,Le)};w(lt,ke=>{e(ie).every(Le=>Le.entity.seq!==e(Ue).entity.seq)&&ke(qe)})}r(Ke,Ge)});var Re=s(Se,2);{var Ie=Ke=>{var Ue=Vr(),Ge=a(Ue),lt=s(Ge);ue(lt,1,()=>Xt(e(d).visibleEntities[0].status.maxCounterQty),fe,(qe,ke)=>{var Le=zr(),He=P(Le),We=s(He);{var st=Xe=>{var et=at();p(()=>b(et,`/${e(d).visibleEntities[0].status.maxCounterQty[e(ke)]??""}`)),r(Xe,et)};w(We,Xe=>{(e(d).visibleEntities[0].status.maxCounterQty[e(ke)]??9999)<100&&Xe(st)})}p((Xe,et)=>b(He,`【
              ${Xe??""}${et??""} `),[()=>ir(e(ke)),()=>e(d).visibleEntities[0].counterHolder.getQty(e(ke))],le),r(qe,Le)}),p(()=>b(Ge,`【${e(d).visibleEntities[0].battlePositionName??""}】 `)),r(Ke,Ue)};w(Re,Ke=>{e(d).visibleEntities[0].battlePosition&&Ke(Ie)})}r(re,ae)};w(j,re=>{e(d).visibleEntities.length>0&&re(H)})}var me=s(j,2);{var he=re=>{var ae=Gr(),Se=a(ae);p(()=>b(Se,e(d).visibleEntities.length)),r(re,ae)};w(me,re=>{e(d).isStackCell&&re(he)})}var _e=s(me,2);{var ne=re=>{var ae=Qr(),Se=a(ae);Vt(Se,{get entity(){return e(x).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),de(1,ae,()=>ve,()=>({key:e(x).entity.seq})),r(re,ae)};w(_e,re=>{e(x)&&e(x).index==="Top"&&re(ne)})}r(ye,T)};w(F,ye=>{e(d).cellType==="Hand"?ye(R):ye(W,!1)},!0)}r($,Q)};w(D,$=>{e(d).isDisabledCell?$(q):$(Z,!1)})}p($=>{Be(se,`${`duel_field_cell duel_field_cell_${e(d).cellType} ${e(d).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1boxe40`),rt(se,"colspan",e(d).cellType==="Hand"?7:1),Be(I,`${$??""} svelte-1boxe40`)},[()=>`duel_field_cell_inner_box ${e(d).cellType} ${e(E)?"can_accept_drop":""} ${U()?"can_action":""} ${e(c)?"is_selected":e(y)?"is_selectable":""} `],le),X("dragover",I,G),X("drop",I,J),r(f,se),ut()}za(["click"]);const ts=(f,i,t=void 0,o="!!!circular reference!!!")=>{let g=[];return JSON.stringify(f,(v,_)=>{if(typeof _=="object"){if(g.indexOf(_)>-1)return o;g.push(_)}let d=_;if(i&&(d=i(v,_)),typeof d=="function")return d.toString();if(d!==_&&typeof d=="object"){if(g.indexOf(d)>-1)return o;g.push(d)}return d},t)};var as=l('<div class="title svelte-14z6bdh"> </div>'),rs=l('<div class="title svelte-14z6bdh"> </div>'),ss=l('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),is=l('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),ns=l("<div><!> <!></div>"),ls=l('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),os=l("<div><!> <!></div>"),ds=l("<div><!> <!></div>"),vs=l('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function cs(f,i){ct(i,!1);let t=oe(void 0),o=Ae(i,"log",8),g,v=oe([]);const _=()=>{const S=((g==null?void 0:g.seq)??-1)+1;o().records.slice(S).forEach(M=>{if(!g){C(v,[[[[M]]]]),g=M;return}if(!e(v)[M.clock.turn]){we(v,e(v)[M.clock.turn]=[[[M]]]),g=M;return}if(!e(v)[M.clock.turn][M.clock.phaseSeq]){we(v,e(v)[M.clock.turn][M.clock.phaseSeq]=[[M]]),g=M;return}if(g.clock.chainSeq===M.clock.chainSeq&&g.clock.chainBlockSeq===M.clock.chainBlockSeq&&g.duelist===M.duelist){e(v)[M.clock.turn][M.clock.phaseSeq].slice(-1)[0].push(M),g=M;return}e(v)[M.clock.turn][M.clock.phaseSeq].push([M]),g=M}),C(v,e(v)),nr().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};o().onUpdate.append(_),o().duel.view.onDuelUpdate.append(_),_(),_t();var d=De(),B=P(d);{var A=S=>{var M=vs(),n=s(a(M),2);ue(n,5,()=>e(v),fe,(L,z)=>{var O=ds(),c=a(O);{var y=te=>{var $e=as(),E=a($e);p(()=>b(E,`ターン：${e(z)[0][0][0].clock.turn??""}`)),r(te,$e)};w(c,te=>{e(z)[0][0][0].clock.turn>0&&te(y)})}var V=s(c,2);ue(V,1,()=>e(z),fe,(te,$e)=>{var E=os(),Y=a(E);{var ce=xe=>{var ve=rs(),ie=a(ve);p(()=>b(ie,e($e)[0][0].clock.period.name)),r(xe,ve)};w(Y,xe=>{e($e)[0][0].clock.turn>0&&xe(ce)})}var Me=s(Y,2);ue(Me,1,()=>e($e),fe,(xe,ve)=>{var ie=ls();const je=le(()=>{var se;return((se=e(ve).find(I=>I.chainNumber!==void 0))==null?void 0:se.chainNumber)??0});var ge=a(ie),U=a(ge),N=a(U),G=s(U,2);{var J=se=>{var I=ss(),D=a(I);p(()=>b(D,`チェーン：${e(je)??""}`)),r(se,I)};w(G,se=>{e(je)&&se(J)})}var Te=s(ge,2);ue(Te,1,()=>e(ve),fe,(se,I)=>{var D=ns(),q=a(D);{var Z=R=>{var W=at();p(()=>b(W,e(I).text)),r(R,W)},$=R=>{var W=De(),ye=P(W);{var T=u=>{var m=at();p((j,H,me)=>b(m,`移動：${j??""} ${H??""} ⇒ ${me??""}`),[()=>{var j;return(j=e(I).mainEntity)==null?void 0:j.toString()},()=>{var j;return(j=e(I).from)==null?void 0:j.toString()},()=>{var j;return(j=e(I).to)==null?void 0:j.toString()}],le),r(u,m)},x=u=>{var m=De(),j=P(m);{var H=he=>{var _e=at();p((ne,re)=>b(_e,`生成：${ne??""} void ⇒ ${re??""}`),[()=>{var ne;return(ne=e(I).mainEntity)==null?void 0:ne.toString()},()=>{var ne;return(ne=e(I).to)==null?void 0:ne.toString()}],le),r(he,_e)},me=he=>{var _e=De(),ne=P(_e);{var re=Se=>{var Re=at();p((Ie,Ke)=>b(Re,`消滅：${Ie??""} ${Ke??""} ⇒ void`),[()=>{var Ie;return(Ie=e(I).mainEntity)==null?void 0:Ie.toString()},()=>{var Ie;return(Ie=e(I).from)==null?void 0:Ie.toString()}],le),r(Se,Re)},ae=Se=>{var Re=at();p(()=>b(Re,e(I).text)),r(Se,Re)};w(ne,Se=>{e(I).type==="EntityDisappear"?Se(re):Se(ae,!1)},!0)}r(he,_e)};w(j,he=>{e(I).type==="EntityAppear"?he(H):he(me,!1)},!0)}r(u,m)};w(ye,u=>{e(I).type==="EntityMove"?u(T):u(x,!1)},!0)}r(R,W)};w(q,R=>{e(I).type==="ChainBlockHeader"?R(Z):R($,!1)})}var Q=s(q,2);{var F=R=>{var W=is(),ye=a(W);p(T=>rt(ye,"href",T),[()=>window.URL.createObjectURL(new Blob([ts(e(I).error,(T,x)=>["pool","bundles","duel"].includes(T)||typeof x=="function"?void 0:x,4)],{type:"text/plain"}))],le),r(R,W)};w(Q,R=>{e(I).error&&R(F)})}p(R=>Be(D,`duel_log_record duel_log_record_${R??""} svelte-14z6bdh`),[()=>e(I).type.toSnakeCase()],le),r(se,D)}),p(()=>{var se,I,D;Be(ie,`duel_log_block_duelist duel_log_block_duelist_${((se=e(ve)[0].duelist)==null?void 0:se.seat)??"system"} svelte-14z6bdh`),Be(U,`duelist ${((I=e(ve)[0].duelist)==null?void 0:I.seat)??""} svelte-14z6bdh`),b(N,((D=e(ve)[0].duelist)==null?void 0:D.profile.name)||"SYSTEM")}),r(xe,ie)}),p(()=>Be(E,`duel_log_block_phase duel_log_block_phase_${e($e)[0][0].clock.period.key??""} svelte-14z6bdh`)),r(te,E)}),p(()=>Be(O,`duel_log_block_turn duel_log_block_turn_${e(z)[0][0][0].clock.turn??""} svelte-14z6bdh`)),r(L,O)}),Va(n,L=>C(t,L),()=>e(t)),r(S,M)};w(B,S=>{(o().duel.view.infoBoardState==="Log"||o().duel.view.infoBoardState==="Default")&&S(A)})}r(f,d),ut()}var _s=l("<div><div> </div> <div> </div></div>");function Ka(f,i){ct(i,!1);let t=Ae(i,"duelist",12),o=oe(0),g=oe();const v=async()=>{const n=t().lp-e(o);if(!e(g)||Math.abs(n)<10){C(o,t().lp),e(g)&&(e(g)(),C(g,void 0));return}C(o,e(o)+Math.floor(Math.random()*n)),await ea(100),v()},_=()=>{t(t()),!e(g)&&t().lp!==e(o)&&new Promise(n=>{C(g,n),Math.abs(t().lp-e(o)),v()})};t().duel.log.onUpdate.append(_),v(),_t();var d=_s(),B=a(d),A=a(B),S=s(B,2),M=a(S);p(n=>{Be(d,`duelist duelist_${n??""} svelte-1sy3trd`),Be(B,`duelist_name duelist_${n??""}_name svelte-1sy3trd`),b(A,t().profile.name),Be(S,`duelist_lp ${(e(g)?"vibration":"")??""} svelte-1sy3trd`),b(M,e(o))},[()=>t().seat.toLowerCase()],le),r(f,d),ut()}const us=(f,i,t)=>(i(i()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),fs=(f,i,t)=>(i(i()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var ms=l('<div class="svelte-1uevs9j"> </div>'),ps=l('<div class="svelte-1uevs9j"> </div>'),gs=l('<div class="link_arrow_emoji svelte-1uevs9j"> </div>'),ys=l('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),hs=l('<div></div> <div class="svelte-1uevs9j"> </div>',1),bs=l("<div> </div>"),ks=l('<span class="svelte-1uevs9j">/</span> <div class="monster_defense svelte-1uevs9j"> </div>',1),ws=l("<div> </div>"),Cs=l('<div class="duel_card_info_row svelte-1uevs9j"><!> <!> <div style="flex-grow: 1;" class="svelte-1uevs9j"></div> <div class="monster_attack svelte-1uevs9j"> </div> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),xs=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),Ds=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),$s=l("<!> <!>",1),Ss=l('<pre class="description svelte-1uevs9j"> </pre>'),Ms=l('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),Ts=l('<pre class="description svelte-1uevs9j"> </pre>'),Es=l('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),js=l('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),As=l('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),Bs=l("[ <!> ],",1),Ls=l('<div class="svelte-1uevs9j"> <!></div>'),Ys=l('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),qs=l('<div class="svelte-1uevs9j"> </div>'),Us=l('<div class="svelte-1uevs9j"> </div>'),Hs=l('<div class="svelte-1uevs9j"> </div>'),Ps=l('<div class="svelte-1uevs9j"> </div>'),Ns=l('<div class="svelte-1uevs9j"> </div>'),Fs=l('<div class="svelte-1uevs9j"> </div>'),Is=l('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Os=l('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Rs=l('<div class="svelte-1uevs9j">※テスト用カードです</div>'),Ks=l('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),Ws=l('<a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a>'),zs=l('<div class="duel_card_info_links svelte-1uevs9j"><!> <!> <a target="_blank" rel="noopener noreferrer" title="google" class="svelte-1uevs9j">⇒google検索</a></div>'),Vs=l("<!> <!>",1),Xs=l('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><!> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Gs(f,i){ct(i,!1);let t=Ae(i,"entity",8),o=Ae(i,"mode",12,"Normal"),g=oe(new Promise(()=>{}));const v=()=>{var S,M;let A=t()&&t().entityType==="Card"?t().origin.cardId:(M=(S=t())==null?void 0:S.parent)==null?void 0:M.origin.cardId;return A??!1?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${A}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:""};ca(()=>(Kt(t()),wa),()=>{C(g,oa.then(async A=>{if(t().origin.description||t().origin.pendulumDescription||t().origin.wikiEncodedName)return t().origin;const S=A.getCardInfo(t().origin.name);if(S)return S.cardId!==void 0&&!S.description&&!S.pendulumDescription&&await wa([S.cardId]),S}))}),$a(),_t();var _=De(),d=P(_);{var B=A=>{var S=Xs();S.__click=[us,o,t],S.__contextmenu=[fs,o,t];var M=a(S),n=a(M),L=a(n),z=a(L),O=s(n,2),c=a(O);{var y=U=>{var N=ms(),G=a(N);p(J=>b(G,J),[()=>"★".repeat(t().lvl)],le),r(U,N)},V=U=>{var N=De(),G=P(N);{var J=se=>{var I=ps(),D=a(I);p(q=>b(D,q),[()=>"☆".repeat(t().rank)],le),r(se,I)},Te=se=>{var I=De(),D=P(I);{var q=Z=>{var $=gs(),Q=a($);p(F=>b(Q,F),[()=>t().origin.linkArrowKeys.map(F=>Xa[F].emoji).join("")],le),r(Z,$)};w(D,Z=>{t().origin.linkArrowKeys&&Z(q)},!0)}r(se,I)};w(G,se=>{t().rank&&t().rank>0?se(J):se(Te,!1)},!0)}r(U,N)};w(c,U=>{t().lvl&&t().lvl>0?U(y):U(V,!1)})}var te=s(c,2),$e=a(te),E=s(O,2);{var Y=U=>{var N=$s(),G=P(N);{var J=D=>{var q=ys(),Z=a(q),$=a(Z),Q=s(Z,2),F=a(Q);p(()=>{b($,`◀ ${t().psL??""}`),b(F,`${t().psR??""} ▶`)}),r(D,q)};w(G,D=>{var q;(q=t().origin.monsterCategories)!=null&&q.includes("Pendulum")&&D(J)})}var Te=s(G,2);{var se=D=>{var q=Cs(),Z=P(q),$=a(Z);ue($,1,()=>t().attr,fe,(x,u)=>{var m=hs(),j=P(m),H=s(j,2),me=a(H);p(()=>{Be(j,`monster_attr ${e(u)??""} svelte-1uevs9j`),b(me,`${Sa[e(u)]??""}属性`)}),r(x,m)});var Q=s($,2);ue(Q,1,()=>t().types,fe,(x,u)=>{var m=bs(),j=a(m);p(()=>{Be(m,`monster_cat ${e(u)??""} svelte-1uevs9j`),b(j,`${ga[e(u)]??""}${Ma[e(u)]??""}族`)}),r(x,m)});var F=s(Q,4),R=a(F),W=s(F,2);{var ye=x=>{var u=ks(),m=s(P(u),2),j=a(m);p(()=>b(j,t().def??"?")),r(x,u)};w(W,x=>{var u;(u=t().status.monsterCategories)!=null&&u.includes("Link")||x(ye)})}var T=s(Z,2);ue(T,5,()=>t().status.monsterCategories??[],fe,(x,u)=>{var m=ws(),j=a(m);p(()=>{Be(m,`monster_cat ${e(u)??""} svelte-1uevs9j`),b(j,`${da[e(u)]??""}${_a[e(u)]??""}`)}),r(x,m)}),p(()=>b(R,t().atk??"?")),r(D,q)},I=D=>{var q=De(),Z=P(q);{var $=F=>{var R=xs(),W=s(a(R),2),ye=a(W);p(()=>b(ye,`${ya[t().status.spellCategory]??""}魔法`)),r(F,R)},Q=F=>{var R=De(),W=P(R);{var ye=T=>{var x=Ds(),u=s(a(x),2),m=a(u);p(()=>b(m,`${ha[t().status.trapCategory]??""}罠`)),r(T,x)};w(W,T=>{t().kind==="Trap"&&t().status.trapCategory&&T(ye)},!0)}r(F,R)};w(Z,F=>{t().kind==="Spell"&&t().status.spellCategory?F($):F(Q,!1)},!0)}r(D,q)};w(Te,D=>{t().kind==="Monster"?D(se):D(I,!1)})}r(U,N)};w(E,U=>{o()!=="Debug"&&U(Y)})}var ce=s(M,2),Me=a(ce);{var xe=U=>{var N=Es(),G=P(N);{var J=I=>{var D=Ms(),q=a(D);mt(q,()=>e(g),Z=>{var $=at('"読み込み中"');r(Z,$)},(Z,$)=>{var Q=Ss(),F=a(Q);p(()=>{var R;return b(F,(R=e($))==null?void 0:R.pendulumDescription)}),r(Z,Q)}),r(I,D)};w(G,I=>{var D;(D=t().status.monsterCategories)!=null&&D.includes("Pendulum")&&I(J)})}var Te=s(G,2),se=a(Te);mt(se,()=>e(g),I=>{var D=at('"読み込み中"');r(I,D)},(I,D)=>{var q=Ts(),Z=a(q);p(()=>{var $;return b(Z,($=e(D))==null?void 0:$.description)}),r(I,q)}),r(U,N)},ve=U=>{var N=De(),G=P(N);{var J=se=>{var I=De(),D=P(I);{var q=Z=>{var $=As(),Q=s(a($),2);ue(Q,5,()=>t().actions,fe,(F,R)=>{var W=De();const ye=le(()=>e(R).actionCountUpperBound),T=le(()=>e(R).actionCount);var x=P(W);{var u=m=>{var j=js(),H=a(j),me=a(H),he=s(H,2),_e=a(he),ne=s(he,4),re=a(ne);p(()=>{b(me,e(R).title),b(_e,e(T)),b(re,e(ye))}),r(m,j)};w(x,m=>{e(ye)!==void 0&&e(T)!==void 0&&m(u)})}r(F,W)}),r(Z,$)};w(D,Z=>{t().actions.some($=>$.actionCountUpperBoundKey)&&Z(q)})}r(se,I)},Te=se=>{var I=Is(),D=a(I),q=a(D);ue(q,0,()=>["info","status"],fe,(qe,ke)=>{var Le=Ys(),He=P(Le),We=a(He),st=s(He,2);ue(st,1,()=>Object.entries(t()[ke]),fe,(et,$t)=>{let vt=()=>e($t)[0],St=()=>e($t)[1];var jt=Ls(),qt=a(jt),sa=s(qt);{var Ut=kt=>{var Mt=Bs(),wt=s(P(Mt));ue(wt,1,St,fe,(ia,na)=>{var h=at();p(k=>b(h,`${k??""},`),[()=>e(na).toString()],le),r(ia,h)}),r(kt,Mt)},Qt=kt=>{var Mt=at();p(wt=>b(Mt,`${wt??""},`),[()=>{var wt;return(wt=St())==null?void 0:wt.toString()}],le),r(kt,Mt)};w(sa,kt=>{Array.isArray(St())?kt(Ut):kt(Qt,!1)})}p(()=>b(qt,`"${vt()??""}" : `)),r(et,jt)});var Xe=s(st,2);Xe.textContent="},",p(()=>b(We,`"${ke??""}" :{`)),r(qe,Le)});var Z=s(q,2);Z.textContent='"actions" :[';var $=s(Z,2);ue($,1,()=>t().actions,fe,(qe,ke)=>{var Le=qs(),He=a(Le);p(()=>b(He,`"${e(ke).playType??""} ${e(ke).title??""}",`)),r(qe,Le)});var Q=s($,2);Q.textContent="],";var F=s(Q,2);F.textContent='"substituteEffects" :[';var R=s(F,2);ue(R,1,()=>t().substituteEffects,fe,(qe,ke)=>{var Le=Us(),He=a(Le);p(()=>b(He,`"${e(ke).title??""}",`)),r(qe,Le)});var W=s(R,2);W.textContent="],";var ye=s(W,2);ye.textContent='"continuousEffects" :[';var T=s(ye,2);ue(T,1,()=>t().continuousEffects,fe,(qe,ke)=>{var Le=Hs(),He=a(Le);p(()=>b(He,`"${e(ke).isStarted??""}",`)),r(qe,Le)});var x=s(T,2);x.textContent="],";var u=s(x,2);u.textContent='"procFilters" :[';var m=s(u,2);ue(m,1,()=>t().procFilterBundle.operators,fe,(qe,ke)=>{var Le=Ps(),He=a(Le);p(We=>b(He,`"${We??""} ${e(ke).title??""} ${e(ke).isEffective??""} ",`),[()=>e(ke).isSpawnedBy.toString()],le),r(qe,Le)});var j=s(m,2);j.textContent="],";var H=s(j,2);H.textContent='"numericStateOperators" :[';var me=s(H,2);ue(me,1,()=>t().numericOprsBundle.operators,fe,(qe,ke)=>{var Le=Ns(),He=a(Le);p(We=>b(He,`"${We??""} ${e(ke).title??""} ${e(ke).isEffective??""} ${e(ke).isContinuous??""} ${e(ke).targetState??""} ${e(ke).targetStateGen??""} ",`),[()=>e(ke).isSpawnedBy.toString()],le),r(qe,Le)});var he=s(me,2);he.textContent="],";var _e=s(he,2);_e.textContent='"stateOperators" :[';var ne=s(_e,2);ue(ne,1,()=>t().statusOperatorBundle.operators,fe,(qe,ke)=>{var Le=Fs(),He=a(Le);p(We=>b(He,`"${We??""} ${e(ke).title??""} ${e(ke).isEffective??""} ",`),[()=>e(ke).isSpawnedBy.toString()],le),r(qe,Le)});var re=s(ne,2);re.textContent="],";var ae=s(re,2);ae.textContent='"lastMoveLogRecord" :{';var Se=s(ae,2),Re=a(Se),Ie=s(Se,2),Ke=a(Ie),Ue=s(Ie,2),Ge=a(Ue),lt=s(Ue,2);lt.textContent="},",p((qe,ke)=>{b(Re,`"movedBy":"${qe??""}",`),b(Ke,`"movedAs":"${ke??""}",`),b(Ge,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var qe;return(qe=t().moveLog.latestRecord.movedBy)==null?void 0:qe.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],le),r(se,I)};w(G,se=>{o()==="Detail"?se(J):se(Te,!1)},!0)}r(U,N)};w(Me,U=>{o()==="Normal"?U(xe):U(ve,!1)})}var ie=s(ce,2),je=a(ie);{var ge=U=>{var N=Vs(),G=P(N);{var J=D=>{var q=Os();r(D,q)};w(G,D=>{t().origin.isOldVersion&&D(J)})}var Te=s(G,2);{var se=D=>{var q=Rs();r(D,q)},I=D=>{var q=zs(),Z=a(q);{var $=R=>{var W=Ks();const ye=le(()=>t().entityType==="Card"?t():t().parent);var T=a(W);p(x=>{var u;rt(W,"href",x),b(T,`⇒${((u=e(ye))!=null&&u.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[v],le),r(R,W)};w(Z,R=>{var W;t()&&(t().entityType==="Card"||((W=t().parent)==null?void 0:W.entityType)==="Card")&&R($)})}var Q=s(Z,2);mt(Q,()=>e(g),null,(R,W)=>{var ye=De(),T=P(ye);{var x=u=>{var m=Ws();p(()=>rt(m,"href",`https://yugioh-wiki.net/index.php?${e(W).wikiEncodedName}`)),r(u,m)};w(T,u=>{e(W)&&e(W).wikiEncodedName&&u(x)})}r(R,ye)});var F=s(Q,2);p(()=>rt(F,"href",`https://www.google.com/search?q=遊戯王 ${t().origin.name}`)),r(D,q)};w(Te,D=>{t().origin.isForTest?D(se):D(I,!1)})}r(U,N)};w(je,U=>{t()&&U(ge)})}p((U,N)=>{Be(S,`duel_card duel_card_info ${t().origin.kind??""} ${U??""} svelte-1uevs9j`),b(z,t().nm),b($e,N)},[()=>{var U;return(U=t().origin.monsterCategories)==null?void 0:U.join(" ")},()=>"★".repeat(t().lvl||0)],le),r(A,S)};w(d,A=>{t()&&A(B)})}r(f,_),ut()}za(["click","contextmenu"]);var Qs=l('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),Js=l('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),Zs=l('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function ei(f,i){ct(i,!1);let t=Ae(i,"cell",12);const o=()=>{t(t())},g=B=>t().cardEntities.filter(A=>A.face===B);t().field.duel.view.onDuelUpdate.append(o),_t();var v=De(),_=P(v);{var d=B=>{var A=Zs(),S=a(A),M=a(S),n=a(M),L=s(M,2),z=a(L),O=s(S,2);ue(O,4,()=>["FaceUp","FaceDown"],fe,(c,y)=>{var V=De(),te=P(V);{var $e=E=>{var Y=Js(),ce=a(Y),Me=a(ce),xe=s(ce,2);ue(xe,1,()=>g(y).toSorted(lr),fe,(ve,ie)=>{var je=Qs(),ge=a(je);const U=le(()=>t().owner===t().field.duel.duelists.Below);Vt(ge,{get entity(){return e(ie)},get isVisibleForcibly(){return e(U)},isWideMode:!0,cardActionResolve:void 0}),r(ve,je)}),p(()=>b(Me,y==="FaceUp"?"表向き":"裏向き")),r(E,Y)};w(te,E=>{g(y).length&&E($e)})}r(c,V)}),p(()=>{var c;b(n,(c=t().owner)==null?void 0:c.profile.name),b(z,t().cellType)}),r(B,A)};w(_,B=>{t().field.duel.view.infoBoardState==="CellInfo"&&B(d)})}r(f,v),ut()}var ti=l('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),ai=l('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function ri(f,i){ct(i,!1);let t=Ae(i,"viewController",8),o=Ae(i,"userProfile",12);_t();var g=De(),v=P(g);{var _=d=>{var B=ai(),A=s(a(B),2),S=s(a(A),2);ue(S,1,()=>vr,fe,(M,n)=>{var L=ti(),z=a(L),O=a(z),c=s(z,2),y=a(c);p(()=>b(y,or[e(n)])),dr(O,()=>o().chainConfig[e(n)],V=>o(o().chainConfig[e(n)]=V,!0)),X("change",O,()=>o().save()),r(M,L)}),r(d,B)};w(v,d=>{t().infoBoardState==="Config"&&d(_)})}r(f,g),ut()}function si(f,{from:i,to:t},o={}){var{delay:g=0,duration:v=Y=>Math.sqrt(Y)*120,easing:_=Ca}=o,d=getComputedStyle(f),B=d.transform==="none"?"":d.transform,[A,S]=d.transformOrigin.split(" ").map(parseFloat);A/=f.clientWidth,S/=f.clientHeight;var M=ii(f),n=f.clientWidth/t.width/M,L=f.clientHeight/t.height/M,z=i.left+i.width*A,O=i.top+i.height*S,c=t.left+t.width*A,y=t.top+t.height*S,V=(z-c)*n,te=(O-y)*L,$e=i.width/t.width,E=i.height/t.height;return{delay:g,duration:typeof v=="function"?v(Math.sqrt(V*V+te*te)):v,easing:_,css:(Y,ce)=>{var Me=ce*V,xe=ce*te,ve=Y+ce*$e,ie=Y+ce*E;return`transform: ${B} translate(${Me}px, ${xe}px) scale(${ve}, ${ie});`}}}function ii(f){if("currentCSSZoom"in f)return f.currentCSSZoom;for(var i=f,t=1;i!==null;)t*=+getComputedStyle(i).zoom,i=i.parentElement;return t}var ni=l('<div class="chain_number svelte-lqu21u"> </div>'),li=l('<div class="duel_card_row svelte-lqu21u"> </div>'),oi=l('<div class="appendix svelte-lqu21u"> </div>'),di=l('<div class="appendix_wrapper svelte-lqu21u"></div>'),vi=l('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),ci=l("<div></div>");function _i(f,i){ct(i,!1);let t=Ae(i,"duel",8),o=Ae(i,"position",8,"left");const g=-100,v=()=>o()==="left"?-100:100;let _=oe([]),d=Promise.resolve(),B=Promise.resolve();const A=1e3,S=500,M=400,n=z=>{const O={...z};O.isKnown=z.chainBlockInfo.action.entity.controller.duelistType==="Player"||z.chainBlockInfo.action.entity.face==="FaceUp",O.chainBlockInfo.onStateChange.append(c=>{if(c==="done"||c==="failed"||c==="negated")return d=d.then(async()=>{const y=new Date().getTime()-O.chainBlockInfo.wasSpawnedAt.getTime();y<A&&await ea(A-y),C(_,e(_).filter(V=>V.seq!==O.seq)),await ea(S+M)}).then(),"RemoveMe";C(_,e(_))}),B=B.then(async()=>{C(_,[O,...e(_)].sort((c,y)=>cr.isSameChain(c.clock,y.clock)&&c.chainBlockInfo.action.isWithChainBlock&&y.chainBlockInfo.action.isWithChainBlock?y.clock.totalProcSeq-c.clock.totalProcSeq:c.clock.totalProcSeq-y.clock.totalProcSeq)),await ea(300)}),d=d.then(()=>ea(1e3))};t().chainBlockLog.onInsert.append(n),_t();var L=ci();ue(L,13,()=>e(_),z=>z.seq,(z,O)=>{var c=vi();const y=le(()=>{const{activator:N,action:G,appendix:J}=e(O).chainBlockInfo;return{activator:N,action:G,appendix:J}});var V=a(c),te=a(V);{var $e=N=>{var G=ni(),J=a(G);p(()=>b(J,`チェーン：${e(O).chainBlockInfo.chainNumber??""}`)),r(N,G)};w(te,N=>{e(O).chainBlockInfo.chainNumber&&N($e)})}var E=s(te,2),Y=a(E),ce=s(E,2),Me=a(ce);{var xe=N=>{var G=li(),J=a(G);p(()=>b(J,e(O).isKnown?e(y).action.entity.nm:"？？？")),r(N,G)};w(Me,N=>{(e(y).action.entity.entityType==="Card"||e(y).action.entity.entityType==="Token")&&N(xe)})}var ve=s(Me,2),ie=a(ve),je=a(ie),ge=s(ie,2);{var U=N=>{var G=di();ue(G,5,()=>e(y).appendix,fe,(J,Te)=>{var se=oi(),I=a(se);p(()=>b(I,e(Te))),r(J,se)}),r(N,G)};w(ge,N=>{e(y).appendix&&N(U)})}p((N,G,J)=>{Be(c,`cut_in_row ${(!e(O).chainBlockInfo.chainNumber||e(O).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Be(V,`cut_in_item cut_in_item_${N??""} cut_in_item_${e(O).chainBlockInfo.state??""} svelte-lqu21u`),Be(E,`duelist_name duelist_${N??""}_name svelte-lqu21u`),b(Y,e(y).activator.profile.name),Be(ce,`duel_card duel_card_${N??""} ${G??""} ${(e(O).isKnown?e(y).action.entity.origin.kind:"")??""} ${e(y).action.entity.entityType??""}  svelte-lqu21u`),b(je,J)},[()=>e(y).activator.seat.toLowerCase(),()=>e(O).isKnown?(e(y).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(y).action.toString()],le),de(3,V,()=>Ar,()=>new Date().getTime()-e(O).chainBlockInfo.wasSpawnedAt.getTime()<A?{x:v(),duration:M}:{y:g,duration:M}),_r(c,()=>si,()=>({duration:S})),r(z,c)}),p(()=>Be(L,`cut_in_container cut_in_container_${o()??""} svelte-lqu21u`)),r(f,L),ut()}const ui=Br({duration:400});var fi=l('<div class="duel_desk_left v_flex svelte-1w535im"><!> <!> <!></div>'),mi=l('<button class="duel_field_header_message svelte-1w535im"> </button> <div class="duel_field_header_buttons svelte-1w535im"><button class="svelte-1w535im">サレンダー</button></div>',1),pi=l("<tr></tr>"),gi=l('<table class="duel_field svelte-1w535im"><tbody class="svelte-1w535im"></tbody></table>'),yi=l('<button class="svelte-1w535im">OK</button>'),hi=l('<button class="svelte-1w535im">cancel</button>'),bi=l("<!> <!>",1),ki=l('<button class="svelte-1w535im"> </button>'),wi=l('<div style="text-align: left;"><!> <!> <!></div>'),Ci=l('<div><!> <div class=" duel_desk_center v_flex svelte-1w535im"><div class="duel_field_header svelte-1w535im"><!></div> <div class="duel_field_body svelte-1w535im"><!></div> <div class="duel_field_footer svelte-1w535im"><!></div></div> <!></div> <div style="position:fixed;bottom:0"> </div> <!> <div><!></div>',1);function xi(f,i){ct(i,!1);let t=Ae(i,"duel",12),o=Ae(i,"userProfile",8),g=oe(0),v=oe(0),_=oe([]),d=oe([]),B=()=>{},A=oe([]),S=oe(),M=oe(),n=oe(()=>!1),L=oe(!1);const z=u=>{B=u.resolve,C(A,u.dummyActionInfos.filter(m=>m.action.entity.entityType==="Duelist").filter(m=>m.action.entity.controller.seat==="Below")),C(S,void 0),C(M,void 0),C(d,[]),C(_,[]),C(L,!1),u.entitiesChoices&&(C(S,u.entitiesChoices),C(n,()=>{var m;return((m=u.entitiesChoices)==null?void 0:m.validator(e(_)))??!1}),C(L,u.entitiesChoices.cancelable),e(S).selectables.every(m=>m.cell.isPlayFieldCell&&m.getIndexInCell()===0||m.cell.cellType==="Hand"&&m.controller.duelistType==="Player"||m.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:u.entitiesChoices,chainBlockInfos:u.chainBlockInfos,cancelable:u.entitiesChoices.cancelable}).then(m=>{B({selectedEntities:m})})),u.cellsChoices&&(C(M,u.cellsChoices),C(n,()=>{var m;return((m=u.cellsChoices)==null?void 0:m.validator(e(d)))??!1}),C(L,u.cellsChoices.cancelable))};t().view.onWaitStart.append(z);const O=()=>{B=()=>{},C(M,void 0),C(S,void 0),C(d,[]),C(_,[]),C(n,()=>!1),C(L,!1)};t().view.onWaitEnd.append(O);let c=oe(void 0),y=oe("Normal");const V=({card:u,mode:m})=>{C(c,u),C(y,m??(e(c)===u||e(y)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(V);const te=()=>{t(t())};t().view.onDuelUpdate.append(te),t().log.onUpdate.append(te);const $e=()=>{e(S)&&e(S).validator(e(_))&&B({selectedEntities:e(_)}),e(M)&&e(M).validator(e(d))&&B({selectedCells:e(d)})},E=()=>{B({})},Y=u=>{B({actionInfo:u})},ce=()=>{B({surrender:!0})};t().main();const Me=()=>e(g)<=1400?"compact":"wide";_t();var xe=Ci(),ve=P(xe),ie=a(ve);{var je=u=>{var m=fi(),j=a(m);Ka(j,{get duelist(){return t().duelists.Above}});var H=s(j,2);{var me=_e=>{Gs(_e,{get entity(){return e(c)},get mode(){return e(y)}})};w(H,_e=>{e(c)&&_e(me)})}var he=s(H,2);Ka(he,{get duelist(){return t().duelists.Below}}),r(u,m)};w(ie,u=>{Me()==="wide"&&u(je)})}var ge=s(ie,2),U=a(ge),N=a(U);{var G=u=>{var m=mi(),j=P(m),H=a(j),me=s(j,2),he=a(me);p(()=>b(H,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),X("click",j,()=>{t(t().view.infoBoardState="Log",!0)}),X("click",he,ce),r(u,m)};w(N,u=>{t().isEnded||u(G)})}var J=s(U,2),Te=a(J);{var se=u=>{var m=gi(),j=a(m);ue(j,5,()=>t().field.cells,fe,(H,me,he)=>{var _e=pi();Be(_e,`${`duel_desk_row_${he}`??""} svelte-1w535im`),ue(_e,5,()=>e(me),fe,(ne,re,ae)=>{es(ne,{get view(){return t().view},row:he,column:ae,get selectedEntities(){return e(_)},set selectedEntities(Se){C(_,Se)},get selectedCells(){return e(d)},set selectedCells(Se){C(d,Se)},$$legacy:!0})}),r(H,_e)}),r(u,m)};w(Te,u=>{t().clock.turn>0&&u(se)})}var I=s(J,2),D=a(I);{var q=u=>{var m=bi(),j=P(m);{var H=_e=>{var ne=yi();p(re=>ne.disabled=re,[()=>!e(n)()],le),X("click",ne,$e),r(_e,ne)};w(j,_e=>{((e(S)&&e(S).qty)??(e(M)&&e(M).qty)??9999)>1&&_e(H)})}var me=s(j,2);{var he=_e=>{var ne=hi();X("click",ne,E),r(_e,ne)};w(me,_e=>{e(L)&&_e(he)})}r(u,m)},Z=u=>{var m=De(),j=P(m);ue(j,1,()=>e(A),fe,(H,me)=>{var he=ki(),_e=a(he);p(()=>b(_e,e(me).action.title)),X("click",he,()=>Y(e(me))),r(H,he)}),r(u,m)};w(D,u=>{e(S)&&e(S).selectables.length||e(M)&&e(M).selectables?u(q):u(Z,!1)})}var $=s(ge,2);{var Q=u=>{var m=wi(),j=a(m);cs(j,{get log(){return t().log}});var H=s(j,2);ei(H,{get cell(){return t().view.infoBoardCell}});var me=s(H,2);ri(me,{get userProfile(){return o()},get viewController(){return t().view}}),p(he=>Be(m,`duel_desk_right duel_desk_right_${he??""}  svelte-1w535im`),[()=>t().view.infoBoardState.toLowerCase()],le),de(3,m,()=>Ce,()=>({duration:e(g)>1400?0:200,axis:"x"})),r(u,m)};w($,u=>{(e(g)>1400||t().view.infoBoardState!=="Default")&&u(Q)})}var F=s(ve,2),R=a(F),W=s(F,2);ur(W,{get modalController(){return t().view.modalController}});var ye=s(W,2),T=a(ye);const x=le(()=>Me()==="wide"?"right":"left");_i(T,{get duel(){return t()},get position(){return e(x)}}),p((u,m)=>{Be(ve,`flex duel_desk ${u??""}_mode svelte-1w535im`),b(R,m),Be(ye,`cutin ${u??""}_mode svelte-1w535im`)},[Me,()=>t().clock.toFullString()],le),ua("innerWidth",u=>C(g,u)),ua("innerHeight",u=>C(v,u)),r(f,xe),ut()}var Di=l("<div></div>"),$i=l("<!> <!> <!> <!>",1),Si=l('<span class="atk svelte-1y1qbq4"> </span> <span class="slash svelte-1y1qbq4">/</span> <span class="def svelte-1y1qbq4"> </span>',1),Mi=l('<div role="listitem"><div class="svelte-1y1qbq4"><div class="duel_card_row card_name svelte-1y1qbq4"> </div> <div style="display:flex; flex-wrap: wrap;" class="svelte-1y1qbq4"><div style="" class="svelte-1y1qbq4"><!> <!> <!></div> <div class="atk_def svelte-1y1qbq4"><!></div></div></div></div>');function Ja(f,i){ct(i,!1);let t=Ae(i,"mode",8),o=Ae(i,"cardInfo",8),g=Ae(i,"onAttention",8),v=Ae(i,"cardControlEventHandlers",8);_t();var _=Mi(),d=a(_),B=a(d),A=a(B),S=s(B,2),M=a(S),n=a(M);{var L=E=>{var Y=$i(),ce=P(Y);{var Me=ge=>{var U=at();p(()=>b(U,`★${o().level??""}`)),r(ge,U)},xe=ge=>{var U=De(),N=P(U);{var G=Te=>{var se=at();p(()=>b(se,`☆${o().rank??""}`)),r(Te,se)},J=Te=>{var se=De(),I=P(se);{var D=q=>{var Z=at();p(()=>b(Z,`Ｌ${o().link??""}`)),r(q,Z)};w(I,q=>{o().link&&q(D)},!0)}r(Te,se)};w(N,Te=>{o().rank?Te(G):Te(J,!1)},!0)}r(ge,U)};w(ce,ge=>{o().level?ge(Me):ge(xe,!1)})}var ve=s(ce,2);ue(ve,1,()=>o().attributes??[],fe,(ge,U)=>{var N=Di();p(()=>Be(N,`monster_attr ${e(U)??""} svelte-1y1qbq4`)),r(ge,N)});var ie=s(ve,2);ue(ie,1,()=>o().types??[],fe,(ge,U)=>{var N=at();p(()=>b(N,ga[e(U)])),r(ge,N)});var je=s(ie,2);ue(je,1,()=>o().monsterCategories??[],fe,(ge,U)=>{var N=at();p(()=>b(N,da[e(U)])),r(ge,N)}),r(E,Y)};w(n,E=>{o().kind==="Monster"&&E(L)})}var z=s(n,2);{var O=E=>{var Y=at();p(()=>b(Y,`${ya[o().spellCategory]??""}魔法`)),r(E,Y)};w(z,E=>{o().spellCategory&&E(O)})}var c=s(z,2);{var y=E=>{var Y=at();p(()=>b(Y,`${ha[o().trapCategory]??""}罠`)),r(E,Y)};w(c,E=>{o().trapCategory&&E(y)})}var V=s(M,2),te=a(V);{var $e=E=>{var Y=Si(),ce=P(Y),Me=a(ce),xe=s(ce,4),ve=a(xe);p(()=>{b(Me,o().attack??"?"),b(ve,o().defense??"?")}),r(E,Y)};w(te,E=>{o().kind==="Monster"&&E($e)})}p(E=>{Be(_,`${E??""} svelte-1y1qbq4`),b(A,o().name)},[()=>{var E,Y;return`deck_editor_card duel_card ${o().kind} ${(Y=(E=o())==null?void 0:E.monsterCategories)==null?void 0:Y.join(" ")} ${o().isImplemented?"is_implemented":"is_not_implemented"} card_id_${o().cardId}`}],le),X("click",_,()=>g()(o())),X("touchstart",_,E=>v().onCardDragStart(E,t(),o())),X("touchmove",_,E=>v().onCardDragging(E,t())),X("touchend",_,function(...E){var Y;(Y=v().onCardDragEnd)==null||Y.apply(this,E)}),X("touchcancel",_,function(...E){var Y;(Y=v().onCardDragCancel)==null||Y.apply(this,E)}),X("mousedown",_,E=>v().onCardDragStart(E,t(),o())),X("mousemove",_,E=>v().onCardDragging(E,t())),X("mouseup",_,function(...E){var Y;(Y=v().onCardDragEnd)==null||Y.apply(this,E)}),r(f,_),ut()}var Ti=l('<button class="button_style_reset plus_minus_button svelte-1ty6ui7">+</button> <button class="button_style_reset plus_minus_button svelte-1ty6ui7">-</button>',1),Ei=l('<li class="deck_editor_item svelte-1ty6ui7"><!> <!></li>'),ji=l('<div class="deck_editor_card_list_wrapper svelte-1ty6ui7"><ul></ul></div>');function Ai(f,i){ct(i,!1);let t=Ae(i,"cardList",8),o=Ae(i,"mode",8),g=Ae(i,"state",8),v=Ae(i,"onAttention",8),_=Ae(i,"cardControlEventHandlers",8);const d=20;let B=oe(0),A=oe(d),S=oe(0),M=oe(0),n=oe(0),L=oe();ca(()=>(e(L),Kt(o()),Kt(t()),e(n),e(M),Kt(g())),()=>{if(e(L))if(we(L,e(L).scrollTop=0),o()==="List"){const c=t().length>d?d:t().length;e(n)||(C(M,e(L).scrollHeight/c),C(n,Math.ceil(e(M)))),console.log(g(),t().length),t().length>d?C(S,e(n)*(t().length-d*2)+Math.ceil(e(M)*(d*2-1))):C(S,e(n)*t().length)}else C(A,t().length)}),$a(),_t();var z=ji(),O=a(z);ue(O,5,t,fe,(c,y,V)=>{var te=De(),$e=P(te);{var E=Y=>{var ce=Ei(),Me=a(ce);Ja(Me,{get mode(){return o()},get cardInfo(){return e(y)},get onAttention(){return v()},get cardControlEventHandlers(){return _()}});var xe=s(Me,2);{var ve=ie=>{var je=Ti(),ge=P(je),U=s(ge,2);p(N=>{ge.disabled=!e(y).isImplemented,rt(ge,"title",e(y).isImplemented?`※shiftキー同時押しで一括投入
※ctrlキー同時押しで枚数制限無視`:""),U.disabled=N,rt(U,"title",e(y).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>t().every(N=>N.name!==e(y).name)],le),X("click",ge,N=>_().onCardAppend(N,e(y))),X("click",U,N=>_().onCardRemove(N,e(y))),r(ie,je)};w(xe,ie=>{o()==="Deck"&&ie(ve)})}r(Y,ce)};w($e,Y=>{V>=e(B)&&V<=e(A)&&Y(E)})}r(c,te)}),Va(O,c=>C(L,c),()=>e(L)),p(c=>{Be(O,`deck_editor_card_list ${c??""}  indexLowerBound_${e(B)??""} indexUpperBound=${e(A)??""} svelte-1ty6ui7`),rt(O,"style",`height: ${(e(S)?e(S)+"px":"fit-content")??""};padding-top: ${e(B)*e(n)}px`)},[()=>g().toLowerCase()],le),X("scroll",z,c=>{if(!e(n))return;const y=Math.ceil(c.currentTarget.scrollTop/e(n));C(B,y<d?0:y-d),C(A,y+d)}),r(f,z),ut()}var Bi=l('<div class="svelte-bxy0h6"><button class="button_style_reset svelte-bxy0h6">クリア</button></div>'),Li=l('<div><div class="deck_editor_card_kind_header svelte-bxy0h6"><div class="svelte-bxy0h6"> <!> 枚）</div> <div style="display: flex;" class="svelte-bxy0h6"><!> <div class="triangle svelte-bxy0h6">▲</div></div></div> <div class="deck_editor_card_kind_body svelte-bxy0h6"><!></div></div>'),Yi=l('<div class="deck_editor_card_list svelte-bxy0h6"></div>');function Wa(f,i){ct(i,!1);let t=Ae(i,"allCardTree",8),o=Ae(i,"deckCardTree",12),g=Ae(i,"mode",8),v=Ae(i,"onAttention",8),_=Ae(i,"searchCondition",8,void 0),d=Ae(i,"cardControlEventHandlers",8),B=oe("ExtraMonster");const A=oe(g()==="List"?t():o()),S=(...c)=>{const y=c.length?c:Xt(e(A)),V=(te,$e)=>{var E;return Qa(te,$e,(E=_())==null?void 0:E.sort.filter(Y=>Y.priority>0).toSorted((Y,ce)=>Y.priority-ce.priority))};y.forEach(te=>e(A)[te].sort(V))},M=(c,y)=>{o(o()[y]=[],!0)};let n=oe(g()==="Deck"?structuredClone(e(A)):{ExtraMonster:[],Monster:[],Spell:[],Trap:[]}),L=oe("");const z=c=>{if(!_())return!0;if(c.kind==="XyzMaterial")return!1;const y=fa(c);if(!_().deckCardKinds.includes(y)||_().name.trim().length&&[c.name,...c.nameTags??[],...c.textTags??[]].every(te=>!te.includes(_().name))||!c.isImplemented&&!_().others.includes("implemented")||c.isForTest&&!_().others.includes("test")||c.isOldVersion&&!_().others.includes("oldVersion"))return!1;if(c.kind==="Monster"){if(c.attributes&&!_().monsterAttributes.union(c.attributes).length||c.types&&!_().monsterTypes.union(c.types).length)return!1;const V=c.level??c.rank??c.link;return Lt(_().starLowerBound)&&(V??0)<_().starLowerBound||Lt(_().starUpperBound)&&(V??0)>_().starUpperBound||Lt(_().atkLowerBound)&&(c.attack??0)<_().atkLowerBound||Lt(_().atkUpperBound)&&(c.attack??0)>_().atkUpperBound||Lt(_().defLowerBound)&&(c.defense??0)<_().defLowerBound||Lt(_().defUpperBound)&&(c.defense??0)>_().defUpperBound||Lt(_().atkPlusDef)&&(!Lt(c.attack)||!Lt(c.defense)||c.attack+c.defense!==_().atkPlusDef)||!c.monsterCategories||y==="ExtraMonster"&&!c.monsterCategories.union(_().exMonsterCategories).length?!1:c.monsterCategories.union(_().monsterCategories).length}if(c.kind==="Spell")return c.spellCategory&&_().spellCategories.includes(c.spellCategory);if(c.kind==="Trap")return c.trapCategory&&_().trapCategories.includes(c.trapCategory)};ca(()=>(Kt(g()),e(A),Kt(o()),e(B),e(n)),()=>{if(g()==="Deck"){if(Xt(e(A)).forEach(c=>we(A,e(A)[c]=o()[c])),e(A)[e(B)].length){const c=Xt(e(A)).map(y=>({kind:y,cardInfos:e(A)[y]})).filter(({cardInfos:y})=>y.length).find(({kind:y,cardInfos:V})=>V.length!==e(n)[y].length);c&&e(B)!==c.kind&&C(B,c.kind)}else C(B,Xt(e(A)).find(c=>e(A)[c].find(z))??"ExtraMonster");C(n,structuredClone(e(A)))}}),ca(()=>(Kt(g()),Kt(_()),e(L)),()=>{var c;if(g()==="List"){const y=JSON.stringify((c=_())==null?void 0:c.sort);e(L)!==y&&(C(L,y),S())}}),$a(),_t();var O=Yi();ue(O,5,()=>ta,fe,(c,y,V)=>{var te=Li();const $e=le(()=>e(A)[e(y)].filter(z));var E=a(te),Y=a(E),ce=a(Y),Me=s(ce);{var xe=G=>{var J=at();p(Te=>b(J,`/ ${Te??""}`),[()=>e(A)[e(y)].length.toLocaleString()],le),r(G,J)};w(Me,G=>{g()==="List"&&G(xe)})}var ve=s(Y,2),ie=a(ve);{var je=G=>{var J=Bi(),Te=a(J);X("click",Te,se=>M(se,e(y))),r(G,J)};w(ie,G=>{g()==="Deck"&&e($e).length&&G(je)})}var ge=s(E,2),U=a(ge);const N=le(()=>e(B)===e(y)?"Open":"Close");Ai(U,{get mode(){return g()},get cardList(){return e($e)},get onAttention(){return v()},get cardControlEventHandlers(){return d()},get state(){return e(N)}}),p(G=>{Be(te,`deck_editor_card_kind deckCardKind ${(e(y)===e(B)?"selected":"")??""} ${(e($e).length?"":"empty")??""} svelte-bxy0h6`),b(ce,`${Ga[e(y)]??""}（${G??""} `)},[()=>e($e).length.toLocaleString()],le),X("click",E,()=>{if(e(B)!==e(y)){C(B,e(y));return}C(B,ta.map((G,J)=>J+V).map(G=>G%ta.length).map(G=>ta[G]).filter(G=>G!==e(y)).find(G=>e(A)[G].some(z))??e(y))}),r(c,te)}),r(f,O),ut()}var qi=l('<div class="svelte-1e9s0mh"> </div>'),Ui=l('<div class="svelte-1e9s0mh"> </div>'),Hi=l('<div class="link_arrow_emoji svelte-1e9s0mh"> </div>'),Pi=l('<div class="duel_card_info_row svelte-1e9s0mh" style="position:sticky; top:0;"><!></div>'),Ni=l('<div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"><pre class="description svelte-1e9s0mh"> </pre></div></div> <div class="duel_card_info_row svelte-1e9s0mh" style=" justify-content: space-between;"><div class="svelte-1e9s0mh"> </div> <div class="svelte-1e9s0mh"> </div></div>',1),Fi=l('<div></div> <div class="svelte-1e9s0mh"> </div>',1),Ii=l("<div> </div>"),Oi=l('<span class="svelte-1e9s0mh">/</span> <div class="monster_defense svelte-1e9s0mh"> </div>',1),Ri=l("<div> </div>"),Ki=l('<div class="duel_card_info_row svelte-1e9s0mh"><!> <!> <div style="flex-grow: 1;" class="svelte-1e9s0mh"></div> <div class="monster_attack svelte-1e9s0mh"> </div> <!></div> <div class="duel_card_info_row svelte-1e9s0mh"></div>',1),Wi=l('<div class="duel_card_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"></div> <div class="svelte-1e9s0mh"> </div></div>'),zi=l('<div class="duel_card_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"></div> <div class="svelte-1e9s0mh"> </div></div>'),Vi=l('<div class="svelte-1e9s0mh"> </div>'),Xi=l('<div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh">※エラッタ前カードです</div></div>'),Gi=l('<div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh">※テスト用カードです</div></div>'),Qi=l('<div class="duel_card_info_links svelte-1e9s0mh"><a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1e9s0mh"> </a> <a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1e9s0mh">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="google" class="svelte-1e9s0mh">⇒google検索</a></div>'),Ji=l('<div><div class="duel_card_info_header svelte-1e9s0mh"><div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"> </div></div> <!> <div class="plus_minus_button_area svelte-1e9s0mh"><button class="button_style_reset plus_minus_button svelte-1e9s0mh">+</button> <button class="button_style_reset plus_minus_button svelte-1e9s0mh">-</button></div></div> <div class="duel_card_info_body svelte-1e9s0mh"><!> <!> <div class="duel_card_info_row description svelte-1e9s0mh"><div class="svelte-1e9s0mh"><pre class="description svelte-1e9s0mh"> </pre></div> <!></div> <!> <!></div></div>');function Zi(f,i){ct(i,!1);let t=Ae(i,"cardInfo",8,void 0),o=Ae(i,"onAttention",8),g=Ae(i,"cardControlEventHandlers",8),v=Ae(i,"deckCardTree",8);_t();var _=De(),d=P(_);{var B=A=>{var S=Ji(),M=a(S),n=a(M),L=a(n),z=a(L),O=s(n,2);{var c=D=>{var q=Pi(),Z=a(q);{var $=F=>{var R=qi(),W=a(R);p(ye=>b(W,ye),[()=>"★".repeat(t().level)],le),r(F,R)},Q=F=>{var R=De(),W=P(R);{var ye=x=>{var u=Ui(),m=a(u);p(j=>b(m,j),[()=>"★".repeat(t().rank)],le),r(x,u)},T=x=>{var u=De(),m=P(u);{var j=H=>{var me=Hi(),he=a(me);p(_e=>b(he,_e),[()=>t().linkArrowKeys.map(_e=>Xa[_e].emoji).join("")],le),r(H,me)};w(m,H=>{t().linkArrowKeys&&H(j)},!0)}r(x,u)};w(W,x=>{t().rank&&t().rank>0?x(ye):x(T,!1)},!0)}r(F,R)};w(Z,F=>{t().level&&t().level>0?F($):F(Q,!1)})}r(D,q)};w(O,D=>{t().kind==="Monster"&&D(c)})}var y=s(O,2),V=a(y),te=s(V,2),$e=s(M,2),E=a($e);{var Y=D=>{var q=Ni(),Z=P(q),$=a(Z),Q=a($),F=a(Q),R=s(Z,2),W=a(R),ye=a(W),T=s(W,2),x=a(T);p(()=>{b(F,t().pendulumDescription),b(ye,`◀ ${t().pendulumScaleL??""}`),b(x,`${t().pendulumScaleR??""} ▶`)}),r(D,q)};w(E,D=>{var q;(q=t().monsterCategories)!=null&&q.includes("Pendulum")&&D(Y)})}var ce=s(E,2);{var Me=D=>{var q=Ki(),Z=P(q),$=a(Z);{var Q=m=>{var j=Fi(),H=P(j),me=s(H,2),he=a(me);p(()=>{Be(H,`monster_attr ${t().attributes[0]??""} svelte-1e9s0mh`),b(he,`${Sa[t().attributes[0]]??""}属性`)}),r(m,j)};w($,m=>{t().attributes&&m(Q)})}var F=s($,2);{var R=m=>{var j=Ii(),H=a(j);p(()=>{Be(j,`monster_cat ${t().types[0]??""} svelte-1e9s0mh`),b(H,`${ga[t().types[0]]??""}${Ma[t().types[0]]??""}族`)}),r(m,j)};w(F,m=>{t().types&&m(R)})}var W=s(F,4),ye=a(W),T=s(W,2);{var x=m=>{var j=Oi(),H=s(P(j),2),me=a(H);p(()=>b(me,t().defense??"?")),r(m,j)};w(T,m=>{var j;(j=t().monsterCategories)!=null&&j.includes("Link")||m(x)})}var u=s(Z,2);ue(u,5,()=>t().monsterCategories??[],fe,(m,j)=>{var H=Ri(),me=a(H);p(()=>{Be(H,`monster_cat ${e(j)??""} svelte-1e9s0mh`),b(me,`${da[e(j)]??""}${_a[e(j)]??""}`)}),r(m,H)}),p(()=>b(ye,t().attack??"?")),r(D,q)},xe=D=>{var q=De(),Z=P(q);{var $=F=>{var R=Wi(),W=s(a(R),2),ye=a(W);p(()=>b(ye,`${ya[t().spellCategory]??""}魔法`)),r(F,R)},Q=F=>{var R=De(),W=P(R);{var ye=T=>{var x=zi(),u=s(a(x),2),m=a(u);p(()=>b(m,`${ha[t().trapCategory]??""}罠`)),r(T,x)};w(W,T=>{t().kind==="Trap"&&t().trapCategory&&T(ye)},!0)}r(F,R)};w(Z,F=>{t().kind==="Spell"&&t().spellCategory?F($):F(Q,!1)},!0)}r(D,q)};w(ce,D=>{t().kind==="Monster"?D(Me):D(xe,!1)})}var ve=s(ce,2),ie=a(ve),je=a(ie),ge=a(je),U=s(ie,2);{var N=D=>{var q=Vi(),Z=a(q);p($=>b(Z,`初版発売日：${$??""}`),[()=>t().releaseDate.formatToYYYYMMDD("-")],le),r(D,q)};w(U,D=>{t().releaseDate&&D(N)})}var G=s(ve,2);{var J=D=>{var q=Xi();r(D,q)};w(G,D=>{t().isOldVersion&&D(J)})}var Te=s(G,2);{var se=D=>{var q=Gi();r(D,q)},I=D=>{var q=Qi(),Z=a(q),$=a(Z),Q=s(Z,2),F=s(Q,2);p(R=>{rt(Z,"href",R),b($,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`),rt(Q,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),rt(F,"href",`https://www.google.com/search?q=遊戯王 ${t().name}`)},[()=>fr(t())],le),r(D,q)};w(Te,D=>{t().isForTest?D(se):D(I,!1)})}p((D,q)=>{Be(S,`duel_card duel_card_info ${t().kind??""} ${D??""} svelte-1e9s0mh`),b(z,t().name),V.disabled=!t().isImplemented,rt(V,"title",t().isImplemented?`※shiftキー同時押しで一括投入
※ctrlキー同時押しで枚数制限無視`:""),te.disabled=q,rt(te,"title",t().isImplemented?"※shiftキー同時押しで一括外し":""),b(ge,t().description)},[()=>{var D;return(D=t().monsterCategories)==null?void 0:D.join(" ")},()=>v()[fa(t())].every(D=>D.name!==t().name)],le),X("click",V,D=>g().onCardAppend(D,t())),X("click",te,D=>g().onCardRemove(D,t())),X("click",S,()=>o()(t())),r(A,S)};w(d,A=>{t()&&A(B)})}r(f,_),ut()}const en={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class tn{constructor(){nt(this,"DefaultSeparator1","/");nt(this,"DefaultSeparator2"," ");nt(this,"DefaultSeparator3",":");nt(this,"createDate",i=>{if(!i)return;const t=new Date(i);if(!isNaN(t.getTime()))return t});nt(this,"createDateOr",(i,t)=>this.createDate(i)||t||new Date);nt(this,"truncateDate",i=>{const t=i||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});nt(this,"addDate",(i,t)=>{const o=this.createDateOr(i);return o.setDate(o.getDate()+t),o});nt(this,"addMonth",(i,t)=>{const o=this.createDateOr(i);return o.setMonth(o.getMonth()+t),o});nt(this,"addYear",(i,t)=>{const o=this.createDateOr(i);return o.setFullYear(o.getFullYear()+t),o});nt(this,"getDayOfWeek",(i,t="dddd")=>{const o=this.createDate(i);return o?en[o.getDay()][t]:""});nt(this,"formatToYYYYMMDD",(i,t=this.DefaultSeparator1)=>{const o=this.createDate(i);if(!o)return"";const g=o.getFullYear().toString(),v=("0"+(o.getMonth()+1)).slice(-2),_=("0"+o.getDate()).slice(-2);return g+t+v+t+_});nt(this,"formatToYYYYMM",(i,t=this.DefaultSeparator1)=>{const o=this.createDate(i);if(!o)return"";t||(t="");const g=o.getFullYear().toString(),v=("0"+(o.getMonth()+1)).slice(-2);return g+t+v});nt(this,"formatToHHMMSS",(i,t=this.DefaultSeparator3)=>{const o=this.createDate(i);if(!o)return"";t||(t="");const g=o.getHours(),v=o.getMinutes(),_=o.getSeconds();return("0"+g).slice(-2)+t+("0"+v).slice(-2)+t+("0"+_).slice(-2)});nt(this,"formatToHHMM",(i,t=this.DefaultSeparator3)=>{const o=this.createDate(i);if(!o)return"";t||(t="");const g=("0"+o.getHours()).slice(-2),v=("0"+o.getMinutes()).slice(-2);return g+t+v});nt(this,"formatToYYYYMMDD_HHMM",(i,t=this.DefaultSeparator1,o=this.DefaultSeparator2,g=this.DefaultSeparator3)=>{const v=this.createDate(i);return v?this.formatToYYYYMMDD(v,t)+o+this.formatToHHMM(v,g):""});nt(this,"formatToYYYYMMDD_HHMMSS",(i,t=this.DefaultSeparator1,o=this.DefaultSeparator2,g=this.DefaultSeparator3)=>{const v=this.createDate(i);return v?this.formatToYYYYMMDD(v,t)+o+this.formatToHHMMSS(v,g):""})}}const bt=new tn;Date.prototype.truncateDate=function(){return bt.truncateDate(this)};Date.prototype.getCloneOr=function(f){return bt.createDateOr(this,f)};Date.prototype.addDate=function(f){return bt.addDate(this,f)};Date.prototype.addMonth=function(f){return bt.addDate(this,f)};Date.prototype.addYear=function(f){return bt.addDate(this,f)};Date.prototype.getDayOfWeek=function(f="dddd"){return bt.getDayOfWeek(this,f)};Date.prototype.formatToYYYYMM=function(f){return bt.formatToYYYYMM(this,f)};Date.prototype.formatToYYYYMMDD=function(f){return bt.formatToYYYYMMDD(this,f)};Date.prototype.formatToYYYYMMDD_HHMM=function(f,i,t){return bt.formatToYYYYMMDD_HHMM(this,f,i,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(f,i,t){return bt.formatToYYYYMMDD_HHMMSS(this,f,i,t)};Date.prototype.formatToHHMM=function(f){return bt.formatToHHMM(this,f)};Date.prototype.formatToHHMMSS=function(f){return bt.formatToHHMMSS(this,f)};var an=l('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),rn=l('<ul class="deck_info_list svelte-2wdgc8"></ul>'),sn=l('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),nn=l('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),ln=l('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),on=l('<button class="svelte-2wdgc8">Cancel</button>'),dn=l('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function vn(f,i){ct(i,!1);let t=Ae(i,"eventHolder",8),o=Ae(i,"args",8),g=Ae(i,"resolve",8),v=oe(Promise.resolve([])),_=oe();const d=()=>{C(_,new DataTransfer().files),C(v,Promise.resolve([]))},B=async L=>{L.preventDefault(),console.log("hoge",L)},A=async L=>{L.preventDefault(),L.dataTransfer&&M(L.dataTransfer.files)},S=()=>{M(e(_))},M=async L=>{if(!L.length)return;const z=[],O=[];for(const c of L)try{O.push(...await Dt.createfromJson(c))}catch(y){y instanceof Error&&z.push(y.message)}if(z.length){console.log(...z);return}C(v,e(v).then(()=>O))},n=d;_t(),mr(f,{get eventHolder(){return t()},get args(){return o()},$$slots:{body:(L,z)=>{var O=nn(),c=a(O);mt(c,()=>oa,null,(y,V)=>{var te=De(),$e=P(te);mt($e,()=>e(v),null,(E,Y)=>{var ce=De(),Me=P(ce);{var xe=ie=>{var je=rn();ue(je,5,()=>e(Y),fe,(ge,U)=>{var N=an(),G=a(N),J=a(G),Te=s(G,2),se=a(Te),I=s(Te,2),D=a(I);p((q,Z,$)=>{b(J,e(U).name),b(se,`${q??""}
                  /
                  ${Z??""}`),b(D,`最終使用日時 ： ${$??""}`)},[()=>e(U).cardNames.filter(q=>{var Z,$;return!(($=(Z=e(V).getCardInfo(q))==null?void 0:Z.monsterCategories)!=null&&$.union(aa).length)}).length,()=>e(U).cardNames.filter(q=>{var Z,$;return($=(Z=e(V).getCardInfo(q))==null?void 0:Z.monsterCategories)==null?void 0:$.union(aa).length}).length,()=>e(U).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],le),r(ge,N)}),r(ie,je)},ve=ie=>{var je=sn(),ge=s(a(je),2),U=a(ge);pr(U,()=>e(_),N=>C(_,N)),X("change",U,S),X("cancel",U,n),X("drop",je,A),X("dragover",je,B),r(ie,je)};w(Me,ie=>{e(Y).length?ie(xe):ie(ve,!1)})}r(E,ce)}),r(y,te)}),r(L,O)},footer:(L,z)=>{var O=dn(),c=a(O);mt(c,()=>e(v),null,(y,V)=>{var te=De(),$e=P(te);{var E=ce=>{var Me=ln(),xe=P(Me),ve=s(xe,2),ie=s(ve,2);p(()=>{xe.disabled=e(V).length===0,ve.disabled=e(V).length===0}),X("click",xe,()=>g()({deckInfos:e(V),replaceAll:!1})),X("click",ve,()=>g()({deckInfos:e(V),replaceAll:!0})),X("click",ie,n),r(ce,Me)},Y=ce=>{var Me=De(),xe=P(Me);{var ve=ie=>{var je=on();X("click",je,()=>g()(void 0)),r(ie,je)};w(xe,ie=>{o().cancelable&&ie(ve)},!0)}r(ce,Me)};w($e,ce=>{e(V).length?ce(E):ce(Y,!1)})}r(y,te)}),r(L,O)}}}),ut()}const pa=class pa extends yr{constructor(i,t){super(i,...Object.values(t))}};nt(pa,"createModalController",i=>{const t={deckUploader:new hr({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new pa(i,t),t)});let Da=pa;function cn(f,i){ct(i,!1);let t=Ae(i,"modalController",8);_t(),gr(f,{get modalController(){return t()},children:(o,g)=>{var v=De(),_=P(v);{var d=B=>{vn(B,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};w(_,B=>{t().deckUploader.state==="Shown"&&B(d)})}r(o,v)},$$slots:{default:!0}}),ut()}var _n=l("<button> </button>"),un=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),fn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),mn=l('<div class="deck_editor_search_box_row monster_ex_categories svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">エクストラ</button></div> <div class="svelte-1m129ml"></div></div>'),pn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),gn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> <div style="display: inline-block;"></div> </label>'),yn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),hn=l('<option class="svelte-1m129ml"></option>'),bn=l('<option class="svelte-1m129ml"></option>'),kn=l('<div class="deck_editor_search_box_row monster_categories svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">モンスター</button></div> <div class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row monster_attributes svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">属性</button></div> <div class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">種族</button></div> <div class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">星攻守</button></div> <div class="svelte-1m129ml"><div class="star_range svelte-1m129ml"><span class="svelte-1m129ml">星</span> <select class="svelte-1m129ml"></select> <span class="svelte-1m129ml">～</span> <select class="svelte-1m129ml"></select></div> <div class="atk_range svelte-1m129ml"><span class="svelte-1m129ml">攻</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"> <span class="svelte-1m129ml">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"></div> <div class="def_range svelte-1m129ml"><span class="svelte-1m129ml">守</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"> <span class="svelte-1m129ml">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"></div> <div class="atk_plus_def svelte-1m129ml"><span class="svelte-1m129ml">攻+守</span> <input type="number" min="0" max="10000" step="100" class="svelte-1m129ml"></div></div></div>',1),wn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),Cn=l('<div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">魔法</button></div> <div class="svelte-1m129ml"></div></div>'),xn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),Dn=l('<div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">罠</button></div> <div class="svelte-1m129ml"></div></div>'),$n=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),Sn=l('<div class="deck_editor_card_detail svelte-1m129ml"><!></div>'),Mn=l("<div>カード情報読込中</div>"),Tn=l("<option> </option>"),En=l('<div class="svelte-1m129ml"><a class="white_button svelte-1m129ml" download="SVS_DeckInfos.json">ダウンロード</a></div>'),jn=l('<div class="svelte-1m129ml"></div>'),An=l('<div class="svelte-1m129ml"><a class="white_button svelte-1m129ml" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),Bn=l('<div class="svelte-1m129ml"></div>'),Ln=l('<div class="deck_editor_body_right_header svelte-1m129ml"><div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">編集対象</div> <div class="svelte-1m129ml"><select style="width:100%" class="svelte-1m129ml"></select></div></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">新規名称</div> <div class="svelte-1m129ml"><input type="text" style="width:100%" class="svelte-1m129ml"></div></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">基本操作</div> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml">デッキを保存</button></div> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml">デッキを複製</button></div> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">DL/UL</div> <!> <!> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml">アップロード</button></div></div></div> <div><!></div>',1),Yn=l("<div>デッキ情報読込中</div>"),qn=l('<div class="deck_editor_body_right_dummy svelte-1m129ml"></div>'),Un=l("<div><!></div>"),Hn=l('<div><div class="deck_editor_header svelte-1m129ml"></div> <div class="deck_editor_body svelte-1m129ml"><div class="deck_editor_body_left svelte-1m129ml"><div role="contentinfo" class="deck_editor_search_box svelte-1m129ml"><div class="deck_editor_search_box_header svelte-1m129ml"><div class="svelte-1m129ml"><button class="deck_editor_search_box_title svelte-1m129ml">検索条件</button></div> <div class="deck_editor_sort_setting_container svelte-1m129ml"></div></div> <div class="deck_editor_search_box_body svelte-1m129ml"><div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">名称</button></div> <div class="svelte-1m129ml"><input type="text" style="width:100%" placeholder="※ルビには対応していません" class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row card_kind svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">種類</button></div> <div class="svelte-1m129ml"></div></div> <!> <!> <!> <!> <div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">その他</button></div> <div class="svelte-1m129ml"></div></div></div></div> <!></div> <div class="deck_editor_body_center svelte-1m129ml"><div class="deck_editor_body_center_body svelte-1m129ml"><!></div></div>  <div class="deck_editor_body_right svelte-1m129ml"><!></div></div> <div class="footer svelte-1m129ml"></div></div> <!> <!>',1);function Pn(f,i){ct(i,!1);const t=[],o=[],g=[],v=[],_=[],d=[],B=[],A=[],S=Da.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),M={name:"",deckCardKinds:[...ta],exMonsterCategories:[...aa],monsterCategories:Ha.filter(h=>!aa.includes(h)),monsterAttributes:[...Ua],monsterTypes:[...qa],spellCategories:Ya.filter(h=>h!=="PendulumScale"),trapCategories:[...La],starLowerBound:0,starUpperBound:13,atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:["oldVersion"],sort:[...Pa]},n=oe(structuredClone(M));we(n,e(n).monsterCategories=["Effect","Tuner","Pendulum"]);let L=oe("DeckEdit"),z=oe("SearchCondition");const O=()=>{if(!e(n).deckCardKinds.length){Xt(e(n)).forEach(h=>{Array.isArray(e(n)[h])&&Array.isArray(M[h])?we(n,e(n)[h]=[...M[h]]):we(n,e(n)[h]=M[h])});return}we(n,e(n).name=""),we(n,e(n).deckCardKinds=[]),we(n,e(n).exMonsterCategories=[]),we(n,e(n).monsterCategories=[]),we(n,e(n).monsterAttributes=[]),we(n,e(n).monsterTypes=[]),we(n,e(n).spellCategories=[]),we(n,e(n).trapCategories=[]),we(n,e(n).others=[]),we(n,e(n).atkLowerBound=0),we(n,e(n).atkUpperBound=5e3),we(n,e(n).defLowerBound=0),we(n,e(n).defUpperBound=5e3),we(n,e(n).atkPlusDef=void 0),we(n,e(n).sort=[...Pa])},c=h=>{h.forEach(k=>{Array.isArray(e(n)[k])&&Array.isArray(M[k])?we(n,e(n)[k]=e(n)[k].length?[]:[...M[k]]):we(n,e(n)[k]=M[k])})};let y=oe(),V,te=oe(!1);const $e=200,E=()=>{C(te,!1),C(y,void 0),V=void 0},Y=(h,k)=>{const K=fa(k),ee=e(J).cardTree[K].filter(Pe=>Pe.name===k.name).length;let pe=h.shiftKey?3-ee:1;console.debug(k,K,ee,pe),!h.ctrlKey&&ee>2&&(pe=0),pe&&we(J,e(J).cardTree[K]=[...e(J).cardTree[K],...Array(pe).fill(k)].sort(Qa)),E(),I(k)},ce=(h,k)=>{const K=fa(k);let ee=0;we(J,e(J).cardTree[K]=e(J).cardTree[K].filter(pe=>pe.name!==k.name?!0:(ee++,!h.shiftKey&&ee>1))),E(),I(k)},Me=h=>{if(h.changedTouches&&h.changedTouches.length!==1)return;const{clientX:k,clientY:K}=h.changedTouches?h.changedTouches[0]:h;return{clientX:k,clientY:K}},xe={onCardAppend:Y,onCardRemove:ce,onCardDragCancel:E,onCardDragStart:(h,k,K)=>{if(I(K),k!=="List"&&k!=="Deck"){E();return}if(k==="List"&&!K.isImplemented){E();return}const ee=Me(h);if(!ee){E();return}V={from:k,cardInfo:K,pos:ee,startPos:ee},ea($e).then(()=>{(V==null?void 0:V.cardInfo)===K&&C(y,V)}),C(te,!1)},onCardDragging:(h,k)=>{if(e(y)&&h.preventDefault&&h.preventDefault(),e(y)&&h.stopPropagation&&h.stopPropagation(),!V){E();return}const K=Me(h);if(!K){E();return}const ee=e(y)||V;C(te,!!(ee.from==="List"&&ee.cardInfo.isImplemented&&document.elementsFromPoint(K.clientX,K.clientY).some(pe=>pe.classList.contains("deck_editor_body_right_body")||pe.classList.contains("deck_editor_body_right_dummy")))),e(te)&&C(L,"DeckEdit"),e(y)?C(y,{...e(y),pos:K}):V.pos={...K}},onCardDragEnd:h=>{if(!V||!e(y)){E();return}const k=Me(h);if(!k){E();return}e(y).from==="List"&&e(y).cardInfo.isImplemented&&document.elementsFromPoint(k.clientX,k.clientY).some(K=>K.classList.contains("deck_editor_body_right_body"))&&Y(h,e(y).cardInfo),e(y).from==="Deck"&&!document.elementsFromPoint(k.clientX,k.clientY).some(K=>K.classList.contains("deck_editor_body_right_body"))&&ce(h,e(y).cardInfo),E()}},ve=(h,k,K)=>{Array.isArray(e(n)[k])&&Array.isArray(M[k])&&we(n,e(n)[k]=[K])},ie=async()=>{const k=(await e(U)).find(ee=>ee.id===e(ge));if(!k)return;const K=await oa;C(J,{...k,cardTree:kr(k.cardNames.map(ee=>{const pe=K.getCardInfo(ee);return pe===void 0&&console.error(ee),pe}).filter(ee=>ee!==void 0))})},je=()=>Dt.getAllDeckInfo().then(h=>(C(ge,(h.find(k=>k.lastUsedAt.getTime()===Math.max(...h.map(K=>K.lastUsedAt.getTime())))??h[0]).id),h));let ge=oe(-1),U=oe(je()),N=oe(e(U).then(h=>Dt.convertToObjectURL(h)));e(U).then(ie);const G=()=>{C(U,je()),C(N,e(U).then(h=>Dt.convertToObjectURL(h))),ie()};let J=oe({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardTree:{ExtraMonster:[],Monster:[],Spell:[],Trap:[]}}),Te=oe(void 0),se=0;const I=h=>{C(z,"CardDetail"),h.cardId!==void 0&&!h.description&&!h.pendulumDescription&&(se=h.cardId,wa([h.cardId]).then(()=>{h.cardId===se&&C(Te,h)})),C(Te,h)},D=async()=>{const k=(await e(U)).find(K=>K.id===e(ge));if(!k)throw new Error("illegal state");return k},q=async()=>{const h=await D();await h.saveDeckInfo({...h,name:e(J).name,cardNames:Object.values(e(J).cardTree).flatMap(k=>k).map(k=>k.name),lastUsedAt:new Date}),G()},Z=async()=>{(await Dt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,Object.values(e(J).cardTree).flatMap(k=>k).map(k=>k.name))).saveDeckInfo(),G()},$=async h=>{const k=await D();!h.shiftKey&&!confirm(`デッキ【${k.name}】を削除します。
よろしいですか？`)||(await k.delete(),G())},Q=async()=>{const h=await S.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!h)return;const k=[];if(h.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;k.push(...(await e(U)).map(K=>K.id))}await Promise.all(h.deckInfos.map(K=>Dt.createNewDeck(K.name,K.description,K.cardNames,K.lastUsedAt))),k.length&&await Promise.all(k.map(Dt.remove)),G()},F=()=>innerWidth<=1400?"compact":"wide";_t();var R=Hn(),W=P(R),ye=s(a(W),2),T=a(ye),x=a(T),u=a(x),m=a(u),j=a(m),H=s(m,2);ue(H,5,()=>e(n).sort,fe,(h,k,K)=>{var ee=_n(),pe=a(ee);p(()=>{Be(ee,`deck_editor_sort_setting_item ${e(k).order??""} priority_${e(k).priority??""} svelte-1m129ml`),b(pe,`${br[e(k).key]??""}
                ${(e(k).order==="asc"?"▲":"▼")??""}`)}),X("click",ee,()=>{e(n).sort.forEach(Pe=>Pe.priority++),e(k).order=e(k).order==="asc"?"desc":"asc",Et(()=>e(n).sort),e(k).priority=1,Et(()=>e(n).sort)}),r(h,ee)});var me=s(u,2),he=a(me),_e=a(he),ne=a(_e),re=s(_e,2),ae=a(re),Se=s(he,2),Re=a(Se),Ie=a(Re),Ke=s(Re,2);ue(Ke,5,()=>ta,fe,(h,k)=>{var K=un(),ee=a(K),pe,Pe=s(ee);p(()=>{pe!==(pe=e(k))&&(ee.value=(ee.__value=e(k))==null?"":e(k)),b(Pe,` ${Ga[e(k)]??""}`)}),It(t,[],ee,()=>(e(k),e(n).deckCardKinds),be=>we(n,e(n).deckCardKinds=be)),X("dblclick",K,be=>ve(be,"deckCardKinds",e(k))),r(h,K)});var Ue=s(Se,2);{var Ge=h=>{var k=mn(),K=a(k),ee=a(K),pe=s(K,2);ue(pe,5,()=>aa,fe,(Pe,be)=>{var Ne=fn(),ze=a(Ne),Ve,tt=s(ze);p(()=>{Ve!==(Ve=e(be))&&(ze.value=(ze.__value=e(be))==null?"":e(be)),b(tt,` ${da[e(be)]??""}${_a[e(be)]??""}`)}),It(o,[],ze,()=>(e(be),e(n).exMonsterCategories),Je=>we(n,e(n).exMonsterCategories=Je)),X("dblclick",Ne,Je=>ve(Je,"exMonsterCategories",e(be))),r(Pe,Ne)}),X("click",ee,()=>c(["exMonsterCategories"])),de(3,k,()=>Ce,()=>({delay:0,duration:100})),r(h,k)};w(Ue,h=>{e(n).deckCardKinds.includes("ExtraMonster")&&h(Ge)})}var lt=s(Ue,2);{var qe=h=>{var k=kn(),K=P(k),ee=a(K),pe=a(ee),Pe=s(ee,2);ue(Pe,5,()=>Ha.filter(Ee=>!aa.includes(Ee)).filter(Ee=>Ee!=="Token"),fe,(Ee,Ye)=>{var Oe=pn(),Fe=a(Oe),xt,Ft=s(Fe);p(()=>{xt!==(xt=e(Ye))&&(Fe.value=(Fe.__value=e(Ye))==null?"":e(Ye)),b(Ft,` ${da[e(Ye)]??""}${_a[e(Ye)]??""}`)}),It(g,[],Fe,()=>(e(Ye),e(n).monsterCategories),Bt=>we(n,e(n).monsterCategories=Bt)),X("dblclick",Oe,Bt=>ve(Bt,"monsterCategories",e(Ye))),r(Ee,Oe)});var be=s(K,2),Ne=a(be),ze=a(Ne),Ve=s(Ne,2);ue(Ve,5,()=>Ua,fe,(Ee,Ye)=>{var Oe=gn(),Fe=a(Oe),xt,Ft=s(Fe,2),Bt=s(Ft);p(()=>{xt!==(xt=e(Ye))&&(Fe.value=(Fe.__value=e(Ye))==null?"":e(Ye)),Be(Ft,`monster_attr ${e(Ye)??""} svelte-1m129ml`),b(Bt,` ${Sa[e(Ye)]??""}`)}),It(v,[],Fe,()=>(e(Ye),e(n).monsterAttributes),ba=>we(n,e(n).monsterAttributes=ba)),X("dblclick",Oe,ba=>ve(ba,"monsterAttributes",e(Ye))),r(Ee,Oe)});var tt=s(be,2),Je=a(tt),Ht=a(Je),Tt=s(Je,2);ue(Tt,5,()=>qa,fe,(Ee,Ye)=>{var Oe=yn(),Fe=a(Oe),xt,Ft=s(Fe);p(()=>{xt!==(xt=e(Ye))&&(Fe.value=(Fe.__value=e(Ye))==null?"":e(Ye)),b(Ft,` ${ga[e(Ye)]??""}
                    ${Ma[e(Ye)]??""}`)}),It(_,[],Fe,()=>(e(Ye),e(n).monsterTypes),Bt=>we(n,e(n).monsterTypes=Bt)),X("dblclick",Oe,Bt=>ve(Bt,"monsterTypes",e(Ye))),r(Ee,Oe)});var Ct=s(tt,2),gt=a(Ct),pt=a(gt),Pt=s(gt,2),At=a(Pt),Nt=s(a(At),2);p(()=>{e(n),Et(()=>{})}),ue(Nt,4,()=>Array(14),fe,(Ee,Ye,Oe)=>{var Fe=hn();Fe.value=(Fe.__value=Oe)==null?"":Oe,Fe.textContent=Oe,r(Ee,Fe)});var Wt=s(Nt,4);p(()=>{e(n),Et(()=>{})}),ue(Wt,4,()=>Array(14),fe,(Ee,Ye,Oe)=>{var Fe=bn();Fe.value=(Fe.__value=Oe)==null?"":Oe,Fe.textContent=Oe,r(Ee,Fe)});var ot=s(At,2),Qe=s(a(ot),2),dt=s(Qe,4),yt=s(ot,2),ht=s(a(yt),2),Jt=s(ht,4),Ze=s(yt,2),it=s(a(Ze),2);X("click",pe,()=>c(["monsterCategories"])),de(3,K,()=>Ce,()=>({delay:0,duration:100})),X("click",ze,()=>c(["monsterAttributes"])),de(3,be,()=>Ce,()=>({delay:0,duration:100})),X("click",Ht,()=>c(["monsterTypes"])),de(3,tt,()=>Ce,()=>({delay:0,duration:100})),X("click",pt,()=>c(["starLowerBound","starUpperBound","atkLowerBound","atkUpperBound","defLowerBound","defUpperBound","atkPlusDef"])),Rt(Nt,()=>e(n).starLowerBound,Ee=>we(n,e(n).starLowerBound=Ee)),Rt(Wt,()=>e(n).starUpperBound,Ee=>we(n,e(n).starUpperBound=Ee)),Ot(Qe,()=>e(n).atkLowerBound,Ee=>we(n,e(n).atkLowerBound=Ee)),Ot(dt,()=>e(n).atkUpperBound,Ee=>we(n,e(n).atkUpperBound=Ee)),Ot(ht,()=>e(n).defLowerBound,Ee=>we(n,e(n).defLowerBound=Ee)),Ot(Jt,()=>e(n).defUpperBound,Ee=>we(n,e(n).defUpperBound=Ee)),Ot(it,()=>e(n).atkPlusDef,Ee=>we(n,e(n).atkPlusDef=Ee)),de(3,Ct,()=>Ce,()=>({delay:0,duration:100})),r(h,k)};w(lt,h=>{(e(n).deckCardKinds.includes("Monster")||e(n).deckCardKinds.includes("ExtraMonster"))&&h(qe)})}var ke=s(lt,2);{var Le=h=>{var k=Cn(),K=a(k),ee=a(K),pe=s(K,2);ue(pe,5,()=>Ya.filter(Pe=>Pe!=="PendulumScale"),fe,(Pe,be)=>{var Ne=wn(),ze=a(Ne),Ve,tt=s(ze);p(()=>{Ve!==(Ve=e(be))&&(ze.value=(ze.__value=e(be))==null?"":e(be)),b(tt,` ${ya[e(be)]??""}`)}),It(d,[],ze,()=>(e(be),e(n).spellCategories),Je=>we(n,e(n).spellCategories=Je)),X("dblclick",Ne,Je=>ve(Je,"spellCategories",e(be))),r(Pe,Ne)}),X("click",ee,()=>c(["spellCategories"])),de(3,k,()=>Ce,()=>({delay:0,duration:100})),r(h,k)};w(ke,h=>{e(n).deckCardKinds.includes("Spell")&&h(Le)})}var He=s(ke,2);{var We=h=>{var k=Dn(),K=a(k),ee=a(K),pe=s(K,2);ue(pe,5,()=>La,fe,(Pe,be)=>{var Ne=xn(),ze=a(Ne),Ve,tt=s(ze);p(()=>{Ve!==(Ve=e(be))&&(ze.value=(ze.__value=e(be))==null?"":e(be)),b(tt,` ${ha[e(be)]??""}`)}),It(B,[],ze,()=>(e(be),e(n).trapCategories),Je=>we(n,e(n).trapCategories=Je)),X("dblclick",Ne,Je=>ve(Je,"trapCategories",e(be))),r(Pe,Ne)}),X("click",ee,()=>c(["trapCategories"])),de(3,k,()=>Ce,()=>({delay:0,duration:100})),r(h,k)};w(He,h=>{e(n).deckCardKinds.includes("Trap")&&h(We)})}var st=s(He,2),Xe=a(st),et=a(Xe),$t=s(Xe,2);ue($t,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],fe,(h,k)=>{var K=$n(),ee=a(K),pe,Pe=s(ee);p(()=>{pe!==(pe=k.key)&&(ee.value=(ee.__value=k.key)==null?"":k.key),b(Pe,` ${k.text??""}`)}),It(A,[],ee,()=>(k.key,e(n).others),be=>we(n,e(n).others=be)),r(h,K)});var vt=s(x,2);{var St=h=>{var k=Sn(),K=a(k);Zi(K,{get cardInfo(){return e(Te)},onAttention:I,cardControlEventHandlers:xe,get deckCardTree(){return e(J).cardTree}}),r(h,k)};w(vt,h=>{e(z)==="CardDetail"&&e(Te)&&h(St)})}var jt=s(T,2),qt=a(jt),sa=a(qt);mt(sa,()=>oa,h=>{var k=Mn();r(h,k)},(h,k)=>{Wa(h,{mode:"List",get allCardTree(){return e(k).tree},onAttention:I,get searchCondition(){return e(n)},cardControlEventHandlers:xe,get deckCardTree(){return e(J).cardTree},set deckCardTree(K){we(J,e(J).cardTree=K)},$$legacy:!0})});var Ut=s(jt,2),Qt=a(Ut);{var kt=h=>{var k=De(),K=P(k);mt(K,()=>e(U),ee=>{var pe=Yn();r(ee,pe)},(ee,pe)=>{var Pe=Ln(),be=P(Pe),Ne=a(be),ze=s(a(Ne),2),Ve=a(ze);p(()=>{e(ge),Et(()=>{e(pe)})}),ue(Ve,5,()=>e(pe),fe,(Ze,it)=>{var Ee=Tn(),Ye={},Oe=a(Ee);p(()=>{Ye!==(Ye=e(it).id)&&(Ee.value=(Ee.__value=e(it).id)==null?"":e(it).id),b(Oe,e(it).name)}),r(Ze,Ee)});var tt=s(Ne,2),Je=s(a(tt),2),Ht=a(Je),Tt=s(tt,4),Ct=s(a(Tt),2),gt=a(Ct),pt=s(Ct,2),Pt=a(pt),At=s(pt,2),Nt=a(At),Wt=s(Tt,2),ot=s(a(Wt),2);mt(ot,D,Ze=>{var it=jn();r(Ze,it)},(Ze,it)=>{var Ee=En(),Ye=a(Ee);p(Oe=>rt(Ye,"href",Oe),[()=>Dt.convertToObjectURL([e(it)])],le),r(Ze,Ee)});var Qe=s(ot,2);mt(Qe,()=>e(N),Ze=>{var it=Bn();r(Ze,it)},(Ze,it)=>{var Ee=An(),Ye=a(Ee);p(()=>rt(Ye,"href",e(it))),r(Ze,Ee)});var dt=s(Qe,2),yt=a(dt),ht=s(be,2),Jt=a(ht);Wa(Jt,{mode:"Deck",allCardTree:{ExtraMonster:[],Monster:[],Spell:[],Trap:[]},onAttention:I,cardControlEventHandlers:xe,get deckCardTree(){return e(J).cardTree},set deckCardTree(Ze){we(J,e(J).cardTree=Ze)},$$legacy:!0}),p(()=>Be(ht,`deck_editor_body_right_body ${(e(te)?"can_drop":"")??""} svelte-1m129ml`)),Rt(Ve,()=>e(ge),Ze=>C(ge,Ze)),X("change",Ve,ie),Ot(Ht,()=>e(J).name,Ze=>we(J,e(J).name=Ze)),X("click",gt,q),X("click",Pt,Z),X("click",Nt,$),X("click",yt,Q),r(ee,Pe)}),r(h,k)},Mt=h=>{var k=qn();r(h,k)};w(Qt,h=>{e(L)==="DeckEdit"||F()==="wide"?h(kt):h(Mt,!1)})}var wt=s(W,2);{var ia=h=>{var k=Un(),K=a(k);Ja(K,{mode:"Dragging",get cardInfo(){return e(y).cardInfo},onAttention:I,cardControlEventHandlers:xe}),p(()=>rt(k,"style",`position: fixed;
          top:${e(y).pos.clientY??""}px;
          left:${e(y).pos.clientX??""}px;
          z-index:3; 
          filter: opacity(0.8);
        	transform: translateX(-50%) translateY(-50%);`)),r(h,k)};w(wt,h=>{e(y)&&h(ia)})}var na=s(wt,2);cn(na,{modalController:S}),p((h,k,K)=>Be(W,`deck_editor
         screen_size_${h??""}
         left_pain_mode_${k??""}
         main_view_mode_${K??""}
         ${(e(y)?"dragging_card":"")??""}
          svelte-1m129ml`),[F,()=>e(z).toLowerCase(),()=>e(L).toLowerCase()],le),X("click",j,O),X("click",ne,()=>c(["name"])),Ot(ae,()=>e(n).name,h=>we(n,e(n).name=h)),X("click",Ie,()=>c(["deckCardKinds"])),X("click",et,()=>c(["others"])),de(3,st,()=>Ce,()=>({delay:0,duration:100})),X("focusin",x,()=>{C(z,"SearchCondition"),C(L,"SearchCondition")}),X("click",x,()=>{C(z,"SearchCondition"),C(L,"SearchCondition")}),X("click",Ut,()=>{C(L,"DeckEdit")}),X("focusin",Ut,()=>{C(L,"DeckEdit")}),X("touchmove",W,h=>e(y)&&xe.onCardDragging(h,"Overlay")),X("mousemove",W,h=>e(y)&&xe.onCardDragging(h,"Overlay")),r(f,R),ut()}const Nn=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],Fn=3;var In=l('<input class="game_mode_radio svelte-sy4ydn" type="radio" name="game_mode"> <label> </label>',1),On=l('<option class="svelte-sy4ydn"> </option>'),Rn=l('<option class="svelte-sy4ydn"> </option>'),Kn=l('<option class="svelte-sy4ydn"> </option>'),Wn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_deck_selector" class="deck_selector svelte-sy4ydn"><option class="svelte-sy4ydn">デフォルト</option><!></select></div></td></tr>'),zn=l('<option class="svelte-sy4ydn"> </option>'),Vn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">対戦相手：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select> <div class="svelte-sy4ydn"> </div></div></td></tr> <!> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">先攻後攻：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select></div></td></tr>',1),Xn=l('<option class="svelte-sy4ydn"> </option>'),Gn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-sy4ydn">難易度：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="difficulty_selector" class="difficulty_selector svelte-sy4ydn"></select></div></td></tr>'),Qn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label class="config_row_label svelte-sy4ydn" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"></div></td></tr> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="deck_selector" class="deck_selector svelte-sy4ydn"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">duel start!</button></div></td></tr>',1),Jn=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),Zn=l('<tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">deck edit</button></div></td></tr>'),el=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="duelist_name" class="config_row_label duelist_name svelte-sy4ydn">名前：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><input id="duelist_name" class="duelist_name svelte-sy4ydn" type="text"></div></td></tr> <!> <!>',1),tl=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),al=l('<div class="app_body svelte-sy4ydn"><table class="config_table svelte-sy4ydn"><tbody><!></tbody></table></div>'),rl=l('<span class="svelte-sy4ydn"> </span> <span class="svelte-sy4ydn"> </span>',1),sl=l('<div class="result_title result_win svelte-sy4ydn">YOU WIN</div>'),il=l('<div class="result_title result_lose svelte-sy4ydn">YOU LOSE</div>'),nl=l('<div class="result_title result_draw svelte-sy4ydn">DRAW</div>'),ll=l('<div class="twitter_share_button_wrapper svelte-sy4ydn"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-sy4ydn">X(twitter)でシェアする</a></div>'),ol=l('<div class="result svelte-sy4ydn"><!> <div class="reason_of_end svelte-sy4ydn"> </div> <!> <div class="svelte-sy4ydn"><button class="white_button svelte-sy4ydn">TOPへ戻る</button></div></div>'),dl=l('<main style="flex-direction: column; display :flex" class="svelte-sy4ydn"><div class="link link_left svelte-sy4ydn"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-sy4ydn">posfie(toggeter)</a></div> <div class="link link_right svelte-sy4ydn"><a class="a_button svelte-sy4ydn" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">現時点とこの先のこと</a></div> <!> <div class="footer card_summary svelte-sy4ydn"><!></div> <div class="footer debug_info svelte-sy4ydn"><span class="svelte-sy4ydn"> </span> <span class="user_agent_info svelte-sy4ydn"> </span> <span class="screen_info svelte-sy4ydn"> </span></div> <!></main>');function vl(f,i){ct(i,!1);const t=new wr("stk_ygo_svelte",Fn,Nn);let o=oe(0),g=oe(0),v=oe(),_=oe("FtkChallenge"),d=oe("None"),B=oe(0),A=oe(""),S=oe(void 0);const M="https://setta238.github.io/stk_ygo_svelte/",n="遊戯王deそりてあ",L="ninja_no",z=Cr.getOrCreateNew(t).then(T=>(C(_,Na.includes(T.previousGameMode)?T.previousGameMode:"FtkChallenge"),je(T.previousNpcId),T)),O=T=>{var u;const x=T.find(m=>m.lastUsedAt.getTime()===Math.max(...T.map(j=>j.lastUsedAt.getTime())))??T[0];C(B,x.id),e(_)==="FtkChallenge"&&x.deckType!=="Preset"&&C(B,((u=zt.find(m=>m.deckType==="Preset"))==null?void 0:u.id)??e(B))};let c=oe(Dt.getAllDeckInfo(t).then(T=>(Promise.all(T.filter(x=>!x.lastUsedAt).map(x=>{x.saveDeckInfo()})),O(T),T)));const y=async()=>{const T=e(B);let x=(await e(c)).find(m=>m.id===T)??(await te()).find(m=>m.id===T);x&&await x.updateTimestamp();let u=x;if(u||(u=zt.find(m=>m.id===T)),!u)throw new Error("illegal state");return u},V=async()=>{(await z).save({previousGameMode:e(_)})},te=()=>(C(c,Dt.getAllDeckInfo(t).then(T=>(O(T),T))),e(c)),$e=async()=>{(await e(c)).length||(await Dt.prepareSampleDeck(),te())},E=async()=>{await Promise.all([V(),$e()]);const T=await y(),x=await z;let u=Zt.find(H=>H.id===Number.MIN_SAFE_INTEGER)??Zt[0],m=zt.find(H=>H.id===Number.MIN_SAFE_INTEGER)??zt[0],j="PlayFirst";e(_)==="FtkChallenge"?u=Zt.filter(H=>H.npcType==="FtkChallenge").find(H=>H.difficulty===x.previousDifficulty)??u:e(_)==="Free"&&(u=Zt.find(H=>H.id===x.previousNpcId)??u,m=zt.slice(-1)[0],j=x.previousStartMode),u.npcType!=="FtkChallenge"&&x.previousNpcDeckId>-1?m=(await e(c)).find(H=>H.id===x.previousNpcDeckId)??m:m=zt.find(H=>H.id===u.id)??m,C(v,new Sr(x,"Player",T,[],u,"NPC",m,[],j)),e(v).onDuelEnd.append(()=>(C(v,e(v)),"RemoveMe"))},Y=async()=>{await Promise.all([V(),$e()]),C(d,"DeckEdit")},ce=async T=>{await V(),T.key==="Enter"&&!T.repeat&&(await z).save()},Me=()=>{C(c,te()),C(v,void 0),C(d,"None")};let xe=Date.now();const ve=T=>{Date.now()-xe<200||(xe=Date.now(),C(_,T),te())},ie=T=>{je(Number(T.currentTarget.value))},je=T=>{var x;C(S,Zt.find(u=>u.id===T)),C(A,((x=e(S))==null?void 0:x.description)??"")};$e(),_t();var ge=dl(),U=s(a(ge),2),N=a(U),G=s(U,2);{var J=T=>{var x=De(),u=P(x);mt(u,()=>z,null,(m,j)=>{xi(m,{get duel(){return e(v)},get userProfile(){return e(j)}})}),r(T,x)},Te=T=>{var x=De(),u=P(x);{var m=H=>{Pn(H,{})},j=H=>{var me=al(),he=a(me),_e=a(he),ne=a(_e);mt(ne,()=>z,re=>{var ae=tl();r(re,ae)},(re,ae)=>{var Se=el(),Re=P(Se),Ie=a(Re),Ke=a(Ie),Ue=s(Ie),Ge=a(Ue),lt=a(Ge),qe=s(Re,2);mt(qe,()=>e(c),He=>{var We=Jn();r(He,We)},(He,We)=>{var st=Qn(),Xe=P(st),et=a(Xe),$t=a(et),vt=s(et),St=a(vt);ue(St,5,()=>Na,fe,(ee,pe)=>{var Pe=In(),be=P(Pe),Ne=s(be,2),ze=a(Ne);p(Ve=>{rt(be,"id",`game_mode_radio_${Ve??""}`),Dr(be,e(pe)),$r(be,e(_)===e(pe)),Be(Ne,`game_mode_tab_label game_mode_tab_${Ve??""} svelte-sy4ydn`),rt(Ne,"for",`game_mode_radio_${Ve??""}`),b(ze,e(pe))},[()=>e(pe).toLowerCase()],le),X("change",be,()=>ve(e(pe))),r(ee,Pe)});var jt=s(Xe,2),qt=a(jt),sa=a(qt),Ut=s(qt),Qt=a(Ut),kt=a(Qt);p(()=>{e(B),Et(()=>{e(_),e(We)})}),ue(kt,5,()=>e(_)==="FtkChallenge"?zt.filter(ee=>ee.deckType==="Preset"):e(We),fe,(ee,pe)=>{var Pe=On(),be={},Ne=a(Pe);p(()=>{be!==(be=e(pe).id)&&(Pe.value=(Pe.__value=e(pe).id)==null?"":e(pe).id),b(Ne,e(pe).name)}),r(ee,Pe)});var Mt=s(jt,2);{var wt=ee=>{var pe=Vn(),Pe=P(pe),be=a(Pe),Ne=a(be),ze=s(be),Ve=a(ze),tt=a(Ve);p(()=>{e(ae),Et(()=>{})}),ue(tt,5,()=>Zt,fe,(ot,Qe)=>{var dt=Rn(),yt={},ht=a(dt);p(()=>{yt!==(yt=e(Qe).id)&&(dt.value=(dt.__value=e(Qe).id)==null?"":e(Qe).id),b(ht,e(Qe).name)}),r(ot,dt)});var Je=s(tt,2),Ht=a(Je),Tt=s(Pe,2);{var Ct=ot=>{var Qe=Wn(),dt=a(Qe),yt=a(dt),ht=s(dt),Jt=a(ht),Ze=a(Jt);p(()=>{e(ae),Et(()=>{e(We)})});var it=a(Ze);it.value=(it.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Ee=s(it);ue(Ee,1,()=>e(We),fe,(Ye,Oe)=>{var Fe=Kn(),xt={},Ft=a(Fe);p(()=>{xt!==(xt=e(Oe).id)&&(Fe.value=(Fe.__value=e(Oe).id)==null?"":e(Oe).id),b(Ft,e(Oe).name)}),r(Ye,Fe)}),de(3,yt,()=>Ce,()=>({duration:200})),de(3,dt,()=>Ce,()=>({duration:200})),Rt(Ze,()=>e(ae).previousNpcDeckId,Ye=>e(ae).previousNpcDeckId=Ye),de(3,Jt,()=>Ce,()=>({duration:200})),de(3,ht,()=>Ce,()=>({duration:200})),de(3,Qe,()=>Ce,()=>({duration:200})),r(ot,Qe)};w(Tt,ot=>{var Qe;((Qe=e(S))==null?void 0:Qe.npcType)!=="FtkChallenge"&&ot(Ct)})}var gt=s(Tt,2),pt=a(gt),Pt=a(pt),At=s(pt),Nt=a(At),Wt=a(Nt);p(()=>{e(ae),Et(()=>{})}),ue(Wt,5,()=>Xt(Fa),fe,(ot,Qe)=>{var dt=zn(),yt={},ht=a(dt);p(()=>{yt!==(yt=e(Qe))&&(dt.value=(dt.__value=e(Qe))==null?"":e(Qe)),b(ht,Fa[e(Qe)])}),r(ot,dt)}),p(()=>b(Ht,`※${e(A)??""}`)),de(3,Ne,()=>Ce,()=>({duration:200})),de(3,be,()=>Ce,()=>({duration:200})),X("change",tt,ie),Rt(tt,()=>e(ae).previousNpcId,ot=>e(ae).previousNpcId=ot),de(3,Ve,()=>Ce,()=>({duration:200})),de(3,ze,()=>Ce,()=>({duration:200})),de(3,Pe,()=>Ce,()=>({duration:200})),de(3,Pt,()=>Ce,()=>({duration:200})),de(3,pt,()=>Ce,()=>({duration:200})),Rt(Wt,()=>e(ae).previousStartMode,ot=>e(ae).previousStartMode=ot),de(3,Nt,()=>Ce,()=>({duration:200})),de(3,At,()=>Ce,()=>({duration:200})),de(3,gt,()=>Ce,()=>({duration:200})),r(ee,pe)},ia=ee=>{var pe=De(),Pe=P(pe);{var be=Ne=>{var ze=Gn(),Ve=a(ze),tt=a(Ve),Je=s(Ve),Ht=a(Je),Tt=a(Ht);p(()=>{e(ae),Et(()=>{})}),ue(Tt,5,()=>Mr,fe,(Ct,gt)=>{var pt=Xn(),Pt={},At=a(pt);p(()=>{Pt!==(Pt=e(gt))&&(pt.value=(pt.__value=e(gt))==null?"":e(gt)),b(At,e(gt))}),r(Ct,pt)}),de(3,tt,()=>Ce,()=>({duration:200})),de(3,Ve,()=>Ce,()=>({duration:200})),Rt(Tt,()=>e(ae).previousDifficulty,Ct=>e(ae).previousDifficulty=Ct),de(3,Ht,()=>Ce,()=>({duration:200})),de(3,Je,()=>Ce,()=>({duration:200})),de(3,ze,()=>Ce,()=>({duration:200})),r(Ne,ze)};w(Pe,Ne=>{e(_)==="FtkChallenge"&&Ne(be)},!0)}r(ee,pe)};w(Mt,ee=>{e(_)==="Free"?ee(wt):ee(ia,!1)})}var na=s(Mt,2),h=a(na),k=a(h),K=a(k);de(3,$t,()=>Ce,()=>({duration:200})),de(3,et,()=>Ce,()=>({duration:200})),de(3,St,()=>Ce,()=>({duration:200})),de(3,vt,()=>Ce,()=>({duration:200})),de(3,Xe,()=>Ce,()=>({duration:200})),de(3,sa,()=>Ce,()=>({duration:200})),de(3,qt,()=>Ce,()=>({duration:200})),Rt(kt,()=>e(B),ee=>C(B,ee)),de(3,Qt,()=>Ce,()=>({duration:200})),de(3,Ut,()=>Ce,()=>({duration:200})),de(3,jt,()=>Ce,()=>({duration:200})),X("click",K,E),de(3,k,()=>Ce,()=>({duration:200})),r(He,st)});var ke=s(qe,2);{var Le=He=>{var We=Zn(),st=a(We),Xe=a(st),et=a(Xe);X("click",et,Y),de(3,Xe,()=>Ce,()=>({duration:200})),de(3,st,()=>Ce,()=>({duration:200})),de(3,We,()=>Ce,()=>({duration:200})),r(He,We)};w(ke,He=>{e(_)==="Free"&&He(Le)})}de(3,Ke,()=>Ce,()=>({duration:200})),de(3,Ie,()=>Ce,()=>({duration:200})),Ot(lt,()=>e(ae).name,He=>e(ae).name=He),X("keypress",lt,ce),de(3,Ge,()=>Ce,()=>({duration:200})),de(3,Ue,()=>Ce,()=>({duration:200})),de(3,Re,()=>Ce,()=>({duration:200})),r(re,Se)}),r(H,me)};w(u,H=>{e(d)==="DeckEdit"?H(m):H(j,!1)},!0)}r(T,x)};w(G,T=>{e(v)?T(J):T(Te,!1)})}var se=s(G,2),I=a(se);mt(I,()=>oa,T=>{var x=at("読み込み中");r(T,x)},(T,x)=>{var u=rl(),m=P(u),j=a(m),H=s(m,2),me=a(H);p((he,_e,ne)=>{b(j,`公式DB上のカード${he??""}枚`),b(me,`実装済カード（効果あり）${_e??""}枚 （効果なし）${ne??""}枚`)},[()=>e(x).knmCount.toLocaleString(),()=>e(x).definitionCount.toLocaleString(),()=>e(x).nonDefinitionCount.toLocaleString()],le),r(T,u)});var D=s(se,2),q=a(D),Z=a(q),$=s(q,2),Q=a($),F=s($,2),R=a(F),W=s(D,2);{var ye=T=>{var x=ol(),u=a(x);{var m=ae=>{var Se=De(),Re=P(Se);{var Ie=Ue=>{var Ge=sl();r(Ue,Ge)},Ke=Ue=>{var Ge=De(),lt=P(Ge);{var qe=ke=>{var Le=il();r(ke,Le)};w(lt,ke=>{e(v).winner.seat==="Above"&&ke(qe)},!0)}r(Ue,Ge)};w(Re,Ue=>{e(v).winner.seat==="Below"?Ue(Ie):Ue(Ke,!1)})}r(ae,Se)},j=ae=>{var Se=nl();r(ae,Se)};w(u,ae=>{e(v).winner?ae(m):ae(j,!1)})}var H=s(u,2),me=a(H),he=s(H,2);{var _e=ae=>{var Se=ll(),Re=a(Se);p(()=>rt(Re,"href",`https://x.com/share?url=${M}&text=${e(v).twitterShareText??""}&hashtags=${n}&via=${L}`)),r(ae,Se)};w(he,ae=>{e(v).twitterShareText&&ae(_e)})}var ne=s(he,2),re=a(ne);p(()=>b(me,e(v).reasonOfEnd)),X("click",re,Me),de(3,x,()=>jr,()=>({delay:200,duration:200})),r(T,x)};w(W,T=>{e(v)&&e(v).isEnded&&T(ye)})}p(()=>{b(Z,"build at: 20260125_214327"),b(Q,xr.text),b(R,`w:${e(o)??""}px h:${e(g)??""}px`)}),ua("innerWidth",T=>C(o,T)),ua("innerHeight",T=>C(g,T)),X("click",N,Me),r(f,ge),ut()}Tr(vl,{target:document.getElementById("app")});
