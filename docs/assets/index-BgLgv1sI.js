var Oa=Object.defineProperty;var ka=d=>{throw TypeError(d)};var Ra=(d,s,t)=>s in d?Oa(d,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[s]=t;var Ze=(d,s,t)=>Ra(d,typeof s!="symbol"?s+"":s,t),wa=(d,s,t)=>s.has(d)||ka("Cannot "+t);var lt=(d,s,t)=>(wa(d,s,"read from private field"),t?t.call(d):s.get(d)),Ot=(d,s,t)=>s.has(d)?ka("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(d):s.set(d,t),na=(d,s,t,v)=>(wa(d,s,"write to private field"),v?v.call(d,t):s.set(d,t),t);import{s as Da,r as Wa,a as S,b as Ka,l as za,g as e,d as Pa,p as dt,c as He,m as De,i as ct,t as o,e as a,f as x,h as f,j as pe,k as Ae,n as yt,o as ke,q as r,u as _t,v as Me,D as Va,w as Te,x as L,y as i,z as oe,A as Ut,B as re,C as ve,E as y,F as Ga,G as tt,H as ca,I as Xa,J as Qa,K as Lt,L as vt,M as Rt,N as qa,O as _a,P as ea,Q as ua,R as ta,S as fa,T as aa,U as ra,V as Ja,W as Za,X as er,Y as tr,Z as ar,_ as rr,$ as ir,a0 as Xt,a1 as Fa,a2 as sr,a3 as nr,a4 as Qt,a5 as oa,a6 as Ct,a7 as or,a8 as lr,a9 as vr,aa as xt,ab as dr,ac as cr,ad as _r,ae as Ca,af as $a,ag as Sa,ah as Ma,ai as Ta,aj as ja,ak as At,al as Ft,am as Ht,an as wt,ao as ur,ap as fr,aq as Ba,ar as qt,as as Yt,at as pr,au as yr,av as gr,aw as Ea,ax as mr,ay as hr,az as br}from"../chunk/entity_proc_20260102_225715.js";import"../chunk/json_20260102_225715.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))v(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const _ of c.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&v(_)}).observe(document,{childList:!0,subtree:!0});function t(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function v(u){if(u.ep)return;u.ep=!0;const c=t(u);fetch(u.href,c)}})();const xr=d=>d;function pa(d){const s=d-1;return s*s*s+1}function Aa(d){const s=typeof d=="string"&&d.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return s?[parseFloat(s[1]),s[2]||"px"]:[d,"px"]}function kr(d,{delay:s=0,duration:t=400,easing:v=xr}={}){const u=+getComputedStyle(d).opacity;return{delay:s,duration:t,easing:v,css:c=>`opacity: ${c*u}`}}function wr(d,{delay:s=0,duration:t=400,easing:v=pa,x:u=0,y:c=0,opacity:_=0}={}){const l=getComputedStyle(d),A=+l.opacity,V=l.transform==="none"?"":l.transform,w=A*(1-_),[n,W]=Aa(u),[N,P]=Aa(c);return{delay:s,duration:t,easing:v,css:(I,Y)=>`
			transform: ${V} translate(${(1-I)*n}${W}, ${(1-I)*N}${P});
			opacity: ${A-w*Y}`}}function he(d,{delay:s=0,duration:t=400,easing:v=pa,axis:u="y"}={}){const c=getComputedStyle(d),_=+c.opacity,l=u==="y"?"height":"width",A=parseFloat(c[l]),V=u==="y"?["top","bottom"]:["left","right"],w=V.map(B=>`${B[0].toUpperCase()}${B.slice(1)}`),n=parseFloat(c[`padding${w[0]}`]),W=parseFloat(c[`padding${w[1]}`]),N=parseFloat(c[`margin${w[0]}`]),P=parseFloat(c[`margin${w[1]}`]),I=parseFloat(c[`border${w[0]}Width`]),Y=parseFloat(c[`border${w[1]}Width`]);return{delay:s,duration:t,easing:v,css:B=>`overflow: hidden;opacity: ${Math.min(B*20,1)*_};${l}: ${B*A}px;padding-${V[0]}: ${B*n}px;padding-${V[1]}: ${B*W}px;margin-${V[0]}: ${B*N}px;margin-${V[1]}: ${B*P}px;border-${V[0]}-width: ${B*I}px;border-${V[1]}-width: ${B*Y}px;min-${l}: 0`}}function Ya(d,s){for(const t in s)d[t]=s[t];return d}function Dr({fallback:d,...s}){const t=new Map,v=new Map;function u(_,l,A){const{delay:V=0,duration:w=$=>Math.sqrt($)*30,easing:n=pa}=Ya(Ya({},s),A),W=_.getBoundingClientRect(),N=l.getBoundingClientRect(),P=W.left-N.left,I=W.top-N.top,Y=W.width/N.width,B=W.height/N.height,se=Math.sqrt(P*P+I*I),le=getComputedStyle(l),Be=le.transform==="none"?"":le.transform,C=+le.opacity;return{delay:V,duration:typeof w=="function"?w(se):w,easing:n,css:($,Q)=>`
			   opacity: ${$*C};
			   transform-origin: top left;
			   transform: ${Be} translate(${Q*P}px,${Q*I}px) scale(${$+(1-$)*Y}, ${$+(1-$)*B});
		   `}}function c(_,l,A){return(V,w)=>(_.set(w.key,V),()=>{if(l.has(w.key)){const n=l.get(w.key);return l.delete(w.key),u(n,V,w)}return _.delete(w.key),d&&d(V,w,A)})}return[c(v,t,!1),c(t,v,!0)]}function Ua(d){return Object.prototype.toString.call(d)==="[object Date]"}function Cr(d){return d}function la(d){const s=d-1;return s*s*s+1}function va(d,s){if(d===s||d!==d)return()=>d;const t=typeof d;if(t!==typeof s||Array.isArray(d)!==Array.isArray(s))throw new Error("Cannot interpolate values of different type");if(Array.isArray(d)){const v=s.map((u,c)=>va(d[c],u));return u=>v.map(c=>c(u))}if(t==="object"){if(!d||!s)throw new Error("Object cannot be null");if(Ua(d)&&Ua(s)){const c=d.getTime(),l=s.getTime()-c;return A=>new Date(c+A*l)}const v=Object.keys(s),u={};return v.forEach(c=>{u[c]=va(d[c],s[c])}),c=>{const _={};return v.forEach(l=>{_[l]=u[l](c)}),_}}if(t==="number"){const v=s-d;return u=>d+u*v}return()=>s}var $t,It,Wt,Nt;const ya=class ya{constructor(s,t={}){Ot(this,$t,Da(void 0));Ot(this,It,Da(void 0));Ot(this,Wt);Ot(this,Nt,null);lt(this,$t).v=lt(this,It).v=s,na(this,Wt,t)}static of(s,t){const v=new ya(s(),t);return Wa(()=>{v.set(s())}),v}set(s,t){var n;S(lt(this,It),s);let{delay:v=0,duration:u=400,easing:c=Cr,interpolate:_=va}={...lt(this,Wt),...t};if(u===0)return(n=lt(this,Nt))==null||n.abort(),S(lt(this,$t),s),Promise.resolve();const l=Ka.now()+v;let A,V=!1,w=lt(this,Nt);return na(this,Nt,za(W=>{if(W<l)return!0;if(!V){V=!0;const P=lt(this,$t).v;A=_(P,s),typeof u=="function"&&(u=u(P,s)),w==null||w.abort()}const N=W-l;return N>u?(S(lt(this,$t),s),!1):(S(lt(this,$t),A(c(N/u))),!0)})),lt(this,Nt).promise}get current(){return e(lt(this,$t))}get target(){return e(lt(this,It))}set target(s){this.set(s)}};$t=new WeakMap,It=new WeakMap,Wt=new WeakMap,Nt=new WeakMap;let Jt=ya;var $r=o('<div class="phase_display svelte-1ycsdg6"><span class="svelte-1ycsdg6"> </span> </div>'),Sr=o('<div class="lifepoint_display svelte-1ycsdg6"><div class="svelte-1ycsdg6"> </div> <div class="svelte-1ycsdg6"> </div></div>'),Mr=(d,s,t)=>s(e(t)),Tr=o('<div class="svelte-1ycsdg6"><button class="phase_button svelte-1ycsdg6"> </button></div>'),jr=o("<div><!></div>"),Br=o('<div class="svelte-1ycsdg6"><!></div>'),Er=o("<div><!></div>"),Ar=o('<div class="config_button_wrapper svelte-1ycsdg6"><button id="config_button" class="svelte-1ycsdg6">⚙</button></div>'),Yr=o("<!> <!> <!> <!>",1),Ur=o('<div style="position: absolute;" class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Lr=o('<div style="position: absolute; top:0rem" class="svelte-1ycsdg6">｛効果対象｝</div>'),Nr=o('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Pr=o(" <!> 】",1),qr=o('<div style="position: absolute; bottom:0rem" class="svelte-1ycsdg6"> <!></div>'),Fr=o("<!> <!>",1),Hr=o('<div class="badge svelte-1ycsdg6"> </div>'),Ir=o('<div class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Or=o("<!> <!> <!> <!>",1),Rr=o('<td><div role="listitem"><!></div></td>');function Wr(d,s){dt(s,!1);let t=He(s,"view",12),v=He(s,"row",8),u=He(s,"column",8),c=He(s,"selectedEntities",28,()=>[]),_=He(s,"selectedCells",28,()=>[]),l=De(t().getCell(v(),u())),A=De(new Jt(e(l).field.duel.duelists.Above.lp,{duration:400,easing:la})),V=De(new Jt(e(l).field.duel.duelists.Below.lp,{duration:400,easing:la}));const w=()=>{S(l,t().getCell(v(),u())),Me(A,e(A).target=e(l).field.duel.duelists.Above.lp),Me(V,e(V).target=e(l).field.duel.duelists.Below.lp)};e(l).onUpdate.append(w),t().onDuelUpdate.append(w),t().modalController.onUpdate.append(w);let n,W=De([]),N=()=>console.log("hoge"),P,I=De([]),Y=De(!1),B=De(!1),se=!1;const le=D=>{var F,te;S(de,[]),c().reset(),n=D.activator,N=D.resolve,S(W,D.dummyActionInfos),S(I,D.chainBlockInfos.flatMap(ie=>ie.selectedEntities).getDistinct()),P=D.entitiesChoices,S(Y,!1),S(B,((F=D.cellsChoices)==null?void 0:F.selectables.includes(e(l)))??!1),se=e(B)&&((te=D.cellsChoices)==null?void 0:te.qty)===1,w()};t().onWaitStart.append(le);const Be=()=>{n=void 0,S(W,[]),N=()=>{console.log("hoge")},P=void 0,S(I,[]),S(Y,!1),S(B,!1),se=!1};t().onWaitEnd.append(Be);let C=De(!1),$=[];const Q=D=>{$=D.filter(F=>F.dests.includes(e(l))),S(C,$.length>0),w()},ue=()=>{$=[],S(C,!1),w()};t().onDragStart.append(Q),t().onDragEnd.append(ue);const[Ce,ne]=Zi;let de=De([]);const Ee=D=>{if(n=void 0,e(l)===D.to||e(l).entities.includes(D.entity)){S(de,[...e(de),D]);const F=D.resolve;S(l,e(l)),setTimeout(()=>{S(de,e(de).filter(te=>te!==D)),D.count++,D.count>1&&F()},600)}};t().onAnimation.append(Ee);const j=D=>{N({phaseChange:D})},q=()=>e(l).isStackCell&&e(l).entities.flatMap(D=>D.actions).filter(D=>e(W).map(F=>F.action.seq).some(F=>F===D.seq)).length>0,G=D=>{var F;if(((F=D.target)==null?void 0:F.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),se)N({selectedCells:[e(l)]});else if(e(B))S(Y,!e(Y)),_(e(Y)?[..._(),e(l)]:_().filter(te=>te!==e(l)));else if(e(l).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(l),!0),t().requireUpdate();const te=e(l).entities.flatMap(ae=>ae.actions).map(ae=>ae.seq),ie=e(W).filter(ae=>te.includes(ae.action.seq));if(ie.length){if(!n)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:n,dummyActionInfos:ie,cancelable:!0}).then(ae=>{ae&&N({actionInfo:ae})});return}}t().requireUpdate(),console.info(e(l),ye(...e(l).visibleEntities))},ce=D=>{D.preventDefault(),D.dataTransfer&&(D.dataTransfer.dropEffect="move")},$e=D=>{D.preventDefault(),console.info("drop",D,e(C),$),D.dataTransfer&&(D.dataTransfer.dropEffect="move");try{if(e(C)&&$){if($.length===1){const F=$[0];N({actionInfo:{...F,dest:e(l)}})}else if($.length>1){if(!n)throw new Va("想定されない状態");e(l).field.duel.view.modalController.terminateAll(),e(l).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:n,dummyActionInfos:$.map(F=>({...F,dest:e(l)})),cancelable:!1}).then(F=>{N({actionInfo:F})})}}}finally{t().removeDraggingActions()}},ye=(...D)=>{if(t().waitMode==="Animation")return"Disabled";if(P&&P.selectables.find(te=>D.find(ie=>te===ie)))return"Selectable";if(!e(W)||e(W).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(te=>te.state==="Shown"))return"Disabled";const F=e(W).filter(te=>D.includes(te.action.entity));return F.length===0?"Disabled":e(l).isStackCell||F[0].action.entity!==D[0]?"Clickable":F.some(te=>te.dests.length)?"Draggable":"Clickable"};ct();var E=Rr(),b=a(E);b.__click=G;var U=a(b);{var O=D=>{var F=Te(),te=L(F);{var ie=ae=>{var _e=Te(),p=L(_e);{var M=k=>{var H=$r(),R=a(H),we=a(R),be=i(R,1,!0);f((fe,X)=>{y(we,fe),y(be,X)},[()=>String(e(l).field.duel.clock.turn).padStart(2,"0"),()=>e(l).field.duel.phase.toUpperCase()],pe),r(k,H)},g=k=>{var H=Te(),R=L(H);{var we=fe=>{var X=Sr(),J=a(X),K=a(J),xe=i(J,2),Le=a(xe);f((Fe,Ne)=>{y(K,Fe),y(Le,Ne)},[()=>Math.floor(e(A).current),()=>Math.floor(e(V).current)],pe),r(fe,X)},be=fe=>{var X=Te(),J=L(X);{var K=xe=>{var Le=Te(),Fe=L(Le);{var Ne=Ye=>{var Oe=Te(),h=L(Oe);{var m=T=>{var Z=Te(),ge=L(Z);oe(ge,1,()=>t().duel.nextPhaseList,ve,(Se,z)=>{var me=Tr(),je=a(me);je.__click=[Mr,j,z];var Ke=a(je);f(Ue=>y(Ke,Ue),[()=>e(z).toUpperCase()],pe),r(Se,me)}),r(T,Z)};x(h,T=>{t().duel.isEnded||T(m)})}r(Ye,Oe)};x(Fe,Ye=>{t().waitMode==="Free"&&Ye(Ne)})}r(xe,Le)};x(J,xe=>{e(l).column===5&&xe(K)},!0)}r(fe,X)};x(R,fe=>{e(l).column===3?fe(we):fe(be,!1)},!0)}r(k,H)};x(p,k=>{e(l).column===1?k(M):k(g,!1)})}r(ae,_e)};x(te,ae=>{e(l).row===3&&ae(ie)})}r(D,F)},ee=D=>{var F=Te(),te=L(F);{var ie=_e=>{var p=Yr();const M=pe(()=>e(de).find(X=>X.to===e(l)));var g=L(p);{var k=X=>{var J=jr(),K=a(J);Ut(K,{get entity(){return e(M).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),f(()=>Ae(J,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),re(1,J,()=>ne,()=>({key:e(M).entity.seq})),r(X,J)};x(g,X=>{e(M)&&e(M).index==="Top"&&X(k)})}var H=i(g,2);oe(H,1,()=>e(l).visibleEntities,ve,(X,J)=>{var K=Te(),xe=L(K);{var Le=Fe=>{var Ne=Br(),Ye=a(Ne);const Oe=pe(()=>ye(e(J))),h=pe(()=>e(W).filter(m=>m.action.entity===e(J)));Ut(Ye,{get entity(){return e(J)},get state(){return e(Oe)},get dummyActionInfos(){return e(h)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(m){c(m)},$$legacy:!0}),re(2,Ne,()=>Ce,()=>({key:e(J).seq})),r(Fe,Ne)};x(xe,Fe=>{e(de).every(Ne=>Ne.entity.seq!==e(J).seq)&&Fe(Le)})}r(X,K)});var R=i(H,2);{var we=X=>{var J=Er(),K=a(J);Ut(K,{get entity(){return e(M).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),f(()=>Ae(J,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),re(1,J,()=>ne,()=>({key:e(M).entity.seq})),r(X,J)};x(R,X=>{e(M)&&e(M).index!=="Top"&&X(we)})}var be=i(R,2);{var fe=X=>{var J=Ar();r(X,J)};x(be,X=>{e(l).owner.seat==="Below"&&X(fe)})}r(_e,p)},ae=_e=>{var p=Or();const M=pe(()=>e(de).find(J=>J.to===e(l)));var g=L(p);{var k=J=>{var K=Ur(),xe=a(K);Ut(xe,{get entity(){return e(M).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),re(1,K,()=>ne,()=>({key:e(M).entity.seq})),r(J,K)};x(g,J=>{e(M)&&e(M).index!=="Top"&&J(k)})}var H=i(g,2);{var R=J=>{var K=Fr(),xe=L(K);oe(xe,1,()=>e(l).visibleEntities.map((Ne,Ye)=>({index:Ye,entity:Ne})).toReversed(),ve,(Ne,Ye)=>{var Oe=Te(),h=L(Oe);{var m=T=>{var Z=Nr();const ge=pe(()=>!e(l).isStackCell&&e(Ye).index===0?ye(...e(l).visibleEntities):void 0);var Se=L(Z);{var z=Ue=>{var Qe=Lr();r(Ue,Qe)};x(Se,Ue=>{e(I).includes(e(Ye).entity)&&Ue(z)})}var me=i(Se,2),je=a(me);const Ke=pe(()=>e(Ye).index===0?e(W).filter(Ue=>e(l).visibleEntities.includes(Ue.action.entity)):void 0);Ut(je,{get entity(){return e(Ye).entity},get state(){return e(ge)},get dummyActionInfos(){return e(Ke)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(Ue){c(Ue)},$$legacy:!0}),f(()=>Ae(me,`duel_card_wrapper ${(e(Ye).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1ycsdg6`)),re(2,me,()=>Ce,()=>({key:e(Ye).entity.seq})),r(T,Z)};x(h,T=>{e(de).every(Z=>Z.entity.seq!==e(Ye).entity.seq)&&T(m)})}r(Ne,Oe)});var Le=i(xe,2);{var Fe=Ne=>{var Ye=qr(),Oe=a(Ye),h=i(Oe);oe(h,1,()=>ca(e(l).visibleEntities[0].status.maxCounterQty),ve,(m,T)=>{var Z=Pr(),ge=L(Z),Se=i(ge);{var z=me=>{var je=tt();f(()=>y(je,`/${e(l).visibleEntities[0].status.maxCounterQty[e(T)]??""}`)),r(me,je)};x(Se,me=>{(e(l).visibleEntities[0].status.maxCounterQty[e(T)]??9999)<100&&me(z)})}f((me,je)=>y(ge,`【
              ${me??""}${je??""} `),[()=>Ga(e(T)),()=>e(l).visibleEntities[0].counterHolder.getQty(e(T))],pe),r(m,Z)}),f(()=>y(Oe,`【${e(l).visibleEntities[0].battlePositionName??""}】 `)),r(Ne,Ye)};x(Le,Ne=>{e(l).visibleEntities[0].battlePosition&&Ne(Fe)})}r(J,K)};x(H,J=>{e(l).visibleEntities.length>0&&J(R)})}var we=i(H,2);{var be=J=>{var K=Hr(),xe=a(K);f(()=>y(xe,e(l).visibleEntities.length)),r(J,K)};x(we,J=>{e(l).isStackCell&&J(be)})}var fe=i(we,2);{var X=J=>{var K=Ir(),xe=a(K);Ut(xe,{get entity(){return e(M).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),re(1,K,()=>ne,()=>({key:e(M).entity.seq})),r(J,K)};x(fe,J=>{e(M)&&e(M).index==="Top"&&J(X)})}r(_e,p)};x(te,_e=>{e(l).cellType==="Hand"?_e(ie):_e(ae,!1)},!0)}r(D,F)};x(U,D=>{e(l).isDisabledCell?D(O):D(ee,!1)})}f(D=>{Ae(E,`${`duel_field_cell duel_field_cell_${e(l).cellType} ${e(l).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1ycsdg6`),yt(E,"colspan",e(l).cellType==="Hand"?7:1),Ae(b,`${D??""} svelte-1ycsdg6`)},[()=>`duel_field_cell_inner_box ${e(l).cellType} ${e(C)?"can_accept_drop":""} ${q()?"can_action":""} ${e(Y)?"is_selected":e(B)?"is_selectable":""} `],pe),ke("dragover",b,ce),ke("drop",b,$e),r(d,E),_t()}Pa(["click"]);const Kr=(d,s,t=void 0,v="!!!circular reference!!!")=>{let u=[];return JSON.stringify(d,(c,_)=>{if(typeof _=="object"){if(u.indexOf(_)>-1)return v;u.push(_)}let l=_;if(s&&(l=s(c,_)),typeof l=="function")return l.toString();if(l!==_&&typeof l=="object"){if(u.indexOf(l)>-1)return v;u.push(l)}return l},t)};var zr=o('<div class="title svelte-14z6bdh"> </div>'),Vr=o('<div class="title svelte-14z6bdh"> </div>'),Gr=o('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),Xr=o('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),Qr=o("<div><!> <!></div>"),Jr=o('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),Zr=o("<div><!> <!></div>"),ei=o("<div><!> <!></div>"),ti=o('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function ai(d,s){dt(s,!1);let t=De(void 0),v=He(s,"log",8),u,c=De([]);const _=()=>{const w=((u==null?void 0:u.seq)??-1)+1;v().records.slice(w).forEach(n=>{if(!u){S(c,[[[[n]]]]),u=n;return}if(!e(c)[n.clock.turn]){Me(c,e(c)[n.clock.turn]=[[[n]]]),u=n;return}if(!e(c)[n.clock.turn][n.clock.phaseSeq]){Me(c,e(c)[n.clock.turn][n.clock.phaseSeq]=[[n]]),u=n;return}if(u.clock.chainSeq===n.clock.chainSeq&&u.clock.chainBlockSeq===n.clock.chainBlockSeq&&u.duelist===n.duelist){e(c)[n.clock.turn][n.clock.phaseSeq].slice(-1)[0].push(n),u=n;return}e(c)[n.clock.turn][n.clock.phaseSeq].push([n]),u=n}),S(c,e(c)),Xa().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};v().onUpdate.append(_),v().duel.view.onDuelUpdate.append(_),_(),ct();var l=Te(),A=L(l);{var V=w=>{var n=ti(),W=i(a(n),2);oe(W,5,()=>e(c),ve,(N,P)=>{var I=ei(),Y=a(I);{var B=le=>{var Be=zr(),C=a(Be);f(()=>y(C,`ターン：${e(P)[0][0][0].clock.turn??""}`)),r(le,Be)};x(Y,le=>{e(P)[0][0][0].clock.turn>0&&le(B)})}var se=i(Y,2);oe(se,1,()=>e(P),ve,(le,Be)=>{var C=Zr(),$=a(C);{var Q=Ce=>{var ne=Vr(),de=a(ne);f(()=>y(de,e(Be)[0][0].clock.period.name)),r(Ce,ne)};x($,Ce=>{e(Be)[0][0].clock.turn>0&&Ce(Q)})}var ue=i($,2);oe(ue,1,()=>e(Be),ve,(Ce,ne)=>{var de=Jr();const Ee=pe(()=>{var E;return((E=e(ne).find(b=>b.chainNumber!==void 0))==null?void 0:E.chainNumber)??0});var j=a(de),q=a(j),G=a(q),ce=i(q,2);{var $e=E=>{var b=Gr(),U=a(b);f(()=>y(U,`チェーン：${e(Ee)??""}`)),r(E,b)};x(ce,E=>{e(Ee)&&E($e)})}var ye=i(j,2);oe(ye,1,()=>e(ne),ve,(E,b)=>{var U=Qr(),O=a(U);{var ee=ie=>{var ae=tt();f(()=>y(ae,e(b).text)),r(ie,ae)},D=ie=>{var ae=Te(),_e=L(ae);{var p=g=>{var k=tt();f((H,R,we)=>y(k,`移動：${H??""} ${R??""} ⇒ ${we??""}`),[()=>{var H;return(H=e(b).mainEntity)==null?void 0:H.toString()},()=>{var H;return(H=e(b).from)==null?void 0:H.toString()},()=>{var H;return(H=e(b).to)==null?void 0:H.toString()}],pe),r(g,k)},M=g=>{var k=Te(),H=L(k);{var R=be=>{var fe=tt();f((X,J)=>y(fe,`生成：${X??""} void ⇒ ${J??""}`),[()=>{var X;return(X=e(b).mainEntity)==null?void 0:X.toString()},()=>{var X;return(X=e(b).to)==null?void 0:X.toString()}],pe),r(be,fe)},we=be=>{var fe=Te(),X=L(fe);{var J=xe=>{var Le=tt();f((Fe,Ne)=>y(Le,`消滅：${Fe??""} ${Ne??""} ⇒ void`),[()=>{var Fe;return(Fe=e(b).mainEntity)==null?void 0:Fe.toString()},()=>{var Fe;return(Fe=e(b).from)==null?void 0:Fe.toString()}],pe),r(xe,Le)},K=xe=>{var Le=tt();f(()=>y(Le,e(b).text)),r(xe,Le)};x(X,xe=>{e(b).type==="EntityDisappear"?xe(J):xe(K,!1)},!0)}r(be,fe)};x(H,be=>{e(b).type==="EntityAppear"?be(R):be(we,!1)},!0)}r(g,k)};x(_e,g=>{e(b).type==="EntityMove"?g(p):g(M,!1)},!0)}r(ie,ae)};x(O,ie=>{e(b).type==="ChainBlockHeader"?ie(ee):ie(D,!1)})}var F=i(O,2);{var te=ie=>{var ae=Xr(),_e=a(ae);f(p=>yt(_e,"href",p),[()=>window.URL.createObjectURL(new Blob([Kr(e(b).error,(p,M)=>["pool","bundles","duel"].includes(p)||typeof M=="function"?void 0:M,4)],{type:"text/plain"}))],pe),r(ie,ae)};x(F,ie=>{e(b).error&&ie(te)})}f(ie=>Ae(U,`duel_log_record duel_log_record_${ie??""} svelte-14z6bdh`),[()=>e(b).type.toSnakeCase()],pe),r(E,U)}),f(()=>{var E,b,U;Ae(de,`duel_log_block_duelist duel_log_block_duelist_${((E=e(ne)[0].duelist)==null?void 0:E.seat)??"system"} svelte-14z6bdh`),Ae(q,`duelist ${((b=e(ne)[0].duelist)==null?void 0:b.seat)??""} svelte-14z6bdh`),y(G,((U=e(ne)[0].duelist)==null?void 0:U.profile.name)||"SYSTEM")}),r(Ce,de)}),f(()=>Ae(C,`duel_log_block_phase duel_log_block_phase_${e(Be)[0][0].clock.period.key??""} svelte-14z6bdh`)),r(le,C)}),f(()=>Ae(I,`duel_log_block_turn duel_log_block_turn_${e(P)[0][0][0].clock.turn??""} svelte-14z6bdh`)),r(N,I)}),Qa(W,N=>S(t,N),()=>e(t)),r(w,n)};x(A,w=>{(v().duel.view.infoBoardState==="Log"||v().duel.view.infoBoardState==="Default")&&w(V)})}r(d,l),_t()}var ri=o("<div><div> </div> <div> </div></div>");function La(d,s){dt(s,!1);let t=He(s,"duelist",12),v=De(0),u=De();const c=async()=>{const W=t().lp-e(v);if(!e(u)||Math.abs(W)<10){S(v,t().lp),e(u)&&(e(u)(),S(u,void 0));return}S(v,e(v)+Math.floor(Math.random()*W)),await Lt(100),c()},_=()=>{t(t()),!e(u)&&t().lp!==e(v)&&new Promise(W=>{S(u,W),Math.abs(t().lp-e(v)),c()})};t().duel.log.onUpdate.append(_),c(),ct();var l=ri(),A=a(l),V=a(A),w=i(A,2),n=a(w);f(W=>{Ae(l,`duelist duelist_${W??""} svelte-1sy3trd`),Ae(A,`duelist_name duelist_${W??""}_name svelte-1sy3trd`),y(V,t().profile.name),Ae(w,`duelist_lp ${(e(u)?"vibration":"")??""} svelte-1sy3trd`),y(n,e(v))},[()=>t().seat.toLowerCase()],pe),r(d,l),_t()}const ii=(d,s,t)=>(s(s()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),si=(d,s,t)=>(s(s()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var ni=o('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),oi=o('<div></div> <div class="svelte-1uevs9j"> </div>',1),li=o("<div> </div>"),vi=o("<div> </div>"),di=o('<div class="duel_card_info_row svelte-1uevs9j"><!> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),ci=o('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),_i=o('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),ui=o("<!> <!>",1),fi=o('<pre class="description svelte-1uevs9j"> </pre>'),pi=o('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),yi=o('<pre class="description svelte-1uevs9j"> </pre>'),gi=o('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),mi=o('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),hi=o('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),bi=o("[ <!> ],",1),xi=o('<div class="svelte-1uevs9j"> <!></div>'),ki=o('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),wi=o('<div class="svelte-1uevs9j"> </div>'),Di=o('<div class="svelte-1uevs9j"> </div>'),Ci=o('<div class="svelte-1uevs9j"> </div>'),$i=o('<div class="svelte-1uevs9j"> </div>'),Si=o('<div class="svelte-1uevs9j"> </div>'),Mi=o('<div class="svelte-1uevs9j"> </div>'),Ti=o('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),ji=o('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Bi=o('<div class="svelte-1uevs9j">※テスト用カードです</div>'),Ei=o('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),Ai=o('<div class="duel_card_info_links svelte-1uevs9j"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a> <!></div>'),Yi=o("<!> <!>",1),Ui=o('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Li(d,s){dt(s,!1);let t=He(s,"entity",8,void 0),v=He(s,"mode",12,"Normal");const u=async()=>{if(!t())return;const w=(await Rt).getCardInfo(t().origin.name);if(w)return w.cardId!==void 0&&!w.description&&!w.pendulumDescription&&await qa([w.cardId]),w},c=()=>t()&&t().entityType==="Card"&&(t().origin.cardId??!1)?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t().origin.cardId}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:"";ct();var _=Te(),l=L(_);{var A=V=>{var w=Ui();w.__click=[ii,v,t],w.__contextmenu=[si,v,t];var n=a(w),W=a(n),N=a(W),P=a(N),I=i(W,2),Y=a(I),B=a(Y),se=i(Y,2),le=a(se),Be=i(I,2);{var C=j=>{var q=ui(),G=L(q);{var ce=b=>{var U=ni(),O=a(U),ee=a(O),D=i(O,2),F=a(D);f(()=>{y(ee,`◀ ${t().psL??""}`),y(F,`${t().psR??""} ▶`)}),r(b,U)};x(G,b=>{var U;(U=t().origin.monsterCategories)!=null&&U.includes("Pendulum")&&b(ce)})}var $e=i(G,2);{var ye=b=>{var U=di(),O=L(U),ee=a(O);oe(ee,1,()=>t().attr,ve,(te,ie)=>{var ae=oi(),_e=L(ae),p=i(_e,2),M=a(p);f(()=>{Ae(_e,`monster_attr ${e(ie)??""} svelte-1uevs9j`),y(M,`${_a[e(ie)]??""}属性`)}),r(te,ae)});var D=i(ee,2);oe(D,1,()=>t().types,ve,(te,ie)=>{var ae=li(),_e=a(ae);f(()=>{Ae(ae,`monster_cat ${e(ie)??""} svelte-1uevs9j`),y(_e,`${ea[e(ie)]??""}${ua[e(ie)]??""}族`)}),r(te,ae)});var F=i(O,2);oe(F,5,()=>t().status.monsterCategories??[],ve,(te,ie)=>{var ae=vi(),_e=a(ae);f(()=>{Ae(ae,`monster_cat ${e(ie)??""} svelte-1uevs9j`),y(_e,`${ta[e(ie)]??""}${fa[e(ie)]??""}`)}),r(te,ae)}),r(b,U)},E=b=>{var U=Te(),O=L(U);{var ee=F=>{var te=ci(),ie=i(a(te),2),ae=a(ie);f(()=>y(ae,`${aa[t().status.spellCategory]??""}魔法`)),r(F,te)},D=F=>{var te=Te(),ie=L(te);{var ae=_e=>{var p=_i(),M=i(a(p),2),g=a(M);f(()=>y(g,`${ra[t().status.trapCategory]??""}罠`)),r(_e,p)};x(ie,_e=>{t().kind==="Trap"&&t().status.trapCategory&&_e(ae)},!0)}r(F,te)};x(O,F=>{t().kind==="Spell"&&t().status.spellCategory?F(ee):F(D,!1)},!0)}r(b,U)};x($e,b=>{t().kind==="Monster"?b(ye):b(E,!1)})}r(j,q)};x(Be,j=>{v()!=="Debug"&&j(C)})}var $=i(n,2),Q=a($);{var ue=j=>{var q=gi(),G=L(q);{var ce=E=>{var b=pi(),U=a(b);vt(U,u,O=>{var ee=tt('"読み込み中"');r(O,ee)},(O,ee)=>{var D=fi(),F=a(D);f(()=>{var te;return y(F,(te=e(ee))==null?void 0:te.pendulumDescription)}),r(O,D)}),r(E,b)};x(G,E=>{var b;(b=t().status.monsterCategories)!=null&&b.includes("Pendulum")&&E(ce)})}var $e=i(G,2),ye=a($e);vt(ye,u,E=>{var b=tt('"読み込み中"');r(E,b)},(E,b)=>{var U=yi(),O=a(U);f(()=>{var ee;return y(O,(ee=e(b))==null?void 0:ee.description)}),r(E,U)}),r(j,q)},Ce=j=>{var q=Te(),G=L(q);{var ce=ye=>{var E=Te(),b=L(E);{var U=O=>{var ee=hi(),D=i(a(ee),2);oe(D,5,()=>t().actions,ve,(F,te)=>{var ie=Te();const ae=pe(()=>e(te).actionCountUpperBound),_e=pe(()=>e(te).actionCount);var p=L(ie);{var M=g=>{var k=mi(),H=a(k),R=a(H),we=i(H,2),be=a(we),fe=i(we,4),X=a(fe);f(()=>{y(R,e(te).title),y(be,e(_e)),y(X,e(ae))}),r(g,k)};x(p,g=>{e(ae)!==void 0&&e(_e)!==void 0&&g(M)})}r(F,ie)}),r(O,ee)};x(b,O=>{t().actions.some(ee=>ee.actionCountUpperBoundKey)&&O(U)})}r(ye,E)},$e=ye=>{var E=Ti(),b=a(E),U=a(b);oe(U,0,()=>["info","status"],ve,(h,m)=>{var T=ki(),Z=L(T),ge=a(Z),Se=i(Z,2);oe(Se,1,()=>Object.entries(t()[m]),ve,(me,je)=>{let Ke=()=>e(je)[0],Ue=()=>e(je)[1];var Qe=xi(),ot=a(Qe),gt=i(ot);{var kt=Ie=>{var ze=bi(),it=i(L(ze));oe(it,1,Ue,ve,(St,Tt)=>{var Dt=tt();f(Ve=>y(Dt,`${Ve??""},`),[()=>e(Tt).toString()],pe),r(St,Dt)}),r(Ie,ze)},We=Ie=>{var ze=tt();f(it=>y(ze,`${it??""},`),[()=>{var it;return(it=Ue())==null?void 0:it.toString()}],pe),r(Ie,ze)};x(gt,Ie=>{Array.isArray(Ue())?Ie(kt):Ie(We,!1)})}f(()=>y(ot,`"${Ke()??""}" : `)),r(me,Qe)});var z=i(Se,2);z.textContent="},",f(()=>y(ge,`"${m??""}" :{`)),r(h,T)});var O=i(U,2);O.textContent='"actions" :[';var ee=i(O,2);oe(ee,1,()=>t().actions,ve,(h,m)=>{var T=wi(),Z=a(T);f(()=>y(Z,`"${e(m).playType??""} ${e(m).title??""}",`)),r(h,T)});var D=i(ee,2);D.textContent="],";var F=i(D,2);F.textContent='"substituteEffects" :[';var te=i(F,2);oe(te,1,()=>t().substituteEffects,ve,(h,m)=>{var T=Di(),Z=a(T);f(()=>y(Z,`"${e(m).title??""}",`)),r(h,T)});var ie=i(te,2);ie.textContent="],";var ae=i(ie,2);ae.textContent='"continuousEffects" :[';var _e=i(ae,2);oe(_e,1,()=>t().continuousEffects,ve,(h,m)=>{var T=Ci(),Z=a(T);f(()=>y(Z,`"${e(m).isStarted??""}",`)),r(h,T)});var p=i(_e,2);p.textContent="],";var M=i(p,2);M.textContent='"procFilters" :[';var g=i(M,2);oe(g,1,()=>t().procFilterBundle.operators,ve,(h,m)=>{var T=$i(),Z=a(T);f(ge=>y(Z,`"${ge??""} ${e(m).title??""} ${e(m).isEffective??""} ",`),[()=>e(m).isSpawnedBy.toString()],pe),r(h,T)});var k=i(g,2);k.textContent="],";var H=i(k,2);H.textContent='"numericStateOperators" :[';var R=i(H,2);oe(R,1,()=>t().numericOprsBundle.operators,ve,(h,m)=>{var T=Si(),Z=a(T);f(ge=>y(Z,`"${ge??""} ${e(m).title??""} ${e(m).isEffective??""} ${e(m).isContinuous??""} ${e(m).targetState??""} ${e(m).targetStateGen??""} ",`),[()=>e(m).isSpawnedBy.toString()],pe),r(h,T)});var we=i(R,2);we.textContent="],";var be=i(we,2);be.textContent='"stateOperators" :[';var fe=i(be,2);oe(fe,1,()=>t().statusOperatorBundle.operators,ve,(h,m)=>{var T=Mi(),Z=a(T);f(ge=>y(Z,`"${ge??""} ${e(m).title??""} ${e(m).isEffective??""} ",`),[()=>e(m).isSpawnedBy.toString()],pe),r(h,T)});var X=i(fe,2);X.textContent="],";var J=i(X,2);J.textContent='"lastMoveLogRecord" :{';var K=i(J,2),xe=a(K),Le=i(K,2),Fe=a(Le),Ne=i(Le,2),Ye=a(Ne),Oe=i(Ne,2);Oe.textContent="},",f((h,m)=>{y(xe,`"movedBy":"${h??""}",`),y(Fe,`"movedAs":"${m??""}",`),y(Ye,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var h;return(h=t().moveLog.latestRecord.movedBy)==null?void 0:h.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],pe),r(ye,E)};x(G,ye=>{v()==="Detail"?ye(ce):ye($e,!1)},!0)}r(j,q)};x(Q,j=>{v()==="Normal"?j(ue):j(Ce,!1)})}var ne=i($,2),de=a(ne);{var Ee=j=>{var q=Yi(),G=L(q);{var ce=b=>{var U=ji();r(b,U)};x(G,b=>{t().origin.isOldVersion&&b(ce)})}var $e=i(G,2);{var ye=b=>{var U=Bi();r(b,U)},E=b=>{var U=Ai(),O=a(U),ee=i(O,2);{var D=F=>{var te=Ei(),ie=a(te);f(ae=>{var _e;yt(te,"href",ae),y(ie,`⇒${((_e=t())!=null&&_e.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[c],pe),r(F,te)};x(ee,F=>{t()&&t().entityType==="Card"&&F(D)})}f(()=>yt(O,"href",`https://yugioh-wiki.net/index.php?${t().origin.wikiEncodedName}`)),r(b,U)};x($e,b=>{t().origin.isForTest?b(ye):b(E,!1)})}r(j,q)};x(de,j=>{t()&&j(Ee)})}f((j,q,G)=>{Ae(w,`duel_card duel_card_info ${t().origin.kind??""} ${j??""} svelte-1uevs9j`),y(P,t().nm),y(B,q),y(le,G)},[()=>{var j;return(j=t().origin.monsterCategories)==null?void 0:j.join(" ")},()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],pe),r(V,w)};x(l,V=>{t()&&V(A)})}r(d,_),_t()}Pa(["click","contextmenu"]);var Ni=o('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),Pi=o('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),qi=o('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Fi(d,s){dt(s,!1);let t=He(s,"cell",12);const v=()=>{t(t())},u=A=>t().cardEntities.filter(V=>V.face===A);t().field.duel.view.onDuelUpdate.append(v),ct();var c=Te(),_=L(c);{var l=A=>{var V=qi(),w=a(V),n=a(w),W=a(n),N=i(n,2),P=a(N),I=i(w,2);oe(I,4,()=>["FaceUp","FaceDown"],ve,(Y,B)=>{var se=Te(),le=L(se);{var Be=C=>{var $=Pi(),Q=a($),ue=a(Q),Ce=i(Q,2);oe(Ce,1,()=>u(B).toSorted(Ja),ve,(ne,de)=>{var Ee=Ni(),j=a(Ee);const q=pe(()=>t().owner===t().field.duel.duelists.Below);Ut(j,{get entity(){return e(de)},get isVisibleForcibly(){return e(q)},isWideMode:!0,cardActionResolve:void 0}),r(ne,Ee)}),f(()=>y(ue,B==="FaceUp"?"表向き":"裏向き")),r(C,$)};x(le,C=>{u(B).length&&C(Be)})}r(Y,se)}),f(()=>{var Y;y(W,(Y=t().owner)==null?void 0:Y.profile.name),y(P,t().cellType)}),r(A,V)};x(_,A=>{t().field.duel.view.infoBoardState==="CellInfo"&&A(l)})}r(d,c),_t()}var Hi=o('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),Ii=o('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function Oi(d,s){dt(s,!1);let t=He(s,"viewController",8),v=He(s,"userProfile",12);ct();var u=Te(),c=L(u);{var _=l=>{var A=Ii(),V=i(a(A),2),w=i(a(V),2);oe(w,1,()=>tr,ve,(n,W)=>{var N=Hi(),P=a(N),I=a(P),Y=i(P,2),B=a(Y);f(()=>y(B,Za[e(W)])),er(I,()=>v().chainConfig[e(W)],se=>v(v().chainConfig[e(W)]=se,!0)),ke("change",I,()=>v().save()),r(n,N)}),r(l,A)};x(c,l=>{t().infoBoardState==="Config"&&l(_)})}r(d,u),_t()}function Ri(d,{from:s,to:t},v={}){var{delay:u=0,duration:c=$=>Math.sqrt($)*120,easing:_=la}=v,l=getComputedStyle(d),A=l.transform==="none"?"":l.transform,[V,w]=l.transformOrigin.split(" ").map(parseFloat);V/=d.clientWidth,w/=d.clientHeight;var n=Wi(d),W=d.clientWidth/t.width/n,N=d.clientHeight/t.height/n,P=s.left+s.width*V,I=s.top+s.height*w,Y=t.left+t.width*V,B=t.top+t.height*w,se=(P-Y)*W,le=(I-B)*N,Be=s.width/t.width,C=s.height/t.height;return{delay:u,duration:typeof c=="function"?c(Math.sqrt(se*se+le*le)):c,easing:_,css:($,Q)=>{var ue=Q*se,Ce=Q*le,ne=$+Q*Be,de=$+Q*C;return`transform: ${A} translate(${ue}px, ${Ce}px) scale(${ne}, ${de});`}}}function Wi(d){if("currentCSSZoom"in d)return d.currentCSSZoom;for(var s=d,t=1;s!==null;)t*=+getComputedStyle(s).zoom,s=s.parentElement;return t}var Ki=o('<div class="chain_number svelte-lqu21u"> </div>'),zi=o('<div class="duel_card_row svelte-lqu21u"> </div>'),Vi=o('<div class="appendix svelte-lqu21u"> </div>'),Gi=o('<div class="appendix_wrapper svelte-lqu21u"></div>'),Xi=o('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),Qi=o("<div></div>");function Ji(d,s){dt(s,!1);let t=He(s,"duel",8),v=He(s,"position",8,"left");const u=-100,c=()=>v()==="left"?-100:100;let _=De([]),l=Promise.resolve(),A=Promise.resolve();const V=1e3,w=500,n=400,W=P=>{const I={...P};I.isKnown=P.chainBlockInfo.action.entity.controller.duelistType==="Player"||P.chainBlockInfo.action.entity.face==="FaceUp",I.chainBlockInfo.onStateChange.append(Y=>{if(Y==="done"||Y==="failed"||Y==="negated")return l=l.then(async()=>{const B=new Date().getTime()-I.chainBlockInfo.wasSpawnedAt.getTime();B<V&&await Lt(V-B),S(_,e(_).filter(se=>se.seq!==I.seq)),await Lt(w+n)}).then(),"RemoveMe";S(_,e(_))}),A=A.then(async()=>{S(_,[I,...e(_)].sort((Y,B)=>ar.isSameChain(Y.clock,B.clock)&&Y.chainBlockInfo.action.isWithChainBlock&&B.chainBlockInfo.action.isWithChainBlock?B.clock.totalProcSeq-Y.clock.totalProcSeq:Y.clock.totalProcSeq-B.clock.totalProcSeq)),await Lt(300)}),l=l.then(()=>Lt(1e3))};t().chainBlockLog.onInsert.append(W),ct();var N=Qi();oe(N,13,()=>e(_),P=>P.seq,(P,I)=>{var Y=Xi();const B=pe(()=>{const{activator:G,action:ce,appendix:$e}=e(I).chainBlockInfo;return{activator:G,action:ce,appendix:$e}});var se=a(Y),le=a(se);{var Be=G=>{var ce=Ki(),$e=a(ce);f(()=>y($e,`チェーン：${e(I).chainBlockInfo.chainNumber??""}`)),r(G,ce)};x(le,G=>{e(I).chainBlockInfo.chainNumber&&G(Be)})}var C=i(le,2),$=a(C),Q=i(C,2),ue=a(Q);{var Ce=G=>{var ce=zi(),$e=a(ce);f(()=>y($e,e(I).isKnown?e(B).action.entity.nm:"？？？")),r(G,ce)};x(ue,G=>{(e(B).action.entity.entityType==="Card"||e(B).action.entity.entityType==="Token")&&G(Ce)})}var ne=i(ue,2),de=a(ne),Ee=a(de),j=i(de,2);{var q=G=>{var ce=Gi();oe(ce,5,()=>e(B).appendix,ve,($e,ye)=>{var E=Vi(),b=a(E);f(()=>y(b,e(ye))),r($e,E)}),r(G,ce)};x(j,G=>{e(B).appendix&&G(q)})}f((G,ce,$e)=>{Ae(Y,`cut_in_row ${(!e(I).chainBlockInfo.chainNumber||e(I).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Ae(se,`cut_in_item cut_in_item_${G??""} cut_in_item_${e(I).chainBlockInfo.state??""} svelte-lqu21u`),Ae(C,`duelist_name duelist_${G??""}_name svelte-lqu21u`),y($,e(B).activator.profile.name),Ae(Q,`duel_card duel_card_${G??""} ${ce??""} ${(e(I).isKnown?e(B).action.entity.origin.kind:"")??""} ${e(B).action.entity.entityType??""}  svelte-lqu21u`),y(Ee,$e)},[()=>e(B).activator.seat.toLowerCase(),()=>e(I).isKnown?(e(B).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(B).action.toString()],pe),re(3,se,()=>wr,()=>new Date().getTime()-e(I).chainBlockInfo.wasSpawnedAt.getTime()<V?{x:c(),duration:n}:{y:u,duration:n}),rr(Y,()=>Ri,()=>({duration:w})),r(P,Y)}),f(()=>Ae(N,`cut_in_container cut_in_container_${v()??""} svelte-lqu21u`)),r(d,N),_t()}const Zi=Dr({duration:400});var es=o('<div class="duel_desk_left v_flex svelte-1i63tk9"><!> <!> <!></div>'),ts=o('<button class="duel_field_header_message svelte-1i63tk9"> </button> <div class="duel_field_header_buttons svelte-1i63tk9"><button class="svelte-1i63tk9">サレンダー</button></div>',1),as=o("<tr></tr>"),rs=o('<table class="duel_field svelte-1i63tk9"><tbody class="svelte-1i63tk9"></tbody></table>'),is=o('<button class="svelte-1i63tk9">OK</button>'),ss=o('<button class="svelte-1i63tk9">cancel</button>'),ns=o("<!> <!>",1),os=o('<button class="svelte-1i63tk9"> </button>'),ls=o('<div style="text-align: left;"><!> <!> <!></div>'),vs=o('<div><!> <div class=" duel_desk_center v_flex svelte-1i63tk9"><div class="duel_field_header svelte-1i63tk9"><!></div> <div class="duel_field_body svelte-1i63tk9"><!></div> <div class="duel_field_footer svelte-1i63tk9"><!></div></div> <!></div> <div style="position:fixed;left:0;bottom:0"> </div> <!> <div><!></div>',1);function ds(d,s){dt(s,!1);let t=He(s,"duel",12),v=He(s,"userProfile",8),u=De(0),c=De(0),_=De([]),l=De([]),A=()=>{},V=De([]),w=De(),n=De(),W=De(()=>!1),N=De(!1);const P=g=>{A=g.resolve,S(V,g.dummyActionInfos.filter(k=>k.action.entity.entityType==="Duelist").filter(k=>k.action.entity.controller.seat==="Below")),S(w,void 0),S(n,void 0),S(l,[]),S(_,[]),S(N,!1),g.entitiesChoices&&(S(w,g.entitiesChoices),S(W,()=>{var k;return((k=g.entitiesChoices)==null?void 0:k.validator(e(_)))??!1}),S(N,g.entitiesChoices.cancelable),e(w).selectables.every(k=>k.cell.isPlayFieldCell&&k.getIndexInCell()===0||k.cell.cellType==="Hand"&&k.controller.duelistType==="Player"||k.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:g.entitiesChoices,chainBlockInfos:g.chainBlockInfos,cancelable:g.entitiesChoices.cancelable}).then(k=>{A({selectedEntities:k})})),g.cellsChoices&&(S(n,g.cellsChoices),S(W,()=>{var k;return((k=g.cellsChoices)==null?void 0:k.validator(e(l)))??!1}),S(N,g.cellsChoices.cancelable))};t().view.onWaitStart.append(P);const I=()=>{A=()=>{},S(n,void 0),S(w,void 0),S(l,[]),S(_,[]),S(W,()=>!1),S(N,!1)};t().view.onWaitEnd.append(I);let Y=De(void 0),B=De("Normal");const se=({card:g,mode:k})=>{S(Y,g),S(B,k??(e(Y)===g||e(B)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(se);const le=()=>{t(t())};t().view.onDuelUpdate.append(le),t().log.onUpdate.append(le);const Be=()=>{e(w)&&e(w).validator(e(_))&&A({selectedEntities:e(_)}),e(n)&&e(n).validator(e(l))&&A({selectedCells:e(l)})},C=()=>{A({})},$=g=>{A({actionInfo:g})},Q=()=>{A({surrender:!0})};t().main();const ue=()=>e(u)<=1400?"compact":"wide";ct();var Ce=vs(),ne=L(Ce),de=a(ne);{var Ee=g=>{var k=es(),H=a(k);La(H,{get duelist(){return t().duelists.Above}});var R=i(H,2);Li(R,{get entity(){return e(Y)},get mode(){return e(B)}});var we=i(R,2);La(we,{get duelist(){return t().duelists.Below}}),r(g,k)};x(de,g=>{ue()==="wide"&&g(Ee)})}var j=i(de,2),q=a(j),G=a(q);{var ce=g=>{var k=ts(),H=L(k),R=a(H),we=i(H,2),be=a(we);f(()=>y(R,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),ke("click",H,()=>{t(t().view.infoBoardState="Log",!0)}),ke("click",be,Q),r(g,k)};x(G,g=>{t().isEnded||g(ce)})}var $e=i(q,2),ye=a($e);{var E=g=>{var k=rs(),H=a(k);oe(H,5,()=>t().field.cells,ve,(R,we,be)=>{var fe=as();Ae(fe,`${`duel_desk_row_${be}`??""} svelte-1i63tk9`),oe(fe,5,()=>e(we),ve,(X,J,K)=>{Wr(X,{get view(){return t().view},row:be,column:K,get selectedEntities(){return e(_)},set selectedEntities(xe){S(_,xe)},get selectedCells(){return e(l)},set selectedCells(xe){S(l,xe)},$$legacy:!0})}),r(R,fe)}),r(g,k)};x(ye,g=>{t().clock.turn>0&&g(E)})}var b=i($e,2),U=a(b);{var O=g=>{var k=ns(),H=L(k);{var R=fe=>{var X=is();f(J=>X.disabled=J,[()=>!e(W)()],pe),ke("click",X,Be),r(fe,X)};x(H,fe=>{((e(w)&&e(w).qty)??(e(n)&&e(n).qty)??9999)>1&&fe(R)})}var we=i(H,2);{var be=fe=>{var X=ss();ke("click",X,C),r(fe,X)};x(we,fe=>{e(N)&&fe(be)})}r(g,k)},ee=g=>{var k=Te(),H=L(k);oe(H,1,()=>e(V),ve,(R,we)=>{var be=os(),fe=a(be);f(()=>y(fe,e(we).action.title)),ke("click",be,()=>$(e(we))),r(R,be)}),r(g,k)};x(U,g=>{e(w)&&e(w).selectables.length||e(n)&&e(n).selectables?g(O):g(ee,!1)})}var D=i(j,2);{var F=g=>{var k=ls(),H=a(k);ai(H,{get log(){return t().log}});var R=i(H,2);Fi(R,{get cell(){return t().view.infoBoardCell}});var we=i(R,2);Oi(we,{get userProfile(){return v()},get viewController(){return t().view}}),f(be=>Ae(k,`duel_desk_right duel_desk_right_${be??""}  svelte-1i63tk9`),[()=>t().view.infoBoardState.toLowerCase()],pe),re(3,k,()=>he,()=>({duration:e(u)>1400?0:200,axis:"x"})),r(g,k)};x(D,g=>{(e(u)>1400||t().view.infoBoardState!=="Default")&&g(F)})}var te=i(ne,2),ie=a(te),ae=i(te,2);ir(ae,{get modalController(){return t().view.modalController}});var _e=i(ae,2),p=a(_e);const M=pe(()=>ue()==="wide"?"right":"left");Ji(p,{get duel(){return t()},get position(){return e(M)}}),f((g,k)=>{Ae(ne,`flex duel_desk ${g??""}_mode svelte-1i63tk9`),y(ie,k),Ae(_e,`cutin ${g??""}_mode svelte-1i63tk9`)},[ue,()=>t().clock.toFullString()],pe),Xt("innerWidth",g=>S(u,g)),Xt("innerHeight",g=>S(c,g)),r(d,Ce),_t()}var cs=o('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),_s=o('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),us=o("<div></div>"),fs=o("<!> <!> <!> <!> <!>",1),ps=o('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),ys=o('<li class="deck_editor_item svelte-niobyr"><div role="listitem"><div class="svelte-niobyr"><div class="svelte-niobyr"> </div> <div style="display:flex" class="svelte-niobyr"><div class="svelte-niobyr"><!> <!> <!></div> <div style="flex-grow: 1; width:0.1rem" class="svelte-niobyr"></div> <div class="svelte-niobyr"><!></div></div></div></div> <button class="button_style_reset svelte-niobyr">+</button> <button class="button_style_reset svelte-niobyr">-</button></li>'),gs=o('<div class="deck_editor_card_kind svelte-niobyr"><div class="deck_editor_card_kind_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <ul class="svelte-niobyr"></ul></div>'),ms=o('<div class="deck_editor_deck_type svelte-niobyr"><div class="deck_editor_deck_type_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <!></div>'),hs=o('<div class="svelte-niobyr">読み込み中...</div>'),bs=o('<div class="deck_editor_card_list svelte-niobyr"><!></div>');function Na(d,s){dt(s,!1);let t=He(s,"allCardInfos",8),v=He(s,"deckCardInfos",12),u=He(s,"mode",8),c=He(s,"onAttention",8),_=He(s,"searchCondition",8,void 0);const l={Deck:["Monster","Spell","Trap"],ExtraDeck:["Monster"]},A={Deck:{Monster:[],Spell:[],Trap:[]},ExtraDeck:{Monster:[],Spell:[],Trap:[]}},V=C=>{var $;return($=C.monsterCategories)!=null&&$.union(Qt).length?"ExtraDeck":"Deck"},w=C=>{Object.values(A).forEach($=>Object.values($).forEach(Q=>Q.reset())),C.filter($=>$.kind!=="XyzMaterial").forEach($=>{var ue;if($.kind==="XyzMaterial")return;const Q=(ue=$.monsterCategories)!=null&&ue.union(Qt).length?"ExtraDeck":"Deck";A[Q][$.kind].push($)}),Object.values(A).forEach($=>Object.values($).forEach(Q=>Q.sort(oa)))},n=u()==="List"?new Promise(C=>{w(t()),C()}):Promise.resolve(),W=()=>(u()==="Deck"&&(w(v()),S(Y,v().length)),A),N=(C,$,Q)=>{v(v().filter(ue=>V(ue)!==$||ue.kind!==Q&&Q))},P=(C,$)=>{try{if(C.ctrlKey){v().push($);return}const Q=v().filter(Ce=>Ce.name===$.name).length;if(Q>2)return;const ue=C.shiftKey?3-Q:1;if(ue<1)return;v().push(...Array(ue).fill($))}finally{v().sort(oa),v(v())}},I=(C,$)=>{let Q=0;v(v().filter(ue=>ue.name!==$.name?!0:(Q++,!C.shiftKey&&Q>1))),v().sort(oa)};let Y=De(100);const B=()=>{e(Y)>t().length+v().length||(S(Y,e(Y)+100),Lt(100).then(B))},se=(C,$,Q,ue)=>{if($===0&&ue==="Monster"&&(S(Y,100),Lt(100).then(B)),!_())return!0;if(!_().cardKinds.includes(C.kind)||_().name.trim().length&&[C.name,...C.nameTags??[],...C.textTags??[]].every(ne=>!ne.includes(_().name))||!C.isImplemented&&!_().others.includes("implemented")||C.isForTest&&!_().others.includes("test")||C.isOldVersion&&!_().others.includes("oldVersion"))return!1;if(C.kind==="Monster"){if(C.attributes&&!_().monsterAttributes.union(C.attributes).length||C.types&&!_().monsterTypes.union(C.types).length)return!1;const Ce=C.level??C.rank??C.link;return Ct(_().starLowerBound)&&(Ce??0)<_().starLowerBound||Ct(_().starUpperBound)&&(Ce??0)>_().starUpperBound||Ct(_().atkLowerBound)&&(C.attack??0)<_().atkLowerBound||Ct(_().atkUpperBound)&&(C.attack??0)>_().atkUpperBound||Ct(_().defLowerBound)&&(C.defense??0)<_().defLowerBound||Ct(_().defUpperBound)&&(C.defense??0)>_().defUpperBound||Ct(_().atkPlusDef)&&(!Ct(C.attack)||!Ct(C.defense)||C.attack+C.defense!==_().atkPlusDef)||!C.monsterCategories?!1:C.monsterCategories.union(_().monsterCategories).length}if(C.kind==="Spell")return C.spellCategory&&_().spellCategories.includes(C.spellCategory);if(C.kind==="Trap")return C.trapCategory&&_().trapCategories.includes(C.trapCategory)};ct();var le=bs(),Be=a(le);vt(Be,()=>n,C=>{var $=hs();r(C,$)},C=>{var $=Te();const Q=pe(W);var ue=L($);oe(ue,1,()=>nr,ve,(Ce,ne)=>{var de=ms();const Ee=pe(()=>Object.values(e(Q)[e(ne)]).flatMap(E=>E));var j=a(de),q=a(j),G=a(q),ce=i(q,2);{var $e=E=>{var b=cs(),U=a(b);ke("click",U,O=>N(O,e(ne),void 0)),r(E,b)};x(ce,E=>{u()==="Deck"&&e(Ee).some(se)&&E($e)})}var ye=i(j,2);oe(ye,1,()=>ca(e(Q)[e(ne)]).filter(E=>l[e(ne)].includes(E)),ve,(E,b)=>{var U=gs();const O=pe(()=>e(Q)[e(ne)][e(b)].filter((..._e)=>se(..._e,e(b))));var ee=a(U),D=a(ee),F=a(D),te=i(D,2);{var ie=_e=>{var p=_s(),M=a(p);ke("click",M,g=>N(g,e(ne),e(b))),r(_e,p)};x(te,_e=>{u()==="Deck"&&e(O).length&&_e(ie)})}var ae=i(ee,2);oe(ae,5,()=>e(O),ve,(_e,p,M)=>{var g=Te(),k=L(g);{var H=R=>{var we=ys(),be=a(we),fe=a(be),X=a(fe),J=a(X),K=i(X,2),xe=a(K),Le=a(xe);{var Fe=z=>{var me=fs(),je=L(me);{var Ke=We=>{var Ie=tt();f(()=>y(Ie,`★${e(p).level??""}`)),r(We,Ie)};x(je,We=>{e(p).level&&We(Ke)})}var Ue=i(je,2);{var Qe=We=>{var Ie=tt();f(()=>y(Ie,`☆${e(p).rank??""}`)),r(We,Ie)};x(Ue,We=>{e(p).rank&&We(Qe)})}var ot=i(Ue,2);oe(ot,1,()=>e(p).attributes??[],ve,(We,Ie)=>{var ze=us();f(()=>Ae(ze,`monster_attr ${e(Ie)??""} svelte-niobyr`)),r(We,ze)});var gt=i(ot,2);oe(gt,1,()=>e(p).types??[],ve,(We,Ie)=>{var ze=tt();f(()=>y(ze,ea[e(Ie)])),r(We,ze)});var kt=i(gt,2);oe(kt,1,()=>e(p).monsterCategories??[],ve,(We,Ie)=>{var ze=tt();f(()=>y(ze,ta[e(Ie)])),r(We,ze)}),r(z,me)};x(Le,z=>{e(p).kind==="Monster"&&z(Fe)})}var Ne=i(Le,2);{var Ye=z=>{var me=tt();f(()=>y(me,`${aa[e(p).spellCategory]??""}魔法`)),r(z,me)};x(Ne,z=>{e(p).spellCategory&&z(Ye)})}var Oe=i(Ne,2);{var h=z=>{var me=tt();f(()=>y(me,`${ra[e(p).trapCategory]??""}罠`)),r(z,me)};x(Oe,z=>{e(p).trapCategory&&z(h)})}var m=i(xe,4),T=a(m);{var Z=z=>{var me=ps(),je=L(me),Ke=a(je),Ue=i(je,2),Qe=a(Ue);f(()=>{y(Ke,e(p).attack??"?"),y(Qe,e(p).defense??"?")}),r(z,me)};x(T,z=>{e(p).kind==="Monster"&&z(Z)})}var ge=i(be,2),Se=i(ge,2);f(z=>{Ae(be,`${z??""} svelte-niobyr`),y(J,e(p).name),ge.disabled=!e(p).isImplemented,yt(ge,"title",e(p).isImplemented?"※shiftキー同時押しで一括投入":""),Se.disabled=!e(p).isImplemented,yt(Se,"title",e(p).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>{var z,me;return`deck_editor_card duel_card ${e(p).kind} ${(me=(z=e(p))==null?void 0:z.monsterCategories)==null?void 0:me.join(" ")} ${e(p).isImplemented?"is_implemented":"is_not_implemented"}`}],pe),ke("mouseenter",be,()=>c()(e(p))),ke("click",ge,z=>P(z,e(p))),ke("click",Se,z=>I(z,e(p))),r(R,we)};x(k,R=>{M<e(Y)&&R(H)})}r(_e,g)}),f(()=>y(F,`${Fa[e(b)]??""}（${e(O).length??""} / ${e(Q)[e(ne)][e(b)].length??""}枚）`)),r(E,U)}),f(E=>y(G,`${sr[e(ne)]??""}（${E??""} / ${e(Ee).length??""}枚）`),[()=>e(Ee).filter(se).length],pe),r(Ce,de)}),r(C,$)}),r(d,le),_t()}var xs=o('<div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>'),ks=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),ws=o('<div></div> <div class="svelte-rccxcp"> </div>',1),Ds=o("<div> </div>"),Cs=o("<div> </div>"),$s=o('<div class="duel_card_info_row svelte-rccxcp"><!> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),Ss=o('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Ms=o('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Ts=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※エラッタ前カードです</div></div>'),js=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),Bs=o('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),Es=o('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <!></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!> <!></div></div>');function As(d,s){dt(s,!1);let t=He(s,"cardInfo",8,void 0);ct();var v=Te(),u=L(v);{var c=_=>{var l=Es(),A=a(l),V=a(A),w=a(V),n=a(w),W=i(V,2);{var N=j=>{var q=xs(),G=a(q),ce=a(G),$e=i(G,2),ye=a($e);f((E,b)=>{y(ce,E),y(ye,b)},[()=>"★".repeat(t().level||0),()=>"☆".repeat(t().rank||0)],pe),r(j,q)};x(W,j=>{t().kind==="Monster"&&j(N)})}var P=i(A,2),I=a(P);{var Y=j=>{var q=ks(),G=L(q),ce=a(G),$e=a(ce),ye=a($e),E=i(G,2),b=a(E),U=a(b),O=i(b,2),ee=a(O);f(()=>{y(ye,t().pendulumDescription),y(U,`◀ ${t().pendulumScaleL??""}`),y(ee,`${t().pendulumScaleR??""} ▶`)}),r(j,q)};x(I,j=>{var q;(q=t().monsterCategories)!=null&&q.includes("Pendulum")&&j(Y)})}var B=i(I,2);{var se=j=>{var q=$s(),G=L(q),ce=a(G);{var $e=U=>{var O=ws(),ee=L(O),D=i(ee,2),F=a(D);f(()=>{Ae(ee,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),y(F,`${_a[t().attributes[0]]??""}属性`)}),r(U,O)};x(ce,U=>{t().attributes&&U($e)})}var ye=i(ce,2);{var E=U=>{var O=Ds(),ee=a(O);f(()=>{Ae(O,`monster_cat ${t().types[0]??""} svelte-rccxcp`),y(ee,`${ea[t().types[0]]??""}${ua[t().types[0]]??""}族`)}),r(U,O)};x(ye,U=>{t().types&&U(E)})}var b=i(G,2);oe(b,5,()=>t().monsterCategories??[],ve,(U,O)=>{var ee=Cs(),D=a(ee);f(()=>{Ae(ee,`monster_cat ${e(O)??""} svelte-rccxcp`),y(D,`${ta[e(O)]??""}${fa[e(O)]??""}`)}),r(U,ee)}),r(j,q)},le=j=>{var q=Te(),G=L(q);{var ce=ye=>{var E=Ss(),b=i(a(E),2),U=a(b);f(()=>y(U,`${aa[t().spellCategory]??""}魔法`)),r(ye,E)},$e=ye=>{var E=Te(),b=L(E);{var U=O=>{var ee=Ms(),D=i(a(ee),2),F=a(D);f(()=>y(F,`${ra[t().trapCategory]??""}罠`)),r(O,ee)};x(b,O=>{t().kind==="Trap"&&t().trapCategory&&O(U)},!0)}r(ye,E)};x(G,ye=>{t().kind==="Spell"&&t().spellCategory?ye(ce):ye($e,!1)},!0)}r(j,q)};x(B,j=>{t().kind==="Monster"?j(se):j(le,!1)})}var Be=i(B,2),C=a(Be),$=a(C),Q=a($),ue=i(Be,2);{var Ce=j=>{var q=Ts();r(j,q)};x(ue,j=>{t().isOldVersion&&j(Ce)})}var ne=i(ue,2);{var de=j=>{var q=js();r(j,q)},Ee=j=>{var q=Bs(),G=a(q),ce=i(G,2),$e=a(ce);f(ye=>{yt(G,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),yt(ce,"href",ye),y($e,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>or(t())],pe),r(j,q)};x(ne,j=>{t().isForTest?j(de):j(Ee,!1)})}f(j=>{Ae(l,`duel_card duel_card_info ${t().kind??""} ${j??""} svelte-rccxcp`),y(n,t().name),y(Q,t().description)},[()=>{var j;return(j=t().monsterCategories)==null?void 0:j.join(" ")}],pe),r(_,l)};x(u,_=>{t()&&_(c)})}r(d,v),_t()}const Ys={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class Us{constructor(){Ze(this,"DefaultSeparator1","/");Ze(this,"DefaultSeparator2"," ");Ze(this,"DefaultSeparator3",":");Ze(this,"createDate",s=>{if(!s)return;const t=new Date(s);if(!isNaN(t.getTime()))return t});Ze(this,"createDateOr",(s,t)=>this.createDate(s)||t||new Date);Ze(this,"truncateDate",s=>{const t=s||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});Ze(this,"addDate",(s,t)=>{const v=this.createDateOr(s);return v.setDate(v.getDate()+t),v});Ze(this,"addMonth",(s,t)=>{const v=this.createDateOr(s);return v.setMonth(v.getMonth()+t),v});Ze(this,"addYear",(s,t)=>{const v=this.createDateOr(s);return v.setFullYear(v.getFullYear()+t),v});Ze(this,"getDayOfWeek",(s,t="dddd")=>{const v=this.createDate(s);return v?Ys[v.getDay()][t]:""});Ze(this,"formatToYYYYMMDD",(s,t=this.DefaultSeparator1)=>{const v=this.createDate(s);if(!v)return"";const u=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2),_=("0"+v.getDate()).slice(-2);return u+t+c+t+_});Ze(this,"formatToYYYYMM",(s,t=this.DefaultSeparator1)=>{const v=this.createDate(s);if(!v)return"";t||(t="");const u=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2);return u+t+c});Ze(this,"formatToHHMMSS",(s,t=this.DefaultSeparator3)=>{const v=this.createDate(s);if(!v)return"";t||(t="");const u=v.getHours(),c=v.getMinutes(),_=v.getSeconds();return("0"+u).slice(-2)+t+("0"+c).slice(-2)+t+("0"+_).slice(-2)});Ze(this,"formatToHHMM",(s,t=this.DefaultSeparator3)=>{const v=this.createDate(s);if(!v)return"";t||(t="");const u=("0"+v.getHours()).slice(-2),c=("0"+v.getMinutes()).slice(-2);return u+t+c});Ze(this,"formatToYYYYMMDD_HHMM",(s,t=this.DefaultSeparator1,v=this.DefaultSeparator2,u=this.DefaultSeparator3)=>{const c=this.createDate(s);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMM(c,u):""});Ze(this,"formatToYYYYMMDD_HHMMSS",(s,t=this.DefaultSeparator1,v=this.DefaultSeparator2,u=this.DefaultSeparator3)=>{const c=this.createDate(s);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMMSS(c,u):""})}}const mt=new Us;Date.prototype.truncateDate=function(){return mt.truncateDate(this)};Date.prototype.getCloneOr=function(d){return mt.createDateOr(this,d)};Date.prototype.addDate=function(d){return mt.addDate(this,d)};Date.prototype.addMonth=function(d){return mt.addDate(this,d)};Date.prototype.addYear=function(d){return mt.addDate(this,d)};Date.prototype.getDayOfWeek=function(d="dddd"){return mt.getDayOfWeek(this,d)};Date.prototype.formatToYYYYMM=function(d){return mt.formatToYYYYMM(this,d)};Date.prototype.formatToYYYYMMDD=function(d){return mt.formatToYYYYMMDD(this,d)};Date.prototype.formatToYYYYMMDD_HHMM=function(d,s,t){return mt.formatToYYYYMMDD_HHMM(this,d,s,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(d,s,t){return mt.formatToYYYYMMDD_HHMMSS(this,d,s,t)};Date.prototype.formatToHHMM=function(d){return mt.formatToHHMM(this,d)};Date.prototype.formatToHHMMSS=function(d){return mt.formatToHHMMSS(this,d)};var Ls=o('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),Ns=o('<ul class="deck_info_list svelte-2wdgc8"></ul>'),Ps=o('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),qs=o('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),Fs=o('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),Hs=o('<button class="svelte-2wdgc8">Cancel</button>'),Is=o('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function Os(d,s){dt(s,!1);let t=He(s,"eventHolder",8),v=He(s,"args",8),u=He(s,"resolve",8),c=De(Promise.resolve([])),_=De();const l=()=>{S(_,new DataTransfer().files),S(c,Promise.resolve([]))},A=async N=>{N.preventDefault(),console.log("hoge",N)},V=async N=>{N.preventDefault(),N.dataTransfer&&n(N.dataTransfer.files)},w=()=>{n(e(_))},n=async N=>{if(!N.length)return;const P=[],I=[];for(const Y of N)try{I.push(...await xt.createfromJson(Y))}catch(B){B instanceof Error&&P.push(B.message)}if(P.length){console.log(...P);return}S(c,e(c).then(()=>I))},W=l;ct(),lr(d,{get eventHolder(){return t()},get args(){return v()},$$slots:{body:(N,P)=>{var I=qs(),Y=a(I);vt(Y,()=>Rt,null,(B,se)=>{var le=Te(),Be=L(le);vt(Be,()=>e(c),null,(C,$)=>{var Q=Te(),ue=L(Q);{var Ce=de=>{var Ee=Ns();oe(Ee,5,()=>e($),ve,(j,q)=>{var G=Ls(),ce=a(G),$e=a(ce),ye=i(ce,2),E=a(ye),b=i(ye,2),U=a(b);f((O,ee,D)=>{y($e,e(q).name),y(E,`${O??""}
                  /
                  ${ee??""}`),y(U,`最終使用日時 ： ${D??""}`)},[()=>e(q).cardNames.filter(O=>{var ee,D;return!((D=(ee=e(se).getCardInfo(O))==null?void 0:ee.monsterCategories)!=null&&D.union(Qt).length)}).length,()=>e(q).cardNames.filter(O=>{var ee,D;return(D=(ee=e(se).getCardInfo(O))==null?void 0:ee.monsterCategories)==null?void 0:D.union(Qt).length}).length,()=>e(q).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],pe),r(j,G)}),r(de,Ee)},ne=de=>{var Ee=Ps(),j=i(a(Ee),2),q=a(j);vr(q,()=>e(_),G=>S(_,G)),ke("change",q,w),ke("cancel",q,W),ke("drop",Ee,V),ke("dragover",Ee,A),r(de,Ee)};x(ue,de=>{e($).length?de(Ce):de(ne,!1)})}r(C,Q)}),r(B,le)}),r(N,I)},footer:(N,P)=>{var I=Is(),Y=a(I);vt(Y,()=>e(c),null,(B,se)=>{var le=Te(),Be=L(le);{var C=Q=>{var ue=Fs(),Ce=L(ue),ne=i(Ce,2),de=i(ne,2);f(()=>{Ce.disabled=e(se).length===0,ne.disabled=e(se).length===0}),ke("click",Ce,()=>u()({deckInfos:e(se),replaceAll:!1})),ke("click",ne,()=>u()({deckInfos:e(se),replaceAll:!0})),ke("click",de,W),r(Q,ue)},$=Q=>{var ue=Te(),Ce=L(ue);{var ne=de=>{var Ee=Hs();ke("click",Ee,()=>u()(void 0)),r(de,Ee)};x(Ce,de=>{v().cancelable&&de(ne)},!0)}r(Q,ue)};x(Be,Q=>{e(se).length?Q(C):Q($,!1)})}r(B,le)}),r(N,I)}}}),_t()}const Zt=class Zt extends cr{constructor(s,t){super(s,...Object.values(t))}};Ze(Zt,"createModalController",s=>{const t={deckUploader:new _r({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new Zt(s,t),t)});let da=Zt;function Rs(d,s){dt(s,!1);let t=He(s,"modalController",8);ct(),dr(d,{get modalController(){return t()},children:(v,u)=>{var c=Te(),_=L(c);{var l=A=>{Os(A,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};x(_,A=>{t().deckUploader.state==="Shown"&&A(l)})}r(v,c)},$$slots:{default:!0}}),_t()}var Ws=o('<label><input type="checkbox"> </label>'),Ks=o('<label><input type="checkbox"> </label>'),zs=o('<label><input type="checkbox"> <div style="display: inline-block;"></div> </label>'),Vs=o('<label><input type="checkbox"> </label>'),Gs=o('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">モンスター</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">属性</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">種族</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">星攻守</button></div> <div class="svelte-xd4rv4"><div><span>星</span> <input type="number" min="0" max="13" style="width: 2.5rem;"> <span>～</span> <input type="number" min="0" max="13" style="width: 2.5rem;"></div> <div><span>攻</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;"> <span>～</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;"></div> <div><span>守</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;"> <span>～</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;"></div> <div><span>攻+守</span> <input type="number" min="0" max="10000" step="100" style="width: 4rem;"></div></div></div>',1),Xs=o('<label><input type="checkbox"> </label>'),Qs=o('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">魔法</button></div> <div class="svelte-xd4rv4"></div></div>'),Js=o('<label><input type="checkbox"> </label>'),Zs=o('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">罠</button></div> <div class="svelte-xd4rv4"></div></div>'),en=o('<label><input type="checkbox"> </label>'),tn=o("<div>カード情報読込中</div>"),an=o("<option> </option>"),rn=o('<div class="svelte-xd4rv4"><a class="white_button svelte-xd4rv4" download="SVS_DeckInfos.json">ダウンロード</a></div>'),sn=o('<div class="svelte-xd4rv4"></div>'),nn=o('<div class="svelte-xd4rv4"><a class="white_button svelte-xd4rv4" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),on=o('<div class="svelte-xd4rv4"></div>'),ln=o('<div class="deck_editor_body_right_header svelte-xd4rv4"><div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">編集対象 <select></select></div> <div class="svelte-xd4rv4"></div> <div class="svelte-xd4rv4">新規名称 <input type="text"></div></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">基本操作</div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">デッキを保存</button></div> <div class="svelte-xd4rv4"></div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">デッキを複製</button></div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">DL/UL</div> <!> <!> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">アップロード</button></div></div></div> <!>',1),vn=o("<div>デッキ情報読込中</div>"),dn=o('<div class="deck_editor svelte-xd4rv4"><div class="deck_editor_header"></div> <div class="deck_editor_body svelte-xd4rv4"><div class="deck_editor_body_left svelte-xd4rv4"><div role="contentinfo"><div class="deck_editor_search_box_header svelte-xd4rv4"><div>検索条件</div> <div><button class="white_button svelte-xd4rv4">条件クリア</button></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">名称</button></div> <div class="svelte-xd4rv4"><input type="text" style="width:70%"> <span>※ルビには対応していません</span></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">種類</button></div> <div class="svelte-xd4rv4"></div></div> <!> <!> <!> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">その他</button></div> <div class="svelte-xd4rv4"></div></div></div> <!></div> <div class="deck_editor_body_center svelte-xd4rv4"><!></div> <div class="deck_editor_body_right svelte-xd4rv4"><!></div></div> <div class="footer svelte-xd4rv4"></div></div> <!>',1);function cn(d,s){dt(s,!1);const t=[],v=[],u=[],c=[],_=[],l=[],A=[],V=da.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),w={name:"",cardKinds:Ta.filter(h=>h!=="XyzMaterial"),monsterCategories:[...ja],monsterAttributes:[...Ma],monsterTypes:[...Sa],spellCategories:$a.filter(h=>h!=="PendulumScale"),trapCategories:[...Ca],starLowerBound:0,starUpperBound:13,atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:["test","oldVersion","implemented"]},n=De(structuredClone(w));Me(n,e(n).others=["oldVersion"]);let W=De("SearchCondition");const N=async()=>{Me(n,e(n).name=""),Me(n,e(n).cardKinds=[]),Me(n,e(n).monsterCategories=[]),Me(n,e(n).monsterAttributes=[]),Me(n,e(n).monsterTypes=[]),Me(n,e(n).spellCategories=[]),Me(n,e(n).trapCategories=[]),Me(n,e(n).others=[]),Me(n,e(n).atkLowerBound=0),Me(n,e(n).atkUpperBound=5e3),Me(n,e(n).defLowerBound=0),Me(n,e(n).defUpperBound=5e3),Me(n,e(n).atkPlusDef=void 0)},P=h=>{h.forEach(m=>{Array.isArray(e(n)[m])&&Array.isArray(w[m])?Me(n,e(n)[m]=e(n)[m].length?[]:[...w[m]]):Me(n,e(n)[m]=w[m])})},I=(h,m,T)=>{Array.isArray(e(n)[m])&&Array.isArray(w[m])&&Me(n,e(n)[m]=[T])},Y=async()=>{const m=(await e(le)).find(Z=>Z.id===e(se));if(!m)return;const T=await Rt;S($,{...m,cardInfos:m.cardNames.map(Z=>{const ge=T.getCardInfo(Z);return ge===void 0&&console.error(Z),ge}).filter(Z=>Z!==void 0)})},B=()=>xt.getAllDeckInfo().then(h=>(S(se,(h.find(m=>m.lastUsedAt.getTime()===Math.max(...h.map(T=>T.lastUsedAt.getTime())))??h[0]).id),h));let se=De(-1),le=De(B()),Be=De(e(le).then(h=>xt.convertToObjectURL(h)));e(le).then(Y);const C=()=>{S(le,B()),S(Be,e(le).then(h=>xt.convertToObjectURL(h))),Y()};let $=De({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),Q=De(void 0),ue=0;const Ce=h=>{S(W,"CardDetail"),h.cardId!==void 0&&!h.description&&!h.pendulumDescription&&(ue=h.cardId,qa([h.cardId]).then(()=>{h.cardId===ue&&S(Q,h)})),S(Q,h)},ne=async()=>{const m=(await e(le)).find(T=>T.id===e(se));if(!m)throw new Error("illegal state");return m},de=async()=>{const h=await ne();await h.saveDeckInfo({...h,name:e($).name,cardNames:e($).cardInfos.map(m=>m.name),lastUsedAt:new Date}),C()},Ee=async()=>{(await xt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,e($).cardInfos.map(m=>m.name))).saveDeckInfo(),C()},j=async h=>{const m=await ne();!h.shiftKey&&!confirm(`デッキ【${m.name}】を削除します。
よろしいですか？`)||(await m.delete(),C())},q=async()=>{const h=await V.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!h)return;const m=[];if(h.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;m.push(...(await e(le)).map(T=>T.id))}await Promise.all(h.deckInfos.map(T=>xt.createNewDeck(T.name,T.description,T.cardNames,T.lastUsedAt))),m.length&&await Promise.all(m.map(xt.remove)),C()};ct();var G=dn(),ce=L(G),$e=i(a(ce),2),ye=a($e),E=a(ye),b=a(E),U=i(a(b),2),O=a(U),ee=i(b,2),D=a(ee),F=a(D),te=i(D,2),ie=a(te),ae=i(ee,2),_e=a(ae),p=a(_e),M=i(_e,2);oe(M,5,()=>Ta.filter(h=>h!=="XyzMaterial"),ve,(h,m)=>{var T=Ws(),Z=a(T),ge,Se=i(Z);f(()=>{ge!==(ge=e(m))&&(Z.value=(Z.__value=e(m))==null?"":e(m)),y(Se,` ${Fa[e(m)]??""}`)}),At(t,[],Z,()=>(e(m),e(n).cardKinds),z=>Me(n,e(n).cardKinds=z)),r(h,T)});var g=i(ae,2);{var k=h=>{var m=Gs(),T=L(m),Z=a(T),ge=a(Z),Se=i(Z,2);oe(Se,5,()=>ja,ve,(Pe,qe)=>{var Je=Ks(),Xe=a(Je),ut,ht=i(Xe);f(()=>{ut!==(ut=e(qe))&&(Xe.value=(Xe.__value=e(qe))==null?"":e(qe)),y(ht,` ${ta[e(qe)]??""}${fa[e(qe)]??""}`)}),At(v,[],Xe,()=>(e(qe),e(n).monsterCategories),ft=>Me(n,e(n).monsterCategories=ft)),r(Pe,Je)});var z=i(T,2),me=a(z),je=a(me),Ke=i(me,2);oe(Ke,5,()=>Ma,ve,(Pe,qe)=>{var Je=zs(),Xe=a(Je),ut,ht=i(Xe,2),ft=i(ht);f(()=>{ut!==(ut=e(qe))&&(Xe.value=(Xe.__value=e(qe))==null?"":e(qe)),Ae(ht,`monster_attr ${e(qe)??""} svelte-xd4rv4`),y(ft,` ${_a[e(qe)]??""}`)}),At(u,[],Xe,()=>(e(qe),e(n).monsterAttributes),jt=>Me(n,e(n).monsterAttributes=jt)),r(Pe,Je)});var Ue=i(z,2),Qe=a(Ue),ot=a(Qe),gt=i(Qe,2);oe(gt,5,()=>Sa,ve,(Pe,qe)=>{var Je=Vs(),Xe=a(Je),ut,ht=i(Xe);f(()=>{ut!==(ut=e(qe))&&(Xe.value=(Xe.__value=e(qe))==null?"":e(qe)),y(ht,` ${ea[e(qe)]??""}
                  ${ua[e(qe)]??""}`)}),At(c,[],Xe,()=>(e(qe),e(n).monsterTypes),ft=>Me(n,e(n).monsterTypes=ft)),ke("dblclick",Je,ft=>I(ft,"monsterTypes",e(qe))),r(Pe,Je)});var kt=i(Ue,2),We=a(kt),Ie=a(We),ze=i(We,2),it=a(ze),St=i(a(it),2),Tt=i(St,4),Dt=i(it,2),Ve=i(a(Dt),2),et=i(Ve,4),st=i(Dt,2),Re=i(a(st),2),Ge=i(Re,4),nt=i(st,2),at=i(a(nt),2);ke("click",ge,()=>P(["monsterCategories"])),re(3,T,()=>he,()=>({delay:0,duration:100})),ke("click",je,()=>P(["monsterAttributes"])),re(3,z,()=>he,()=>({delay:0,duration:100})),ke("click",ot,()=>P(["monsterTypes"])),re(3,Ue,()=>he,()=>({delay:0,duration:100})),ke("click",Ie,()=>P(["starLowerBound","starUpperBound","atkLowerBound","atkUpperBound","defLowerBound","defUpperBound","atkPlusDef"])),wt(St,()=>e(n).starLowerBound,Pe=>Me(n,e(n).starLowerBound=Pe)),wt(Tt,()=>e(n).starUpperBound,Pe=>Me(n,e(n).starUpperBound=Pe)),wt(Ve,()=>e(n).atkLowerBound,Pe=>Me(n,e(n).atkLowerBound=Pe)),wt(et,()=>e(n).atkUpperBound,Pe=>Me(n,e(n).atkUpperBound=Pe)),wt(Re,()=>e(n).defLowerBound,Pe=>Me(n,e(n).defLowerBound=Pe)),wt(Ge,()=>e(n).defUpperBound,Pe=>Me(n,e(n).defUpperBound=Pe)),wt(at,()=>e(n).atkPlusDef,Pe=>Me(n,e(n).atkPlusDef=Pe)),re(3,kt,()=>he,()=>({delay:0,duration:100})),r(h,m)};x(g,h=>{e(n).cardKinds.includes("Monster")&&h(k)})}var H=i(g,2);{var R=h=>{var m=Qs(),T=a(m),Z=a(T),ge=i(T,2);oe(ge,5,()=>$a.filter(Se=>Se!=="PendulumScale"),ve,(Se,z)=>{var me=Xs(),je=a(me),Ke,Ue=i(je);f(()=>{Ke!==(Ke=e(z))&&(je.value=(je.__value=e(z))==null?"":e(z)),y(Ue,` ${aa[e(z)]??""}`)}),At(_,[],je,()=>(e(z),e(n).spellCategories),Qe=>Me(n,e(n).spellCategories=Qe)),r(Se,me)}),ke("click",Z,()=>P(["spellCategories"])),re(3,m,()=>he,()=>({delay:0,duration:100})),r(h,m)};x(H,h=>{e(n).cardKinds.includes("Spell")&&h(R)})}var we=i(H,2);{var be=h=>{var m=Zs(),T=a(m),Z=a(T),ge=i(T,2);oe(ge,5,()=>Ca,ve,(Se,z)=>{var me=Js(),je=a(me),Ke,Ue=i(je);f(()=>{Ke!==(Ke=e(z))&&(je.value=(je.__value=e(z))==null?"":e(z)),y(Ue,` ${ra[e(z)]??""}`)}),At(l,[],je,()=>(e(z),e(n).trapCategories),Qe=>Me(n,e(n).trapCategories=Qe)),r(Se,me)}),ke("click",Z,()=>P(["trapCategories"])),re(3,m,()=>he,()=>({delay:0,duration:100})),r(h,m)};x(we,h=>{e(n).cardKinds.includes("Trap")&&h(be)})}var fe=i(we,2),X=a(fe),J=a(X),K=i(X,2);oe(K,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],ve,(h,m)=>{var T=en(),Z=a(T),ge,Se=i(Z);f(()=>{ge!==(ge=m.key)&&(Z.value=(Z.__value=m.key)==null?"":m.key),y(Se,` ${m.text??""}`)}),At(A,[],Z,()=>(m.key,e(n).others),z=>Me(n,e(n).others=z)),r(h,T)});var xe=i(E,2);As(xe,{get cardInfo(){return e(Q)}});var Le=i(ye,2),Fe=a(Le);vt(Fe,()=>Rt,h=>{var m=tn();r(h,m)},(h,m)=>{const T=pe(()=>Object.values(e(m).dic));Na(h,{mode:"List",get allCardInfos(){return e(T)},onAttention:Ce,get searchCondition(){return e(n)},get deckCardInfos(){return e($).cardInfos},set deckCardInfos(Z){Me($,e($).cardInfos=Z)},$$legacy:!0})});var Ne=i(Le,2),Ye=a(Ne);vt(Ye,()=>e(le),h=>{var m=vn();r(h,m)},(h,m)=>{var T=ln(),Z=L(T),ge=a(Z),Se=a(ge),z=i(a(Se));f(()=>{e(se),Ft(()=>{e(m)})}),oe(z,5,()=>e(m),ve,(Ve,et)=>{var st=an(),Re={},Ge=a(st);f(()=>{Re!==(Re=e(et).id)&&(st.value=(st.__value=e(et).id)==null?"":e(et).id),y(Ge,e(et).name)}),r(Ve,st)});var me=i(Se,4),je=i(a(me)),Ke=i(ge,4),Ue=i(a(Ke),2),Qe=a(Ue),ot=i(Ue,4),gt=a(ot),kt=i(ot,2),We=a(kt),Ie=i(Ke,2),ze=i(a(Ie),2);vt(ze,ne,Ve=>{var et=sn();r(Ve,et)},(Ve,et)=>{var st=rn(),Re=a(st);f(Ge=>yt(Re,"href",Ge),[()=>xt.convertToObjectURL([e(et)])],pe),r(Ve,st)});var it=i(ze,2);vt(it,()=>e(Be),Ve=>{var et=on();r(Ve,et)},(Ve,et)=>{var st=nn(),Re=a(st);f(()=>yt(Re,"href",e(et))),r(Ve,st)});var St=i(it,2),Tt=a(St),Dt=i(Z,2);Na(Dt,{mode:"Deck",allCardInfos:[],onAttention:Ce,get deckCardInfos(){return e($).cardInfos},set deckCardInfos(Ve){Me($,e($).cardInfos=Ve)},$$legacy:!0}),Ht(z,()=>e(se),Ve=>S(se,Ve)),ke("change",z,Y),wt(je,()=>e($).name,Ve=>Me($,e($).name=Ve)),ke("click",Qe,de),ke("click",gt,Ee),ke("click",We,j),ke("click",Tt,q),r(h,T)});var Oe=i(ce,2);Rs(Oe,{modalController:V}),f(()=>Ae(E,`deck_editor_search_box ${(e(W)==="SearchCondition"?"":"minimum")??""} svelte-xd4rv4`)),ke("click",O,N),ke("click",F,()=>P(["name"])),wt(ie,()=>e(n).name,h=>Me(n,e(n).name=h)),ke("click",p,()=>P(["cardKinds"])),ke("click",J,()=>P(["others"])),re(3,fe,()=>he,()=>({delay:0,duration:100})),ke("mouseenter",E,()=>S(W,"SearchCondition")),r(d,G),_t()}const _n=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],un=3;var fn=o('<input class="game_mode_radio svelte-sy4ydn" type="radio" name="game_mode"> <label> </label>',1),pn=o('<option class="svelte-sy4ydn"> </option>'),yn=o('<option class="svelte-sy4ydn"> </option>'),gn=o('<option class="svelte-sy4ydn"> </option>'),mn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_deck_selector" class="deck_selector svelte-sy4ydn"><option class="svelte-sy4ydn">デフォルト</option><!></select></div></td></tr>'),hn=o('<option class="svelte-sy4ydn"> </option>'),bn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">対戦相手：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select> <div class="svelte-sy4ydn"> </div></div></td></tr> <!> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">先攻後攻：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select></div></td></tr>',1),xn=o('<option class="svelte-sy4ydn"> </option>'),kn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-sy4ydn">難易度：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="difficulty_selector" class="difficulty_selector svelte-sy4ydn"></select></div></td></tr>'),wn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label class="config_row_label svelte-sy4ydn" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"></div></td></tr> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="deck_selector" class="deck_selector svelte-sy4ydn"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">duel start!</button></div></td></tr>',1),Dn=o('<tr><td colspan="2" class="svelte-sy4ydn"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),Cn=o('<tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">deck edit</button></div></td></tr>'),$n=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="duelist_name" class="config_row_label duelist_name svelte-sy4ydn">名前：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><input id="duelist_name" class="duelist_name svelte-sy4ydn" type="text"></div></td></tr> <!> <!>',1),Sn=o('<tr><td colspan="2" class="svelte-sy4ydn"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),Mn=o('<div class="app_body svelte-sy4ydn"><table class="config_table svelte-sy4ydn"><tbody><!></tbody></table></div>'),Tn=o('<span class="svelte-sy4ydn"> </span> <span class="svelte-sy4ydn"> </span>',1),jn=o('<div class="result_title result_win svelte-sy4ydn">YOU WIN</div>'),Bn=o('<div class="result_title result_lose svelte-sy4ydn">YOU LOSE</div>'),En=o('<div class="result_title result_draw svelte-sy4ydn">DRAW</div>'),An=o('<div class="twitter_share_button_wrapper svelte-sy4ydn"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-sy4ydn">X(twitter)でシェアする</a></div>'),Yn=o('<div class="result svelte-sy4ydn"><!> <div class="reason_of_end svelte-sy4ydn"> </div> <!> <div class="svelte-sy4ydn"><button class="white_button svelte-sy4ydn">TOPへ戻る</button></div></div>'),Un=o('<main style="flex-direction: column; display :flex" class="svelte-sy4ydn"><div class="link link_left svelte-sy4ydn"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-sy4ydn">posfie(toggeter)</a></div> <div class="link link_right svelte-sy4ydn"><a class="a_button svelte-sy4ydn" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">現時点とこの先のこと</a></div> <!> <div class="footer card_summary svelte-sy4ydn"><!></div> <div class="footer debug_info svelte-sy4ydn"><span class="svelte-sy4ydn"> </span> <span class="user_agent_info svelte-sy4ydn"> </span> <span class="screen_info svelte-sy4ydn"> </span></div> <!></main>');function Ln(d,s){dt(s,!1);const t=new ur("stk_ygo_svelte",un,_n);let v=De(0),u=De(0),c=De(),_=De("FtkChallenge"),l=De("None"),A=De(0),V=De(""),w=De(void 0);const n="https://setta238.github.io/stk_ygo_svelte/",W="遊戯王deそりてあ",N="ninja_no",P=fr.getOrCreateNew(t).then(p=>(S(_,Ba.includes(p.previousGameMode)?p.previousGameMode:"FtkChallenge"),Ee(p.previousNpcId),p)),I=p=>{var g;const M=p.find(k=>k.lastUsedAt.getTime()===Math.max(...p.map(H=>H.lastUsedAt.getTime())))??p[0];S(A,M.id),e(_)==="FtkChallenge"&&M.deckType!=="Preset"&&S(A,((g=Yt.find(k=>k.deckType==="Preset"))==null?void 0:g.id)??e(A))};let Y=De(xt.getAllDeckInfo(t).then(p=>(Promise.all(p.filter(M=>!M.lastUsedAt).map(M=>{M.saveDeckInfo()})),I(p),p)));const B=async()=>{const p=e(A);let M=(await e(Y)).find(k=>k.id===p)??(await le()).find(k=>k.id===p);M&&await M.updateTimestamp();let g=M;if(g||(g=Yt.find(k=>k.id===p)),!g)throw new Error("illegal state");return g},se=async()=>{(await P).save({previousGameMode:e(_)})},le=()=>(S(Y,xt.getAllDeckInfo(t).then(p=>(I(p),p))),e(Y)),Be=async()=>{(await e(Y)).length||(await xt.prepareSampleDeck(),le())},C=async()=>{await Promise.all([se(),Be()]);const p=await B(),M=await P;let g=qt.find(R=>R.id===Number.MIN_SAFE_INTEGER)??qt[0],k=Yt.find(R=>R.id===Number.MIN_SAFE_INTEGER)??Yt[0],H="PlayFirst";e(_)==="FtkChallenge"?g=qt.filter(R=>R.npcType==="FtkChallenge").find(R=>R.difficulty===M.previousDifficulty)??g:e(_)==="Free"&&(g=qt.find(R=>R.id===M.previousNpcId)??g,k=Yt.slice(-1)[0],H=M.previousStartMode),g.npcType!=="FtkChallenge"&&M.previousNpcDeckId>-1?k=(await e(Y)).find(R=>R.id===M.previousNpcDeckId)??k:k=Yt.find(R=>R.id===g.id)??k,S(c,new mr(M,"Player",p,[],g,"NPC",k,[],H)),e(c).onDuelEnd.append(()=>(S(c,e(c)),"RemoveMe"))},$=async()=>{await Promise.all([se(),Be()]),S(l,"DeckEdit")},Q=async p=>{await se(),p.key==="Enter"&&!p.repeat&&(await P).save()},ue=()=>{S(Y,le()),S(c,void 0),S(l,"None")};let Ce=Date.now();const ne=p=>{Date.now()-Ce<200||(Ce=Date.now(),S(_,p),le())},de=p=>{Ee(Number(p.currentTarget.value))},Ee=p=>{var M;S(w,qt.find(g=>g.id===p)),S(V,((M=e(w))==null?void 0:M.description)??"")};Be(),ct();var j=Un(),q=i(a(j),2),G=a(q),ce=i(q,2);{var $e=p=>{var M=Te(),g=L(M);vt(g,()=>P,null,(k,H)=>{ds(k,{get duel(){return e(c)},get userProfile(){return e(H)}})}),r(p,M)},ye=p=>{var M=Te(),g=L(M);{var k=R=>{cn(R,{})},H=R=>{var we=Mn(),be=a(we),fe=a(be),X=a(fe);vt(X,()=>P,J=>{var K=Sn();r(J,K)},(J,K)=>{var xe=$n(),Le=L(xe),Fe=a(Le),Ne=a(Fe),Ye=i(Fe),Oe=a(Ye),h=a(Oe),m=i(Le,2);vt(m,()=>e(Y),ge=>{var Se=Dn();r(ge,Se)},(ge,Se)=>{var z=wn(),me=L(z),je=a(me),Ke=a(je),Ue=i(je),Qe=a(Ue);oe(Qe,5,()=>Ba,ve,(Re,Ge)=>{var nt=fn(),at=L(nt),Pe=i(at,2),qe=a(Pe);f(Je=>{yt(at,"id",`game_mode_radio_${Je??""}`),yr(at,e(Ge)),gr(at,e(_)===e(Ge)),Ae(Pe,`game_mode_tab_label game_mode_tab_${Je??""} svelte-sy4ydn`),yt(Pe,"for",`game_mode_radio_${Je??""}`),y(qe,e(Ge))},[()=>e(Ge).toLowerCase()],pe),ke("change",at,()=>ne(e(Ge))),r(Re,nt)});var ot=i(me,2),gt=a(ot),kt=a(gt),We=i(gt),Ie=a(We),ze=a(Ie);f(()=>{e(A),Ft(()=>{e(_),e(Se)})}),oe(ze,5,()=>e(_)==="FtkChallenge"?Yt.filter(Re=>Re.deckType==="Preset"):e(Se),ve,(Re,Ge)=>{var nt=pn(),at={},Pe=a(nt);f(()=>{at!==(at=e(Ge).id)&&(nt.value=(nt.__value=e(Ge).id)==null?"":e(Ge).id),y(Pe,e(Ge).name)}),r(Re,nt)});var it=i(ot,2);{var St=Re=>{var Ge=bn(),nt=L(Ge),at=a(nt),Pe=a(at),qe=i(at),Je=a(qe),Xe=a(Je);f(()=>{e(K),Ft(()=>{})}),oe(Xe,5,()=>qt,ve,(bt,rt)=>{var pt=yn(),Et={},Pt=a(pt);f(()=>{Et!==(Et=e(rt).id)&&(pt.value=(pt.__value=e(rt).id)==null?"":e(rt).id),y(Pt,e(rt).name)}),r(bt,pt)});var ut=i(Xe,2),ht=a(ut),ft=i(nt,2);{var jt=bt=>{var rt=mn(),pt=a(rt),Et=a(pt),Pt=i(pt),ha=a(Pt),ba=a(ha);f(()=>{e(K),Ft(()=>{e(Se)})});var ia=a(ba);ia.value=(ia.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Ha=i(ia);oe(Ha,1,()=>e(Se),ve,(sa,Vt)=>{var Gt=gn(),xa={},Ia=a(Gt);f(()=>{xa!==(xa=e(Vt).id)&&(Gt.value=(Gt.__value=e(Vt).id)==null?"":e(Vt).id),y(Ia,e(Vt).name)}),r(sa,Gt)}),re(3,Et,()=>he,()=>({duration:200})),re(3,pt,()=>he,()=>({duration:200})),Ht(ba,()=>e(K).previousNpcDeckId,sa=>e(K).previousNpcDeckId=sa),re(3,ha,()=>he,()=>({duration:200})),re(3,Pt,()=>he,()=>({duration:200})),re(3,rt,()=>he,()=>({duration:200})),r(bt,rt)};x(ft,bt=>{var rt;((rt=e(w))==null?void 0:rt.npcType)!=="FtkChallenge"&&bt(jt)})}var Bt=i(ft,2),Mt=a(Bt),Kt=a(Mt),zt=i(Mt),ga=a(zt),ma=a(ga);f(()=>{e(K),Ft(()=>{})}),oe(ma,5,()=>ca(Ea),ve,(bt,rt)=>{var pt=hn(),Et={},Pt=a(pt);f(()=>{Et!==(Et=e(rt))&&(pt.value=(pt.__value=e(rt))==null?"":e(rt)),y(Pt,Ea[e(rt)])}),r(bt,pt)}),f(()=>y(ht,`※${e(V)??""}`)),re(3,Pe,()=>he,()=>({duration:200})),re(3,at,()=>he,()=>({duration:200})),ke("change",Xe,de),Ht(Xe,()=>e(K).previousNpcId,bt=>e(K).previousNpcId=bt),re(3,Je,()=>he,()=>({duration:200})),re(3,qe,()=>he,()=>({duration:200})),re(3,nt,()=>he,()=>({duration:200})),re(3,Kt,()=>he,()=>({duration:200})),re(3,Mt,()=>he,()=>({duration:200})),Ht(ma,()=>e(K).previousStartMode,bt=>e(K).previousStartMode=bt),re(3,ga,()=>he,()=>({duration:200})),re(3,zt,()=>he,()=>({duration:200})),re(3,Bt,()=>he,()=>({duration:200})),r(Re,Ge)},Tt=Re=>{var Ge=Te(),nt=L(Ge);{var at=Pe=>{var qe=kn(),Je=a(qe),Xe=a(Je),ut=i(Je),ht=a(ut),ft=a(ht);f(()=>{e(K),Ft(()=>{})}),oe(ft,5,()=>hr,ve,(jt,Bt)=>{var Mt=xn(),Kt={},zt=a(Mt);f(()=>{Kt!==(Kt=e(Bt))&&(Mt.value=(Mt.__value=e(Bt))==null?"":e(Bt)),y(zt,e(Bt))}),r(jt,Mt)}),re(3,Xe,()=>he,()=>({duration:200})),re(3,Je,()=>he,()=>({duration:200})),Ht(ft,()=>e(K).previousDifficulty,jt=>e(K).previousDifficulty=jt),re(3,ht,()=>he,()=>({duration:200})),re(3,ut,()=>he,()=>({duration:200})),re(3,qe,()=>he,()=>({duration:200})),r(Pe,qe)};x(nt,Pe=>{e(_)==="FtkChallenge"&&Pe(at)},!0)}r(Re,Ge)};x(it,Re=>{e(_)==="Free"?Re(St):Re(Tt,!1)})}var Dt=i(it,2),Ve=a(Dt),et=a(Ve),st=a(et);re(3,Ke,()=>he,()=>({duration:200})),re(3,je,()=>he,()=>({duration:200})),re(3,Qe,()=>he,()=>({duration:200})),re(3,Ue,()=>he,()=>({duration:200})),re(3,me,()=>he,()=>({duration:200})),re(3,kt,()=>he,()=>({duration:200})),re(3,gt,()=>he,()=>({duration:200})),Ht(ze,()=>e(A),Re=>S(A,Re)),re(3,Ie,()=>he,()=>({duration:200})),re(3,We,()=>he,()=>({duration:200})),re(3,ot,()=>he,()=>({duration:200})),ke("click",st,C),re(3,et,()=>he,()=>({duration:200})),r(ge,z)});var T=i(m,2);{var Z=ge=>{var Se=Cn(),z=a(Se),me=a(z),je=a(me);ke("click",je,$),re(3,me,()=>he,()=>({duration:200})),re(3,z,()=>he,()=>({duration:200})),re(3,Se,()=>he,()=>({duration:200})),r(ge,Se)};x(T,ge=>{e(_)==="Free"&&ge(Z)})}re(3,Ne,()=>he,()=>({duration:200})),re(3,Fe,()=>he,()=>({duration:200})),wt(h,()=>e(K).name,ge=>e(K).name=ge),ke("keypress",h,Q),re(3,Oe,()=>he,()=>({duration:200})),re(3,Ye,()=>he,()=>({duration:200})),re(3,Le,()=>he,()=>({duration:200})),r(J,xe)}),r(R,we)};x(g,R=>{e(l)==="DeckEdit"?R(k):R(H,!1)},!0)}r(p,M)};x(ce,p=>{e(c)?p($e):p(ye,!1)})}var E=i(ce,2),b=a(E);vt(b,()=>Rt,p=>{var M=tt("読み込み中");r(p,M)},(p,M)=>{var g=Tn(),k=L(g),H=a(k),R=i(k,2),we=a(R);f((be,fe,X)=>{y(H,`公式DB上のカード${be??""}枚`),y(we,`実装済カード（効果あり）${fe??""}枚 （効果なし）${X??""}枚`)},[()=>e(M).knmCount.toLocaleString(),()=>e(M).definitionCount.toLocaleString(),()=>e(M).nonDefinitionCount.toLocaleString()],pe),r(p,g)});var U=i(E,2),O=a(U),ee=a(O),D=i(O,2),F=a(D),te=i(D,2),ie=a(te),ae=i(U,2);{var _e=p=>{var M=Yn(),g=a(M);{var k=K=>{var xe=Te(),Le=L(xe);{var Fe=Ye=>{var Oe=jn();r(Ye,Oe)},Ne=Ye=>{var Oe=Te(),h=L(Oe);{var m=T=>{var Z=Bn();r(T,Z)};x(h,T=>{e(c).winner.seat==="Above"&&T(m)},!0)}r(Ye,Oe)};x(Le,Ye=>{e(c).winner.seat==="Below"?Ye(Fe):Ye(Ne,!1)})}r(K,xe)},H=K=>{var xe=En();r(K,xe)};x(g,K=>{e(c).winner?K(k):K(H,!1)})}var R=i(g,2),we=a(R),be=i(R,2);{var fe=K=>{var xe=An(),Le=a(xe);f(()=>yt(Le,"href",`https://x.com/share?url=${n}&text=${e(c).twitterShareText??""}&hashtags=${W}&via=${N}`)),r(K,xe)};x(be,K=>{e(c).twitterShareText&&K(fe)})}var X=i(be,2),J=a(X);f(()=>y(we,e(c).reasonOfEnd)),ke("click",J,ue),re(3,M,()=>kr,()=>({delay:200,duration:200})),r(p,M)};x(ae,p=>{e(c)&&e(c).isEnded&&p(_e)})}f(()=>{y(ee,"build at: 20260102_225715"),y(F,pr.text),y(ie,`w:${e(v)??""}px h:${e(u)??""}px`)}),Xt("innerWidth",p=>S(v,p)),Xt("innerHeight",p=>S(u,p)),ke("click",G,ue),r(d,j),_t()}br(Ln,{target:document.getElementById("app")});
