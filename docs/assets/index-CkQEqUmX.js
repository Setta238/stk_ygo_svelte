var ki=Object.defineProperty;var xi=(e,r,t)=>r in e?ki(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var Ue=(e,r,t)=>xi(e,typeof r!="symbol"?r+"":r,t);import{m as sr,a as Sr,b as lr,c as Er,s as or,t as vr,S as Ci,d as Di,e as Si,f as Oa,g as zt,h as ea,i as Ei,j as jr,k as Ya,l as Ra,n as Mi,o as Ti,p as qi,q as fa,r as _a,u as pa,v as ma,w as ga,x as ha,D as xt,y as $i,z as Ai,A as zi,B as Lr,C as ya,E as ba,F as Ii}from"./entity_proc.js";import"./json.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const Wr=!1;var ta=Array.isArray,Ni=Array.prototype.indexOf,ra=Array.from,Oi=Object.defineProperty,Ft=Object.getOwnPropertyDescriptor,ja=Object.getOwnPropertyDescriptors,Yi=Object.prototype,Ri=Array.prototype,aa=Object.getPrototypeOf;function ji(e){return typeof e=="function"}const Ct=()=>{};function Li(e){return typeof(e==null?void 0:e.then)=="function"}function Pi(e){return e()}function Kr(e){for(var r=0;r<e.length;r++)e[r]()}const rt=2,La=4,Mr=8,Tr=16,yt=32,dr=64,hr=128,tt=256,yr=512,Xe=1024,bt=2048,Kt=4096,pt=8192,qr=16384,Pa=32768,$r=65536,Fa=1<<17,Fi=1<<19,Ua=1<<20,mt=Symbol("$state"),Ui=Symbol("legacy props"),Hi=Symbol("");function Ha(e){return e===this.v}function Ba(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function ia(e){return!Ba(e,this.v)}function Bi(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Wi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ki(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Vi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Gi(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Xi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Qi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Zi(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Ji(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let cr=!1,en=!1;function tn(){cr=!0}const na=1,sa=2,Wa=4,rn=8,an=16,nn=1,sn=2,ln=4,on=8,vn=16,dn=1,cn=2,un=4,fn=1,_n=2,Be=Symbol();let je=null;function br(e){je=e}function We(e,r=!1,t){je={p:je,c:null,e:null,m:!1,s:e,x:null,l:null},cr&&!r&&(je.l={s:null,u:null,r1:[],r2:Ve(!1)})}function Ke(e){const r=je;if(r!==null){const c=r.e;if(c!==null){var t=ze,i=Ie;r.e=null;try{for(var n=0;n<c.length;n++){var s=c[n];it(s.effect),at(s.reaction),Xt(s.fn)}}finally{it(t),at(i)}}je=r.p,r.m=!0}return{}}function Vt(){return!cr||je!==null&&je.l===null}function Ve(e,r){var t={f:0,v:e,reactions:null,equals:Ha,rv:0,wv:0};return t}function pn(e){return Ka(Ve(e))}function rr(e,r=!1){var i;const t=Ve(e);return r||(t.equals=ia),cr&&je!==null&&je.l!==null&&((i=je.l).s??(i.s=[])).push(t),t}function Se(e,r=!1){return Ka(rr(e,r))}function Ka(e){return Ie!==null&&!vt&&Ie.f&rt&&(dt===null?Sn([e]):dt.push(e)),e}function Ne(e,r){return N(e,gt(()=>a(e))),r}function N(e,r){return Ie!==null&&!vt&&Vt()&&Ie.f&(rt|Tr)&&(dt===null||!dt.includes(e))&&Ji(),Mt(e,r)}function Mt(e,r){return e.equals(r)||(e.v,e.v=r,e.wv=ui(),Va(e,bt),Vt()&&ze!==null&&ze.f&Xe&&!(ze.f&(yt|dr))&&(ut===null?En([e]):ut.push(e))),r}function Va(e,r){var t=e.reactions;if(t!==null)for(var i=Vt(),n=t.length,s=0;s<n;s++){var c=t[s],v=c.f;v&bt||!i&&c===ze||(ct(c,r),v&(Xe|tt)&&(v&rt?Va(c,Kt):Yr(c)))}}let Ga=!1;function Dt(e,r=null,t){if(typeof e!="object"||e===null||mt in e)return e;const i=aa(e);if(i!==Yi&&i!==Ri)return e;var n=new Map,s=ta(e),c=Ve(0);s&&n.set("length",Ve(e.length));var v;return new Proxy(e,{defineProperty(p,d,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&Xi();var m=n.get(d);return m===void 0?(m=Ve(l.value),n.set(d,m)):N(m,Dt(l.value,v)),!0},deleteProperty(p,d){var l=n.get(d);if(l===void 0)d in p&&n.set(d,Ve(Be));else{if(s&&typeof d=="string"){var m=n.get("length"),f=Number(d);Number.isInteger(f)&&f<m.v&&N(m,f)}N(l,Be),wa(c)}return!0},get(p,d,l){var b;if(d===mt)return e;var m=n.get(d),f=d in p;if(m===void 0&&(!f||(b=Ft(p,d))!=null&&b.writable)&&(m=Ve(Dt(f?p[d]:Be,v)),n.set(d,m)),m!==void 0){var g=a(m);return g===Be?void 0:g}return Reflect.get(p,d,l)},getOwnPropertyDescriptor(p,d){var l=Reflect.getOwnPropertyDescriptor(p,d);if(l&&"value"in l){var m=n.get(d);m&&(l.value=a(m))}else if(l===void 0){var f=n.get(d),g=f==null?void 0:f.v;if(f!==void 0&&g!==Be)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return l},has(p,d){var g;if(d===mt)return!0;var l=n.get(d),m=l!==void 0&&l.v!==Be||Reflect.has(p,d);if(l!==void 0||ze!==null&&(!m||(g=Ft(p,d))!=null&&g.writable)){l===void 0&&(l=Ve(m?Dt(p[d],v):Be),n.set(d,l));var f=a(l);if(f===Be)return!1}return m},set(p,d,l,m){var x;var f=n.get(d),g=d in p;if(s&&d==="length")for(var b=l;b<f.v;b+=1){var $=n.get(b+"");$!==void 0?N($,Be):b in p&&($=Ve(Be),n.set(b+"",$))}f===void 0?(!g||(x=Ft(p,d))!=null&&x.writable)&&(f=Ve(void 0),N(f,Dt(l,v)),n.set(d,f)):(g=f.v!==Be,N(f,Dt(l,v)));var E=Reflect.getOwnPropertyDescriptor(p,d);if(E!=null&&E.set&&E.set.call(m,l),!g){if(s&&typeof d=="string"){var y=n.get("length"),w=Number(d);Number.isInteger(w)&&w>=y.v&&N(y,w+1)}wa(c)}return!0},ownKeys(p){a(c);var d=Reflect.ownKeys(p).filter(f=>{var g=n.get(f);return g===void 0||g.v!==Be});for(var[l,m]of n)m.v!==Be&&!(l in p)&&d.push(l);return d},setPrototypeOf(){Qi()}})}function wa(e,r=1){N(e,e.v+r)}function ka(e){return e!==null&&typeof e=="object"&&mt in e?e[mt]:e}function Xa(e,r){return Object.is(ka(e),ka(r))}var xa,Qa,Za,Ja;function mn(){if(xa===void 0){xa=window,Qa=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype;Za=Ft(r,"firstChild").get,Ja=Ft(r,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function Ar(e=""){return document.createTextNode(e)}function wr(e){return Za.call(e)}function zr(e){return Ja.call(e)}function o(e,r){return wr(e)}function J(e,r){{var t=wr(e);return t instanceof Comment&&t.data===""?zr(t):t}}function u(e,r=1,t=!1){let i=e;for(;r--;)i=zr(i);return i}function gn(e){e.textContent=""}function ar(e){var r=rt|bt,t=Ie!==null&&Ie.f&rt?Ie:null;return ze===null||t!==null&&t.f&tt?r|=tt:ze.f|=Ua,{ctx:je,deps:null,effects:null,equals:Ha,f:r,fn:e,reactions:null,rv:0,v:null,wv:0,parent:t??ze}}function we(e){const r=ar(e);return r.equals=ia,r}function ei(e){var r=e.effects;if(r!==null){e.effects=null;for(var t=0;t<r.length;t+=1)Tt(r[t])}}function hn(e){for(var r=e.parent;r!==null;){if(!(r.f&rt))return r;r=r.parent}return null}function yn(e){var r,t=ze;it(hn(e));try{ei(e),r=_i(e)}finally{it(t)}return r}function ti(e){var r=yn(e),t=(Et||e.f&tt)&&e.deps!==null?Kt:Xe;ct(e,t),e.equals(r)||(e.v=r,e.wv=ui())}function ri(e){ze===null&&Ie===null&&Ki(),Ie!==null&&Ie.f&tt&&ze===null&&Wi(),oa&&Bi()}function bn(e,r){var t=r.last;t===null?r.last=r.first=e:(t.next=e,e.prev=t,r.last=e)}function Gt(e,r,t,i=!0){var n=(e&dr)!==0,s=ze,c={ctx:je,deps:null,nodes_start:null,nodes_end:null,f:e|bt,first:null,fn:r,last:null,next:null,parent:n?null:s,prev:null,teardown:null,transitions:null,wv:0};if(t){var v=Ut;try{Da(!0),va(c),c.f|=Pa}catch(l){throw Tt(c),l}finally{Da(v)}}else r!==null&&Yr(c);var p=t&&c.deps===null&&c.first===null&&c.nodes_start===null&&c.teardown===null&&(c.f&(Ua|hr))===0;if(!p&&!n&&i&&(s!==null&&bn(c,s),Ie!==null&&Ie.f&rt)){var d=Ie;(d.effects??(d.effects=[])).push(c)}return c}function ai(e){const r=Gt(Mr,null,!1);return ct(r,Xe),r.teardown=e,r}function Ca(e){ri();var r=ze!==null&&(ze.f&yt)!==0&&je!==null&&!je.m;if(r){var t=je;(t.e??(t.e=[])).push({fn:e,effect:ze,reaction:Ie})}else{var i=Xt(e);return i}}function wn(e){return ri(),Ir(e)}function kn(e){const r=Gt(dr,e,!0);return(t={})=>new Promise(i=>{t.outro?It(r,()=>{Tt(r),i(void 0)}):(Tt(r),i(void 0))})}function Xt(e){return Gt(La,e,!1)}function Ir(e){return Gt(Mr,e,!0)}function S(e,r=[],t=ar){const i=r.map(t);return Nr(()=>e(...i.map(a)))}function Nr(e,r=0){return Gt(Mr|Tr|r,e,!0)}function Nt(e,r=!0){return Gt(Mr|yt,e,!0,r)}function ii(e){var r=e.teardown;if(r!==null){const t=oa,i=Ie;Sa(!0),at(null);try{r.call(null)}finally{Sa(t),at(i)}}}function ni(e,r=!1){var t=e.first;for(e.first=e.last=null;t!==null;){var i=t.next;Tt(t,r),t=i}}function xn(e){for(var r=e.first;r!==null;){var t=r.next;r.f&yt||Tt(r),r=t}}function Tt(e,r=!0){var t=!1;if((r||e.f&Fi)&&e.nodes_start!==null){for(var i=e.nodes_start,n=e.nodes_end;i!==null;){var s=i===n?null:zr(i);i.remove(),i=s}t=!0}ni(e,r&&!t),Cr(e,0),ct(e,qr);var c=e.transitions;if(c!==null)for(const p of c)p.stop();ii(e);var v=e.parent;v!==null&&v.first!==null&&si(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function si(e){var r=e.parent,t=e.prev,i=e.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),r!==null&&(r.first===e&&(r.first=i),r.last===e&&(r.last=t))}function It(e,r){var t=[];la(e,t,!0),li(t,()=>{Tt(e),r&&r()})}function li(e,r){var t=e.length;if(t>0){var i=()=>--t||r();for(var n of e)n.out(i)}else r()}function la(e,r,t){if(!(e.f&pt)){if(e.f^=pt,e.transitions!==null)for(const c of e.transitions)(c.is_global||t)&&r.push(c);for(var i=e.first;i!==null;){var n=i.next,s=(i.f&$r)!==0||(i.f&yt)!==0;la(i,r,s?t:!1),i=n}}}function Wt(e){oi(e,!0)}function oi(e,r){if(e.f&pt){e.f^=pt,e.f&Xe||(e.f^=Xe),ur(e)&&(ct(e,bt),Yr(e));for(var t=e.first;t!==null;){var i=t.next,n=(t.f&$r)!==0||(t.f&yt)!==0;oi(t,n?r:!1),t=i}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||r)&&s.in()}}let kr=!1,Vr=[];function vi(){kr=!1;const e=Vr.slice();Vr=[],Kr(e)}function Ot(e){kr||(kr=!0,queueMicrotask(vi)),Vr.push(e)}function Cn(){kr&&vi()}const di=0,Dn=1;let mr=!1,gr=di,ir=!1,nr=null,Ut=!1,oa=!1;function Da(e){Ut=e}function Sa(e){oa=e}let At=[],Ht=0;let Ie=null,vt=!1;function at(e){Ie=e}let ze=null;function it(e){ze=e}let dt=null;function Sn(e){dt=e}let Ge=null,Je=0,ut=null;function En(e){ut=e}let ci=1,xr=0,Et=!1,St=null;function ui(){return++ci}function ur(e){var m;var r=e.f;if(r&bt)return!0;if(r&Kt){var t=e.deps,i=(r&tt)!==0;if(t!==null){var n,s,c=(r&yr)!==0,v=i&&ze!==null&&!Et,p=t.length;if(c||v){var d=e,l=d.parent;for(n=0;n<p;n++)s=t[n],(c||!((m=s==null?void 0:s.reactions)!=null&&m.includes(d)))&&(s.reactions??(s.reactions=[])).push(d);c&&(d.f^=yr),v&&l!==null&&!(l.f&tt)&&(d.f^=tt)}for(n=0;n<p;n++)if(s=t[n],ur(s)&&ti(s),s.wv>e.wv)return!0}(!i||ze!==null&&!Et)&&ct(e,Xe)}return!1}function Mn(e,r){for(var t=r;t!==null;){if(t.f&hr)try{t.fn(e);return}catch{t.f^=hr}t=t.parent}throw mr=!1,e}function Tn(e){return(e.f&qr)===0&&(e.parent===null||(e.parent.f&hr)===0)}function Or(e,r,t,i){if(mr){if(t===null&&(mr=!1),Tn(r))throw e;return}t!==null&&(mr=!0);{Mn(e,r);return}}function fi(e,r,t=!0){var i=e.reactions;if(i!==null)for(var n=0;n<i.length;n++){var s=i[n];s.f&rt?fi(s,r,!1):r===s&&(t?ct(s,bt):s.f&Xe&&ct(s,Kt),Yr(s))}}function _i(e){var g;var r=Ge,t=Je,i=ut,n=Ie,s=Et,c=dt,v=je,p=vt,d=e.f;Ge=null,Je=0,ut=null,Ie=d&(yt|dr)?null:e,Et=(d&tt)!==0&&(!Ut||n===null||p),dt=null,br(e.ctx),vt=!1,xr++;try{var l=(0,e.fn)(),m=e.deps;if(Ge!==null){var f;if(Cr(e,Je),m!==null&&Je>0)for(m.length=Je+Ge.length,f=0;f<Ge.length;f++)m[Je+f]=Ge[f];else e.deps=m=Ge;if(!Et)for(f=Je;f<m.length;f++)((g=m[f]).reactions??(g.reactions=[])).push(e)}else m!==null&&Je<m.length&&(Cr(e,Je),m.length=Je);if(Vt()&&ut!==null&&!vt&&m!==null&&!(e.f&(rt|Kt|bt)))for(f=0;f<ut.length;f++)fi(ut[f],e);return n!==null&&xr++,l}finally{Ge=r,Je=t,ut=i,Ie=n,Et=s,dt=c,br(v),vt=p}}function qn(e,r){let t=r.reactions;if(t!==null){var i=Ni.call(t,e);if(i!==-1){var n=t.length-1;n===0?t=r.reactions=null:(t[i]=t[n],t.pop())}}t===null&&r.f&rt&&(Ge===null||!Ge.includes(r))&&(ct(r,Kt),r.f&(tt|yr)||(r.f^=yr),ei(r),Cr(r,0))}function Cr(e,r){var t=e.deps;if(t!==null)for(var i=r;i<t.length;i++)qn(e,t[i])}function va(e){var r=e.f;if(!(r&qr)){ct(e,Xe);var t=ze,i=je;ze=e;try{r&Tr?xn(e):ni(e),ii(e);var n=_i(e);e.teardown=typeof n=="function"?n:null,e.wv=ci;var s=e.deps,c;Wr&&en&&e.f&bt}catch(v){Or(v,e,t,i||e.ctx)}finally{ze=t}}}function pi(){if(Ht>1e3){Ht=0;try{Vi()}catch(e){if(nr!==null)Or(e,nr,null);else throw e}}Ht++}function mi(e){var r=e.length;if(r!==0){pi();var t=Ut;Ut=!0;try{for(var i=0;i<r;i++){var n=e[i];n.f&Xe||(n.f^=Xe);var s=zn(n);$n(s)}}finally{Ut=t}}}function $n(e){var r=e.length;if(r!==0)for(var t=0;t<r;t++){var i=e[t];if(!(i.f&(qr|pt)))try{ur(i)&&(va(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?si(i):i.fn=null))}catch(n){Or(n,i,null,i.ctx)}}}function An(){if(ir=!1,Ht>1001)return;const e=At;At=[],mi(e),ir||(Ht=0,nr=null)}function Yr(e){gr===di&&(ir||(ir=!0,queueMicrotask(An))),nr=e;for(var r=e;r.parent!==null;){r=r.parent;var t=r.f;if(t&(dr|yt)){if(!(t&Xe))return;r.f^=Xe}}At.push(r)}function zn(e){var r=[],t=e.first;e:for(;t!==null;){var i=t.f,n=(i&yt)!==0,s=n&&(i&Xe)!==0,c=t.next;if(!s&&!(i&pt)){if(i&La)r.push(t);else if(n)t.f^=Xe;else{var v=Ie;try{Ie=t,ur(t)&&va(t)}catch(l){Or(l,t,null,t.ctx)}finally{Ie=v}}var p=t.first;if(p!==null){t=p;continue}}if(c===null){let l=t.parent;for(;l!==null;){if(e===l)break e;var d=l.next;if(d!==null){t=d;continue e}l=l.parent}}t=c}return r}function da(e){var r=gr,t=At;try{pi();const n=[];gr=Dn,At=n,ir=!1,mi(t);var i=e==null?void 0:e();return Cn(),(At.length>0||n.length>0)&&da(),Ht=0,nr=null,i}finally{gr=r,At=t}}async function In(){await Promise.resolve(),da()}function a(e){var r=e.f,t=(r&rt)!==0;if(St!==null&&St.add(e),Ie!==null&&!vt){dt!==null&&dt.includes(e)&&Zi();var i=Ie.deps;e.rv<xr&&(e.rv=xr,Ge===null&&i!==null&&i[Je]===e?Je++:Ge===null?Ge=[e]:(!Et||!Ge.includes(e))&&Ge.push(e))}else if(t&&e.deps===null&&e.effects===null){var n=e,s=n.parent;s!==null&&!(s.f&tt)&&(n.f^=tt)}return t&&(n=e,ur(n)&&ti(n)),e.v}function Nn(e){var r=St;St=new Set;var t=St,i;try{if(gt(e),r!==null)for(i of St)r.add(i)}finally{St=r}return t}function Zt(e){var r=Nn(()=>gt(e));for(var t of r)if(t.f&Fa)for(const i of t.deps||[])i.f&rt||Mt(i,i.v);else Mt(t,t.v)}function gt(e){var r=vt;try{return vt=!0,e()}finally{vt=r}}const On=-7169;function ct(e,r){e.f=e.f&On|r}function Yn(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(mt in e)Gr(e);else if(!Array.isArray(e))for(let r in e){const t=e[r];typeof t=="object"&&t&&mt in t&&Gr(t)}}}function Gr(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let i in e)try{Gr(e[i],r)}catch{}const t=aa(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const i=ja(t);for(let n in i){const s=i[n].get;if(s)try{s.call(e)}catch{}}}}}const Rn=["touchstart","touchmove"];function jn(e){return Rn.includes(e)}let Ea=!1;function Ln(){Ea||(Ea=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const t of e.target.elements)(r=t.__on_r)==null||r.call(t)})},{capture:!0}))}function ca(e){var r=Ie,t=ze;at(null),it(null);try{return e()}finally{at(r),it(t)}}function ua(e,r,t,i=t){e.addEventListener(r,()=>ca(t));const n=e.__on_r;n?e.__on_r=()=>{n(),i(!0)}:e.__on_r=()=>i(!0),Ln()}const gi=new Set,Xr=new Set;function Pn(e,r,t,i={}){function n(s){if(i.capture||Jt.call(r,s),!s.cancelBubble)return ca(()=>t==null?void 0:t.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Ot(()=>{r.addEventListener(e,n,i)}):r.addEventListener(e,n,i),n}function ke(e,r,t,i,n){var s={capture:i,passive:n},c=Pn(e,r,t,s);(r===document.body||r===window||r===document)&&ai(()=>{r.removeEventListener(e,c,s)})}function Qt(e){for(var r=0;r<e.length;r++)gi.add(e[r]);for(var t of Xr)t(e)}function Jt(e){var w;var r=this,t=r.ownerDocument,i=e.type,n=((w=e.composedPath)==null?void 0:w.call(e))||[],s=n[0]||e.target,c=0,v=e.__root;if(v){var p=n.indexOf(v);if(p!==-1&&(r===document||r===window)){e.__root=r;return}var d=n.indexOf(r);if(d===-1)return;p<=d&&(c=p)}if(s=n[c]||e.target,s!==r){Oi(e,"currentTarget",{configurable:!0,get(){return s||t}});var l=Ie,m=ze;at(null),it(null);try{for(var f,g=[];s!==null;){var b=s.assignedSlot||s.parentNode||s.host||null;try{var $=s["__"+i];if($!==void 0&&!s.disabled)if(ta($)){var[E,...y]=$;E.apply(s,[e,...y])}else $.call(s,e)}catch(x){f?g.push(x):f=x}if(e.cancelBubble||b===r||b===null)break;s=b}if(f){for(let x of g)queueMicrotask(()=>{throw x});throw f}}finally{e.__root=r,delete e.currentTarget,at(l),it(m)}}}function Fn(e){var r=document.createElement("template");return r.innerHTML=e,r.content}function Dr(e,r){var t=ze;t.nodes_start===null&&(t.nodes_start=e,t.nodes_end=r)}function h(e,r){var t=(r&fn)!==0,i=(r&_n)!==0,n,s=!e.startsWith("<!>");return()=>{n===void 0&&(n=Fn(s?e:"<!>"+e),t||(n=wr(n)));var c=i||Qa?document.importNode(n,!0):n.cloneNode(!0);if(t){var v=wr(c),p=c.lastChild;Dr(v,p)}else Dr(c,c);return c}}function $t(e=""){{var r=Ar(e+"");return Dr(r,r),r}}function Me(){var e=document.createDocumentFragment(),r=document.createComment(""),t=Ar();return e.append(r,t),Dr(r,t),e}function _(e,r){e!==null&&e.before(r)}let Qr=!0;function D(e,r){var t=r==null?"":typeof r=="object"?r+"":r;t!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=t,e.nodeValue=t+"")}function Un(e,r){return Hn(e,r)}const Rt=new Map;function Hn(e,{target:r,anchor:t,props:i={},events:n,context:s,intro:c=!0}){mn();var v=new Set,p=m=>{for(var f=0;f<m.length;f++){var g=m[f];if(!v.has(g)){v.add(g);var b=jn(g);r.addEventListener(g,Jt,{passive:b});var $=Rt.get(g);$===void 0?(document.addEventListener(g,Jt,{passive:b}),Rt.set(g,1)):Rt.set(g,$+1)}}};p(ra(gi)),Xr.add(p);var d=void 0,l=kn(()=>{var m=t??r.appendChild(Ar());return Nt(()=>{if(s){We({});var f=je;f.c=s}n&&(i.$$events=n),Qr=c,d=e(m,i)||{},Qr=!0,s&&Ke()}),()=>{var b;for(var f of v){r.removeEventListener(f,Jt);var g=Rt.get(f);--g===0?(document.removeEventListener(f,Jt),Rt.delete(f)):Rt.set(f,g)}Xr.delete(p),m!==t&&((b=m.parentNode)==null||b.removeChild(m))}});return Bn.set(d,l),d}let Bn=new WeakMap;const Pr=0,fr=1,Fr=2;function Bt(e,r,t,i,n){var s=e,c=Vt(),v=je,p=Be,d,l,m,f=(c?Ve:rr)(void 0),g=(c?Ve:rr)(void 0),b=!1;function $(y,w){b=!0,w&&(it(E),at(E),br(v));try{y===Pr&&t&&(d?Wt(d):d=Nt(()=>t(s))),y===fr&&i&&(l?Wt(l):l=Nt(()=>i(s,f))),y!==Pr&&d&&It(d,()=>d=null),y!==fr&&l&&It(l,()=>l=null),y!==Fr&&m&&It(m,()=>m=null)}finally{w&&(br(null),at(null),it(null),da())}}var E=Nr(()=>{if(p!==(p=r())){if(Li(p)){var y=p;b=!1,y.then(w=>{y===p&&(Mt(f,w),$(fr,!0))},w=>{if(y===p)throw Mt(g,w),$(Fr,!0),g.v}),Ot(()=>{b||$(Pr,!0)})}else Mt(f,p),$(fr,!1);return()=>p=Be}})}function O(e,r,t=!1){var i=e,n=null,s=null,c=Be,v=t?$r:0,p=!1;const d=(m,f=!0)=>{p=!0,l(f,m)},l=(m,f)=>{c!==(c=m)&&(c?(n?Wt(n):f&&(n=Nt(()=>f(i))),s&&It(s,()=>{s=null})):(s?Wt(s):f&&(s=Nt(()=>f(i))),n&&It(n,()=>{n=null})))};Nr(()=>{p=!1,r(d),p||l(null,null)},v)}function ne(e,r){return r}function Wn(e,r,t,i){for(var n=[],s=r.length,c=0;c<s;c++)la(r[c].e,n,!0);var v=s>0&&n.length===0&&t!==null;if(v){var p=t.parentNode;gn(p),p.append(t),i.clear(),kt(e,r[0].prev,r[s-1].next)}li(n,()=>{for(var d=0;d<s;d++){var l=r[d];v||(i.delete(l.k),kt(e,l.prev,l.next)),Tt(l.e,!v)}})}function se(e,r,t,i,n,s=null){var c=e,v={flags:r,items:new Map,first:null},p=(r&Wa)!==0;if(p){var d=e;c=d.appendChild(Ar())}var l=null,m=!1,f=we(()=>{var g=t();return ta(g)?g:g==null?[]:ra(g)});Nr(()=>{var g=a(f),b=g.length;m&&b===0||(m=b===0,Kn(g,v,c,n,r,i,t),s!==null&&(b===0?l?Wt(l):l=Nt(()=>s(c)):l!==null&&It(l,()=>{l=null})),a(f))})}function Kn(e,r,t,i,n,s,c){var Y,z,P,Q;var v=(n&rn)!==0,p=(n&(na|sa))!==0,d=e.length,l=r.items,m=r.first,f=m,g,b=null,$,E=[],y=[],w,x,M,I;if(v)for(I=0;I<d;I+=1)w=e[I],x=s(w,I),M=l.get(x),M!==void 0&&((Y=M.a)==null||Y.measure(),($??($=new Set)).add(M));for(I=0;I<d;I+=1){if(w=e[I],x=s(w,I),M=l.get(x),M===void 0){var X=f?f.e.nodes_start:t;b=Gn(X,r,b,b===null?r.first:b.next,w,x,I,i,n,c),l.set(x,b),E=[],y=[],f=b.next;continue}if(p&&Vn(M,w,I,n),M.e.f&pt&&(Wt(M.e),v&&((z=M.a)==null||z.unfix(),($??($=new Set)).delete(M))),M!==f){if(g!==void 0&&g.has(M)){if(E.length<y.length){var le=y[0],B;b=le.prev;var ae=E[0],te=E[E.length-1];for(B=0;B<E.length;B+=1)Ma(E[B],le,t);for(B=0;B<y.length;B+=1)g.delete(y[B]);kt(r,ae.prev,te.next),kt(r,b,ae),kt(r,te,le),f=le,b=te,I-=1,E=[],y=[]}else g.delete(M),Ma(M,f,t),kt(r,M.prev,M.next),kt(r,M,b===null?r.first:b.next),kt(r,b,M),b=M;continue}for(E=[],y=[];f!==null&&f.k!==x;)f.e.f&pt||(g??(g=new Set)).add(f),y.push(f),f=f.next;if(f===null)continue;M=f}E.push(M),b=M,f=M.next}if(f!==null||g!==void 0){for(var U=g===void 0?[]:ra(g);f!==null;)f.e.f&pt||U.push(f),f=f.next;var Ee=U.length;if(Ee>0){var K=n&Wa&&d===0?t:null;if(v){for(I=0;I<Ee;I+=1)(P=U[I].a)==null||P.measure();for(I=0;I<Ee;I+=1)(Q=U[I].a)==null||Q.fix()}Wn(r,U,K,l)}}v&&Ot(()=>{var j;if($!==void 0)for(M of $)(j=M.a)==null||j.apply()}),ze.first=r.first&&r.first.e,ze.last=b&&b.e}function Vn(e,r,t,i){i&na&&Mt(e.v,r),i&sa?Mt(e.i,t):e.i=t}function Gn(e,r,t,i,n,s,c,v,p,d){var l=(p&na)!==0,m=(p&an)===0,f=l?m?rr(n):Ve(n):n,g=p&sa?Ve(c):c,b={i:g,v:f,k:s,a:null,e:null,prev:t,next:i};try{return b.e=Nt(()=>v(e,f,g,d),Ga),b.e.prev=t&&t.e,b.e.next=i&&i.e,t===null?r.first=b:(t.next=b,t.e.next=b.e),i!==null&&(i.prev=b,i.e.prev=b.e),b}finally{}}function Ma(e,r,t){for(var i=e.next?e.next.e.nodes_start:t,n=r?r.e.nodes_start:t,s=e.e.nodes_start;s!==i;){var c=zr(s);n.before(s),s=c}}function kt(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function hi(e){var r,t,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(r=0;r<n;r++)e[r]&&(t=hi(e[r]))&&(i&&(i+=" "),i+=t)}else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function Xn(){for(var e,r,t=0,i="",n=arguments.length;t<n;t++)(e=arguments[t])&&(r=hi(e))&&(i&&(i+=" "),i+=r);return i}function jt(e){return typeof e=="object"?Xn(e):e??""}function ht(e,r,t,i){var n=e.__attributes??(e.__attributes={});n[r]!==(n[r]=t)&&(r==="style"&&"__styles"in e&&(e.__styles={}),r==="loading"&&(e[Hi]=t),t==null?e.removeAttribute(r):typeof t!="string"&&Qn(e).includes(r)?e[r]=t:e.setAttribute(r,t))}var Ta=new Map;function Qn(e){var r=Ta.get(e.nodeName);if(r)return r;Ta.set(e.nodeName,r=[]);for(var t,i=e,n=Element.prototype;n!==i;){t=ja(i);for(var s in t)t[s].set&&r.push(s);i=aa(i)}return r}function xe(e,r,t){var i=e.__className,n=Zn(r,t);(i!==n||Ga)&&(r==null&&!t?e.removeAttribute("class"):e.className=n,e.__className=n)}function Zn(e,r){return(e??"")+(r?" "+r:"")}const Jn=()=>performance.now(),_t={tick:e=>requestAnimationFrame(e),now:()=>Jn(),tasks:new Set};function yi(){const e=_t.now();_t.tasks.forEach(r=>{r.c(e)||(_t.tasks.delete(r),r.f())}),_t.tasks.size!==0&&_t.tick(yi)}function es(e){let r;return _t.tasks.size===0&&_t.tick(yi),{promise:new Promise(t=>{_t.tasks.add(r={c:e,f:t})}),abort(){_t.tasks.delete(r)}}}function _r(e,r){ca(()=>{e.dispatchEvent(new CustomEvent(r))})}function ts(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const r=e.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function qa(e){const r={},t=e.split(";");for(const i of t){const[n,s]=i.split(":");if(!n||s===void 0)break;const c=ts(n.trim());r[c]=s.trim()}return r}const rs=e=>e;function et(e,r,t,i){var n=(e&dn)!==0,s=(e&cn)!==0,c=n&&s,v=(e&un)!==0,p=c?"both":n?"in":"out",d,l=r.inert,m=r.style.overflow,f,g;function b(){var x=Ie,M=ze;at(null),it(null);try{return d??(d=t()(r,(i==null?void 0:i())??{},{direction:p}))}finally{at(x),it(M)}}var $={is_global:v,in(){var x;if(r.inert=l,!n){g==null||g.abort(),(x=g==null?void 0:g.reset)==null||x.call(g);return}s||f==null||f.abort(),_r(r,"introstart"),f=Zr(r,b(),g,1,()=>{_r(r,"introend"),f==null||f.abort(),f=d=void 0,r.style.overflow=m})},out(x){if(!s){x==null||x(),d=void 0;return}r.inert=!0,_r(r,"outrostart"),g=Zr(r,b(),f,0,()=>{_r(r,"outroend"),x==null||x()})},stop:()=>{f==null||f.abort(),g==null||g.abort()}},E=ze;if((E.transitions??(E.transitions=[])).push($),n&&Qr){var y=v;if(!y){for(var w=E.parent;w&&w.f&$r;)for(;(w=w.parent)&&!(w.f&Tr););y=!w||(w.f&Pa)!==0}y&&Xt(()=>{gt(()=>$.in())})}}function Zr(e,r,t,i,n){var s=i===1;if(ji(r)){var c,v=!1;return Ot(()=>{if(!v){var E=r({direction:s?"in":"out"});c=Zr(e,E,t,i,n)}}),{abort:()=>{v=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(t==null||t.deactivate(),!(r!=null&&r.duration))return n(),{abort:Ct,deactivate:Ct,reset:Ct,t:()=>i};const{delay:p=0,css:d,tick:l,easing:m=rs}=r;var f=[];if(s&&t===void 0&&(l&&l(0,1),d)){var g=qa(d(0,1));f.push(g,g)}var b=()=>1-i,$=e.animate(f,{duration:p});return $.onfinish=()=>{var E=(t==null?void 0:t.t())??1-i;t==null||t.abort();var y=i-E,w=r.duration*Math.abs(y),x=[];if(w>0){var M=!1;if(d)for(var I=Math.ceil(w/16.666666666666668),X=0;X<=I;X+=1){var le=E+y*m(X/I),B=qa(d(le,1-le));x.push(B),M||(M=B.overflow==="hidden")}M&&(e.style.overflow="hidden"),b=()=>{var ae=$.currentTime;return E+y*m(ae/w)},l&&es(()=>{if($.playState!=="running")return!1;var ae=b();return l(ae,1-ae),!0})}$=e.animate(x,{duration:w,fill:"forwards"}),$.onfinish=()=>{b=()=>i,l==null||l(i,1-i),n()}},{abort:()=>{$&&($.cancel(),$.effect=null,$.onfinish=Ct)},deactivate:()=>{n=Ct},reset:()=>{i===0&&(l==null||l(1,0))},t:()=>b()}}function Jr(e,r,t=r){var i=Vt();ua(e,"input",n=>{var s=n?e.defaultValue:e.value;if(s=Hr(e)?Br(s):s,t(s),i&&s!==(s=r())){var c=e.selectionStart,v=e.selectionEnd;e.value=s??"",v!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(v,e.value.length))}}),gt(r)==null&&e.value&&t(Hr(e)?Br(e.value):e.value),Ir(()=>{var n=r();Hr(e)&&n===Br(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}const Ur=new Set;function qt(e,r,t,i,n=i){var s=t.getAttribute("type")==="checkbox",c=e;if(r!==null)for(var v of r)c=c[v]??(c[v]=[]);c.push(t),ua(t,"change",()=>{var p=t.__value;s&&(p=as(c,p,t.checked)),n(p)},()=>n(s?[]:null)),Ir(()=>{var p=i();s?(p=p||[],t.checked=p.includes(t.__value)):t.checked=Xa(t.__value,p)}),ai(()=>{var p=c.indexOf(t);p!==-1&&c.splice(p,1)}),Ur.has(c)||(Ur.add(c),Ot(()=>{c.sort((p,d)=>p.compareDocumentPosition(d)===4?-1:1),Ur.delete(c)})),Ot(()=>{})}function as(e,r,t){for(var i=new Set,n=0;n<e.length;n+=1)e[n].checked&&i.add(e[n].__value);return t||i.delete(r),Array.from(i)}function Hr(e){var r=e.type;return r==="number"||r==="range"}function Br(e){return e===""?null:+e}function bi(e,r,t){if(e.multiple)return ns(e,r);for(var i of e.options){var n=tr(i);if(Xa(n,r)){i.selected=!0;return}}(!t||r!==void 0)&&(e.selectedIndex=-1)}function is(e,r){Xt(()=>{var t=new MutationObserver(()=>{var i=e.__value;bi(e,i)});return t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function er(e,r,t=r){var i=!0;ua(e,"change",n=>{var s=n?"[selected]":":checked",c;if(e.multiple)c=[].map.call(e.querySelectorAll(s),tr);else{var v=e.querySelector(s)??e.querySelector("option:not([disabled])");c=v&&tr(v)}t(c)}),Xt(()=>{var n=r();if(bi(e,n,i),i&&n===void 0){var s=e.querySelector(":checked");s!==null&&(n=tr(s),t(n))}e.__value=n,i=!1}),is(e)}function ns(e,r){for(var t of e.options)t.selected=~r.indexOf(tr(t))}function tr(e){return"__value"in e?e.__value:e.value}function $a(e,r){return e===r||(e==null?void 0:e[mt])===r}function ss(e={},r,t,i){return Xt(()=>{var n,s;return Ir(()=>{n=s,s=[],gt(()=>{e!==t(...s)&&(r(e,...s),n&&$a(t(...n),e)&&r(null,...n))})}),()=>{Ot(()=>{s&&$a(t(...s),e)&&r(null,...s)})}}),e}function Ze(e=!1){const r=je,t=r.l.u;if(!t)return;let i=()=>Yn(r.s);if(e){let n=0,s={};const c=ar(()=>{let v=!1;const p=r.s;for(const d in p)p[d]!==s[d]&&(s[d]=p[d],v=!0);return v&&n++,n});i=()=>a(c)}t.b.length&&wn(()=>{Aa(r,i),Kr(t.b)}),Ca(()=>{const n=gt(()=>t.m.map(Pi));return()=>{for(const s of n)typeof s=="function"&&s()}}),t.a.length&&Ca(()=>{Aa(r,i),Kr(t.a)})}function Aa(e,r){if(e.l.s)for(const t of e.l.s)a(t);r()}const Lt=[];function ls(e,r=Ct){let t=null;const i=new Set;function n(v){if(Ba(e,v)&&(e=v,t)){const p=!Lt.length;for(const d of i)d[1](),Lt.push(d,e);if(p){for(let d=0;d<Lt.length;d+=2)Lt[d][0](Lt[d+1]);Lt.length=0}}}function s(v){n(v(e))}function c(v,p=Ct){const d=[v,p];return i.add(d),i.size===1&&(t=r(n,s)||Ct),v(e),()=>{i.delete(d),i.size===0&&t&&(t(),t=null)}}return{set:n,update:s,subscribe:c}}let pr=!1;function os(e){var r=pr;try{return pr=!1,[e(),pr]}finally{pr=r}}function Te(e,r,t,i){var le;var n=(t&nn)!==0,s=!cr||(t&sn)!==0,c=(t&on)!==0,v=(t&vn)!==0,p=!1,d;c?[d,p]=os(()=>e[r]):d=e[r];var l=mt in e||Ui in e,m=c&&(((le=Ft(e,r))==null?void 0:le.set)??(l&&r in e&&(B=>e[r]=B)))||void 0,f=i,g=!0,b=!1,$=()=>(b=!0,g&&(g=!1,v?f=gt(i):f=i),f);d===void 0&&i!==void 0&&(m&&s&&Gi(),d=$(),m&&m(d));var E;if(s)E=()=>{var B=e[r];return B===void 0?$():(g=!0,b=!1,B)};else{var y=(n?ar:we)(()=>e[r]);y.f|=Fa,E=()=>{var B=a(y);return B!==void 0&&(f=void 0),B===void 0?f:B}}if(!(t&ln))return E;if(m){var w=e.$$legacy;return function(B,ae){return arguments.length>0?((!s||!ae||w||p)&&m(ae?E():B),B):E()}}var x=!1,M=!1,I=rr(d),X=ar(()=>{var B=E(),ae=a(I);return x?(x=!1,M=!0,ae):(M=!1,I.v=B)});return n||(X.equals=ia),function(B,ae){if(St!==null&&(x=M,E(),a(I)),arguments.length>0){const te=ae?a(X):s&&c?Dt(B):B;return X.equals(te)||(x=!0,N(I,te),b&&f!==void 0&&(f=te),gt(()=>a(X))),B}return a(X)}}const vs="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(vs);tn();const ds=e=>e;function wi(e){const r=e-1;return r*r*r+1}function cs(e,{delay:r=0,duration:t=400,easing:i=ds}={}){const n=+getComputedStyle(e).opacity;return{delay:r,duration:t,easing:i,css:s=>`opacity: ${s*n}`}}function Pt(e,{delay:r=0,duration:t=400,easing:i=wi,axis:n="y"}={}){const s=getComputedStyle(e),c=+s.opacity,v=n==="y"?"height":"width",p=parseFloat(s[v]),d=n==="y"?["top","bottom"]:["left","right"],l=d.map(y=>`${y[0].toUpperCase()}${y.slice(1)}`),m=parseFloat(s[`padding${l[0]}`]),f=parseFloat(s[`padding${l[1]}`]),g=parseFloat(s[`margin${l[0]}`]),b=parseFloat(s[`margin${l[1]}`]),$=parseFloat(s[`border${l[0]}Width`]),E=parseFloat(s[`border${l[1]}Width`]);return{delay:r,duration:t,easing:i,css:y=>`overflow: hidden;opacity: ${Math.min(y*20,1)*c};${v}: ${y*p}px;padding-${d[0]}: ${y*m}px;padding-${d[1]}: ${y*f}px;margin-${d[0]}: ${y*g}px;margin-${d[1]}: ${y*b}px;border-${d[0]}-width: ${y*$}px;border-${d[1]}-width: ${y*E}px;min-${v}: 0`}}function za(e,r){for(const t in r)e[t]=r[t];return e}function us({fallback:e,...r}){const t=new Map,i=new Map;function n(c,v,p){const{delay:d=0,duration:l=X=>Math.sqrt(X)*30,easing:m=wi}=za(za({},r),p),f=c.getBoundingClientRect(),g=v.getBoundingClientRect(),b=f.left-g.left,$=f.top-g.top,E=f.width/g.width,y=f.height/g.height,w=Math.sqrt(b*b+$*$),x=getComputedStyle(v),M=x.transform==="none"?"":x.transform,I=+x.opacity;return{delay:d,duration:typeof l=="function"?l(w):l,easing:m,css:(X,le)=>`
			   opacity: ${X*I};
			   transform-origin: top left;
			   transform: ${M} translate(${le*b}px,${le*$}px) scale(${X+(1-X)*E}, ${X+(1-X)*y});
		   `}}function s(c,v,p){return(d,l)=>(c.set(l.key,d),()=>{if(v.has(l.key)){const m=v.get(l.key);return v.delete(l.key),n(m,d,l)}return c.delete(l.key),e&&e(d,l,p)})}return[s(i,t,!1),s(t,i,!0)]}var fs=h("<div></div>"),_s=h('<div class="duel_card_row svelte-14cfp8z"><div> </div> <div> </div></div>'),ps=h('<div class="duel_card_row svelte-14cfp8z"><div class="svelte-14cfp8z"></div> <div class="svelte-14cfp8z"> </div></div>'),ms=h('<div class="duel_card_row svelte-14cfp8z"><div class="svelte-14cfp8z"></div> <div class="svelte-14cfp8z"> </div></div>'),gs=h('<div class="duel_card_row svelte-14cfp8z"><div> </div> <div> </div></div>'),hs=h('<div class="duel_card_row svelte-14cfp8z"><div class="svelte-14cfp8z"></div> <div class="svelte-14cfp8z">ペンデュラム</div></div>'),ys=h('<div class="duel_card_row duel_card_detail svelte-14cfp8z"><div class="svelte-14cfp8z"> </div></div> <div class="duel_card_row duel_card_detail svelte-14cfp8z"><div class="svelte-14cfp8z"></div> <div class="svelte-14cfp8z"><span> </span> / <span> </span></div></div>',1),bs=h('<button><div class="duel_card_body svelte-14cfp8z"><div class="duel_card_row svelte-14cfp8z" style="position:relative"><div class="svelte-14cfp8z"> </div> <div class="svelte-14cfp8z"></div> <!></div> <!> <!> <!> <!></div></button>'),ws=h('<button><div class="svelte-14cfp8z">裏守備</div></button>'),ks=h('<div class="duel_card duel_card_face_down svelte-14cfp8z"><div class="svelte-14cfp8z">セット</div></div>');function ft(e,r){We(r,!1);let t=Te(r,"entity",8),i=Te(r,"state",8,"Disabled"),n=Te(r,"selectedList",28,()=>[]),s=Te(r,"isVisibleForcibly",8,!1),c=Te(r,"isWideMode",8,!1),v=Te(r,"dummyActionInfos",24,()=>[]),p=Te(r,"cardActionResolve",8),d=Te(r,"entitySelectResolve",8,()=>{}),l,m=Se(!1),f=()=>{},g=Te(r,"qty",12,void 0);const b=te=>{var U;l=te.activator,N(m,!1),g((U=te.entitiesChoices)==null?void 0:U.qty),f=te.resolve};t().field.duel.view.onWaitStart.append(b);let $=Se(!1);const E=()=>{if(i()!=="Disabled"&&i()==="Selectable"&&g()===1){if(n().some(te=>te.seq!==t().seq)){n([t()]);return}g()===1&&d()&&d()([t()])}},y=te=>{(t().face==="FaceUp"||t().owner===t().field.duel.duelists.Below&&(t().isUnderControl||s()))&&t().field.duel.view.showCardInfo(t(),te??"Normal")},w=()=>{if(y(),console.log(t().toString(),i(),v().length,p()),i()==="Disabled")return;if(i()==="Selectable"){N(m,!a(m)),g()===1&&(n().splice(0),t().duel.view.requireUpdate()),n(a(m)?[...n(),t()]:n().filter(U=>U!==t()));return}if(v().length===0)return;if(v().length===1){const U=v()[0];if(p()){p()(U);return}console.log(t().toString(),i(),v().length,f),f({actionInfo:U});return}if(!l)return;t().field.duel.view.modalController.actionSelector.show({title:"行動を選択。",activator:l,dummyActionInfos:v(),cancelable:!0}).then(U=>{U&&f({actionInfo:U})})},x=te=>{var U;window.getSelection&&((U=window.getSelection())==null||U.removeAllRanges()),console.info("drag start",te,v()),t().field.duel.view.setDraggingActions(v()),N($,!0)},M=te=>{console.info("drag end",te,v()),t().field.duel.view.removeDraggingActions(),te.dataTransfer&&N($,!1)},I=()=>(y("Debug"),!1);Ze();var X=Me(),le=J(X);{var B=te=>{var U=bs(),Ee=o(U),K=o(Ee),Y=o(K),z=o(Y),P=u(Y,4);se(P,1,()=>t().attr,ne,(F,W)=>{var T=fs();S(()=>xe(T,`monster_attr ${a(W)??""} svelte-14cfp8z`)),_(F,T)});var Q=u(K,2);{var j=F=>{var W=_s(),T=o(W),q=o(T),G=u(T,2),ie=o(G);S((oe,de)=>{xe(T,jt(t().lvl!==t().origin.level?"different_from_its_origin":""),"svelte-14cfp8z"),D(q,oe),xe(G,jt(t().rank!==t().origin.rank?"different_from_its_origin":""),"svelte-14cfp8z"),D(ie,de)},[()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],we),_(F,W)},pe=F=>{var W=Me(),T=J(W);{var q=ie=>{var oe=ps(),de=u(o(oe),2),Ce=o(de);S(()=>D(Ce,`${or[t().status.spellCategory]??""}魔法`)),_(ie,oe)},G=ie=>{var oe=Me(),de=J(oe);{var Ce=he=>{var ue=ms(),_e=u(o(ue),2),ve=o(_e);S(()=>D(ve,`${vr[t().status.trapCategory]??""}罠`)),_(he,ue)};O(de,he=>{t().kind==="Trap"&&t().status.trapCategory&&he(Ce)},!0)}_(ie,oe)};O(T,ie=>{t().kind==="Spell"&&t().status.spellCategory?ie(q):ie(G,!1)},!0)}_(F,W)};O(Q,F=>{t().kind==="Monster"?F(j):F(pe,!1)})}var me=u(Q,2);{var ge=F=>{var W=gs(),T=o(W),q=o(T),G=u(T,2),ie=o(G);S(()=>{xe(T,jt(t().psL!==t().origin.pendulumScaleL?"different_from_its_origin":""),"svelte-14cfp8z"),D(q,`◀ ${t().psL??""}`),xe(G,jt(t().psR!==t().origin.pendulumScaleR?"different_from_its_origin":""),"svelte-14cfp8z"),D(ie,`${t().psR??""} ▶`)}),_(F,W)};O(me,F=>{var W;(W=t().status.monsterCategories)!=null&&W.includes("Pendulum")&&F(ge)})}var k=u(me,2);{var R=F=>{var W=hs();_(F,W)};O(k,F=>{t().kind==="Spell"&&t().isPendulumScale&&F(R)})}var L=u(k,2);{var re=F=>{var W=ys(),T=J(W),q=o(T),G=o(q),ie=u(T,2),oe=u(o(ie),2),de=o(oe),Ce=o(de),he=u(de,2),ue=o(he);S((_e,ve)=>{D(G,`${_e??""}
            ${ve??""}`),xe(de,jt(t().atk!==t().origin.attack?"different_from_its_origin":""),"svelte-14cfp8z"),D(Ce,t().atk??"?"),xe(he,jt(t().def!==t().origin.defense?"different_from_its_origin":""),"svelte-14cfp8z"),D(ue,t().def??"?")},[()=>t().types.map(_e=>sr[_e]+(c()?Sr[_e]:"")).join(),()=>{var _e;return(_e=t().status.monsterCategories)==null?void 0:_e.map(ve=>lr[ve]+(c()?Er[ve]:"")).join()}],we),_(F,W)};O(L,F=>{t().kind==="Monster"&&F(re)})}S(F=>{xe(U,`duel_card button_style_reset ${t().origin.kind??""} ${F??""} ${(a(m)?"duel_card_selected":"")??""} ${i()??""} duel_card_${t().orientation??""} ${(a($)?"isDragging":"")??""} ${(c()?"duel_card_wide":"")??""} duel_card_${t().face??""} ${(t().isOnField?"duel_card_is_on_field":"")??""} svelte-14cfp8z`),ht(U,"draggable",i()==="Draggable"),ht(U,"title",t().nm),D(z,t().nm)},[()=>{var F;return((F=t().status.monsterCategories)==null?void 0:F.join(" "))||""}],we),ke("dragstart",U,x),ke("dragend",U,M),ke("click",U,w),ke("dblclick",U,E),ke("mouseenter",U,()=>y()),ke("contextmenu",U,I),_(te,U)},ae=te=>{var U=Me(),Ee=J(U);{var K=z=>{var P=ws();S(()=>xe(P,`duel_card duel_card_face_down duel_card_face_down_defense ${i()??""}  ${(a(m)?"duel_card_selected":"")??""} svelte-14cfp8z`)),ke("click",P,w),ke("dblclick",P,E),_(z,P)},Y=z=>{var P=ks();_(z,P)};O(Ee,z=>{t().battlePosition==="Set"?z(K):z(Y,!1)},!0)}_(te,U)};O(le,te=>{t().face==="FaceUp"||s()||t().controller.duelistType==="Player"&&t().isUnderControl?te(B):te(ae,!1)})}_(e,X),Ke()}var xs=h('<div class="phase_display svelte-1mv96a1"><span class="svelte-1mv96a1"> </span> </div>'),Cs=h('<div class="lifepoint_display svelte-1mv96a1"><div class="svelte-1mv96a1"> </div> <div class="svelte-1mv96a1"> </div></div>'),Ds=(e,r,t)=>r(a(t)),Ss=h('<div class="svelte-1mv96a1"><button class="phase_button svelte-1mv96a1"> </button></div>'),Es=h("<div><!></div>"),Ms=h('<div class="svelte-1mv96a1"><!></div>'),Ts=h("<div><!></div>"),qs=h("<!> <!> <!>",1),$s=h('<div style="position: absolute;" class="card_animation_receiver svelte-1mv96a1"><!></div>'),As=h('<div style="position: absolute; top:0rem" class="svelte-1mv96a1">｛効果対象｝</div>'),zs=h('<!> <div style="position: absolute; display:flex;justify-content: center;" class="svelte-1mv96a1"><!></div>',1),Is=h(" <!> 】",1),Ns=h('<div style="position: absolute; bottom:0rem" class="svelte-1mv96a1"> <!></div>'),Os=h("<!> <!>",1),Ys=h('<div class="badge svelte-1mv96a1"> </div>'),Rs=h('<div class="card_animation_receiver svelte-1mv96a1"><!></div>'),js=h("<!> <!> <!> <!>",1),Ls=h('<td><div role="listitem"><!></div></td>');function Ps(e,r){We(r,!1);let t=Te(r,"view",8),i=Te(r,"row",8),n=Te(r,"column",8),s=Te(r,"selectedEntities",28,()=>[]),c=Te(r,"selectedCells",28,()=>[]),v=Se(t().getCell(i(),n()));const p=()=>{N(v,t().getCell(i(),n()))};a(v).onUpdate.append(p),t().onDuelUpdate.append(p),t().modalController.onUpdate.append(p);let d,l=Se([]),m=()=>console.log("hoge"),f,g=Se([]),b=Se(!1),$=Se(!1),E=!1;const y=k=>{var R,L;N(ae,[]),s().reset(),d=k.activator,m=k.resolve,N(l,k.dummyActionInfos),N(g,k.chainBlockInfos.flatMap(re=>re.selectedEntities).getDistinct()),f=k.entitiesChoices,N(b,!1),N($,((R=k.cellsChoices)==null?void 0:R.selectables.includes(a(v)))??!1),E=a($)&&((L=k.cellsChoices)==null?void 0:L.qty)===1};t().onWaitStart.append(y);const w=()=>{d=void 0,N(l,[]),m=()=>{console.log("hoge")},f=void 0,N(g,[]),N(b,!1),N($,!1),E=!1};t().onWaitEnd.append(w);let x=Se(!1),M=[];const I=k=>{M=k.filter(R=>R.dests.includes(a(v))),N(x,M.length>0),p()},X=()=>{M=[],N(x,!1),p()};t().onDragStart.append(I),t().onDragEnd.append(X);const[le,B]=Wl;let ae=Se([]);const te=k=>{if(d=void 0,a(v)===k.to||a(v).entities.includes(k.entity)){N(ae,[...a(ae),k]);const R=k.resolve;N(v,a(v)),setTimeout(()=>{N(ae,a(ae).filter(L=>L!==k)),k.count++,k.count>1&&R()},600)}};t().onAnimation.append(te);const U=k=>{m({phaseChange:k})},Ee=()=>a(v).isStackCell&&a(v).entities.flatMap(k=>k.actions).filter(k=>a(l).map(R=>R.action.seq).some(R=>R===k.seq)).length>0,K=()=>{if(Ne(v,a(v).field.duel.view.infoBoardState="Log"),E)m({selectedCells:[a(v)]});else if(a($))N(b,!a(b)),c(a(b)?[...c(),a(v)]:c().filter(k=>k!==a(v)));else if(a(v).isStackCell){Ne(v,a(v).field.duel.view.infoBoardState="CellInfo"),Ne(v,a(v).field.duel.view.infoBoardCell=a(v)),a(v).field.duel.view.requireUpdate();const k=a(v).entities.flatMap(L=>L.actions).map(L=>L.seq),R=a(l).filter(L=>k.includes(L.action.seq));if(R.length){if(!d)return;a(v).field.duel.view.modalController.actionSelector.show({title:"カードを選択。",activator:d,dummyActionInfos:R,cancelable:!0}).then(re=>{re&&m({actionInfo:re})});return}}a(v).field.duel.view.requireUpdate(),console.info(a(v))},Y=k=>{k.preventDefault(),k.dataTransfer&&(k.dataTransfer.dropEffect="move")},z=k=>{k.preventDefault(),console.info("drop",k,a(x),M),k.dataTransfer&&(k.dataTransfer.dropEffect="move");try{if(a(x)&&M){if(M.length===1){const R=M[0];console.log(m,{actionInfo:{...R,dest:a(v)}}),m({actionInfo:{...R,dest:a(v)}})}else if(M.length>1){if(!d)throw new Ci("想定されない状態");a(v).field.duel.view.modalController.terminateAll(),a(v).field.duel.view.modalController.actionSelector.show({title:"選択",activator:d,dummyActionInfos:M.map(R=>({...R,dest:a(v)})),cancelable:!1}).then(R=>{m({actionInfo:R})})}}}finally{t().removeDraggingActions()}},P=(...k)=>{if(t().waitMode==="Animation")return"Disabled";if(f&&f.selectables.find(L=>k.find(re=>L===re)))return"Selectable";if(!a(l)||a(l).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(L=>L.state==="Shown"))return"Disabled";const R=a(l).filter(L=>k.includes(L.action.entity));return R.length===0?"Disabled":a(v).isStackCell||R[0].action.entity!==k[0]?"Clickable":R.some(L=>L.dests.length)?"Draggable":"Clickable"};Ze();var Q=Ls(),j=o(Q);j.__click=K;var pe=o(j);{var me=k=>{var R=Me(),L=J(R);{var re=F=>{var W=Me(),T=J(W);{var q=ie=>{var oe=xs(),de=o(oe),Ce=o(de),he=u(de,1,!0);S((ue,_e)=>{D(Ce,ue),D(he,_e)},[()=>String(a(v).field.duel.clock.turn).padStart(2,"0"),()=>a(v).field.duel.phase.toUpperCase()],we),_(ie,oe)},G=ie=>{var oe=Me(),de=J(oe);{var Ce=ue=>{var _e=Cs(),ve=o(_e),Ae=o(ve),$e=u(ve,2),Re=o($e);S(()=>{D(Ae,a(v).field.duel.duelists.Above.lp),D(Re,a(v).field.duel.duelists.Below.lp)}),_(ue,_e)},he=ue=>{var _e=Me(),ve=J(_e);{var Ae=$e=>{var Re=Me(),C=J(Re);{var A=H=>{var ye=Me(),ce=J(ye);{var fe=V=>{var Z=Me(),ee=J(Z);se(ee,1,()=>t().duel.nextPhaseList,ne,(be,De)=>{var qe=Ss(),He=o(qe);He.__click=[Ds,U,De];var Le=o(He);S(Pe=>D(Le,Pe),[()=>a(De).toUpperCase()],we),_(be,qe)}),_(V,Z)};O(ce,V=>{t().duel.isEnded||V(fe)})}_(H,ye)};O(C,H=>{t().waitMode==="Free"&&H(A)})}_($e,Re)};O(ve,$e=>{a(v).column===5&&$e(Ae)},!0)}_(ue,_e)};O(de,ue=>{a(v).column===3?ue(Ce):ue(he,!1)},!0)}_(ie,oe)};O(T,ie=>{a(v).column===1?ie(q):ie(G,!1)})}_(F,W)};O(L,F=>{a(v).row===3&&F(re)})}_(k,R)},ge=k=>{var R=Me(),L=J(R);{var re=W=>{var T=qs();const q=we(()=>a(ae).find(he=>he.to===a(v)));var G=J(T);{var ie=he=>{var ue=Es(),_e=o(ue);ft(_e,{get entity(){return a(q).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),S(()=>xe(ue,`card_animation_receiver ${a(v).cellType??""} svelte-1mv96a1`)),et(1,ue,()=>B,()=>({key:a(q).entity.seq})),_(he,ue)};O(G,he=>{a(q)&&a(q).index==="Top"&&he(ie)})}var oe=u(G,2);se(oe,1,()=>a(v).visibleEntities,ne,(he,ue)=>{var _e=Me(),ve=J(_e);{var Ae=$e=>{var Re=Ms(),C=o(Re);const A=we(()=>P(a(ue))),H=we(()=>a(l).filter(ye=>ye.action.entity===a(ue)));ft(C,{get entity(){return a(ue)},get state(){return a(A)},get dummyActionInfos(){return a(H)},cardActionResolve:void 0,get selectedList(){return s()},set selectedList(ye){s(ye)},$$legacy:!0}),et(2,Re,()=>le,()=>({key:a(ue).seq})),_($e,Re)};O(ve,$e=>{a(ae).every(Re=>Re.entity.seq!==a(ue).seq)&&$e(Ae)})}_(he,_e)});var de=u(oe,2);{var Ce=he=>{var ue=Ts(),_e=o(ue);ft(_e,{get entity(){return a(q).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),S(()=>xe(ue,`card_animation_receiver ${a(v).cellType??""} svelte-1mv96a1`)),et(1,ue,()=>B,()=>({key:a(q).entity.seq})),_(he,ue)};O(de,he=>{a(q)&&a(q).index!=="Top"&&he(Ce)})}_(W,T)},F=W=>{var T=js();const q=we(()=>a(ae).find(ve=>ve.to===a(v)));var G=J(T);{var ie=ve=>{var Ae=$s(),$e=o(Ae);ft($e,{get entity(){return a(q).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),et(1,Ae,()=>B,()=>({key:a(q).entity.seq})),_(ve,Ae)};O(G,ve=>{a(q)&&a(q).index!=="Top"&&ve(ie)})}var oe=u(G,2);{var de=ve=>{var Ae=Os(),$e=J(Ae);se($e,1,()=>a(v).visibleEntities.map((A,H)=>({index:H,entity:A})).toReversed(),ne,(A,H)=>{var ye=Me(),ce=J(ye);{var fe=V=>{var Z=zs(),ee=J(Z);{var be=Pe=>{var Oe=As();_(Pe,Oe)};O(ee,Pe=>{a(g).includes(a(H).entity)&&Pe(be)})}var De=u(ee,2),qe=o(De);const He=we(()=>!a(v).isStackCell&&a(H).index===0?P(...a(v).visibleEntities):void 0),Le=we(()=>a(H).index===0?a(l).filter(Pe=>a(v).visibleEntities.includes(Pe.action.entity)):void 0);ft(qe,{get entity(){return a(H).entity},get state(){return a(He)},get dummyActionInfos(){return a(Le)},cardActionResolve:void 0,get selectedList(){return s()},set selectedList(Pe){s(Pe)},$$legacy:!0}),et(2,De,()=>le,()=>({key:a(H).entity.seq})),_(V,Z)};O(ce,V=>{a(ae).every(Z=>Z.entity.seq!==a(H).entity.seq)&&V(fe)})}_(A,ye)});var Re=u($e,2);{var C=A=>{var H=Ns(),ye=o(H),ce=u(ye);se(ce,1,()=>Object.keys(a(v).visibleEntities[0].status.maxCounterQty),ne,(fe,V)=>{var Z=Is(),ee=J(Z),be=u(ee);{var De=qe=>{var He=$t();S(()=>D(He,`/${a(v).visibleEntities[0].status.maxCounterQty[a(V)]??""}`)),_(qe,He)};O(be,qe=>{(a(v).visibleEntities[0].status.maxCounterQty[a(V)]??!1)&&qe(De)})}S(qe=>D(ee,`【
              ${Di[a(V)]??""}${qe??""} `),[()=>a(v).visibleEntities[0].counterHolder.getQty(a(V))],we),_(fe,Z)}),S(()=>D(ye,`【${a(v).visibleEntities[0].battlePositionName??""}】 `)),_(A,H)};O(Re,A=>{a(v).visibleEntities[0].battlePosition&&A(C)})}_(ve,Ae)};O(oe,ve=>{a(v).visibleEntities.length>0&&ve(de)})}var Ce=u(oe,2);{var he=ve=>{var Ae=Ys(),$e=o(Ae);S(()=>D($e,a(v).visibleEntities.length)),_(ve,Ae)};O(Ce,ve=>{a(v).isStackCell&&ve(he)})}var ue=u(Ce,2);{var _e=ve=>{var Ae=Rs(),$e=o(Ae);ft($e,{get entity(){return a(q).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),et(1,Ae,()=>B,()=>({key:a(q).entity.seq})),_(ve,Ae)};O(ue,ve=>{a(q)&&a(q).index==="Top"&&ve(_e)})}_(W,T)};O(L,W=>{a(v).cellType==="Hand"?W(re):W(F,!1)},!0)}_(k,R)};O(pe,k=>{a(v).isDisabledCell?k(me):k(ge,!1)})}S(k=>{xe(Q,`${`duel_field_cell duel_field_cell_${a(v).cellType} ${a(v).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1mv96a1`),ht(Q,"colspan",a(v).cellType==="Hand"?7:1),xe(j,`${k??""} svelte-1mv96a1`)},[()=>`duel_card_wrapper ${a(v).cellType} ${a(x)?"can_accept_drop":""} ${Ee()?"can_action":""} ${a(b)?"is_selected":a($)?"is_selectable":""} `],we),ke("dragover",j,Y),ke("drop",j,z),_(e,Q),Ke()}Qt(["click"]);var Fs=h('<div class="title svelte-1sjjr5s"> </div>'),Us=h('<div class="title svelte-1sjjr5s"> </div>'),Hs=h('<div class="duel_log_record svelte-1sjjr5s"> </div>'),Bs=h('<div><div style=" white-space: nowrap;text-align: center;"> </div> <!></div>'),Ws=h("<div><!> <!></div>"),Ks=h("<div><!> <!></div>"),Vs=h('<div class="duel_log svelte-1sjjr5s"><div class="duel_log_header svelte-1sjjr5s"></div> <div class="duel_log_body svelte-1sjjr5s"></div> <div class="duel_log_footer svelte-1sjjr5s"></div></div>');function Gs(e,r){We(r,!1);let t=Se(void 0),i=Te(r,"log",8),n,s=Se([]);const c=()=>{const l=((n==null?void 0:n.seq)??-1)+1;i().records.slice(l).forEach(m=>{if(!n){N(s,[[[[m]]]]),n=m;return}if(!a(s)[m.clock.turn]){Ne(s,a(s)[m.clock.turn]=[[[m]]]),n=m;return}if(!a(s)[m.clock.turn][m.clock.phaseSeq]){Ne(s,a(s)[m.clock.turn][m.clock.phaseSeq]=[[m]]),n=m;return}if(n.clock.chainSeq===m.clock.chainSeq&&n.clock.chainBlockSeq===m.clock.chainBlockSeq&&n.duelist===m.duelist){a(s)[m.clock.turn][m.clock.phaseSeq].slice(-1)[0].push(m),n=m;return}a(s)[m.clock.turn][m.clock.phaseSeq].push([m]),n=m}),N(s,a(s)),In().then(()=>a(t)&&a(t).scroll(0,a(t).clientHeight*990))};i().onUpdate.append(c),i().duel.view.onDuelUpdate.append(c),Ze();var v=Me(),p=J(v);{var d=l=>{var m=Vs(),f=u(o(m),2);se(f,5,()=>a(s),ne,(g,b)=>{var $=Ks(),E=o($);{var y=x=>{var M=Fs(),I=o(M);S(()=>D(I,`ターン：${a(b)[0][0][0].clock.turn??""}`)),_(x,M)};O(E,x=>{a(b)[0][0][0].clock.turn>0&&x(y)})}var w=u(E,2);se(w,1,()=>a(b),ne,(x,M)=>{var I=Ws(),X=o(I);{var le=ae=>{var te=Us(),U=o(te);S(()=>D(U,a(M)[0][0].clock.period.name)),_(ae,te)};O(X,ae=>{a(M)[0][0].clock.turn>0&&ae(le)})}var B=u(X,2);se(B,1,()=>a(M),ne,(ae,te)=>{var U=Bs(),Ee=o(U),K=o(Ee),Y=u(Ee,2);se(Y,1,()=>a(te),ne,(z,P)=>{var Q=Hs(),j=o(Q);S(()=>D(j,a(P).text)),_(z,Q)}),S(()=>{var z,P,Q;xe(U,`duel_log_block_duelist duel_log_block_duelist_${((z=a(te)[0].duelist)==null?void 0:z.seat)??"system"} svelte-1sjjr5s`),xe(Ee,`duelist ${((P=a(te)[0].duelist)==null?void 0:P.seat)??""} svelte-1sjjr5s`),D(K,((Q=a(te)[0].duelist)==null?void 0:Q.profile.name)||"SYSTEM")}),_(ae,U)}),S(()=>xe(I,`duel_log_block_phase duel_log_block_phase_${a(M)[0][0].clock.period.key??""} svelte-1sjjr5s`)),_(x,I)}),S(()=>xe($,`duel_log_block_turn duel_log_block_turn_${a(b)[0][0][0].clock.turn??""} svelte-1sjjr5s`)),_(g,$)}),ss(f,g=>N(t,g),()=>a(t)),_(l,m)};O(p,l=>{i().duel.view.infoBoardState==="Log"&&l(d)})}_(e,v),Ke()}var Xs=h('<div><div class="duelist_name svelte-1u7codf"> </div> <div> </div></div>');function Ia(e,r){We(r,!1);let t=Te(r,"duelist",12),i=Se(0),n=Se();const s=async()=>{const f=t().lp-a(i);if(!a(n)||Math.abs(f)<10){N(i,t().lp),a(n)&&(a(n)(),N(n,void 0));return}N(i,a(i)+Math.floor(Math.random()*f)),await Si(100),s()},c=()=>{t(t()),!a(n)&&t().lp!==a(i)&&new Promise(f=>{N(n,f),Math.abs(t().lp-a(i)),s()})};t().duel.log.onUpdate.append(c),s(),Ze();var v=Xs(),p=o(v),d=o(p),l=u(p,2),m=o(l);S(()=>{xe(v,`duelist ${t().seat??""} svelte-1u7codf`),D(d,t().profile.name),xe(l,`duelist_lp ${(a(n)?"vibration":"")??""} svelte-1u7codf`),D(m,a(i))}),_(e,v),Ke()}const Qs=(e,r,t)=>{r.resolve(a(t))};var Zs=h("<div><!></div>"),Js=h("<div></div>"),el=(e,r)=>r.resolve(void 0),tl=h('<button class="svelte-ynkuoo">Cancel</button>'),rl=h('<div class="modal_window svelte-ynkuoo"><div> </div> <!> <div><button class="svelte-ynkuoo">OK</button> <!></div></div>');function al(e,r){We(r,!0);let t=pn(Dt([])),i=r.args.chainBlockInfos.flatMap(v=>v.selectedEntities).getDistinct();var n=Me(),s=J(n);{var c=v=>{var p=rl(),d=o(p),l=o(d),m=u(d,2);se(m,17,()=>r.args.entitiesChoices.selectables.map(E=>E.controller.seat).getDistinct(),ne,(E,y)=>{var w=Js();se(w,21,()=>r.args.entitiesChoices.selectables.filter(x=>x.controller.seat===a(y)).toSorted(Oa),ne,(x,M)=>{var I=Zs(),X=o(I);ft(X,{get entity(){return a(M)},isVisibleForcibly:!0,state:"Selectable",entitySelectResolve:le=>r.resolve(le),get qty(){return r.args.entitiesChoices.qty},cardActionResolve:void 0,get selectedList(){return a(t)},set selectedList(le){N(t,Dt(le))}}),S(le=>xe(I,`entities_list_item ${le??""} svelte-ynkuoo`),[()=>i.includes(a(M))?"effect_target":""]),_(x,I)}),S(()=>xe(w,`entities_list ${a(y)??""} svelte-ynkuoo`)),_(E,w)});var f=u(m,2),g=o(f);g.__click=[Qs,r,t];var b=u(g,2);{var $=E=>{var y=tl();y.__click=[el,r],_(E,y)};O(b,E=>{r.args.entitiesChoices.cancelable&&E($)})}S(E=>{D(l,r.args.title),g.disabled=E},[()=>!r.args.entitiesChoices.validator(a(t))]),_(v,p)};O(s,v=>{v(c)})}_(e,n),Ke()}Qt(["click"]);var il=h('<div class="duel_card_wrapper svelte-xh109j"><!> <div> </div></div>'),nl=(e,r)=>r()(),sl=h('<div><button class="cancel_button svelte-xh109j">Cancel</button></div>'),ll=h('<div class="modal_window svelte-xh109j"><div> </div> <div class="flex svelte-xh109j" style="display: flex;"></div> <!></div>');function ol(e,r){We(r,!1);let t=Te(r,"view",8),i=Te(r,"args",8),n=Te(r,"resolve",8),s=ls(!1);const c=()=>s.set(!0),v=()=>s.set(!1);t().onDragStart.append(c),t().onDragEnd.append(v),Ze();var p=Me(),d=J(p);{var l=m=>{var f=ll(),g=o(f),b=o(g),$=u(g,2);se($,5,()=>i().dummyActionInfos,ne,(w,x)=>{var M=il(),I=o(M);const X=we(()=>a(x).dests.length?"Draggable":"Clickable"),le=we(()=>i().dragAndDropOnly?[]:[a(x)]);ft(I,{get entity(){return a(x).action.entity},isVisibleForcibly:!0,get state(){return a(X)},get dummyActionInfos(){return a(le)},get cardActionResolve(){return n()}});var B=u(I,2),ae=o(B);S(()=>D(ae,`«${a(x).action.title??""}»`)),_(w,M)});var E=u($,2);{var y=w=>{var x=sl(),M=o(x);M.__click=[nl,n],_(w,x)};O(E,w=>{i().cancelable&&w(y)})}S(()=>D(b,i().title)),_(m,f)};O(d,m=>{m(l)})}_(e,p),Ke()}Qt(["click"]);var vl=(e,r,t)=>r()(t()),dl=h('<li><button class="svelte-1ql7e20"> </button></li>'),cl=(e,r)=>r()(void 0),ul=h('<button class="cancel_button svelte-1ql7e20">Cancel</button>'),fl=h('<div class="modal_window svelte-1ql7e20"><div class="svelte-1ql7e20"> </div> <ui class="text_list svelte-1ql7e20"></ui> <!></div>');function _l(e,r){We(r,!1);let t=Te(r,"arg",8),i=Te(r,"resolve",8);Ze();var n=Me(),s=J(n);{var c=v=>{var p=fl(),d=o(p),l=o(d),m=u(d,2);se(m,5,()=>t().choises,ne,(b,$)=>{let E=()=>a($).seq,y=()=>a($).text;var w=dl(),x=o(w);x.__click=[vl,i,E];var M=o(x);S(()=>{xe(w,`text_item ${E()??""} svelte-1ql7e20`),D(M,y())}),_(b,w)});var f=u(m,2);{var g=b=>{var $=ul();$.__click=[cl,i],_(b,$)};O(f,b=>{t().cancelable&&b(g)})}S(()=>D(l,t().title)),_(v,p)};O(s,v=>{v(c)})}_(e,n),Ke()}Qt(["click"]);const pl=(e,r)=>{r().modals.forEach(t=>t.cancel())};var ml=h('<button class="overlay svelte-5wiqd8">☆</button> <!> <!> <!>',1),gl=h('<div class="base svelte-5wiqd8"><!></div>');function hl(e,r){var v,p;We(r,!1);let t=Te(r,"modalController",12);const i=()=>{t(t())};(p=(v=t())==null?void 0:v.onUpdate)==null||p.append(i),Ze();var n=gl(),s=o(n);{var c=d=>{var l=ml(),m=J(l);m.__click=[pl,t];var f=u(m,2);{var g=w=>{al(w,{get args(){return t().entitySelector.args},get resolve(){return t().entitySelector.resolve}})};O(f,w=>{t().entitySelector.state==="Shown"&&w(g)})}var b=u(f,2);{var $=w=>{ol(w,{get view(){return t().view},get args(){return t().actionSelector.args},get resolve(){return t().actionSelector.resolve}})};O(b,w=>{t().actionSelector.state==="Shown"&&w($)})}var E=u(b,2);{var y=w=>{_l(w,{get arg(){return t().textSelector.args},get resolve(){return t().textSelector.resolve}})};O(E,w=>{t().textSelector.state==="Shown"&&w(y)})}_(d,l)};O(s,d=>{t().modals.some(l=>l.state==="Shown")&&d(c)})}_(e,n),Ke()}Qt(["click"]);const yl=(e,r)=>(r(r()==="Normal"?"Debug":"Normal"),!0);var bl=h('<div class="duel_card_info_row svelte-1qknre5"><div class="svelte-1qknre5"><pre class="description svelte-1qknre5"> </pre></div></div> <div class="duel_card_info_row svelte-1qknre5" style=" justify-content: space-between;"><div class="svelte-1qknre5"> </div> <div class="svelte-1qknre5"> </div></div>',1),wl=h('<div></div> <div class="svelte-1qknre5"> </div>',1),kl=h("<div> </div>"),xl=h("<div> </div>"),Cl=h('<div class="duel_card_info_row svelte-1qknre5"><!> <!></div> <div class="duel_card_info_row svelte-1qknre5"></div>',1),Dl=h('<div class="duel_card_row svelte-1qknre5"><div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"> </div></div>'),Sl=h('<div class="duel_card_row svelte-1qknre5"><div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"> </div></div>'),El=h("<!> <!>",1),Ml=h('<div class="duel_card_info_row svelte-1qknre5"><div class="svelte-1qknre5"><pre class="description svelte-1qknre5"> </pre></div></div>'),Tl=h('<div class="svelte-1qknre5"> </div>'),ql=h('<div class="svelte-1qknre5"> </div>'),$l=h('<div class="svelte-1qknre5"> </div>'),Al=h('<div class="svelte-1qknre5"> </div>'),zl=h('<div class="svelte-1qknre5"> </div>'),Il=h('<div class="svelte-1qknre5"> </div>'),Nl=h('<div class="svelte-1qknre5"> </div>'),Ol=h('<div class="svelte-1qknre5"> </div>'),Yl=h('<div class="duel_card_info_row svelte-1qknre5"><div class="svelte-1qknre5"><div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"> </div> <div class="svelte-1qknre5"> </div> <div class="svelte-1qknre5"> </div> <div class="svelte-1qknre5"></div></div></div>'),Rl=h('<div class="svelte-1qknre5">※テスト用カードです</div>'),jl=h('<div class="duel_card_info_links svelte-1qknre5"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1qknre5">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1qknre5"> </a></div>'),Ll=h('<div role="contentinfo"><div class="duel_card_info_header svelte-1qknre5"><div class="duel_card_info_row svelte-1qknre5"><div class="svelte-1qknre5"> </div></div> <div class="duel_card_info_row svelte-1qknre5" style="position:sticky; top:0;"><div class="svelte-1qknre5"> </div> <div class="svelte-1qknre5"> </div></div> <!></div> <div class="duel_card_info_body svelte-1qknre5"><!></div> <div class="duel_card_info_footer svelte-1qknre5"><!></div></div>');function Pl(e,r){We(r,!1);let t=Te(r,"entity",8,void 0);const i=()=>t()?zt[t().origin.name]:void 0,n=()=>{var d;return t()&&(t().origin.cardId??!1)?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t().origin.cardId}`:`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${(d=i())==null?void 0:d.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`};let s=Te(r,"mode",12,"Normal");Ze();var c=Me(),v=J(c);{var p=d=>{var l=Ll();l.__contextmenu=[yl,s];var m=o(l),f=o(m),g=o(f),b=o(g),$=u(f,2),E=o($),y=o(E),w=u(E,2),x=o(w),M=u($,2);{var I=Y=>{var z=El(),P=J(z);{var Q=ge=>{var k=bl(),R=J(k),L=o(R),re=o(L),F=o(re),W=u(R,2),T=o(W),q=o(T),G=u(T,2),ie=o(G);S(()=>{D(F,zt[t().origin.name].pendulumDescription),D(q,`◀ ${t().psL??""}`),D(ie,`${t().psR??""} ▶`)}),_(ge,k)};O(P,ge=>{var k;(k=t().status.monsterCategories)!=null&&k.includes("Pendulum")&&ge(Q)})}var j=u(P,2);{var pe=ge=>{var k=Cl(),R=J(k),L=o(R);se(L,1,()=>t().attr,ne,(W,T)=>{var q=wl(),G=J(q),ie=u(G,2),oe=o(ie);S(()=>{xe(G,`monster_attr ${a(T)??""} svelte-1qknre5`),D(oe,`${ea[a(T)]??""}属性`)}),_(W,q)});var re=u(L,2);se(re,1,()=>t().types,ne,(W,T)=>{var q=kl(),G=o(q);S(()=>{xe(q,`monster_cat ${a(T)??""} svelte-1qknre5`),D(G,`${sr[a(T)]??""}${Sr[a(T)]??""}族`)}),_(W,q)});var F=u(R,2);se(F,5,()=>t().status.monsterCategories??[],ne,(W,T)=>{var q=xl(),G=o(q);S(()=>{xe(q,`monster_cat ${a(T)??""} svelte-1qknre5`),D(G,`${lr[a(T)]??""}${Er[a(T)]??""}`)}),_(W,q)}),_(ge,k)},me=ge=>{var k=Me(),R=J(k);{var L=F=>{var W=Dl(),T=u(o(W),2),q=o(T);S(()=>D(q,`${or[t().status.spellCategory]??""}魔法`)),_(F,W)},re=F=>{var W=Me(),T=J(W);{var q=G=>{var ie=Sl(),oe=u(o(ie),2),de=o(oe);S(()=>D(de,`${vr[t().status.trapCategory]??""}罠`)),_(G,ie)};O(T,G=>{t().kind==="Trap"&&t().status.trapCategory&&G(q)},!0)}_(F,W)};O(R,F=>{t().kind==="Spell"&&t().status.spellCategory?F(L):F(re,!1)},!0)}_(ge,k)};O(j,ge=>{t().kind==="Monster"?ge(pe):ge(me,!1)})}_(Y,z)};O(M,Y=>{s()==="Normal"&&Y(I)})}var X=u(m,2),le=o(X);{var B=Y=>{var z=Ml(),P=o(z),Q=o(P),j=o(Q);S(pe=>D(j,pe),[()=>{var pe;return(pe=i())==null?void 0:pe.description}],we),_(Y,z)},ae=Y=>{var z=Yl(),P=o(z),Q=o(P);Q.textContent='"info" :{';var j=u(Q,2);se(j,1,()=>Object.entries(t().info),ne,(Z,ee)=>{let be=()=>a(ee)[0],De=()=>a(ee)[1];var qe=Tl(),He=o(qe);S(Le=>D(He,`"${be()??""}" :${Le??""},`),[()=>{var Le;return(Le=De())==null?void 0:Le.toString()}],we),_(Z,qe)});var pe=u(j,2);pe.textContent="},";var me=u(pe,2);me.textContent='"status" :{';var ge=u(me,2);se(ge,1,()=>Object.entries(t().status),ne,(Z,ee)=>{let be=()=>a(ee)[0],De=()=>a(ee)[1];var qe=ql(),He=o(qe);S(Le=>D(He,`"${be()??""}" :${Le??""},`),[()=>{var Le;return(Le=De())==null?void 0:Le.toString()}],we),_(Z,qe)});var k=u(ge,2);k.textContent="},";var R=u(k,2);R.textContent='"actions" :[';var L=u(R,2);se(L,1,()=>t().actions,ne,(Z,ee)=>{var be=$l(),De=o(be);S(()=>D(De,`"${a(ee).playType??""} ${a(ee).title??""}",`)),_(Z,be)});var re=u(L,2);re.textContent="],";var F=u(re,2);F.textContent='"substituteEffects" :[';var W=u(F,2);se(W,1,()=>t().substituteEffects,ne,(Z,ee)=>{var be=Al(),De=o(be);S(()=>D(De,`"${a(ee).title??""}",`)),_(Z,be)});var T=u(W,2);T.textContent="],";var q=u(T,2);q.textContent='"continuousEffects" :[';var G=u(q,2);se(G,1,()=>t().continuousEffects,ne,(Z,ee)=>{var be=zl(),De=o(be);S(()=>D(De,`"${a(ee).isStarted??""}",`)),_(Z,be)});var ie=u(G,2);ie.textContent="],";var oe=u(ie,2);oe.textContent='"procFilters" :[';var de=u(oe,2);se(de,1,()=>t().procFilterBundle.operators,ne,(Z,ee)=>{var be=Il(),De=o(be);S(qe=>D(De,`"${qe??""} ${a(ee).title??""}",`),[()=>a(ee).isSpawnedBy.toString()],we),_(Z,be)});var Ce=u(de,2);Ce.textContent="],";var he=u(Ce,2);he.textContent='"numericStateOperators" :[';var ue=u(he,2);se(ue,1,()=>t().numericOprsBundle.operators,ne,(Z,ee)=>{var be=Nl(),De=o(be);S(qe=>D(De,`"${qe??""} ${a(ee).title??""}",`),[()=>a(ee).isSpawnedBy.toString()],we),_(Z,be)});var _e=u(ue,2);_e.textContent="],";var ve=u(_e,2);ve.textContent='"stateOperators" :[';var Ae=u(ve,2);se(Ae,1,()=>t().statusOperatorBundle.operators,ne,(Z,ee)=>{var be=Ol(),De=o(be);S(qe=>D(De,`"${qe??""} ${a(ee).title??""}",`),[()=>a(ee).isSpawnedBy.toString()],we),_(Z,be)});var $e=u(Ae,2);$e.textContent="],";var Re=u($e,2);Re.textContent='"lastMoveLogRecord" :{';var C=u(Re,2),A=o(C),H=u(C,2),ye=o(H),ce=u(H,2),fe=o(ce),V=u(ce,2);V.textContent="},",S((Z,ee)=>{D(A,`"movedBy":"${Z??""}",`),D(ye,`"movedAs":"${ee??""}",`),D(fe,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var Z;return(Z=t().moveLog.latestRecord.movedBy)==null?void 0:Z.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],we),_(Y,z)};O(le,Y=>{s()==="Normal"?Y(B):Y(ae,!1)})}var te=u(X,2),U=o(te);{var Ee=Y=>{var z=Rl();_(Y,z)},K=Y=>{var z=jl(),P=o(z),Q=u(P,2),j=o(Q);S(pe=>{var me;ht(P,"href",`https://yugioh-wiki.net/index.php?${t().origin.wikiEncodedName}`),ht(Q,"href",pe),D(j,`⇒${((me=t())!=null&&me.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[n],we),_(Y,z)};O(U,Y=>{var z;(z=t())!=null&&z.origin.isForTest?Y(Ee):Y(K,!1)})}S((Y,z,P)=>{xe(l,`duel_card duel_card_info ${t().origin.kind??""} ${Y??""} svelte-1qknre5`),D(b,t().nm),D(y,z),D(x,P)},[()=>{var Y;return(Y=t().origin.monsterCategories)==null?void 0:Y.join(" ")},()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],we),_(d,l)};O(v,d=>{t()&&d(p)})}_(e,c),Ke()}Qt(["contextmenu"]);var Fl=h('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),Ul=h('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),Hl=h('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Bl(e,r){We(r,!1);let t=Te(r,"cell",12);const i=()=>{t(t())},n=p=>t().cardEntities.filter(d=>d.face===p);t().field.duel.view.onDuelUpdate.append(i),Ze();var s=Me(),c=J(s);{var v=p=>{var d=Hl(),l=o(d),m=o(l),f=o(m),g=u(m,2),b=o(g),$=u(l,2);se($,4,()=>["FaceUp","FaceDown"],ne,(E,y)=>{var w=Me(),x=J(w);{var M=I=>{var X=Ul(),le=o(X),B=o(le),ae=u(le,2);se(ae,1,()=>n(y).toSorted(Oa),ne,(te,U)=>{var Ee=Fl(),K=o(Ee);const Y=we(()=>t().owner===t().field.duel.duelists.Below);ft(K,{get entity(){return a(U)},get isVisibleForcibly(){return a(Y)},isWideMode:!0,cardActionResolve:void 0}),_(te,Ee)}),S(()=>D(B,y==="FaceUp"?"表向き":"裏向き")),_(I,X)};O(x,I=>{n(y).length&&I(M)})}_(E,w)}),S(()=>{var E;D(f,(E=t().owner)==null?void 0:E.profile.name),D(b,t().cellType)}),_(p,d)};O(c,p=>{t().field.duel.view.infoBoardState==="CellInfo"&&p(v)})}_(e,s),Ke()}const Wl=us({duration:400});var Kl=h('<div class="duel_field_header_message svelte-accyye"> </div> <div class="duel_field_header_buttons svelte-accyye"><button class="svelte-accyye">サレンダー</button></div>',1),Vl=h("<tr></tr>"),Gl=h('<table class="duel_field svelte-accyye"><tbody class="svelte-accyye"></tbody></table>'),Xl=h('<button class="svelte-accyye">cancel</button>'),Ql=h('<button class="svelte-accyye">OK</button> <!>',1),Zl=h('<button class="svelte-accyye"> </button>'),Jl=h('<div class="flex duel_desk svelte-accyye"><div class="duel_desk_left v_flex svelte-accyye"><!> <!> <!></div> <div class=" duel_desk_center v_flex svelte-accyye"><div class="duel_field_header svelte-accyye"><!></div> <div class="svelte-accyye"><!></div> <div class="duel_field_footer svelte-accyye"><!></div></div> <div class=" duel_desk_right svelte-accyye" style="text-align: left;"><!> <!></div></div> <div style="position:absolute;left:0;bottom:0"> </div> <!>',1);function eo(e,r){We(r,!1);let t=Te(r,"duel",12),i=Se([]),n=Se([]),s=()=>{},c=Se([]),v=Se(),p=Se(),d=Se(()=>!1),l=Se(!1);const m=T=>{s=T.resolve,N(c,T.dummyActionInfos.filter(q=>q.action.entity.entityType==="Duelist").filter(q=>q.action.entity.controller.seat==="Below")),N(v,void 0),N(p,void 0),N(n,[]),N(i,[]),N(l,!1),T.entitiesChoices&&(N(v,T.entitiesChoices),N(d,()=>{var q;return((q=T.entitiesChoices)==null?void 0:q.validator(a(i)))??!1}),N(l,T.entitiesChoices.cancelable),a(v).selectables.every(q=>q.fieldCell.isPlayFieldCell&&q.getIndexInCell()===0||q.fieldCell.cellType==="Hand"&&q.controller.duelistType==="Player"||q.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,entitiesChoices:T.entitiesChoices,chainBlockInfos:T.chainBlockInfos,cancelable:T.entitiesChoices.cancelable}).then(q=>{s({selectedEntities:q})})),T.cellsChoices&&(N(p,T.cellsChoices),N(d,()=>{var q;return((q=T.cellsChoices)==null?void 0:q.validator(a(n)))??!1}),N(l,T.cellsChoices.cancelable))};t().view.onWaitStart.append(m);const f=()=>{s=()=>{},N(p,void 0),N(v,void 0),N(n,[]),N(i,[]),N(d,()=>!1),N(l,!1)};t().view.onWaitEnd.append(f);let g=Se(void 0),b=Se("Normal");const $=({card:T,mode:q})=>{N(g,T),N(b,q)};t().view.onShowCardEntity.append($);const E=()=>{t(t())};t().view.onDuelUpdate.append(E),t().log.onUpdate.append(E);const y=()=>{a(v)&&a(v).validator(a(i))&&s({selectedEntities:a(i)}),a(p)&&a(p).validator(a(n))&&s({selectedCells:a(n)})},w=()=>{s({})},x=T=>{s({actionInfo:T})},M=()=>{s({surrender:!0})};t().main(),Ze();var I=Jl(),X=J(I),le=o(X),B=o(le);Ia(B,{get duelist(){return t().duelists.Above}});var ae=u(B,2);Pl(ae,{get entity(){return a(g)},get mode(){return a(b)}});var te=u(ae,2);Ia(te,{get duelist(){return t().duelists.Below}});var U=u(le,2),Ee=o(U),K=o(Ee);{var Y=T=>{var q=Kl(),G=J(q),ie=o(G),oe=u(G,2),de=o(oe);S(()=>D(ie,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),ke("click",de,M),_(T,q)};O(K,T=>{t().isEnded||T(Y)})}var z=u(Ee,2),P=o(z);{var Q=T=>{var q=Gl(),G=o(q);se(G,5,()=>t().field.cells,ne,(ie,oe,de)=>{var Ce=Vl();xe(Ce,`${`duel_desk_row_${de}`??""} svelte-accyye`),se(Ce,5,()=>a(oe),ne,(he,ue,_e)=>{Ps(he,{get view(){return t().view},row:de,column:_e,get selectedEntities(){return a(i)},set selectedEntities(ve){N(i,ve)},get selectedCells(){return a(n)},set selectedCells(ve){N(n,ve)},$$legacy:!0})}),_(ie,Ce)}),_(T,q)};O(P,T=>{t().clock.turn>0&&T(Q)})}var j=u(z,2),pe=o(j);{var me=T=>{var q=Ql(),G=J(q),ie=u(G,2);{var oe=de=>{var Ce=Xl();ke("click",Ce,w),_(de,Ce)};O(ie,de=>{a(l)&&de(oe)})}S(de=>G.disabled=de,[()=>!a(d)()],we),ke("click",G,y),_(T,q)},ge=T=>{var q=Me(),G=J(q);{var ie=oe=>{var de=Me(),Ce=J(de);se(Ce,1,()=>a(c),ne,(he,ue)=>{var _e=Zl(),ve=o(_e);S(()=>D(ve,a(ue).action.title)),ke("click",_e,()=>x(a(ue))),_(he,_e)}),_(oe,de)};O(G,oe=>{a(c)&&a(c).length&&oe(ie)},!0)}_(T,q)};O(pe,T=>{a(v)&&a(v).selectables.length||a(p)&&a(p).selectables?T(me):T(ge,!1)})}var k=u(U,2),R=o(k);Gs(R,{get log(){return t().log}});var L=u(R,2);Bl(L,{get cell(){return t().view.infoBoardCell}});var re=u(X,2),F=o(re),W=u(re,2);hl(W,{get modalController(){return t().view.modalController}}),S(T=>D(F,T),[()=>t().clock.toString()],we),_(e,I),Ke()}var to=h("<div></div>"),ro=h('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),ao=h('<li class="deck_editor_item svelte-vivzk2"><div role="listitem"><div class="svelte-vivzk2"><div class="svelte-vivzk2"> </div> <div style="display:flex" class="svelte-vivzk2"><div class="svelte-vivzk2"><!> <!> <!> <!> <!> <!> <!></div> <div style="flex-grow: 1; width:0.1rem" class="svelte-vivzk2"></div> <div class="svelte-vivzk2"><!></div></div></div></div> <button class="button_style_reset svelte-vivzk2" title="※shiftキー同時押しで一括投入">+</button> <button class="button_style_reset svelte-vivzk2" title="※shiftキー同時押しで一括外し">-</button></li>'),io=h('<div class="deck_editor_card_kind svelte-vivzk2"><span class="svelte-vivzk2"> </span> <ul class="svelte-vivzk2"></ul></div>'),no=h('<div class="deck_editor_deck_type svelte-vivzk2"><span class="svelte-vivzk2"> </span> <!></div>'),so=h('<div class="svelte-vivzk2">読み込み中...</div>'),lo=h('<div class="deck_editor_card_list svelte-vivzk2"><!></div>');function Na(e,r){We(r,!1);let t=Te(r,"allCardInfos",8),i=Te(r,"deckCardInfos",12),n=Te(r,"mode",8),s=Te(r,"onAttention",8),c=Te(r,"searchCondition",8,void 0);const v={Deck:["Monster","Spell","Trap"],ExtraDeck:["Monster"]},p={Deck:{Monster:[],Spell:[],Trap:[]},ExtraDeck:{Monster:[],Spell:[],Trap:[]}},d=y=>{Object.values(p).forEach(w=>Object.values(w).forEach(x=>x.reset())),y.filter(w=>w.isImplemented).filter(w=>w.kind!=="XyzMaterial").forEach(w=>{var M;if(w.kind==="XyzMaterial")return;const x=(M=w.monsterCategories)!=null&&M.union(Ei).length?"ExtraDeck":"Deck";p[x][w.kind].push(w)}),Object.values(p).forEach(w=>Object.values(w).forEach(x=>x.sort(jr)))},l=n()==="List"?new Promise(y=>{d(t()),y()}):Promise.resolve(),m=()=>(n()==="Deck"&&d(i()),p),f=(y,w)=>{try{if(y.ctrlKey){i().push(w);return}const x=i().filter(I=>I.name===w.name).length;if(x>2)return;const M=y.shiftKey?3-x:1;if(M<1)return;i().push(...Array(M).fill(w))}finally{i().sort(jr),i(i())}},g=(y,w)=>{let x=0;i(i().filter(M=>M.name!==w.name?!0:(x++,!y.shiftKey&&x>1))),i().sort(jr)},b=y=>{if(!c())return!0;if(!c().cardKinds.includes(y.kind)||c().name.trim().length&&!y.name.includes(c().name)||y.isForTest&&!c().others.includes("test"))return!1;if(y.kind==="Monster")return y.attributes&&!c().monsterAttributes.union(y.attributes).length||y.types&&!c().monsterTypes.union(y.types).length||!y.monsterCategories?!1:y.monsterCategories.union(c().monsterCategories).length;if(y.kind==="Spell")return y.spellCategory&&c().spellCategories.includes(y.spellCategory);if(y.kind==="Trap")return y.trapCategory&&c().trapCategories.includes(y.trapCategory)};Ze();var $=lo(),E=o($);Bt(E,()=>l,y=>{var w=so();_(y,w)},y=>{var w=Me();const x=we(m);var M=J(w);se(M,1,()=>Ti,ne,(I,X)=>{var le=no(),B=o(le),ae=o(B),te=u(B,2);se(te,1,()=>Ya(a(x)[a(X)]).filter(U=>v[a(X)].includes(U)),ne,(U,Ee)=>{var K=io(),Y=o(K),z=o(Y),P=u(Y,2);se(P,5,()=>a(x)[a(X)][a(Ee)].filter(b),ne,(Q,j)=>{var pe=ao(),me=o(pe),ge=o(me),k=o(ge),R=o(k),L=u(k,2),re=o(L),F=o(re);{var W=C=>{var A=$t();S(()=>D(A,`★${a(j).level??""}`)),_(C,A)};O(F,C=>{a(j).level&&C(W)})}var T=u(F,2);{var q=C=>{var A=$t();S(()=>D(A,`☆${a(j).rank??""}`)),_(C,A)};O(T,C=>{a(j).rank&&C(q)})}var G=u(T,2);se(G,1,()=>a(j).attributes??[],ne,(C,A)=>{var H=to();S(()=>xe(H,`monster_attr ${a(A)??""} svelte-vivzk2`)),_(C,H)});var ie=u(G,2);se(ie,1,()=>a(j).types??[],ne,(C,A)=>{var H=$t();S(()=>D(H,sr[a(A)])),_(C,H)});var oe=u(ie,2);se(oe,1,()=>a(j).monsterCategories??[],ne,(C,A)=>{var H=$t();S(()=>D(H,lr[a(A)])),_(C,H)});var de=u(oe,2);{var Ce=C=>{var A=$t();S(()=>D(A,`${or[a(j).spellCategory]??""}魔法`)),_(C,A)};O(de,C=>{a(j).spellCategory!==void 0&&C(Ce)})}var he=u(de,2);{var ue=C=>{var A=$t();S(()=>D(A,`${vr[a(j).trapCategory]??""}罠`)),_(C,A)};O(he,C=>{a(j).trapCategory!==void 0&&C(ue)})}var _e=u(re,4),ve=o(_e);{var Ae=C=>{var A=ro(),H=J(A),ye=o(H),ce=u(H,2),fe=o(ce);S(()=>{D(ye,a(j).attack??"?"),D(fe,a(j).defense??"?")}),_(C,A)};O(ve,C=>{a(j).kind==="Monster"&&C(Ae)})}var $e=u(me,2),Re=u($e,2);S(C=>{xe(me,`${C??""} svelte-vivzk2`),D(R,a(j).name)},[()=>{var C,A;return`deck_editor_card duel_card ${a(j).kind} ${(A=(C=a(j))==null?void 0:C.monsterCategories)==null?void 0:A.join(" ")} ${a(j).isImplemented?"is_implemented":"is_not_implemented"}`}],we),ke("mouseenter",me,()=>s()(a(j))),ke("click",$e,C=>f(C,a(j))),ke("click",Re,C=>g(C,a(j))),_(Q,pe)}),S(()=>D(z,`${Ra[a(Ee)]??""}（${a(x)[a(X)][a(Ee)].length??""}枚）`)),_(U,K)}),S(U=>D(ae,`${Mi[a(X)]??""}（${U??""}枚）`),[()=>Object.values(a(x)[a(X)]).flatMap(U=>U).length],we),_(I,le)}),_(y,w)}),_(e,$),Ke()}var oo=h('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),vo=h('<div></div> <div class="svelte-rccxcp"> </div>',1),co=h("<div> </div>"),uo=h("<div> </div>"),fo=h('<div class="duel_card_info_row svelte-rccxcp"><!> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),_o=h('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),po=h('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),mo=h('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),go=h('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),ho=h('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!></div></div>');function yo(e,r){We(r,!1);let t=Te(r,"cardInfo",8,void 0);const i=()=>t()?zt[t().name]:void 0;Ze();var n=Me(),s=J(n);{var c=v=>{var p=ho(),d=o(p),l=o(d),m=o(l),f=o(m),g=u(l,2),b=o(g),$=o(b),E=u(b,2),y=o(E),w=u(d,2),x=o(w);{var M=z=>{var P=oo(),Q=J(P),j=o(Q),pe=o(j),me=o(pe),ge=u(Q,2),k=o(ge),R=o(k),L=u(k,2),re=o(L);S(()=>{D(me,zt[t().name].pendulumDescription),D(R,`◀ ${t().pendulumScaleL??""}`),D(re,`${t().pendulumScaleR??""} ▶`)}),_(z,P)};O(x,z=>{var P;(P=t().monsterCategories)!=null&&P.includes("Pendulum")&&z(M)})}var I=u(x,2);{var X=z=>{var P=fo(),Q=J(P),j=o(Q);{var pe=R=>{var L=vo(),re=J(L),F=u(re,2),W=o(F);S(()=>{xe(re,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),D(W,`${ea[t().attributes[0]]??""}属性`)}),_(R,L)};O(j,R=>{t().attributes&&R(pe)})}var me=u(j,2);{var ge=R=>{var L=co(),re=o(L);S(()=>{xe(L,`monster_cat ${t().types[0]??""} svelte-rccxcp`),D(re,`${sr[t().types[0]]??""}${Sr[t().types[0]]??""}族`)}),_(R,L)};O(me,R=>{t().types&&R(ge)})}var k=u(Q,2);se(k,5,()=>t().monsterCategories??[],ne,(R,L)=>{var re=uo(),F=o(re);S(()=>{xe(re,`monster_cat ${a(L)??""} svelte-rccxcp`),D(F,`${lr[a(L)]??""}${Er[a(L)]??""}`)}),_(R,re)}),_(z,P)},le=z=>{var P=Me(),Q=J(P);{var j=me=>{var ge=_o(),k=u(o(ge),2),R=o(k);S(()=>D(R,`${or[t().spellCategory]??""}魔法`)),_(me,ge)},pe=me=>{var ge=Me(),k=J(ge);{var R=L=>{var re=po(),F=u(o(re),2),W=o(F);S(()=>D(W,`${vr[t().trapCategory]??""}罠`)),_(L,re)};O(k,L=>{t().kind==="Trap"&&t().trapCategory&&L(R)},!0)}_(me,ge)};O(Q,me=>{t().kind==="Spell"&&t().spellCategory?me(j):me(pe,!1)},!0)}_(z,P)};O(I,z=>{t().kind==="Monster"?z(X):z(le,!1)})}var B=u(I,2),ae=o(B),te=o(ae),U=o(te),Ee=u(B,2);{var K=z=>{var P=mo();_(z,P)},Y=z=>{var P=go(),Q=o(P),j=u(Q,2),pe=o(j);S(me=>{ht(Q,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),ht(j,"href",me),D(pe,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>qi(t())],we),_(z,P)};O(Ee,z=>{t().isForTest?z(K):z(Y,!1)})}S((z,P,Q,j)=>{xe(p,`duel_card duel_card_info ${t().kind??""} ${z??""} svelte-rccxcp`),D(f,t().name),D($,P),D(y,Q),D(U,j)},[()=>{var z;return(z=t().monsterCategories)==null?void 0:z.join(" ")},()=>"★".repeat(t().level||0),()=>"☆".repeat(t().rank||0),()=>{var z;return(z=i())==null?void 0:z.description}],we),_(v,p)};O(s,v=>{t()&&v(c)})}_(e,n),Ke()}const bo={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class wo{constructor(){Ue(this,"DefaultSeparator1","/");Ue(this,"DefaultSeparator2"," ");Ue(this,"DefaultSeparator3",":");Ue(this,"createDate",r=>{if(!r)return;const t=new Date(r);if(!isNaN(t.getTime()))return t});Ue(this,"createDateOr",(r,t)=>this.createDate(r)||t||new Date);Ue(this,"truncateDate",r=>{const t=r||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});Ue(this,"addDate",(r,t)=>{const i=this.createDateOr(r);return i.setDate(i.getDate()+t),i});Ue(this,"addMonth",(r,t)=>{const i=this.createDateOr(r);return i.setMonth(i.getMonth()+t),i});Ue(this,"addYear",(r,t)=>{const i=this.createDateOr(r);return i.setFullYear(i.getFullYear()+t),i});Ue(this,"getDayOfWeek",(r,t="dddd")=>{const i=this.createDate(r);return i?bo[i.getDay()][t]:""});Ue(this,"formatToYYYYMMDD",(r,t=this.DefaultSeparator1)=>{const i=this.createDate(r);if(!i)return"";const n=i.getFullYear().toString(),s=("0"+(i.getMonth()+1)).slice(-2),c=("0"+i.getDate()).slice(-2);return n+t+s+t+c});Ue(this,"formatToYYYYMM",(r,t=this.DefaultSeparator1)=>{const i=this.createDate(r);if(!i)return"";t||(t="");const n=i.getFullYear().toString(),s=("0"+(i.getMonth()+1)).slice(-2);return n+t+s});Ue(this,"formatToHHMMSS",(r,t=this.DefaultSeparator3)=>{const i=this.createDate(r);if(!i)return"";t||(t="");const n=i.getHours(),s=i.getMinutes(),c=i.getSeconds();return("0"+n).slice(-2)+t+("0"+s).slice(-2)+t+("0"+c).slice(-2)});Ue(this,"formatToHHMM",(r,t=this.DefaultSeparator3)=>{const i=this.createDate(r);if(!i)return"";t||(t="");const n=("0"+i.getHours()).slice(-2),s=("0"+i.getMinutes()).slice(-2);return n+t+s});Ue(this,"formatToYYYYMMDD_HHMM",(r,t=this.DefaultSeparator1,i=this.DefaultSeparator2,n=this.DefaultSeparator3)=>{const s=this.createDate(r);return s?this.formatToYYYYMMDD(s,t)+i+this.formatToHHMM(s,n):""});Ue(this,"formatToYYYYMMDD_HHMMSS",(r,t=this.DefaultSeparator1,i=this.DefaultSeparator2,n=this.DefaultSeparator3)=>{const s=this.createDate(r);return s?this.formatToYYYYMMDD(s,t)+i+this.formatToHHMMSS(s,n):""})}}const nt=new wo;Date.prototype.truncateDate=function(){return nt.truncateDate(this)};Date.prototype.getCloneOr=function(e){return nt.createDateOr(this,e)};Date.prototype.addDate=function(e){return nt.addDate(this,e)};Date.prototype.addMonth=function(e){return nt.addDate(this,e)};Date.prototype.addYear=function(e){return nt.addDate(this,e)};Date.prototype.getDayOfWeek=function(e="dddd"){return nt.getDayOfWeek(this,e)};Date.prototype.formatToYYYYMM=function(e){return nt.formatToYYYYMM(this,e)};Date.prototype.formatToYYYYMMDD=function(e){return nt.formatToYYYYMMDD(this,e)};Date.prototype.formatToYYYYMMDD_HHMM=function(e,r,t){return nt.formatToYYYYMMDD_HHMM(this,e,r,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(e,r,t){return nt.formatToYYYYMMDD_HHMMSS(this,e,r,t)};Date.prototype.formatToHHMM=function(e){return nt.formatToHHMM(this,e)};Date.prototype.formatToHHMMSS=function(e){return nt.formatToHHMMSS(this,e)};var ko=h('<label><input type="checkbox"> </label>'),xo=h('<label><input type="checkbox"> </label>'),Co=h('<label><input type="checkbox"> <div style="display: inline-block;"></div> </label>'),Do=h('<label><input type="checkbox"> </label>'),So=h('<div class="deck_editor_search_box_row svelte-11z65w9"><div class="svelte-11z65w9"><button class="search_condition_title black_button svelte-11z65w9">モンスター</button></div> <div class="svelte-11z65w9"></div></div> <div class="deck_editor_search_box_row svelte-11z65w9"><div class="svelte-11z65w9"><button class="search_condition_title black_button svelte-11z65w9">属性</button></div> <div class="svelte-11z65w9"></div></div> <div class="deck_editor_search_box_row svelte-11z65w9"><div class="svelte-11z65w9"><button class="search_condition_title black_button svelte-11z65w9">種族</button></div> <div class="svelte-11z65w9"></div></div>',1),Eo=h('<label><input type="checkbox"> </label>'),Mo=h('<div class="deck_editor_search_box_row svelte-11z65w9"><div class="svelte-11z65w9"><button class="search_condition_title black_button svelte-11z65w9">魔法</button></div> <div class="svelte-11z65w9"></div></div>'),To=h('<label><input type="checkbox"> </label>'),qo=h('<div class="deck_editor_search_box_row svelte-11z65w9"><div class="svelte-11z65w9"><button class="search_condition_title black_button svelte-11z65w9">罠</button></div> <div class="svelte-11z65w9"></div></div>'),$o=h('<label><input type="checkbox"> </label>'),Ao=h("<option> </option>"),zo=h('<div class="svelte-11z65w9"><a class="white_button svelte-11z65w9" download="SVS_DeckInfos.json">ダウンロード</a></div>'),Io=h('<div class="svelte-11z65w9"></div>'),No=h('<div class="svelte-11z65w9"><a class="white_button svelte-11z65w9" download="SVS_DeckInfos.json">ダウンロード（一括）</a></div>'),Oo=h('<div class="svelte-11z65w9"></div>'),Yo=h('<div class="deck_editor_body_right_header svelte-11z65w9"><div class="deck_editor_body_right_header_row svelte-11z65w9"><div class="svelte-11z65w9">編集対象 <select></select></div> <div class="svelte-11z65w9"></div> <div class="svelte-11z65w9">新規名称 <input type="text"></div></div> <div class="deck_editor_body_right_header_row svelte-11z65w9"></div> <div class="deck_editor_body_right_header_row svelte-11z65w9"><div class="svelte-11z65w9">基本操作</div> <div class="svelte-11z65w9"><button class="white_button svelte-11z65w9">デッキを保存</button></div> <div class="svelte-11z65w9"></div> <div class="svelte-11z65w9"><button class="white_button svelte-11z65w9">デッキを複製</button></div> <div class="svelte-11z65w9"><button class="white_button svelte-11z65w9" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-11z65w9"><div class="svelte-11z65w9">DL/UL</div> <!> <!></div></div> <!>',1),Ro=h("<div>デッキ情報読込中</div>"),jo=h('<div class="deck_editor svelte-11z65w9"><div class="deck_editor_header"></div> <div class="deck_editor_body svelte-11z65w9"><div class="deck_editor_body_left svelte-11z65w9"><div role="contentinfo"><div class="deck_editor_search_box_header svelte-11z65w9"><div>検索条件</div> <div><button class="white_button svelte-11z65w9">条件クリア</button></div></div> <div class="deck_editor_search_box_row svelte-11z65w9"><div class="svelte-11z65w9">名称</div> <div class="svelte-11z65w9"><input type="text" style="width:70%">※ルビには対応していません</div></div> <div class="deck_editor_search_box_row svelte-11z65w9"><div class="svelte-11z65w9"><button class="search_condition_title black_button svelte-11z65w9">種類</button></div> <div class="svelte-11z65w9"></div></div> <!> <!> <!> <div class="deck_editor_search_box_row svelte-11z65w9"><div class="svelte-11z65w9"><button class="search_condition_title black_button svelte-11z65w9">その他</button></div> <div class="svelte-11z65w9"></div></div></div> <!></div> <div class="deck_editor_body_center svelte-11z65w9"><!></div> <div class="deck_editor_body_right svelte-11z65w9"><!></div></div></div>');function Lo(e,r){We(r,!1);const t=[],i=[],n=[],s=[],c=[],v=[],p=[],d={name:"",cardKinds:fa.filter(C=>C!=="XyzMaterial"),monsterCategories:[...ha],monsterAttributes:[...ga],monsterTypes:[...ma],spellCategories:[...pa],trapCategories:[..._a],others:["test"]},l=Se(structuredClone(d));Ne(l,a(l).others=[]);let m=Se("SearchCondition");const f=async()=>{Ne(l,a(l).name=""),Ne(l,a(l).cardKinds=[]),Ne(l,a(l).monsterCategories=[]),Ne(l,a(l).monsterAttributes=[]),Ne(l,a(l).monsterTypes=[]),Ne(l,a(l).spellCategories=[]),Ne(l,a(l).trapCategories=[]),Ne(l,a(l).others=[])},g=async C=>{Array.isArray(a(l)[C])&&Array.isArray(d[C])&&Ne(l,a(l)[C]=a(l)[C].length?[]:[...d[C]])},b=(C,A,H)=>{Array.isArray(a(l)[A])&&Array.isArray(d[A])&&Ne(l,a(l)[A]=[H])},$=async()=>{const A=(await a(w)).find(H=>H.id===a(y));A&&N(I,{...A,cardInfos:A.cardNames.map(H=>zt[H])})},E=()=>xt.getAllDeckInfo().then(C=>(N(y,(C.find(A=>A.lastUsedAt.getTime()===Math.max(...C.map(H=>H.lastUsedAt.getTime())))??C[0]).id),C));let y=Se(-1),w=Se(E()),x=Se(a(w).then(C=>xt.convertToObjectURL(C)));a(w).then($);const M=()=>{N(w,E()),N(x,a(w).then(C=>xt.convertToObjectURL(C))),$()};let I=Se({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),X=Se(zt.ゾンビーノ);const le=C=>{N(m,"CardDetail"),N(X,C)},B=async()=>{const A=(await a(w)).find(H=>H.id===a(y));if(!A)throw new Error("illegal state");return A},ae=async()=>{const C=await B();await C.saveDeckInfo({...C,name:a(I).name,cardNames:a(I).cardInfos.map(A=>A.name),lastUsedAt:new Date}),M()},te=async()=>{(await xt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,a(I).cardInfos.map(A=>A.name))).saveDeckInfo(),M()},U=async C=>{const A=await B();!C.shiftKey&&!confirm(`デッキ【${A.name}】を削除します。
よろしいですか？`)||(await A.delete(),M())};Ze();var Ee=jo(),K=u(o(Ee),2),Y=o(K),z=o(Y),P=o(z),Q=u(o(P),2),j=o(Q),pe=u(P,2),me=u(o(pe),2),ge=o(me),k=u(pe,2),R=o(k),L=o(R),re=u(R,2);se(re,5,()=>fa.filter(C=>C!=="XyzMaterial"),ne,(C,A)=>{var H=ko(),ye=o(H),ce,fe=u(ye);S(()=>{ce!==(ce=a(A))&&(ye.value=(ye.__value=a(A))==null?"":a(A)),D(fe,` ${Ra[a(A)]??""}`)}),qt(t,[],ye,()=>(a(A),a(l).cardKinds),V=>Ne(l,a(l).cardKinds=V)),_(C,H)});var F=u(k,2);{var W=C=>{var A=So(),H=J(A),ye=o(H),ce=o(ye),fe=u(ye,2);se(fe,5,()=>ha,ne,(Pe,Oe)=>{var st=xo(),Fe=o(st),lt,wt=u(Fe);S(()=>{lt!==(lt=a(Oe))&&(Fe.value=(Fe.__value=a(Oe))==null?"":a(Oe)),D(wt,` ${lr[a(Oe)]??""}${Er[a(Oe)]??""}`)}),qt(i,[],Fe,()=>(a(Oe),a(l).monsterCategories),Ye=>Ne(l,a(l).monsterCategories=Ye)),_(Pe,st)});var V=u(H,2),Z=o(V),ee=o(Z),be=u(Z,2);se(be,5,()=>ga,ne,(Pe,Oe)=>{var st=Co(),Fe=o(st),lt,wt=u(Fe,2),Ye=u(wt);S(()=>{lt!==(lt=a(Oe))&&(Fe.value=(Fe.__value=a(Oe))==null?"":a(Oe)),xe(wt,`monster_attr ${a(Oe)??""} svelte-11z65w9`),D(Ye,` ${ea[a(Oe)]??""}`)}),qt(n,[],Fe,()=>(a(Oe),a(l).monsterAttributes),Qe=>Ne(l,a(l).monsterAttributes=Qe)),_(Pe,st)});var De=u(V,2),qe=o(De),He=o(qe),Le=u(qe,2);se(Le,5,()=>ma,ne,(Pe,Oe)=>{var st=Do(),Fe=o(st),lt,wt=u(Fe);S(()=>{lt!==(lt=a(Oe))&&(Fe.value=(Fe.__value=a(Oe))==null?"":a(Oe)),D(wt,` ${sr[a(Oe)]??""}
                  ${Sr[a(Oe)]??""}`)}),qt(s,[],Fe,()=>(a(Oe),a(l).monsterTypes),Ye=>Ne(l,a(l).monsterTypes=Ye)),ke("dblclick",st,Ye=>b(Ye,"monsterTypes",a(Oe))),_(Pe,st)}),ke("click",ce,()=>g("monsterCategories")),et(3,H,()=>Pt,()=>({delay:0,duration:100})),ke("click",ee,()=>g("monsterAttributes")),et(3,V,()=>Pt,()=>({delay:0,duration:100})),ke("click",He,()=>g("monsterTypes")),et(3,De,()=>Pt,()=>({delay:0,duration:100})),_(C,A)};O(F,C=>{a(l).cardKinds.includes("Monster")&&C(W)})}var T=u(F,2);{var q=C=>{var A=Mo(),H=o(A),ye=o(H),ce=u(H,2);se(ce,5,()=>pa,ne,(fe,V)=>{var Z=Eo(),ee=o(Z),be,De=u(ee);S(()=>{be!==(be=a(V))&&(ee.value=(ee.__value=a(V))==null?"":a(V)),D(De,` ${or[a(V)]??""}`)}),qt(c,[],ee,()=>(a(V),a(l).spellCategories),qe=>Ne(l,a(l).spellCategories=qe)),_(fe,Z)}),ke("click",ye,()=>g("spellCategories")),et(3,A,()=>Pt,()=>({delay:0,duration:100})),_(C,A)};O(T,C=>{a(l).cardKinds.includes("Spell")&&C(q)})}var G=u(T,2);{var ie=C=>{var A=qo(),H=o(A),ye=o(H),ce=u(H,2);se(ce,5,()=>_a,ne,(fe,V)=>{var Z=To(),ee=o(Z),be,De=u(ee);S(()=>{be!==(be=a(V))&&(ee.value=(ee.__value=a(V))==null?"":a(V)),D(De,` ${vr[a(V)]??""}`)}),qt(v,[],ee,()=>(a(V),a(l).trapCategories),qe=>Ne(l,a(l).trapCategories=qe)),_(fe,Z)}),ke("click",ye,()=>g("trapCategories")),et(3,A,()=>Pt,()=>({delay:0,duration:100})),_(C,A)};O(G,C=>{a(l).cardKinds.includes("Trap")&&C(ie)})}var oe=u(G,2),de=o(oe),Ce=o(de),he=u(de,2);se(he,4,()=>[{key:"test",text:"テスト用カードを表示する"}],ne,(C,A)=>{var H=$o(),ye=o(H),ce,fe=u(ye);S(()=>{ce!==(ce=A.key)&&(ye.value=(ye.__value=A.key)==null?"":A.key),D(fe,` ${A.text??""}`)}),qt(p,[],ye,()=>(A.key,a(l).others),V=>Ne(l,a(l).others=V)),_(C,H)});var ue=u(z,2);yo(ue,{get cardInfo(){return a(X)}});var _e=u(Y,2),ve=o(_e);const Ae=we(()=>Object.values(zt));Na(ve,{mode:"List",get allCardInfos(){return a(Ae)},onAttention:le,get searchCondition(){return a(l)},get deckCardInfos(){return a(I).cardInfos},set deckCardInfos(C){Ne(I,a(I).cardInfos=C)},$$legacy:!0});var $e=u(_e,2),Re=o($e);Bt(Re,()=>a(w),C=>{var A=Ro();_(C,A)},(C,A)=>{var H=Yo(),ye=J(H),ce=o(ye),fe=o(ce),V=u(o(fe));S(()=>{a(y),Zt(()=>{a(A)})}),se(V,5,()=>a(A),ne,(Ye,Qe)=>{var ot=Ao(),Yt={},Rr=o(ot);S(()=>{Yt!==(Yt=a(Qe).id)&&(ot.value=(ot.__value=a(Qe).id)==null?"":a(Qe).id),D(Rr,a(Qe).name)}),_(Ye,ot)});var Z=u(fe,4),ee=u(o(Z)),be=u(ce,4),De=u(o(be),2),qe=o(De),He=u(De,4),Le=o(He),Pe=u(He,2),Oe=o(Pe),st=u(be,2),Fe=u(o(st),2);Bt(Fe,B,Ye=>{var Qe=Io();_(Ye,Qe)},(Ye,Qe)=>{var ot=zo(),Yt=o(ot);S(Rr=>ht(Yt,"href",Rr),[()=>xt.convertToObjectURL([a(Qe)])],we),_(Ye,ot)});var lt=u(Fe,2);Bt(lt,()=>a(x),Ye=>{var Qe=Oo();_(Ye,Qe)},(Ye,Qe)=>{var ot=No(),Yt=o(ot);S(()=>ht(Yt,"href",a(Qe))),_(Ye,ot)});var wt=u(ye,2);Na(wt,{mode:"Deck",allCardInfos:[],onAttention:le,get deckCardInfos(){return a(I).cardInfos},set deckCardInfos(Ye){Ne(I,a(I).cardInfos=Ye)},$$legacy:!0}),er(V,()=>a(y),Ye=>N(y,Ye)),ke("change",V,$),Jr(ee,()=>a(I).name,Ye=>Ne(I,a(I).name=Ye)),ke("click",qe,ae),ke("click",Le,te),ke("click",Oe,U),_(C,H)}),S(()=>xe(z,`deck_editor_search_box ${(a(m)==="SearchCondition"?"":"minimum")??""} svelte-11z65w9`)),ke("click",j,f),Jr(ge,()=>a(l).name,C=>Ne(l,a(l).name=C)),ke("click",L,()=>g("cardKinds")),ke("click",Ce,()=>g("others")),et(3,oe,()=>Pt,()=>({delay:0,duration:100})),ke("mouseenter",z,()=>N(m,"SearchCondition")),_(e,Ee),Ke()}const Po="2025-05-05 21:05:57",Fo={timestamp:Po},Uo=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],Ho=3;var Bo=h("<option> </option>"),Wo=h("<option> </option>"),Ko=h("<option> </option>"),Vo=h("<option> </option>"),Go=h('<div class="svelte-1tmphfm"><label for="deck_selector" class="deck_selector svelte-1tmphfm">デッキ：</label> <select id="deck_selector" class="deck_selector svelte-1tmphfm"></select></div> <div class="svelte-1tmphfm"><label for="npc_selector" class="npc_selector svelte-1tmphfm">対戦相手：</label> <select id="npc_selector" class="npc_selector svelte-1tmphfm"></select> <div> </div></div> <div class="svelte-1tmphfm"><label for="npc_deck_selector" class="deck_selector svelte-1tmphfm">対戦相手のデッキ：</label> <select id="npc_deck_selector" class="deck_selector svelte-1tmphfm"><option>デフォルト</option><!></select></div> <div class="svelte-1tmphfm"><label for="npc_selector" class="npc_selector svelte-1tmphfm">先攻後攻：</label> <select id="npc_selector" class="npc_selector svelte-1tmphfm"></select></div> <div class="svelte-1tmphfm"><button class="btn svelte-1tmphfm">duel start!</button></div>',1),Xo=h('<div class="svelte-1tmphfm">デッキ情報の読み込み、もしくは作成中...</div>'),Qo=h('<div class="svelte-1tmphfm"><label for="duelist_name" class="duelist_name svelte-1tmphfm">名前：</label> <input id="duelist_name" class="duelist_name svelte-1tmphfm" type="text"></div> <!> <div class="svelte-1tmphfm"><button class="btn svelte-1tmphfm">deck edit</button></div>',1),Zo=h('<div class="svelte-1tmphfm">デュエリスト情報の読み込み、もしくは作成中...</div>'),Jo=h('<div class="app_body svelte-1tmphfm"><!></div>'),ev=h('<div class="result_title result_win svelte-1tmphfm">YOU WIN</div>'),tv=h('<div class="result_title result_lose svelte-1tmphfm">YOU LOSE</div>'),rv=h('<div class="result_title result_draw svelte-1tmphfm">DRAW</div>'),av=h('<div class="result svelte-1tmphfm"><!> <button class="white_button svelte-1tmphfm">TOPへ戻る</button></div>'),iv=h('<main class="svelte-1tmphfm"><div class="link link_left svelte-1tmphfm"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-1tmphfm">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-1tmphfm">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-1tmphfm">posfie(toggeter)</a></div> <div class="link link_right svelte-1tmphfm"><a class="a_button svelte-1tmphfm" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-1tmphfm">現時点とこの先のこと</a></div> <!> <div class="debug_info svelte-1tmphfm"><span> </span> <span class="user_agent_info"> </span> <span class="screen_info"></span></div> <!></main>');function nv(e,r){We(r,!1);const t=new $i("stk_ygo_svelte",Ho,Uo);let i=Se(),n=Se("None"),s=Se(0);const c=Ai.getOrCreateNew(t);let v=Se(xt.getAllDeckInfo(t).then(K=>(Promise.all(K.filter(Y=>!Y.lastUsedAt).map(Y=>{Y.saveDeckInfo()})),N(s,(K.find(Y=>Y.lastUsedAt.getTime()===Math.max(...K.map(z=>z.lastUsedAt.getTime())))??K[0]).id),K)));const p=async()=>{let K=(await a(v)).find(Y=>Y.id===a(s));if(K||(K=(await l()).find(Y=>Y.id===a(s))),!K)throw new Error("illegal state");return K},d=async()=>{(await c).save()},l=()=>(N(v,xt.getAllDeckInfo(t).then(K=>(N(s,(K.find(Y=>Y.lastUsedAt.getTime()===Math.max(...K.map(z=>z.lastUsedAt.getTime())))??K[0]).id),K))),a(v)),m=async()=>{(await a(v)).length||(await xt.prepareSampleDeck(),l())},f=async()=>{await Promise.all([d(),m()]);const K=await p(),Y=await c;await K.updateTimestamp();const z=Lr.find(Q=>Q.id===Y.previousNpcId);let P=ba.slice(-1)[0];z&&(Y.previousNpcDeckId>-1?P=(await a(v)).find(Q=>Q.id===Y.previousNpcDeckId)??P:z.id===-1&&(P=ba.find(Q=>Q.id===-1)??P),N(i,new Ii(Y,"Player",K,[],z,"NPC",P,[],Y.previousStartMode)),a(i).onDuelEnd.append(()=>(N(i,a(i)),"RemoveMe")))},g=async()=>{await Promise.all([d(),m()]),N(n,"DeckEdit")},b=async K=>{await d(),K.key==="Enter"&&!K.repeat&&(await c).save()},$=()=>{N(v,l()),N(i,void 0),N(n,"None")};m(),Ze();var E=iv(),y=u(o(E),2),w=o(y),x=u(y,2);{var M=K=>{eo(K,{get duel(){return a(i)}})},I=K=>{var Y=Me(),z=J(Y);{var P=j=>{Lo(j,{})},Q=j=>{var pe=Jo(),me=o(pe);Bt(me,()=>c,ge=>{var k=Zo();_(ge,k)},(ge,k)=>{var R=Qo(),L=J(R),re=u(o(L),2),F=u(L,2);Bt(F,()=>a(v),q=>{var G=Xo();_(q,G)},(q,G)=>{var ie=Go(),oe=J(ie),de=u(o(oe),2);S(()=>{a(s),Zt(()=>{a(G)})}),se(de,5,()=>a(G),ne,(ce,fe)=>{var V=Bo(),Z={},ee=o(V);S(()=>{Z!==(Z=a(fe).id)&&(V.value=(V.__value=a(fe).id)==null?"":a(fe).id),D(ee,a(fe).name)}),_(ce,V)});var Ce=u(oe,2),he=u(o(Ce),2);S(()=>{a(k),Zt(()=>{})}),se(he,5,()=>Lr,ne,(ce,fe)=>{var V=Wo(),Z={},ee=o(V);S(()=>{Z!==(Z=a(fe).id)&&(V.value=(V.__value=a(fe).id)==null?"":a(fe).id),D(ee,a(fe).name)}),_(ce,V)});var ue=u(he,2),_e=o(ue),ve=u(Ce,2),Ae=u(o(ve),2);S(()=>{a(k),Zt(()=>{a(G)})});var $e=o(Ae);$e.value=($e.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Re=u($e);se(Re,1,()=>a(G),ne,(ce,fe)=>{var V=Ko(),Z={},ee=o(V);S(()=>{Z!==(Z=a(fe).id)&&(V.value=(V.__value=a(fe).id)==null?"":a(fe).id),D(ee,a(fe).name)}),_(ce,V)});var C=u(ve,2),A=u(o(C),2);S(()=>{a(k),Zt(()=>{})}),se(A,5,()=>Ya(ya),ne,(ce,fe)=>{var V=Vo(),Z={},ee=o(V);S(()=>{Z!==(Z=a(fe))&&(V.value=(V.__value=a(fe))==null?"":a(fe)),D(ee,ya[a(fe)])}),_(ce,V)});var H=u(C,2),ye=o(H);S(ce=>D(_e,`※${ce??""}`),[()=>{var ce;return(ce=Lr.find(fe=>fe.id===a(k).previousNpcId))==null?void 0:ce.description}],we),er(de,()=>a(s),ce=>N(s,ce)),er(he,()=>a(k).previousNpcId,ce=>a(k).previousNpcId=ce),er(Ae,()=>a(k).previousNpcDeckId,ce=>a(k).previousNpcDeckId=ce),er(A,()=>a(k).previousStartMode,ce=>a(k).previousStartMode=ce),ke("click",ye,f),_(q,ie)});var W=u(F,2),T=o(W);Jr(re,()=>a(k).name,q=>a(k).name=q),ke("keypress",re,b),ke("click",T,g),_(ge,R)}),_(j,pe)};O(z,j=>{a(n)==="DeckEdit"?j(P):j(Q,!1)},!0)}_(K,Y)};O(x,K=>{a(i)?K(M):K(I,!1)})}var X=u(x,2),le=o(X),B=o(le),ae=u(le,2),te=o(ae),U=u(X,2);{var Ee=K=>{var Y=av(),z=o(Y);{var P=pe=>{var me=Me(),ge=J(me);{var k=L=>{var re=ev();_(L,re)},R=L=>{var re=Me(),F=J(re);{var W=T=>{var q=tv();_(T,q)};O(F,T=>{a(i).winner.seat==="Above"&&T(W)},!0)}_(L,re)};O(ge,L=>{a(i).winner.seat==="Below"?L(k):L(R,!1)})}_(pe,me)},Q=pe=>{var me=rv();_(pe,me)};O(z,pe=>{a(i).winner?pe(P):pe(Q,!1)})}var j=u(z,2);ke("click",j,$),et(3,Y,()=>cs,()=>({delay:200,duration:2e3})),_(K,Y)};O(U,K=>{a(i)&&a(i).isEnded&&K(Ee)})}S(()=>{D(B,`build at: ${Fo.timestamp}`),D(te,zi.text)}),ke("click",w,$),_(e,E),Ke()}Un(nv,{target:document.getElementById("app")});
