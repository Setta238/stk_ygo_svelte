var Ha=Object.defineProperty;var ha=o=>{throw TypeError(o)};var Pa=(o,i,t)=>i in o?Ha(o,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[i]=t;var Ze=(o,i,t)=>Pa(o,typeof i!="symbol"?i+"":i,t),ya=(o,i,t)=>i.has(o)||ha("Cannot "+t);var tt=(o,i,t)=>(ya(o,i,"read from private field"),t?t.call(o):i.get(o)),Ut=(o,i,t)=>i.has(o)?ha("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(o):i.set(o,t),aa=(o,i,t,v)=>(ya(o,i,"write to private field"),v?v.call(o,t):i.set(o,t),t);import{s as ka,r as Oa,a as S,b as La,l as Ra,g as e,d as Na,p as rt,c as Re,m as he,i as st,t as n,e as a,f as m,h as u,j as de,k as Ee,n as pt,o as be,q as r,u as it,v as Oe,S as Wa,w as Me,x as U,y as s,z as ie,D as St,A as ae,B as oe,C as f,E as Ka,F as at,G as oa,H as za,I as Va,J as Ga,K as Mt,L as ht,M as va,N as Xt,O as da,P as Qt,Q as ca,R as Zt,T as Jt,U as Xa,V as Qa,W as Za,X as Ja,Y as er,Z as tr,_ as ar,$ as Kt,a0 as yt,a1 as zt,a2 as ra,a3 as Ia,a4 as rr,a5 as sr,a6 as ir,a7 as nr,a8 as lr,a9 as ft,aa as or,ab as vr,ac as dr,ad as wa,ae as xa,af as Ca,ag as Da,ah as $a,ai as Sa,aj as At,ak as Yt,al as sa,am as Ma,an as cr,ao as Dt,ap as _r,aq as ur,ar as Ta,as as Et,at as $t,au as fr,av as pr,aw as gr,ax as mr,ay as ja,az as br,aA as hr}from"../chunk/entity_proc_20251215_085357.js";import"../chunk/card_json_20251215_085357.js";import"../chunk/others_json_20251215_085357.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))v(_);new MutationObserver(_=>{for(const c of _)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&v(h)}).observe(document,{childList:!0,subtree:!0});function t(_){const c={};return _.integrity&&(c.integrity=_.integrity),_.referrerPolicy&&(c.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?c.credentials="include":_.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function v(_){if(_.ep)return;_.ep=!0;const c=t(_);fetch(_.href,c)}})();const yr=o=>o;function _a(o){const i=o-1;return i*i*i+1}function qa(o){const i=typeof o=="string"&&o.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[o,"px"]}function kr(o,{delay:i=0,duration:t=400,easing:v=yr}={}){const _=+getComputedStyle(o).opacity;return{delay:i,duration:t,easing:v,css:c=>`opacity: ${c*_}`}}function wr(o,{delay:i=0,duration:t=400,easing:v=_a,x:_=0,y:c=0,opacity:h=0}={}){const d=getComputedStyle(o),E=+d.opacity,O=d.transform==="none"?"":d.transform,D=E*(1-h),[l,W]=qa(_),[F,K]=qa(c);return{delay:i,duration:t,easing:v,css:(z,A)=>`
			transform: ${O} translate(${(1-z)*l}${W}, ${(1-z)*F}${K});
			opacity: ${E-D*A}`}}function fe(o,{delay:i=0,duration:t=400,easing:v=_a,axis:_="y"}={}){const c=getComputedStyle(o),h=+c.opacity,d=_==="y"?"height":"width",E=parseFloat(c[d]),O=_==="y"?["top","bottom"]:["left","right"],D=O.map(Y=>`${Y[0].toUpperCase()}${Y.slice(1)}`),l=parseFloat(c[`padding${D[0]}`]),W=parseFloat(c[`padding${D[1]}`]),F=parseFloat(c[`margin${D[0]}`]),K=parseFloat(c[`margin${D[1]}`]),z=parseFloat(c[`border${D[0]}Width`]),A=parseFloat(c[`border${D[1]}Width`]);return{delay:i,duration:t,easing:v,css:Y=>`overflow: hidden;opacity: ${Math.min(Y*20,1)*h};${d}: ${Y*E}px;padding-${O[0]}: ${Y*l}px;padding-${O[1]}: ${Y*W}px;margin-${O[0]}: ${Y*F}px;margin-${O[1]}: ${Y*K}px;border-${O[0]}-width: ${Y*z}px;border-${O[1]}-width: ${Y*A}px;min-${d}: 0`}}function Ea(o,i){for(const t in i)o[t]=i[t];return o}function xr({fallback:o,...i}){const t=new Map,v=new Map;function _(h,d,E){const{delay:O=0,duration:D=C=>Math.sqrt(C)*30,easing:l=_a}=Ea(Ea({},i),E),W=h.getBoundingClientRect(),F=d.getBoundingClientRect(),K=W.left-F.left,z=W.top-F.top,A=W.width/F.width,Y=W.height/F.height,re=Math.sqrt(K*K+z*z),ne=getComputedStyle(d),Te=ne.transform==="none"?"":ne.transform,j=+ne.opacity;return{delay:O,duration:typeof D=="function"?D(re):D,easing:l,css:(C,V)=>`
			   opacity: ${C*j};
			   transform-origin: top left;
			   transform: ${Te} translate(${V*K}px,${V*z}px) scale(${C+(1-C)*A}, ${C+(1-C)*Y});
		   `}}function c(h,d,E){return(O,D)=>(h.set(D.key,O),()=>{if(d.has(D.key)){const l=d.get(D.key);return d.delete(D.key),_(l,O,D)}return h.delete(D.key),o&&o(O,D,E)})}return[c(v,t,!1),c(t,v,!0)]}function Aa(o){return Object.prototype.toString.call(o)==="[object Date]"}function Cr(o){return o}function ia(o){const i=o-1;return i*i*i+1}function na(o,i){if(o===i||o!==o)return()=>o;const t=typeof o;if(t!==typeof i||Array.isArray(o)!==Array.isArray(i))throw new Error("Cannot interpolate values of different type");if(Array.isArray(o)){const v=i.map((_,c)=>na(o[c],_));return _=>v.map(c=>c(_))}if(t==="object"){if(!o||!i)throw new Error("Object cannot be null");if(Aa(o)&&Aa(i)){const c=o.getTime(),d=i.getTime()-c;return E=>new Date(c+E*d)}const v=Object.keys(i),_={};return v.forEach(c=>{_[c]=na(o[c],i[c])}),c=>{const h={};return v.forEach(d=>{h[d]=_[d](c)}),h}}if(t==="number"){const v=i-o;return _=>o+_*v}return()=>i}var bt,Bt,Ft,Tt;const ua=class ua{constructor(i,t={}){Ut(this,bt,ka(void 0));Ut(this,Bt,ka(void 0));Ut(this,Ft);Ut(this,Tt,null);tt(this,bt).v=tt(this,Bt).v=i,aa(this,Ft,t)}static of(i,t){const v=new ua(i(),t);return Oa(()=>{v.set(i())}),v}set(i,t){var l;S(tt(this,Bt),i);let{delay:v=0,duration:_=400,easing:c=Cr,interpolate:h=na}={...tt(this,Ft),...t};if(_===0)return(l=tt(this,Tt))==null||l.abort(),S(tt(this,bt),i),Promise.resolve();const d=La.now()+v;let E,O=!1,D=tt(this,Tt);return aa(this,Tt,Ra(W=>{if(W<d)return!0;if(!O){O=!0;const K=tt(this,bt).v;E=h(K,i),typeof _=="function"&&(_=_(K,i)),D==null||D.abort()}const F=W-d;return F>_?(S(tt(this,bt),i),!1):(S(tt(this,bt),E(c(F/_))),!0)})),tt(this,Tt).promise}get current(){return e(tt(this,bt))}get target(){return e(tt(this,Bt))}set target(i){this.set(i)}};bt=new WeakMap,Bt=new WeakMap,Ft=new WeakMap,Tt=new WeakMap;let Vt=ua;var Dr=n('<div class="phase_display svelte-1ycsdg6"><span class="svelte-1ycsdg6"> </span> </div>'),$r=n('<div class="lifepoint_display svelte-1ycsdg6"><div class="svelte-1ycsdg6"> </div> <div class="svelte-1ycsdg6"> </div></div>'),Sr=(o,i,t)=>i(e(t)),Mr=n('<div class="svelte-1ycsdg6"><button class="phase_button svelte-1ycsdg6"> </button></div>'),Tr=n("<div><!></div>"),jr=n('<div class="svelte-1ycsdg6"><!></div>'),qr=n("<div><!></div>"),Er=n('<div class="config_button_wrapper svelte-1ycsdg6"><button id="config_button" class="svelte-1ycsdg6">⚙</button></div>'),Ar=n("<!> <!> <!> <!>",1),Yr=n('<div style="position: absolute;" class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Br=n('<div style="position: absolute; top:0rem" class="svelte-1ycsdg6">｛効果対象｝</div>'),Nr=n('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Ir=n(" <!> 】",1),Ur=n('<div style="position: absolute; bottom:0rem" class="svelte-1ycsdg6"> <!></div>'),Fr=n("<!> <!>",1),Hr=n('<div class="badge svelte-1ycsdg6"> </div>'),Pr=n('<div class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Or=n("<!> <!> <!> <!>",1),Lr=n('<td><div role="listitem"><!></div></td>');function Rr(o,i){rt(i,!1);let t=Re(i,"view",12),v=Re(i,"row",8),_=Re(i,"column",8),c=Re(i,"selectedEntities",28,()=>[]),h=Re(i,"selectedCells",28,()=>[]),d=he(t().getCell(v(),_())),E=he(new Vt(e(d).field.duel.duelists.Above.lp,{duration:400,easing:ia})),O=he(new Vt(e(d).field.duel.duelists.Below.lp,{duration:400,easing:ia}));const D=()=>{S(d,t().getCell(v(),_())),Oe(E,e(E).target=e(d).field.duel.duelists.Above.lp),Oe(O,e(O).target=e(d).field.duel.duelists.Below.lp)};e(d).onUpdate.append(D),t().onDuelUpdate.append(D),t().modalController.onUpdate.append(D);let l,W=he([]),F=()=>console.log("hoge"),K,z=he([]),A=he(!1),Y=he(!1),re=!1;const ne=$=>{var H,Q;S(ce,[]),c().reset(),l=$.activator,F=$.resolve,S(W,$.dummyActionInfos),S(z,$.chainBlockInfos.flatMap(ee=>ee.selectedEntities).getDistinct()),K=$.entitiesChoices,S(A,!1),S(Y,((H=$.cellsChoices)==null?void 0:H.selectables.includes(e(d)))??!1),re=e(Y)&&((Q=$.cellsChoices)==null?void 0:Q.qty)===1,D()};t().onWaitStart.append(ne);const Te=()=>{l=void 0,S(W,[]),F=()=>{console.log("hoge")},K=void 0,S(z,[]),S(A,!1),S(Y,!1),re=!1};t().onWaitEnd.append(Te);let j=he(!1),C=[];const V=$=>{C=$.filter(H=>H.dests.includes(e(d))),S(j,C.length>0),D()},se=()=>{C=[],S(j,!1),D()};t().onDragStart.append(V),t().onDragEnd.append(se);const[ye,J]=Gs;let ce=he([]);const Ue=$=>{if(l=void 0,e(d)===$.to||e(d).entities.includes($.entity)){S(ce,[...e(ce),$]);const H=$.resolve;S(d,e(d)),setTimeout(()=>{S(ce,e(ce).filter(Q=>Q!==$)),$.count++,$.count>1&&H()},600)}};t().onAnimation.append(Ue);const ke=$=>{F({phaseChange:$})},B=()=>e(d).isStackCell&&e(d).entities.flatMap($=>$.actions).filter($=>e(W).map(H=>H.action.seq).some(H=>H===$.seq)).length>0,N=$=>{var H;if(((H=$.target)==null?void 0:H.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),re)F({selectedCells:[e(d)]});else if(e(Y))S(A,!e(A)),h(e(A)?[...h(),e(d)]:h().filter(Q=>Q!==e(d)));else if(e(d).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(d),!0),t().requireUpdate();const Q=e(d).entities.flatMap(p=>p.actions).map(p=>p.seq),ee=e(W).filter(p=>Q.includes(p.action.seq));if(ee.length){if(!l)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:l,dummyActionInfos:ee,cancelable:!0}).then(p=>{p&&F({actionInfo:p})});return}}t().requireUpdate(),console.info(e(d),_e(...e(d).visibleEntities))},le=$=>{$.preventDefault(),$.dataTransfer&&($.dataTransfer.dropEffect="move")},pe=$=>{$.preventDefault(),console.info("drop",$,e(j),C),$.dataTransfer&&($.dataTransfer.dropEffect="move");try{if(e(j)&&C){if(C.length===1){const H=C[0];F({actionInfo:{...H,dest:e(d)}})}else if(C.length>1){if(!l)throw new Wa("想定されない状態");e(d).field.duel.view.modalController.terminateAll(),e(d).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:l,dummyActionInfos:C.map(H=>({...H,dest:e(d)})),cancelable:!1}).then(H=>{F({actionInfo:H})})}}}finally{t().removeDraggingActions()}},_e=(...$)=>{if(t().waitMode==="Animation")return"Disabled";if(K&&K.selectables.find(Q=>$.find(ee=>Q===ee)))return"Selectable";if(!e(W)||e(W).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(Q=>Q.state==="Shown"))return"Disabled";const H=e(W).filter(Q=>$.includes(Q.action.entity));return H.length===0?"Disabled":e(d).isStackCell||H[0].action.entity!==$[0]?"Clickable":H.some(Q=>Q.dests.length)?"Draggable":"Clickable"};st();var I=Lr(),g=a(I);g.__click=N;var X=a(g);{var te=$=>{var H=Me(),Q=U(H);{var ee=p=>{var q=Me(),T=U(q);{var L=y=>{var Z=Dr(),we=a(Z),De=a(we),ge=s(we,1,!0);u((ue,M)=>{f(De,ue),f(ge,M)},[()=>String(e(d).field.duel.clock.turn).padStart(2,"0"),()=>e(d).field.duel.phase.toUpperCase()],de),r(y,Z)},w=y=>{var Z=Me(),we=U(Z);{var De=ue=>{var M=$r(),P=a(M),me=a(P),$e=s(P,2),Le=a($e);u((Ye,je)=>{f(me,Ye),f(Le,je)},[()=>Math.floor(e(E).current),()=>Math.floor(e(O).current)],de),r(ue,M)},ge=ue=>{var M=Me(),P=U(M);{var me=$e=>{var Le=Me(),Ye=U(Le);{var je=Fe=>{var Ke=Me(),k=U(Ke);{var b=x=>{var R=Me(),Se=U(R);ie(Se,1,()=>t().duel.nextPhaseList,oe,(Ie,G)=>{var xe=Mr(),qe=a(xe);qe.__click=[Sr,ke,G];var We=a(qe);u(Ne=>f(We,Ne),[()=>e(G).toUpperCase()],de),r(Ie,xe)}),r(x,R)};m(k,x=>{t().duel.isEnded||x(b)})}r(Fe,Ke)};m(Ye,Fe=>{t().waitMode==="Free"&&Fe(je)})}r($e,Le)};m(P,$e=>{e(d).column===5&&$e(me)},!0)}r(ue,M)};m(we,ue=>{e(d).column===3?ue(De):ue(ge,!1)},!0)}r(y,Z)};m(T,y=>{e(d).column===1?y(L):y(w,!1)})}r(p,q)};m(Q,p=>{e(d).row===3&&p(ee)})}r($,H)},ve=$=>{var H=Me(),Q=U(H);{var ee=q=>{var T=Ar();const L=de(()=>e(ce).find(M=>M.to===e(d)));var w=U(T);{var y=M=>{var P=Tr(),me=a(P);St(me,{get entity(){return e(L).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),u(()=>Ee(P,`card_animation_receiver ${e(d).cellType??""} svelte-1ycsdg6`)),ae(1,P,()=>J,()=>({key:e(L).entity.seq})),r(M,P)};m(w,M=>{e(L)&&e(L).index==="Top"&&M(y)})}var Z=s(w,2);ie(Z,1,()=>e(d).visibleEntities,oe,(M,P)=>{var me=Me(),$e=U(me);{var Le=Ye=>{var je=jr(),Fe=a(je);const Ke=de(()=>_e(e(P))),k=de(()=>e(W).filter(b=>b.action.entity===e(P)));St(Fe,{get entity(){return e(P)},get state(){return e(Ke)},get dummyActionInfos(){return e(k)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(b){c(b)},$$legacy:!0}),ae(2,je,()=>ye,()=>({key:e(P).seq})),r(Ye,je)};m($e,Ye=>{e(ce).every(je=>je.entity.seq!==e(P).seq)&&Ye(Le)})}r(M,me)});var we=s(Z,2);{var De=M=>{var P=qr(),me=a(P);St(me,{get entity(){return e(L).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),u(()=>Ee(P,`card_animation_receiver ${e(d).cellType??""} svelte-1ycsdg6`)),ae(1,P,()=>J,()=>({key:e(L).entity.seq})),r(M,P)};m(we,M=>{e(L)&&e(L).index!=="Top"&&M(De)})}var ge=s(we,2);{var ue=M=>{var P=Er();r(M,P)};m(ge,M=>{e(d).owner.seat==="Below"&&M(ue)})}r(q,T)},p=q=>{var T=Or();const L=de(()=>e(ce).find(P=>P.to===e(d)));var w=U(T);{var y=P=>{var me=Yr(),$e=a(me);St($e,{get entity(){return e(L).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),ae(1,me,()=>J,()=>({key:e(L).entity.seq})),r(P,me)};m(w,P=>{e(L)&&e(L).index!=="Top"&&P(y)})}var Z=s(w,2);{var we=P=>{var me=Fr(),$e=U(me);ie($e,1,()=>e(d).visibleEntities.map((je,Fe)=>({index:Fe,entity:je})).toReversed(),oe,(je,Fe)=>{var Ke=Me(),k=U(Ke);{var b=x=>{var R=Nr();const Se=de(()=>!e(d).isStackCell&&e(Fe).index===0?_e(...e(d).visibleEntities):void 0);var Ie=U(R);{var G=Ne=>{var ze=Br();r(Ne,ze)};m(Ie,Ne=>{e(z).includes(e(Fe).entity)&&Ne(G)})}var xe=s(Ie,2),qe=a(xe);const We=de(()=>e(Fe).index===0?e(W).filter(Ne=>e(d).visibleEntities.includes(Ne.action.entity)):void 0);St(qe,{get entity(){return e(Fe).entity},get state(){return e(Se)},get dummyActionInfos(){return e(We)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(Ne){c(Ne)},$$legacy:!0}),u(()=>Ee(xe,`duel_card_wrapper ${(e(Fe).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1ycsdg6`)),ae(2,xe,()=>ye,()=>({key:e(Fe).entity.seq})),r(x,R)};m(k,x=>{e(ce).every(R=>R.entity.seq!==e(Fe).entity.seq)&&x(b)})}r(je,Ke)});var Le=s($e,2);{var Ye=je=>{var Fe=Ur(),Ke=a(Fe),k=s(Ke);ie(k,1,()=>oa(e(d).visibleEntities[0].status.maxCounterQty),oe,(b,x)=>{var R=Ir(),Se=U(R),Ie=s(Se);{var G=xe=>{var qe=at();u(()=>f(qe,`/${e(d).visibleEntities[0].status.maxCounterQty[e(x)]??""}`)),r(xe,qe)};m(Ie,xe=>{(e(d).visibleEntities[0].status.maxCounterQty[e(x)]??9999)<100&&xe(G)})}u((xe,qe)=>f(Se,`【
              ${xe??""}${qe??""} `),[()=>Ka(e(x)),()=>e(d).visibleEntities[0].counterHolder.getQty(e(x))],de),r(b,R)}),u(()=>f(Ke,`【${e(d).visibleEntities[0].battlePositionName??""}】 `)),r(je,Fe)};m(Le,je=>{e(d).visibleEntities[0].battlePosition&&je(Ye)})}r(P,me)};m(Z,P=>{e(d).visibleEntities.length>0&&P(we)})}var De=s(Z,2);{var ge=P=>{var me=Hr(),$e=a(me);u(()=>f($e,e(d).visibleEntities.length)),r(P,me)};m(De,P=>{e(d).isStackCell&&P(ge)})}var ue=s(De,2);{var M=P=>{var me=Pr(),$e=a(me);St($e,{get entity(){return e(L).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),ae(1,me,()=>J,()=>({key:e(L).entity.seq})),r(P,me)};m(ue,P=>{e(L)&&e(L).index==="Top"&&P(M)})}r(q,T)};m(Q,q=>{e(d).cellType==="Hand"?q(ee):q(p,!1)},!0)}r($,H)};m(X,$=>{e(d).isDisabledCell?$(te):$(ve,!1)})}u($=>{Ee(I,`${`duel_field_cell duel_field_cell_${e(d).cellType} ${e(d).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1ycsdg6`),pt(I,"colspan",e(d).cellType==="Hand"?7:1),Ee(g,`${$??""} svelte-1ycsdg6`)},[()=>`duel_field_cell_inner_box ${e(d).cellType} ${e(j)?"can_accept_drop":""} ${B()?"can_action":""} ${e(A)?"is_selected":e(Y)?"is_selectable":""} `],de),be("dragover",g,le),be("drop",g,pe),r(o,I),it()}Na(["click"]);var Wr=n('<div class="title svelte-14z6bdh"> </div>'),Kr=n('<div class="title svelte-14z6bdh"> </div>'),zr=n('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),Vr=n('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),Gr=n("<div><!> <!></div>"),Xr=n('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),Qr=n("<div><!> <!></div>"),Zr=n("<div><!> <!></div>"),Jr=n('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function es(o,i){rt(i,!1);let t=he(void 0),v=Re(i,"log",8),_,c=he([]);const h=()=>{const D=((_==null?void 0:_.seq)??-1)+1;v().records.slice(D).forEach(l=>{if(!_){S(c,[[[[l]]]]),_=l;return}if(!e(c)[l.clock.turn]){Oe(c,e(c)[l.clock.turn]=[[[l]]]),_=l;return}if(!e(c)[l.clock.turn][l.clock.phaseSeq]){Oe(c,e(c)[l.clock.turn][l.clock.phaseSeq]=[[l]]),_=l;return}if(_.clock.chainSeq===l.clock.chainSeq&&_.clock.chainBlockSeq===l.clock.chainBlockSeq&&_.duelist===l.duelist){e(c)[l.clock.turn][l.clock.phaseSeq].slice(-1)[0].push(l),_=l;return}e(c)[l.clock.turn][l.clock.phaseSeq].push([l]),_=l}),S(c,e(c)),za().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};v().onUpdate.append(h),v().duel.view.onDuelUpdate.append(h),h(),st();var d=Me(),E=U(d);{var O=D=>{var l=Jr(),W=s(a(l),2);ie(W,5,()=>e(c),oe,(F,K)=>{var z=Zr(),A=a(z);{var Y=ne=>{var Te=Wr(),j=a(Te);u(()=>f(j,`ターン：${e(K)[0][0][0].clock.turn??""}`)),r(ne,Te)};m(A,ne=>{e(K)[0][0][0].clock.turn>0&&ne(Y)})}var re=s(A,2);ie(re,1,()=>e(K),oe,(ne,Te)=>{var j=Qr(),C=a(j);{var V=ye=>{var J=Kr(),ce=a(J);u(()=>f(ce,e(Te)[0][0].clock.period.name)),r(ye,J)};m(C,ye=>{e(Te)[0][0].clock.turn>0&&ye(V)})}var se=s(C,2);ie(se,1,()=>e(Te),oe,(ye,J)=>{var ce=Xr();const Ue=de(()=>{var I;return((I=e(J).find(g=>g.chainNumber!==void 0))==null?void 0:I.chainNumber)??0});var ke=a(ce),B=a(ke),N=a(B),le=s(B,2);{var pe=I=>{var g=zr(),X=a(g);u(()=>f(X,`チェーン：${e(Ue)??""}`)),r(I,g)};m(le,I=>{e(Ue)&&I(pe)})}var _e=s(ke,2);ie(_e,1,()=>e(J),oe,(I,g)=>{var X=Gr(),te=a(X);{var ve=ee=>{var p=at();u(()=>f(p,e(g).text)),r(ee,p)},$=ee=>{var p=Me(),q=U(p);{var T=w=>{var y=at();u((Z,we,De)=>f(y,`移動：${Z??""} ${we??""} ⇒ ${De??""}`),[()=>{var Z;return(Z=e(g).mainEntity)==null?void 0:Z.toString()},()=>{var Z;return(Z=e(g).from)==null?void 0:Z.toString()},()=>{var Z;return(Z=e(g).to)==null?void 0:Z.toString()}],de),r(w,y)},L=w=>{var y=Me(),Z=U(y);{var we=ge=>{var ue=at();u((M,P)=>f(ue,`生成：${M??""} void ⇒ ${P??""}`),[()=>{var M;return(M=e(g).mainEntity)==null?void 0:M.toString()},()=>{var M;return(M=e(g).to)==null?void 0:M.toString()}],de),r(ge,ue)},De=ge=>{var ue=Me(),M=U(ue);{var P=$e=>{var Le=at();u((Ye,je)=>f(Le,`消滅：${Ye??""} ${je??""} ⇒ void`),[()=>{var Ye;return(Ye=e(g).mainEntity)==null?void 0:Ye.toString()},()=>{var Ye;return(Ye=e(g).from)==null?void 0:Ye.toString()}],de),r($e,Le)},me=$e=>{var Le=at();u(()=>f(Le,e(g).text)),r($e,Le)};m(M,$e=>{e(g).type==="EntityDisappear"?$e(P):$e(me,!1)},!0)}r(ge,ue)};m(Z,ge=>{e(g).type==="EntityAppear"?ge(we):ge(De,!1)},!0)}r(w,y)};m(q,w=>{e(g).type==="EntityMove"?w(T):w(L,!1)},!0)}r(ee,p)};m(te,ee=>{e(g).type==="ChainBlockHeader"?ee(ve):ee($,!1)})}var H=s(te,2);{var Q=ee=>{var p=Vr(),q=a(p);u(T=>pt(q,"href",T),[()=>window.URL.createObjectURL(new Blob([Ga(e(g).error,(T,L)=>["pool","bundles","duel"].includes(T)||typeof L=="function"?void 0:L,4)],{type:"text/plain"}))],de),r(ee,p)};m(H,ee=>{e(g).error&&ee(Q)})}u(ee=>Ee(X,`duel_log_record duel_log_record_${ee??""} svelte-14z6bdh`),[()=>e(g).type.toSnakeCase()],de),r(I,X)}),u(()=>{var I,g,X;Ee(ce,`duel_log_block_duelist duel_log_block_duelist_${((I=e(J)[0].duelist)==null?void 0:I.seat)??"system"} svelte-14z6bdh`),Ee(B,`duelist ${((g=e(J)[0].duelist)==null?void 0:g.seat)??""} svelte-14z6bdh`),f(N,((X=e(J)[0].duelist)==null?void 0:X.profile.name)||"SYSTEM")}),r(ye,ce)}),u(()=>Ee(j,`duel_log_block_phase duel_log_block_phase_${e(Te)[0][0].clock.period.key??""} svelte-14z6bdh`)),r(ne,j)}),u(()=>Ee(z,`duel_log_block_turn duel_log_block_turn_${e(K)[0][0][0].clock.turn??""} svelte-14z6bdh`)),r(F,z)}),Va(W,F=>S(t,F),()=>e(t)),r(D,l)};m(E,D=>{(v().duel.view.infoBoardState==="Log"||v().duel.view.infoBoardState==="Default")&&D(O)})}r(o,d),it()}var ts=n("<div><div> </div> <div> </div></div>");function Ya(o,i){rt(i,!1);let t=Re(i,"duelist",12),v=he(0),_=he();const c=async()=>{const W=t().lp-e(v);if(!e(_)||Math.abs(W)<10){S(v,t().lp),e(_)&&(e(_)(),S(_,void 0));return}S(v,e(v)+Math.floor(Math.random()*W)),await Mt(100),c()},h=()=>{t(t()),!e(_)&&t().lp!==e(v)&&new Promise(W=>{S(_,W),Math.abs(t().lp-e(v)),c()})};t().duel.log.onUpdate.append(h),c(),st();var d=ts(),E=a(d),O=a(E),D=s(E,2),l=a(D);u(W=>{Ee(d,`duelist duelist_${W??""} svelte-1sy3trd`),Ee(E,`duelist_name duelist_${W??""}_name svelte-1sy3trd`),f(O,t().profile.name),Ee(D,`duelist_lp ${(e(_)?"vibration":"")??""} svelte-1sy3trd`),f(l,e(v))},[()=>t().seat.toLowerCase()],de),r(o,d),it()}const as=(o,i,t)=>(i(i()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),rs=(o,i,t)=>(i(i()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var ss=n('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),is=n('<div></div> <div class="svelte-1uevs9j"> </div>',1),ns=n("<div> </div>"),ls=n("<div> </div>"),os=n('<div class="duel_card_info_row svelte-1uevs9j"><!> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),vs=n('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),ds=n('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),cs=n("<!> <!>",1),_s=n('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><pre class="description svelte-1uevs9j"> </pre></div>'),us=n('<!> <div class="duel_card_info_row svelte-1uevs9j"><pre class="description svelte-1uevs9j"> </pre></div>',1),fs=n('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),ps=n('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),gs=n("[ <!> ],",1),ms=n('<div class="svelte-1uevs9j"> <!></div>'),bs=n('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),hs=n('<div class="svelte-1uevs9j"> </div>'),ys=n('<div class="svelte-1uevs9j"> </div>'),ks=n('<div class="svelte-1uevs9j"> </div>'),ws=n('<div class="svelte-1uevs9j"> </div>'),xs=n('<div class="svelte-1uevs9j"> </div>'),Cs=n('<div class="svelte-1uevs9j"> </div>'),Ds=n('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),$s=n('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Ss=n('<div class="svelte-1uevs9j">※テスト用カードです</div>'),Ms=n('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),Ts=n('<div class="duel_card_info_links svelte-1uevs9j"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a> <!></div>'),js=n("<!> <!>",1),qs=n('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Es(o,i){rt(i,!1);let t=Re(i,"entity",8,void 0),v=Re(i,"mode",12,"Normal");const _=()=>t()?ht[t().origin.name]:void 0,c=()=>{var O;return t()&&t().entityType==="Card"&&(t().origin.cardId??!1)?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t().origin.cardId}`:`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${(O=_())==null?void 0:O.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`};st();var h=Me(),d=U(h);{var E=O=>{var D=qs();D.__click=[as,v,t],D.__contextmenu=[rs,v,t];var l=a(D),W=a(l),F=a(W),K=a(F),z=s(W,2),A=a(z),Y=a(A),re=s(A,2),ne=a(re),Te=s(z,2);{var j=ke=>{var B=cs(),N=U(B);{var le=g=>{var X=ss(),te=a(X),ve=a(te),$=s(te,2),H=a($);u(()=>{f(ve,`◀ ${t().psL??""}`),f(H,`${t().psR??""} ▶`)}),r(g,X)};m(N,g=>{var X;(X=t().origin.monsterCategories)!=null&&X.includes("Pendulum")&&g(le)})}var pe=s(N,2);{var _e=g=>{var X=os(),te=U(X),ve=a(te);ie(ve,1,()=>t().attr,oe,(Q,ee)=>{var p=is(),q=U(p),T=s(q,2),L=a(T);u(()=>{Ee(q,`monster_attr ${e(ee)??""} svelte-1uevs9j`),f(L,`${va[e(ee)]??""}属性`)}),r(Q,p)});var $=s(ve,2);ie($,1,()=>t().types,oe,(Q,ee)=>{var p=ns(),q=a(p);u(()=>{Ee(p,`monster_cat ${e(ee)??""} svelte-1uevs9j`),f(q,`${Xt[e(ee)]??""}${da[e(ee)]??""}族`)}),r(Q,p)});var H=s(te,2);ie(H,5,()=>t().status.monsterCategories??[],oe,(Q,ee)=>{var p=ls(),q=a(p);u(()=>{Ee(p,`monster_cat ${e(ee)??""} svelte-1uevs9j`),f(q,`${Qt[e(ee)]??""}${ca[e(ee)]??""}`)}),r(Q,p)}),r(g,X)},I=g=>{var X=Me(),te=U(X);{var ve=H=>{var Q=vs(),ee=s(a(Q),2),p=a(ee);u(()=>f(p,`${Zt[t().status.spellCategory]??""}魔法`)),r(H,Q)},$=H=>{var Q=Me(),ee=U(Q);{var p=q=>{var T=ds(),L=s(a(T),2),w=a(L);u(()=>f(w,`${Jt[t().status.trapCategory]??""}罠`)),r(q,T)};m(ee,q=>{t().kind==="Trap"&&t().status.trapCategory&&q(p)},!0)}r(H,Q)};m(te,H=>{t().kind==="Spell"&&t().status.spellCategory?H(ve):H($,!1)},!0)}r(g,X)};m(pe,g=>{t().kind==="Monster"?g(_e):g(I,!1)})}r(ke,B)};m(Te,ke=>{v()!=="Debug"&&ke(j)})}var C=s(l,2),V=a(C);{var se=ke=>{var B=us(),N=U(B);{var le=g=>{var X=_s(),te=a(X),ve=a(te);u(()=>f(ve,ht[t().origin.name].pendulumDescription)),r(g,X)};m(N,g=>{var X;(X=t().status.monsterCategories)!=null&&X.includes("Pendulum")&&g(le)})}var pe=s(N,2),_e=a(pe),I=a(_e);u(g=>f(I,g),[()=>{var g;return(g=_())==null?void 0:g.description}],de),r(ke,B)},ye=ke=>{var B=Me(),N=U(B);{var le=_e=>{var I=Me(),g=U(I);{var X=te=>{var ve=ps(),$=s(a(ve),2);ie($,5,()=>t().actions,oe,(H,Q)=>{var ee=Me();const p=de(()=>e(Q).actionCountUpperBound),q=de(()=>e(Q).actionCount);var T=U(ee);{var L=w=>{var y=fs(),Z=a(y),we=a(Z),De=s(Z,2),ge=a(De),ue=s(De,4),M=a(ue);u(()=>{f(we,e(Q).title),f(ge,e(q)),f(M,e(p))}),r(w,y)};m(T,w=>{e(p)!==void 0&&e(q)!==void 0&&w(L)})}r(H,ee)}),r(te,ve)};m(g,te=>{t().actions.some(ve=>ve.actionCountUpperBoundKey)&&te(X)})}r(_e,I)},pe=_e=>{var I=Ds(),g=a(I),X=a(g);ie(X,0,()=>["info","status"],oe,(k,b)=>{var x=bs(),R=U(x),Se=a(R),Ie=s(R,2);ie(Ie,1,()=>Object.entries(t()[b]),oe,(xe,qe)=>{let We=()=>e(qe)[0],Ne=()=>e(qe)[1];var ze=ms(),ot=a(ze),ct=s(ot);{var et=Be=>{var Ae=gs(),Ve=s(U(Ae));ie(Ve,1,Ne,oe,(vt,nt)=>{var mt=at();u(Xe=>f(mt,`${Xe??""},`),[()=>e(nt).toString()],de),r(vt,mt)}),r(Be,Ae)},Ce=Be=>{var Ae=at();u(Ve=>f(Ae,`${Ve??""},`),[()=>{var Ve;return(Ve=Ne())==null?void 0:Ve.toString()}],de),r(Be,Ae)};m(ct,Be=>{Array.isArray(Ne())?Be(et):Be(Ce,!1)})}u(()=>f(ot,`"${We()??""}" : `)),r(xe,ze)});var G=s(Ie,2);G.textContent="},",u(()=>f(Se,`"${b??""}" :{`)),r(k,x)});var te=s(X,2);te.textContent='"actions" :[';var ve=s(te,2);ie(ve,1,()=>t().actions,oe,(k,b)=>{var x=hs(),R=a(x);u(()=>f(R,`"${e(b).playType??""} ${e(b).title??""}",`)),r(k,x)});var $=s(ve,2);$.textContent="],";var H=s($,2);H.textContent='"substituteEffects" :[';var Q=s(H,2);ie(Q,1,()=>t().substituteEffects,oe,(k,b)=>{var x=ys(),R=a(x);u(()=>f(R,`"${e(b).title??""}",`)),r(k,x)});var ee=s(Q,2);ee.textContent="],";var p=s(ee,2);p.textContent='"continuousEffects" :[';var q=s(p,2);ie(q,1,()=>t().continuousEffects,oe,(k,b)=>{var x=ks(),R=a(x);u(()=>f(R,`"${e(b).isStarted??""}",`)),r(k,x)});var T=s(q,2);T.textContent="],";var L=s(T,2);L.textContent='"procFilters" :[';var w=s(L,2);ie(w,1,()=>t().procFilterBundle.operators,oe,(k,b)=>{var x=ws(),R=a(x);u(Se=>f(R,`"${Se??""} ${e(b).title??""} ${e(b).isEffective??""} ",`),[()=>e(b).isSpawnedBy.toString()],de),r(k,x)});var y=s(w,2);y.textContent="],";var Z=s(y,2);Z.textContent='"numericStateOperators" :[';var we=s(Z,2);ie(we,1,()=>t().numericOprsBundle.operators,oe,(k,b)=>{var x=xs(),R=a(x);u(Se=>f(R,`"${Se??""} ${e(b).title??""} ${e(b).isEffective??""} ${e(b).isContinuous??""} ${e(b).targetState??""} ${e(b).targetStateGen??""} ",`),[()=>e(b).isSpawnedBy.toString()],de),r(k,x)});var De=s(we,2);De.textContent="],";var ge=s(De,2);ge.textContent='"stateOperators" :[';var ue=s(ge,2);ie(ue,1,()=>t().statusOperatorBundle.operators,oe,(k,b)=>{var x=Cs(),R=a(x);u(Se=>f(R,`"${Se??""} ${e(b).title??""} ${e(b).isEffective??""} ",`),[()=>e(b).isSpawnedBy.toString()],de),r(k,x)});var M=s(ue,2);M.textContent="],";var P=s(M,2);P.textContent='"lastMoveLogRecord" :{';var me=s(P,2),$e=a(me),Le=s(me,2),Ye=a(Le),je=s(Le,2),Fe=a(je),Ke=s(je,2);Ke.textContent="},",u((k,b)=>{f($e,`"movedBy":"${k??""}",`),f(Ye,`"movedAs":"${b??""}",`),f(Fe,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var k;return(k=t().moveLog.latestRecord.movedBy)==null?void 0:k.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],de),r(_e,I)};m(N,_e=>{v()==="Detail"?_e(le):_e(pe,!1)},!0)}r(ke,B)};m(V,ke=>{v()==="Normal"?ke(se):ke(ye,!1)})}var J=s(C,2),ce=a(J);{var Ue=ke=>{var B=js(),N=U(B);{var le=g=>{var X=$s();r(g,X)};m(N,g=>{t().origin.isOldVersion&&g(le)})}var pe=s(N,2);{var _e=g=>{var X=Ss();r(g,X)},I=g=>{var X=Ts(),te=a(X),ve=s(te,2);{var $=H=>{var Q=Ms(),ee=a(Q);u(p=>{var q;pt(Q,"href",p),f(ee,`⇒${((q=t())!=null&&q.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[c],de),r(H,Q)};m(ve,H=>{t()&&t().entityType==="Card"&&H($)})}u(()=>pt(te,"href",`https://yugioh-wiki.net/index.php?${t().origin.wikiEncodedName}`)),r(g,X)};m(pe,g=>{t().origin.isForTest?g(_e):g(I,!1)})}r(ke,B)};m(ce,ke=>{t()&&ke(Ue)})}u((ke,B,N)=>{Ee(D,`duel_card duel_card_info ${t().origin.kind??""} ${ke??""} svelte-1uevs9j`),f(K,t().nm),f(Y,B),f(ne,N)},[()=>{var ke;return(ke=t().origin.monsterCategories)==null?void 0:ke.join(" ")},()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],de),r(O,D)};m(d,O=>{t()&&O(E)})}r(o,h),it()}Na(["click","contextmenu"]);var As=n('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),Ys=n('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),Bs=n('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Ns(o,i){rt(i,!1);let t=Re(i,"cell",12);const v=()=>{t(t())},_=E=>t().cardEntities.filter(O=>O.face===E);t().field.duel.view.onDuelUpdate.append(v),st();var c=Me(),h=U(c);{var d=E=>{var O=Bs(),D=a(O),l=a(D),W=a(l),F=s(l,2),K=a(F),z=s(D,2);ie(z,4,()=>["FaceUp","FaceDown"],oe,(A,Y)=>{var re=Me(),ne=U(re);{var Te=j=>{var C=Ys(),V=a(C),se=a(V),ye=s(V,2);ie(ye,1,()=>_(Y).toSorted(Xa),oe,(J,ce)=>{var Ue=As(),ke=a(Ue);const B=de(()=>t().owner===t().field.duel.duelists.Below);St(ke,{get entity(){return e(ce)},get isVisibleForcibly(){return e(B)},isWideMode:!0,cardActionResolve:void 0}),r(J,Ue)}),u(()=>f(se,Y==="FaceUp"?"表向き":"裏向き")),r(j,C)};m(ne,j=>{_(Y).length&&j(Te)})}r(A,re)}),u(()=>{var A;f(W,(A=t().owner)==null?void 0:A.profile.name),f(K,t().cellType)}),r(E,O)};m(h,E=>{t().field.duel.view.infoBoardState==="CellInfo"&&E(d)})}r(o,c),it()}var Is=n('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),Us=n('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function Fs(o,i){rt(i,!1);let t=Re(i,"viewController",8),v=Re(i,"userProfile",12);st();var _=Me(),c=U(_);{var h=d=>{var E=Us(),O=s(a(E),2),D=s(a(O),2);ie(D,1,()=>Ja,oe,(l,W)=>{var F=Is(),K=a(F),z=a(K),A=s(K,2),Y=a(A);u(()=>f(Y,Qa[e(W)])),Za(z,()=>v().chainConfig[e(W)],re=>v(v().chainConfig[e(W)]=re,!0)),be("change",z,()=>v().save()),r(l,F)}),r(d,E)};m(c,d=>{t().infoBoardState==="Config"&&d(h)})}r(o,_),it()}function Hs(o,{from:i,to:t},v={}){var{delay:_=0,duration:c=C=>Math.sqrt(C)*120,easing:h=ia}=v,d=getComputedStyle(o),E=d.transform==="none"?"":d.transform,[O,D]=d.transformOrigin.split(" ").map(parseFloat);O/=o.clientWidth,D/=o.clientHeight;var l=Ps(o),W=o.clientWidth/t.width/l,F=o.clientHeight/t.height/l,K=i.left+i.width*O,z=i.top+i.height*D,A=t.left+t.width*O,Y=t.top+t.height*D,re=(K-A)*W,ne=(z-Y)*F,Te=i.width/t.width,j=i.height/t.height;return{delay:_,duration:typeof c=="function"?c(Math.sqrt(re*re+ne*ne)):c,easing:h,css:(C,V)=>{var se=V*re,ye=V*ne,J=C+V*Te,ce=C+V*j;return`transform: ${E} translate(${se}px, ${ye}px) scale(${J}, ${ce});`}}}function Ps(o){if("currentCSSZoom"in o)return o.currentCSSZoom;for(var i=o,t=1;i!==null;)t*=+getComputedStyle(i).zoom,i=i.parentElement;return t}var Os=n('<div class="chain_number svelte-lqu21u"> </div>'),Ls=n('<div class="duel_card_row svelte-lqu21u"> </div>'),Rs=n('<div class="appendix svelte-lqu21u"> </div>'),Ws=n('<div class="appendix_wrapper svelte-lqu21u"></div>'),Ks=n('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),zs=n("<div></div>");function Vs(o,i){rt(i,!1);let t=Re(i,"duel",8),v=Re(i,"position",8,"left");const _=-100,c=()=>v()==="left"?-100:100;let h=he([]),d=Promise.resolve(),E=Promise.resolve();const O=1e3,D=500,l=400,W=K=>{const z={...K};z.isKnown=K.chainBlockInfo.action.entity.controller.duelistType==="Player"||K.chainBlockInfo.action.entity.face==="FaceUp",z.chainBlockInfo.onStateChange.append(A=>{if(A==="done"||A==="failed"||A==="negated")return d=d.then(async()=>{const Y=new Date().getTime()-z.chainBlockInfo.wasSpawnedAt.getTime();Y<O&&await Mt(O-Y),S(h,e(h).filter(re=>re.seq!==z.seq)),await Mt(D+l)}).then(),"RemoveMe";S(h,e(h))}),E=E.then(async()=>{S(h,[z,...e(h)].sort((A,Y)=>er.isSameChain(A.clock,Y.clock)&&A.chainBlockInfo.action.isWithChainBlock&&Y.chainBlockInfo.action.isWithChainBlock?Y.clock.totalProcSeq-A.clock.totalProcSeq:A.clock.totalProcSeq-Y.clock.totalProcSeq)),await Mt(300)}),d=d.then(()=>Mt(1e3))};t().chainBlockLog.onInsert.append(W),st();var F=zs();ie(F,13,()=>e(h),K=>K.seq,(K,z)=>{var A=Ks();const Y=de(()=>{const{activator:N,action:le,appendix:pe}=e(z).chainBlockInfo;return{activator:N,action:le,appendix:pe}});var re=a(A),ne=a(re);{var Te=N=>{var le=Os(),pe=a(le);u(()=>f(pe,`チェーン：${e(z).chainBlockInfo.chainNumber??""}`)),r(N,le)};m(ne,N=>{e(z).chainBlockInfo.chainNumber&&N(Te)})}var j=s(ne,2),C=a(j),V=s(j,2),se=a(V);{var ye=N=>{var le=Ls(),pe=a(le);u(()=>f(pe,e(z).isKnown?e(Y).action.entity.nm:"？？？")),r(N,le)};m(se,N=>{(e(Y).action.entity.entityType==="Card"||e(Y).action.entity.entityType==="Token")&&N(ye)})}var J=s(se,2),ce=a(J),Ue=a(ce),ke=s(ce,2);{var B=N=>{var le=Ws();ie(le,5,()=>e(Y).appendix,oe,(pe,_e)=>{var I=Rs(),g=a(I);u(()=>f(g,e(_e))),r(pe,I)}),r(N,le)};m(ke,N=>{e(Y).appendix&&N(B)})}u((N,le,pe)=>{Ee(A,`cut_in_row ${(!e(z).chainBlockInfo.chainNumber||e(z).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Ee(re,`cut_in_item cut_in_item_${N??""} cut_in_item_${e(z).chainBlockInfo.state??""} svelte-lqu21u`),Ee(j,`duelist_name duelist_${N??""}_name svelte-lqu21u`),f(C,e(Y).activator.profile.name),Ee(V,`duel_card duel_card_${N??""} ${le??""} ${(e(z).isKnown?e(Y).action.entity.origin.kind:"")??""} ${e(Y).action.entity.entityType??""}  svelte-lqu21u`),f(Ue,pe)},[()=>e(Y).activator.seat.toLowerCase(),()=>e(z).isKnown?(e(Y).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(Y).action.toString()],de),ae(3,re,()=>wr,()=>new Date().getTime()-e(z).chainBlockInfo.wasSpawnedAt.getTime()<O?{x:c(),duration:l}:{y:_,duration:l}),tr(A,()=>Hs,()=>({duration:D})),r(K,A)}),u(()=>Ee(F,`cut_in_container cut_in_container_${v()??""} svelte-lqu21u`)),r(o,F),it()}const Gs=xr({duration:400});var Xs=n('<div class="duel_desk_left v_flex svelte-1i63tk9"><!> <!> <!></div>'),Qs=n('<button class="duel_field_header_message svelte-1i63tk9"> </button> <div class="duel_field_header_buttons svelte-1i63tk9"><button class="svelte-1i63tk9">サレンダー</button></div>',1),Zs=n("<tr></tr>"),Js=n('<table class="duel_field svelte-1i63tk9"><tbody class="svelte-1i63tk9"></tbody></table>'),ei=n('<button class="svelte-1i63tk9">OK</button>'),ti=n('<button class="svelte-1i63tk9">cancel</button>'),ai=n("<!> <!>",1),ri=n('<button class="svelte-1i63tk9"> </button>'),si=n('<div style="text-align: left;"><!> <!> <!></div>'),ii=n('<div><!> <div class=" duel_desk_center v_flex svelte-1i63tk9"><div class="duel_field_header svelte-1i63tk9"><!></div> <div class="duel_field_body svelte-1i63tk9"><!></div> <div class="duel_field_footer svelte-1i63tk9"><!></div></div> <!></div> <div style="position:fixed;left:0;bottom:0"> </div> <!> <div><!></div>',1);function ni(o,i){rt(i,!1);let t=Re(i,"duel",12),v=Re(i,"userProfile",8),_=he(0),c=he(0),h=he([]),d=he([]),E=()=>{},O=he([]),D=he(),l=he(),W=he(()=>!1),F=he(!1);const K=w=>{E=w.resolve,S(O,w.dummyActionInfos.filter(y=>y.action.entity.entityType==="Duelist").filter(y=>y.action.entity.controller.seat==="Below")),S(D,void 0),S(l,void 0),S(d,[]),S(h,[]),S(F,!1),w.entitiesChoices&&(S(D,w.entitiesChoices),S(W,()=>{var y;return((y=w.entitiesChoices)==null?void 0:y.validator(e(h)))??!1}),S(F,w.entitiesChoices.cancelable),e(D).selectables.every(y=>y.cell.isPlayFieldCell&&y.getIndexInCell()===0||y.cell.cellType==="Hand"&&y.controller.duelistType==="Player"||y.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:w.entitiesChoices,chainBlockInfos:w.chainBlockInfos,cancelable:w.entitiesChoices.cancelable}).then(y=>{E({selectedEntities:y})})),w.cellsChoices&&(S(l,w.cellsChoices),S(W,()=>{var y;return((y=w.cellsChoices)==null?void 0:y.validator(e(d)))??!1}),S(F,w.cellsChoices.cancelable))};t().view.onWaitStart.append(K);const z=()=>{E=()=>{},S(l,void 0),S(D,void 0),S(d,[]),S(h,[]),S(W,()=>!1),S(F,!1)};t().view.onWaitEnd.append(z);let A=he(void 0),Y=he("Normal");const re=({card:w,mode:y})=>{S(A,w),S(Y,y??(e(A)===w||e(Y)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(re);const ne=()=>{t(t())};t().view.onDuelUpdate.append(ne),t().log.onUpdate.append(ne);const Te=()=>{e(D)&&e(D).validator(e(h))&&E({selectedEntities:e(h)}),e(l)&&e(l).validator(e(d))&&E({selectedCells:e(d)})},j=()=>{E({})},C=w=>{E({actionInfo:w})},V=()=>{E({surrender:!0})};t().main();const se=()=>e(_)<=1400?"compact":"wide";st();var ye=ii(),J=U(ye),ce=a(J);{var Ue=w=>{var y=Xs(),Z=a(y);Ya(Z,{get duelist(){return t().duelists.Above}});var we=s(Z,2);Es(we,{get entity(){return e(A)},get mode(){return e(Y)}});var De=s(we,2);Ya(De,{get duelist(){return t().duelists.Below}}),r(w,y)};m(ce,w=>{se()==="wide"&&w(Ue)})}var ke=s(ce,2),B=a(ke),N=a(B);{var le=w=>{var y=Qs(),Z=U(y),we=a(Z),De=s(Z,2),ge=a(De);u(()=>f(we,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),be("click",Z,()=>{t(t().view.infoBoardState="Log",!0)}),be("click",ge,V),r(w,y)};m(N,w=>{t().isEnded||w(le)})}var pe=s(B,2),_e=a(pe);{var I=w=>{var y=Js(),Z=a(y);ie(Z,5,()=>t().field.cells,oe,(we,De,ge)=>{var ue=Zs();Ee(ue,`${`duel_desk_row_${ge}`??""} svelte-1i63tk9`),ie(ue,5,()=>e(De),oe,(M,P,me)=>{Rr(M,{get view(){return t().view},row:ge,column:me,get selectedEntities(){return e(h)},set selectedEntities($e){S(h,$e)},get selectedCells(){return e(d)},set selectedCells($e){S(d,$e)},$$legacy:!0})}),r(we,ue)}),r(w,y)};m(_e,w=>{t().clock.turn>0&&w(I)})}var g=s(pe,2),X=a(g);{var te=w=>{var y=ai(),Z=U(y);{var we=ue=>{var M=ei();u(P=>M.disabled=P,[()=>!e(W)()],de),be("click",M,Te),r(ue,M)};m(Z,ue=>{((e(D)&&e(D).qty)??(e(l)&&e(l).qty)??9999)>1&&ue(we)})}var De=s(Z,2);{var ge=ue=>{var M=ti();be("click",M,j),r(ue,M)};m(De,ue=>{e(F)&&ue(ge)})}r(w,y)},ve=w=>{var y=Me(),Z=U(y);ie(Z,1,()=>e(O),oe,(we,De)=>{var ge=ri(),ue=a(ge);u(()=>f(ue,e(De).action.title)),be("click",ge,()=>C(e(De))),r(we,ge)}),r(w,y)};m(X,w=>{e(D)&&e(D).selectables.length||e(l)&&e(l).selectables?w(te):w(ve,!1)})}var $=s(ke,2);{var H=w=>{var y=si(),Z=a(y);es(Z,{get log(){return t().log}});var we=s(Z,2);Ns(we,{get cell(){return t().view.infoBoardCell}});var De=s(we,2);Fs(De,{get userProfile(){return v()},get viewController(){return t().view}}),u(ge=>Ee(y,`duel_desk_right duel_desk_right_${ge??""}  svelte-1i63tk9`),[()=>t().view.infoBoardState.toLowerCase()],de),ae(3,y,()=>fe,()=>({duration:e(_)>1400?0:200,axis:"x"})),r(w,y)};m($,w=>{(e(_)>1400||t().view.infoBoardState!=="Default")&&w(H)})}var Q=s(J,2),ee=a(Q),p=s(Q,2);ar(p,{get modalController(){return t().view.modalController}});var q=s(p,2),T=a(q);const L=de(()=>se()==="wide"?"right":"left");Vs(T,{get duel(){return t()},get position(){return e(L)}}),u((w,y)=>{Ee(J,`flex duel_desk ${w??""}_mode svelte-1i63tk9`),f(ee,y),Ee(q,`cutin ${w??""}_mode svelte-1i63tk9`)},[se,()=>t().clock.toFullString()],de),Kt("innerWidth",w=>S(_,w)),Kt("innerHeight",w=>S(c,w)),r(o,ye),it()}var li=n('<div class="svelte-swqq02"><button class="button_style_reset svelte-swqq02" title="※shiftキー同時押しで一括外し">クリア</button></div>'),oi=n('<div class="svelte-swqq02"><button class="button_style_reset svelte-swqq02" title="※shiftキー同時押しで一括外し">クリア</button></div>'),vi=n("<div></div>"),di=n("<!> <!> <!> <!> <!>",1),ci=n('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),_i=n('<li class="deck_editor_item svelte-swqq02"><div role="listitem"><div class="svelte-swqq02"><div class="svelte-swqq02"> </div> <div style="display:flex" class="svelte-swqq02"><div class="svelte-swqq02"><!> <!> <!></div> <div style="flex-grow: 1; width:0.1rem" class="svelte-swqq02"></div> <div class="svelte-swqq02"><!></div></div></div></div> <button class="button_style_reset svelte-swqq02" title="※shiftキー同時押しで一括投入">+</button> <button class="button_style_reset svelte-swqq02" title="※shiftキー同時押しで一括外し">-</button></li>'),ui=n('<div class="deck_editor_card_kind svelte-swqq02"><div class="deck_editor_card_kind_header svelte-swqq02"><div class="svelte-swqq02"> </div> <!></div> <ul class="svelte-swqq02"></ul></div>'),fi=n('<div class="deck_editor_deck_type svelte-swqq02"><div class="deck_editor_deck_type_header svelte-swqq02"><div class="svelte-swqq02"> </div> <!></div> <!></div>'),pi=n('<div class="svelte-swqq02">読み込み中...</div>'),gi=n('<div class="deck_editor_card_list svelte-swqq02"><!></div>');function Ba(o,i){rt(i,!1);let t=Re(i,"allCardInfos",8),v=Re(i,"deckCardInfos",12),_=Re(i,"mode",8),c=Re(i,"onAttention",8),h=Re(i,"searchCondition",8,void 0);const d={Deck:["Monster","Spell","Trap"],ExtraDeck:["Monster"]},E={Deck:{Monster:[],Spell:[],Trap:[]},ExtraDeck:{Monster:[],Spell:[],Trap:[]}},O=j=>{var C;return(C=j.monsterCategories)!=null&&C.union(zt).length?"ExtraDeck":"Deck"},D=j=>{Object.values(E).forEach(C=>Object.values(C).forEach(V=>V.reset())),j.filter(C=>C.isImplemented).filter(C=>C.kind!=="XyzMaterial").forEach(C=>{var se;if(C.kind==="XyzMaterial")return;const V=(se=C.monsterCategories)!=null&&se.union(zt).length?"ExtraDeck":"Deck";E[V][C.kind].push(C)}),Object.values(E).forEach(C=>Object.values(C).forEach(V=>V.sort(ra)))},l=_()==="List"?new Promise(j=>{D(t()),j()}):Promise.resolve(),W=()=>(_()==="Deck"&&(D(v()),S(A,v().length)),E),F=(j,C,V)=>{v(v().filter(se=>O(se)!==C||se.kind!==V&&V))},K=(j,C)=>{try{if(j.ctrlKey){v().push(C);return}const V=v().filter(ye=>ye.name===C.name).length;if(V>2)return;const se=j.shiftKey?3-V:1;if(se<1)return;v().push(...Array(se).fill(C))}finally{v().sort(ra),v(v())}},z=(j,C)=>{let V=0;v(v().filter(se=>se.name!==C.name?!0:(V++,!j.shiftKey&&V>1))),v().sort(ra)};let A=he(100);const Y=()=>{e(A)>t().length+v().length||(S(A,e(A)+10),Mt(100).then(Y))};Mt(100).then(Y);const re=(j,C)=>{if(!h())return!0;if(!h().cardKinds.includes(j.kind)||h().name.trim().length&&[j.name,...j.nameTags??[],...j.textTags??[]].every(se=>!se.includes(h().name))||j.isForTest&&!h().others.includes("test")||j.isOldVersion&&!h().others.includes("oldVersion"))return!1;if(j.kind==="Monster")return j.attributes&&!h().monsterAttributes.union(j.attributes).length||j.types&&!h().monsterTypes.union(j.types).length||!j.monsterCategories?!1:j.monsterCategories.union(h().monsterCategories).length;if(j.kind==="Spell")return j.spellCategory&&h().spellCategories.includes(j.spellCategory);if(j.kind==="Trap")return j.trapCategory&&h().trapCategories.includes(j.trapCategory)};st();var ne=gi(),Te=a(ne);yt(Te,()=>l,j=>{var C=pi();r(j,C)},j=>{var C=Me();const V=de(W);var se=U(C);ie(se,1,()=>sr,oe,(ye,J)=>{var ce=fi();const Ue=de(()=>Object.values(e(V)[e(J)]).flatMap(I=>I));var ke=a(ce),B=a(ke),N=a(B),le=s(B,2);{var pe=I=>{var g=li(),X=a(g);be("click",X,te=>F(te,e(J),void 0)),r(I,g)};m(le,I=>{_()==="Deck"&&e(Ue).some(re)&&I(pe)})}var _e=s(ke,2);ie(_e,1,()=>oa(e(V)[e(J)]).filter(I=>d[e(J)].includes(I)),oe,(I,g)=>{var X=ui();const te=de(()=>e(V)[e(J)][e(g)].filter(re));var ve=a(X),$=a(ve),H=a($),Q=s($,2);{var ee=q=>{var T=oi(),L=a(T);be("click",L,w=>F(w,e(J),e(g))),r(q,T)};m(Q,q=>{_()==="Deck"&&e(te).length&&q(ee)})}var p=s(ve,2);ie(p,5,()=>e(te),oe,(q,T,L)=>{var w=Me(),y=U(w);{var Z=we=>{var De=_i(),ge=a(De),ue=a(ge),M=a(ue),P=a(M),me=s(M,2),$e=a(me),Le=a($e);{var Ye=G=>{var xe=di(),qe=U(xe);{var We=Ce=>{var Be=at();u(()=>f(Be,`★${e(T).level??""}`)),r(Ce,Be)};m(qe,Ce=>{e(T).level&&Ce(We)})}var Ne=s(qe,2);{var ze=Ce=>{var Be=at();u(()=>f(Be,`☆${e(T).rank??""}`)),r(Ce,Be)};m(Ne,Ce=>{e(T).rank&&Ce(ze)})}var ot=s(Ne,2);ie(ot,1,()=>e(T).attributes??[],oe,(Ce,Be)=>{var Ae=vi();u(()=>Ee(Ae,`monster_attr ${e(Be)??""} svelte-swqq02`)),r(Ce,Ae)});var ct=s(ot,2);ie(ct,1,()=>e(T).types??[],oe,(Ce,Be)=>{var Ae=at();u(()=>f(Ae,Xt[e(Be)])),r(Ce,Ae)});var et=s(ct,2);ie(et,1,()=>e(T).monsterCategories??[],oe,(Ce,Be)=>{var Ae=at();u(()=>f(Ae,Qt[e(Be)])),r(Ce,Ae)}),r(G,xe)};m(Le,G=>{e(T).kind==="Monster"&&G(Ye)})}var je=s(Le,2);{var Fe=G=>{var xe=at();u(()=>f(xe,`${Zt[e(T).spellCategory]??""}魔法`)),r(G,xe)};m(je,G=>{e(T).spellCategory!==void 0&&G(Fe)})}var Ke=s(je,2);{var k=G=>{var xe=at();u(()=>f(xe,`${Jt[e(T).trapCategory]??""}罠`)),r(G,xe)};m(Ke,G=>{e(T).trapCategory!==void 0&&G(k)})}var b=s($e,4),x=a(b);{var R=G=>{var xe=ci(),qe=U(xe),We=a(qe),Ne=s(qe,2),ze=a(Ne);u(()=>{f(We,e(T).attack??"?"),f(ze,e(T).defense??"?")}),r(G,xe)};m(x,G=>{e(T).kind==="Monster"&&G(R)})}var Se=s(ge,2),Ie=s(Se,2);u(G=>{Ee(ge,`${G??""} svelte-swqq02`),f(P,e(T).name)},[()=>{var G,xe;return`deck_editor_card duel_card ${e(T).kind} ${(xe=(G=e(T))==null?void 0:G.monsterCategories)==null?void 0:xe.join(" ")} ${e(T).isImplemented?"is_implemented":"is_not_implemented"}`}],de),be("mouseenter",ge,()=>c()(e(T))),be("click",Se,G=>K(G,e(T))),be("click",Ie,G=>z(G,e(T))),r(we,De)};m(y,we=>{L<e(A)&&we(Z)})}r(q,w)}),u(()=>f(H,`${Ia[e(g)]??""}（${e(te).length??""} / ${e(V)[e(J)][e(g)].length??""}枚）`)),r(I,X)}),u(I=>f(N,`${rr[e(J)]??""}（${I??""} / ${e(Ue).length??""}枚）`),[()=>e(Ue).filter(re).length],de),r(ye,ce)}),r(j,C)}),r(o,ne),it()}var mi=n('<div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>'),bi=n('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),hi=n('<div></div> <div class="svelte-rccxcp"> </div>',1),yi=n("<div> </div>"),ki=n("<div> </div>"),wi=n('<div class="duel_card_info_row svelte-rccxcp"><!> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),xi=n('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Ci=n('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Di=n('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※エラッタ前カードです</div></div>'),$i=n('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),Si=n('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),Mi=n('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <!></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!> <!></div></div>');function Ti(o,i){rt(i,!1);let t=Re(i,"cardInfo",8,void 0);const v=()=>t()?ht[t().name]:void 0;st();var _=Me(),c=U(_);{var h=d=>{var E=Mi(),O=a(E),D=a(O),l=a(D),W=a(l),F=s(D,2);{var K=B=>{var N=mi(),le=a(N),pe=a(le),_e=s(le,2),I=a(_e);u((g,X)=>{f(pe,g),f(I,X)},[()=>"★".repeat(t().level||0),()=>"☆".repeat(t().rank||0)],de),r(B,N)};m(F,B=>{t().kind==="Monster"&&B(K)})}var z=s(O,2),A=a(z);{var Y=B=>{var N=bi(),le=U(N),pe=a(le),_e=a(pe),I=a(_e),g=s(le,2),X=a(g),te=a(X),ve=s(X,2),$=a(ve);u(()=>{f(I,ht[t().name].pendulumDescription),f(te,`◀ ${t().pendulumScaleL??""}`),f($,`${t().pendulumScaleR??""} ▶`)}),r(B,N)};m(A,B=>{var N;(N=t().monsterCategories)!=null&&N.includes("Pendulum")&&B(Y)})}var re=s(A,2);{var ne=B=>{var N=wi(),le=U(N),pe=a(le);{var _e=te=>{var ve=hi(),$=U(ve),H=s($,2),Q=a(H);u(()=>{Ee($,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),f(Q,`${va[t().attributes[0]]??""}属性`)}),r(te,ve)};m(pe,te=>{t().attributes&&te(_e)})}var I=s(pe,2);{var g=te=>{var ve=yi(),$=a(ve);u(()=>{Ee(ve,`monster_cat ${t().types[0]??""} svelte-rccxcp`),f($,`${Xt[t().types[0]]??""}${da[t().types[0]]??""}族`)}),r(te,ve)};m(I,te=>{t().types&&te(g)})}var X=s(le,2);ie(X,5,()=>t().monsterCategories??[],oe,(te,ve)=>{var $=ki(),H=a($);u(()=>{Ee($,`monster_cat ${e(ve)??""} svelte-rccxcp`),f(H,`${Qt[e(ve)]??""}${ca[e(ve)]??""}`)}),r(te,$)}),r(B,N)},Te=B=>{var N=Me(),le=U(N);{var pe=I=>{var g=xi(),X=s(a(g),2),te=a(X);u(()=>f(te,`${Zt[t().spellCategory]??""}魔法`)),r(I,g)},_e=I=>{var g=Me(),X=U(g);{var te=ve=>{var $=Ci(),H=s(a($),2),Q=a(H);u(()=>f(Q,`${Jt[t().trapCategory]??""}罠`)),r(ve,$)};m(X,ve=>{t().kind==="Trap"&&t().trapCategory&&ve(te)},!0)}r(I,g)};m(le,I=>{t().kind==="Spell"&&t().spellCategory?I(pe):I(_e,!1)},!0)}r(B,N)};m(re,B=>{t().kind==="Monster"?B(ne):B(Te,!1)})}var j=s(re,2),C=a(j),V=a(C),se=a(V),ye=s(j,2);{var J=B=>{var N=Di();r(B,N)};m(ye,B=>{t().isOldVersion&&B(J)})}var ce=s(ye,2);{var Ue=B=>{var N=$i();r(B,N)},ke=B=>{var N=Si(),le=a(N),pe=s(le,2),_e=a(pe);u(I=>{pt(le,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),pt(pe,"href",I),f(_e,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>ir(t())],de),r(B,N)};m(ce,B=>{t().isForTest?B(Ue):B(ke,!1)})}u((B,N)=>{Ee(E,`duel_card duel_card_info ${t().kind??""} ${B??""} svelte-rccxcp`),f(W,t().name),f(se,N)},[()=>{var B;return(B=t().monsterCategories)==null?void 0:B.join(" ")},()=>{var B;return(B=v())==null?void 0:B.description}],de),r(d,E)};m(c,d=>{t()&&d(h)})}r(o,_),it()}const ji={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class qi{constructor(){Ze(this,"DefaultSeparator1","/");Ze(this,"DefaultSeparator2"," ");Ze(this,"DefaultSeparator3",":");Ze(this,"createDate",i=>{if(!i)return;const t=new Date(i);if(!isNaN(t.getTime()))return t});Ze(this,"createDateOr",(i,t)=>this.createDate(i)||t||new Date);Ze(this,"truncateDate",i=>{const t=i||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});Ze(this,"addDate",(i,t)=>{const v=this.createDateOr(i);return v.setDate(v.getDate()+t),v});Ze(this,"addMonth",(i,t)=>{const v=this.createDateOr(i);return v.setMonth(v.getMonth()+t),v});Ze(this,"addYear",(i,t)=>{const v=this.createDateOr(i);return v.setFullYear(v.getFullYear()+t),v});Ze(this,"getDayOfWeek",(i,t="dddd")=>{const v=this.createDate(i);return v?ji[v.getDay()][t]:""});Ze(this,"formatToYYYYMMDD",(i,t=this.DefaultSeparator1)=>{const v=this.createDate(i);if(!v)return"";const _=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2),h=("0"+v.getDate()).slice(-2);return _+t+c+t+h});Ze(this,"formatToYYYYMM",(i,t=this.DefaultSeparator1)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const _=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2);return _+t+c});Ze(this,"formatToHHMMSS",(i,t=this.DefaultSeparator3)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const _=v.getHours(),c=v.getMinutes(),h=v.getSeconds();return("0"+_).slice(-2)+t+("0"+c).slice(-2)+t+("0"+h).slice(-2)});Ze(this,"formatToHHMM",(i,t=this.DefaultSeparator3)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const _=("0"+v.getHours()).slice(-2),c=("0"+v.getMinutes()).slice(-2);return _+t+c});Ze(this,"formatToYYYYMMDD_HHMM",(i,t=this.DefaultSeparator1,v=this.DefaultSeparator2,_=this.DefaultSeparator3)=>{const c=this.createDate(i);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMM(c,_):""});Ze(this,"formatToYYYYMMDD_HHMMSS",(i,t=this.DefaultSeparator1,v=this.DefaultSeparator2,_=this.DefaultSeparator3)=>{const c=this.createDate(i);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMMSS(c,_):""})}}const dt=new qi;Date.prototype.truncateDate=function(){return dt.truncateDate(this)};Date.prototype.getCloneOr=function(o){return dt.createDateOr(this,o)};Date.prototype.addDate=function(o){return dt.addDate(this,o)};Date.prototype.addMonth=function(o){return dt.addDate(this,o)};Date.prototype.addYear=function(o){return dt.addDate(this,o)};Date.prototype.getDayOfWeek=function(o="dddd"){return dt.getDayOfWeek(this,o)};Date.prototype.formatToYYYYMM=function(o){return dt.formatToYYYYMM(this,o)};Date.prototype.formatToYYYYMMDD=function(o){return dt.formatToYYYYMMDD(this,o)};Date.prototype.formatToYYYYMMDD_HHMM=function(o,i,t){return dt.formatToYYYYMMDD_HHMM(this,o,i,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(o,i,t){return dt.formatToYYYYMMDD_HHMMSS(this,o,i,t)};Date.prototype.formatToHHMM=function(o){return dt.formatToHHMM(this,o)};Date.prototype.formatToHHMMSS=function(o){return dt.formatToHHMMSS(this,o)};var Ei=n('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),Ai=n('<ul class="deck_info_list svelte-2wdgc8"></ul>'),Yi=n('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),Bi=n('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),Ni=n('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),Ii=n('<button class="svelte-2wdgc8">Cancel</button>'),Ui=n('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function Fi(o,i){rt(i,!1);let t=Re(i,"eventHolder",8),v=Re(i,"args",8),_=Re(i,"resolve",8),c=he(Promise.resolve([])),h=he();const d=()=>{S(h,new DataTransfer().files),S(c,Promise.resolve([]))},E=async F=>{F.preventDefault(),console.log("hoge",F)},O=async F=>{F.preventDefault(),F.dataTransfer&&l(F.dataTransfer.files)},D=()=>{l(e(h))},l=async F=>{if(!F.length)return;const K=[],z=[];for(const A of F)try{z.push(...await ft.createfromJson(A))}catch(Y){Y instanceof Error&&K.push(Y.message)}if(K.length){console.log(...K);return}S(c,e(c).then(()=>z))},W=d;st(),nr(o,{get eventHolder(){return t()},get args(){return v()},$$slots:{body:(F,K)=>{var z=Bi(),A=a(z);yt(A,()=>e(c),null,(Y,re)=>{var ne=Me(),Te=U(ne);{var j=V=>{var se=Ai();ie(se,5,()=>e(re),oe,(ye,J)=>{var ce=Ei(),Ue=a(ce),ke=a(Ue),B=s(Ue,2),N=a(B),le=s(B,2),pe=a(le);u((_e,I,g)=>{f(ke,e(J).name),f(N,`${_e??""}
                /
                ${I??""}`),f(pe,`最終使用日時 ： ${g??""}`)},[()=>e(J).cardNames.filter(_e=>v().mainCardNames.includes(_e)).length,()=>e(J).cardNames.filter(_e=>v().exCardNames.includes(_e)).length,()=>e(J).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],de),r(ye,ce)}),r(V,se)},C=V=>{var se=Yi(),ye=s(a(se),2),J=a(ye);lr(J,()=>e(h),ce=>S(h,ce)),be("change",J,D),be("cancel",J,W),be("drop",se,O),be("dragover",se,E),r(V,se)};m(Te,V=>{e(re).length?V(j):V(C,!1)})}r(Y,ne)}),r(F,z)},footer:(F,K)=>{var z=Ui(),A=a(z);yt(A,()=>e(c),null,(Y,re)=>{var ne=Me(),Te=U(ne);{var j=V=>{var se=Ni(),ye=U(se),J=s(ye,2),ce=s(J,2);u(()=>{ye.disabled=e(re).length===0,J.disabled=e(re).length===0}),be("click",ye,()=>_()({deckInfos:e(re),replaceAll:!1})),be("click",J,()=>_()({deckInfos:e(re),replaceAll:!0})),be("click",ce,W),r(V,se)},C=V=>{var se=Me(),ye=U(se);{var J=ce=>{var Ue=Ii();be("click",Ue,()=>_()(void 0)),r(ce,Ue)};m(ye,ce=>{v().cancelable&&ce(J)},!0)}r(V,se)};m(Te,V=>{e(re).length?V(j):V(C,!1)})}r(Y,ne)}),r(F,z)}}}),it()}const Gt=class Gt extends vr{constructor(i,t){super(i,...Object.values(t))}};Ze(Gt,"createModalController",i=>{const t={deckUploader:new dr({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1,mainCardNames:[],exCardNames:[]})};return Object.assign(new Gt(i,t),t)});let la=Gt;function Hi(o,i){rt(i,!1);let t=Re(i,"modalController",8);st(),or(o,{get modalController(){return t()},children:(v,_)=>{var c=Me(),h=U(c);{var d=E=>{Fi(E,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};m(h,E=>{t().deckUploader.state==="Shown"&&E(d)})}r(v,c)},$$slots:{default:!0}}),it()}var Pi=n('<label><input type="checkbox"> </label>'),Oi=n('<label><input type="checkbox"> </label>'),Li=n('<label><input type="checkbox"> <div style="display: inline-block;"></div> </label>'),Ri=n('<label><input type="checkbox"> </label>'),Wi=n('<div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5"><button class="search_condition_title black_button svelte-1s1plv5">モンスター</button></div> <div class="svelte-1s1plv5"></div></div> <div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5"><button class="search_condition_title black_button svelte-1s1plv5">属性</button></div> <div class="svelte-1s1plv5"></div></div> <div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5"><button class="search_condition_title black_button svelte-1s1plv5">種族</button></div> <div class="svelte-1s1plv5"></div></div>',1),Ki=n('<label><input type="checkbox"> </label>'),zi=n('<div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5"><button class="search_condition_title black_button svelte-1s1plv5">魔法</button></div> <div class="svelte-1s1plv5"></div></div>'),Vi=n('<label><input type="checkbox"> </label>'),Gi=n('<div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5"><button class="search_condition_title black_button svelte-1s1plv5">罠</button></div> <div class="svelte-1s1plv5"></div></div>'),Xi=n('<label><input type="checkbox"> </label>'),Qi=n("<option> </option>"),Zi=n('<div class="svelte-1s1plv5"><a class="white_button svelte-1s1plv5" download="SVS_DeckInfos.json">ダウンロード</a></div>'),Ji=n('<div class="svelte-1s1plv5"></div>'),en=n('<div class="svelte-1s1plv5"><a class="white_button svelte-1s1plv5" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),tn=n('<div class="svelte-1s1plv5"></div>'),an=n('<div class="deck_editor_body_right_header svelte-1s1plv5"><div class="deck_editor_body_right_header_row svelte-1s1plv5"><div class="svelte-1s1plv5">編集対象 <select></select></div> <div class="svelte-1s1plv5"></div> <div class="svelte-1s1plv5">新規名称 <input type="text"></div></div> <div class="deck_editor_body_right_header_row svelte-1s1plv5"></div> <div class="deck_editor_body_right_header_row svelte-1s1plv5"><div class="svelte-1s1plv5">基本操作</div> <div class="svelte-1s1plv5"><button class="white_button svelte-1s1plv5">デッキを保存</button></div> <div class="svelte-1s1plv5"></div> <div class="svelte-1s1plv5"><button class="white_button svelte-1s1plv5">デッキを複製</button></div> <div class="svelte-1s1plv5"><button class="white_button svelte-1s1plv5" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-1s1plv5"><div class="svelte-1s1plv5">DL/UL</div> <!> <!> <div class="svelte-1s1plv5"><button class="white_button svelte-1s1plv5">アップロード</button></div></div></div> <!>',1),rn=n("<div>デッキ情報読込中</div>"),sn=n('<div class="deck_editor svelte-1s1plv5"><div class="deck_editor_header"></div> <div class="deck_editor_body svelte-1s1plv5"><div class="deck_editor_body_left svelte-1s1plv5"><div role="contentinfo"><div class="deck_editor_search_box_header svelte-1s1plv5"><div>検索条件</div> <div><button class="white_button svelte-1s1plv5">条件クリア</button></div></div> <div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5">名称</div> <div class="svelte-1s1plv5"><input type="text" style="width:70%"> <button class="white_button svelte-1s1plv5">クリア</button> <span>※ルビには対応していません</span></div></div> <div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5"><button class="search_condition_title black_button svelte-1s1plv5">種類</button></div> <div class="svelte-1s1plv5"></div></div> <!> <!> <!> <div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5"><button class="search_condition_title black_button svelte-1s1plv5">その他</button></div> <div class="svelte-1s1plv5"></div></div></div> <!></div> <div class="deck_editor_body_center svelte-1s1plv5"><!></div> <div class="deck_editor_body_right svelte-1s1plv5"><!></div></div> <div class="footer svelte-1s1plv5"></div></div> <!>',1);function nn(o,i){rt(i,!1);const t=[],v=[],_=[],c=[],h=[],d=[],E=[],O=la.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),D={name:"",cardKinds:wa.filter(k=>k!=="XyzMaterial"),monsterCategories:[...Sa],monsterAttributes:[...$a],monsterTypes:[...Da],spellCategories:[...Ca],trapCategories:[...xa],others:["test","oldVersion"]},l=he(structuredClone(D));Oe(l,e(l).others=["oldVersion"]);let W=he("SearchCondition");const F=async()=>{Oe(l,e(l).name=""),Oe(l,e(l).cardKinds=[]),Oe(l,e(l).monsterCategories=[]),Oe(l,e(l).monsterAttributes=[]),Oe(l,e(l).monsterTypes=[]),Oe(l,e(l).spellCategories=[]),Oe(l,e(l).trapCategories=[]),Oe(l,e(l).others=[])},K=async k=>{Array.isArray(e(l)[k])&&Array.isArray(D[k])&&Oe(l,e(l)[k]=e(l)[k].length?[]:[...D[k]])},z=(k,b,x)=>{Array.isArray(e(l)[b])&&Array.isArray(D[b])&&Oe(l,e(l)[b]=[x])},A=async()=>{const b=(await e(ne)).find(x=>x.id===e(re));b&&S(C,{...b,cardInfos:b.cardNames.map(x=>ht[x])})},Y=()=>ft.getAllDeckInfo().then(k=>(S(re,(k.find(b=>b.lastUsedAt.getTime()===Math.max(...k.map(x=>x.lastUsedAt.getTime())))??k[0]).id),k));let re=he(-1),ne=he(Y()),Te=he(e(ne).then(k=>ft.convertToObjectURL(k)));e(ne).then(A);const j=()=>{S(ne,Y()),S(Te,e(ne).then(k=>ft.convertToObjectURL(k))),A()};let C=he({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),V=he(ht.ゾンビーノ);const se=k=>{S(W,"CardDetail"),S(V,k)},ye=async()=>{const b=(await e(ne)).find(x=>x.id===e(re));if(!b)throw new Error("illegal state");return b},J=async()=>{const k=await ye();await k.saveDeckInfo({...k,name:e(C).name,cardNames:e(C).cardInfos.map(b=>b.name),lastUsedAt:new Date}),j()},ce=async()=>{(await ft.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,e(C).cardInfos.map(b=>b.name))).saveDeckInfo(),j()},Ue=async k=>{const b=await ye();!k.shiftKey&&!confirm(`デッキ【${b.name}】を削除します。
よろしいですか？`)||(await b.delete(),j())},ke=async()=>{const k=await O.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0,mainCardNames:Object.values(ht).filter(x=>{var R;return!((R=x.monsterCategories)!=null&&R.union(zt).length)}).map(x=>x.name),exCardNames:Object.values(ht).filter(x=>{var R;return(R=x.monsterCategories)==null?void 0:R.union(zt).length}).map(x=>x.name)});if(!k)return;const b=[];if(k.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;b.push(...(await e(ne)).map(x=>x.id))}await Promise.all(k.deckInfos.map(x=>ft.createNewDeck(x.name,x.description,x.cardNames,x.lastUsedAt))),b.length&&await Promise.all(b.map(ft.remove)),j()};st();var B=sn(),N=U(B),le=s(a(N),2),pe=a(le),_e=a(pe),I=a(_e),g=s(a(I),2),X=a(g),te=s(I,2),ve=s(a(te),2),$=a(ve),H=s($,2),Q=s(te,2),ee=a(Q),p=a(ee),q=s(ee,2);ie(q,5,()=>wa.filter(k=>k!=="XyzMaterial"),oe,(k,b)=>{var x=Pi(),R=a(x),Se,Ie=s(R);u(()=>{Se!==(Se=e(b))&&(R.value=(R.__value=e(b))==null?"":e(b)),f(Ie,` ${Ia[e(b)]??""}`)}),Dt(t,[],R,()=>(e(b),e(l).cardKinds),G=>Oe(l,e(l).cardKinds=G)),r(k,x)});var T=s(Q,2);{var L=k=>{var b=Wi(),x=U(b),R=a(x),Se=a(R),Ie=s(R,2);ie(Ie,5,()=>Sa,oe,(et,Ce)=>{var Be=Oi(),Ae=a(Be),Ve,vt=s(Ae);u(()=>{Ve!==(Ve=e(Ce))&&(Ae.value=(Ae.__value=e(Ce))==null?"":e(Ce)),f(vt,` ${Qt[e(Ce)]??""}${ca[e(Ce)]??""}`)}),Dt(v,[],Ae,()=>(e(Ce),e(l).monsterCategories),nt=>Oe(l,e(l).monsterCategories=nt)),r(et,Be)});var G=s(x,2),xe=a(G),qe=a(xe),We=s(xe,2);ie(We,5,()=>$a,oe,(et,Ce)=>{var Be=Li(),Ae=a(Be),Ve,vt=s(Ae,2),nt=s(vt);u(()=>{Ve!==(Ve=e(Ce))&&(Ae.value=(Ae.__value=e(Ce))==null?"":e(Ce)),Ee(vt,`monster_attr ${e(Ce)??""} svelte-1s1plv5`),f(nt,` ${va[e(Ce)]??""}`)}),Dt(_,[],Ae,()=>(e(Ce),e(l).monsterAttributes),mt=>Oe(l,e(l).monsterAttributes=mt)),r(et,Be)});var Ne=s(G,2),ze=a(Ne),ot=a(ze),ct=s(ze,2);ie(ct,5,()=>Da,oe,(et,Ce)=>{var Be=Ri(),Ae=a(Be),Ve,vt=s(Ae);u(()=>{Ve!==(Ve=e(Ce))&&(Ae.value=(Ae.__value=e(Ce))==null?"":e(Ce)),f(vt,` ${Xt[e(Ce)]??""}
                  ${da[e(Ce)]??""}`)}),Dt(c,[],Ae,()=>(e(Ce),e(l).monsterTypes),nt=>Oe(l,e(l).monsterTypes=nt)),be("dblclick",Be,nt=>z(nt,"monsterTypes",e(Ce))),r(et,Be)}),be("click",Se,()=>K("monsterCategories")),ae(3,x,()=>fe,()=>({delay:0,duration:100})),be("click",qe,()=>K("monsterAttributes")),ae(3,G,()=>fe,()=>({delay:0,duration:100})),be("click",ot,()=>K("monsterTypes")),ae(3,Ne,()=>fe,()=>({delay:0,duration:100})),r(k,b)};m(T,k=>{e(l).cardKinds.includes("Monster")&&k(L)})}var w=s(T,2);{var y=k=>{var b=zi(),x=a(b),R=a(x),Se=s(x,2);ie(Se,5,()=>Ca,oe,(Ie,G)=>{var xe=Ki(),qe=a(xe),We,Ne=s(qe);u(()=>{We!==(We=e(G))&&(qe.value=(qe.__value=e(G))==null?"":e(G)),f(Ne,` ${Zt[e(G)]??""}`)}),Dt(h,[],qe,()=>(e(G),e(l).spellCategories),ze=>Oe(l,e(l).spellCategories=ze)),r(Ie,xe)}),be("click",R,()=>K("spellCategories")),ae(3,b,()=>fe,()=>({delay:0,duration:100})),r(k,b)};m(w,k=>{e(l).cardKinds.includes("Spell")&&k(y)})}var Z=s(w,2);{var we=k=>{var b=Gi(),x=a(b),R=a(x),Se=s(x,2);ie(Se,5,()=>xa,oe,(Ie,G)=>{var xe=Vi(),qe=a(xe),We,Ne=s(qe);u(()=>{We!==(We=e(G))&&(qe.value=(qe.__value=e(G))==null?"":e(G)),f(Ne,` ${Jt[e(G)]??""}`)}),Dt(d,[],qe,()=>(e(G),e(l).trapCategories),ze=>Oe(l,e(l).trapCategories=ze)),r(Ie,xe)}),be("click",R,()=>K("trapCategories")),ae(3,b,()=>fe,()=>({delay:0,duration:100})),r(k,b)};m(Z,k=>{e(l).cardKinds.includes("Trap")&&k(we)})}var De=s(Z,2),ge=a(De),ue=a(ge),M=s(ge,2);ie(M,4,()=>[{key:"test",text:"テスト用カードを表示する"},{key:"oldVersion",text:"エラッタ前カードを表示する"}],oe,(k,b)=>{var x=Xi(),R=a(x),Se,Ie=s(R);u(()=>{Se!==(Se=b.key)&&(R.value=(R.__value=b.key)==null?"":b.key),f(Ie,` ${b.text??""}`)}),Dt(E,[],R,()=>(b.key,e(l).others),G=>Oe(l,e(l).others=G)),r(k,x)});var P=s(_e,2);Ti(P,{get cardInfo(){return e(V)}});var me=s(pe,2),$e=a(me);const Le=de(()=>Object.values(ht));Ba($e,{mode:"List",get allCardInfos(){return e(Le)},onAttention:se,get searchCondition(){return e(l)},get deckCardInfos(){return e(C).cardInfos},set deckCardInfos(k){Oe(C,e(C).cardInfos=k)},$$legacy:!0});var Ye=s(me,2),je=a(Ye);yt(je,()=>e(ne),k=>{var b=rn();r(k,b)},(k,b)=>{var x=an(),R=U(x),Se=a(R),Ie=a(Se),G=s(a(Ie));u(()=>{e(re),At(()=>{e(b)})}),ie(G,5,()=>e(b),oe,(Xe,He)=>{var Pe=Qi(),Ge={},Qe=a(Pe);u(()=>{Ge!==(Ge=e(He).id)&&(Pe.value=(Pe.__value=e(He).id)==null?"":e(He).id),f(Qe,e(He).name)}),r(Xe,Pe)});var xe=s(Ie,4),qe=s(a(xe)),We=s(Se,4),Ne=s(a(We),2),ze=a(Ne),ot=s(Ne,4),ct=a(ot),et=s(ot,2),Ce=a(et),Be=s(We,2),Ae=s(a(Be),2);yt(Ae,ye,Xe=>{var He=Ji();r(Xe,He)},(Xe,He)=>{var Pe=Zi(),Ge=a(Pe);u(Qe=>pt(Ge,"href",Qe),[()=>ft.convertToObjectURL([e(He)])],de),r(Xe,Pe)});var Ve=s(Ae,2);yt(Ve,()=>e(Te),Xe=>{var He=tn();r(Xe,He)},(Xe,He)=>{var Pe=en(),Ge=a(Pe);u(()=>pt(Ge,"href",e(He))),r(Xe,Pe)});var vt=s(Ve,2),nt=a(vt),mt=s(R,2);Ba(mt,{mode:"Deck",allCardInfos:[],onAttention:se,get deckCardInfos(){return e(C).cardInfos},set deckCardInfos(Xe){Oe(C,e(C).cardInfos=Xe)},$$legacy:!0}),Yt(G,()=>e(re),Xe=>S(re,Xe)),be("change",G,A),sa(qe,()=>e(C).name,Xe=>Oe(C,e(C).name=Xe)),be("click",ze,J),be("click",ct,ce),be("click",Ce,Ue),be("click",nt,ke),r(k,x)});var Fe=s(le,2);Fe.textContent=`実装済カード${cr+Ma}枚（内、効果のないモンスター${Ma??""}枚）`;var Ke=s(N,2);Hi(Ke,{modalController:O}),u(()=>Ee(_e,`deck_editor_search_box ${(e(W)==="SearchCondition"?"":"minimum")??""} svelte-1s1plv5`)),be("click",X,F),sa($,()=>e(l).name,k=>Oe(l,e(l).name=k)),be("click",H,()=>Oe(l,e(l).name="")),be("click",p,()=>K("cardKinds")),be("click",ue,()=>K("others")),ae(3,De,()=>fe,()=>({delay:0,duration:100})),be("mouseenter",_e,()=>S(W,"SearchCondition")),r(o,B),it()}String.prototype.format=(o,...i)=>{for(const[t,v]of i.entries()){const _=new RegExp(`\\{${t}\\}`,"g");o=o.replace(_,v)}return o};String.prototype.toSnakeCase=function(){return this.split(/(?=[A-Z])/).join("_").toLowerCase()};const ln=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],on=3;var vn=n('<input class="game_mode_radio svelte-abgng1" type="radio" name="game_mode"> <label> </label>',1),dn=n('<option class="svelte-abgng1"> </option>'),cn=n('<option class="svelte-abgng1"> </option>'),_n=n('<option class="svelte-abgng1"> </option>'),un=n('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-abgng1">デッキ：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_deck_selector" class="deck_selector svelte-abgng1"><option class="svelte-abgng1">デフォルト</option><!></select></div></td></tr>'),fn=n('<option class="svelte-abgng1"> </option>'),pn=n('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_selector" class="config_row_label npc_selector svelte-abgng1">対戦相手：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_selector" class="npc_selector svelte-abgng1"></select> <div class="svelte-abgng1"> </div></div></td></tr> <!> <tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_selector" class="config_row_label npc_selector svelte-abgng1">先攻後攻：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_selector" class="npc_selector svelte-abgng1"></select></div></td></tr>',1),gn=n('<option class="svelte-abgng1"> </option>'),mn=n('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-abgng1">難易度：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="difficulty_selector" class="difficulty_selector svelte-abgng1"></select></div></td></tr>'),bn=n('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label class="config_row_label svelte-abgng1" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"></div></td></tr> <tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="deck_selector" class="config_row_label deck_selector svelte-abgng1">デッキ：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="deck_selector" class="deck_selector svelte-abgng1"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-abgng1"><div><button class="btn svelte-abgng1">duel start!</button></div></td></tr>',1),hn=n('<tr><td colspan="2" class="svelte-abgng1"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),yn=n('<tr><td colspan="2" class="svelte-abgng1"><div><button class="btn svelte-abgng1">deck edit</button></div></td></tr>'),kn=n('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="duelist_name" class="config_row_label duelist_name svelte-abgng1">名前：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><input id="duelist_name" class="duelist_name svelte-abgng1" type="text"></div></td></tr> <!> <!>',1),wn=n('<tr><td colspan="2" class="svelte-abgng1"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),xn=n('<div class="app_body svelte-abgng1"><table class="config_table svelte-abgng1"><tbody><!></tbody></table></div>'),Cn=n('<div class="result_title result_win svelte-abgng1">YOU WIN</div>'),Dn=n('<div class="result_title result_lose svelte-abgng1">YOU LOSE</div>'),$n=n('<div class="result_title result_draw svelte-abgng1">DRAW</div>'),Sn=n('<div class="twitter_share_button_wrapper svelte-abgng1"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-abgng1">X(twitter)でシェアする</a></div>'),Mn=n('<div class="result svelte-abgng1"><!> <div class="reason_of_end svelte-abgng1"> </div> <!> <div class="svelte-abgng1"><button class="white_button svelte-abgng1">TOPへ戻る</button></div></div>'),Tn=n('<main style="flex-direction: column; display :flex" class="svelte-abgng1"><div class="link link_left svelte-abgng1"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-abgng1">posfie(toggeter)</a></div> <div class="link link_right svelte-abgng1"><a class="a_button svelte-abgng1" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">現時点とこの先のこと</a></div> <!> <div class="debug_info svelte-abgng1"><span class="svelte-abgng1"> </span> <span class="user_agent_info svelte-abgng1"> </span> <span class="screen_info svelte-abgng1"> </span></div> <!></main>');function jn(o,i){rt(i,!1);const t=new _r("stk_ygo_svelte",on,ln);let v=he(0),_=he(0),c=he(),h=he("FtkChallenge"),d=he("None"),E=he(0),O=he(""),D=he(void 0);const l="https://setta238.github.io/stk_ygo_svelte/",W="遊戯王deそりてあ",F="ninja_no",K=ur.getOrCreateNew(t).then(p=>(S(h,Ta.includes(p.previousGameMode)?p.previousGameMode:"FtkChallenge"),Ue(p.previousNpcId),p)),z=p=>{var T;const q=p.find(L=>L.lastUsedAt.getTime()===Math.max(...p.map(w=>w.lastUsedAt.getTime())))??p[0];S(E,q.id),e(h)==="FtkChallenge"&&q.deckType!=="Preset"&&S(E,((T=$t.find(L=>L.deckType==="Preset"))==null?void 0:T.id)??e(E))};let A=he(ft.getAllDeckInfo(t).then(p=>(Promise.all(p.filter(q=>!q.lastUsedAt).map(q=>{q.saveDeckInfo()})),z(p),p)));const Y=async()=>{const p=e(E);let q=(await e(A)).find(L=>L.id===p)??(await ne()).find(L=>L.id===p);q&&await q.updateTimestamp();let T=q;if(T||(T=$t.find(L=>L.id===p)),!T)throw new Error("illegal state");return T},re=async()=>{(await K).save({previousGameMode:e(h)})},ne=()=>(S(A,ft.getAllDeckInfo(t).then(p=>(z(p),p))),e(A)),Te=async()=>{(await e(A)).length||(await ft.prepareSampleDeck(),ne())},j=async()=>{await Promise.all([re(),Te()]);const p=await Y(),q=await K;let T=Et.find(y=>y.id===Number.MIN_SAFE_INTEGER)??Et[0],L=$t.find(y=>y.id===Number.MIN_SAFE_INTEGER)??$t[0],w="PlayFirst";e(h)==="FtkChallenge"?T=Et.filter(y=>y.npcType==="FtkChallenge").find(y=>y.difficulty===q.previousDifficulty)??T:e(h)==="Free"&&(T=Et.find(y=>y.id===q.previousNpcId)??T,L=$t.slice(-1)[0],w=q.previousStartMode),T.npcType!=="FtkChallenge"&&q.previousNpcDeckId>-1?L=(await e(A)).find(y=>y.id===q.previousNpcDeckId)??L:L=$t.find(y=>y.id===T.id)??L,S(c,new pr(q,"Player",p,[],T,"NPC",L,[],w)),e(c).onDuelEnd.append(()=>(S(c,e(c)),"RemoveMe"))},C=async()=>{await Promise.all([re(),Te()]),S(d,"DeckEdit")},V=async p=>{await re(),p.key==="Enter"&&!p.repeat&&(await K).save()},se=()=>{S(A,ne()),S(c,void 0),S(d,"None")};let ye=Date.now();const J=p=>{Date.now()-ye<200||(ye=Date.now(),S(h,p),ne())},ce=p=>{Ue(Number(p.currentTarget.value))},Ue=p=>{var q;S(D,Et.find(T=>T.id===p)),S(O,((q=e(D))==null?void 0:q.description)??"")};Te(),st();var ke=Tn(),B=s(a(ke),2),N=a(B),le=s(B,2);{var pe=p=>{var q=Me(),T=U(q);yt(T,()=>K,null,(L,w)=>{ni(L,{get duel(){return e(c)},get userProfile(){return e(w)}})}),r(p,q)},_e=p=>{var q=Me(),T=U(q);{var L=y=>{nn(y,{})},w=y=>{var Z=xn(),we=a(Z),De=a(we),ge=a(De);yt(ge,()=>K,ue=>{var M=wn();r(ue,M)},(ue,M)=>{var P=kn(),me=U(P),$e=a(me),Le=a($e),Ye=s($e),je=a(Ye),Fe=a(je),Ke=s(me,2);yt(Ke,()=>e(A),x=>{var R=hn();r(x,R)},(x,R)=>{var Se=bn(),Ie=U(Se),G=a(Ie),xe=a(G),qe=s(G),We=a(qe);ie(We,5,()=>Ta,oe,(He,Pe)=>{var Ge=vn(),Qe=U(Ge),_t=s(Qe,2),kt=a(_t);u(gt=>{pt(Qe,"id",`game_mode_radio_${gt??""}`),gr(Qe,e(Pe)),mr(Qe,e(h)===e(Pe)),Ee(_t,`game_mode_tab_label game_mode_tab_${gt??""} svelte-abgng1`),pt(_t,"for",`game_mode_radio_${gt??""}`),f(kt,e(Pe))},[()=>e(Pe).toLowerCase()],de),be("change",Qe,()=>J(e(Pe))),r(He,Ge)});var Ne=s(Ie,2),ze=a(Ne),ot=a(ze),ct=s(ze),et=a(ct),Ce=a(et);u(()=>{e(E),At(()=>{e(h),e(R)})}),ie(Ce,5,()=>e(h)==="FtkChallenge"?$t.filter(He=>He.deckType==="Preset"):e(R),oe,(He,Pe)=>{var Ge=dn(),Qe={},_t=a(Ge);u(()=>{Qe!==(Qe=e(Pe).id)&&(Ge.value=(Ge.__value=e(Pe).id)==null?"":e(Pe).id),f(_t,e(Pe).name)}),r(He,Ge)});var Be=s(Ne,2);{var Ae=He=>{var Pe=pn(),Ge=U(Pe),Qe=a(Ge),_t=a(Qe),kt=s(Qe),gt=a(kt),jt=a(gt);u(()=>{e(M),At(()=>{})}),ie(jt,5,()=>Et,oe,(ut,Je)=>{var lt=cn(),Ct={},qt=a(lt);u(()=>{Ct!==(Ct=e(Je).id)&&(lt.value=(lt.__value=e(Je).id)==null?"":e(Je).id),f(qt,e(Je).name)}),r(ut,lt)});var Ht=s(jt,2),Pt=a(Ht),Nt=s(Ge,2);{var It=ut=>{var Je=un(),lt=a(Je),Ct=a(lt),qt=s(lt),ga=a(qt),ma=a(ga);u(()=>{e(M),At(()=>{e(R)})});var ea=a(ma);ea.value=(ea.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Ua=s(ea);ie(Ua,1,()=>e(R),oe,(ta,Rt)=>{var Wt=_n(),ba={},Fa=a(Wt);u(()=>{ba!==(ba=e(Rt).id)&&(Wt.value=(Wt.__value=e(Rt).id)==null?"":e(Rt).id),f(Fa,e(Rt).name)}),r(ta,Wt)}),ae(3,Ct,()=>fe,()=>({duration:200})),ae(3,lt,()=>fe,()=>({duration:200})),Yt(ma,()=>e(M).previousNpcDeckId,ta=>e(M).previousNpcDeckId=ta),ae(3,ga,()=>fe,()=>({duration:200})),ae(3,qt,()=>fe,()=>({duration:200})),ae(3,Je,()=>fe,()=>({duration:200})),r(ut,Je)};m(Nt,ut=>{var Je;((Je=e(D))==null?void 0:Je.npcType)!=="FtkChallenge"&&ut(It)})}var xt=s(Nt,2),wt=a(xt),Ot=a(wt),Lt=s(wt),fa=a(Lt),pa=a(fa);u(()=>{e(M),At(()=>{})}),ie(pa,5,()=>oa(ja),oe,(ut,Je)=>{var lt=fn(),Ct={},qt=a(lt);u(()=>{Ct!==(Ct=e(Je))&&(lt.value=(lt.__value=e(Je))==null?"":e(Je)),f(qt,ja[e(Je)])}),r(ut,lt)}),u(()=>f(Pt,`※${e(O)??""}`)),ae(3,_t,()=>fe,()=>({duration:200})),ae(3,Qe,()=>fe,()=>({duration:200})),be("change",jt,ce),Yt(jt,()=>e(M).previousNpcId,ut=>e(M).previousNpcId=ut),ae(3,gt,()=>fe,()=>({duration:200})),ae(3,kt,()=>fe,()=>({duration:200})),ae(3,Ge,()=>fe,()=>({duration:200})),ae(3,Ot,()=>fe,()=>({duration:200})),ae(3,wt,()=>fe,()=>({duration:200})),Yt(pa,()=>e(M).previousStartMode,ut=>e(M).previousStartMode=ut),ae(3,fa,()=>fe,()=>({duration:200})),ae(3,Lt,()=>fe,()=>({duration:200})),ae(3,xt,()=>fe,()=>({duration:200})),r(He,Pe)},Ve=He=>{var Pe=Me(),Ge=U(Pe);{var Qe=_t=>{var kt=mn(),gt=a(kt),jt=a(gt),Ht=s(gt),Pt=a(Ht),Nt=a(Pt);u(()=>{e(M),At(()=>{})}),ie(Nt,5,()=>br,oe,(It,xt)=>{var wt=gn(),Ot={},Lt=a(wt);u(()=>{Ot!==(Ot=e(xt))&&(wt.value=(wt.__value=e(xt))==null?"":e(xt)),f(Lt,e(xt))}),r(It,wt)}),ae(3,jt,()=>fe,()=>({duration:200})),ae(3,gt,()=>fe,()=>({duration:200})),Yt(Nt,()=>e(M).previousDifficulty,It=>e(M).previousDifficulty=It),ae(3,Pt,()=>fe,()=>({duration:200})),ae(3,Ht,()=>fe,()=>({duration:200})),ae(3,kt,()=>fe,()=>({duration:200})),r(_t,kt)};m(Ge,_t=>{e(h)==="FtkChallenge"&&_t(Qe)},!0)}r(He,Pe)};m(Be,He=>{e(h)==="Free"?He(Ae):He(Ve,!1)})}var vt=s(Be,2),nt=a(vt),mt=a(nt),Xe=a(mt);ae(3,xe,()=>fe,()=>({duration:200})),ae(3,G,()=>fe,()=>({duration:200})),ae(3,We,()=>fe,()=>({duration:200})),ae(3,qe,()=>fe,()=>({duration:200})),ae(3,Ie,()=>fe,()=>({duration:200})),ae(3,ot,()=>fe,()=>({duration:200})),ae(3,ze,()=>fe,()=>({duration:200})),Yt(Ce,()=>e(E),He=>S(E,He)),ae(3,et,()=>fe,()=>({duration:200})),ae(3,ct,()=>fe,()=>({duration:200})),ae(3,Ne,()=>fe,()=>({duration:200})),be("click",Xe,j),ae(3,mt,()=>fe,()=>({duration:200})),r(x,Se)});var k=s(Ke,2);{var b=x=>{var R=yn(),Se=a(R),Ie=a(Se),G=a(Ie);be("click",G,C),ae(3,Ie,()=>fe,()=>({duration:200})),ae(3,Se,()=>fe,()=>({duration:200})),ae(3,R,()=>fe,()=>({duration:200})),r(x,R)};m(k,x=>{e(h)==="Free"&&x(b)})}ae(3,Le,()=>fe,()=>({duration:200})),ae(3,$e,()=>fe,()=>({duration:200})),sa(Fe,()=>e(M).name,x=>e(M).name=x),be("keypress",Fe,V),ae(3,je,()=>fe,()=>({duration:200})),ae(3,Ye,()=>fe,()=>({duration:200})),ae(3,me,()=>fe,()=>({duration:200})),r(ue,P)}),r(y,Z)};m(T,y=>{e(d)==="DeckEdit"?y(L):y(w,!1)},!0)}r(p,q)};m(le,p=>{e(c)?p(pe):p(_e,!1)})}var I=s(le,2),g=a(I),X=a(g),te=s(g,2),ve=a(te),$=s(te,2),H=a($),Q=s(I,2);{var ee=p=>{var q=Mn(),T=a(q);{var L=M=>{var P=Me(),me=U(P);{var $e=Ye=>{var je=Cn();r(Ye,je)},Le=Ye=>{var je=Me(),Fe=U(je);{var Ke=k=>{var b=Dn();r(k,b)};m(Fe,k=>{e(c).winner.seat==="Above"&&k(Ke)},!0)}r(Ye,je)};m(me,Ye=>{e(c).winner.seat==="Below"?Ye($e):Ye(Le,!1)})}r(M,P)},w=M=>{var P=$n();r(M,P)};m(T,M=>{e(c).winner?M(L):M(w,!1)})}var y=s(T,2),Z=a(y),we=s(y,2);{var De=M=>{var P=Sn(),me=a(P);u(()=>pt(me,"href",`https://x.com/share?url=${l}&text=${e(c).twitterShareText??""}&hashtags=${W}&via=${F}`)),r(M,P)};m(we,M=>{e(c).twitterShareText&&M(De)})}var ge=s(we,2),ue=a(ge);u(()=>f(Z,e(c).reasonOfEnd)),be("click",ue,se),ae(3,q,()=>kr,()=>({delay:200,duration:200})),r(p,q)};m(Q,p=>{e(c)&&e(c).isEnded&&p(ee)})}u(()=>{f(X,"build at: 20251215_085357"),f(ve,fr.text),f(H,`w:${e(v)??""}px h:${e(_)??""}px`)}),Kt("innerWidth",p=>S(v,p)),Kt("innerHeight",p=>S(_,p)),be("click",N,se),r(o,ke),it()}hr(jn,{target:document.getElementById("app")});
