var Kt=Object.defineProperty;var Rt=(_,l,a)=>l in _?Kt(_,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):_[l]=a;var Z=(_,l,a)=>Rt(_,typeof l!="symbol"?l+"":l,a);import{p as Je,l as Ke,o as Qe,t as c,q as X,r as s,u as t,v as e,w as G,x as B,y as f,z as Se,A as n,B as Ee,C as b,E as Te,F as mt,G as W,H as oe,J as Ze,K as Le,L as Be,M as Ge,O as fe,Q as Ye,R as Oe,T as R,U as Ve,V as vt,W as Wt,X as I,Y as Re,Z as We,_ as Bt,$ as Vt,a0 as qt,a1 as It,a2 as Xt,a3 as Gt,a4 as rt,a5 as ft,a6 as Jt,a7 as ht,a8 as Qt,a9 as Zt}from"./duel.js";import{k as it,n as ot,p as lt,v as wt,w as ea,r as nt,t as dt,x as ta,a as bt,q as jt,y as aa,u as Yt,o as St,z as gt,A as Dt,B as kt,C as yt,D as xt,E as Mt}from"./card.js";import"./json.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))r(m);new MutationObserver(m=>{for(const u of m)if(u.type==="childList")for(const V of u.addedNodes)V.tagName==="LINK"&&V.rel==="modulepreload"&&r(V)}).observe(document,{childList:!0,subtree:!0});function a(m){const u={};return m.integrity&&(u.integrity=m.integrity),m.referrerPolicy&&(u.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?u.credentials="include":m.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(m){if(m.ep)return;m.ep=!0;const u=a(m);fetch(m.href,u)}})();var sa=c("<div></div>"),ra=c('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),ia=c('<li class="deck_editor_item svelte-vivzk2"><div role="listitem"><div class="svelte-vivzk2"><div class="svelte-vivzk2"> </div> <div style="display:flex" class="svelte-vivzk2"><div class="svelte-vivzk2"><!> <!> <!> <!> <!> <!> <!></div> <div style="flex-grow: 1; width:0.1rem" class="svelte-vivzk2"></div> <div class="svelte-vivzk2"><!></div></div></div></div> <button class="button_style_reset svelte-vivzk2" title="※shiftキー同時押しで一括投入">+</button> <button class="button_style_reset svelte-vivzk2" title="※shiftキー同時押しで一括外し">-</button></li>'),va=c('<div class="deck_editor_card_kind svelte-vivzk2"><span class="svelte-vivzk2"> </span> <ul class="svelte-vivzk2"></ul></div>'),oa=c('<div class="deck_editor_deck_type svelte-vivzk2"><span class="svelte-vivzk2"> </span> <!></div>'),la=c('<div class="deck_editor_card_list svelte-vivzk2"></div>');function Ct(_,l){Je(l,!1);let a=Ke(l,"allCardInfos",8),r=Ke(l,"deckCardInfos",12),m=Ke(l,"mode",8),u=Ke(l,"onAttention",8);const V={Deck:["Monster","Spell","Trap"],ExtraDeck:["Monster"]},J=(q,E)=>(m()==="List"?a():r()).filter(C=>{var $,O;return mt.has(C.name)||(($=C.monsterCategories)==null?void 0:$.includes("Normal"))&&!((O=C.monsterCategories)!=null&&O.includes("Pendulum"))}).filter(C=>!E||C.kind===E).filter(C=>{var $,O;return!q||q==="Deck"&&!(($=C==null?void 0:C.monsterCategories)!=null&&$.union(bt).length)||q==="ExtraDeck"&&((O=C==null?void 0:C.monsterCategories)==null?void 0:O.union(bt).length)}),ue=(q,E)=>{try{if(q.ctrlKey){r().push(E);return}const C=r().filter(O=>O.name===E.name).length;if(C>2)return;const $=q.shiftKey?3-C:1;if($<1)return;r().push(...Array($).fill(E))}finally{r().sort(it),r(r())}},v=(q,E)=>{let C=0;r(r().filter($=>$.name!==E.name?!0:(C++,!q.shiftKey&&C>1))),r().sort(it)};Qe();var ie=la();X(ie,5,()=>ta,G,(q,E)=>{var C=oa(),$=t(C),O=t($),ke=s($,2);X(ke,1,()=>V[e(E)],G,(le,z)=>{var pe=va(),Me=t(pe),ye=t(Me),he=s(Me,2);X(he,5,()=>J(e(E),e(z)).toSorted(it),G,(ee,w)=>{var Ce=ia(),be=t(Ce),we=t(be),je=t(we),p=t(je),g=s(je,2),d=t(g),D=t(d);{var Y=h=>{var M=Ee();f(()=>b(M,`★${e(w).level??""}`)),n(h,M)};B(D,h=>{e(w).level&&h(Y)})}var S=s(D,2);{var U=h=>{var M=Ee();f(()=>b(M,`☆${e(w).rank??""}`)),n(h,M)};B(S,h=>{e(w).rank&&h(U)})}var H=s(S,2);X(H,1,()=>e(w).attributes??[],G,(h,M)=>{var Q=sa();f(()=>Se(Q,`monster_attr ${e(M)??""} svelte-vivzk2`)),n(h,Q)});var F=s(H,2);X(F,1,()=>e(w).types??[],G,(h,M)=>{var Q=Ee();f(()=>b(Q,ot[e(M)])),n(h,Q)});var y=s(F,2);X(y,1,()=>e(w).monsterCategories??[],G,(h,M)=>{var Q=Ee();f(()=>b(Q,lt[e(M)])),n(h,Q)});var A=s(y,2);{var x=h=>{var M=Ee();f(()=>b(M,`${nt[e(w).spellCategory]??""}魔法`)),n(h,M)};B(A,h=>{e(w).spellCategory!==void 0&&h(x)})}var T=s(A,2);{var te=h=>{var M=Ee();f(()=>b(M,`${dt[e(w).trapCategory]??""}罠`)),n(h,M)};B(T,h=>{e(w).trapCategory!==void 0&&h(te)})}var me=s(d,4),xe=t(me);{var ne=h=>{var M=ra(),Q=oe(M),$e=t(Q),ze=s(Q,2),He=t(ze);f(()=>{b($e,e(w).attack??"?"),b(He,e(w).defense??"?")}),n(h,M)};B(xe,h=>{e(w).kind==="Monster"&&h(ne)})}var de=s(be,2),Ae=s(de,2);f(h=>{Se(be,`${h??""} svelte-vivzk2`),b(p,e(w).name)},[()=>{var h,M;return`deck_editor_card duel_card ${e(w).kind} ${(M=(h=e(w))==null?void 0:h.monsterCategories)==null?void 0:M.join(" ")} ${mt.has(e(w).name)?"is_implemented":"is_not_implemented"}`}],Te),W("mouseenter",be,()=>u()(e(w))),W("click",de,h=>ue(h,e(w))),W("click",Ae,h=>v(h,e(w))),n(ee,Ce)}),f(ee=>b(ye,`${wt[e(z)]??""}（${ee??""}枚）`),[()=>J(e(E),e(z)).length],Te),n(le,pe)}),f(le=>b(O,`${ea[e(E)]??""}（${le??""}枚）`),[()=>J(e(E)).length],Te),n(q,C)}),n(_,ie),Ze()}var na=c('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),da=c('<div></div> <div class="svelte-rccxcp"> </div>',1),ca=c("<div> </div>"),_a=c("<div> </div>"),ua=c('<div class="duel_card_info_row svelte-rccxcp"><!> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),pa=c('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),ma=c('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),fa=c('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),ha=c('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),ba=c('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!></div></div>');function ga(_,l){Je(l,!1);let a=Ke(l,"cardInfo",8,void 0);const r=()=>a()?Be[a().name]:void 0;Qe();var m=Le(),u=oe(m);{var V=J=>{var ue=ba(),v=t(ue),ie=t(v),q=t(ie),E=t(q),C=s(ie,2),$=t(C),O=t($),ke=s($,2),le=t(ke),z=s(v,2),pe=t(z);{var Me=d=>{var D=na(),Y=oe(D),S=t(Y),U=t(S),H=t(U),F=s(Y,2),y=t(F),A=t(y),x=s(y,2),T=t(x);f(()=>{b(H,Be[a().name].pendulumDescription),b(A,`◀ ${a().pendulumScaleL??""}`),b(T,`${a().pendulumScaleR??""} ▶`)}),n(d,D)};B(pe,d=>{var D;(D=a().monsterCategories)!=null&&D.includes("Pendulum")&&d(Me)})}var ye=s(pe,2);{var he=d=>{var D=ua(),Y=oe(D),S=t(Y);{var U=A=>{var x=da(),T=oe(x),te=s(T,2),me=t(te);f(()=>{Se(T,`monster_attr ${a().attributes[0]??""} svelte-rccxcp`),b(me,`${Yt[a().attributes[0]]??""}属性`)}),n(A,x)};B(S,A=>{a().attributes&&A(U)})}var H=s(S,2);{var F=A=>{var x=ca(),T=t(x);f(()=>{Se(x,`monster_cat ${a().types[0]??""} svelte-rccxcp`),b(T,`${ot[a().types[0]]??""}${St[a().types[0]]??""}族`)}),n(A,x)};B(H,A=>{a().types&&A(F)})}var y=s(Y,2);X(y,5,()=>a().monsterCategories??[],G,(A,x)=>{var T=_a(),te=t(T);f(()=>{Se(T,`monster_cat ${e(x)??""} svelte-rccxcp`),b(te,`${lt[e(x)]??""}${jt[e(x)]??""}`)}),n(A,T)}),n(d,D)},ee=d=>{var D=Le(),Y=oe(D);{var S=H=>{var F=pa(),y=s(t(F),2),A=t(y);f(()=>b(A,`${nt[a().spellCategory]??""}魔法`)),n(H,F)},U=H=>{var F=Le(),y=oe(F);{var A=x=>{var T=ma(),te=s(t(T),2),me=t(te);f(()=>b(me,`${dt[a().trapCategory]??""}罠`)),n(x,T)};B(y,x=>{a().kind==="Trap"&&a().trapCategory&&x(A)},!0)}n(H,F)};B(Y,H=>{a().kind==="Spell"&&a().spellCategory?H(S):H(U,!1)},!0)}n(d,D)};B(ye,d=>{a().kind==="Monster"?d(he):d(ee,!1)})}var w=s(ye,2),Ce=t(w),be=t(Ce),we=t(be),je=s(w,2);{var p=d=>{var D=fa();n(d,D)},g=d=>{var D=ha(),Y=t(D),S=s(Y,2),U=t(S);f(H=>{Ge(Y,"href",`https://yugioh-wiki.net/index.php?${a().wikiEncodedName}`),Ge(S,"href",H),b(U,`⇒${(a().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>aa(a())],Te),n(d,D)};B(je,d=>{a().isForTest?d(p):d(g,!1)})}f((d,D,Y,S)=>{Se(ue,`duel_card duel_card_info ${a().kind??""} ${d??""} svelte-rccxcp`),b(E,a().name),b(O,D),b(le,Y),b(we,S)},[()=>{var d;return(d=a().monsterCategories)==null?void 0:d.join(" ")},()=>"★".repeat(a().level||0),()=>"☆".repeat(a().rank||0),()=>{var d;return(d=r())==null?void 0:d.description}],Te),n(J,ue)};B(u,J=>{a()&&J(V)})}n(_,m),Ze()}const Da={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class ka{constructor(){Z(this,"DefaultSeparator1","/");Z(this,"DefaultSeparator2"," ");Z(this,"DefaultSeparator3",":");Z(this,"createDate",l=>{if(!l)return;const a=new Date(l);if(!isNaN(a.getTime()))return a});Z(this,"createDateOr",(l,a)=>this.createDate(l)||a||new Date);Z(this,"truncateDate",l=>{const a=l||new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())});Z(this,"addDate",(l,a)=>{const r=this.createDateOr(l);return r.setDate(r.getDate()+a),r});Z(this,"addMonth",(l,a)=>{const r=this.createDateOr(l);return r.setMonth(r.getMonth()+a),r});Z(this,"addYear",(l,a)=>{const r=this.createDateOr(l);return r.setFullYear(r.getFullYear()+a),r});Z(this,"getDayOfWeek",(l,a="dddd")=>{const r=this.createDate(l);return r?Da[r.getDay()][a]:""});Z(this,"formatToYYYYMMDD",(l,a=this.DefaultSeparator1)=>{const r=this.createDate(l);if(!r)return"";const m=r.getFullYear().toString(),u=("0"+(r.getMonth()+1)).slice(-2),V=("0"+r.getDate()).slice(-2);return m+a+u+a+V});Z(this,"formatToYYYYMM",(l,a=this.DefaultSeparator1)=>{const r=this.createDate(l);if(!r)return"";a||(a="");const m=r.getFullYear().toString(),u=("0"+(r.getMonth()+1)).slice(-2);return m+a+u});Z(this,"formatToHHMMSS",(l,a=this.DefaultSeparator3)=>{const r=this.createDate(l);if(!r)return"";a||(a="");const m=r.getHours(),u=r.getMinutes(),V=r.getSeconds();return("0"+m).slice(-2)+a+("0"+u).slice(-2)+a+("0"+V).slice(-2)});Z(this,"formatToHHMM",(l,a=this.DefaultSeparator3)=>{const r=this.createDate(l);if(!r)return"";a||(a="");const m=("0"+r.getHours()).slice(-2),u=("0"+r.getMinutes()).slice(-2);return m+a+u});Z(this,"formatToYYYYMMDD_HHMM",(l,a=this.DefaultSeparator1,r=this.DefaultSeparator2,m=this.DefaultSeparator3)=>{const u=this.createDate(l);return u?this.formatToYYYYMMDD(u,a)+r+this.formatToHHMM(u,m):""});Z(this,"formatToYYYYMMDD_HHMMSS",(l,a=this.DefaultSeparator1,r=this.DefaultSeparator2,m=this.DefaultSeparator3)=>{const u=this.createDate(l);return u?this.formatToYYYYMMDD(u,a)+r+this.formatToHHMMSS(u,m):""})}}const _e=new ka;Date.prototype.truncateDate=function(){return _e.truncateDate(this)};Date.prototype.getCloneOr=function(_){return _e.createDateOr(this,_)};Date.prototype.addDate=function(_){return _e.addDate(this,_)};Date.prototype.addMonth=function(_){return _e.addDate(this,_)};Date.prototype.addYear=function(_){return _e.addDate(this,_)};Date.prototype.getDayOfWeek=function(_="dddd"){return _e.getDayOfWeek(this,_)};Date.prototype.formatToYYYYMM=function(_){return _e.formatToYYYYMM(this,_)};Date.prototype.formatToYYYYMMDD=function(_){return _e.formatToYYYYMMDD(this,_)};Date.prototype.formatToYYYYMMDD_HHMM=function(_,l,a){return _e.formatToYYYYMMDD_HHMM(this,_,l,a)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(_,l,a){return _e.formatToYYYYMMDD_HHMMSS(this,_,l,a)};Date.prototype.formatToHHMM=function(_){return _e.formatToHHMM(this,_)};Date.prototype.formatToHHMMSS=function(_){return _e.formatToHHMMSS(this,_)};String.prototype.format=(_,...l)=>{for(const[a,r]of l.entries()){const m=new RegExp(`\\{${a}\\}`,"g");_=_.replace(m,r)}return _};var ya=c('<label><input type="checkbox"> </label>'),xa=c('<label><input type="checkbox"> </label>'),Ma=c('<label><input type="checkbox"> <div style="display: inline-block;"></div> </label>'),Ca=c('<label><input type="checkbox"> </label>'),wa=c('<label><input type="checkbox"> </label>'),ja=c('<label><input type="checkbox"> </label>'),Ya=c("<option> </option>"),Sa=c('<div class="svelte-138s9ji"><a class="white_button svelte-138s9ji" download="SVS_DeckInfos.json">ダウンロード</a></div>'),Ta=c('<div class="svelte-138s9ji"></div>'),$a=c('<div class="svelte-138s9ji"><a class="white_button svelte-138s9ji" download="SVS_DeckInfos.json">ダウンロード（一括）</a></div>'),Aa=c('<div class="svelte-138s9ji"></div>'),Ha=c('<div class="deck_editor_body_right_header svelte-138s9ji"><div class="deck_editor_body_right_header_row svelte-138s9ji"><div class="svelte-138s9ji">編集対象 <select></select></div> <div class="svelte-138s9ji"></div> <div class="svelte-138s9ji">新規名称 <input type="text"></div></div> <div class="deck_editor_body_right_header_row svelte-138s9ji"></div> <div class="deck_editor_body_right_header_row svelte-138s9ji"><div class="svelte-138s9ji">基本操作</div> <div class="svelte-138s9ji"><button class="white_button svelte-138s9ji">デッキを保存</button></div> <div class="svelte-138s9ji"></div> <div class="svelte-138s9ji"><button class="white_button svelte-138s9ji">デッキを複製</button></div> <div class="svelte-138s9ji"><button class="white_button svelte-138s9ji" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-138s9ji"><div class="svelte-138s9ji">DL/UL</div> <!> <!></div></div> <!>',1),Na=c("<div>デッキ情報読込中</div>"),Ea=c('<div class="deck_editor svelte-138s9ji"><div class="deck_editor_header"></div> <div class="deck_editor_body svelte-138s9ji"><div class="deck_editor_body_left svelte-138s9ji"><div role="contentinfo"><div class="deck_editor_search_box_header svelte-138s9ji"><div>検索条件</div> <div><button class="white_button svelte-138s9ji">条件クリア</button></div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji">名称</div> <div class="svelte-138s9ji"><input type="text" style="width:70%">※ルビには対応していません</div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji"><button class="search_condition_title black_button svelte-138s9ji">種類</button></div> <div class="svelte-138s9ji"></div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji"><button class="search_condition_title black_button svelte-138s9ji">モンスター</button></div> <div class="svelte-138s9ji"></div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji"><button class="search_condition_title black_button svelte-138s9ji">属性</button></div> <div class="svelte-138s9ji"></div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji"><button class="search_condition_title black_button svelte-138s9ji">種族</button></div> <div class="svelte-138s9ji"></div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji"><button class="search_condition_title black_button svelte-138s9ji">魔法</button></div> <div class="svelte-138s9ji"></div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji"><button class="search_condition_title black_button svelte-138s9ji">罠</button></div> <div class="svelte-138s9ji"></div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji">テスト用</div> <div class="svelte-138s9ji"><label><input type="checkbox"> テスト用カードを表示する</label></div></div></div> <!></div> <div class="deck_editor_body_center svelte-138s9ji"><!></div> <div class="deck_editor_body_right svelte-138s9ji"><!></div></div></div>');function Oa(_,l){Je(l,!1);const a=[],r=[],m=[],u=[],V=[],J=[],ue={name:"",cardKinds:gt.filter(i=>i!=="XyzMaterial"),monsterCategories:[...Mt],monsterAttributes:[...xt],monsterTypes:[...yt],spellCategories:[...kt],trapCategories:[...Dt],isForTest:!1},v=fe(structuredClone(ue));let ie=fe("SearchCondition");const q=async()=>{R(v,e(v).name=""),R(v,e(v).cardKinds=[]),R(v,e(v).monsterCategories=[]),R(v,e(v).monsterAttributes=[]),R(v,e(v).monsterTypes=[]),R(v,e(v).spellCategories=[]),R(v,e(v).trapCategories=[]),R(v,e(v).isForTest=!1)},E=async()=>{const o=(await e(O)).find(j=>j.id===e($));o&&I(z,{...o,cardInfos:o.cardNames.map(j=>Be[j])})},C=()=>Ye.getAllDeckInfo().then(i=>(I($,(i.find(o=>o.lastUsedAt.getTime()===Math.max(...i.map(j=>j.lastUsedAt.getTime())))??i[0]).id),i));let $=fe(-1),O=fe(C()),ke=fe(e(O).then(i=>Ye.convertToObjectURL(i)));e(O).then(E);const le=()=>{I(O,C()),I(ke,e(O).then(i=>Ye.convertToObjectURL(i))),E()};let z=fe({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),pe=fe(Be.ゾンビーノ);const Me=()=>Object.values(Be).filter(i=>{if(!e(v).cardKinds.includes(i.kind)||e(v).name.trim().length&&!i.name.includes(e(v).name)||i.isForTest&&!e(v).isForTest)return!1;if(i.kind==="Monster")return i.attributes&&!e(v).monsterAttributes.union(i.attributes).length||i.types&&!e(v).monsterTypes.union(i.types).length||!i.monsterCategories?!1:i.monsterCategories.union(e(v).monsterCategories).length;if(i.kind==="Spell")return i.spellCategory&&e(v).spellCategories.includes(i.spellCategory);if(i.kind==="Trap")return i.trapCategory&&e(v).trapCategories.includes(i.trapCategory)}),ye=i=>{I(ie,"CardDetail"),I(pe,i)},he=async()=>{const o=(await e(O)).find(j=>j.id===e($));if(!o)throw new Error("illegal state");return o},ee=async i=>{Array.isArray(e(v)[i])&&Array.isArray(ue[i])&&R(v,e(v)[i]=e(v)[i].length?[]:[...ue[i]])},w=async()=>{const i=await he();await i.saveDeckInfo({...i,name:e(z).name,cardNames:e(z).cardInfos.map(o=>o.name),lastUsedAt:new Date}),le()},Ce=async()=>{(await Ye.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,e(z).cardInfos.map(o=>o.name))).saveDeckInfo(),le()},be=async i=>{const o=await he();!i.shiftKey&&!confirm(`デッキ【${o.name}】を削除します。
よろしいですか？`)||(await o.delete(),le())};Qe();var we=Ea(),je=s(t(we),2),p=t(je),g=t(p),d=t(g),D=s(t(d),2),Y=t(D),S=s(d,2),U=s(t(S),2),H=t(U),F=s(S,2),y=t(F),A=t(y),x=s(y,2);X(x,5,()=>gt.filter(i=>i!=="XyzMaterial"),G,(i,o)=>{var j=ya(),k=t(j),K,ae=s(k);f(()=>{K!==(K=e(o))&&(k.value=(k.__value=e(o))==null?"":e(o)),b(ae,` ${wt[e(o)]??""}`)}),Oe(a,[],k,()=>(e(o),e(v).cardKinds),se=>R(v,e(v).cardKinds=se)),n(i,j)});var T=s(F,2),te=t(T),me=t(te),xe=s(te,2);X(xe,5,()=>Mt,G,(i,o)=>{var j=xa(),k=t(j),K,ae=s(k);f(()=>{K!==(K=e(o))&&(k.value=(k.__value=e(o))==null?"":e(o)),b(ae,` ${lt[e(o)]??""}${jt[e(o)]??""}`)}),Oe(r,[],k,()=>(e(o),e(v).monsterCategories),se=>R(v,e(v).monsterCategories=se)),n(i,j)});var ne=s(T,2),de=t(ne),Ae=t(de),h=s(de,2);X(h,5,()=>xt,G,(i,o)=>{var j=Ma(),k=t(j),K,ae=s(k,2),se=s(ae);f(()=>{K!==(K=e(o))&&(k.value=(k.__value=e(o))==null?"":e(o)),Se(ae,`monster_attr ${e(o)??""} svelte-138s9ji`),b(se,` ${Yt[e(o)]??""}`)}),Oe(m,[],k,()=>(e(o),e(v).monsterAttributes),at=>R(v,e(v).monsterAttributes=at)),n(i,j)});var M=s(ne,2),Q=t(M),$e=t(Q),ze=s(Q,2);X(ze,5,()=>yt,G,(i,o)=>{var j=Ca(),k=t(j),K,ae=s(k);f(()=>{K!==(K=e(o))&&(k.value=(k.__value=e(o))==null?"":e(o)),b(ae,` ${ot[e(o)]??""}
                ${St[e(o)]??""}`)}),Oe(u,[],k,()=>(e(o),e(v).monsterTypes),se=>R(v,e(v).monsterTypes=se)),n(i,j)});var He=s(M,2),Ue=t(He),qe=t(Ue),Fe=s(Ue,2);X(Fe,5,()=>kt,G,(i,o)=>{var j=wa(),k=t(j),K,ae=s(k);f(()=>{K!==(K=e(o))&&(k.value=(k.__value=e(o))==null?"":e(o)),b(ae,` ${nt[e(o)]??""}`)}),Oe(V,[],k,()=>(e(o),e(v).spellCategories),se=>R(v,e(v).spellCategories=se)),n(i,j)});var Ie=s(He,2),Pe=t(Ie),Xe=t(Pe),et=s(Pe,2);X(et,5,()=>Dt,G,(i,o)=>{var j=ja(),k=t(j),K,ae=s(k);f(()=>{K!==(K=e(o))&&(k.value=(k.__value=e(o))==null?"":e(o)),b(ae,` ${dt[e(o)]??""}`)}),Oe(J,[],k,()=>(e(o),e(v).trapCategories),se=>R(v,e(v).trapCategories=se)),n(i,j)});var tt=s(Ie,2),L=s(t(tt),2),N=t(L),P=t(N),ve=s(g,2);ga(ve,{get cardInfo(){return e(pe)}});var ge=s(p,2),Tt=t(ge);const $t=Te(Me);Ct(Tt,{mode:"List",get allCardInfos(){return e($t)},onAttention:ye,get deckCardInfos(){return e(z).cardInfos},set deckCardInfos(i){R(z,e(z).cardInfos=i)},$$legacy:!0});var At=s(ge,2),Ht=t(At);Ve(Ht,()=>e(O),i=>{var o=Na();n(i,o)},(i,o)=>{var j=Ha(),k=oe(j),K=t(k),ae=t(K),se=s(t(ae));f(()=>{e($),Re(()=>{e(o)})}),X(se,5,()=>e(o),G,(re,ce)=>{var De=Ya(),Ne={},st=t(De);f(()=>{Ne!==(Ne=e(ce).id)&&(De.value=(De.__value=e(ce).id)==null?"":e(ce).id),b(st,e(ce).name)}),n(re,De)});var at=s(ae,4),Nt=s(t(at)),ct=s(K,4),_t=s(t(ct),2),Et=t(_t),ut=s(_t,4),Ot=t(ut),Lt=s(ut,2),zt=t(Lt),Ut=s(ct,2),pt=s(t(Ut),2);Ve(pt,he,re=>{var ce=Ta();n(re,ce)},(re,ce)=>{var De=Sa(),Ne=t(De);f(st=>Ge(Ne,"href",st),[()=>Ye.convertToObjectURL([e(ce)])],Te),n(re,De)});var Ft=s(pt,2);Ve(Ft,()=>e(ke),re=>{var ce=Aa();n(re,ce)},(re,ce)=>{var De=$a(),Ne=t(De);f(()=>Ge(Ne,"href",e(ce))),n(re,De)});var Pt=s(k,2);Ct(Pt,{mode:"Deck",allCardInfos:[],onAttention:ye,get deckCardInfos(){return e(z).cardInfos},set deckCardInfos(re){R(z,e(z).cardInfos=re)},$$legacy:!0}),We(se,()=>e($),re=>I($,re)),W("change",se,E),vt(Nt,()=>e(z).name,re=>R(z,e(z).name=re)),W("click",Et,w),W("click",Ot,Ce),W("click",zt,be),n(i,j)}),f(()=>Se(g,`deck_editor_search_box ${(e(ie)==="SearchCondition"?"":"minimum")??""} svelte-138s9ji`)),W("click",Y,q),vt(H,()=>e(v).name,i=>R(v,e(v).name=i)),W("click",A,()=>ee("cardKinds")),W("click",me,()=>ee("monsterCategories")),W("click",Ae,()=>ee("monsterAttributes")),W("click",$e,()=>ee("monsterTypes")),W("click",qe,()=>ee("spellCategories")),W("click",Xe,()=>ee("trapCategories")),Wt(P,()=>e(v).isForTest,i=>R(v,e(v).isForTest=i)),W("mouseenter",g,()=>I(ie,"SearchCondition")),n(_,we),Ze()}const La="2025-05-03 19:54:51",za={timestamp:La},Ua=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],Fa=3;var Pa=c("<option> </option>"),Ka=c("<option> </option>"),Ra=c("<option> </option>"),Wa=c("<option> </option>"),Ba=c('<div class="svelte-1tmphfm"><label for="deck_selector" class="deck_selector svelte-1tmphfm">デッキ：</label> <select id="deck_selector" class="deck_selector svelte-1tmphfm"></select></div> <div class="svelte-1tmphfm"><label for="npc_selector" class="npc_selector svelte-1tmphfm">対戦相手：</label> <select id="npc_selector" class="npc_selector svelte-1tmphfm"></select> <div> </div></div> <div class="svelte-1tmphfm"><label for="npc_deck_selector" class="deck_selector svelte-1tmphfm">対戦相手のデッキ：</label> <select id="npc_deck_selector" class="deck_selector svelte-1tmphfm"><option>デフォルト</option><!></select></div> <div class="svelte-1tmphfm"><label for="npc_selector" class="npc_selector svelte-1tmphfm">先攻後攻：</label> <select id="npc_selector" class="npc_selector svelte-1tmphfm"></select></div> <div class="svelte-1tmphfm"><button class="btn svelte-1tmphfm">duel start!</button></div>',1),Va=c('<div class="svelte-1tmphfm">デッキ情報の読み込み、もしくは作成中...</div>'),qa=c('<div class="svelte-1tmphfm"><label for="duelist_name" class="duelist_name svelte-1tmphfm">名前：</label> <input id="duelist_name" class="duelist_name svelte-1tmphfm" type="text"></div> <!> <div class="svelte-1tmphfm"><button class="btn svelte-1tmphfm">deck edit</button></div>',1),Ia=c('<div class="svelte-1tmphfm">デュエリスト情報の読み込み、もしくは作成中...</div>'),Xa=c('<div class="app_body svelte-1tmphfm"><!></div>'),Ga=c('<div class="result_title result_win svelte-1tmphfm">YOU WIN</div>'),Ja=c('<div class="result_title result_lose svelte-1tmphfm">YOU LOSE</div>'),Qa=c('<div class="result_title result_draw svelte-1tmphfm">DRAW</div>'),Za=c('<div class="result svelte-1tmphfm"><!> <button class="white_button svelte-1tmphfm">TOPへ戻る</button></div>'),es=c('<main class="svelte-1tmphfm"><div class="link link_left svelte-1tmphfm"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-1tmphfm">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-1tmphfm">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-1tmphfm">posfie(toggeter)</a></div> <div class="link link_right svelte-1tmphfm"><a class="a_button svelte-1tmphfm" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-1tmphfm">現時点とこの先のこと</a></div> <!> <div class="debug_info svelte-1tmphfm"><span> </span> <span class="user_agent_info"> </span> <span class="screen_info"></span></div> <!></main>');function ts(_,l){Je(l,!1);const a=new Bt("stk_ygo_svelte",Fa,Ua);let r=fe(),m=fe("None"),u=fe(0);const V=Vt.getOrCreateNew(a);let J=fe(Ye.getAllDeckInfo(a).then(p=>(Promise.all(p.filter(g=>!g.lastUsedAt).map(g=>{g.saveDeckInfo()})),I(u,(p.find(g=>g.lastUsedAt.getTime()===Math.max(...p.map(d=>d.lastUsedAt.getTime())))??p[0]).id),p)));const ue=async()=>{let p=(await e(J)).find(g=>g.id===e(u));if(p||(p=(await ie()).find(g=>g.id===e(u))),!p)throw new Error("illegal state");return p},v=async()=>{(await V).save()},ie=()=>(I(J,Ye.getAllDeckInfo(a).then(p=>(I(u,(p.find(g=>g.lastUsedAt.getTime()===Math.max(...p.map(d=>d.lastUsedAt.getTime())))??p[0]).id),p))),e(J)),q=async()=>{(await e(J)).length||(await Ye.prepareSampleDeck(),ie())},E=async()=>{await Promise.all([v(),q()]);const p=await ue(),g=await V;await p.updateTimestamp();const d=rt.find(Y=>Y.id===g.previousNpcId);let D=ht.slice(-1)[0];d&&(g.previousNpcDeckId>-1?D=(await e(J)).find(Y=>Y.id===g.previousNpcDeckId)??D:d.id===-1&&(D=ht.find(Y=>Y.id===-1)??D),I(r,new Qt(g,"Player",p,[],d,"NPC",D,[],g.previousStartMode)),e(r).onDuelEnd.append(()=>(I(r,e(r)),"RemoveMe")))},C=async()=>{await Promise.all([v(),q()]),I(m,"DeckEdit")},$=async p=>{await v(),p.key==="Enter"&&!p.repeat&&(await V).save()},O=()=>{I(J,ie()),I(r,void 0),I(m,"None")};q(),Qe();var ke=es(),le=s(t(ke),2),z=t(le),pe=s(le,2);{var Me=p=>{qt(p,{get duel(){return e(r)}})},ye=p=>{var g=Le(),d=oe(g);{var D=S=>{Oa(S,{})},Y=S=>{var U=Xa(),H=t(U);Ve(H,()=>V,F=>{var y=Ia();n(F,y)},(F,y)=>{var A=qa(),x=oe(A),T=s(t(x),2),te=s(x,2);Ve(te,()=>e(J),ne=>{var de=Va();n(ne,de)},(ne,de)=>{var Ae=Ba(),h=oe(Ae),M=s(t(h),2);f(()=>{e(u),Re(()=>{e(de)})}),X(M,5,()=>e(de),G,(L,N)=>{var P=Pa(),ve={},ge=t(P);f(()=>{ve!==(ve=e(N).id)&&(P.value=(P.__value=e(N).id)==null?"":e(N).id),b(ge,e(N).name)}),n(L,P)});var Q=s(h,2),$e=s(t(Q),2);f(()=>{e(y),Re(()=>{})}),X($e,5,()=>rt,G,(L,N)=>{var P=Ka(),ve={},ge=t(P);f(()=>{ve!==(ve=e(N).id)&&(P.value=(P.__value=e(N).id)==null?"":e(N).id),b(ge,e(N).name)}),n(L,P)});var ze=s($e,2),He=t(ze),Ue=s(Q,2),qe=s(t(Ue),2);f(()=>{e(y),Re(()=>{e(de)})});var Fe=t(qe);Fe.value=(Fe.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Ie=s(Fe);X(Ie,1,()=>e(de),G,(L,N)=>{var P=Ra(),ve={},ge=t(P);f(()=>{ve!==(ve=e(N).id)&&(P.value=(P.__value=e(N).id)==null?"":e(N).id),b(ge,e(N).name)}),n(L,P)});var Pe=s(Ue,2),Xe=s(t(Pe),2);f(()=>{e(y),Re(()=>{})}),X(Xe,5,()=>Jt(ft),G,(L,N)=>{var P=Wa(),ve={},ge=t(P);f(()=>{ve!==(ve=e(N))&&(P.value=(P.__value=e(N))==null?"":e(N)),b(ge,ft[e(N)])}),n(L,P)});var et=s(Pe,2),tt=t(et);f(L=>b(He,`※${L??""}`),[()=>{var L;return(L=rt.find(N=>N.id===e(y).previousNpcId))==null?void 0:L.description}],Te),We(M,()=>e(u),L=>I(u,L)),We($e,()=>e(y).previousNpcId,L=>e(y).previousNpcId=L),We(qe,()=>e(y).previousNpcDeckId,L=>e(y).previousNpcDeckId=L),We(Xe,()=>e(y).previousStartMode,L=>e(y).previousStartMode=L),W("click",tt,E),n(ne,Ae)});var me=s(te,2),xe=t(me);vt(T,()=>e(y).name,ne=>e(y).name=ne),W("keypress",T,$),W("click",xe,C),n(F,A)}),n(S,U)};B(d,S=>{e(m)==="DeckEdit"?S(D):S(Y,!1)},!0)}n(p,g)};B(pe,p=>{e(r)?p(Me):p(ye,!1)})}var he=s(pe,2),ee=t(he),w=t(ee),Ce=s(ee,2),be=t(Ce),we=s(he,2);{var je=p=>{var g=Za(),d=t(g);{var D=U=>{var H=Le(),F=oe(H);{var y=x=>{var T=Ga();n(x,T)},A=x=>{var T=Le(),te=oe(T);{var me=xe=>{var ne=Ja();n(xe,ne)};B(te,xe=>{e(r).winner.seat==="Above"&&xe(me)},!0)}n(x,T)};B(F,x=>{e(r).winner.seat==="Below"?x(y):x(A,!1)})}n(U,H)},Y=U=>{var H=Qa();n(U,H)};B(d,U=>{e(r).winner?U(D):U(Y,!1)})}var S=s(d,2);W("click",S,O),It(3,g,()=>Xt,()=>({delay:200,duration:2e3})),n(p,g)};B(we,p=>{e(r)&&e(r).isEnded&&p(je)})}f(()=>{b(w,`build at: ${za.timestamp}`),b(be,Gt.text)}),W("click",z,O),n(_,ke),Ze()}Zt(ts,{target:document.getElementById("app")});
