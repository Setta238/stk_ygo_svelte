import{d as J,I as w,D as E,S as b,n as ve,m as A,c as ne,a as $,f as h,b as D,e as ge,g as L,P as se,s as G,h as W,N as B,i as U,j as fe,k as te}from"./duel.js";const Ut=["Deck","ExtraDeck"],Qt={Deck:"ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒƒã‚­",ExtraDeck:"ã‚¨ã‚¯ã‚¹ãƒˆãƒ©ãƒ‡ãƒƒã‚­"},ye=["Monster","Spell","Trap","XyzMaterial"],Wt={Monster:"ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼",Spell:"é­”æ³•",Trap:"ç½ ",XyzMaterial:"XYZç´ æ"},le=["Fusion","Syncro","Xyz","Link"],Se=[...le,"SpecialSummon","Ritual"],Ce=["Toon","Spirit","Union","Gemini","FlipEffect"],Te=["Tuner","Effect","Normal","Pendulum","Token","FreeReborn","NormalSummonOnly","RegularSpecialSummonOnly"],$t=[...Se,...Ce,...Te],Vt={Syncro:"ã‚·ãƒ³ã‚¯ãƒ­",Fusion:"èžåˆ",Xyz:"ã‚¨ã‚¯ã‚·ãƒ¼ã‚º",Link:"ãƒªãƒ³ã‚¯",Ritual:"å„€å¼",SpecialSummon:"ç‰¹æ®Šå¬å–š",Toon:"ãƒˆã‚¥ãƒ¼ãƒ³",Spirit:"ã‚¹ãƒ”ãƒªãƒƒãƒˆ",Union:"ãƒ¦ãƒ‹ã‚ªãƒ³",Gemini:"ãƒ‡ãƒ¥ã‚¢ãƒ«",FlipEffect:"ãƒªãƒãƒ¼ã‚¹",Tuner:"ãƒãƒ¥ãƒ¼ãƒŠãƒ¼",Effect:"åŠ¹æžœ",Normal:"é€šå¸¸",Pendulum:"ãƒšãƒ³ãƒ‡ãƒ¥ãƒ©ãƒ ",Token:"ãƒˆãƒ¼ã‚¯ãƒ³",FreeReborn:"ç‰¹æ®Šå¬å–šãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ï¼ˆè˜‡ç”Ÿåˆ¶é™ãªã—ï¼‰",NormalSummonOnly:"ç‰¹æ®Šå¬å–šä¸å¯",RegularSpecialSummonOnly:"æ­£è¦ã®æ–¹æ³•ä»¥å¤–ã§ã®ç‰¹æ®Šå¬å–šä¸å¯"},Xt={Syncro:"ðŸŽµ",Fusion:"ðŸŒ€",Xyz:"ðŸ“°",Link:"â›“ï¸",Ritual:"ðŸ“œ",SpecialSummon:"ðŸ”¯",Toon:"ðŸ“–",Spirit:"ðŸ‘»",Union:"ðŸš—",Gemini:"ðŸ‘«",FlipEffect:"ðŸ”„",Tuner:"ðŸŽ¶",Effect:"âœ¨",Normal:"ðŸ”˜",Pendulum:"ðŸ’ ",Token:"ðŸ",FreeReborn:"ðŸ†“",NormalSummonOnly:"ðŸ”²",RegularSpecialSummonOnly:"â—"},zt=["Light","Dark","Earth","Water","Fire","Wind","Divine"],Kt={Light:"å…‰",Dark:"é—‡",Earth:"åœ°",Water:"æ°´",Fire:"ç‚Ž",Wind:"é¢¨",Divine:"ç¥ž"},jt=["Aqua","Beast","BeastWarrior","CreatorGod","Cyberse","Dinosaur","DivineBeast","Dragon","Fairy","Fiend","Fish","Insect","Illusion","Machine","Plant","Psychic","Pyro","Reptile","Rock","SeaSerpent","Spellcaster","Thunder","Warrior","WingedBeast","Wyrm","Zombie"],Jt=["Normal","Continuous","Field","QuickPlay","Equip","Ritual","PendulumScale"],Yt={Normal:"é€šå¸¸",Continuous:"æ°¸ç¶š",Field:"ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰",QuickPlay:"é€Ÿæ”»",Equip:"è£…å‚™",Ritual:"å„€å¼",PendulumScale:"ãƒšãƒ³ãƒ‡ãƒ¥ãƒ©ãƒ "},It=["Normal","Continuous","Counter"],ea={Normal:"é€šå¸¸",Continuous:"æ°¸ç¶š",Counter:"ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼"},m=["Attack","Defense"],ta={Attack:"æ”»æ’ƒè¡¨ç¤º",Defense:"å®ˆå‚™è¡¨ç¤º",Set:"è£å´å®ˆå‚™è¡¨ç¤º"},aa=["level","rank","attack","defense","pendulumScaleR","pendulumScaleL"],he=({wikiName:t,wikiHref:e,wikiTextAll:a,nameKana:i,description:n,pendulumDescription:r,...s})=>s,ia=t=>he(t),ra={Aqua:"æ°´",Beast:"ç£",BeastWarrior:"ç£æˆ¦å£«",CreatorGod:"å‰µé€ ç¥ž",Cyberse:"ã‚µã‚¤ãƒãƒ¼ã‚¹",Dinosaur:"æç«œ",DivineBeast:"å¹»ç£ç¥ž",Dragon:"ãƒ‰ãƒ©ã‚´ãƒ³",Fairy:"å¤©ä½¿",Fiend:"æ‚ªé­”",Fish:"é­š",Insect:"æ˜†è™«",Illusion:"å¹»æƒ³é­”",Machine:"æ©Ÿæ¢°",Plant:"æ¤ç‰©",Psychic:"ã‚µã‚¤ã‚­ãƒƒã‚¯",Pyro:"ç‚Ž",Reptile:"çˆ¬è™«é¡ž",Rock:"å²©çŸ³",SeaSerpent:"æµ·ç«œ",Spellcaster:"é­”æ³•ä½¿ã„",Thunder:"é›·",Warrior:"æˆ¦å£«",WingedBeast:"é³¥ç£",Wyrm:"å¹»ç«œ",Zombie:"ã‚¢ãƒ³ãƒ‡ãƒƒãƒˆ"},na={Aqua:"ðŸš°",Beast:"ðŸ…",BeastWarrior:"ðŸ¦",CreatorGod:"ðŸ”†",Cyberse:"ðŸ’»ï¸",Dinosaur:"ðŸ¦–",DivineBeast:"ðŸ’«",Dragon:"ðŸ²",Fairy:"ðŸ‘¼",Fiend:"ðŸ‘¿",Fish:"ðŸŸï¸",Insect:"ðŸ¦‹",Illusion:"ðŸ¤¡",Machine:"ðŸ¤–",Plant:"ðŸŒ±",Psychic:"ðŸ‘ï¸",Pyro:"ðŸ”¥",Reptile:"ðŸ¦Ž",Rock:"â›°",SeaSerpent:"ðŸ",Spellcaster:"ðŸ§™",Thunder:"âš¡ï¸",Warrior:"âš”ï¸",WingedBeast:"ðŸ¦…",Wyrm:"ðŸ‰",Zombie:"ðŸ¦´"},Ee=["TopLeft","TopCenter","TopRight","MiddleLeft","MiddleRight","BottomLeft","BottomCenter","BottomRight"],ke={TopLeft:{name:"å·¦ä¸Š",linkArrow:{offsetRow:-1,offsetColumn:-1}},TopCenter:{name:"ä¸Š",linkArrow:{offsetRow:-1,offsetColumn:0}},TopRight:{name:"å³ä¸Š",linkArrow:{offsetRow:-1,offsetColumn:1}},MiddleLeft:{name:"å·¦",linkArrow:{offsetRow:0,offsetColumn:-1}},MiddleRight:{name:"å³",linkArrow:{offsetRow:0,offsetColumn:1}},BottomLeft:{name:"å·¦ä¸‹",linkArrow:{offsetRow:1,offsetColumn:-1}},BottomCenter:{name:"ä¸‹",linkArrow:{offsetRow:1,offsetColumn:0}},BottomRight:{name:"å³ä¸‹",linkArrow:{offsetRow:1,offsetColumn:1}}};Ee.reduce((t,e)=>(t[ke[e].name]=e,t),{});const sa=t=>t.cardId??!1?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t.cardId}`:`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`,la=(t,e)=>{const a=t.monsterCategories??[],i=e.monsterCategories??[];for(const n of le.toReversed()){if(a.includes(n)&&!i.includes(n))return 1;if(!a.includes(n)&&i.includes(n))return-1}if(t.kind===e.kind){if(t.kind==="Monster"){if((t.link??0)!==(e.link??0))return(t.link??0)-(e.link??0);if((t.rank??0)!==(e.rank??0))return(t.rank??0)-(e.rank??0);if((t.level??0)!==(e.level??0))return(t.level??0)-(e.level??0);if((t.attack??0)!==(e.attack??0))return(t.attack??0)-(e.attack??0);if((t.defense??0)!==(e.defense??0))return(t.defense??0)-(e.defense??0)}return t.name.localeCompare(e.name,"Ja")}for(const n of ye){if(t.kind===n)return-1;if(e.kind===n)return 1}return t.name.localeCompare(e.name,"Ja")};Array.prototype.shuffle=function(){return this.map(e=>({item:e,seq:Math.random()})).toSorted((e,a)=>e.seq-a.seq).map(e=>e.item)};Array.prototype.randomPickMany=function(t){return this.shuffle().slice(0,t)};Array.prototype.randomPick=function(){return this.shuffle().slice(0,1)[0]};Array.prototype.reset=function(...t){this.splice(0),this.push(...t)};Array.prototype.union=function(t){return this.filter(e=>t.find(a=>e===a))};Array.prototype.getAllOnOffPattern=function(){const t=[];return this.forEach(e=>{if(t.length==0){t.push([e]),t.push([]);return}t.forEach(a=>t.push([...a,e]))}),t};Array.prototype.getDistinct=function(){return Array.from(new Set(this))};Array.prototype.distinct=function(){this.reset(...this.getDistinct())};const x=async()=>({selectedEntities:[],chainBlockTags:[],prepared:void 0}),me=async(t,e,a)=>(t.activator.payLp(a,t.action.entity),{lifePoint:a}),De=t=>t.activator.canSendToGraveyard([t.action.entity])&&t.action.entity.canBeSentToGraveyard(t.activator,t.action.entity,"SendToGraveyardAsCost",t.action),be=async t=>(await t.action.entity.sendToGraveyard(["Cost"],t.action.entity,t.activator),{sendToGraveyard:[t.action.entity]}),Q=t=>t.activator.canTryBanish(t.action.entity,"BanishAsCost",t.action)&&t.action.entity.canBeBanished("BanishAsCost",t.activator,t.action.entity,t.action),V=async t=>(await t.action.entity.banish(["Cost"],t.action.entity,t.activator),{banish:[t.action.entity]}),xe=(t,e,a=1)=>e.filter(i=>t.activator.canTryBanish(i,"BanishAsCost",t.action)).filter(i=>i.canBeBanished("BanishAsCost",t.activator,t.action.entity,t.action)).length>=a,Me=async(t,e,a,i)=>{const n=e.filter(s=>t.activator.canTryBanish(s,"BanishAsCost",t.action)).filter(s=>s.canBeBanished("BanishAsCost",t.activator,t.action.entity,t.action)),r=await t.activator.waitSelectEntities(n,i,a,"ã‚³ã‚¹ãƒˆã¨ã—ã¦é™¤å¤–ã™ã‚‹ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠž",!1)??[];return await E.banishManyForTheSameReason(r,["Cost"],t.action.entity,t.activator),{banish:r}},Z=async(t,e,a=m,i=r=>r.length===1,n=1)=>{const r=t.activator.getMonsterZones(),s=t.activator.getEnableSummonList(t.activator,"SpecialSummon",["Effect"],t.action,e.filter(l=>l.kind==="Monster").filter(l=>l.canBeTargetOfEffect(t)).map(l=>({monster:l,posList:a,cells:r})),[],!1),u=await t.activator.waitSelectEntities(s.map(l=>l.monster),n,i,"ç‰¹æ®Šå¬å–šã™ã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",!1)??[];if(!u.length)throw new w(t);const p=u.map(l=>l.fieldCell.cellType).getDistinct().filter(l=>l==="Graveyard"||l==="Banished").map(l=>l==="Graveyard"?"SpecialSummonFromGraveyard":"SpecialSummonFromBanished");return{selectedEntities:u,chainBlockTags:p,prepared:void 0}},H=async(t,e=["Attack","Defense"],a=!0)=>{const i=t.activator.getMonsterZones(),n=t.selectedEntities.filter(r=>!r.wasMovedAfter(t.isActivatedAt)).map(r=>({monster:r,posList:e,cells:i}));return a&&(n.length!==t.selectedEntities.length||i.length<n.length)?!1:(await t.activator.summonAll(t.activator,"SpecialSummon",["Effect"],t.action,n,[],!1,!1),!0)},we=async(t,e,a=["Attack","Defense"])=>{const i=t.activator.getMonsterZones(),n=e.map(r=>({monster:r,posList:a,cells:i}));return await t.activator.summonAll(t.activator,"SpecialSummon",["Effect"],t.action,n,[],!1,!1),!0},Ae=(t,e,a)=>({title:t,playType:"SystemPeriodAction",spellSpeed:"Normal",executableCells:J,executablePeriods:e,executableDuelistTypes:["Controller","Opponent"],isMandatory:!0,validate:a,prepare:x,execute:async()=>!0,settle:async()=>!0}),Be=t=>{if(!(t.activator.info.ruleNormalSummonCount>=t.activator.info.maxRuleNormalSummonCount)&&t.action.entity.lvl)if(t.action.entity.lvl<5){const e=t.activator.getEnableSummonList(t.activator,"NormalSummon",["Rule"],t.action,[{monster:t.action.entity,posList:["Attack","Set"],cells:t.activator.getMonsterZones()}],[],!1);return e.length?e.flatMap(a=>a.cells).getDistinct():void 0}else{const e=t.activator.getReleasableMonsters(),a=t.action.entity.lvl<7?1:2;if(e.length<a)return;if(e.getAllOnOffPattern().filter(n=>n.length===a).some(n=>t.activator.getEnableSummonList(t.activator,"AdvanceSummon",["Rule","NormalSummon"],t.action,[{monster:t.action.entity,posList:["Attack","Set"],cells:t.activator.getMonsterZones()}],n.map(r=>({material:r,cell:r.fieldCell})),!1).length))return[]}},Pe=async(t,e,a)=>{if(!t.action.entity.lvl)return;if(t.action.entity.lvl<5)return{};const i=t.activator.getAvailableMonsterZones(),n=t.activator.getReleasableMonsters(),r=t.activator.getExtraMonsterZones(),s=t.action.entity.lvl<7?1:2;r.length>=s&&n.filter(l=>l.fieldCell.cellType!=="ExtraMonsterZone");const u=await t.activator.waitSelectEntities(t.activator.getReleasableMonsters(),s,l=>(a||l.length>0)&&(s<0||l.length===s)&&(i.length>0||l.some(c=>c.fieldCell.cellType==="ExtraMonsterZone")),"ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",a??!1)??[];return u.length?(await E.releaseManyForTheSameReason(u,["Cost","AdvanceSummonRelease","Rule"],t.action.entity,t.activator),{summonMaterialInfos:u.map(l=>({material:l,cell:l.fieldCell}))}):void 0},Fe=async t=>{var n;const e=["Rule","NormalSummon"];let a="NormalSummon";(n=t.costInfo.summonMaterialInfos)!=null&&n.length&&(a="AdvanceSummon",e.push("AdvanceSummon"));const i=t.dest?[t.dest]:t.activator.getAvailableMonsterZones();return R(t,a,e,["Attack","Set"],i)},R=async(t,e,a,i,n)=>{let r=n;return r||(r=t.activator.getMonsterZones(),t.action.entity.fieldCell.cellType==="ExtraDeck"&&r.push(...t.activator.duel.field.getCells("ExtraMonsterZone"))),await t.activator.summon(e,a,t.action,t.action.entity,i,r,t.costInfo.summonMaterialInfos??[],!1),{selectedEntities:[],chainBlockTags:[],prepared:void 0}},q=async t=>{var e,a;return t.action.entity.info.isRebornable=!((e=t.action.entity.origin.monsterCategories)!=null&&e.includes("RegularSpecialSummonOnly")),t.action.entity.determine(),(a=t.costInfo.summonMaterialInfos)==null||a.map(i=>i.material).forEach(i=>i.onUsedAsMaterial(t,t.action.entity)),!0},k={title:"é€šå¸¸å¬å–š",isMandatory:!1,playType:"NormalSummon",spellSpeed:"Normal",executableCells:["Hand"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:Be,payCosts:Pe,prepare:Fe,execute:q,settle:async()=>!0},j=(t,e,a)=>{const i=t.activator.getMonsterZones();if(t.action.entity.fieldCell.cellType==="ExtraDeck"&&i.push(...t.activator.getAvailableExtraZones()),!!t.activator.getEnableSummonList(t.activator,"SpecialSummon",["Rule"],t.action,[{monster:t.action.entity,posList:e,cells:i}],a,!1).length)return a.length===0?i:[]},Oe=t=>{if(!t.activator.isTurnPlayer)return;const e=t.action.entity.getAttackTargets();return e.length?e.map(a=>a.fieldCell):void 0},Le=async t=>{var i;if(t.action.entity.info.attackCount>0||t.action.entity.battlePosition!=="Attack")return;if((i=t.dest)!=null&&i.targetForAttack){const n=t.dest.entities.find(r=>r.entityType==="Duelist");return{selectedEntities:n?[n]:t.dest.cardEntities,chainBlockTags:[],prepared:void 0}}const e=t.action.entity.getAttackTargets();if(e.length===0)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ…‹",t);if(e.length===1)return{selectedEntities:e,chainBlockTags:[],prepared:void 0};if(t.activator.duelistType==="NPC"){let n=t.activator.selectAttackTargetForNPC(t.action.entity,t.action);return n||(t.activator.duel.log.warn("NPCã®æ”»æ’ƒå¯¾è±¡é¸æŠžã«å¤±æ•—ã—ãŸãŸã‚ã€ãƒ©ãƒ³ãƒ€ãƒ ã«æ”»æ’ƒå¯¾è±¡ã‚’é¸æŠžã€‚"),n=e.randomPick()),{selectedEntities:[n],chainBlockTags:[],prepared:void 0}}const a=await t.activator.waitSelectEntity(e,"æ”»æ’ƒå¯¾è±¡ã‚’é¸æŠžã€‚",!0);if(a)return{selectedEntities:[a],chainBlockTags:[],prepared:void 0}},Ne=async t=>(t.action.entity.field.duel.declareAnAttack(t.action.entity,t.selectedEntities[0]),!0),g={title:"æ”»æ’ƒå®£è¨€",isMandatory:!1,playType:"Battle",spellSpeed:"Normal",executableCells:["MonsterZone","ExtraMonsterZone"],executablePeriods:["b1Battle","b2Battle"],executableDuelistTypes:["Controller"],validate:Oe,prepare:Le,execute:Ne,settle:async()=>!0},ce=async t=>{if(!(t.action.entity.info.battlePotisionChangeCount>0||!t.activator.isTurnPlayer))return await t.action.entity.setBattlePosition(t.action.entity.battlePosition==="Attack"?"Defense":"Attack",["Rule"],t.action.entity,t.activator),t.action.entity.info.battlePotisionChangeCount++,{selectedEntities:[],chainBlockTags:[],prepared:void 0}},S={title:"åè»¢å¬å–š",isMandatory:!1,playType:"FlipSummon",spellSpeed:"Normal",executableCells:["MonsterZone","ExtraMonsterZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:t=>t.action.entity.info.battlePotisionChangeCount===0&&t.action.entity.info.attackCount===0&&t.activator.isTurnPlayer&&t.action.entity.face==="FaceDown"?[]:void 0,prepare:ce,execute:async t=>(t.action.entity.determine(),!0),settle:async()=>!0},f={title:"è¡¨ç¤ºå½¢å¼å¤‰æ›´",isMandatory:!1,playType:"ChangeBattlePosition",spellSpeed:"Normal",executableCells:["MonsterZone","ExtraMonsterZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:t=>t.action.entity.info.battlePotisionChangeCount===0&&t.action.entity.info.attackCount===0&&t.activator.isTurnPlayer&&t.action.entity.face==="FaceUp"?[]:void 0,prepare:ce,execute:async t=>(t.action.entity.determine(),!0),settle:async()=>!0},N=async(t,e=["Attack","Defense"])=>{const a=t.activator.getMonsterZones();return t.action.entity.wasMovedAfter(t.isActivatedAt)?!1:(await t.activator.summon("SpecialSummon",["Effect"],t.action,t.action.entity,e,a,[],!1),!0)},M=(t,e,a,i,n,r,s,u,p,l,c)=>{const o={posList:p,cells:l},d={posList:[],cells:[]};return e!==s||s.kind!=="Monster"||!s.origin.monsterCategories?o:s.origin.monsterCategories.includes("NormalSummonOnly")?n.includes("NormalSummon")||n.includes("AdvanceSummon")?o:d:s.origin.monsterCategories.includes("SpecialSummon")?s.isInTrashCell&&!s.origin.monsterCategories.includes("RegularSpecialSummonOnly")?s.info.isRebornable||s.origin.monsterCategories.includes("FreeReborn")?o:d:n.includes("PendulumSummon")&&s.origin.monsterCategories.includes("FreeReborn")?d:n.union(ve).length?o:s.origin.monsterCategories.includes("RegularSpecialSummonOnly")?c?o:d:o:o},z={},Ze=t=>(z[t]||(z[t]={title:`æˆ¦é—˜ç ´å£Šè€æ€§(${t})`,isMandatory:!0,executableCells:["MonsterZone"],executablePeriods:["b1DDmgCalc","b2DDmgCalc"],executableDuelistTypes:["Controller"],isOnlyNTimesPerTurnIfFaceup:t,isApplicableTo:(e,a,i)=>i.includes(e.entity)?a!=="BattleDestroy"?[]:[e.entity]:[],substitute:async(e,a,i)=>i.includes(e.entity)?a!=="BattleDestroy"?[]:e.entity.isEffective?(e.entity.controller.writeInfoLog(`${e.entity.toString()}ã¯ï¼‘ã‚¿ãƒ¼ãƒ³ã«ï¼‘åº¦ã ã‘æˆ¦é—˜ã§ã¯ç ´å£Šã•ã‚Œãªã„ã€‚`),[e.entity]):[]:[]}),z[t]),Y=t=>t.activator.canRelease([t.action.entity])&&t.action.entity.canBeReleased(t.activator,t.action.entity,["ReleaseAsCost"],t.action),I=async t=>(await t.action.entity.release(["Cost"],t.action.entity,t.activator),{release:[t.action.entity]}),oe=t=>({title:"ã‚·ãƒ³ã‚¯ãƒ­å¬å–š",isMandatory:!1,playType:"QuickEffect",spellSpeed:"Quick",executableCells:A,executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],isOnlyNTimesPerChain:1,validate:e=>e.activator.isTurnPlayer?void 0:e.activator.getExtraDeck().cardEntities.filter(i=>{var n;return(n=i.status.monsterCategories)==null?void 0:n.includes("Syncro")}).flatMap(i=>i.actions).filter(i=>i.playType==="SpecialSummon").map(i=>({index:-1,chainNumber:void 0,action:i,activator:e.activator,targetChainBlock:void 0,isActivatedIn:i.entity.fieldCell,isActivatedAt:e.isActivatedAt,costInfo:{},state:"unloaded",dest:void 0,ignoreCost:!1})).some(i=>i.action.getEnableMaterialPatterns(i).some(n=>{const r=n.map(s=>s.material);return r.every(s=>s.controller===e.activator)&&r.every(s=>s.isOnFieldAsMonsterStrictly)&&r.includes(e.action.entity)}))?[]:void 0,prepare:x,execute:async e=>{if(e.activator!==e.action.entity.controller||e.activator.getMonstersOnField().filter(s=>s.lvl!==void 0).length<2)return!1;const a=e.activator.getExtraDeck().cardEntities.filter(s=>{var u;return(u=s.status.monsterCategories)==null?void 0:u.includes("Syncro")}).flatMap(s=>s.actions).filter(s=>s.playType==="SpecialSummon").map(s=>({index:-1,chainNumber:void 0,action:s,activator:e.activator,targetChainBlock:void 0,isActivatedIn:s.entity.fieldCell,isActivatedAt:e.isActivatedAt,costInfo:{},state:"unloaded",dest:void 0,ignoreCost:!1})).filter(s=>s.action.getEnableMaterialPatterns(s).some(u=>{const p=u.map(l=>l.material);return p.every(l=>l.controller===e.activator)&&p.every(l=>l.isOnFieldAsMonsterStrictly)&&p.includes(e.action.entity)})).map(s=>s.action.entity).getDistinct();if(!a.length)return!1;const i=await e.activator.waitSelectEntities(a,1,s=>s.length===1,"ã‚·ãƒ³ã‚¯ãƒ­å¬å–šã™ã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠžã€‚",!1)??[];if(!i.length)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ…‹",e);const n=i[0].actions.find(s=>s.playType==="SpecialSummon");if(!n)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ…‹",e);const r=n.getClone(s=>{const u=s.map(p=>p.material);return u.every(p=>p.controller===e.activator)&&u.every(p=>p.isOnFieldAsMonsterStrictly)&&u.includes(e.action.entity)});return e.nextActionInfo={action:r,originSeq:r.seq},!0},settle:async()=>!0,...t}),He=ne("ç›´æŽ¥æ”»æ’ƒ","Monster",t=>[t],()=>!0,t=>[new $("ç›´æŽ¥æ”»æ’ƒ",()=>!0,!0,t,{},(e,a)=>e.isSpawnedBy===a,(e,a)=>({...a,canDirectAttack:!0}))]),Re={title:"ãƒšãƒ³ãƒ‡ãƒ¥ãƒ©ãƒ å¬å–š",isMandatory:!1,playType:"SpecialSummon",spellSpeed:"Normal",executableCells:["Hand"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],isOnlyNTimesPerTurn:1,validate:t=>{const e=t.activator.getPendulumScales();if(!e||e.upperBound-e.lowerBound<2)return;const a=[...t.activator.getHandCell().cardEntities.filter(r=>r.kind==="Monster"),...t.activator.getExtraDeck().cardEntities.filter(r=>r.face==="FaceUp")].filter(r=>r.kind==="Monster").filter(r=>r.lvl&&r.lvl>e.lowerBound).filter(r=>r.lvl&&r.lvl<e.upperBound);if(!a.length)return;const i=[...t.activator.getMonsterZones(),...t.activator.getEmptyExtraZones()];return t.activator.getEnableSummonList(t.activator,"PendulumSummon",["Rule"],t.action,a.map(r=>({monster:r,cells:i,posList:m})),[],!1).length?[]:void 0},prepare:async t=>{const e=t.activator.getPendulumScales();if(!e||e.upperBound-e.lowerBound<2)return;const a=[...t.activator.getHandCell().cardEntities.filter(n=>n.kind==="Monster"),...t.activator.getExtraDeck().cardEntities.filter(n=>n.face==="FaceUp")].filter(n=>n.kind==="Monster").filter(n=>n.lvl&&n.lvl>e.lowerBound).filter(n=>n.lvl&&n.lvl<e.upperBound);if(!a.length)return;const i=[...t.activator.getMonsterZones(),...t.activator.getEmptyExtraZones()];return await t.activator.summonMany(t.activator,"PendulumSummon",["Rule"],t.action,a.map(n=>({monster:n,posList:m,cells:i})),[],!1,void 0,n=>n.length>0,!1),x()},execute:async t=>(t.activator.getPendingMonstersOnField().forEach(e=>e.determine()),!0),settle:async()=>!0},ca=[Re],qe=()=>{const t=[];["ã‚µã‚¤ãƒãƒ¼ãƒ»ãƒ‰ãƒ©ã‚´ãƒ³","å…­æ­¦è¡†ã®ã”éš å±…","ã‚¢ãƒ³ãƒŽã‚¦ãƒ³ãƒ»ã‚·ãƒ³ã‚¯ãƒ­ãƒ³"].forEach(c=>t.push({name:c,actions:[k,g,f,S,{title:"ç‰¹æ®Šå¬å–š",isMandatory:!1,playType:"SpecialSummon",spellSpeed:"Normal",executableCells:["Hand"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],isOnlyNTimesPerDuel:c==="ã‚¢ãƒ³ãƒŽã‚¦ãƒ³ãƒ»ã‚·ãƒ³ã‚¯ãƒ­ãƒ³"?1:void 0,validate:o=>{const d=o.action.entity.field.getMonstersOnFieldStrictly();if(!(d.length==0||d.some(v=>v.controller===o.activator)))return j(o,["Attack","Defense"],[])},prepare:o=>R(o,"SpecialSummon",["SpecialSummon","Rule"],m),execute:q,settle:async()=>!0}]}));const e={name:"ã‚¸ãƒ£ãƒ³ã‚¯ãƒ»ãƒ•ã‚©ã‚¢ãƒ¼ãƒ‰",actions:[k,g,f,S,{title:"ç‰¹æ®Šå¬å–š",isMandatory:!1,playType:"SpecialSummon",spellSpeed:"Normal",executableCells:["Hand"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:c=>{if(!c.activator.getMonstersOnField().length)return j(c,m,[])},prepare:c=>R(c,"SpecialSummon",["SpecialSummon","Rule"],m),execute:q,settle:async()=>!0}]};t.push(e);const a={name:"ï¼¤ï¼ï¼¨ï¼¥ï¼²ï¼¯ ãƒ‡ã‚£ã‚¢ãƒœãƒªãƒƒã‚¯ã‚¬ã‚¤",actions:[k,g,f,S,{title:"â‘ ãƒªã‚¯ãƒ«ãƒ¼ãƒˆ",isMandatory:!1,playType:"IgnitionEffect",spellSpeed:"Normal",executableCells:["Graveyard"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],priorityForNPC:10,canPayCosts:Q,validate:c=>c.activator.getDeckCell().cardEntities.filter(d=>d.nm==="ï¼¤ï¼ï¼¨ï¼¥ï¼²ï¼¯ ãƒ‡ã‚£ã‚¢ãƒœãƒªãƒƒã‚¯ã‚¬ã‚¤").length===0?void 0:c.activator.getAvailableMonsterZones().length>0?[]:void 0,payCosts:V,prepare:async()=>({selectedEntities:[],chainBlockTags:["SpecialSummonFromDeck"],prepared:void 0}),execute:async c=>{const o=c.activator.getDeckCell().cardEntities.find(d=>d.nm==="ï¼¤ï¼ï¼¨ï¼¥ï¼²ï¼¯ ãƒ‡ã‚£ã‚¢ãƒœãƒªãƒƒã‚¯ã‚¬ã‚¤");return o?we(c,[o]):!1},settle:async()=>!0}]};t.push(a);const i={name:"ã‚¾ãƒ³ãƒ“ã‚­ãƒ£ãƒªã‚¢",actions:[k,g,f,S,{title:"â‘ è‡ªå·±å†ç”Ÿ",isMandatory:!1,playType:"IgnitionEffect",spellSpeed:"Normal",executableCells:["Graveyard"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],canPayCosts:c=>c.activator.getHandCell().cardEntities.length>0,validate:c=>c.activator.getAvailableMonsterZones().length>0?[]:void 0,payCosts:async(c,o,d)=>{const v=c.activator.getHandCell().cardEntities,T=await c.activator.waitSelectEntity(v,"ãƒ‡ãƒƒã‚­ãƒˆãƒƒãƒ—ã«æˆ»ã™ã‚«ãƒ¼ãƒ‰ã‚’ä¸€æžšé¸æŠžã€‚",d);if(!T)throw new w(c);return await T.returnToDeck("Top",["Cost"],c.action.entity,c.activator),{returnToDeck:[T]}},prepare:async()=>({selectedEntities:[],chainBlockTags:["SpecialSummonFromGraveyard"],prepared:void 0}),execute:async c=>(c.action.entity.info.willBeBanished=await N(c),c.action.entity.info.willBeBanished),settle:async()=>!0}]};t.push(i);const n={name:"ã‚°ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ãƒ»ãƒãƒ«ãƒ–",actions:[k,g,f,S,{title:"â‘ è‡ªå·±å†ç”Ÿ",isMandatory:!1,playType:"IgnitionEffect",spellSpeed:"Normal",executableCells:["Graveyard"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],isOnlyNTimesPerDuel:1,canPayCosts:c=>c.activator.getDeckCell().cardEntities.length>0,validate:c=>c.activator.getAvailableMonsterZones().length>0?[]:void 0,payCosts:async c=>{const o=c.activator.getDeckCell().cardEntities[0];return await c.activator.getDeckCell().cardEntities[0].sendToGraveyard(["Cost"],c.action.entity,c.activator),{sendToGraveyard:[o]}},prepare:async()=>({selectedEntities:[],chainBlockTags:["SpecialSummonFromGraveyard"],prepared:void 0}),execute:c=>N(c),settle:async()=>!0}]};t.push(n);const r={name:"çµ‚æœ«ã®é¨Žå£«",actions:[k,g,f,S,{title:"â‘ å¢“åœ°é€ã‚Š",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["MonsterZone"],executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],validate:c=>{if(c.action.entity.hasBeenSummonedNow(["NormalSummon","SpecialSummon","FlipSummon"])&&c.activator.getDeckCell().cardEntities.filter(o=>o.attr.includes("Dark")).length!==0)return[]},prepare:async c=>{const o=["SendToGraveyardFromDeck"];return c.action.entity.moveLog.latestRecord.movedAs.includes("NormalSummon")?o.push("IfNormarlSummonSucceed"):o.push("IfSpecialSummonSucceed"),{selectedEntities:[],chainBlockTags:o,prepared:void 0}},execute:async c=>{const o=c.activator.getDeckCell().cardEntities.filter(d=>d.attr.includes("Dark"));return o.length===0?!1:(await c.action.entity.field.sendToGraveyard("å¢“åœ°ã«é€ã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",c.activator,o,1,d=>d.length===1,["Effect"],c.action.entity,!1),c.activator.getDeckCell().shuffle(),!0)},settle:async()=>!0}]};t.push(r);const s={name:"ãƒžã‚¹ãƒžãƒ†ã‚£ã‚·ãƒ£ãƒ³",actions:[k,g,f,S,{title:"â‘ å¢“åœ°é€ã‚Š",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["MonsterZone"],executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],validate:c=>{if(c.action.entity.hasBeenSummonedNow(["NormalSummon"])&&c.activator.getDeckCell().cardEntities.find(o=>(o.lvl??5)<5))return[]},prepare:async()=>({selectedEntities:[],chainBlockTags:["IfNormarlSummonSucceed","SendToGraveyardFromDeck"],prepared:void 0}),execute:async c=>{const o=c.activator.getDeckCell().cardEntities.filter(d=>(d.lvl??5)<5);return o.length===0?!1:(await c.action.entity.field.sendToGraveyard("å¢“åœ°ã«é€ã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",c.activator,o,1,d=>d.length===1,["Effect"],c.action.entity,!1),c.activator.getDeckCell().shuffle(),!0)},settle:async()=>!0},{title:"â‘¡ãƒ‰ãƒ­ãƒ¼",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["Graveyard"],executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],validate:c=>{if(c.action.entity.face!=="FaceDown"&&c.action.entity.moveLog.latestRecord.movedAs.includes("BattleDestroy")&&c.action.entity.wasMovedAtPreviousChain&&c.activator.getDeckCell().cardEntities.length!==0)return[]},prepare:async()=>({selectedEntities:[],chainBlockTags:["Draw"],prepared:void 0}),execute:async c=>(await c.activator.draw(1,c.action.entity,c.activator),!0),settle:async()=>!0}]};t.push(s);const u={name:"ãƒ©ã‚¤ãƒˆãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ“ãƒ¼ã‚¹ãƒˆ ã‚¦ã‚©ãƒ«ãƒ•",actions:[g,f,S,{title:"â‘ è‡ªå·±å†ç”Ÿ",isMandatory:!0,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["Graveyard"],executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],validate:c=>{if(!c.action.entity.wasMovedAtPreviousChain||c.action.entity.wasMovedFrom.cellType!=="Deck")return;const o=c.activator.getMonsterZones();return c.activator.getEnableSummonList(c.activator,"SpecialSummon",["Effect"],c.action,[{monster:c.action.entity,posList:m,cells:o}],[],!1).length?[]:void 0},prepare:async()=>({selectedEntities:[],chainBlockTags:["SpecialSummonFromGraveyard"],prepared:void 0}),execute:c=>N(c),settle:async()=>!0}]};t.push(u);const p={name:"ä¼èª¬ã®ç™½çŸ³",actions:[g,f,S,k,{title:"â‘ ã‚µãƒ¼ãƒ",isMandatory:!0,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["Graveyard"],executablePeriods:L,executableDuelistTypes:["Controller"],validate:c=>{if(c.action.entity.wasMovedAtPreviousChain&&c.action.entity.wasMovedFrom.cellType!=="Banished")return c.activator.getDeckCell().cardEntities.find(o=>o.nm==="é’çœ¼ã®ç™½é¾")?[]:void 0},prepare:async()=>({selectedEntities:[],chainBlockTags:["SearchFromDeck"],prepared:void 0}),execute:async c=>{const o=c.activator.getDeckCell().cardEntities.find(d=>d.nm==="é’çœ¼ã®ç™½é¾");return o?(await o.addToHand(["Effect"],c.action.entity,c.activator),c.activator.getDeckCell().shuffle(),!0):!1},settle:async()=>!0}]};return t.push(p),[{name:"ç°æµã†ã‚‰ã‚‰",chainBlockTags:["Draw","SearchFromDeck","SendToGraveyardFromDeck","SpecialSummonFromDeck"]},{name:"å±‹æ•·ã‚ã‚‰ã—",chainBlockTags:["BanishFromGraveyard","SpecialSummonFromGraveyard","AddToHandFromGraveyard"]}].forEach(c=>{t.push({name:c.name,actions:[g,f,S,k,{title:"â‘ ç„¡åŠ¹åŒ–",isMandatory:!1,playType:"QuickEffect",spellSpeed:"Quick",executableCells:["Hand"],executablePeriods:h,executableDuelistTypes:["Controller"],isOnlyNTimesPerTurn:1,negatePreviousBlock:!0,canPayCosts:o=>o.activator.canDiscard([o.action.entity]),validate:(o,d)=>d.length===0?void 0:d[o.index-1].chainBlockTags.union(c.chainBlockTags).length>0?[]:void 0,payCosts:async o=>(await o.action.entity.discard(["Cost"],o.action.entity,o.activator),{sendToGraveyard:[o.action.entity]}),prepare:async()=>({selectedEntities:[],chainBlockTags:["NegateCardEffect"],prepared:void 0}),execute:async(o,d)=>{const v=d[o.index-1];return v.isNegatedEffectBy=o.action,!0},settle:async()=>!0}]})}),["ç¿»å¼„ã™ã‚‹ã‚¨ãƒ«ãƒ•ã®å‰£å£«","ãƒ­ãƒ¼ãƒ‰ãƒ©ãƒ³ãƒŠãƒ¼","æ°·çµç•Œã®ä¿®é¨“è€…"].forEach(c=>{t.push({name:c,actions:[g,f,S,k],continuousEffects:[ge("â‘ æˆ¦é—˜ç ´å£Šè€æ€§","Monster",o=>[o],()=>!0,o=>[new se("â‘ æˆ¦é—˜ç ´å£Šè€æ€§",()=>!0,!0,o,{},()=>!0,["BattleDestroy"],(d,v)=>!o.isEffective||(v.atk??0)<1900?!0:(o.duel.log.info(`${o.toString()}ã¯æ”»æ’ƒåŠ›1900ä»¥ä¸Šã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã¨ã®å…ˆé ­ã§ã¯ç ´å£Šã•ã‚Œãªã„ã€‚`,o.controller),!1))])]})}),t},_e=t=>{if(t.action.entity.status.spellCategory==="Field")return[t.activator.getFieldZone()];const e=t.activator.getAvailableSpellTrapZones();return e.length>0?e:void 0},y={title:"ã‚»ãƒƒãƒˆ",playType:"SpellTrapSet",spellSpeed:"Normal",executableCells:["Hand"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],isMandatory:!1,validate:_e,prepare:x,execute:async()=>!0,settle:async()=>!0},C=t=>{var a;if(t.action.entity.info.isPending||t.action.entity.info.isDying||t.action.entity.info.isSettingSickness)return;if(G.some(i=>i===t.action.entity.fieldCell.cellType))return t.action.entity.face==="FaceDown"?[]:void 0;if(t.action.spellSpeed==="Normal"&&!t.activator.isTurnPlayer||t.action.entity.fieldCell.cellType==="Hand"&&!t.activator.isTurnPlayer)return;if(t.action.entity.status.spellCategory==="Field")return[t.activator.getFieldZone()];let e=t.activator.getAvailableSpellTrapZones();return(a=t.action.entity.status.monsterCategories)!=null&&a.includes("Pendulum")&&(e=e.filter(i=>i.isAvailableForPendulum)),e.length>0?e:void 0},ue={title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:C,prepare:x,execute:async()=>!0,settle:async()=>!0},Ge=(t,e,a=()=>!0)=>t.action.entity.field.getMonstersOnFieldStrictly().filter(n=>n.face==="FaceUp").filter(n=>n.canBeTargetOfEffect(t)).filter(n=>a(n,t.action.entity)).length?C(t):void 0,Ue=async(t,e,a,i,n,r=()=>!0)=>{const s=t.action.entity.field.getMonstersOnFieldStrictly().filter(p=>p.face==="FaceUp").filter(p=>p.canBeTargetOfEffect(t)).filter(p=>r(p,t.action.entity)),u=await t.activator.waitSelectEntity(s,"è£…å‚™å¯¾è±¡ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",a);if(u)return t.action.entity.info.equipedBy=u,t.action.entity.info.effectTargets[t.action.seq]=[u],{chainBlockTags:i??[],selectedEntities:[u],prepared:n}},de=async(t,e,a=()=>!0)=>{const i=t.selectedEntities[0];return t.action.entity.info.equipedBy=i,t.action.entity.info.effectTargets[t.action.seq]=[i],a(i,t.action.entity)?(t.action.entity.info.equipedBy=i,t.action.entity.info.validateEquipOwner=a,i.info.equipEntities.push(t.action.entity),!0):(await t.action.entity.ruleDestory(),t.activator.writeInfoLog(`${i.toString()}ãŒè£…å‚™æ¡ä»¶ã‚’æº€ãŸã•ãªããªã£ãŸãŸã‚ã€${t.action.entity.toString()}ã¯ç ´å£Šã•ã‚ŒãŸã€‚`),!1)},_=(t=()=>!0)=>({title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:(e,a)=>Ge(e,a,t),prepare:(e,a,i)=>Ue(e,a,i,[],void 0,t),execute:de,settle:async()=>!0}),Qe=()=>{const t=[],e={name:"é€£åˆè»",actions:[ue,y],continuousEffects:[W("ç™ºå‹•","Spell",a=>a.isOnFieldStrictly&&a.face==="FaceUp",a=>[B.createContinuous("ç™ºå‹•",i=>i.isSpawnedBy.isOnFieldStrictly&&i.isSpawnedBy.face==="FaceUp",a,(i,n)=>n.controller===i.isSpawnedBy.controller&&n.types.includes("Warrior")&&n.isOnFieldStrictly&&n.face==="FaceUp","attack","wip","Addition",(i,n,r)=>{if(!i.isEffective||n.face==="FaceDown")return r;const s=i.controller.getMonstersOnField().filter(u=>u.face==="FaceUp").filter(u=>u.types.includes("Warrior")||u.types.includes("Spellcaster")).length;return r+s*200})])]};return t.push(e),t},We=()=>{const t=[];return[{name:"ãƒªãƒ“ãƒ³ã‚°ãƒ‡ãƒƒãƒ‰ã®å‘¼ã³å£°",pos:"Attack",filter:()=>!0},{name:"ã‚¨ãƒ³ã‚¸ã‚§ãƒ«ãƒ»ãƒªãƒ•ãƒˆ",pos:"Attack",filter:e=>(e.lvl??12)<3},{name:"æ­£çµ±ãªã‚‹è¡€çµ±",pos:"Attack",filter:e=>{var a;return(a=e.status.monsterCategories)==null?void 0:a.includes("Normal")}},{name:"è˜‡ã‚Šã—é­‚",pos:"Defense",filter:e=>{var a;return(a=e.status.monsterCategories)==null?void 0:a.includes("Normal")}},{name:"ãƒªãƒŸãƒƒãƒˆãƒ»ãƒªãƒãƒ¼ã‚¹",pos:"Attack",filter:e=>(e.atk??9999)<=1e3,onMonsterAfterMove:async(e,a)=>{if(!a.isOnFieldAsMonsterStrictly||a.face==="FaceDown")return"RemoveMe";if(e.action.entity.isEffective&&a.battlePosition==="Defense")return e.action.entity.controller.writeInfoLog(`${a.toString()}ãŒå®ˆå‚™è¡¨ç¤ºã«ãªã£ãŸãŸã‚ã€${e.action.entity.toString()}ã¨ã¨ã‚‚ã«ç ´å£Šã•ã‚Œã‚‹ã€‚`),await E.tryMarkForDestory([a,e.action.entity],e),"RemoveMe"}}].forEach(e=>t.push({name:e.name,actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Quick",executableCells:["SpellAndTrapZone"],executablePeriods:h,executableDuelistTypes:["Controller"],validate:a=>{const i=a.activator.getMonsterZones();if(a.activator.getEnableSummonList(a.activator,"SpecialSummon",["Effect"],a.action,a.activator.getGraveyard().cardEntities.filter(r=>r.kind==="Monster").filter(e.filter).filter(r=>r.canBeTargetOfEffect(a)).map(r=>({monster:r,posList:["Attack"],cells:i})),[],!1).length)return C(a)},prepare:a=>Z(a,a.activator.getGraveyard().cardEntities.filter(i=>i.kind==="Monster").filter(e.filter).filter(i=>i.canBeTargetOfEffect(a)),["Attack"]),execute:async a=>{if(!await H(a,["Attack"])||!a.selectedEntities.length)return!1;a.action.entity.info.effectTargets[a.action.seq]=a.selectedEntities,a.action.entity.onBeforeMove.append(async r=>{if(r.entity.face!=="FaceUp"||!r.entity.isOnFieldAsSpellTrapStrictly)return"RemoveMe";const s=Object.values(r.entity.info.effectTargets).flatMap(l=>l),[u]=r.args;if(!s.length)return"RemoveMe";const p=s[0];return p.isOnFieldStrictly&&p.face==="FaceUp"&&r.entity.isEffective&&!u.isSpellTrapZoneLikeCell&&(r.entity.controller.writeInfoLog(`${a.action.entity.toString()}ãŒãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’é›¢ã‚ŒãŸãŸã‚ã€å¯¾è±¡ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼${p.toString()}ã‚’ç ´å£Šã€‚`),await E.tryMarkForDestory([p],a)),"RemoveMe"});const n=a.selectedEntities[0];return n.onBeforeMove.append(async r=>{if(r.entity.face!=="FaceUp"||!r.entity.isOnFieldAsMonsterStrictly)return"RemoveMe";const[,,,,,s]=r.args;return a.action.entity.isOnFieldStrictly&&a.action.entity.face==="FaceUp"&&r.entity.isEffective&&s.union(["EffectDestroy","RuleDestroy"]).length&&(a.activator.writeInfoLog(`${r.entity.toString()}ãŒç ´å£Šã•ã‚ŒãŸãŸã‚ã€${a.action.entity.toString()}ã‚’ç ´å£Šã€‚`),await E.tryMarkForDestory([n],a)),"RemoveMe"}),n.onAfterMove.append(async r=>e.onMonsterAfterMove?await e.onMonsterAfterMove(a,r):"RemoveMe"),!0},settle:async()=>!0},y]})),t},$e=()=>{const t=[];return t.push({name:"æ˜‡å¤©ã®é»’è§’ç¬›",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Counter",executableCells:["SpellAndTrapZone"],executablePeriods:L,executableDuelistTypes:["Controller"],negateSummon:!0,validate:e=>{if(e.targetChainBlock&&e.targetChainBlock.action.playType==="SpecialSummon"&&e.targetChainBlock.activator!==e.activator&&e.activator.duel.field.getPendingMonstersOnField().length===1)return C(e)},prepare:async()=>({selectedEntities:[],chainBlockTags:["NegateSpecialSummon"],prepared:void 0}),execute:async e=>{const a=E.negateSummonMany(e.action.entity,e.activator);return await E.tryDestroy(a,e),!0},settle:async()=>!0},y]}),t},Ve=()=>{const t=[];[{name:"å›£çµã®åŠ›",kind:["Monster"],rate:800},{name:"é­”å°Žå¸«ã®åŠ›",kind:["Spell","Trap"],rate:500}].forEach(a=>{t.push({name:a.name,actions:[_(),y],continuousEffects:[U(a.name,"Spell",i=>i.info.equipedBy?[i.info.equipedBy]:[],i=>i.isOnFieldStrictly&&i.face==="FaceUp",i=>["attack","defense"].map(n=>B.createContinuous("ç™ºå‹•",r=>r.isSpawnedBy.isOnFieldStrictly&&r.isSpawnedBy.face==="FaceUp",i,(r,s)=>s.isOnFieldStrictly&&s.face==="FaceUp",n,"wip","Addition",(r,s,u)=>{if(!r.isEffective)return u;const p=r.controller.getEntiteisOnField().filter(l=>a.kind.includes(l.kind)).length;return u+p*a.rate})))]})});const e={name:"æ—©ã™ãŽãŸåŸ‹è‘¬",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],hasToTargetCards:!0,canPayCosts:a=>a.activator.lp>=800,validate:a=>{const i=a.activator.getMonsterZones();if(a.activator.getEnableSummonList(a.activator,"SpecialSummon",["Effect"],a.action,a.activator.getGraveyard().cardEntities.filter(r=>r.kind==="Monster").filter(r=>r.canBeTargetOfEffect(a)).map(r=>({monster:r,posList:["Attack"],cells:i})),[],!1).length)return C(a)},payCosts:(a,i)=>me(a,i,800),prepare:async a=>{const i=await Z(a,a.activator.getGraveyard().cardEntities,["Attack"]);return i.chainBlockTags.push("PayLifePoint"),i},execute:async(a,i)=>a.action.entity.info.equipedBy?(await a.action.entity.ruleDestory(),!1):await H(a,["Attack"])?(a.action.entity.onBeforeMove.append(async r=>{if(r.entity.face!=="FaceUp"||!r.entity.isOnFieldAsSpellTrapStrictly)return"RemoveMe";const s=r.entity.info.equipedBy;if(!s)return"RemoveMe";const[,,,,,u]=r.args;return s.isOnFieldStrictly&&s.face==="FaceUp"&&r.entity.isEffective&&u.union(["EffectDestroy","RuleDestroy"]).length&&(r.entity.controller.writeInfoLog(`${a.action.entity.toString()}ãŒç ´å£Šã•ã‚ŒãŸãŸã‚ã€è£…å‚™å¯¾è±¡ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼${s.toString()}ã‚’ç ´å£Šã€‚`),E.tryMarkForDestory([s],a)),"RemoveMe"}),de(a,i,(r,s)=>{var u;return(u=s.info.effectTargets[a.action.seq])==null?void 0:u.includes(r)})):(await a.action.entity.ruleDestory(),!1),settle:async()=>!0},y]};return t.push(e),t.push({name:"å¹»æƒ‘ã®å·»ç‰©",actions:[_(),y],continuousEffects:[]}),t},Xe=()=>{const t=[];return[{name:"ä¼èª¬ã®å‰£",attr:void 0,monType:"Warrior",atk:200,def:200},{name:"ç§˜è¡“ã®æ›¸",attr:void 0,monType:"Spellcaster",atk:200,def:200},{name:"ãƒã‚»ã‚¤ãƒ‰ãƒ³ã®åŠ›",attr:void 0,monType:"Aqua",atk:200,def:200},{name:"ç´«æ°´æ™¶",attr:void 0,monType:"Zombie",atk:200,def:200},{name:"çŒ›ç£ã®æ­¯",attr:void 0,monType:"Beast",atk:200,def:200},{name:"æ©Ÿæ¢°æ”¹é€ å·¥å ´",attr:void 0,monType:"Machine",atk:200,def:200},{name:"ä½“æ¸©ã®ä¸Šæ˜‡",attr:void 0,monType:"Reptile",atk:200,def:200},{name:"é­”èŒ",attr:void 0,monType:"Plant",atk:200,def:200},{name:"é—‡ãƒ»ã‚¨ãƒãƒ«ã‚®ãƒ¼",attr:void 0,monType:"Fiend",atk:200,def:200},{name:"ãƒ¬ãƒ¼ã‚¶ãƒ¼ç ²æ©Ÿç”²éŽ§",attr:void 0,monType:"Insect",atk:200,def:200},{name:"éŠ€ã®å¼“çŸ¢",attr:void 0,monType:"Fairy",atk:200,def:200},{name:"é›»æ’ƒéž­",attr:void 0,monType:"Thunder",atk:200,def:200},{name:"ãƒ‰ãƒ©ã‚´ãƒ³ã®ç§˜å®",attr:void 0,monType:"Dragon",atk:200,def:200},{name:"ãƒ•ã‚©ãƒ­ãƒ¼ãƒ»ã‚¦ã‚£ãƒ³ãƒ‰",attr:void 0,monType:"WingedBeast",atk:200,def:200},{name:"é­”æ€§ã®æœˆ",attr:void 0,monType:"BeastWarrior",atk:200,def:200},{name:"ã‚¨ãƒ«ãƒ•ã®å…‰",attr:"Light",monType:void 0,atk:400,def:-200},{name:"è¦šé†’",attr:"Earth",monType:void 0,atk:400,def:-200},{name:"ç¼ç†±ã®æ§",attr:"Fire",monType:void 0,atk:400,def:-200},{name:"çªé¢¨ã®æ‰‡",attr:"Wind",monType:void 0,atk:400,def:-200},{name:"ã¯ãŒã­ã®ç”²ç¾…",attr:"Water",monType:void 0,atk:400,def:-200},{name:"é—‡ã®ç ´ç¥žå‰£",attr:"Dark",monType:void 0,atk:400,def:-200},{name:"ç«å™¨ä»˜æ©Ÿç”²éŽ§",attr:void 0,monType:"Insect",atk:700,def:0},{name:"ã‚µãƒ©ãƒžãƒ³ãƒ‰ãƒ©",attr:"Fire",monType:void 0,atk:700,def:0},{name:"ã‚·ãƒ£ã‚¤ãƒ³ãƒ»ã‚­ãƒ£ãƒƒã‚¹ãƒ«",attr:"Light",monType:void 0,atk:700,def:0}].forEach(e=>{t.push({name:e.name,actions:[_(a=>(!e.attr||a.attr.includes(e.attr))&&(!e.monType||a.types.includes(e.monType))),y],continuousEffects:[U(e.name,"Spell",a=>a.info.equipedBy?[a.info.equipedBy]:[],a=>a.isOnFieldStrictly&&a.face==="FaceUp",a=>{const i=[];return e.atk!==0&&i.push(["attack",e.atk]),e.def!==0&&i.push(["defense",e.def]),i.map(([n,r])=>B.createContinuous("ç™ºå‹•",s=>s.isSpawnedBy.isOnFieldStrictly&&s.isSpawnedBy.face==="FaceUp",a,(s,u)=>u.isOnFieldStrictly&&u.face==="FaceUp"&&(!e.monType||u.types.includes(e.monType))&&(!e.attr||u.attr.includes(e.attr)),n,"wip","Addition",(s,u,p)=>s.isEffective?p+r:p))})]})}),t},ze=()=>{const t=[];return[{name:"è‰åŽŸ",up:["Warrior","BeastWarrior"],down:[]},{name:"æ£®",up:["Insect","Plant","Beast","BeastWarrior"],down:[]},{name:"å±±",up:["Dragon","WingedBeast","Thunder"],down:[]},{name:"è’é‡Ž",up:["Dinosaur","Zombie","Rock"],down:[]},{name:"æµ·",up:["Aqua","SeaSerpent","Fish"],down:["Machine","Pyro"]},{name:"é—‡",up:["Fiend","Spellcaster"],down:["Fairy"]}].forEach(e=>{t.push({name:e.name,actions:[{title:"ç™ºå‹•",isMandatory:!1,canIgnoreCosts:!0,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:C,prepare:x,execute:async()=>!0,settle:async()=>!0},y],continuousEffects:[W("ç™ºå‹•","Spell",a=>a.isOnFieldStrictly&&a.face==="FaceUp",a=>["attack","defense"].flatMap(i=>["up","down"].map(n=>B.createContinuous("ç™ºå‹•",r=>r.isSpawnedBy.isOnFieldStrictly&&r.isSpawnedBy.face==="FaceUp",a,(r,s)=>s.isOnFieldStrictly&&s.face==="FaceUp"&&(s.status.monsterCategories??!1)&&e[n].union(s.types).length>0,i,"wip","Addition",(r,s,u)=>!r.isEffective||s.face==="FaceDown"?u:u+(n==="up"?200:-200)))))]})}),[{name:"ãƒãƒ¼ãƒ‹ãƒ³ã‚°ãƒ–ãƒ©ãƒƒãƒ‰",attr:"Fire"},{name:"ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒ¯ãƒ¼ãƒ«ãƒ‰",attr:"Water"},{name:"ã‚¬ã‚¤ã‚¢ãƒ‘ãƒ¯ãƒ¼",attr:"Earth"},{name:"ã‚·ãƒ£ã‚¤ãƒ³ã‚¹ãƒ‘ãƒ¼ã‚¯",attr:"Light"},{name:"ãƒ€ãƒ¼ã‚¯ã‚¾ãƒ¼ãƒ³",attr:"Dark"},{name:"ãƒ‡ã‚¶ãƒ¼ãƒˆã‚¹ãƒˆãƒ¼ãƒ ",attr:"Wind"}].forEach(e=>{t.push({name:e.name,actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","FieldSpellZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:C,prepare:x,execute:async()=>!0,settle:async()=>!0},y],continuousEffects:[W("ç™ºå‹•","Spell",a=>a.isOnFieldStrictly&&a.face==="FaceUp",a=>["attack","defense"].flatMap(i=>B.createContinuous("ç™ºå‹•",n=>n.isSpawnedBy.isOnFieldStrictly&&n.isSpawnedBy.face==="FaceUp",a,(n,r)=>r.isOnFieldStrictly&&r.face==="FaceUp"&&r.attr.includes(e.attr),i,"wip","Addition",(n,r,s)=>!n.isEffective||r.face==="FaceDown"?s:s+(i==="attack"?500:-400))))]})}),t},Ke=(t,e,a,i)=>{if(!t.action.entity.origin.link||t.action.entity.origin.link<a.length)return;let n=a.map(s=>({material:s,cell:s.fieldCell,link:1}));if(t.action.entity.origin.link>a.length){if(a.every(p=>(p.origin.link??1)<2))return;const s=[n];a.filter(p=>(p.origin.link??1)>1).forEach(p=>{[...s].forEach(l=>{s.push([...l.filter(c=>c.material!==p),{material:p,cell:p.fieldCell,link:p.origin.link??1}])})});const u=s.find(p=>p.reduce((l,c)=>l+c.link,0)===t.action.entity.origin.link);if(!u)return;n=u}if(!i(a)||!t.activator.getEnableSummonList(t.activator,"LinkSummon",["Rule","SpecialSummon"],t.action,[{monster:t.action.entity,posList:["Attack"],cells:e}],n,!1).length)return;if(t.activator.getAvailableExtraZones().length)return n;const r=t.activator.duel.field.getCells("ExtraMonsterZone").map(s=>s.cardEntities[0]).filter(s=>s);if(r.filter(s=>s.controller===t.activator).length&&r.filter(s=>s.controller===t.activator).length===a.filter(s=>s.fieldCell.cellType==="ExtraMonsterZone").length||t.activator.getMonsterZones().flatMap(s=>s.linkArrowSources).some(s=>!a.includes(s))||t.activator.duel.field.canExtraLink(t.action.entity,n))return n},je=(t,e=()=>!0)=>{let a=[...t.activator.getMonstersOnField().filter(n=>n.battlePosition!=="Set"),...t.activator.getHandCell().entities.filter(n=>n.origin.kind==="Monster")];if(a.every(n=>!n.status.allowHandLink)&&(a=a.filter(n=>n.fieldCell.isPlayFieldCell)),a.length<1)return[];const i=[...t.activator.getMonsterZones(),...t.activator.duel.field.getAvailableExtraMonsterZones()];return a.getAllOnOffPattern().filter(n=>n.some(r=>r.status.allowHandLink)||n.every(r=>r.isOnFieldAsMonsterStrictly)).map(n=>Ke(t,i,n,e)??[]).filter(n=>n.length)},Je=async(t,e,a)=>{var p;const i=t.action.getEnableMaterialPatterns(t),n=i.map(l=>({infos:l,materialSeqList:l.map(c=>c.material.seq).sort()}));let r=i[0].map(l=>l.material);if(i.length>1){const l=i.flatMap(o=>o.map(d=>d.material)).getDistinct(),c=await t.action.entity.duel.view.waitSelectEntities(t.activator,{selectables:l,qty:void 0,validator:o=>{const d=o.map(v=>v.seq).sort();return n.some(v=>d.length===v.materialSeqList.length&&d.every((T,F)=>T===v.materialSeqList[F]))},cancelable:a},"ãƒªãƒ³ã‚¯ç´ æã¨ã™ã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž");if(!c)return;r=c}const s=r.map(l=>l.seq).sort(),u=(p=n.find(l=>s.length===l.materialSeqList.length&&s.every((c,o)=>c===l.materialSeqList[o])))==null?void 0:p.infos;if(!u)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ…‹",t,r);return await E.sendManyToGraveyardForTheSameReason(r,["LinkMaterial","Cost","Rule","SpecialSummonMaterial"],t.action.entity,t.activator),{summonMaterialInfos:u}},ee=(t=()=>!0)=>({title:"ãƒªãƒ³ã‚¯å¬å–š",isMandatory:!1,playType:"SpecialSummon",spellSpeed:"Normal",executableCells:["ExtraDeck"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],getEnableMaterialPatterns:e=>je(e,t),canPayCosts:e=>e.action.getEnableMaterialPatterns(e).length>0,validate:e=>!e.ignoreCost||e.activator.getAvailableExtraZones().length+e.activator.getAvailableMonsterZones().length>0?[]:void 0,payCosts:Je,prepare:e=>R(e,"LinkSummon",["Rule","SpecialSummon","LinkSummon"],["Attack"]),execute:q,settle:async()=>!0}),Ye=()=>{const t=[];return[{name:"ï¼¬ï¼¡ï¼®ãƒ•ã‚©ãƒªãƒ³ã‚¯ã‚¹",validator:e=>e.length===2},{name:"ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚´ãƒ¼ã‚¹ãƒˆ",validator:e=>e.length===3},{name:"å¤©å¨ã®é¬¼ç¥ž",validator:e=>e.length>1&&e.some(a=>{var i;return(i=a.status.monsterCategories)==null?void 0:i.includes("Link")})},{name:"å¤©å¨ã®æ‹³åƒ§",validator:e=>e.every(a=>{var i,n;return((i=a.status.nameTags)==null?void 0:i.includes("å¤©å¨"))&&!((n=a.status.monsterCategories)!=null&&n.includes("Link"))})},{name:"é›»å½±ã®é¨Žå£«ã‚¬ã‚¤ã‚¢ã‚»ã‚¤ãƒãƒ¼",validator:e=>e.length>1}].forEach(e=>t.push({name:e.name,actions:[g,ee(e.validator)],defaultSummonFilter:M})),t},Ie=()=>{const t=[];return["ãƒ©ãƒ¼ã‚¸ãƒžã‚¦ã‚¹","ãƒ¬ã‚¤ãƒ³ãƒœãƒ¼ãƒ»ãƒ•ãƒ©ãƒ¯ãƒ¼","ãƒ¬ãƒƒã‚°ãƒ«","å¥³çŽ‹ã®å½±æ­¦è€…","äººé€ äººé–“ï¼—å·"].forEach(e=>{t.push({name:e,actions:[g,f,S,k],continuousEffects:[He]})}),t},et=(t,e,a,i,n)=>({title:"â‘ ãƒªã‚¯ãƒ«ãƒ¼ãƒˆ",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:n,executablePeriods:i.includes("EffectDestroy")?[...h,...D]:["b1DEnd","b2DEnd"],executableDuelistTypes:["Controller"],validate:r=>{if(!r.action.entity.wasMovedAtPreviousChain)return;const s=r.activator.getMonsterZones();if(r.activator.getEnableSummonList(r.activator,"SpecialSummon",["Effect"],r.action,r.activator.getDeckCell().cardEntities.filter(t).filter(p=>p.kind==="Monster").filter(p=>p.canBeTargetOfEffect(r)).map(p=>({monster:p,posList:a,cells:s})),[],!1).length)return[]},prepare:async()=>({selectedEntities:[],chainBlockTags:["SpecialSummonFromDeck"],prepared:void 0}),execute:async r=>{const s=r.activator.getDeckCell().cardEntities.filter(t),u=r.activator.getMonsterZones();return!!r.activator.summonMany(r.activator,"SpecialSummon",["Effect"],r.action,s.map(l=>({monster:l,posList:a,cells:u})),[],!1,e.length>1?void 0:e[0],l=>e.includes(l.length),!1)},settle:async()=>!0}),tt=()=>{const t=[];return[{name:"ã‚­ãƒ©ãƒ¼ãƒ»ãƒãƒ†ãƒˆ",filter:e=>e.attr.includes("Dark")&&(e.atk??9999)<=1500,qtyList:[1],posList:["Attack"],destoryTypes:["EffectDestroy"],executableCells:["Graveyard"]},{name:"ã‚­ãƒ©ãƒ¼ãƒ»ãƒˆãƒžãƒˆ",filter:e=>e.attr.includes("Dark")&&(e.atk??9999)<=1500,qtyList:[1],posList:["Attack"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"å·¨å¤§ãƒã‚ºãƒŸ",filter:e=>e.attr.includes("Earth")&&(e.atk??9999)<=1500,qtyList:[1],posList:["Attack"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ã‚°ãƒªã‚ºãƒªãƒ¼ãƒžã‚¶ãƒ¼",filter:e=>e.attr.includes("Water")&&(e.atk??9999)<=1500,qtyList:[1],posList:["Attack"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ã‚·ãƒ£ã‚¤ãƒ³ã‚¨ãƒ³ã‚¸ã‚§ãƒ«",filter:e=>e.attr.includes("Light")&&(e.atk??9999)<=1500,qtyList:[1],posList:["Attack"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ãƒ‰ãƒ©ã‚´ãƒ³ãƒ•ãƒ©ã‚¤",filter:e=>e.attr.includes("Wind")&&(e.atk??9999)<=1500,qtyList:[1],posList:["Attack"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ï¼µï¼¦ï¼¯ã‚¿ãƒ¼ãƒˆãƒ«",filter:e=>e.attr.includes("Fire")&&(e.atk??9999)<=1500,qtyList:[1],posList:["Attack"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"è’é‡Žã®å¥³æˆ¦å£«",filter:e=>e.attr.includes("Earth")&&e.types.includes("Warrior")&&(e.atk??9999)<=1500,qtyList:[1],posList:["Attack"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ãƒªãƒˆãƒ«ãƒ»ãƒˆãƒ«ãƒ¼ãƒ‘ãƒ¼",filter:e=>e.types.includes("Warrior")&&(e.lvl??9999)<3,qtyList:[1],posList:["Set"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard","Banished"]},{name:"ç ´é¢ç«œ",filter:e=>e.types.includes("Warrior")&&(e.def??9999)<=1500,qtyList:[1],posList:["Attack","Defense"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"å…±é³´è™«",filter:e=>e.types.includes("Insect")&&(e.atk??9999)<=1500,qtyList:[1],posList:["Attack","Defense"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ãƒ»ã‚¿ãƒ¼ãƒˆãƒ«",filter:e=>e.types.includes("Zombie")&&(e.def??9999)<=2e3,qtyList:[1],posList:["Attack","Defense"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ãƒ¦ãƒ¼ãƒ•ã‚©ãƒ­ã‚¤ãƒ‰",filter:e=>e.types.includes("Machine")&&(e.atk??9999)<=1500,qtyList:[1],posList:["Attack"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ãƒ˜ãƒ«ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£",filter:e=>e.types.includes("Fiend")&&(e.lvl??9999)===1,qtyList:[1],posList:["Attack","Defense"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ã‚¬ã‚¹ã‚¿ãƒ»ã‚¤ã‚°ãƒ«",filter:e=>(e.status.nameTags??[]).includes("ã‚¬ã‚¹ã‚¿")&&(e.status.monsterCategories??[]).includes("Tuner"),qtyList:[1],posList:["Attack","Defense"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"å¹»å½±ã®é­”è¡“å£«",filter:e=>(e.status.nameTags??[]).includes("ï¼¨ï¼¥ï¼²ï¼¯")&&(e.atk??9999)<=1e3,qtyList:[1],posList:["Defense"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ã‚¸ã‚§ãƒã‚¯ã‚¹ãƒ»ã‚µãƒ¼ãƒãƒ£ãƒ¼",filter:e=>(e.status.nameTags??[]).includes("ã‚¸ã‚§ãƒã‚¯ã‚¹")&&(e.atk??9999)<=1500,qtyList:[1],posList:["Attack"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ç´«ç‚Žã®è¶³è»½",filter:e=>(e.status.nameTags??[]).includes("å…­æ­¦è¡†")&&(e.lvl??12)<=3,qtyList:[1],posList:["Attack","Defense"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ã‚¹ãƒ¬ã‚¤ãƒ–ãƒ»ã‚¨ã‚¤ãƒ—",filter:e=>(e.status.nameTags??[]).includes("å‰£é—˜ç£")&&(e.lvl??12)<=4,qtyList:[1],posList:["Attack","Defense"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ã‚¼ãƒ³ãƒžã‚¤ãƒãƒ‹ãƒ¼",filter:e=>(e.status.nameTags??[]).includes("ã‚¼ãƒ³ãƒžã‚¤")&&(e.lvl??12)<=4,qtyList:[1],posList:["Attack","Defense"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ï¼¸ï¼¸ï¼ã‚»ã‚¤ãƒãƒ¼ ã‚¨ãƒžãƒ¼ã‚ºãƒ–ãƒ¬ã‚¤ãƒ‰",filter:e=>(e.status.nameTags??[]).includes("ï¼¸ï¼ã‚»ã‚¤ãƒãƒ¼")&&(e.lvl??12)<=4,qtyList:[1],posList:["Attack","Defense"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"è»éšŠç«œ",filter:e=>e.nm==="è»éšŠç«œ",qtyList:[1],posList:["Attack","Defense"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ã‚¢ã‚µãƒ«ãƒˆãƒ»ã‚¬ãƒ³ãƒ‰ãƒƒã‚°",filter:e=>e.nm==="ã‚¢ã‚µãƒ«ãƒˆãƒ»ã‚¬ãƒ³ãƒ‰ãƒƒã‚°",qtyList:[1,2,3,4,5],posList:["Attack","Defense"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]},{name:"ãƒã‚¤ã‚¨ãƒŠ",filter:e=>e.nm==="ãƒã‚¤ã‚¨ãƒŠ",qtyList:[1,2,3,4,5],posList:["Attack","Defense"],destoryTypes:["BattleDestroy"],executableCells:["Graveyard"]}].forEach(e=>{t.push({name:e.name,actions:[et(e.filter,e.qtyList,e.posList,e.destoryTypes,e.executableCells),g,f,S,k]})}),t},at=()=>{const t=[],e={name:"ãŠã‚ã‹ãªåŸ‹è‘¬",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],priorityForNPC:40,validate:l=>{if(l.activator.getDeckCell().cardEntities.filter(c=>c.kind==="Monster").length!==0)return C(l)},prepare:async()=>({selectedEntities:[],chainBlockTags:["SendToGraveyardFromDeck"],prepared:void 0}),execute:async l=>{const c=l.activator.getDeckCell().cardEntities.filter(d=>d.kind==="Monster");if(c.length===0)return!1;const o=await l.activator.waitSelectEntity(c,"å¢“åœ°ã«é€ã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",!1);if(!o)throw new w(l);return await o.sendToGraveyard(["Effect"],l.action.entity,l.activator),await l.activator.getDeckCell().shuffle(),!0},settle:async()=>!0},y]};t.push(e);const a={name:"ãŠã‚ã‹ãªå‰¯è‘¬",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],isOnlyNTimesPerTurn:1,priorityForNPC:40,validate:l=>{if(l.activator.getDeckCell().cardEntities.filter(c=>c.kind!=="Monster").length!==0)return C(l)},prepare:async()=>({selectedEntities:[],chainBlockTags:["SendToGraveyardFromDeck"],prepared:void 0}),execute:async l=>{const c=l.activator.getDeckCell().cardEntities.filter(d=>d.kind!=="Monster");if(c.length===0)return!1;const o=await l.activator.waitSelectEntity(c,"å¢“åœ°ã«é€ã‚‹é­”æ³•ç½ ã‚’é¸æŠž",!1);if(!o)throw new w(l);return await o.sendToGraveyard(["Effect"],l.action.entity,l.activator),!0},settle:async()=>!0},y]};t.push(a);const i={name:"æ­»è€…è˜‡ç”Ÿ",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],hasToTargetCards:!0,validate:l=>{const c=l.activator.getMonsterZones();if(l.activator.getEnableSummonList(l.activator,"SpecialSummon",["Effect"],l.action,l.activator.duel.field.getCells("Graveyard").flatMap(d=>d.cardEntities).filter(d=>d.kind==="Monster").filter(d=>d.canBeTargetOfEffect(l)).map(d=>({monster:d,posList:m,cells:c})),[],!1).length)return C(l)},prepare:l=>Z(l,l.activator.duel.field.getCells("Graveyard").flatMap(c=>c.cardEntities).filter(c=>c.kind==="Monster").filter(c=>c.canBeTargetOfEffect(l))),execute:async l=>H(l),settle:async()=>!0},y]};t.push(i),[{name:"å¤§åµ",cellTypes:G,isOnlyEnemies:!1},{name:"ãƒãƒ¼ãƒ”ã‚£ã®ç¾½æ ¹å¸š",cellTypes:G,isOnlyEnemies:!0},{name:"ãƒ–ãƒ©ãƒƒã‚¯ãƒ»ãƒ›ãƒ¼ãƒ«",cellTypes:A,isOnlyEnemies:!1},{name:"ã‚µãƒ³ãƒ€ãƒ¼ãƒ»ãƒœãƒ«ãƒˆ",cellTypes:A,isOnlyEnemies:!0}].forEach(l=>{t.push({name:l.name,actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:c=>{let o=c.action.entity.field.getCells(...l.cellTypes).flatMap(d=>d.cardEntities).filter(d=>d!==c.action.entity);if(l.isOnlyEnemies&&(o=o.filter(d=>d.controller!==c.activator)),!!o.length)return C(c)},prepare:async c=>{let o=c.action.entity.field.getCells(...l.cellTypes).flatMap(d=>d.cardEntities).filter(d=>d!==c.action.entity);return l.isOnlyEnemies&&(o=o.filter(d=>d.controller!==c.activator)),{selectedEntities:[],chainBlockTags:c.action.calcChainBlockTagsForDestroy(o),prepared:void 0}},execute:async c=>{let o=c.action.entity.field.getCells(...l.cellTypes).flatMap(d=>d.cardEntities).filter(d=>d!==c.action.entity);return l.isOnlyEnemies&&(o=o.filter(d=>d.controller!==c.activator)),await E.tryDestroy(o,c),!0},settle:async()=>!0},y]})});const n={name:"ãƒãƒªã‚±ãƒ¼ãƒ³",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:l=>{if(l.action.entity.field.getCells("SpellAndTrapZone","FieldSpellZone").flatMap(o=>o.cardEntities).filter(o=>o!==l.action.entity).length)return C(l)},prepare:async()=>({selectedEntities:[],chainBlockTags:["BounceToHand"],prepared:void 0}),execute:async(l,c)=>{const o=c.map(v=>v.action).filter(v=>v.playType==="CardActivation").map(v=>v.entity).filter(v=>v.isOnFieldStrictly).filter(v=>v.face==="FaceUp").filter(v=>!v.isLikeContinuousSpell),d=l.action.entity.field.getCells("SpellAndTrapZone","FieldSpellZone").flatMap(v=>v.cardEntities).filter(v=>!o.includes(v));return await E.returnManyToHandForTheSameReason(d,["Effect"],l.action.entity,l.activator),!0},settle:async()=>!0},y]};t.push(n);const r={name:"å…‰ã®æ´è»",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],priorityForNPC:40,canPayCosts:l=>l.activator.getDeckCell().cardEntities.length>3,validate:l=>{if(l.activator.getDeckCell().cardEntities.filter(c=>c.kind==="Monster").filter(c=>(c.lvl??13)<5).filter(c=>c.status.nameTags&&c.status.nameTags.includes("ãƒ©ã‚¤ãƒˆãƒ­ãƒ¼ãƒ‰")).length!==0)return C(l)},payCosts:async l=>{const c=l.activator.getDeckCell().cardEntities.slice(0,3);return await E.sendManyToGraveyardForTheSameReason(c,["Cost"],l.action.entity,l.activator),{sendToGraveyard:c}},prepare:async()=>({selectedEntities:[],chainBlockTags:["SearchFromDeck"],prepared:void 0}),execute:async l=>{const c=l.activator.getDeckCell().cardEntities.filter(d=>d.kind==="Monster").filter(d=>(d.lvl??13)<5).filter(d=>d.status.nameTags&&d.status.nameTags.includes("ãƒ©ã‚¤ãƒˆãƒ­ãƒ¼ãƒ‰"));if(c.length===0)return!1;const o=await l.activator.waitSelectEntity(c,"æ‰‹æœ­ã«åŠ ãˆã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",!1);if(!o)throw new w(l);return await o.addToHand(["Effect"],l.action.entity,l.activator),!0},settle:async()=>!0},y]};t.push(r);const s={name:"èª¿å¾‹",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],priorityForNPC:40,validate:l=>{const c=l.activator.getDeckCell().cardEntities;if(!(c.length<2)&&c.filter(o=>{var d;return(d=o.status.nameTags)==null?void 0:d.includes("ã‚·ãƒ³ã‚¯ãƒ­ãƒ³")}).filter(o=>{var d;return(d=o.status.monsterCategories)==null?void 0:d.includes("Tuner")}).length!==0)return C(l)},prepare:async()=>({selectedEntities:[],chainBlockTags:["SearchFromDeck","SendToGraveyardFromDeck"],prepared:void 0}),execute:async l=>{const c=l.activator.getDeckCell().cardEntities;if(c.length<2)return;const o=c.filter(v=>{var T;return(T=v.status.nameTags)==null?void 0:T.includes("ã‚·ãƒ³ã‚¯ãƒ­ãƒ³")}).filter(v=>{var T;return(T=v.status.monsterCategories)==null?void 0:T.includes("Tuner")});if(o.length===0)return!1;const d=await l.activator.waitSelectEntity(o,"æ‰‹æœ­ã«åŠ ãˆã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",!1);if(!d)throw new w(l);return await d.addToHand(["Effect"],l.action.entity,l.activator),l.activator.getDeckCell().shuffle(),l.activator.duel.clock.incrementProcSeq(),await l.activator.getDeckCell().cardEntities[0].sendToGraveyard(["Effect"],l.action.entity,l.activator),!0},settle:async()=>!0},y]};t.push(s);const u={name:"ãƒ¯ãƒ³ãƒ»ãƒ•ã‚©ãƒ¼ãƒ»ãƒ¯ãƒ³",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],priorityForNPC:40,canPayCosts:l=>{if(l.activator.getDeckCell().cardEntities.every(c=>(c.lvl??12)>1)){if(l.activator.getHandCell().cardEntities.every(c=>(c.lvl??12)>1)||l.activator.getHandCell().cardEntities.filter(c=>c.kind==="Monster").length<2)return!1}else if(l.activator.getHandCell().cardEntities.filter(c=>c.kind==="Monster").length===0)return!1;return!0},validate:l=>{let c=[...l.activator.getDeckCell().cardEntities.filter(T=>(T.lvl??12)===1),...l.activator.getHandCell().cardEntities.filter(T=>(T.lvl??12)===1)];const o=l.activator.getHandCell().cardEntities;(o.length<2||!l.ignoreCost)&&(c=c.filter(T=>!o.includes(T)));const d=l.activator.getMonsterZones();if(l.activator.getEnableSummonList(l.activator,"SpecialSummon",["Effect"],l.action,c.map(T=>({monster:T,posList:m,cells:d})),[],!1).length)return C(l)},payCosts:async(l,c,o)=>{const d=[...l.activator.getDeckCell().cardEntities.filter(O=>(O.lvl??12)===1),...l.activator.getHandCell().cardEntities.filter(O=>(O.lvl??12)===1)],v=l.activator.getMonsterZones(),T=l.activator.getEnableSummonList(l.activator,"SpecialSummon",["Effect"],l.action,d.map(O=>({monster:O,posList:m,cells:v})),[],!1);let F=l.activator.getHandCell().cardEntities.filter(O=>O.kind==="Monster");T.length===1&&(F=F.filter(O=>!T.map(pe=>pe.monster).includes(O)));const X=await l.activator.waitSelectEntity(F,"å¢“åœ°ã¸é€ã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",o);if(!X)throw new w(l);return await X.sendToGraveyard(["Cost"],l.action.entity,l.activator),{sendToGraveyard:[X]}},prepare:async()=>({selectedEntities:[],chainBlockTags:["SpecialSummonFromDeck"],prepared:void 0}),execute:async l=>{const c=[...l.activator.getDeckCell().cardEntities.filter(v=>v.lvl===1),...l.activator.getHandCell().cardEntities.filter(v=>v.lvl===1)],o=l.activator.getMonsterZones();return!!await l.activator.summonOne(l.activator,"SpecialSummon",["Effect"],l.action,c.map(v=>({monster:v,posList:m,cells:o})),[],!1,!1)},settle:async()=>!0},y]};t.push(u);const p={name:"å°å°ã®é»„é‡‘æ«ƒ",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:l=>{if(!l.activator.getDeckCell().cardEntities.every(c=>!l.activator.canTryBanish(c,"BanishAsEffect",l.action)))return C(l)},prepare:async()=>({selectedEntities:[],chainBlockTags:["BanishFromDeck"],prepared:void 0}),execute:async l=>{const c=l.activator.getDeckCell().cardEntities.filter(v=>l.activator.canTryBanish(v,"BanishAsEffect",l.action)),o=await l.activator.waitSelectEntity(c,"é™¤å¤–ã™ã‚‹ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠžã€‚",!1);if(!o)throw new w(l);return(await E.tryBanish("BanishAsEffect",[o],l)).forEach(v=>v.counterHolder.removeAll("GoldSarcophagus")),!0},settle:async()=>!0},Ae("å›žåŽã‚«ã‚¦ãƒ³ãƒˆé€²è¡Œ",["stanby"],l=>{l.activator.isTurnPlayer&&l.action.entity.field.getCells("Banished").flatMap(c=>c.cardEntities).filter(c=>c.moveLog.latestRecord.movedBy===l.action.entity).filter(c=>c.moveLog.latestRecord.actionOwner===l.activator).forEach(c=>{c.counterHolder.add("GoldSarcophagus",1,l.action.entity);const o=c.counterHolder.getQty("GoldSarcophagus",l.action.entity);o<3&&l.activator.duel.log.info(`${c.toString()}ã®ã‚¿ãƒ¼ãƒ³ã‚«ã‚¦ãƒ³ãƒˆï¼š${o-1}â‡’${o}`)})}),{title:"å›žåŽ",isMandatory:!0,playType:"LingeringEffect",spellSpeed:"Normal",executableCells:J,executablePeriods:["stanby"],executableDuelistTypes:["Controller","Opponent"],validate:l=>{if(l.activator.isTurnPlayer)return l.action.entity.field.getCells("Banished").flatMap(c=>c.cardEntities).filter(c=>c.moveLog.latestRecord.movedBy===l.action.entity).filter(c=>c.moveLog.latestRecord.actionOwner===l.activator).some(c=>c.counterHolder.getQty("GoldSarcophagus")===2)?[]:void 0},prepare:x,execute:async l=>{const c=l.action.entity.field.getCells("Banished").flatMap(d=>d.cardEntities).filter(d=>d.moveLog.latestRecord.movedBy===l.action.entity).filter(d=>d.moveLog.latestRecord.actionOwner===l.activator).filter(d=>d.counterHolder.getQty("GoldSarcophagus")===2);if(!c.length)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ…‹",l);let o=c[0];if(c.length>1){const d=await l.activator.waitSelectEntity(c,"å›žåŽã™ã‚‹ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠžã€‚",!1);if(!d)throw new w(l);o=d}return await o.addToHand(["Effect"],l.action.entity,l.activator),!0},settle:async()=>!0},y]};return t.push(p),t},it=()=>{const t=[];t.push({name:"å¼·æ¬²ãªå£º",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],priorityForNPC:20,validate:r=>{if(!(r.activator.getDeckCell().cardEntities.length<2)&&r.activator.canDraw&&r.activator.canAddToHandFromDeck)return C(r)},prepare:async()=>({selectedEntities:[],chainBlockTags:["Draw"],prepared:void 0}),execute:async r=>(await r.activator.draw(2,r.action.entity,r.activator),!0),settle:async()=>!0},y]});const e={name:"è²ªæ¬²ãªå£º",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],priorityForNPC:30,validate:r=>{if(!(r.activator.getGraveyard().cardEntities.filter(s=>s.kind==="Monster").filter(s=>s.canBeTargetOfEffect(r)).length<5)&&r.activator.canDraw&&r.activator.canAddToHandFromDeck)return C(r)},prepare:async r=>{const s=await r.activator.waitSelectEntities(r.activator.getGraveyard().cardEntities.filter(u=>u.kind==="Monster").filter(u=>u.canBeTargetOfEffect(r)),5,u=>u.length===5,"ãƒ‡ãƒƒã‚­ã«æˆ»ã™ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠžã€‚",!1);if(s)return{selectedEntities:s,chainBlockTags:["Draw","ReturnToDeckFromGraveyard"],prepared:void 0}},execute:async r=>r.selectedEntities.some(s=>s.wasMovedAtCurrentChain)?!1:(await E.returnManyToDeckForTheSameReason("Random",r.selectedEntities,["Effect"],r.action.entity,r.activator),await r.activator.draw(2,r.action.entity,r.activator),!0),settle:async()=>!0},y]};t.push(e);const a={name:"å¤©ä½¿ã®æ–½ã—",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],priorityForNPC:30,validate:r=>{if(!(r.activator.getDeckCell().cardEntities.length<3))return C(r)},prepare:async()=>({selectedEntities:[],chainBlockTags:["Draw","DiscordAsEffect"],prepared:void 0}),execute:async r=>(await r.activator.draw(3,r.action.entity,r.activator),await r.activator.discard(2,["Effect","Discard"],r.action.entity,r.activator,()=>!0,r.activator),!0),settle:async()=>!0},y]};t.push(a);const i={name:"æˆé‡‘ã‚´ãƒ–ãƒªãƒ³",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],priorityForNPC:20,validate:r=>{if(!(r.activator.getDeckCell().cardEntities.length<1))return C(r)},prepare:async()=>({selectedEntities:[],chainBlockTags:["Draw"],prepared:void 0}),execute:async r=>(await r.activator.draw(1,r.action.entity,r.activator),r.action.entity.field.duel.clock.incrementProcSeq(),r.activator.getOpponentPlayer().heal(1e3,r.action.entity),!0),settle:async()=>!0},y]};t.push(i);const n={name:"æ‰‹æœ­æŠ¹æ®º",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:r=>{if(!(r.activator.getDeckCell().cardEntities.length<r.activator.getHandCell().cardEntities.filter(s=>s.seq!==r.action.entity.seq).length)&&r.action.entity.field.getAllCells().filter(s=>s.cellType==="Hand").flatMap(s=>s.cardEntities).filter(s=>s.seq!==r.action.entity.seq).length!==0)return C(r)},prepare:async()=>({selectedEntities:[],chainBlockTags:["SearchFromDeck"],prepared:void 0}),execute:async r=>{const s=r.activator.getHandCell().cardEntities.length,u=r.activator.getOpponentPlayer().getHandCell().cardEntities.length;return await E.sendManyToGraveyardForTheSameReason(r.action.entity.field.getCells("Hand").flatMap(p=>p.cardEntities),["Effect","Discard"],r.action.entity,r.activator),r.activator.duel.clock.incrementProcSeq(),await r.action.entity.field.drawAtSameTime(r.activator,s,r.activator.getOpponentPlayer(),u,r.action.entity,r.activator),!0},settle:async()=>!0},y]};return t.push(n),t},rt=t=>({title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],priorityForNPC:40,validate:e=>{if(e.activator.getDeckCell().cardEntities.filter(t).length!==0&&e.activator.canDraw)return C(e)},prepare:async()=>({selectedEntities:[],chainBlockTags:["SearchFromDeck"],prepared:void 0}),execute:async e=>{const a=e.activator.getDeckCell().cardEntities.filter(t);if(!a.length)return!1;const i=await e.activator.waitSelectEntity(a,"æ‰‹æœ­ã«åŠ ãˆã‚‹ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠž",!1);return i?(await i.addToHand(["Effect"],e.action.entity,e.activator),e.activator.getDeckCell().shuffle(),!0):!1},settle:async()=>!0}),nt=(t,e)=>({title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],hasToTargetCards:!0,priorityForNPC:40,validate:a=>{if(!(a.activator.getGraveyard().cardEntities.filter(t).length<e))return C(a)},prepare:async()=>({selectedEntities:[],chainBlockTags:["AddToHandFromGraveyard"],prepared:void 0}),execute:async a=>{const i=a.activator.getGraveyard().cardEntities.filter(t);if(i.length===0)return!1;const n=await a.activator.waitSelectEntities(i,e,r=>r.length===e,"æ‰‹æœ­ã«åŠ ãˆã‚‹ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠž",!1);for(const r of n??[])await r.addToHand(["Effect"],a.action.entity,a.activator);return!0},settle:async()=>!0}),st=t=>({title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],priorityForNPC:40,canPayCosts:e=>e.activator.getHandCell().cardEntities.filter(t).some(a=>e.activator.canDiscard([a])),validate:e=>{if(!(e.activator.getDeckCell().cardEntities.length<2))return C(e)},payCosts:async e=>({discard:await e.activator.discard(1,["Discard","Cost"],e.action.entity,e.activator,t)}),prepare:async()=>({selectedEntities:[],chainBlockTags:["Draw"],prepared:void 0}),execute:async e=>(await e.activator.draw(2,e.action.entity,e.activator),!0),settle:async()=>!0}),lt=t=>({title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:C,prepare:async e=>{const[a,i]=t(e.action.entity),n=[];return a<0&&n.push("DamageToSelf"),i<0&&n.push("DamageToOpponent"),{selectedEntities:[],chainBlockTags:n,prepared:void 0}},execute:async e=>{const[a,i]=t(e.action.entity);return i>0?e.activator.getOpponentPlayer().heal(i,e.action.entity):i<0&&e.activator.getOpponentPlayer().effectDamage(Math.abs(i),e.action.entity),a>0?e.activator.heal(a,e.action.entity):a<0&&e.activator.effectDamage(Math.abs(a),e.action.entity),!0},settle:async()=>!0}),ct=()=>{const t=[];return[{name:"å¢—æ´",filter:e=>e.origin.kind==="Monster"&&e.types.includes("Warrior")&&(e.origin.level??5)<5},{name:"åŒ–çŸ³èª¿æŸ»",filter:e=>e.origin.kind==="Monster"&&e.types.includes("Dinosaur")&&(e.origin.level??6)<6},{name:"ï¼¥ï¼ã‚¨ãƒžãƒ¼ã‚¸ã‚§ãƒ³ã‚·ãƒ¼ã‚³ãƒ¼ãƒ«",filter:e=>e.origin.kind==="Monster"&&(e.origin.nameTags??[]).includes("ï¼¥ãƒ»ï¼¨ï¼¥ï¼²ï¼¯")},{name:"å¬é›†ã®è–åˆ»å°",filter:e=>e.origin.kind==="Monster"&&(e.origin.nameTags??[]).includes("è–åˆ»")},{name:"å¬å–šå¸«ã®ã‚¹ã‚­ãƒ«",filter:e=>e.origin.kind==="Monster"&&(e.origin.monsterCategories??[]).includes("Normal")&&(e.origin.level??4)>4},{name:"ãƒˆã‚¥ãƒ¼ãƒ³ã®ã‚‚ãã˜",filter:e=>(e.origin.nameTags??[]).includes("ãƒˆã‚¥ãƒ¼ãƒ³")},{name:"èžåˆè³¢è€…",filter:e=>e.origin.name==="èžåˆ"},{name:"è™¹ã®æž¶ã‘æ©‹",filter:e=>e.origin.kind!=="Monster"&&(e.origin.nameTags??[]).includes("å®çŽ‰")},{name:"ç´«ç‚Žã®ç‹¼ç…™",filter:e=>e.origin.kind==="Monster"&&(e.origin.nameTags??[]).includes("å…­æ­¦è¡†")&&(e.origin.level??4)<4},{name:"ãƒ†ãƒ©ãƒ»ãƒ•ã‚©ãƒ¼ãƒŸãƒ³ã‚°",filter:e=>e.origin.kind==="Spell"&&e.origin.spellCategory==="Field"},{name:"ã‚³ãƒ¼ãƒ«ãƒ»ãƒªã‚¾ãƒãƒ¼ã‚¿ãƒ¼",filter:e=>e.origin.kind==="Monster"&&(e.origin.nameTags??[]).includes("ãƒªã‚¾ãƒãƒ¼ã‚¿ãƒ¼")}].forEach(e=>{t.push({name:e.name,actions:[rt(e.filter),y]})}),[{name:"æˆ¦å£«ã®ç”Ÿé‚„",filter:e=>e.kind==="Monster"&&e.types.includes("Warrior"),qty:1},{name:"ãƒ€ãƒ¼ã‚¯ãƒ»ãƒãƒ¼ã‚¹ãƒˆ",filter:e=>e.kind==="Monster"&&e.attr.includes("Dark")&&(e.atk??9999)<=1500,qty:1},{name:"æ‚ªå¤¢å†ã³",filter:e=>e.kind==="Monster"&&e.attr.includes("Dark")&&(e.def??9999)===0,qty:2},{name:"ã‚µãƒ«ãƒ™ãƒ¼ã‚¸",filter:e=>e.kind==="Monster"&&e.attr.includes("Water")&&(e.atk??9999)<=1500,qty:2},{name:"ãƒãƒƒãƒ†ãƒªãƒ¼ãƒªã‚µã‚¤ã‚¯ãƒ«",filter:e=>e.kind==="Monster"&&e.types.includes("Thunder")&&(e.atk??9999)<=1500,qty:2},{name:"é—‡ã®é‡ç”£å·¥å ´",filter:e=>e.kind==="Monster"&&(e.status.monsterCategories??[]).includes("Normal"),qty:2}].forEach(e=>{t.push({name:e.name,actions:[nt(e.filter,e.qty),y]})}),[{name:"ãƒˆãƒ¬ãƒ¼ãƒ‰ãƒ»ã‚¤ãƒ³",filter:e=>e.kind==="Monster"&&(e.lvl??0)===8},{name:"èª¿å’Œã®å®æœ­",filter:e=>e.kind==="Monster"&&(e.origin.monsterCategories??[]).includes("Tuner")&&e.types.includes("Dragon")&&(e.atk??9999)<=1e3},{name:"ãƒ‡ã‚¹ãƒ†ãƒ‹ãƒ¼ãƒ»ãƒ‰ãƒ­ãƒ¼",filter:e=>e.kind==="Monster"&&(e.origin.nameTags??[]).includes("ï¼¤ï¼ï¼¨ï¼¥ï¼²ï¼¯")}].forEach(e=>{t.push({name:e.name,actions:[st(e.filter),y]})}),[{name:"ç«ã®ç²‰",calcHeal:()=>[0,-200]},{name:"é›·é³´",calcHeal:()=>[0,-300]},{name:"ãƒ•ã‚¡ã‚¤ãƒ¤ãƒ¼ãƒ»ãƒœãƒ¼ãƒ«",calcHeal:()=>[0,-500]},{name:"ç«ã‚ã¶ã‚Šã®åˆ‘",calcHeal:()=>[0,-600]},{name:"æ˜¼å¤œã®å¤§ç«äº‹",calcHeal:()=>[0,-800]},{name:"ç«ç‚Žåœ°ç„",calcHeal:()=>[-500,-1e3]},{name:"ç›—äººã‚´ãƒ–ãƒªãƒ³",calcHeal:()=>[500,-500]},{name:"ãƒ–ãƒ«ãƒ¼ãƒ»ãƒãƒ¼ã‚·ãƒ§ãƒ³",calcHeal:()=>[400,0]},{name:"ãƒ¬ãƒƒãƒ‰ãƒ»ãƒãƒ¼ã‚·ãƒ§ãƒ³",calcHeal:()=>[500,0]},{name:"ã‚´ãƒ–ãƒªãƒ³ã®ç§˜è–¬",calcHeal:()=>[600,0]},{name:"å¤©ä½¿ã®ç”Ÿãè¡€",calcHeal:()=>[800,0]},{name:"æ²»ç™‚ã®ç¥ž ãƒ‡ã‚£ã‚¢ãƒ³ãƒ»ã‚±ãƒˆ",calcHeal:()=>[1e3,0]},{name:"æµã¿ã®é›¨",calcHeal:()=>[1e3,1e3]}].forEach(e=>{t.push({name:e.name,actions:[lt(e.calcHeal),y]})}),t},ot=()=>{const t=[];return t.push({name:"å¼·æ¬²ãªç“¶",actions:[y,{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Quick",executableCells:["SpellAndTrapZone"],executablePeriods:h,executableDuelistTypes:["Controller"],validate:e=>{if(!(e.activator.getDeckCell().cardEntities.length<2)&&e.activator.canDraw&&e.activator.canAddToHandFromDeck)return C(e)},prepare:async()=>({selectedEntities:[],chainBlockTags:["Draw"],prepared:void 0}),execute:async e=>(await e.activator.draw(1,e.action.entity,e.activator),!0),settle:async()=>!0}]}),t.push({name:"æˆ¦ç·šå¾©å¸°",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Quick",executableCells:["SpellAndTrapZone"],executablePeriods:h,executableDuelistTypes:["Controller"],hasToTargetCards:!0,validate:e=>{const a=e.activator.getMonsterZones();if(e.activator.getEnableSummonList(e.activator,"SpecialSummon",["Effect"],e.action,e.activator.getGraveyard().cardEntities.filter(n=>n.kind==="Monster").filter(n=>n.canBeTargetOfEffect(e)).map(n=>({monster:n,posList:["Defense"],cells:a})),[],!1).length)return C(e)},prepare:e=>Z(e,e.activator.getGraveyard().cardEntities.filter(a=>a.kind==="Monster").filter(a=>a.canBeTargetOfEffect(e)),["Defense"]),execute:async e=>H(e,["Defense"]),settle:async()=>!0},y]}),t},ut=()=>{const t=[];return["ç‚¸è£‚è£…ç”²","æ¬¡å…ƒå¹½é–‰"].forEach(e=>{t.push({name:e,actions:[y,{title:"ç™ºå‹•",playType:"CardActivation",spellSpeed:"Quick",executableCells:["SpellAndTrapZone"],executablePeriods:["b1Battle","b2Battle"],executableDuelistTypes:["Controller"],hasToTargetCards:!0,validate:a=>{if(!a.activator.duel.clock.isUponAttackDeclaration()||a.activator.isTurnPlayer)return;const i=a.activator.duel.attackingMonster;if(!i)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ…‹",a,i);if(i.canBeTargetOfEffect(a))return e==="æ¬¡å…ƒå¹½é–‰"&&!a.activator.canTryBanish(i,"BanishAsEffect",a.action)?!1:C(a)},prepare:async a=>{const i=a.activator.duel.attackingMonster;if(!i)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ…‹",a,i);const n=e==="ç‚¸è£‚è£…ç”²"?a.action.calcChainBlockTagsForDestroy([i]):["BanishFromField"];return{selectedEntities:[i],chainBlockTags:n,prepared:void 0}},execute:async a=>(e==="ç‚¸è£‚è£…ç”²"?await E.tryDestroy(a.selectedEntities,a):await E.tryBanish("BanishAsEffect",a.selectedEntities,a),!0),settle:async()=>!0}]})}),t},dt=()=>{const t=[],e={name:"ã”éš å±…ã®çŒ›æ¯’è–¬",actions:[y,{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Quick",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:h,executableDuelistTypes:["Controller"],validate:C,prepare:async(i,n,r)=>{const s=await i.action.entity.field.duel.view.waitSelectText([{seq:0,text:"â—è‡ªåˆ†ã¯ï¼‘ï¼’ï¼ï¼ï¼¬ï¼°å›žå¾©ã™ã‚‹ã€‚"},{seq:1,text:"â—ç›¸æ‰‹ã«ï¼˜ï¼ï¼ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’ä¸Žãˆã‚‹ã€‚"}],"ä½¿ç”¨ã™ã‚‹åŠ¹æžœã‚’é¸æŠž",!1);if(s===void 0&&!r)throw new w(i);const u=[];return s===1&&u.push("DamageToOpponent"),{selectedEntities:[],chainBlockTags:u,prepared:s??0}},execute:async i=>i.prepared===1?(i.activator.getOpponentPlayer().effectDamage(800,i.action.entity),!0):(i.activator.heal(1200,i.action.entity),!0),settle:async()=>!0}]};t.push(e);const a={name:"æœˆã®æ›¸",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Quick",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:h,executableDuelistTypes:["Controller"],hasToTargetCards:!0,validate:i=>{if(i.action.entity.field.getMonstersOnFieldStrictly().filter(r=>r.canBeTargetOfEffect(i)).filter(r=>r.face==="FaceUp").length)return C(i)},prepare:async(i,n,r)=>{const s=i.action.entity.field.getMonstersOnFieldStrictly().filter(p=>p.canBeTargetOfEffect(i)).filter(p=>p.face==="FaceUp"),u=await i.activator.waitSelectEntity(s,"å¯¾è±¡ã¨ã™ã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",r);if(u)return{selectedEntities:[u],chainBlockTags:[],prepared:void 0}},execute:async i=>{const n=i.selectedEntities[0];if(!n.isOnFieldAsMonsterStrictly||n.battlePosition==="Set")return!1;if(!n.canBeEffected(i.activator,i.action.entity,i.action)){i.activator.duel.log.info(`${n.toString()}ã¯${i.action.entity.toString()}ã®åŠ¹æžœã‚’å—ã‘ãªã„ã€‚`);return}return await n.setBattlePosition("Set",["Effect"],i.action.entity,i.activator),!0},settle:async()=>!0},y]};return t.push(a),t.push({name:"çªé€²",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Quick",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],hasToTargetCards:!0,validate:i=>{if(i.action.entity.field.getMonstersOnFieldStrictly().filter(r=>r.canBeTargetOfEffect(i)).length)return C(i)},prepare:async(i,n,r)=>{const s=i.action.entity.field.getMonstersOnFieldStrictly().filter(p=>p.canBeTargetOfEffect(i)),u=await i.activator.waitSelectEntity(s,"å¯¾è±¡ã¨ã™ã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",r);if(u)return{selectedEntities:[u],chainBlockTags:[],prepared:void 0}},execute:async i=>{const n=i.selectedEntities[0];if(!n.isOnFieldAsMonsterStrictly||n.battlePosition==="Set")return!1;if(!n.canBeEffected(i.activator,i.action.entity,i.action)){i.activator.duel.log.info(`${n.toString()}ã¯${i.action.entity.toString()}ã®åŠ¹æžœã‚’å—ã‘ãªã„ã€‚`);return}return n.numericOprsBundle.push(B.createLingeringAddition("æ”»æ’ƒåŠ›ä¸Šæ˜‡",r=>r.effectOwner.duel.clock.isSameTurn(r.isSpawnedAt),i.action.entity,i.action,"attack",(r,s,u)=>u+700)),!0},settle:async()=>!0},y]}),t},pt=(t,e,a,i,n,r)=>{if(!t.action.entity.origin.level||i.some(l=>!l.lvl)||i.map(l=>l.lvl??0).reduce((l,c)=>l+c,0)!==t.action.entity.origin.level)return;const s=i.filter(l=>{var c;return(c=l.status.monsterCategories)==null?void 0:c.some(o=>o==="Tuner")}),u=i.filter(l=>{var c;return(c=l.status.monsterCategories)==null?void 0:c.every(o=>o!=="Tuner")});if(!n(s)||!r(u))return;const p=[...s.map(l=>({material:l,cell:l.fieldCell,isAsTuner:!0})),...u.map(l=>({material:l,cell:l.fieldCell,isAsTuner:!1}))];if(t.activator.getEnableSummonList(t.activator,"SyncroSummon",["Rule","SpecialSummon"],t.action,[{monster:t.action.entity,posList:e,cells:a}],p,!1).length)return p},vt=(t,e=i=>i.length===1,a=i=>i.length>0)=>{let i=[...t.activator.getMonstersOnField().filter(s=>s.battlePosition!=="Set"),...t.activator.getHandCell().cardEntities.filter(s=>s.origin.kind==="Monster")];if(i.every(s=>!s.status.allowHandSyncro)&&(i=i.filter(s=>s.fieldCell.isPlayFieldCell)),i.length<2)return[];const n=[...t.activator.getMonsterZones(),...t.activator.duel.field.getCells("ExtraMonsterZone")],r=["Attack","Defense"];return i.getAllOnOffPattern().filter(s=>s.some(u=>u.status.allowHandSyncro)||s.every(u=>u.isOnFieldAsMonsterStrictly)).map(s=>pt(t,r,n,s,e,a)??[]).filter(s=>s.length)},gt=async(t,e,a)=>{var p;const i=t.action.getEnableMaterialPatterns(t),n=i.map(l=>({infos:l,materialSeqList:l.map(c=>c.material.seq).sort()}));let r=i[0].map(l=>l.material);if(i.length>1){const l=i.flatMap(o=>o.map(d=>d.material)).getDistinct(),c=await t.activator.waitSelectEntities(l,void 0,o=>{const d=o.map(v=>v.seq).sort();return n.some(v=>d.length===v.materialSeqList.length&&d.every((T,F)=>T===v.materialSeqList[F]))},"ã‚·ãƒ³ã‚¯ãƒ­ç´ æã¨ã™ã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",a);if(!c)return;r=c}const s=r.map(l=>l.seq).sort(),u=(p=n.find(l=>s.length===l.materialSeqList.length&&s.every((c,o)=>c===l.materialSeqList[o])))==null?void 0:p.infos;if(!u)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ…‹",t,r);return await E.sendManyToGraveyardForTheSameReason(r,["SyncroMaterial","Cost","Rule","SpecialSummonMaterial"],t.action.entity,t.activator),{summonMaterialInfos:u}},P=(t=a=>a.length===1,e=a=>a.length>0)=>({title:"ã‚·ãƒ³ã‚¯ãƒ­å¬å–š",isMandatory:!1,playType:"SpecialSummon",spellSpeed:"Normal",executableCells:["ExtraDeck"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],getEnableMaterialPatterns:a=>vt(a,t,e),canPayCosts:a=>a.action.getEnableMaterialPatterns(a).length>0,validate:a=>!a.ignoreCost||a.activator.getAvailableExtraZones().length+a.activator.getAvailableMonsterZones().length>0?[]:void 0,payCosts:gt,prepare:a=>R(a,"SyncroSummon",["Rule","SpecialSummon","SyncroSummon"],["Attack","Defense"]),execute:q,settle:async()=>!0}),ft=()=>{const t=[];return["å¤§åœ°ã®é¨Žå£«ã‚¬ã‚¤ã‚¢ãƒŠã‚¤ãƒˆ","ã‚¹ã‚¯ãƒ©ãƒƒãƒ—ãƒ»ãƒ‡ã‚¹ãƒ‡ãƒ¼ãƒ¢ãƒ³"].forEach(e=>t.push({name:e,actions:[g,f,S,P()],defaultSummonFilter:M})),t.push({name:"ãƒŠãƒãƒ¥ãƒ«ãƒ»ã‚¬ã‚ªãƒ‰ãƒ¬ã‚¤ã‚¯",actions:[g,f,S,P(e=>e.length===1&&e.every(a=>a.attr.some(i=>i==="Earth")),e=>e.length>0&&e.every(a=>a.attr.some(i=>i==="Earth")))],defaultSummonFilter:M}),t.push({name:"ãƒžã‚¸ã‚«ãƒ«ãƒ»ã‚¢ãƒ³ãƒ‰ãƒ­ã‚¤ãƒ‰",actions:[g,f,S,P(),{title:"å›žå¾©",isMandatory:!0,playType:"IgnitionEffect",spellSpeed:"Normal",executableCells:["MonsterZone","ExtraMonsterZone"],executablePeriods:["end"],executableDuelistTypes:["Controller"],isOnlyNTimesPerTurnIfFaceup:1,validate:e=>e.action.entity.duel.phase==="end"&&e.activator.isTurnPlayer&&e.action.entity.face==="FaceUp"?[]:void 0,prepare:x,execute:async e=>(e.activator.heal(e.activator.getMonstersOnField().filter(a=>a.face==="FaceUp").filter(a=>a.types.includes("Psychic")).length*600,e.action.entity),!0),settle:async()=>!0}],defaultSummonFilter:M}),t},yt=()=>{const t=[],e={name:"ã«ã›ã‚¢ãƒã‚¿ãƒ¼",actions:[k,g,f,S],continuousEffects:[U("THE_DEVILS_AVATAR","Monster",i=>[i],i=>i.isOnFieldStrictly&&i.face==="FaceUp",i=>["attack","defense"].map(n=>B.createContinuous("THE_DEVILS_AVATAR",r=>r.isSpawnedBy.isOnFieldStrictly&&r.isSpawnedBy.face==="FaceUp",i,(r,s)=>s.isOnFieldStrictly&&s.face==="FaceUp",n,"calculated","THE_DEVILS_AVATAR",()=>Number.MIN_VALUE)))]};t.push(e);const a={name:"ã«ã›ãƒ‰ãƒ¬ãƒƒãƒ‰ãƒ»ãƒ«ãƒ¼ãƒˆ",actions:[k,g,f,S],continuousEffects:[W("THE_DEVILS_DREAD-ROOT","Monster",i=>i.isOnFieldStrictly&&i.face==="FaceUp",i=>["attack","defense"].map(n=>B.createContinuous("THE_DEVILS_DREAD-ROOT",r=>r.isSpawnedBy.isOnFieldStrictly&&r.isSpawnedBy.face==="FaceUp",i,(r,s)=>s.kind==="Monster"&&s.isOnFieldStrictly&&s.face==="FaceUp"&&s!==r.isSpawnedBy,n,"calculated","THE_DEVILS_DREAD-ROOT",(r,s,u)=>Math.round(u/2))))]};return t.push(a),t},St=(t,e,a,i,n=2,r=2,s)=>{if(!t.action.entity.origin.rank||i.length<n||i.length>r||i.some(p=>!p.lvl)||i.some(p=>p.lvl!==t.action.entity.rank)||!s(i))return;const u=i.map(p=>({material:p,cell:p.fieldCell,level:p.status.level}));if(t.activator.getEnableSummonList(t.activator,"XyzSummon",["Rule","XyzSummon","SpecialSummon"],t.action,[{monster:t.action.entity,posList:e,cells:a}],u,!1).length)return u},Ct=(t,e=2,a=2,i=n=>n.length>1)=>{const n=t.activator.getMonstersOnField().filter(s=>s.battlePosition!=="Set");if(n.length<e)return[];const r=[...t.activator.getMonsterZones(),...t.activator.getAvailableExtraZones()];return n.getAllOnOffPattern().filter(s=>s.length>=e).filter(s=>s.length<=a).map(s=>St(t,m,r,s,e,a,i)??[]).filter(s=>s.length)},Tt=async(t,e,a)=>{var p;const i=t.action.getEnableMaterialPatterns(t),n=i.map(l=>({infos:l,materialSeqList:l.map(c=>c.material.seq).sort()}));let r=i[0].map(l=>l.material);if(i.length>1){const l=i.flatMap(o=>o.map(d=>d.material)).getDistinct(),c=await t.activator.waitSelectEntities(l,void 0,o=>{const d=o.map(v=>v.seq).sort();return n.some(v=>d.length===v.materialSeqList.length&&d.every((T,F)=>T===v.materialSeqList[F]))},"ã‚¨ã‚¯ã‚·ãƒ¼ã‚ºç´ æã¨ã™ã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",a);if(!c)return;r=c}const s=r.map(l=>l.seq).sort(),u=(p=n.find(l=>s.length===l.materialSeqList.length&&s.every((c,o)=>c===l.materialSeqList[o])))==null?void 0:p.infos;if(!u)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ…‹",t,r);return console.log(u),await E.convertManyToXyzMaterials(u.map(l=>l.material),["XyzMaterial","Rule","Cost"],t.action.entity,t.activator),console.log(u.map(l=>l.material.kind)),{summonMaterialInfos:u}},ht=(t=2,e=2,a=i=>i.length>1)=>({title:"ã‚¨ã‚¯ã‚·ãƒ¼ã‚ºå¬å–š",isMandatory:!1,playType:"SpecialSummon",spellSpeed:"Normal",executableCells:["ExtraDeck"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],getEnableMaterialPatterns:i=>Ct(i,t,e,a),canPayCosts:i=>i.action.getEnableMaterialPatterns(i).length>0,validate:i=>!i.ignoreCost||i.activator.getAvailableExtraZones().length+i.activator.getAvailableMonsterZones().length>0?[]:void 0,payCosts:Tt,prepare:i=>R(i,"XyzSummon",["Rule","SpecialSummon","XyzSummon"],["Attack","Defense"]),execute:q,settle:async()=>!0}),Et=()=>{const t=[];return[{name:"ã‚¸ã‚§ãƒ ãƒŠã‚¤ãƒˆãƒ»ãƒ‘ãƒ¼ãƒ«",qty:2},{name:"è¦šé†’ã®å‹‡å£« ã‚¬ã‚¬ã‚®ã‚´",qty:3}].forEach(e=>t.push({name:e.name,actions:[g,f,S,ht(e.qty,e.qty)],defaultSummonFilter:M})),t},kt=()=>{const t=[];return t.push({name:"ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ»ãƒ©ã‚¤ã‚¶ãƒ¼ãƒ»ãƒ‰ãƒ©ã‚´ãƒ³",actions:[g,f,S,P(),{title:"â‘ å¢“åœ°é€ã‚Š",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:A,executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],isOnlyNTimesPerTurn:1,validate:e=>{if(e.action.entity.hasBeenSummonedNow(["SyncroSummon"])&&e.activator.getDeckCell().cardEntities.some(a=>(a.lvl??12)<(e.action.entity.lvl??0)))return[]},prepare:async()=>({selectedEntities:[],chainBlockTags:["SendToGraveyardFromDeck","IfSpecialSummonSucceed"],prepared:void 0}),execute:async e=>{const a=e.activator.getDeckCell().cardEntities.filter(r=>(r.lvl??12)<(e.action.entity.lvl??0));if(a.length===0)return!1;const i=await e.activator.waitSelectEntity(a,"å¢“åœ°ã«é€ã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",!1);if(!i)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ³",e);await i.sendToGraveyard(["Effect"],e.action.entity,e.activator);const n=i.lvl??0;return e.action.entity.numericOprsBundle.push(B.createLingeringAddition("ãƒ¬ãƒ™ãƒ«æ¸›å°‘",()=>!0,e.action.entity,e.action,"level",(r,s,u)=>u-n)),!0},settle:async()=>!0},oe({title:"â‘¡ã‚·ãƒ³ã‚¯ãƒ­å¬å–š",isOnlyNTimesPerChain:1})],defaultSummonFilter:M}),t},mt=()=>{const t=[];return t.push({name:"æŠ˜ã‚Œç«¹å…‰",actions:[_(),y]}),t.push({name:"å¦–åˆ€ç«¹å…‰",actions:[_(),y,{title:"â‘¡ç›´æŽ¥æ”»æ’ƒä»˜ä¸Ž",isMandatory:!1,playType:"IgnitionEffect",spellSpeed:"Normal",executableCells:["SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],isOnlyNTimesPerTurn:1,validate:e=>{if(!e.activator.getSpellTrapsOnField().filter(i=>{var n;return(n=i.status.nameTags)==null?void 0:n.includes("ç«¹å…‰")}).filter(i=>i!==e.action.entity).some(i=>i.status.spellCategory==="Equip"))return;const a=e.action.entity.info.equipedBy;if(a&&!a.status.canDirectAttack)return[]},prepare:async(e,a,i)=>{const n=await e.activator.waitSelectEntity(e.activator.getSpellTrapsOnField().filter(r=>{var s;return(s=r.status.nameTags)==null?void 0:s.includes("ç«¹å…‰")}).filter(r=>r!==e.action.entity).filter(r=>r.status.spellCategory==="Equip"),"æ‰‹æœ­ã«æˆ»ã™ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠžã€‚",i);if(n)return{selectedEntities:[n],chainBlockTags:[],prepared:void 0}},execute:async e=>{const a=e.action.entity.info.equipedBy;return a?(await E.returnManyToHandForTheSameReason(e.selectedEntities,["Effect"],e.action.entity,e.activator),a.statusOperatorBundle.push(new $("ç›´æŽ¥æ”»æ’ƒ",i=>(console.log(i.effectOwner.duel.clock.turn,i.isSpawnedAt.turn),i.effectOwner.duel.clock.isSameTurn(i.isSpawnedAt)),!1,e.action.entity,e.action,()=>!0,(i,n)=>({...n,canDirectAttack:!0}))),!0):!1},settle:async()=>!0},{title:"â‘¢ã‚µãƒ¼ãƒ",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["Graveyard"],executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],validate:e=>{if(e.action.entity.wasMovedAtPreviousChain&&e.activator.canAddToHandFromDeck)return e.activator.getDeckCell().cardEntities.filter(a=>{var i;return(i=a.status.nameTags)==null?void 0:i.includes("ç«¹å…‰")}).some(a=>a.status.name!=="å¦–åˆ€ç«¹å…‰")?[]:void 0},prepare:async()=>({selectedEntities:[],chainBlockTags:["SearchFromDeck"],prepared:void 0}),execute:async e=>{const a=e.activator.getDeckCell().cardEntities.filter(n=>{var r;return(r=n.status.nameTags)==null?void 0:r.includes("ç«¹å…‰")}).filter(n=>n.status.name!=="å¦–åˆ€ç«¹å…‰");if(!a.length)return!1;const i=await e.activator.waitSelectEntity(a,"æ‰‹æœ­ã«åŠ ãˆã‚‹ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠžã€‚",!1);if(!i)throw new w(e);return(await i.addToHand(["Effect"],e.action.entity,e.activator)).cellType==="Hand"},settle:async()=>!0}]}),t.push({name:"çœŸåˆ€ç«¹å…‰",actions:[_(),y,{title:"â‘¡ç›¸æ‰‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ç ´å£Š",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["SpellAndTrapZone"],executablePeriods:["b1DAfterDmgCalc","b2DAfterDmgCalc"],executableDuelistTypes:["Controller"],validate:e=>{const a=e.action.entity.info.equipedBy;if(a&&a.info.battleLog.filter(i=>e.activator.duel.clock.isPreviousStage(i.timestamp)).some(i=>i.enemy.entityType==="Duelist")&&e.activator.getOpponentPlayer().getMonstersOnField().length&&e.activator.getOpponentPlayer().lifeLog.filter(i=>e.activator.duel.clock.isPreviousStage(i.clock)).some(i=>i.entity===a))return[]},prepare:async e=>({selectedEntities:[],chainBlockTags:e.action.calcChainBlockTagsForDestroy(e.activator.getOpponentPlayer().getMonstersOnField()),prepared:void 0}),execute:async e=>(await E.tryDestroy(e.activator.getOpponentPlayer().getMonstersOnField(),e)).length>0,settle:async()=>!0},{title:"â‘¢ç«¹å…‰å…¥æ›¿",isMandatory:!1,playType:"IgnitionEffect",spellSpeed:"Normal",executableCells:["SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],canPayCosts:e=>e.action.entity.info.equipedBy?De(e):!1,validate:e=>{if(!(!e.action.entity.info.equipedBy||!e.activator.getDeckCell().cardEntities.filter(n=>{var r;return(r=n.status.nameTags)==null?void 0:r.includes("ç«¹å…‰")}).filter(n=>n.status.name!=="çœŸåˆ€ç«¹å…‰").filter(n=>n.status.spellCategory==="Equip").length))return e.activator.duel.field.getMonstersOnFieldStrictly().some(n=>n.canBeTargetOfEffect(e))?[]:void 0},payCosts:be,prepare:x,execute:async e=>{const a=e.activator.getDeckCell().cardEntities.filter(p=>{var l;return(l=p.status.nameTags)==null?void 0:l.includes("ç«¹å…‰")}).filter(p=>p.status.name!=="çœŸåˆ€ç«¹å…‰").filter(p=>p.status.spellCategory==="Equip");if(!a.length)return!1;const i=e.activator.getAvailableSpellTrapZones();if(!i.length)return!1;const n=e.activator.duel.field.getMonstersOnFieldStrictly().filter(p=>p.canBeTargetOfEffect(e));if(!n.length)return!1;const r=await e.activator.waitSelectEntity(a,"è£…å‚™ã™ã‚‹ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠžã€‚",!1);if(!r)throw new w("ç«¹å…‰é¸æŠž",e);const s=await e.activator.duel.view.waitSelectDestination(e.activator,r,i,"è£…å‚™ã‚«ãƒ¼ãƒ‰ã‚’ç½®ãå ´æ‰€ã‚’é¸æŠžã€‚","è£…å‚™",!1);if(!s)throw new w("é…ç½®å ´æ‰€é¸æŠž",e);await r.putDirectly(s,"Spell",["Effect"],e.action.entity,e.activator);const u=await e.activator.waitSelectEntity(n,"è£…å‚™ã™ã‚‹å¯¾è±¡ã‚’é¸æŠžã€‚",!1);if(!u)throw new w("è£…å‚™å¯¾è±¡é¸æŠž",e);return r.info.equipedBy=u,r.info.effectTargets[e.action.seq]=[u],u.info.equipEntities.push(r),!0},settle:async()=>!0}]}),t},Dt=()=>{const t=[];return t.push({name:"é»„é‡‘è‰²ã®ç«¹å…‰",actions:[{title:"ç™ºå‹•",isMandatory:!1,playType:"CardActivation",spellSpeed:"Normal",executableCells:["Hand","SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],priorityForNPC:20,validate:e=>{if(!(e.activator.getDeckCell().cardEntities.length<2)&&e.activator.canDraw&&e.activator.canAddToHandFromDeck&&e.activator.getSpellTrapsOnField().filter(a=>{var i;return(i=a.status.nameTags)==null?void 0:i.includes("ç«¹å…‰")}).some(a=>a.status.spellCategory==="Equip"))return C(e)},prepare:async()=>({selectedEntities:[],chainBlockTags:["Draw"],prepared:void 0}),execute:async e=>(await e.activator.draw(2,e.action.entity,e.activator),!0),settle:async()=>!0},y]}),t},bt=()=>{const t=[];return t.push({name:"ï¼¢ï¼¦ï¼ç–¾é¢¨ã®ã‚²ã‚¤ãƒ«",actions:[k,g,f,S,{title:"â‘ ç‰¹æ®Šå¬å–š",isMandatory:!1,playType:"SpecialSummon",spellSpeed:"Normal",executableCells:["Hand"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:e=>{if(e.activator.getMonstersOnField().filter(i=>(i.status.nameTags??[]).includes("ï¼¢ï¼¦")).filter(i=>i.nm!==e.action.entity.origin.name).length)return j(e,["Attack","Defense"],[])},prepare:e=>R(e,"SpecialSummon",["SpecialSummon","Rule"],m),execute:q,settle:async()=>!0},{title:"â‘¡æ”»å®ˆåŠæ¸›",isMandatory:!1,playType:"IgnitionEffect",spellSpeed:"Normal",executableCells:["MonsterZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],hasToTargetCards:!0,isOnlyNTimesPerTurnIfFaceup:1,validate:e=>{const a=e.activator.getOpponentPlayer().getMonstersOnField().filter(i=>i.face==="FaceUp").filter(i=>i.canBeTargetOfEffect(e));if(a.length)return a.length?a:void 0},prepare:async(e,a,i)=>{var r;let n=(r=e.dest)==null?void 0:r.cardEntities[0];if(!n){const s=e.activator.getOpponentPlayer().getMonstersOnField().filter(p=>p.face==="FaceUp").filter(p=>p.canBeTargetOfEffect(e)),u=await e.activator.waitSelectEntity(s,"åŠ¹æžœå¯¾è±¡ã‚’é¸æŠžã€‚",i);if(!u)return;n=u}return{selectedEntities:[n],chainBlockTags:[],prepared:void 0}},execute:async e=>{const a=e.selectedEntities.filter(i=>i.isOnFieldAsMonsterStrictly).filter(i=>i.face==="FaceUp").find(i=>i.canBeEffected(e.activator,e.action.entity,e.action));if(a)return["attack","defense"].map(i=>B.createLingeringFixation("â‘¡æ”»å®ˆåŠæ¸›",()=>!0,e.action.entity,e.action,i,(n,r,s)=>Math.round(s/2))).forEach(i=>a.numericOprsBundle.push(i)),!0},settle:async()=>!0}]}),t},xt=()=>{const t=[];return t.push({name:"æ°´æ™¶æ©Ÿå·§ï¼ãƒãƒªãƒ•ã‚¡ã‚¤ãƒãƒ¼",actions:[g,ee(e=>e.length===2&&e.some(a=>{var i;return(i=a.status.monsterCategories)==null?void 0:i.includes("Tuner")})),{title:"â‘ ãƒªã‚¯ãƒ«ãƒ¼ãƒˆ",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:A,executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],validate:e=>{if(!e.action.entity.hasBeenSummonedNow(["LinkSummon"]))return;const a=[e.activator.getHandCell(),e.activator.getDeckCell()].flatMap(r=>r.cardEntities).filter(r=>(r.lvl??12)<4).filter(r=>{var s;return(s=r.status.monsterCategories)==null?void 0:s.includes("Tuner")}),i=e.activator.getMonsterZones();return e.activator.getEnableSummonList(e.activator,"SpecialSummon",["Effect"],e.action,a.map(r=>({monster:r,cells:i,posList:["Defense"]})),[],!1).length?[]:void 0},prepare:async()=>({selectedEntities:[],chainBlockTags:["SpecialSummonFromDeck"],prepared:void 0}),execute:async e=>{const a=[e.activator.getHandCell(),e.activator.getDeckCell()].flatMap(r=>r.cardEntities).filter(r=>(r.lvl??12)<4).filter(r=>{var s;return(s=r.status.monsterCategories)==null?void 0:s.includes("Tuner")}),i=e.activator.getMonsterZones(),n=await e.activator.summonOne(e.activator,"SpecialSummon",["Effect"],e.action,a.map(r=>({monster:r,cells:i,posList:["Defense"]})),[],!1,!1)??[];return n.forEach(r=>r.statusOperatorBundle.push(new $("åŠ¹æžœç™ºå‹•ä¸å¯",s=>s.effectOwner.duel.clock.isSameTurn(s.isSpawnedAt),!1,e.action.entity,e.action,()=>!0,()=>({canActivateEffect:!1})))),n.length==1},settle:async()=>!0},{title:"â‘¡ã‚·ãƒ³ã‚¯ãƒ­å¬å–š",isMandatory:!1,playType:"QuickEffect",spellSpeed:"Quick",executableCells:A,executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],isOnlyNTimesPerChain:1,canPayCosts:Q,validate:e=>{if(e.activator.isTurnPlayer)return;const a=[...e.activator.getMonsterZones(),...e.activator.duel.field.getCells("ExtraMonsterZone")],i=e.activator.getExtraDeck().cardEntities.filter(r=>{var s;return(s=r.status.monsterCategories)==null?void 0:s.includes("Syncro")}).filter(r=>{var s;return(s=r.status.monsterCategories)==null?void 0:s.includes("Tuner")});return e.activator.getEnableSummonList(e.activator,"SyncroSummon",["SpecialSummon","Effect"],e.action,i.map(r=>({monster:r,cells:a,posList:m})),[{material:e.action.entity,cell:e.action.entity.fieldCell}],!1).length?[]:void 0},payCosts:V,prepare:x,execute:async e=>{const a=[...e.activator.getMonsterZones(),...e.activator.duel.field.getCells("ExtraMonsterZone")],i=e.activator.getExtraDeck().cardEntities.filter(n=>{var r;return(r=n.status.monsterCategories)==null?void 0:r.includes("Syncro")}).filter(n=>{var r;return(r=n.status.monsterCategories)==null?void 0:r.includes("Tuner")});return await e.activator.summonOne(e.activator,"SyncroSummon",["SpecialSummon","Effect"],e.action,i.map(n=>({monster:n,cells:a,posList:m})),[],!1,!1),!0},settle:async()=>!0}],defaultSummonFilter:M}),t},Mt=()=>{const t=[];return t.push({name:"å°å°ã•ã‚Œã—ã‚¨ã‚¯ã‚¾ãƒ‡ã‚£ã‚¢",actions:[g,f,k,S,{title:"å°å°é–‹æ”¾",isMandatory:!0,playType:"Exodia",spellSpeed:"Normal",executableCells:["Hand"],executablePeriods:L,executableDuelistTypes:["Controller"],validate:e=>{const a=e.activator.getHandCell().cardEntities.filter(i=>{var n;return(n=i.origin.nameTags)==null?void 0:n.includes("å°å°ã•ã‚Œã—")}).map(i=>i.origin.name).getDistinct();return console.log(e.action.entity.toString(),a),a.length===5?[]:void 0},prepare:async e=>(await E.sendManyToGraveyardForTheSameReason(e.activator.duel.field.getCardsOnFieldStrictly(),["Rule"],e.action.entity,e.activator),{selectedEntities:[],chainBlockTags:[""],prepared:void 0,nextChainBlockFilter:()=>!1}),execute:async e=>{const a=e.activator.getOpponentPlayer().getHandCell().cardEntities.filter(n=>{var r;return(r=n.origin.nameTags)==null?void 0:r.includes("å°å°ã•ã‚Œã—")}).map(n=>n.origin.name).getDistinct().length===5,i=[{name:"å°å°ã•ã‚Œã—è€…ã®å·¦è¶³",column:4},{name:"å°å°ã•ã‚Œã—è€…ã®å³è¶³",column:2},{name:"å°å°ã•ã‚Œã—è€…ã®å·¦è…•",column:5},{name:"å°å°ã•ã‚Œã—è€…ã®å³è…•",column:1},{name:"å°å°ã•ã‚Œã—ã‚¨ã‚¯ã‚¾ãƒ‡ã‚£ã‚¢",column:3}];for(const n of i){const r=[e.activator.getHandCell().cardEntities.find(s=>s.origin.name===n.name),e.activator.getOpponentPlayer().getHandCell().cardEntities.find(s=>s.origin.name===n.name)].filter(s=>s!==void 0);if(!r.length)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ…‹",e.activator.getHandCell().cardEntities,n.name);await fe.moveMany(r.map(s=>[s,s.controller.getMonsterZones().find(u=>u.column===(s.controller.seat==="Above"?6-n.column:n.column))??s.controller.getFieldZone(),"Monster","FaceUp","Vertical","Top",["Rule"],void 0,void 0,void 0]))}throw a?new te(void 0,`ãŠäº’ã„ãŒã€${e.action.entity.toString()}ã®ç‰¹æ®Šå‹åˆ©æ¡ä»¶ã‚’åŒæ™‚ã«æº€ãŸã—ãŸã€‚`):new te(e.activator,`${e.action.entity.toString()}ã®ç‰¹æ®Šå‹åˆ©æ¡ä»¶ã‚’æº€ãŸã—ãŸã€‚`)},settle:async()=>!0}]}),t},wt=()=>{const t=[];return t.push({name:"ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ãƒ»ãƒ‰ãƒ©ã‚´ãƒ³ãƒ»ã‚·ãƒ³ã‚®ãƒ¥ãƒ©ãƒªãƒ†ã‚£",actions:[g,ee(e=>e.length>2),{title:"â‘ ãƒã‚¦ãƒ³ã‚¹ï¼†è‡ªå·±å¼·åŒ–",isMandatory:!1,playType:"QuickEffect",spellSpeed:"Quick",executableCells:A,executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],isOnlyNTimesPerTurn:1,validate:e=>[...e.activator.getGraveyard().cardEntities,...e.activator.getMonstersOnField()].flatMap(r=>r.status.monsterCategories??[]).getDistinct().union(["Ritual","Fusion","Syncro","Xyz"]).length<1?void 0:[...e.activator.getOpponentPlayer().getGraveyard().cardEntities,...e.activator.getOpponentPlayer().getEntiteisOnField()].filter(r=>r.canBeTargetOfEffect(e)).length?[]:void 0,prepare:async e=>{const i=[...e.activator.getGraveyard().cardEntities,...e.activator.getMonstersOnField()].flatMap(s=>s.status.monsterCategories??[]).getDistinct().union(["Ritual","Fusion","Syncro","Xyz"]).length;if(i<1)return;const n=[...e.activator.getOpponentPlayer().getGraveyard().cardEntities,...e.activator.getOpponentPlayer().getEntiteisOnField()].filter(s=>s.canBeTargetOfEffect(e));if(n.length<1)return;const r=await e.action.entity.duel.view.waitSelectEntities(e.activator,{selectables:n,qty:void 0,validator:s=>s.length>0&&s.length<=i,cancelable:!1},"æ‰‹æœ­ã«æˆ»ã™ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠžã€‚")??[];if(r.length)return{selectedEntities:r,chainBlockTags:[],prepared:void 0}},execute:async e=>{const a=e.selectedEntities.filter(n=>n.isOnFieldStrictly||n.fieldCell.cellType==="Graveyard").filter(n=>n.canBeEffected(e.activator,e.action.entity,e.action));await E.returnManyToHandForTheSameReason(a,["Effect"],e.action.entity,e.activator);const i=a.filter(n=>n.fieldCell.cellType==="Hand"||n.fieldCell.cellType==="ExtraDeck").length;return e.action.entity.numericOprsBundle.push(B.createLingeringAddition(e.action.title,n=>n.isSpawnedBy.isEffective,e.action.entity,e.action,"attack",(n,r,s)=>s+500*i)),!0},settle:async()=>!0},{title:"â‘¡è˜‡ç”Ÿ",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:A,executablePeriods:L,executableDuelistTypes:["Controller"],isOnlyNTimesPerTurn:1,validate:e=>{const a=e.action.entity.moveLog.latestRecord.movedAt,i=e.action.duel.field.moveLog.getPriviousChainLog().filter(s=>(console.log(s,s.entity.fieldCell.cellType==="Graveyard",s.movedAs.includes("BattleDestroy")),s.entity.fieldCell.cellType==="Graveyard"||s.movedAs.includes("BattleDestroy"))).filter(s=>s.movedAt.totalProcSeq>a.totalProcSeq).map(s=>s.entity.wasMovedFrom).toArray();if(!e.action.entity.linkArrowDests.union(i).length)return;const n=e.activator.getMonsterZones();if(e.activator.getEnableSummonList(e.activator,"SpecialSummon",["Effect"],e.action,e.activator.getGraveyard().cardEntities.filter(s=>s.kind==="Monster").filter(s=>s.types.includes("Cyberse")).filter(s=>s.canBeTargetOfEffect(e)).map(s=>({monster:s,posList:m,cells:n})),[],!1).length)return C(e)},prepare:e=>Z(e,e.activator.getGraveyard().cardEntities.filter(a=>a.kind==="Monster").filter(a=>a.types.includes("Cyberse")).filter(a=>a.canBeTargetOfEffect(e)),m),execute:e=>H(e,m),settle:async()=>!0}],defaultSummonFilter:M}),t},At=()=>{const t=[];return["ã‚¤ã‚°ãƒŠã‚¤ãƒˆãƒ»ã‚¤ãƒ¼ã‚°ãƒ«","ã‚¤ã‚°ãƒŠã‚¤ãƒˆãƒ»ãƒžã‚°ãƒŠãƒ ","ã‚¤ã‚°ãƒŠã‚¤ãƒˆãƒ»ãƒ‰ãƒ©ã‚°ãƒŽãƒ•","ã‚¤ã‚°ãƒŠã‚¤ãƒˆãƒ»ãƒžã‚¹ã‚±ãƒƒãƒˆ","ã‚¤ã‚°ãƒŠã‚¤ãƒˆãƒ»ãƒ‡ãƒªãƒ³ã‚¸ãƒ£ãƒ¼","ã‚¤ã‚°ãƒŠã‚¤ãƒˆãƒ»ãƒ©ã‚¤ã‚ªãƒƒãƒˆ","ã‚¤ã‚°ãƒŠã‚¤ãƒˆãƒ»ã‚¦ãƒ¼ã‚¸ãƒ¼","ã‚¤ã‚°ãƒŠã‚¤ãƒˆãƒ»ã‚­ãƒ£ãƒªãƒãƒ¼"].forEach(e=>{t.push({name:e,actions:[g,f,S,k,ue,{title:"â‘ ã‚µãƒ¼ãƒ",isMandatory:!1,playType:"IgnitionEffect",spellSpeed:"Normal",executableCells:["SpellAndTrapZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:a=>{var n;const i=a.activator.getPendulumScaleMonsters().find(r=>r!==a.action.entity);if(i&&(n=i.status.nameTags)!=null&&n.includes("ã‚¤ã‚°ãƒŠã‚¤ãƒˆ"))return a.activator.getDeckCell().cardEntities.some(r=>{var s;return(s=r.status.nameTags)==null?void 0:s.includes("ã‚¤ã‚°ãƒŠã‚¤ãƒˆ")})?[]:void 0},prepare:async a=>({selectedEntities:[],chainBlockTags:["SearchFromDeck",...a.action.calcChainBlockTagsForDestroy(a.activator.getPendulumScaleMonsters())],prepared:void 0}),execute:async a=>{if(!(await E.tryDestroy(a.activator.getPendulumScaleMonsters(),a)).length)return!1;const n=a.activator.getDeckCell().cardEntities.filter(s=>{var u;return(u=s.status.nameTags)==null?void 0:u.includes("ã‚¤ã‚°ãƒŠã‚¤ãƒˆ")});if(!n.length)return!1;const r=await a.activator.waitSelectEntity(n,"æ‰‹æœ­ã«åŠ ãˆã‚‹ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠžã€‚",!1);return r?(await r.addToHand(["Effect"],a.action.entity,a.activator),!0):!1},settle:async()=>!0}]})}),t},Bt=()=>{const t=[];return t.push({name:"ã‚¸ãƒ£ãƒ³ã‚¯ãƒ»ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼",actions:[g,f,S,k,{title:"ç½ ã‚³ãƒ”ãƒ¼",isMandatory:!1,playType:"QuickEffect",spellSpeed:"Quick",executableCells:A,executablePeriods:h,executableDuelistTypes:["Controller"],canPayCosts:e=>e.activator.getGraveyard().cardEntities.filter(i=>i.kind==="Trap").filter(i=>i.status.trapCategory==="Normal").filter(i=>e.activator.canTryBanish(i,"BanishAsCost",e.action)).filter(i=>i.canBeBanished("BanishAsCost",e.activator,e.action.entity,e.action)).flatMap(i=>i.actions).filter(i=>i.playType==="CardActivation").filter(i=>!i.needsToPayCost).filter(i=>i.validate(e.activator,[],!0)).length?Q(e):!1,validate:()=>[],payCosts:async(e,a,i)=>{const n=e.activator.getGraveyard().cardEntities.filter(u=>u.kind==="Trap").filter(u=>u.status.trapCategory==="Normal").filter(u=>e.activator.canTryBanish(u,"BanishAsCost",e.action)).filter(u=>u.canBeBanished("BanishAsCost",e.activator,e.action.entity,e.action)).flatMap(u=>u.actions).filter(u=>u.playType==="CardActivation").filter(u=>!u.needsToPayCost).filter(u=>u.validate(e.activator,[],!0)).map(u=>u.entity),r=await e.activator.waitSelectEntity(n,"ã‚³ãƒ”ãƒ¼ã™ã‚‹ç½ ã‚’é¸æŠžã€‚",i);if(!r)return;const s=[e.action.entity,r];return await E.banishManyForTheSameReason(s,["Cost"],e.action.entity,e.activator),{banish:s}},prepare:async(e,a)=>{var r;const i=(r=e.costInfo.banish)==null?void 0:r.find(s=>s!==e.action.entity);if(!i)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ³",e,e.costInfo);const n=i.actions.find(s=>s.playType==="CardActivation");if(!n)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ³",e,e.costInfo,i);return await n.prepare(e.activator,void 0,void 0,a,!1,!0)},execute:async(e,a)=>{var r;const i=(r=e.costInfo.banish)==null?void 0:r.find(s=>s!==e.action.entity);if(!i)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ³",e,e.costInfo);const n=i.actions.find(s=>s.playType==="CardActivation");if(!n)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ³",e,e.costInfo,i);return await n.execute(e,a)},settle:async()=>!0}]}),t},Pt=()=>{const t=[];return t.push({name:"ãƒ€ãƒ¼ã‚¯ãƒ»ãƒªã‚¾ãƒãƒ¼ã‚¿ãƒ¼",actions:[g,f,S,k],substituteEffects:[Ze(1)]}),t.push({name:"ãƒ¬ãƒƒãƒ‰ãƒ»ãƒªã‚¾ãƒãƒ¼ã‚¿ãƒ¼",actions:[g,f,S,k,{title:"â‘ ç‰¹æ®Šå¬å–š",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["MonsterZone"],executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],validate:e=>{if(!e.action.entity.hasBeenSummonedNow(["NormalSummon"]))return;const a=e.activator.getMonsterZones();if(e.activator.getEnableSummonList(e.activator,"SpecialSummon",["Effect"],e.action,e.activator.getHandCell().cardEntities.filter(n=>n.kind==="Monster").filter(n=>(n.lvl??12)<5).map(n=>({monster:n,posList:m,cells:a})),[],!1).length)return[]},prepare:async()=>({selectedEntities:[],chainBlockTags:["SpecialSummonFromHand"],prepared:void 0}),execute:async e=>{const a=e.activator.getMonsterZones(),i=e.activator.getHandCell().cardEntities.filter(r=>r.kind==="Monster").filter(r=>(r.lvl??12)<5).map(r=>({monster:r,posList:m,cells:a}));return!!await e.activator.summonOne(e.activator,"SpecialSummon",["Effect"],e.action,i,[],!1,!1)},settle:async()=>!0},{title:"â‘¡å›žå¾©",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["MonsterZone"],executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],hasToTargetCards:!0,isOnlyNTimesPerTurn:1,validate:e=>{if(e.action.entity.hasBeenSummonedNow(["SpecialSummon"]))return e.activator.getMonstersOnField().filter(a=>a.canBeTargetOfEffect(e)).filter(a=>(a.atk??0)>0).some(a=>a.info.summonKinds.includes("SpecialSummon"))?[]:void 0},prepare:async e=>{const a=await e.activator.waitSelectEntity(e.activator.getMonstersOnField().filter(i=>i.canBeTargetOfEffect(e)).filter(i=>(i.atk??0)>0).filter(i=>i.info.summonKinds.includes("SpecialSummon")),"å¯¾è±¡ã¨ã™ã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",!1);if(a)return{selectedEntities:[a],chainBlockTags:[],prepared:void 0}},execute:async e=>{const a=e.activator.lp;return e.selectedEntities.filter(i=>i.isOnFieldAsMonsterStrictly).forEach(i=>e.activator.heal(i.atk??0,e.action.entity)),e.activator.lp!==a},settle:async()=>!0}]}),t},ae=(t,e)=>{const a=e?`é­”åŠ›å……å¡«å¯èƒ½(${e})`:"é­”åŠ›å……å¡«å¯èƒ½";return ne(a,t,i=>[i],()=>!0,i=>[new $(a,()=>!0,!0,i,{},(n,r)=>n.isSpawnedBy===r,(n,r)=>(r.maxCounterQty.SpellCounter=e??Number.MAX_VALUE,{...r,maxCounterQty:r.maxCounterQty}))])},K={},Ft=(t,e=1)=>(K[e]||(K[e]={title:`é­”åŠ›å›žåŽ(${e})`,isMandatory:!0,playType:"AfterChainBlock",spellSpeed:"Normal",executableCells:["MonsterZone"],executablePeriods:L,executableDuelistTypes:["Controller"],validate:a=>{if(!a.targetChainBlock||a.targetChainBlock.action.playType!=="CardActivation"||a.targetChainBlock.action.entity.kind!=="Spell"||!a.action.entity.isEffective||a.action.entity.face==="FaceDown")return;const i=a.action.entity.status.maxCounterQty.SpellCounter??0;if(!(a.action.entity.counterHolder.getQty("SpellCounter")>=i)&&!(a.action.entity.hadArrivedToFieldAt().totalProcSeq>a.targetChainBlock.isActivatedAt.totalProcSeq))return[]},prepare:x,execute:async a=>a.action.entity.face==="FaceDown"||!a.action.entity.isOnFieldAsMonsterStrictly||!a.action.entity.isEffective?!1:(a.action.entity.counterHolder.add("SpellCounter",e,a.action.entity),!0),settle:async()=>!0}),{...K[e],title:`${t}é­”åŠ›å›žåŽ(${e})`}),ie=(t,e,a)=>t.action.entity.counterHolder.getQty("SpellCounter")>=a,re=(t,e,a,i)=>{const n=i[0];return t.action.entity.counterHolder.remove("SpellCounter",n),{counter:n}},Ot=()=>{const t=[];return t.push({name:"é­”å°Žæˆ¦å£« ãƒ–ãƒ¬ã‚¤ã‚«ãƒ¼",actions:[g,f,S,k,{title:"â‘ é­”åŠ›å……å¡«",isMandatory:!0,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["MonsterZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],validate:e=>{if(e.action.entity.hasBeenSummonedNow(["NormalSummon"]))return[]},prepare:async()=>({selectedEntities:[],chainBlockTags:["IfNormarlSummonSucceed"],prepared:void 0}),execute:async e=>e.action.entity.face==="FaceDown"?!1:(e.action.entity.counterHolder.setQty("SpellCounter",1,e.action.entity),!0),settle:async()=>!0},{title:"â‘¢ãƒžãƒŠãƒ–ãƒ¬ã‚¤ã‚¯",isMandatory:!1,playType:"IgnitionEffect",spellSpeed:"Normal",executableCells:["MonsterZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],hasToTargetCards:!0,canPayCosts:(e,a)=>ie(e,a,1),validate:e=>{const a=e.action.entity.field.getCells(...G).flatMap(i=>i.cardEntities).filter(i=>i.canBeTargetOfEffect(e));if(a.length)return a.map(i=>i.fieldCell)},payCosts:async(e,a,i)=>re(e,a,i,[1]),prepare:async(e,a,i)=>{var r;let n=(r=e.dest)==null?void 0:r.cardEntities[0];if(!n){const s=e.action.entity.field.getCells(...G).flatMap(p=>p.cardEntities).filter(p=>p.canBeTargetOfEffect(e)),u=await e.activator.waitSelectEntity(s,"ç ´å£Šã™ã‚‹å¯¾è±¡ã‚’é¸æŠžã€‚",i);if(!u)return;n=u}return{selectedEntities:[n],chainBlockTags:e.action.calcChainBlockTagsForDestroy([n]),prepared:void 0}},execute:async e=>e.selectedEntities.every(a=>!a.isOnFieldAsSpellTrapStrictly)?!1:(await E.tryDestroy(e.selectedEntities,e),!0),settle:async()=>!0}],continuousEffects:[ae("Monster",1),U("â‘¡æ”»æ’ƒåŠ›ä¸Šæ˜‡","Monster",e=>[e],()=>!0,e=>[B.createContinuous("â‘¡æ”»æ’ƒåŠ›ä¸Šæ˜‡",()=>!0,e,()=>!0,"attack","wip","Addition",(a,i,n)=>a.isEffective?n+a.counterHolder.getQty("SpellCounter")*300:n)])]}),t.push({name:"çŽ‹ç«‹é­”æ³•å›³æ›¸é¤¨",actions:[g,f,S,k,{...Ft("â‘ ",1)},{title:"â‘¡ãƒ‰ãƒ­ãƒ¼",isMandatory:!1,playType:"IgnitionEffect",spellSpeed:"Normal",executableCells:["MonsterZone"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],canPayCosts:(e,a)=>ie(e,a,3),validate:e=>{if(e.activator.getDeckCell().cardEntities.length)return[]},payCosts:async(e,a,i)=>re(e,a,i,[3]),prepare:x,execute:async e=>(await e.activator.draw(1,e.action.entity,e.activator),!0),settle:async()=>!0}],continuousEffects:[ae("Monster",3)]}),t},Lt=()=>{const t=[];return t.push({name:"ã‚¹ã‚¿ãƒ¼ãƒ€ã‚¹ãƒˆãƒ»ãƒ‰ãƒ©ã‚´ãƒ³",actions:[g,f,S,P(),{title:"â‘ ãƒ´ã‚£ã‚¯ãƒ†ãƒ ãƒ»ã‚µãƒ³ã‚¯ãƒãƒ¥ã‚¢ãƒª",isMandatory:!1,playType:"QuickEffect",spellSpeed:"Quick",executableCells:["MonsterZone","ExtraMonsterZone"],executablePeriods:L,executableDuelistTypes:["Controller"],canPayCosts:Y,validate:(e,a)=>a.length===0?void 0:a[e.index-1].chainBlockTags.includes("DestroyOnField")?[]:void 0,payCosts:I,prepare:async(e,a)=>{const i=a.slice(-1)[0];return{selectedEntities:[],chainBlockTags:e.action.calcChainBlockTagsForDestroy([i.action.entity]),prepared:void 0}},execute:async(e,a)=>{const i=a[e.index-1];return i.isNegatedActivationBy=e.action,await E.tryDestroy([i.action.entity],e),!0},settle:async()=>!0},{title:"â‘¡è‡ªå·±å†ç”Ÿ",playType:"IgnitionEffect",isMandatory:!1,spellSpeed:"Normal",executableCells:["Graveyard"],executablePeriods:["end"],executableDuelistTypes:["Controller"],validate:e=>{const a=e.action.entity.moveLog.latestRecord;if(a.movedBy!==e.action.entity||!e.activator.duel.clock.isSameTurn(a.movedAt)||!a.movedAs.includes("Cost"))return;const i=e.activator.duel,n=e.action.entity.actionLogRecords.filter(s=>i.clock.isSameTurn(s.clock)).map(s=>s.chainBlockInfo).findLast(s=>s.action.title==="â‘ ãƒ´ã‚£ã‚¯ãƒ†ãƒ ãƒ»ã‚µãƒ³ã‚¯ãƒãƒ¥ã‚¢ãƒª");return!n||n.state!=="done"?void 0:e.activator.getAvailableMonsterZones().length>0?[]:void 0},prepare:x,execute:e=>N(e),settle:async()=>!0}],defaultSummonFilter:M}),t.push({name:"é–ƒç–ç«œ ã‚¹ã‚¿ãƒ¼ãƒ€ã‚¹ãƒˆ",defaultSummonFilter:M,actions:[g,f,P(),{title:"æ³¢å‹•éŸ³å£",isMandatory:!1,playType:"QuickEffect",spellSpeed:"Quick",executableCells:A,executablePeriods:h,executableDuelistTypes:["Controller"],isOnlyNTimesPerTurnIfFaceup:1,hasToTargetCards:!0,validate:e=>{const a=e.activator.getEntiteisOnField().filter(i=>i.face==="FaceUp").filter(i=>i.canBeTargetOfEffect(e));if(a.length)return a.map(i=>i.fieldCell)},prepare:async(e,a,i)=>{if(e.dest)return{selectedEntities:e.dest.cardEntities,chainBlockTags:[],prepared:void 0};const n=e.activator.getEntiteisOnField().filter(s=>s.face==="FaceUp").filter(s=>s.canBeTargetOfEffect(e));if(!n.length)return;const r=await e.activator.waitSelectEntity(n,"å¯¾è±¡ã¨ã™ã‚‹ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠž",i);if(r)return{selectedEntities:[r],chainBlockTags:[],prepared:void 0}},execute:async e=>(e.selectedEntities.filter(a=>a.isOnFieldStrictly).filter(a=>a.face==="FaceUp").filter(a=>a.canBeEffected(e.activator,e.action.entity,e.action)).forEach(a=>{a.counterHolder.add("SonicBarrier",1,e.action.entity)}),!0),settle:async()=>!0}],substituteEffects:[{title:"æ³¢å‹•éŸ³å£ï¼ˆé©ç”¨ï¼‰",isMandatory:!0,executableCells:J,executablePeriods:L,executableDuelistTypes:["Controller"],isApplicableTo:(e,a,i)=>i.filter(n=>n.counterHolder.getQty("SonicBarrier",e.entity)>0),substitute:async(e,a,i)=>{const n=i.filter(r=>r.counterHolder.getQty("SonicBarrier",e.entity)>0);return n.forEach(r=>{r.counterHolder.removeAll("SonicBarrier",e.entity),e.entity.controller.writeInfoLog(`æ³¢å‹•éŸ³å£ã«ã‚ˆã‚Š${r.toString()}ã¯ï¼‘ã‚¿ãƒ¼ãƒ³ã«ï¼‘åº¦ã ã‘æˆ¦é—˜åŠ¹æžœã§ã¯ç ´å£Šã•ã‚Œãªã„ã€‚`)}),n}}]}),t.push({name:"çœŸé–ƒç–ç«œ ã‚¹ã‚¿ãƒ¼ãƒ€ã‚¹ãƒˆãƒ»ã‚¯ãƒ­ãƒ‹ã‚¯ãƒ«",defaultSummonFilter:M,actions:[g,f,P(e=>e.length===1&&e.every(a=>{var i;return(i=a.status.monsterCategories)==null?void 0:i.includes("Syncro")}),e=>e.length>0&&e.every(a=>{var i;return(i=a.status.monsterCategories)==null?void 0:i.includes("Syncro")})),{title:"æ³¢å‹•è­·é­‚",isMandatory:!1,playType:"QuickEffect",spellSpeed:"Quick",executableCells:A,executablePeriods:h,executableDuelistTypes:["Controller"],isOnlyNTimesPerTurnIfFaceup:1,canPayCosts:e=>xe(e,e.activator.getGraveyard().cardEntities.filter(a=>{var i;return(i=a.status.monsterCategories)==null?void 0:i.includes("Syncro")})),validate:()=>[],payCosts:e=>Me(e,e.activator.getGraveyard().cardEntities.filter(a=>{var i;return(i=a.status.monsterCategories)==null?void 0:i.includes("Syncro")}),a=>a.length===1,1),prepare:x,execute:async e=>(e.action.entity.procFilterBundle.push(se.createLingering(e.action.title,a=>a.effectOwner.duel.clock.isSameTurn(a.isSpawnedAt),e.action.entity,e.action,()=>!0,["Effect"],()=>!1)),!0),settle:async()=>!0},{title:"â‘¡è˜‡ç”Ÿ",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["Banished"],executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],validate:e=>{if(!e.action.entity.wasMovedAtPreviousChain)return;const a=e.activator.getMonsterZones();if(e.activator.getEnableSummonList(e.activator,"SpecialSummon",["Effect"],e.action,e.activator.getBanished().cardEntities.filter(n=>n.kind==="Monster").filter(n=>n.face==="FaceUp").filter(n=>n.types.includes("Dragon")).filter(n=>{var r;return(r=n.status.monsterCategories)==null?void 0:r.includes("Syncro")}).filter(n=>n.canBeTargetOfEffect(e)).map(n=>({monster:n,posList:m,cells:a})),[],!1).length)return[]},prepare:e=>Z(e,e.activator.getBanished().cardEntities.filter(a=>a.kind==="Monster").filter(a=>a.face==="FaceUp").filter(a=>a.types.includes("Dragon")).filter(a=>{var i;return(i=a.status.monsterCategories)==null?void 0:i.includes("Syncro")}).filter(a=>a.canBeTargetOfEffect(e))),execute:async e=>H(e),settle:async()=>!0}]}),t.push({name:"è–ç–ç¥žç«œ ã‚¹ã‚¿ãƒ¼ãƒ€ã‚¹ãƒˆãƒ»ã‚·ãƒ•ãƒ«",defaultSummonFilter:M,actions:[g,f,P(e=>e.length===1&&e.every(a=>{var i;return(i=a.status.monsterCategories)==null?void 0:i.includes("Syncro")}),e=>e.length>1&&e.every(a=>{var i;return(i=a.status.monsterCategories)==null?void 0:i.includes("Syncro")})),{title:"â‘¡ç–æ³¢å‹•åæ’ƒ",isMandatory:!1,playType:"QuickEffect",spellSpeed:"Quick",executableCells:["Hand"],executablePeriods:h,executableDuelistTypes:["Controller"],isOnlyNTimesPerTurnIfFaceup:1,negatePreviousBlock:!0,validate:e=>{if(e.targetChainBlock&&e.activator!==e.targetChainBlock.activator&&e.targetChainBlock.action.entity.kind==="Monster"&&e.targetChainBlock.action.isWithChainBlock)return[]},prepare:async()=>({selectedEntities:[],chainBlockTags:["NegateCardEffect","DestroyOnField"],prepared:void 0}),execute:async e=>{if(!e.targetChainBlock)return!1;const a=e.targetChainBlock;a.isNegatedEffectBy=e.action;const i=await e.activator.waitSelectEntity(e.action.duel.field.getCardsOnFieldStrictly(),"ç ´å£Šã™ã‚‹ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠžã€‚",!1);return(await E.tryDestroy(i?[i]:[],e)).length>0},settle:async()=>!0},{title:"â‘¢è˜‡ç”Ÿ",isMandatory:!1,playType:"IgnitionEffect",spellSpeed:"Normal",executableCells:["Graveyard"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],priorityForNPC:10,canPayCosts:Q,validate:e=>e.activator.getBanished().cardEntities.filter(i=>{var n;return(n=i.status.nameTags)==null?void 0:n.includes("ã‚¹ã‚¿ãƒ¼ãƒ€ã‚¹ãƒˆ")}).filter(i=>(i.lvl??12)<9).length===0?void 0:e.activator.getAvailableMonsterZones().length>0?[]:void 0,payCosts:V,prepare:e=>Z(e,e.activator.getBanished().cardEntities.filter(a=>{var i;return(i=a.status.nameTags)==null?void 0:i.includes("ã‚¹ã‚¿ãƒ¼ãƒ€ã‚¹ãƒˆ")}).filter(a=>(a.lvl??12)<9),m,a=>a.length===1),execute:e=>H(e,m),settle:async()=>!0}],substituteEffects:[{title:"æ³¢å‹•è–å¥",isMandatory:!0,executableCells:["MonsterZone"],executablePeriods:L,executableDuelistTypes:["Controller"],isApplicableTo:(e,a,i)=>i.filter(n=>n.controller===e.entity.controller).filter(n=>n.counterHolder.getQty("SonicVerse",e.entity)===0),substitute:async(e,a,i)=>{if(!e.entity.isEffective)return[];const n=i.filter(r=>r.controller===e.entity.controller).filter(r=>r.counterHolder.getQty("SonicVerse",e.entity)===0);return n.forEach(r=>{r.counterHolder.add("SonicVerse",1,e.entity),e.entity.controller.writeInfoLog(`${e.entity.toString()}ã®åŠ¹æžœã«ã‚ˆã‚Š${r.toString()}ã¯ï¼‘ã‚¿ãƒ¼ãƒ³ã«ï¼‘åº¦ã ã‘ç ´å£Šã•ã‚Œãªã„ã€‚`)}),n}}]}),t},Nt=()=>{const t=[];return t.push({name:"ãƒ•ã‚©ãƒ¼ãƒŸãƒ¥ãƒ©ãƒ»ã‚·ãƒ³ã‚¯ãƒ­ãƒ³",actions:[g,f,S,P(),{title:"â‘ ãƒ‰ãƒ­ãƒ¼",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:A,executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],validate:e=>{if(e.action.entity.hasBeenSummonedJustNow(["SyncroSummon"])&&e.activator.getDeckCell().cardEntities.length)return[]},prepare:async()=>({selectedEntities:[],chainBlockTags:["Draw"],prepared:void 0}),execute:async e=>(await e.activator.draw(1,e.action.entity,e.activator),!0),settle:async()=>!0},oe({title:"â‘¡ã‚·ãƒ³ã‚¯ãƒ­å¬å–š",isOnlyNTimesPerChain:1})],defaultSummonFilter:M}),t},Zt=()=>{const t=[];return t.push({name:"æ˜Ÿæ¯ã®å¦–ç²¾ãƒªãƒ¼ã‚¹",actions:[g,f,S,k,{title:"â‘ ã‚µãƒ¼ãƒ",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["MonsterZone"],executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],isOnlyNTimesPerTurn:1,validate:e=>{if(e.action.entity.hasBeenSummonedNow(["NormalSummon","SpecialSummon"])&&e.activator.getDeckCell().cardEntities.filter(a=>a.kind==="Monster").filter(a=>{var i;return(i=a.status.nameTags)==null?void 0:i.includes("æ˜Ÿæ¯")}).length!==0)return[]},prepare:async()=>({selectedEntities:[],chainBlockTags:["SearchFromDeck"],prepared:void 0}),execute:async e=>{const a=e.activator.getDeckCell().cardEntities.filter(n=>n.kind==="Monster").filter(n=>{var r;return(r=n.status.nameTags)==null?void 0:r.includes("æ˜Ÿæ¯")});if(a.length===0)return!1;const i=await e.activator.waitSelectEntity(a,"æ‰‹æœ­ã«åŠ ãˆã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠž",!1);if(!i)throw new b("æƒ³å®šã•ã‚Œãªã„çŠ¶æ…‹",e);return await i.addToHand(["Effect"],e.action.entity,e.activator),!0},settle:async()=>!0},{title:"â‘¡è‡ªå·±ã‚µãƒ«ãƒ™ãƒ¼ã‚¸",isMandatory:!1,playType:"IgnitionEffect",spellSpeed:"Normal",executableCells:["Graveyard"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],isOnlyNTimesPerTurn:1,canPayCosts:e=>[...e.activator.getMonstersOnField(),...e.activator.getHandCell().cardEntities.filter(a=>a.kind==="Monster")].some(a=>a.canBeSentToGraveyard(e.activator,e.action.entity,"SendToGraveyardAsCost",e.action)),validate:()=>[],payCosts:async e=>{const a=[...e.activator.getMonstersOnField(),...e.activator.getHandCell().cardEntities.filter(n=>n.kind==="Monster")].filter(n=>n.canBeSentToGraveyard(e.activator,e.action.entity,"SendToGraveyardAsCost",e.action)),i=await e.activator.waitSelectEntity(a,"å¢“åœ°ã«é€ã‚‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠžã€‚",!0);if(i)return await i.sendToGraveyard(["Cost"],e.action.entity,e.activator),{sendToGraveyard:[i]}},prepare:async()=>({selectedEntities:[],chainBlockTags:["SearchFromDeck"],prepared:void 0}),execute:async e=>e.action.entity.wasMovedAfter(e.isActivatedAt)?!1:(await e.action.entity.addToHand(["Effect"],e.action.entity,e.activator),!0),settle:async()=>!0}]}),t.push({name:"æ˜Ÿéºç‰©ï¼ã€Žæ˜Ÿæ¯ã€",actions:[g,f,S,k,{title:"â‘ å¢“åœ°é€ã‚Š",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["MonsterZone"],executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],canPayCosts:Y,validate:e=>e.activator.duel.field.moveLog.getPriviousChainLog().filter(a=>a.movedAs.includes("SpecialSummon")).map(a=>a.entity).some(a=>a.wasMovedFrom.cellType==="ExtraDeck")?[]:void 0,payCosts:I,prepare:x,execute:async e=>{const a=e.activator.duel.field.moveLog.getPriviousChainLog().filter(i=>i.movedAs.includes("SpecialSummon")).map(i=>i.entity).filter(i=>i.wasMovedFrom.cellType==="ExtraDeck").filter(i=>i.isOnFieldAsMonsterStrictly).filter(i=>i.canBeEffected(e.activator,e.action.entity,e.action)).toArray();return await E.sendManyToGraveyardForTheSameReason(a,["Effect"],e.action.entity,e.activator),!0},settle:async()=>!0},{title:"â‘¡ãƒªã‚¯ãƒ«ãƒ¼ãƒˆ",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["Hand","Graveyard","Banished"],executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],validate:e=>{if(!e.action.entity.wasMovedAtPreviousChain||!e.action.entity.info.summonKinds.includes("NormalSummon")||e.action.entity.moveLog.previousPlaceRecord.face==="FaceDown")return;const a=e.activator.getDeckCell().cardEntities.filter(r=>r.kind==="Monster").filter(r=>{var s;return(s=r.status.nameTags)==null?void 0:s.includes("æ˜Ÿæ¯")}).filter(r=>r.nm!=="æ˜Ÿéºç‰©ï¼ã€Žæ˜Ÿæ¯ã€"),i=e.activator.getMonsterZones();return e.activator.getEnableSummonList(e.activator,"SpecialSummon",["Effect"],e.action,a.map(r=>({monster:r,cells:i,posList:m})),[],!1).length>1?[]:void 0},prepare:x,execute:async e=>{const a=e.activator.getDeckCell().cardEntities.filter(r=>r.kind==="Monster").filter(r=>{var s;return(s=r.status.nameTags)==null?void 0:s.includes("æ˜Ÿæ¯")}).filter(r=>r.nm!=="æ˜Ÿéºç‰©ï¼ã€Žæ˜Ÿæ¯ã€"),i=e.activator.getMonsterZones();return(await e.activator.summonMany(e.activator,"SpecialSummon",["Effect"],e.action,a.map(r=>({monster:r,cells:i,posList:m})),[],!1,2,r=>r.length==2,!1)??[]).length==2},settle:async()=>!0},{title:"â‘¢ã‚µãƒ¼ãƒ",isMandatory:!1,playType:"IgnitionEffect",spellSpeed:"Normal",executableCells:["Graveyard"],executablePeriods:["main1","main2"],executableDuelistTypes:["Controller"],canPayCosts:Q,validate:e=>{if(!e.action.entity.wasMovedAtCurrentTurn)return e.activator.getDeckCell().cardEntities.filter(a=>{var i;return(i=a.status.nameTags)==null?void 0:i.includes("æ˜Ÿéºç‰©")}).length>0?[]:void 0},payCosts:V,prepare:async()=>({selectedEntities:[],chainBlockTags:["SearchFromDeck"],prepared:void 0}),execute:async e=>{const a=await e.activator.waitSelectEntity(e.activator.getDeckCell().cardEntities.filter(i=>{var n;return(n=i.status.nameTags)==null?void 0:n.includes("æ˜Ÿéºç‰©")}),"æ‰‹æœ­ã«åŠ ãˆã‚‹ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠž",!1);return a?(await a.addToHand(["Effect"],e.action.entity,e.activator),!0):!1},settle:async()=>!0}]}),t},Ht=()=>{const t=[];return t.push({name:"ãƒ‰ãƒƒãƒˆã‚¹ã‚±ãƒ¼ãƒ‘ãƒ¼",actions:[g,f,k,S,{title:"â‘ è‡ªå·±å†ç”Ÿ",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["Graveyard"],executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],isOnlyNTimesPerDuel:1,actionGroupName:"ãƒ‰ãƒƒãƒˆã‚¹ã‚±ãƒ¼ãƒ‘ãƒ¼",validate:e=>{if(e.action.entity.wasMovedAtPreviousChain)return e.activator.getAvailableMonsterZones().length>0?[]:void 0},prepare:async()=>({selectedEntities:[],chainBlockTags:["SpecialSummonFromGraveyard"],prepared:void 0}),execute:e=>N(e),settle:async()=>!0},{title:"â‘¡è‡ªå·±å¸°é‚„",isMandatory:!1,playType:"TriggerEffect",spellSpeed:"Normal",executableCells:["Banished"],executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],isOnlyNTimesPerDuel:1,actionGroupName:"ãƒ‰ãƒƒãƒˆã‚¹ã‚±ãƒ¼ãƒ‘ãƒ¼",validate:e=>{if(e.action.entity.wasMovedAtPreviousChain)return e.activator.getAvailableMonsterZones().length>0?[]:void 0},prepare:async()=>({selectedEntities:[],chainBlockTags:["SpecialSummonFromBanished"],prepared:void 0}),execute:e=>N(e),settle:async()=>!0}]}),t},Rt=()=>{const t=[];return t.push({name:"ã‚¼ãƒ©ã®å¤©ä½¿",actions:[g,f,S,P(),{title:"â‘¡è‡ªå·±å¸°é‚„",isMandatory:!0,playType:"IgnitionEffect",spellSpeed:"Normal",executableCells:["Banished"],executablePeriods:["stanby"],executableDuelistTypes:["Controller"],validate:e=>{if(e.action.entity.wasMovedAtPreviousTurn)return e.activator.getAvailableMonsterZones().length>0?[]:void 0},prepare:async()=>({selectedEntities:[],chainBlockTags:["SpecialSummonFromBanished"],prepared:void 0}),execute:e=>N(e),settle:async()=>!0}],continuousEffects:[U("â‘¡æ”»æ’ƒåŠ›ä¸Šæ˜‡","Monster",e=>[e],()=>!0,e=>[B.createContinuous("â‘ æ”»æ’ƒåŠ›ä¸Šæ˜‡",()=>!0,e,()=>!0,"attack","wip","Addition",(a,i,n)=>a.isEffective?n+a.controller.getOpponentPlayer().getBanished().cardEntities.length*100:n)])],defaultSummonFilter:M}),t},qt=()=>{const t=[];return t.push({name:"æ­»éœŠé¨Žå£«ãƒ‡ã‚¹ã‚«ãƒªãƒãƒ¼ãƒ»ãƒŠã‚¤ãƒˆ",actions:[g,f,k,S,{title:"â‘ ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼åŠ¹æžœç„¡åŠ¹",isMandatory:!0,playType:"TriggerEffect",spellSpeed:"Quick",executableCells:A,executablePeriods:[...h,...D],executableDuelistTypes:["Controller"],negatePreviousBlock:!0,canPayCosts:Y,validate:e=>e.targetChainBlock&&e.targetChainBlock.action.entity.kind==="Monster"&&e.targetChainBlock.action.isWithChainBlock?[]:void 0,payCosts:I,prepare:async(e,a)=>{const i=e.targetChainBlock,n=a[e.index-1];return i!==n?{selectedEntities:[],chainBlockTags:[],prepared:void 0}:{selectedEntities:[],chainBlockTags:["NegateCardEffect",...e.action.calcChainBlockTagsForDestroy([i.action.entity])],prepared:void 0}},execute:async(e,a)=>{const i=a.find(r=>r.action.entity.kind!=="Monster"&&r.action.isWithChainBlock),n=a[e.index-1];return n!==i?!1:(n.isNegatedActivationBy=e.action,await E.tryDestroy([n.action.entity],e),!0)},settle:async()=>!0}],defaultSummonFilter:M}),t},_t=()=>{const t=[];return t.push({name:"ã‚¨ã‚­ã‚»ãƒ³ãƒˆãƒªãƒƒã‚¯ãƒ»ãƒœãƒ¼ã‚¤",actions:[g,f,k,S],defaultSummonFilter:(e,a,i,n,r,s,u,p,l,c)=>{const o={posList:l,cells:c},d={posList:[],cells:[]};if(!r.includes("SyncroSummon"))return o;const v=p.find(T=>T.material===e.isSpawnedBy);return v?!v.cell.isMonsterZoneLikeCell||p.length!==2?d:p.filter(T=>T!==v).every(T=>T.cell.cellType==="Hand")?o:d:o},defaultStatus:{allowHandSyncro:!0},onUsedAsMaterial:(e,a)=>{a.info.summonKinds.includes("SyncroSummon")&&(a.info.willBeBanished=!0,a.info.isEffectiveIn=a.info.isEffectiveIn.filter(i=>i!=="ExtraMonsterZone").filter(i=>i!=="MonsterZone"))}}),t};try{const t=Object.assign({});Object.keys(t).forEach(e=>{t[e].default&&console.log(e,...t[e].default())})}catch(t){console.log("(Â´ãƒ»Ï‰ãƒ»ï½€)"),console.error(t)}const oa=()=>{const t=[...qe(),...tt(),...ft(),...at(),...ct(),...dt(),...ze(),...Qe(),...Ve(),...Xe(),...yt(),...Ot(),...bt(),...ot(),...ut(),...We(),...it(),...Et(),...Pt(),...Lt(),...Ye(),...wt(),...Ht(),...$e(),...Nt(),...qt(),...Rt(),...Zt(),...xt(),..._t(),...kt(),...Bt(),...At(),...Mt(),...Ie(),...Dt(),...mt()],e=t.map(i=>i.name);console.info(e);const a=Object.values(Object.groupBy(e,i=>i)).filter(i=>((i==null?void 0:i.length)??2)>1).map(i=>i==null?void 0:i[0]);if(a.length>0)throw new b("ã‚«ãƒ¼ãƒ‰å®šç¾©é‡è¤‡",...a);return t};export{It as A,Jt as B,jt as C,zt as D,$t as E,le as a,ta as b,M as c,ca as d,aa as e,k as f,ia as g,g as h,f as i,S as j,la as k,ke as l,oa as m,na as n,ra as o,Xt as p,Vt as q,Yt as r,Se as s,ea as t,Kt as u,Wt as v,Qt as w,Ut as x,sa as y,ye as z};
