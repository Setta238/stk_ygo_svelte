var Ka=Object.defineProperty;var Da=c=>{throw TypeError(c)};var Va=(c,i,t)=>i in c?Ka(c,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[i]=t;var vt=(c,i,t)=>Va(c,typeof i!="symbol"?i+"":i,t),$a=(c,i,t)=>i.has(c)||Da("Cannot "+t);var mt=(c,i,t)=>($a(c,i,"read from private field"),t?t.call(c):i.get(c)),Xt=(c,i,t)=>i.has(c)?Da("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(c):i.set(c,t),_a=(c,i,t,v)=>($a(c,i,"write to private field"),v?v.call(c,t):i.set(c,t),t);import{s as Sa,r as Ga,a as w,b as Xa,l as Qa,g as e,d as Oa,p as bt,c as ze,m as fe,i as kt,t as l,e as a,f as k,h as y,j as ce,k as Ee,n as wt,o as ne,q as s,u as xt,v as $e,D as Ja,w as Te,x as U,y as r,z as se,A as Ft,B as ee,C as le,E as m,F as Za,G as dt,H as Vt,I as er,J as tr,K as Nt,L as ht,M as Jt,N as Ia,O as ma,P as la,Q as ha,R as Zt,S as ra,T as oa,U as va,V as ar,W as rr,X as sr,Y as ir,Z as nr,_ as lr,$ as or,a0 as sa,a1 as Ma,a2 as vr,a3 as za,a4 as dr,a5 as Kt,a6 as ua,a7 as Et,a8 as fa,a9 as Ht,aa as Qt,ab as cr,ac as _r,ad as ur,ae as $t,af as fr,ag as pr,ah as gr,ai as Ta,aj as ja,ak as Ea,al as Ba,am as Aa,an as Ya,ao as yr,ap as Lt,aq as Ut,ar as Mt,as as Wt,at as mr,au as hr,av as Ua,aw as Rt,ax as qt,ay as br,az as kr,aA as xr,aB as La,aC as wr,aD as Cr,aE as Dr}from"../chunk/entity_proc_20260110_223042.js";import"../chunk/json_20260110_223042.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))v(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&v(f)}).observe(document,{childList:!0,subtree:!0});function t(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function v(u){if(u.ep)return;u.ep=!0;const d=t(u);fetch(u.href,d)}})();const $r=c=>c;function ba(c){const i=c-1;return i*i*i+1}function Na(c){const i=typeof c=="string"&&c.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[c,"px"]}function Sr(c,{delay:i=0,duration:t=400,easing:v=$r}={}){const u=+getComputedStyle(c).opacity;return{delay:i,duration:t,easing:v,css:d=>`opacity: ${d*u}`}}function Mr(c,{delay:i=0,duration:t=400,easing:v=ba,x:u=0,y:d=0,opacity:f=0}={}){const o=getComputedStyle(c),A=+o.opacity,z=o.transform==="none"?"":o.transform,b=A*(1-f),[M,n]=Na(u),[L,X]=Na(d);return{delay:i,duration:t,easing:v,css:(R,Y)=>`
			transform: ${z} translate(${(1-R)*M}${n}, ${(1-R)*L}${X});
			opacity: ${A-b*Y}`}}function ue(c,{delay:i=0,duration:t=400,easing:v=ba,axis:u="y"}={}){const d=getComputedStyle(c),f=+d.opacity,o=u==="y"?"height":"width",A=parseFloat(d[o]),z=u==="y"?["top","bottom"]:["left","right"],b=z.map(N=>`${N[0].toUpperCase()}${N.slice(1)}`),M=parseFloat(d[`padding${b[0]}`]),n=parseFloat(d[`padding${b[1]}`]),L=parseFloat(d[`margin${b[0]}`]),X=parseFloat(d[`margin${b[1]}`]),R=parseFloat(d[`border${b[0]}Width`]),Y=parseFloat(d[`border${b[1]}Width`]);return{delay:i,duration:t,easing:v,css:N=>`overflow: hidden;opacity: ${Math.min(N*20,1)*f};${o}: ${N*A}px;padding-${z[0]}: ${N*M}px;padding-${z[1]}: ${N*n}px;margin-${z[0]}: ${N*L}px;margin-${z[1]}: ${N*X}px;border-${z[0]}-width: ${N*R}px;border-${z[1]}-width: ${N*Y}px;min-${o}: 0`}}function Pa(c,i){for(const t in i)c[t]=i[t];return c}function Tr({fallback:c,...i}){const t=new Map,v=new Map;function u(f,o,A){const{delay:z=0,duration:b=ae=>Math.sqrt(ae)*30,easing:M=ba}=Pa(Pa({},i),A),n=f.getBoundingClientRect(),L=o.getBoundingClientRect(),X=n.left-L.left,R=n.top-L.top,Y=n.width/L.width,N=n.height/L.height,_e=Math.sqrt(X*X+R*R),oe=getComputedStyle(o),Se=oe.transform==="none"?"":oe.transform,ve=+oe.opacity;return{delay:z,duration:typeof b=="function"?b(_e):b,easing:M,css:(ae,pe)=>`
			   opacity: ${ae*ve};
			   transform-origin: top left;
			   transform: ${Se} translate(${pe*X}px,${pe*R}px) scale(${ae+(1-ae)*Y}, ${ae+(1-ae)*N});
		   `}}function d(f,o,A){return(z,b)=>(f.set(b.key,z),()=>{if(o.has(b.key)){const M=o.get(b.key);return o.delete(b.key),u(M,z,b)}return f.delete(b.key),c&&c(z,b,A)})}return[d(v,t,!1),d(t,v,!0)]}function qa(c){return Object.prototype.toString.call(c)==="[object Date]"}function jr(c){return c}function pa(c){const i=c-1;return i*i*i+1}function ga(c,i){if(c===i||c!==c)return()=>c;const t=typeof c;if(t!==typeof i||Array.isArray(c)!==Array.isArray(i))throw new Error("Cannot interpolate values of different type");if(Array.isArray(c)){const v=i.map((u,d)=>ga(c[d],u));return u=>v.map(d=>d(u))}if(t==="object"){if(!c||!i)throw new Error("Object cannot be null");if(qa(c)&&qa(i)){const d=c.getTime(),o=i.getTime()-d;return A=>new Date(d+A*o)}const v=Object.keys(i),u={};return v.forEach(d=>{u[d]=ga(c[d],i[d])}),d=>{const f={};return v.forEach(o=>{f[o]=u[o](d)}),f}}if(t==="number"){const v=i-c;return u=>c+u*v}return()=>i}var Bt,Gt,ea,Ot;const ka=class ka{constructor(i,t={}){Xt(this,Bt,Sa(void 0));Xt(this,Gt,Sa(void 0));Xt(this,ea);Xt(this,Ot,null);mt(this,Bt).v=mt(this,Gt).v=i,_a(this,ea,t)}static of(i,t){const v=new ka(i(),t);return Ga(()=>{v.set(i())}),v}set(i,t){var M;w(mt(this,Gt),i);let{delay:v=0,duration:u=400,easing:d=jr,interpolate:f=ga}={...mt(this,ea),...t};if(u===0)return(M=mt(this,Ot))==null||M.abort(),w(mt(this,Bt),i),Promise.resolve();const o=Xa.now()+v;let A,z=!1,b=mt(this,Ot);return _a(this,Ot,Qa(n=>{if(n<o)return!0;if(!z){z=!0;const X=mt(this,Bt).v;A=f(X,i),typeof u=="function"&&(u=u(X,i)),b==null||b.abort()}const L=n-o;return L>u?(w(mt(this,Bt),i),!1):(w(mt(this,Bt),A(d(L/u))),!0)})),mt(this,Ot).promise}get current(){return e(mt(this,Bt))}get target(){return e(mt(this,Gt))}set target(i){this.set(i)}};Bt=new WeakMap,Gt=new WeakMap,ea=new WeakMap,Ot=new WeakMap;let ia=ka;var Er=l('<div class="phase_display svelte-1boxe40"><span class="svelte-1boxe40"> </span> </div>'),Br=l('<div class="lifepoint_display svelte-1boxe40"><div class="svelte-1boxe40"> </div> <div class="svelte-1boxe40"> </div></div>'),Ar=(c,i,t)=>i(e(t)),Yr=l('<div class="svelte-1boxe40"><button class="phase_button svelte-1boxe40"> </button></div>'),Ur=l("<div><!></div>"),Lr=l('<div class="svelte-1boxe40"><!></div>'),Nr=l("<div><!></div>"),Pr=l('<div class="config_button_wrapper svelte-1boxe40"><button id="config_button" class="svelte-1boxe40">⚙</button></div>'),qr=l("<!> <!> <!> <!>",1),Fr=l('<div style="position: absolute;" class="card_animation_receiver svelte-1boxe40"><!></div>'),Hr=l('<div style="position: absolute; top:0rem" class="svelte-1boxe40">｛効果対象｝</div>'),Or=l('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Ir=l(" <!> 】",1),zr=l('<div style="position: absolute; bottom:0rem" class="svelte-1boxe40"> <!></div>'),Rr=l("<!> <!>",1),Wr=l('<div class="badge svelte-1boxe40"> </div>'),Kr=l('<div class="card_animation_receiver svelte-1boxe40"><!></div>'),Vr=l("<!> <!> <!> <!>",1),Gr=l('<td><div role="listitem"><!></div></td>');function Xr(c,i){bt(i,!1);let t=ze(i,"view",12),v=ze(i,"row",8),u=ze(i,"column",8),d=ze(i,"selectedEntities",28,()=>[]),f=ze(i,"selectedCells",28,()=>[]),o=fe(t().getCell(v(),u())),A=fe(new ia(e(o).field.duel.duelists.Above.lp,{duration:400,easing:pa})),z=fe(new ia(e(o).field.duel.duelists.Below.lp,{duration:400,easing:pa}));const b=()=>{w(o,t().getCell(v(),u())),$e(A,e(A).target=e(o).field.duel.duelists.Above.lp),$e(z,e(z).target=e(o).field.duel.duelists.Below.lp)};e(o).onUpdate.append(b),t().onDuelUpdate.append(b),t().modalController.onUpdate.append(b);let M,n=fe([]),L=()=>console.log("hoge"),X,R=fe([]),Y=fe(!1),N=fe(!1),_e=!1;const oe=C=>{var F,P;w(j,[]),d().reset(),M=C.activator,L=C.resolve,w(n,C.dummyActionInfos),w(R,C.chainBlockInfos.flatMap(K=>K.selectedEntities).getDistinct()),X=C.entitiesChoices,w(Y,!1),w(N,((F=C.cellsChoices)==null?void 0:F.selectables.includes(e(o)))??!1),_e=e(N)&&((P=C.cellsChoices)==null?void 0:P.qty)===1,b()};t().onWaitStart.append(oe);const Se=()=>{M=void 0,w(n,[]),L=()=>{console.log("hoge")},X=void 0,w(R,[]),w(Y,!1),w(N,!1),_e=!1};t().onWaitEnd.append(Se);let ve=fe(!1),ae=[];const pe=C=>{ae=C.filter(F=>F.dests.includes(e(o))),w(ve,ae.length>0),b()},ye=()=>{ae=[],w(ve,!1),b()};t().onDragStart.append(pe),t().onDragEnd.append(ye);const[Me,x]=ii;let j=fe([]);const ie=C=>{if(M=void 0,e(o)===C.to||e(o).entities.includes(C.entity)){w(j,[...e(j),C]);const F=C.resolve;w(o,e(o)),setTimeout(()=>{w(j,e(j).filter(P=>P!==C)),C.count++,C.count>1&&F()},600)}};t().onAnimation.append(ie);const J=C=>{L({phaseChange:C})},E=()=>e(o).isStackCell&&e(o).entities.flatMap(C=>C.actions).filter(C=>e(n).map(F=>F.action.seq).some(F=>F===C.seq)).length>0,B=C=>{var F;if(((F=C.target)==null?void 0:F.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),_e)L({selectedCells:[e(o)]});else if(e(N))w(Y,!e(Y)),f(e(Y)?[...f(),e(o)]:f().filter(P=>P!==e(o)));else if(e(o).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(o),!0),t().requireUpdate();const P=e(o).entities.flatMap(Q=>Q.actions).map(Q=>Q.seq),K=e(n).filter(Q=>P.includes(Q.action.seq));if(K.length){if(!M)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:M,dummyActionInfos:K,cancelable:!0}).then(Q=>{Q&&L({actionInfo:Q})});return}}t().requireUpdate(),console.info(e(o),he(...e(o).visibleEntities))},re=C=>{C.preventDefault(),C.dataTransfer&&(C.dataTransfer.dropEffect="move")},me=C=>{C.preventDefault(),console.info("drop",C,e(ve),ae),C.dataTransfer&&(C.dataTransfer.dropEffect="move");try{if(e(ve)&&ae){if(ae.length===1){const F=ae[0];L({actionInfo:{...F,dest:e(o)}})}else if(ae.length>1){if(!M)throw new Ja("想定されない状態");e(o).field.duel.view.modalController.terminateAll(),e(o).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:M,dummyActionInfos:ae.map(F=>({...F,dest:e(o)})),cancelable:!1}).then(F=>{L({actionInfo:F})})}}}finally{t().removeDraggingActions()}},he=(...C)=>{if(t().waitMode==="Animation")return"Disabled";if(X&&X.selectables.find(P=>C.find(K=>P===K)))return"Selectable";if(!e(n)||e(n).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(P=>P.state==="Shown"))return"Disabled";const F=e(n).filter(P=>C.includes(P.action.entity));return F.length===0?"Disabled":e(o).isStackCell||F[0].action.entity!==C[0]?"Clickable":F.some(P=>P.dests.length)?"Draggable":"Clickable"};kt();var O=Gr(),T=a(O);T.__click=B;var I=a(T);{var Z=C=>{var F=Te(),P=U(F);{var K=Q=>{var xe=Te(),S=U(xe);{var D=_=>{var h=Er(),q=a(h),ke=a(q),we=r(q,1,!0);y((ge,V)=>{m(ke,ge),m(we,V)},[()=>String(e(o).field.duel.clock.turn).padStart(2,"0"),()=>e(o).field.duel.phase.toUpperCase()],ce),s(_,h)},g=_=>{var h=Te(),q=U(h);{var ke=ge=>{var V=Br(),G=a(V),H=a(G),Ce=r(G,2),Ne=a(Ce);y((Ie,Pe)=>{m(H,Ie),m(Ne,Pe)},[()=>Math.floor(e(A).current),()=>Math.floor(e(z).current)],ce),s(ge,V)},we=ge=>{var V=Te(),G=U(V);{var H=Ce=>{var Ne=Te(),Ie=U(Ne);{var Pe=Ae=>{var Ge=Te(),Ye=U(Ge);{var be=De=>{var Ue=Te(),qe=U(Ue);se(qe,1,()=>t().duel.nextPhaseList,le,(Je,nt)=>{var Xe=Yr(),Qe=a(Xe);Qe.__click=[Ar,J,nt];var $=a(Qe);y(p=>m($,p),[()=>e(nt).toUpperCase()],ce),s(Je,Xe)}),s(De,Ue)};k(Ye,De=>{t().duel.isEnded||De(be)})}s(Ae,Ge)};k(Ie,Ae=>{t().waitMode==="Free"&&Ae(Pe)})}s(Ce,Ne)};k(G,Ce=>{e(o).column===5&&Ce(H)},!0)}s(ge,V)};k(q,ge=>{e(o).column===3?ge(ke):ge(we,!1)},!0)}s(_,h)};k(S,_=>{e(o).column===1?_(D):_(g,!1)})}s(Q,xe)};k(P,Q=>{e(o).row===3&&Q(K)})}s(C,F)},te=C=>{var F=Te(),P=U(F);{var K=xe=>{var S=qr();const D=ce(()=>e(j).find(V=>V.to===e(o)));var g=U(S);{var _=V=>{var G=Ur(),H=a(G);Ft(H,{get entity(){return e(D).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),y(()=>Ee(G,`card_animation_receiver ${e(o).cellType??""} svelte-1boxe40`)),ee(1,G,()=>x,()=>({key:e(D).entity.seq})),s(V,G)};k(g,V=>{e(D)&&e(D).index==="Top"&&V(_)})}var h=r(g,2);se(h,1,()=>e(o).visibleEntities,le,(V,G)=>{var H=Te(),Ce=U(H);{var Ne=Ie=>{var Pe=Lr(),Ae=a(Pe);const Ge=ce(()=>he(e(G))),Ye=ce(()=>e(n).filter(be=>be.action.entity===e(G)));Ft(Ae,{get entity(){return e(G)},get state(){return e(Ge)},get dummyActionInfos(){return e(Ye)},cardActionResolve:void 0,get selectedList(){return d()},set selectedList(be){d(be)},$$legacy:!0}),ee(2,Pe,()=>Me,()=>({key:e(G).seq})),s(Ie,Pe)};k(Ce,Ie=>{e(j).every(Pe=>Pe.entity.seq!==e(G).seq)&&Ie(Ne)})}s(V,H)});var q=r(h,2);{var ke=V=>{var G=Nr(),H=a(G);Ft(H,{get entity(){return e(D).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),y(()=>Ee(G,`card_animation_receiver ${e(o).cellType??""} svelte-1boxe40`)),ee(1,G,()=>x,()=>({key:e(D).entity.seq})),s(V,G)};k(q,V=>{e(D)&&e(D).index!=="Top"&&V(ke)})}var we=r(q,2);{var ge=V=>{var G=Pr();s(V,G)};k(we,V=>{e(o).owner.seat==="Below"&&V(ge)})}s(xe,S)},Q=xe=>{var S=Vr();const D=ce(()=>e(j).find(G=>G.to===e(o)));var g=U(S);{var _=G=>{var H=Fr(),Ce=a(H);Ft(Ce,{get entity(){return e(D).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),ee(1,H,()=>x,()=>({key:e(D).entity.seq})),s(G,H)};k(g,G=>{e(D)&&e(D).index!=="Top"&&G(_)})}var h=r(g,2);{var q=G=>{var H=Rr(),Ce=U(H);se(Ce,1,()=>e(o).visibleEntities.map((Pe,Ae)=>({index:Ae,entity:Pe})).toReversed(),le,(Pe,Ae)=>{var Ge=Te(),Ye=U(Ge);{var be=De=>{var Ue=Or();const qe=ce(()=>!e(o).isStackCell&&e(Ae).index===0?he(...e(o).visibleEntities):void 0);var Je=U(Ue);{var nt=p=>{var W=Hr();s(p,W)};k(Je,p=>{e(R).includes(e(Ae).entity)&&p(nt)})}var Xe=r(Je,2),Qe=a(Xe);const $=ce(()=>e(Ae).index===0?e(n).filter(p=>e(o).visibleEntities.includes(p.action.entity)):void 0);Ft(Qe,{get entity(){return e(Ae).entity},get state(){return e(qe)},get dummyActionInfos(){return e($)},cardActionResolve:void 0,get selectedList(){return d()},set selectedList(p){d(p)},$$legacy:!0}),y(()=>Ee(Xe,`duel_card_wrapper ${(e(Ae).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1boxe40`)),ee(2,Xe,()=>Me,()=>({key:e(Ae).entity.seq})),s(De,Ue)};k(Ye,De=>{e(j).every(Ue=>Ue.entity.seq!==e(Ae).entity.seq)&&De(be)})}s(Pe,Ge)});var Ne=r(Ce,2);{var Ie=Pe=>{var Ae=zr(),Ge=a(Ae),Ye=r(Ge);se(Ye,1,()=>Vt(e(o).visibleEntities[0].status.maxCounterQty),le,(be,De)=>{var Ue=Ir(),qe=U(Ue),Je=r(qe);{var nt=Xe=>{var Qe=dt();y(()=>m(Qe,`/${e(o).visibleEntities[0].status.maxCounterQty[e(De)]??""}`)),s(Xe,Qe)};k(Je,Xe=>{(e(o).visibleEntities[0].status.maxCounterQty[e(De)]??9999)<100&&Xe(nt)})}y((Xe,Qe)=>m(qe,`【
              ${Xe??""}${Qe??""} `),[()=>Za(e(De)),()=>e(o).visibleEntities[0].counterHolder.getQty(e(De))],ce),s(be,Ue)}),y(()=>m(Ge,`【${e(o).visibleEntities[0].battlePositionName??""}】 `)),s(Pe,Ae)};k(Ne,Pe=>{e(o).visibleEntities[0].battlePosition&&Pe(Ie)})}s(G,H)};k(h,G=>{e(o).visibleEntities.length>0&&G(q)})}var ke=r(h,2);{var we=G=>{var H=Wr(),Ce=a(H);y(()=>m(Ce,e(o).visibleEntities.length)),s(G,H)};k(ke,G=>{e(o).isStackCell&&G(we)})}var ge=r(ke,2);{var V=G=>{var H=Kr(),Ce=a(H);Ft(Ce,{get entity(){return e(D).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),ee(1,H,()=>x,()=>({key:e(D).entity.seq})),s(G,H)};k(ge,G=>{e(D)&&e(D).index==="Top"&&G(V)})}s(xe,S)};k(P,xe=>{e(o).cellType==="Hand"?xe(K):xe(Q,!1)},!0)}s(C,F)};k(I,C=>{e(o).isDisabledCell?C(Z):C(te,!1)})}y(C=>{Ee(O,`${`duel_field_cell duel_field_cell_${e(o).cellType} ${e(o).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1boxe40`),wt(O,"colspan",e(o).cellType==="Hand"?7:1),Ee(T,`${C??""} svelte-1boxe40`)},[()=>`duel_field_cell_inner_box ${e(o).cellType} ${e(ve)?"can_accept_drop":""} ${E()?"can_action":""} ${e(Y)?"is_selected":e(N)?"is_selectable":""} `],ce),ne("dragover",T,re),ne("drop",T,me),s(c,O),xt()}Oa(["click"]);const Qr=(c,i,t=void 0,v="!!!circular reference!!!")=>{let u=[];return JSON.stringify(c,(d,f)=>{if(typeof f=="object"){if(u.indexOf(f)>-1)return v;u.push(f)}let o=f;if(i&&(o=i(d,f)),typeof o=="function")return o.toString();if(o!==f&&typeof o=="object"){if(u.indexOf(o)>-1)return v;u.push(o)}return o},t)};var Jr=l('<div class="title svelte-14z6bdh"> </div>'),Zr=l('<div class="title svelte-14z6bdh"> </div>'),es=l('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),ts=l('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),as=l("<div><!> <!></div>"),rs=l('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),ss=l("<div><!> <!></div>"),is=l("<div><!> <!></div>"),ns=l('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function ls(c,i){bt(i,!1);let t=fe(void 0),v=ze(i,"log",8),u,d=fe([]);const f=()=>{const b=((u==null?void 0:u.seq)??-1)+1;v().records.slice(b).forEach(M=>{if(!u){w(d,[[[[M]]]]),u=M;return}if(!e(d)[M.clock.turn]){$e(d,e(d)[M.clock.turn]=[[[M]]]),u=M;return}if(!e(d)[M.clock.turn][M.clock.phaseSeq]){$e(d,e(d)[M.clock.turn][M.clock.phaseSeq]=[[M]]),u=M;return}if(u.clock.chainSeq===M.clock.chainSeq&&u.clock.chainBlockSeq===M.clock.chainBlockSeq&&u.duelist===M.duelist){e(d)[M.clock.turn][M.clock.phaseSeq].slice(-1)[0].push(M),u=M;return}e(d)[M.clock.turn][M.clock.phaseSeq].push([M]),u=M}),w(d,e(d)),er().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};v().onUpdate.append(f),v().duel.view.onDuelUpdate.append(f),f(),kt();var o=Te(),A=U(o);{var z=b=>{var M=ns(),n=r(a(M),2);se(n,5,()=>e(d),le,(L,X)=>{var R=is(),Y=a(R);{var N=oe=>{var Se=Jr(),ve=a(Se);y(()=>m(ve,`ターン：${e(X)[0][0][0].clock.turn??""}`)),s(oe,Se)};k(Y,oe=>{e(X)[0][0][0].clock.turn>0&&oe(N)})}var _e=r(Y,2);se(_e,1,()=>e(X),le,(oe,Se)=>{var ve=ss(),ae=a(ve);{var pe=Me=>{var x=Zr(),j=a(x);y(()=>m(j,e(Se)[0][0].clock.period.name)),s(Me,x)};k(ae,Me=>{e(Se)[0][0].clock.turn>0&&Me(pe)})}var ye=r(ae,2);se(ye,1,()=>e(Se),le,(Me,x)=>{var j=rs();const ie=ce(()=>{var O;return((O=e(x).find(T=>T.chainNumber!==void 0))==null?void 0:O.chainNumber)??0});var J=a(j),E=a(J),B=a(E),re=r(E,2);{var me=O=>{var T=es(),I=a(T);y(()=>m(I,`チェーン：${e(ie)??""}`)),s(O,T)};k(re,O=>{e(ie)&&O(me)})}var he=r(J,2);se(he,1,()=>e(x),le,(O,T)=>{var I=as(),Z=a(I);{var te=K=>{var Q=dt();y(()=>m(Q,e(T).text)),s(K,Q)},C=K=>{var Q=Te(),xe=U(Q);{var S=g=>{var _=dt();y((h,q,ke)=>m(_,`移動：${h??""} ${q??""} ⇒ ${ke??""}`),[()=>{var h;return(h=e(T).mainEntity)==null?void 0:h.toString()},()=>{var h;return(h=e(T).from)==null?void 0:h.toString()},()=>{var h;return(h=e(T).to)==null?void 0:h.toString()}],ce),s(g,_)},D=g=>{var _=Te(),h=U(_);{var q=we=>{var ge=dt();y((V,G)=>m(ge,`生成：${V??""} void ⇒ ${G??""}`),[()=>{var V;return(V=e(T).mainEntity)==null?void 0:V.toString()},()=>{var V;return(V=e(T).to)==null?void 0:V.toString()}],ce),s(we,ge)},ke=we=>{var ge=Te(),V=U(ge);{var G=Ce=>{var Ne=dt();y((Ie,Pe)=>m(Ne,`消滅：${Ie??""} ${Pe??""} ⇒ void`),[()=>{var Ie;return(Ie=e(T).mainEntity)==null?void 0:Ie.toString()},()=>{var Ie;return(Ie=e(T).from)==null?void 0:Ie.toString()}],ce),s(Ce,Ne)},H=Ce=>{var Ne=dt();y(()=>m(Ne,e(T).text)),s(Ce,Ne)};k(V,Ce=>{e(T).type==="EntityDisappear"?Ce(G):Ce(H,!1)},!0)}s(we,ge)};k(h,we=>{e(T).type==="EntityAppear"?we(q):we(ke,!1)},!0)}s(g,_)};k(xe,g=>{e(T).type==="EntityMove"?g(S):g(D,!1)},!0)}s(K,Q)};k(Z,K=>{e(T).type==="ChainBlockHeader"?K(te):K(C,!1)})}var F=r(Z,2);{var P=K=>{var Q=ts(),xe=a(Q);y(S=>wt(xe,"href",S),[()=>window.URL.createObjectURL(new Blob([Qr(e(T).error,(S,D)=>["pool","bundles","duel"].includes(S)||typeof D=="function"?void 0:D,4)],{type:"text/plain"}))],ce),s(K,Q)};k(F,K=>{e(T).error&&K(P)})}y(K=>Ee(I,`duel_log_record duel_log_record_${K??""} svelte-14z6bdh`),[()=>e(T).type.toSnakeCase()],ce),s(O,I)}),y(()=>{var O,T,I;Ee(j,`duel_log_block_duelist duel_log_block_duelist_${((O=e(x)[0].duelist)==null?void 0:O.seat)??"system"} svelte-14z6bdh`),Ee(E,`duelist ${((T=e(x)[0].duelist)==null?void 0:T.seat)??""} svelte-14z6bdh`),m(B,((I=e(x)[0].duelist)==null?void 0:I.profile.name)||"SYSTEM")}),s(Me,j)}),y(()=>Ee(ve,`duel_log_block_phase duel_log_block_phase_${e(Se)[0][0].clock.period.key??""} svelte-14z6bdh`)),s(oe,ve)}),y(()=>Ee(R,`duel_log_block_turn duel_log_block_turn_${e(X)[0][0][0].clock.turn??""} svelte-14z6bdh`)),s(L,R)}),tr(n,L=>w(t,L),()=>e(t)),s(b,M)};k(A,b=>{(v().duel.view.infoBoardState==="Log"||v().duel.view.infoBoardState==="Default")&&b(z)})}s(c,o),xt()}var os=l("<div><div> </div> <div> </div></div>");function Fa(c,i){bt(i,!1);let t=ze(i,"duelist",12),v=fe(0),u=fe();const d=async()=>{const n=t().lp-e(v);if(!e(u)||Math.abs(n)<10){w(v,t().lp),e(u)&&(e(u)(),w(u,void 0));return}w(v,e(v)+Math.floor(Math.random()*n)),await Nt(100),d()},f=()=>{t(t()),!e(u)&&t().lp!==e(v)&&new Promise(n=>{w(u,n),Math.abs(t().lp-e(v)),d()})};t().duel.log.onUpdate.append(f),d(),kt();var o=os(),A=a(o),z=a(A),b=r(A,2),M=a(b);y(n=>{Ee(o,`duelist duelist_${n??""} svelte-1sy3trd`),Ee(A,`duelist_name duelist_${n??""}_name svelte-1sy3trd`),m(z,t().profile.name),Ee(b,`duelist_lp ${(e(u)?"vibration":"")??""} svelte-1sy3trd`),m(M,e(v))},[()=>t().seat.toLowerCase()],ce),s(c,o),xt()}const vs=(c,i,t)=>(i(i()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),ds=(c,i,t)=>(i(i()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var cs=l('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),_s=l('<div></div> <div class="svelte-1uevs9j"> </div>',1),us=l("<div> </div>"),fs=l('<span class="svelte-1uevs9j">/</span> <div class="monster_defense svelte-1uevs9j"> </div>',1),ps=l("<div> </div>"),gs=l('<div class="duel_card_info_row svelte-1uevs9j"><!> <!> <div style="flex-grow: 1;" class="svelte-1uevs9j"></div> <div class="monster_attack svelte-1uevs9j"> </div> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),ys=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),ms=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),hs=l("<!> <!>",1),bs=l('<pre class="description svelte-1uevs9j"> </pre>'),ks=l('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),xs=l('<pre class="description svelte-1uevs9j"> </pre>'),ws=l('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),Cs=l('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),Ds=l('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),$s=l("[ <!> ],",1),Ss=l('<div class="svelte-1uevs9j"> <!></div>'),Ms=l('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),Ts=l('<div class="svelte-1uevs9j"> </div>'),js=l('<div class="svelte-1uevs9j"> </div>'),Es=l('<div class="svelte-1uevs9j"> </div>'),Bs=l('<div class="svelte-1uevs9j"> </div>'),As=l('<div class="svelte-1uevs9j"> </div>'),Ys=l('<div class="svelte-1uevs9j"> </div>'),Us=l('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Ls=l('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Ns=l('<div class="svelte-1uevs9j">※テスト用カードです</div>'),Ps=l('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),qs=l('<div class="duel_card_info_links svelte-1uevs9j"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a> <!></div>'),Fs=l("<!> <!>",1),Hs=l('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Os(c,i){bt(i,!1);let t=ze(i,"entity",8,void 0),v=ze(i,"mode",12,"Normal");const u=async()=>{if(!t())return;const b=(await Jt).getCardInfo(t().origin.name);if(b)return b.cardId!==void 0&&!b.description&&!b.pendulumDescription&&await Ia([b.cardId]),b},d=()=>t()&&t().entityType==="Card"&&(t().origin.cardId??!1)?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t().origin.cardId}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:"";kt();var f=Te(),o=U(f);{var A=z=>{var b=Hs();b.__click=[vs,v,t],b.__contextmenu=[ds,v,t];var M=a(b),n=a(M),L=a(n),X=a(L),R=r(n,2),Y=a(R),N=a(Y),_e=r(Y,2),oe=a(_e),Se=r(R,2);{var ve=J=>{var E=hs(),B=U(E);{var re=T=>{var I=cs(),Z=a(I),te=a(Z),C=r(Z,2),F=a(C);y(()=>{m(te,`◀ ${t().psL??""}`),m(F,`${t().psR??""} ▶`)}),s(T,I)};k(B,T=>{var I;(I=t().origin.monsterCategories)!=null&&I.includes("Pendulum")&&T(re)})}var me=r(B,2);{var he=T=>{var I=gs(),Z=U(I),te=a(Z);se(te,1,()=>t().attr,le,(S,D)=>{var g=_s(),_=U(g),h=r(_,2),q=a(h);y(()=>{Ee(_,`monster_attr ${e(D)??""} svelte-1uevs9j`),m(q,`${ma[e(D)]??""}属性`)}),s(S,g)});var C=r(te,2);se(C,1,()=>t().types,le,(S,D)=>{var g=us(),_=a(g);y(()=>{Ee(g,`monster_cat ${e(D)??""} svelte-1uevs9j`),m(_,`${la[e(D)]??""}${ha[e(D)]??""}族`)}),s(S,g)});var F=r(C,4),P=a(F),K=r(F,2);{var Q=S=>{var D=fs(),g=r(U(D),2),_=a(g);y(()=>m(_,t().def??"?")),s(S,D)};k(K,S=>{var D;(D=t().status.monsterCategories)!=null&&D.includes("Link")||S(Q)})}var xe=r(Z,2);se(xe,5,()=>t().status.monsterCategories??[],le,(S,D)=>{var g=ps(),_=a(g);y(()=>{Ee(g,`monster_cat ${e(D)??""} svelte-1uevs9j`),m(_,`${Zt[e(D)]??""}${ra[e(D)]??""}`)}),s(S,g)}),y(()=>m(P,t().atk??"?")),s(T,I)},O=T=>{var I=Te(),Z=U(I);{var te=F=>{var P=ys(),K=r(a(P),2),Q=a(K);y(()=>m(Q,`${oa[t().status.spellCategory]??""}魔法`)),s(F,P)},C=F=>{var P=Te(),K=U(P);{var Q=xe=>{var S=ms(),D=r(a(S),2),g=a(D);y(()=>m(g,`${va[t().status.trapCategory]??""}罠`)),s(xe,S)};k(K,xe=>{t().kind==="Trap"&&t().status.trapCategory&&xe(Q)},!0)}s(F,P)};k(Z,F=>{t().kind==="Spell"&&t().status.spellCategory?F(te):F(C,!1)},!0)}s(T,I)};k(me,T=>{t().kind==="Monster"?T(he):T(O,!1)})}s(J,E)};k(Se,J=>{v()!=="Debug"&&J(ve)})}var ae=r(M,2),pe=a(ae);{var ye=J=>{var E=ws(),B=U(E);{var re=O=>{var T=ks(),I=a(T);ht(I,u,Z=>{var te=dt('"読み込み中"');s(Z,te)},(Z,te)=>{var C=bs(),F=a(C);y(()=>{var P;return m(F,(P=e(te))==null?void 0:P.pendulumDescription)}),s(Z,C)}),s(O,T)};k(B,O=>{var T;(T=t().status.monsterCategories)!=null&&T.includes("Pendulum")&&O(re)})}var me=r(B,2),he=a(me);ht(he,u,O=>{var T=dt('"読み込み中"');s(O,T)},(O,T)=>{var I=xs(),Z=a(I);y(()=>{var te;return m(Z,(te=e(T))==null?void 0:te.description)}),s(O,I)}),s(J,E)},Me=J=>{var E=Te(),B=U(E);{var re=he=>{var O=Te(),T=U(O);{var I=Z=>{var te=Ds(),C=r(a(te),2);se(C,5,()=>t().actions,le,(F,P)=>{var K=Te();const Q=ce(()=>e(P).actionCountUpperBound),xe=ce(()=>e(P).actionCount);var S=U(K);{var D=g=>{var _=Cs(),h=a(_),q=a(h),ke=r(h,2),we=a(ke),ge=r(ke,4),V=a(ge);y(()=>{m(q,e(P).title),m(we,e(xe)),m(V,e(Q))}),s(g,_)};k(S,g=>{e(Q)!==void 0&&e(xe)!==void 0&&g(D)})}s(F,K)}),s(Z,te)};k(T,Z=>{t().actions.some(te=>te.actionCountUpperBoundKey)&&Z(I)})}s(he,O)},me=he=>{var O=Us(),T=a(O),I=a(T);se(I,0,()=>["info","status"],le,(Ye,be)=>{var De=Ms(),Ue=U(De),qe=a(Ue),Je=r(Ue,2);se(Je,1,()=>Object.entries(t()[be]),le,(Xe,Qe)=>{let $=()=>e(Qe)[0],p=()=>e(Qe)[1];var W=Ss(),de=a(W),Le=r(de);{var Re=We=>{var Fe=$s(),Ke=r(U(Fe));se(Ke,1,p,le,(He,Ve)=>{var ct=dt();y(At=>m(ct,`${At??""},`),[()=>e(Ve).toString()],ce),s(He,ct)}),s(We,Fe)},je=We=>{var Fe=dt();y(Ke=>m(Fe,`${Ke??""},`),[()=>{var Ke;return(Ke=p())==null?void 0:Ke.toString()}],ce),s(We,Fe)};k(Le,We=>{Array.isArray(p())?We(Re):We(je,!1)})}y(()=>m(de,`"${$()??""}" : `)),s(Xe,W)});var nt=r(Je,2);nt.textContent="},",y(()=>m(qe,`"${be??""}" :{`)),s(Ye,De)});var Z=r(I,2);Z.textContent='"actions" :[';var te=r(Z,2);se(te,1,()=>t().actions,le,(Ye,be)=>{var De=Ts(),Ue=a(De);y(()=>m(Ue,`"${e(be).playType??""} ${e(be).title??""}",`)),s(Ye,De)});var C=r(te,2);C.textContent="],";var F=r(C,2);F.textContent='"substituteEffects" :[';var P=r(F,2);se(P,1,()=>t().substituteEffects,le,(Ye,be)=>{var De=js(),Ue=a(De);y(()=>m(Ue,`"${e(be).title??""}",`)),s(Ye,De)});var K=r(P,2);K.textContent="],";var Q=r(K,2);Q.textContent='"continuousEffects" :[';var xe=r(Q,2);se(xe,1,()=>t().continuousEffects,le,(Ye,be)=>{var De=Es(),Ue=a(De);y(()=>m(Ue,`"${e(be).isStarted??""}",`)),s(Ye,De)});var S=r(xe,2);S.textContent="],";var D=r(S,2);D.textContent='"procFilters" :[';var g=r(D,2);se(g,1,()=>t().procFilterBundle.operators,le,(Ye,be)=>{var De=Bs(),Ue=a(De);y(qe=>m(Ue,`"${qe??""} ${e(be).title??""} ${e(be).isEffective??""} ",`),[()=>e(be).isSpawnedBy.toString()],ce),s(Ye,De)});var _=r(g,2);_.textContent="],";var h=r(_,2);h.textContent='"numericStateOperators" :[';var q=r(h,2);se(q,1,()=>t().numericOprsBundle.operators,le,(Ye,be)=>{var De=As(),Ue=a(De);y(qe=>m(Ue,`"${qe??""} ${e(be).title??""} ${e(be).isEffective??""} ${e(be).isContinuous??""} ${e(be).targetState??""} ${e(be).targetStateGen??""} ",`),[()=>e(be).isSpawnedBy.toString()],ce),s(Ye,De)});var ke=r(q,2);ke.textContent="],";var we=r(ke,2);we.textContent='"stateOperators" :[';var ge=r(we,2);se(ge,1,()=>t().statusOperatorBundle.operators,le,(Ye,be)=>{var De=Ys(),Ue=a(De);y(qe=>m(Ue,`"${qe??""} ${e(be).title??""} ${e(be).isEffective??""} ",`),[()=>e(be).isSpawnedBy.toString()],ce),s(Ye,De)});var V=r(ge,2);V.textContent="],";var G=r(V,2);G.textContent='"lastMoveLogRecord" :{';var H=r(G,2),Ce=a(H),Ne=r(H,2),Ie=a(Ne),Pe=r(Ne,2),Ae=a(Pe),Ge=r(Pe,2);Ge.textContent="},",y((Ye,be)=>{m(Ce,`"movedBy":"${Ye??""}",`),m(Ie,`"movedAs":"${be??""}",`),m(Ae,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var Ye;return(Ye=t().moveLog.latestRecord.movedBy)==null?void 0:Ye.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],ce),s(he,O)};k(B,he=>{v()==="Detail"?he(re):he(me,!1)},!0)}s(J,E)};k(pe,J=>{v()==="Normal"?J(ye):J(Me,!1)})}var x=r(ae,2),j=a(x);{var ie=J=>{var E=Fs(),B=U(E);{var re=T=>{var I=Ls();s(T,I)};k(B,T=>{t().origin.isOldVersion&&T(re)})}var me=r(B,2);{var he=T=>{var I=Ns();s(T,I)},O=T=>{var I=qs(),Z=a(I),te=r(Z,2);{var C=F=>{var P=Ps(),K=a(P);y(Q=>{var xe;wt(P,"href",Q),m(K,`⇒${((xe=t())!=null&&xe.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[d],ce),s(F,P)};k(te,F=>{t()&&t().entityType==="Card"&&F(C)})}y(()=>wt(Z,"href",`https://yugioh-wiki.net/index.php?${t().origin.wikiEncodedName}`)),s(T,I)};k(me,T=>{t().origin.isForTest?T(he):T(O,!1)})}s(J,E)};k(j,J=>{t()&&J(ie)})}y((J,E,B)=>{Ee(b,`duel_card duel_card_info ${t().origin.kind??""} ${J??""} svelte-1uevs9j`),m(X,t().nm),m(N,E),m(oe,B)},[()=>{var J;return(J=t().origin.monsterCategories)==null?void 0:J.join(" ")},()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],ce),s(z,b)};k(o,z=>{t()&&z(A)})}s(c,f),xt()}Oa(["click","contextmenu"]);var Is=l('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),zs=l('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),Rs=l('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Ws(c,i){bt(i,!1);let t=ze(i,"cell",12);const v=()=>{t(t())},u=A=>t().cardEntities.filter(z=>z.face===A);t().field.duel.view.onDuelUpdate.append(v),kt();var d=Te(),f=U(d);{var o=A=>{var z=Rs(),b=a(z),M=a(b),n=a(M),L=r(M,2),X=a(L),R=r(b,2);se(R,4,()=>["FaceUp","FaceDown"],le,(Y,N)=>{var _e=Te(),oe=U(_e);{var Se=ve=>{var ae=zs(),pe=a(ae),ye=a(pe),Me=r(pe,2);se(Me,1,()=>u(N).toSorted(ar),le,(x,j)=>{var ie=Is(),J=a(ie);const E=ce(()=>t().owner===t().field.duel.duelists.Below);Ft(J,{get entity(){return e(j)},get isVisibleForcibly(){return e(E)},isWideMode:!0,cardActionResolve:void 0}),s(x,ie)}),y(()=>m(ye,N==="FaceUp"?"表向き":"裏向き")),s(ve,ae)};k(oe,ve=>{u(N).length&&ve(Se)})}s(Y,_e)}),y(()=>{var Y;m(n,(Y=t().owner)==null?void 0:Y.profile.name),m(X,t().cellType)}),s(A,z)};k(f,A=>{t().field.duel.view.infoBoardState==="CellInfo"&&A(o)})}s(c,d),xt()}var Ks=l('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),Vs=l('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function Gs(c,i){bt(i,!1);let t=ze(i,"viewController",8),v=ze(i,"userProfile",12);kt();var u=Te(),d=U(u);{var f=o=>{var A=Vs(),z=r(a(A),2),b=r(a(z),2);se(b,1,()=>ir,le,(M,n)=>{var L=Ks(),X=a(L),R=a(X),Y=r(X,2),N=a(Y);y(()=>m(N,rr[e(n)])),sr(R,()=>v().chainConfig[e(n)],_e=>v(v().chainConfig[e(n)]=_e,!0)),ne("change",R,()=>v().save()),s(M,L)}),s(o,A)};k(d,o=>{t().infoBoardState==="Config"&&o(f)})}s(c,u),xt()}function Xs(c,{from:i,to:t},v={}){var{delay:u=0,duration:d=ae=>Math.sqrt(ae)*120,easing:f=pa}=v,o=getComputedStyle(c),A=o.transform==="none"?"":o.transform,[z,b]=o.transformOrigin.split(" ").map(parseFloat);z/=c.clientWidth,b/=c.clientHeight;var M=Qs(c),n=c.clientWidth/t.width/M,L=c.clientHeight/t.height/M,X=i.left+i.width*z,R=i.top+i.height*b,Y=t.left+t.width*z,N=t.top+t.height*b,_e=(X-Y)*n,oe=(R-N)*L,Se=i.width/t.width,ve=i.height/t.height;return{delay:u,duration:typeof d=="function"?d(Math.sqrt(_e*_e+oe*oe)):d,easing:f,css:(ae,pe)=>{var ye=pe*_e,Me=pe*oe,x=ae+pe*Se,j=ae+pe*ve;return`transform: ${A} translate(${ye}px, ${Me}px) scale(${x}, ${j});`}}}function Qs(c){if("currentCSSZoom"in c)return c.currentCSSZoom;for(var i=c,t=1;i!==null;)t*=+getComputedStyle(i).zoom,i=i.parentElement;return t}var Js=l('<div class="chain_number svelte-lqu21u"> </div>'),Zs=l('<div class="duel_card_row svelte-lqu21u"> </div>'),ei=l('<div class="appendix svelte-lqu21u"> </div>'),ti=l('<div class="appendix_wrapper svelte-lqu21u"></div>'),ai=l('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),ri=l("<div></div>");function si(c,i){bt(i,!1);let t=ze(i,"duel",8),v=ze(i,"position",8,"left");const u=-100,d=()=>v()==="left"?-100:100;let f=fe([]),o=Promise.resolve(),A=Promise.resolve();const z=1e3,b=500,M=400,n=X=>{const R={...X};R.isKnown=X.chainBlockInfo.action.entity.controller.duelistType==="Player"||X.chainBlockInfo.action.entity.face==="FaceUp",R.chainBlockInfo.onStateChange.append(Y=>{if(Y==="done"||Y==="failed"||Y==="negated")return o=o.then(async()=>{const N=new Date().getTime()-R.chainBlockInfo.wasSpawnedAt.getTime();N<z&&await Nt(z-N),w(f,e(f).filter(_e=>_e.seq!==R.seq)),await Nt(b+M)}).then(),"RemoveMe";w(f,e(f))}),A=A.then(async()=>{w(f,[R,...e(f)].sort((Y,N)=>nr.isSameChain(Y.clock,N.clock)&&Y.chainBlockInfo.action.isWithChainBlock&&N.chainBlockInfo.action.isWithChainBlock?N.clock.totalProcSeq-Y.clock.totalProcSeq:Y.clock.totalProcSeq-N.clock.totalProcSeq)),await Nt(300)}),o=o.then(()=>Nt(1e3))};t().chainBlockLog.onInsert.append(n),kt();var L=ri();se(L,13,()=>e(f),X=>X.seq,(X,R)=>{var Y=ai();const N=ce(()=>{const{activator:B,action:re,appendix:me}=e(R).chainBlockInfo;return{activator:B,action:re,appendix:me}});var _e=a(Y),oe=a(_e);{var Se=B=>{var re=Js(),me=a(re);y(()=>m(me,`チェーン：${e(R).chainBlockInfo.chainNumber??""}`)),s(B,re)};k(oe,B=>{e(R).chainBlockInfo.chainNumber&&B(Se)})}var ve=r(oe,2),ae=a(ve),pe=r(ve,2),ye=a(pe);{var Me=B=>{var re=Zs(),me=a(re);y(()=>m(me,e(R).isKnown?e(N).action.entity.nm:"？？？")),s(B,re)};k(ye,B=>{(e(N).action.entity.entityType==="Card"||e(N).action.entity.entityType==="Token")&&B(Me)})}var x=r(ye,2),j=a(x),ie=a(j),J=r(j,2);{var E=B=>{var re=ti();se(re,5,()=>e(N).appendix,le,(me,he)=>{var O=ei(),T=a(O);y(()=>m(T,e(he))),s(me,O)}),s(B,re)};k(J,B=>{e(N).appendix&&B(E)})}y((B,re,me)=>{Ee(Y,`cut_in_row ${(!e(R).chainBlockInfo.chainNumber||e(R).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Ee(_e,`cut_in_item cut_in_item_${B??""} cut_in_item_${e(R).chainBlockInfo.state??""} svelte-lqu21u`),Ee(ve,`duelist_name duelist_${B??""}_name svelte-lqu21u`),m(ae,e(N).activator.profile.name),Ee(pe,`duel_card duel_card_${B??""} ${re??""} ${(e(R).isKnown?e(N).action.entity.origin.kind:"")??""} ${e(N).action.entity.entityType??""}  svelte-lqu21u`),m(ie,me)},[()=>e(N).activator.seat.toLowerCase(),()=>e(R).isKnown?(e(N).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(N).action.toString()],ce),ee(3,_e,()=>Mr,()=>new Date().getTime()-e(R).chainBlockInfo.wasSpawnedAt.getTime()<z?{x:d(),duration:M}:{y:u,duration:M}),lr(Y,()=>Xs,()=>({duration:b})),s(X,Y)}),y(()=>Ee(L,`cut_in_container cut_in_container_${v()??""} svelte-lqu21u`)),s(c,L),xt()}const ii=Tr({duration:400});var ni=l('<div class="duel_desk_left v_flex svelte-1w535im"><!> <!> <!></div>'),li=l('<button class="duel_field_header_message svelte-1w535im"> </button> <div class="duel_field_header_buttons svelte-1w535im"><button class="svelte-1w535im">サレンダー</button></div>',1),oi=l("<tr></tr>"),vi=l('<table class="duel_field svelte-1w535im"><tbody class="svelte-1w535im"></tbody></table>'),di=l('<button class="svelte-1w535im">OK</button>'),ci=l('<button class="svelte-1w535im">cancel</button>'),_i=l("<!> <!>",1),ui=l('<button class="svelte-1w535im"> </button>'),fi=l('<div style="text-align: left;"><!> <!> <!></div>'),pi=l('<div><!> <div class=" duel_desk_center v_flex svelte-1w535im"><div class="duel_field_header svelte-1w535im"><!></div> <div class="duel_field_body svelte-1w535im"><!></div> <div class="duel_field_footer svelte-1w535im"><!></div></div> <!></div> <div style="position:fixed;bottom:0"> </div> <!> <div><!></div>',1);function gi(c,i){bt(i,!1);let t=ze(i,"duel",12),v=ze(i,"userProfile",8),u=fe(0),d=fe(0),f=fe([]),o=fe([]),A=()=>{},z=fe([]),b=fe(),M=fe(),n=fe(()=>!1),L=fe(!1);const X=g=>{A=g.resolve,w(z,g.dummyActionInfos.filter(_=>_.action.entity.entityType==="Duelist").filter(_=>_.action.entity.controller.seat==="Below")),w(b,void 0),w(M,void 0),w(o,[]),w(f,[]),w(L,!1),g.entitiesChoices&&(w(b,g.entitiesChoices),w(n,()=>{var _;return((_=g.entitiesChoices)==null?void 0:_.validator(e(f)))??!1}),w(L,g.entitiesChoices.cancelable),e(b).selectables.every(_=>_.cell.isPlayFieldCell&&_.getIndexInCell()===0||_.cell.cellType==="Hand"&&_.controller.duelistType==="Player"||_.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:g.entitiesChoices,chainBlockInfos:g.chainBlockInfos,cancelable:g.entitiesChoices.cancelable}).then(_=>{A({selectedEntities:_})})),g.cellsChoices&&(w(M,g.cellsChoices),w(n,()=>{var _;return((_=g.cellsChoices)==null?void 0:_.validator(e(o)))??!1}),w(L,g.cellsChoices.cancelable))};t().view.onWaitStart.append(X);const R=()=>{A=()=>{},w(M,void 0),w(b,void 0),w(o,[]),w(f,[]),w(n,()=>!1),w(L,!1)};t().view.onWaitEnd.append(R);let Y=fe(void 0),N=fe("Normal");const _e=({card:g,mode:_})=>{w(Y,g),w(N,_??(e(Y)===g||e(N)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(_e);const oe=()=>{t(t())};t().view.onDuelUpdate.append(oe),t().log.onUpdate.append(oe);const Se=()=>{e(b)&&e(b).validator(e(f))&&A({selectedEntities:e(f)}),e(M)&&e(M).validator(e(o))&&A({selectedCells:e(o)})},ve=()=>{A({})},ae=g=>{A({actionInfo:g})},pe=()=>{A({surrender:!0})};t().main();const ye=()=>e(u)<=1400?"compact":"wide";kt();var Me=pi(),x=U(Me),j=a(x);{var ie=g=>{var _=ni(),h=a(_);Fa(h,{get duelist(){return t().duelists.Above}});var q=r(h,2);Os(q,{get entity(){return e(Y)},get mode(){return e(N)}});var ke=r(q,2);Fa(ke,{get duelist(){return t().duelists.Below}}),s(g,_)};k(j,g=>{ye()==="wide"&&g(ie)})}var J=r(j,2),E=a(J),B=a(E);{var re=g=>{var _=li(),h=U(_),q=a(h),ke=r(h,2),we=a(ke);y(()=>m(q,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),ne("click",h,()=>{t(t().view.infoBoardState="Log",!0)}),ne("click",we,pe),s(g,_)};k(B,g=>{t().isEnded||g(re)})}var me=r(E,2),he=a(me);{var O=g=>{var _=vi(),h=a(_);se(h,5,()=>t().field.cells,le,(q,ke,we)=>{var ge=oi();Ee(ge,`${`duel_desk_row_${we}`??""} svelte-1w535im`),se(ge,5,()=>e(ke),le,(V,G,H)=>{Xr(V,{get view(){return t().view},row:we,column:H,get selectedEntities(){return e(f)},set selectedEntities(Ce){w(f,Ce)},get selectedCells(){return e(o)},set selectedCells(Ce){w(o,Ce)},$$legacy:!0})}),s(q,ge)}),s(g,_)};k(he,g=>{t().clock.turn>0&&g(O)})}var T=r(me,2),I=a(T);{var Z=g=>{var _=_i(),h=U(_);{var q=ge=>{var V=di();y(G=>V.disabled=G,[()=>!e(n)()],ce),ne("click",V,Se),s(ge,V)};k(h,ge=>{((e(b)&&e(b).qty)??(e(M)&&e(M).qty)??9999)>1&&ge(q)})}var ke=r(h,2);{var we=ge=>{var V=ci();ne("click",V,ve),s(ge,V)};k(ke,ge=>{e(L)&&ge(we)})}s(g,_)},te=g=>{var _=Te(),h=U(_);se(h,1,()=>e(z),le,(q,ke)=>{var we=ui(),ge=a(we);y(()=>m(ge,e(ke).action.title)),ne("click",we,()=>ae(e(ke))),s(q,we)}),s(g,_)};k(I,g=>{e(b)&&e(b).selectables.length||e(M)&&e(M).selectables?g(Z):g(te,!1)})}var C=r(J,2);{var F=g=>{var _=fi(),h=a(_);ls(h,{get log(){return t().log}});var q=r(h,2);Ws(q,{get cell(){return t().view.infoBoardCell}});var ke=r(q,2);Gs(ke,{get userProfile(){return v()},get viewController(){return t().view}}),y(we=>Ee(_,`duel_desk_right duel_desk_right_${we??""}  svelte-1w535im`),[()=>t().view.infoBoardState.toLowerCase()],ce),ee(3,_,()=>ue,()=>({duration:e(u)>1400?0:200,axis:"x"})),s(g,_)};k(C,g=>{(e(u)>1400||t().view.infoBoardState!=="Default")&&g(F)})}var P=r(x,2),K=a(P),Q=r(P,2);or(Q,{get modalController(){return t().view.modalController}});var xe=r(Q,2),S=a(xe);const D=ce(()=>ye()==="wide"?"right":"left");si(S,{get duel(){return t()},get position(){return e(D)}}),y((g,_)=>{Ee(x,`flex duel_desk ${g??""}_mode svelte-1w535im`),m(K,_),Ee(xe,`cutin ${g??""}_mode svelte-1w535im`)},[ye,()=>t().clock.toFullString()],ce),sa("innerWidth",g=>w(u,g)),sa("innerHeight",g=>w(d,g)),s(c,Me),xt()}var yi=l('<div class="svelte-1c9pz35"><button class="button_style_reset svelte-1c9pz35">クリア</button></div>'),mi=l("<div></div>"),hi=l("<!> <!> <!> <!> <!>",1),bi=l('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),ki=l('<li class="deck_editor_item svelte-1c9pz35"><div role="listitem"><div class="svelte-1c9pz35"><div class="svelte-1c9pz35"> </div> <div style="display:flex; flex-wrap: wrap;" class="svelte-1c9pz35"><div style="text-wrap-mode: nowrap;" class="svelte-1c9pz35"><!> <!> <!></div> <div style="flex-grow: 1; height:0px; width:0px" class="svelte-1c9pz35"></div> <div style="text-wrap-mode: nowrap;" class="svelte-1c9pz35"><!></div></div></div></div> <button class="button_style_reset plus_minus_button svelte-1c9pz35">+</button> <button class="button_style_reset plus_minus_button svelte-1c9pz35">-</button></li>'),xi=l('<div><div class="deck_editor_card_kind_header svelte-1c9pz35"><div class="svelte-1c9pz35"> <!></div> <div style="display: flex;" class="svelte-1c9pz35"><!> <div class="triangle svelte-1c9pz35">▲</div></div></div> <div class="deck_editor_card_kind_body svelte-1c9pz35"><ul></ul></div></div>'),wi=l('<div class="svelte-1c9pz35">読み込み中...</div>'),Ci=l('<div class="deck_editor_card_list svelte-1c9pz35"><!></div>');function Ha(c,i){bt(i,!1);let t=ze(i,"allCardInfos",8),v=ze(i,"deckCardInfos",12),u=ze(i,"mode",8),d=ze(i,"onAttention",8),f=ze(i,"searchCondition",8,void 0),o=ze(i,"selectedCardInfo",8,void 0),A=fe("ExtraMonster");const z=500,b={ExtraMonster:[],Monster:[],Spell:[],Trap:[]},M=x=>{var j;return(j=x.monsterCategories)!=null&&j.union(Ht).length?"ExtraDeck":"Deck"},n=()=>{const x=(j,ie)=>{var J;return fa(j,ie,(J=f())==null?void 0:J.sort.filter(E=>E.priority>0).toSorted((E,B)=>E.priority-B.priority))};Object.values(b).forEach(j=>j.sort(x))},L=x=>{Object.values(b).forEach(j=>j.reset()),x.filter(j=>j.kind!=="XyzMaterial").forEach(j=>{if(j.kind==="XyzMaterial")return;const ie=ua(j);b[ie].push(j)}),n()},X=u()==="List"?new Promise(x=>{L(t()),x()}):Promise.resolve(),R=()=>(u()==="Deck"&&(L(v()),w(oe,v().length)),b),Y=(x,j)=>{const ie=j==="ExtraMonster"?"ExtraDeck":"Deck",J=j==="ExtraMonster"?"Monster":j;v(v().filter(E=>M(E)!==ie||E.kind!==J&&J))},N=(x,j)=>{try{if(x.ctrlKey){v().push(j);return}const ie=v().filter(E=>E.name===j.name).length;if(ie>2)return;const J=x.shiftKey?3-ie:1;if(J<1)return;v().push(...Array(J).fill(j))}finally{v().sort(fa),v(v())}d()(j)},_e=(x,j)=>{let ie=0;v(v().filter(J=>J.name!==j.name?!0:(ie++,!x.shiftKey&&ie>1))),v().sort(fa),d()(j)};let oe=fe(100);const Se=()=>{w(oe,e(oe)+10),!(e(oe)>=z)&&(e(oe)>t().length+v().length||Nt(100).then(Se))};let ve=fe(""),ae=fe([...v()]);const pe=(x,j,ie,J)=>{if(!f())return!0;if(x.kind==="XyzMaterial")return!1;const E=ua(x);if(!f().deckCardKinds.includes(E)||f().name.trim().length&&[x.name,...x.nameTags??[],...x.textTags??[]].every(re=>!re.includes(f().name))||!x.isImplemented&&!f().others.includes("implemented")||x.isForTest&&!f().others.includes("test")||x.isOldVersion&&!f().others.includes("oldVersion"))return!1;if(x.kind==="Monster"){if(x.attributes&&!f().monsterAttributes.union(x.attributes).length||x.types&&!f().monsterTypes.union(x.types).length)return!1;const B=x.level??x.rank??x.link;return Et(f().starLowerBound)&&(B??0)<f().starLowerBound||Et(f().starUpperBound)&&(B??0)>f().starUpperBound||Et(f().atkLowerBound)&&(x.attack??0)<f().atkLowerBound||Et(f().atkUpperBound)&&(x.attack??0)>f().atkUpperBound||Et(f().defLowerBound)&&(x.defense??0)<f().defLowerBound||Et(f().defUpperBound)&&(x.defense??0)>f().defUpperBound||Et(f().atkPlusDef)&&(!Et(x.attack)||!Et(x.defense)||x.attack+x.defense!==f().atkPlusDef)||!x.monsterCategories||E==="ExtraMonster"&&!x.monsterCategories.union(f().exMonsterCategories).length?!1:x.monsterCategories.union(f().monsterCategories).length}if(x.kind==="Spell")return x.spellCategory&&f().spellCategories.includes(x.spellCategory);if(x.kind==="Trap")return x.trapCategory&&f().trapCategories.includes(x.trapCategory)};Ma(()=>(e(ae),Qt(v()),Qt(o()),Qt(u()),Vt),()=>{if(e(ae).length!==v().length){if(o()&&u()==="Deck"){const x=ua(o());b[x].filter(pe).length>1||v().length>e(ae).length?w(A,x):w(A,Vt(b).find(j=>b[j].find(pe))??"ExtraMonster")}w(ae,[...v()])}}),Ma(()=>(Qt(u()),Qt(f()),e(ve),e(A),Nt),()=>{var x;if(u()==="List"){const j=JSON.stringify((x=f())==null?void 0:x.sort);e(ve)!==j&&(w(ve,j),n()),w(oe,100),b[e(A)].find(pe)||w(A,Vt(b).find(ie=>b[ie].find(pe))??"ExtraMonster"),Nt(100).then(Se)}}),vr(),kt();var ye=Ci(),Me=a(ye);ht(Me,()=>X,x=>{var j=wi();s(x,j)},x=>{var j=Te();const ie=ce(R);var J=U(j);se(J,1,()=>Kt,le,(E,B,re)=>{var me=Te();const he=ce(()=>e(ie)[e(B)].filter(pe));var O=U(me);{var T=I=>{var Z=xi(),te=a(Z),C=a(te),F=a(C),P=r(F);{var K=_=>{var h=dt();y(q=>m(h,`※表示上限${q??""}枚`),[()=>z.toLocaleString()],ce),s(_,h)};k(P,_=>{e(he).length>z&&_(K)})}var Q=r(C,2),xe=a(Q);{var S=_=>{var h=yi(),q=a(h);ne("click",q,ke=>Y(ke,e(B))),s(_,h)};k(xe,_=>{u()==="Deck"&&e(he).length&&_(S)})}var D=r(te,2),g=a(D);se(g,5,()=>e(he),le,(_,h,q)=>{var ke=Te(),we=U(ke);{var ge=V=>{var G=ki(),H=a(G),Ce=a(H),Ne=a(Ce),Ie=a(Ne),Pe=r(Ne,2),Ae=a(Pe),Ge=a(Ae);{var Ye=p=>{var W=hi(),de=U(W);{var Le=He=>{var Ve=dt();y(()=>m(Ve,`★${e(h).level??""}`)),s(He,Ve)};k(de,He=>{e(h).level&&He(Le)})}var Re=r(de,2);{var je=He=>{var Ve=dt();y(()=>m(Ve,`☆${e(h).rank??""}`)),s(He,Ve)};k(Re,He=>{e(h).rank&&He(je)})}var We=r(Re,2);se(We,1,()=>e(h).attributes??[],le,(He,Ve)=>{var ct=mi();y(()=>Ee(ct,`monster_attr ${e(Ve)??""} svelte-1c9pz35`)),s(He,ct)});var Fe=r(We,2);se(Fe,1,()=>e(h).types??[],le,(He,Ve)=>{var ct=dt();y(()=>m(ct,la[e(Ve)])),s(He,ct)});var Ke=r(Fe,2);se(Ke,1,()=>e(h).monsterCategories??[],le,(He,Ve)=>{var ct=dt();y(()=>m(ct,Zt[e(Ve)])),s(He,ct)}),s(p,W)};k(Ge,p=>{e(h).kind==="Monster"&&p(Ye)})}var be=r(Ge,2);{var De=p=>{var W=dt();y(()=>m(W,`${oa[e(h).spellCategory]??""}魔法`)),s(p,W)};k(be,p=>{e(h).spellCategory&&p(De)})}var Ue=r(be,2);{var qe=p=>{var W=dt();y(()=>m(W,`${va[e(h).trapCategory]??""}罠`)),s(p,W)};k(Ue,p=>{e(h).trapCategory&&p(qe)})}var Je=r(Ae,4),nt=a(Je);{var Xe=p=>{var W=bi(),de=U(W),Le=a(de),Re=r(de,2),je=a(Re);y(()=>{m(Le,e(h).attack??"?"),m(je,e(h).defense??"?")}),s(p,W)};k(nt,p=>{e(h).kind==="Monster"&&p(Xe)})}var Qe=r(H,2),$=r(Qe,2);y(p=>{Ee(H,`${p??""} svelte-1c9pz35`),m(Ie,e(h).name),Qe.disabled=!e(h).isImplemented,wt(Qe,"title",e(h).isImplemented?"※shiftキー同時押しで一括投入":""),$.disabled=!e(h).isImplemented,wt($,"title",e(h).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>{var p,W;return`deck_editor_card duel_card ${e(h).kind} ${(W=(p=e(h))==null?void 0:p.monsterCategories)==null?void 0:W.join(" ")} ${e(h).isImplemented?"is_implemented":"is_not_implemented"}`}],ce),ne("click",H,()=>d()(e(h))),ne("click",Qe,p=>N(p,e(h))),ne("click",$,p=>_e(p,e(h))),s(V,G)};k(we,V=>{q<e(oe)&&(q<20||e(A)===e(B))&&V(ge)})}s(_,ke)}),y((_,h)=>{Ee(Z,`deck_editor_card_kind deckCardKind ${(e(B)===e(A)?"selected":"")??""} svelte-1c9pz35`),m(F,`${za[e(B)]??""}（${_??""} / ${h??""}枚） `),Ee(g,dr(e(B)),"svelte-1c9pz35")},[()=>e(he).length.toLocaleString(),()=>e(ie)[e(B)].length.toLocaleString()],ce),ne("click",te,()=>{if(e(A)!==e(B)){w(A,e(B));return}w(A,Kt.map((_,h)=>h+re).map(_=>_%Kt.length).map(_=>Kt[_]).filter(_=>_!==e(B)).find(_=>b[_].find(pe))??e(B))}),s(I,Z)};k(O,I=>{e(he).length&&I(T)})}s(E,me)}),s(x,j)}),s(c,ye),xt()}var Di=l('<div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>'),$i=l('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),Si=l('<div></div> <div class="svelte-rccxcp"> </div>',1),Mi=l("<div> </div>"),Ti=l('<span class="svelte-rccxcp">/</span> <div class="monster_defense svelte-rccxcp"> </div>',1),ji=l("<div> </div>"),Ei=l('<div class="duel_card_info_row svelte-rccxcp"><!> <!> <div style="flex-grow: 1;" class="svelte-rccxcp"></div> <div class="monster_attack svelte-rccxcp"> </div> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),Bi=l('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Ai=l('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Yi=l('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※エラッタ前カードです</div></div>'),Ui=l('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),Li=l('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),Ni=l('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <!></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!> <!></div></div>');function Pi(c,i){bt(i,!1);let t=ze(i,"cardInfo",8,void 0),v=ze(i,"onAttention",8);kt();var u=Te(),d=U(u);{var f=o=>{var A=Ni(),z=a(A),b=a(z),M=a(b),n=a(M),L=r(b,2);{var X=E=>{var B=Di(),re=a(B),me=a(re),he=r(re,2),O=a(he);y((T,I)=>{m(me,T),m(O,I)},[()=>"★".repeat(t().level||0),()=>"☆".repeat(t().rank||0)],ce),s(E,B)};k(L,E=>{t().kind==="Monster"&&E(X)})}var R=r(z,2),Y=a(R);{var N=E=>{var B=$i(),re=U(B),me=a(re),he=a(me),O=a(he),T=r(re,2),I=a(T),Z=a(I),te=r(I,2),C=a(te);y(()=>{m(O,t().pendulumDescription),m(Z,`◀ ${t().pendulumScaleL??""}`),m(C,`${t().pendulumScaleR??""} ▶`)}),s(E,B)};k(Y,E=>{var B;(B=t().monsterCategories)!=null&&B.includes("Pendulum")&&E(N)})}var _e=r(Y,2);{var oe=E=>{var B=Ei(),re=U(B),me=a(re);{var he=P=>{var K=Si(),Q=U(K),xe=r(Q,2),S=a(xe);y(()=>{Ee(Q,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),m(S,`${ma[t().attributes[0]]??""}属性`)}),s(P,K)};k(me,P=>{t().attributes&&P(he)})}var O=r(me,2);{var T=P=>{var K=Mi(),Q=a(K);y(()=>{Ee(K,`monster_cat ${t().types[0]??""} svelte-rccxcp`),m(Q,`${la[t().types[0]]??""}${ha[t().types[0]]??""}族`)}),s(P,K)};k(O,P=>{t().types&&P(T)})}var I=r(O,4),Z=a(I),te=r(I,2);{var C=P=>{var K=Ti(),Q=r(U(K),2),xe=a(Q);y(()=>m(xe,t().defense??"?")),s(P,K)};k(te,P=>{var K;(K=t().monsterCategories)!=null&&K.includes("Link")||P(C)})}var F=r(re,2);se(F,5,()=>t().monsterCategories??[],le,(P,K)=>{var Q=ji(),xe=a(Q);y(()=>{Ee(Q,`monster_cat ${e(K)??""} svelte-rccxcp`),m(xe,`${Zt[e(K)]??""}${ra[e(K)]??""}`)}),s(P,Q)}),y(()=>m(Z,t().attack??"?")),s(E,B)},Se=E=>{var B=Te(),re=U(B);{var me=O=>{var T=Bi(),I=r(a(T),2),Z=a(I);y(()=>m(Z,`${oa[t().spellCategory]??""}魔法`)),s(O,T)},he=O=>{var T=Te(),I=U(T);{var Z=te=>{var C=Ai(),F=r(a(C),2),P=a(F);y(()=>m(P,`${va[t().trapCategory]??""}罠`)),s(te,C)};k(I,te=>{t().kind==="Trap"&&t().trapCategory&&te(Z)},!0)}s(O,T)};k(re,O=>{t().kind==="Spell"&&t().spellCategory?O(me):O(he,!1)},!0)}s(E,B)};k(_e,E=>{t().kind==="Monster"?E(oe):E(Se,!1)})}var ve=r(_e,2),ae=a(ve),pe=a(ae),ye=a(pe),Me=r(ve,2);{var x=E=>{var B=Yi();s(E,B)};k(Me,E=>{t().isOldVersion&&E(x)})}var j=r(Me,2);{var ie=E=>{var B=Ui();s(E,B)},J=E=>{var B=Li(),re=a(B),me=r(re,2),he=a(me);y(O=>{wt(re,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),wt(me,"href",O),m(he,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>cr(t())],ce),s(E,B)};k(j,E=>{t().isForTest?E(ie):E(J,!1)})}y(E=>{Ee(A,`duel_card duel_card_info ${t().kind??""} ${E??""} svelte-rccxcp`),m(n,t().name),m(ye,t().description)},[()=>{var E;return(E=t().monsterCategories)==null?void 0:E.join(" ")}],ce),ne("click",A,()=>v()(t())),s(o,A)};k(d,o=>{t()&&o(f)})}s(c,u),xt()}const qi={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class Fi{constructor(){vt(this,"DefaultSeparator1","/");vt(this,"DefaultSeparator2"," ");vt(this,"DefaultSeparator3",":");vt(this,"createDate",i=>{if(!i)return;const t=new Date(i);if(!isNaN(t.getTime()))return t});vt(this,"createDateOr",(i,t)=>this.createDate(i)||t||new Date);vt(this,"truncateDate",i=>{const t=i||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});vt(this,"addDate",(i,t)=>{const v=this.createDateOr(i);return v.setDate(v.getDate()+t),v});vt(this,"addMonth",(i,t)=>{const v=this.createDateOr(i);return v.setMonth(v.getMonth()+t),v});vt(this,"addYear",(i,t)=>{const v=this.createDateOr(i);return v.setFullYear(v.getFullYear()+t),v});vt(this,"getDayOfWeek",(i,t="dddd")=>{const v=this.createDate(i);return v?qi[v.getDay()][t]:""});vt(this,"formatToYYYYMMDD",(i,t=this.DefaultSeparator1)=>{const v=this.createDate(i);if(!v)return"";const u=v.getFullYear().toString(),d=("0"+(v.getMonth()+1)).slice(-2),f=("0"+v.getDate()).slice(-2);return u+t+d+t+f});vt(this,"formatToYYYYMM",(i,t=this.DefaultSeparator1)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const u=v.getFullYear().toString(),d=("0"+(v.getMonth()+1)).slice(-2);return u+t+d});vt(this,"formatToHHMMSS",(i,t=this.DefaultSeparator3)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const u=v.getHours(),d=v.getMinutes(),f=v.getSeconds();return("0"+u).slice(-2)+t+("0"+d).slice(-2)+t+("0"+f).slice(-2)});vt(this,"formatToHHMM",(i,t=this.DefaultSeparator3)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const u=("0"+v.getHours()).slice(-2),d=("0"+v.getMinutes()).slice(-2);return u+t+d});vt(this,"formatToYYYYMMDD_HHMM",(i,t=this.DefaultSeparator1,v=this.DefaultSeparator2,u=this.DefaultSeparator3)=>{const d=this.createDate(i);return d?this.formatToYYYYMMDD(d,t)+v+this.formatToHHMM(d,u):""});vt(this,"formatToYYYYMMDD_HHMMSS",(i,t=this.DefaultSeparator1,v=this.DefaultSeparator2,u=this.DefaultSeparator3)=>{const d=this.createDate(i);return d?this.formatToYYYYMMDD(d,t)+v+this.formatToHHMMSS(d,u):""})}}const Ct=new Fi;Date.prototype.truncateDate=function(){return Ct.truncateDate(this)};Date.prototype.getCloneOr=function(c){return Ct.createDateOr(this,c)};Date.prototype.addDate=function(c){return Ct.addDate(this,c)};Date.prototype.addMonth=function(c){return Ct.addDate(this,c)};Date.prototype.addYear=function(c){return Ct.addDate(this,c)};Date.prototype.getDayOfWeek=function(c="dddd"){return Ct.getDayOfWeek(this,c)};Date.prototype.formatToYYYYMM=function(c){return Ct.formatToYYYYMM(this,c)};Date.prototype.formatToYYYYMMDD=function(c){return Ct.formatToYYYYMMDD(this,c)};Date.prototype.formatToYYYYMMDD_HHMM=function(c,i,t){return Ct.formatToYYYYMMDD_HHMM(this,c,i,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(c,i,t){return Ct.formatToYYYYMMDD_HHMMSS(this,c,i,t)};Date.prototype.formatToHHMM=function(c){return Ct.formatToHHMM(this,c)};Date.prototype.formatToHHMMSS=function(c){return Ct.formatToHHMMSS(this,c)};var Hi=l('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),Oi=l('<ul class="deck_info_list svelte-2wdgc8"></ul>'),Ii=l('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),zi=l('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),Ri=l('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),Wi=l('<button class="svelte-2wdgc8">Cancel</button>'),Ki=l('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function Vi(c,i){bt(i,!1);let t=ze(i,"eventHolder",8),v=ze(i,"args",8),u=ze(i,"resolve",8),d=fe(Promise.resolve([])),f=fe();const o=()=>{w(f,new DataTransfer().files),w(d,Promise.resolve([]))},A=async L=>{L.preventDefault(),console.log("hoge",L)},z=async L=>{L.preventDefault(),L.dataTransfer&&M(L.dataTransfer.files)},b=()=>{M(e(f))},M=async L=>{if(!L.length)return;const X=[],R=[];for(const Y of L)try{R.push(...await $t.createfromJson(Y))}catch(N){N instanceof Error&&X.push(N.message)}if(X.length){console.log(...X);return}w(d,e(d).then(()=>R))},n=o;kt(),_r(c,{get eventHolder(){return t()},get args(){return v()},$$slots:{body:(L,X)=>{var R=zi(),Y=a(R);ht(Y,()=>Jt,null,(N,_e)=>{var oe=Te(),Se=U(oe);ht(Se,()=>e(d),null,(ve,ae)=>{var pe=Te(),ye=U(pe);{var Me=j=>{var ie=Oi();se(ie,5,()=>e(ae),le,(J,E)=>{var B=Hi(),re=a(B),me=a(re),he=r(re,2),O=a(he),T=r(he,2),I=a(T);y((Z,te,C)=>{m(me,e(E).name),m(O,`${Z??""}
                  /
                  ${te??""}`),m(I,`最終使用日時 ： ${C??""}`)},[()=>e(E).cardNames.filter(Z=>{var te,C;return!((C=(te=e(_e).getCardInfo(Z))==null?void 0:te.monsterCategories)!=null&&C.union(Ht).length)}).length,()=>e(E).cardNames.filter(Z=>{var te,C;return(C=(te=e(_e).getCardInfo(Z))==null?void 0:te.monsterCategories)==null?void 0:C.union(Ht).length}).length,()=>e(E).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],ce),s(J,B)}),s(j,ie)},x=j=>{var ie=Ii(),J=r(a(ie),2),E=a(J);ur(E,()=>e(f),B=>w(f,B)),ne("change",E,b),ne("cancel",E,n),ne("drop",ie,z),ne("dragover",ie,A),s(j,ie)};k(ye,j=>{e(ae).length?j(Me):j(x,!1)})}s(ve,pe)}),s(N,oe)}),s(L,R)},footer:(L,X)=>{var R=Ki(),Y=a(R);ht(Y,()=>e(d),null,(N,_e)=>{var oe=Te(),Se=U(oe);{var ve=pe=>{var ye=Ri(),Me=U(ye),x=r(Me,2),j=r(x,2);y(()=>{Me.disabled=e(_e).length===0,x.disabled=e(_e).length===0}),ne("click",Me,()=>u()({deckInfos:e(_e),replaceAll:!1})),ne("click",x,()=>u()({deckInfos:e(_e),replaceAll:!0})),ne("click",j,n),s(pe,ye)},ae=pe=>{var ye=Te(),Me=U(ye);{var x=j=>{var ie=Wi();ne("click",ie,()=>u()(void 0)),s(j,ie)};k(Me,j=>{v().cancelable&&j(x)},!0)}s(pe,ye)};k(Se,pe=>{e(_e).length?pe(ve):pe(ae,!1)})}s(N,oe)}),s(L,R)}}}),xt()}const na=class na extends pr{constructor(i,t){super(i,...Object.values(t))}};vt(na,"createModalController",i=>{const t={deckUploader:new gr({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new na(i,t),t)});let ya=na;function Gi(c,i){bt(i,!1);let t=ze(i,"modalController",8);kt(),fr(c,{get modalController(){return t()},children:(v,u)=>{var d=Te(),f=U(d);{var o=A=>{Vi(A,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};k(f,A=>{t().deckUploader.state==="Shown"&&A(o)})}s(v,d)},$$slots:{default:!0}}),xt()}var Xi=l("<button> </button>"),Qi=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),Ji=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),Zi=l('<div class="deck_editor_search_box_row monster_ex_categories svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">エクストラ</button></div> <div class="svelte-n46fl7"></div></div>'),en=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),tn=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> <div style="display: inline-block;"></div> </label>'),an=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),rn=l('<div class="deck_editor_search_box_row monster_categories svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">モンスター</button></div> <div class="svelte-n46fl7"></div></div> <div class="deck_editor_search_box_row monster_attributes svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">属性</button></div> <div class="svelte-n46fl7"></div></div> <div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">種族</button></div> <div class="svelte-n46fl7"></div></div> <div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">星攻守</button></div> <div class="svelte-n46fl7"><div class="star_range svelte-n46fl7"><span class="svelte-n46fl7">星</span> <input type="number" min="0" max="13" class="svelte-n46fl7"> <span class="svelte-n46fl7">～</span> <input type="number" min="0" max="13" class="svelte-n46fl7"></div> <div class="atk_range svelte-n46fl7"><span class="svelte-n46fl7">攻</span> <input type="number" min="0" max="5000" step="100" class="svelte-n46fl7"> <span class="svelte-n46fl7">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-n46fl7"></div> <div class="def_range svelte-n46fl7"><span class="svelte-n46fl7">守</span> <input type="number" min="0" max="5000" step="100" class="svelte-n46fl7"> <span class="svelte-n46fl7">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-n46fl7"></div> <div class="atk_plus_def svelte-n46fl7"><span class="svelte-n46fl7">攻+守</span> <input type="number" min="0" max="10000" step="100" class="svelte-n46fl7"></div></div></div>',1),sn=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),nn=l('<div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">魔法</button></div> <div class="svelte-n46fl7"></div></div>'),ln=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),on=l('<div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">罠</button></div> <div class="svelte-n46fl7"></div></div>'),vn=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),dn=l("<div>カード情報読込中</div>"),cn=l("<option> </option>"),_n=l('<div class="svelte-n46fl7"><a class="white_button svelte-n46fl7" download="SVS_DeckInfos.json">ダウンロード</a></div>'),un=l('<div class="svelte-n46fl7"></div>'),fn=l('<div class="svelte-n46fl7"><a class="white_button svelte-n46fl7" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),pn=l('<div class="svelte-n46fl7"></div>'),gn=l('<div class="deck_editor_body_right_header svelte-n46fl7"><div class="deck_editor_body_right_header_row svelte-n46fl7"><div class="svelte-n46fl7">編集対象</div> <div class="svelte-n46fl7"><select style="width:100%" class="svelte-n46fl7"></select></div></div> <div class="deck_editor_body_right_header_row svelte-n46fl7"><div class="svelte-n46fl7">新規名称</div> <div class="svelte-n46fl7"><input type="text" style="width:100%" class="svelte-n46fl7"></div></div> <div class="deck_editor_body_right_header_row svelte-n46fl7"></div> <div class="deck_editor_body_right_header_row svelte-n46fl7"><div class="svelte-n46fl7">基本操作</div> <div class="svelte-n46fl7"><button class="white_button svelte-n46fl7">デッキを保存</button></div> <div class="svelte-n46fl7"><button class="white_button svelte-n46fl7">デッキを複製</button></div> <div class="svelte-n46fl7"><button class="white_button svelte-n46fl7" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-n46fl7"><div class="svelte-n46fl7">DL/UL</div> <!> <!> <div class="svelte-n46fl7"><button class="white_button svelte-n46fl7">アップロード</button></div></div></div> <!>',1),yn=l('<div class="svelte-n46fl7">デッキ情報読込中</div>'),mn=l('<div class="svelte-n46fl7"></div>'),hn=l('<div><div class="deck_editor_header svelte-n46fl7"></div> <div class="deck_editor_body svelte-n46fl7"><div class="deck_editor_body_left svelte-n46fl7"><div role="contentinfo" class="deck_editor_search_box svelte-n46fl7"><div class="deck_editor_search_box_header svelte-n46fl7"><div class="svelte-n46fl7"><button class="deck_editor_search_box_title svelte-n46fl7">検索条件</button></div> <div class="deck_editor_sort_setting_container svelte-n46fl7"></div></div> <div class="deck_editor_search_box_body svelte-n46fl7"><div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">名称</button></div> <div class="svelte-n46fl7"><input type="text" style="width:100%" placeholder="※ルビには対応していません" class="svelte-n46fl7"></div></div> <div class="deck_editor_search_box_row card_kind svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">種類</button></div> <div class="svelte-n46fl7"></div></div> <!> <!> <!> <!> <div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">その他</button></div> <div class="svelte-n46fl7"></div></div></div></div> <!></div> <div class="deck_editor_body_center svelte-n46fl7"><!></div>  <div class="deck_editor_body_right svelte-n46fl7"><!></div></div> <div class="footer svelte-n46fl7"></div></div> <!>',1);function bn(c,i){bt(i,!1);const t=[],v=[],u=[],d=[],f=[],o=[],A=[],z=[],b=ya.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),M={name:"",deckCardKinds:[...Kt],exMonsterCategories:[...Ht],monsterCategories:Aa.filter($=>!Ht.includes($)),monsterAttributes:[...Ba],monsterTypes:[...Ea],spellCategories:ja.filter($=>$!=="PendulumScale"),trapCategories:[...Ta],starLowerBound:0,starUpperBound:13,atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:["test","oldVersion","implemented"],sort:[...Ya]},n=fe(structuredClone(M));$e(n,e(n).others=["oldVersion"]);let L=fe("DeckEdit"),X=fe("SearchCondition");const R=()=>{if(!e(n).deckCardKinds.length){Vt(e(n)).forEach($=>{Array.isArray(e(n)[$])&&Array.isArray(M[$])?$e(n,e(n)[$]=[...M[$]]):$e(n,e(n)[$]=M[$])});return}$e(n,e(n).name=""),$e(n,e(n).deckCardKinds=[]),$e(n,e(n).exMonsterCategories=[]),$e(n,e(n).monsterCategories=[]),$e(n,e(n).monsterAttributes=[]),$e(n,e(n).monsterTypes=[]),$e(n,e(n).spellCategories=[]),$e(n,e(n).trapCategories=[]),$e(n,e(n).others=[]),$e(n,e(n).atkLowerBound=0),$e(n,e(n).atkUpperBound=5e3),$e(n,e(n).defLowerBound=0),$e(n,e(n).defUpperBound=5e3),$e(n,e(n).atkPlusDef=void 0),$e(n,e(n).sort=[...Ya])},Y=$=>{$.forEach(p=>{Array.isArray(e(n)[p])&&Array.isArray(M[p])?$e(n,e(n)[p]=e(n)[p].length?[]:[...M[p]]):$e(n,e(n)[p]=M[p])})},N=($,p,W)=>{Array.isArray(e(n)[p])&&Array.isArray(M[p])&&$e(n,e(n)[p]=[W])},_e=async()=>{const p=(await e(ve)).find(de=>de.id===e(Se));if(!p)return;const W=await Jt;w(ye,{...p,cardInfos:p.cardNames.map(de=>{const Le=W.getCardInfo(de);return Le===void 0&&console.error(de),Le}).filter(de=>de!==void 0)})},oe=()=>$t.getAllDeckInfo().then($=>(w(Se,($.find(p=>p.lastUsedAt.getTime()===Math.max(...$.map(W=>W.lastUsedAt.getTime())))??$[0]).id),$));let Se=fe(-1),ve=fe(oe()),ae=fe(e(ve).then($=>$t.convertToObjectURL($)));e(ve).then(_e);const pe=()=>{w(ve,oe()),w(ae,e(ve).then($=>$t.convertToObjectURL($))),_e()};let ye=fe({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),Me=fe(void 0),x=0;const j=$=>{w(X,"CardDetail"),$.cardId!==void 0&&!$.description&&!$.pendulumDescription&&(x=$.cardId,Ia([$.cardId]).then(()=>{$.cardId===x&&w(Me,$)})),w(Me,$)},ie=async()=>{const p=(await e(ve)).find(W=>W.id===e(Se));if(!p)throw new Error("illegal state");return p},J=async()=>{const $=await ie();await $.saveDeckInfo({...$,name:e(ye).name,cardNames:e(ye).cardInfos.map(p=>p.name),lastUsedAt:new Date}),pe()},E=async()=>{(await $t.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,e(ye).cardInfos.map(p=>p.name))).saveDeckInfo(),pe()},B=async $=>{const p=await ie();!$.shiftKey&&!confirm(`デッキ【${p.name}】を削除します。
よろしいですか？`)||(await p.delete(),pe())},re=async()=>{const $=await b.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!$)return;const p=[];if($.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;p.push(...(await e(ve)).map(W=>W.id))}await Promise.all($.deckInfos.map(W=>$t.createNewDeck(W.name,W.description,W.cardNames,W.lastUsedAt))),p.length&&await Promise.all(p.map($t.remove)),pe()},me=()=>innerWidth<=1400?"compact":"wide";kt();var he=hn(),O=U(he),T=r(a(O),2),I=a(T),Z=a(I),te=a(Z),C=a(te),F=a(C),P=r(C,2);se(P,5,()=>e(n).sort,le,($,p,W)=>{var de=Xi(),Le=a(de);y(()=>{Ee(de,`deck_editor_sort_setting_item ${e(p).order??""} priority_${e(p).priority??""} svelte-n46fl7`),m(Le,`${yr[e(p).key]??""}
                ${(e(p).order==="asc"?"▲":"▼")??""}`)}),ne("click",de,()=>{e(n).sort.forEach(Re=>Re.priority++),e(p).order=e(p).order==="asc"?"desc":"asc",Lt(()=>e(n).sort),e(p).priority=1,Lt(()=>e(n).sort)}),s($,de)});var K=r(te,2),Q=a(K),xe=a(Q),S=a(xe),D=r(xe,2),g=a(D),_=r(Q,2),h=a(_),q=a(h),ke=r(h,2);se(ke,5,()=>Kt,le,($,p)=>{var W=Qi(),de=a(W),Le,Re=r(de);y(()=>{Le!==(Le=e(p))&&(de.value=(de.__value=e(p))==null?"":e(p)),m(Re,` ${za[e(p)]??""}`)}),Ut(t,[],de,()=>(e(p),e(n).deckCardKinds),je=>$e(n,e(n).deckCardKinds=je)),s($,W)});var we=r(_,2);{var ge=$=>{var p=Zi(),W=a(p),de=a(W),Le=r(W,2);se(Le,5,()=>Ht,le,(Re,je)=>{var We=Ji(),Fe=a(We),Ke,He=r(Fe);y(()=>{Ke!==(Ke=e(je))&&(Fe.value=(Fe.__value=e(je))==null?"":e(je)),m(He,` ${Zt[e(je)]??""}${ra[e(je)]??""}`)}),Ut(v,[],Fe,()=>(e(je),e(n).exMonsterCategories),Ve=>$e(n,e(n).exMonsterCategories=Ve)),s(Re,We)}),ne("click",de,()=>Y(["exMonsterCategories"])),ee(3,p,()=>ue,()=>({delay:0,duration:100})),s($,p)};k(we,$=>{e(n).deckCardKinds.includes("ExtraMonster")&&$(ge)})}var V=r(we,2);{var G=$=>{var p=rn(),W=U(p),de=a(W),Le=a(de),Re=r(de,2);se(Re,5,()=>Aa.filter(Be=>!Ht.includes(Be)),le,(Be,Oe)=>{var yt=en(),_t=a(yt),Dt,ot=r(_t);y(()=>{Dt!==(Dt=e(Oe))&&(_t.value=(_t.__value=e(Oe))==null?"":e(Oe)),m(ot,` ${Zt[e(Oe)]??""}${ra[e(Oe)]??""}`)}),Ut(u,[],_t,()=>(e(Oe),e(n).monsterCategories),Ze=>$e(n,e(n).monsterCategories=Ze)),s(Be,yt)});var je=r(W,2),We=a(je),Fe=a(We),Ke=r(We,2);se(Ke,5,()=>Ba,le,(Be,Oe)=>{var yt=tn(),_t=a(yt),Dt,ot=r(_t,2),Ze=r(ot);y(()=>{Dt!==(Dt=e(Oe))&&(_t.value=(_t.__value=e(Oe))==null?"":e(Oe)),Ee(ot,`monster_attr ${e(Oe)??""} svelte-n46fl7`),m(Ze,` ${ma[e(Oe)]??""}`)}),Ut(d,[],_t,()=>(e(Oe),e(n).monsterAttributes),pt=>$e(n,e(n).monsterAttributes=pt)),s(Be,yt)});var He=r(je,2),Ve=a(He),ct=a(Ve),At=r(Ve,2);se(At,5,()=>Ea,le,(Be,Oe)=>{var yt=an(),_t=a(yt),Dt,ot=r(_t);y(()=>{Dt!==(Dt=e(Oe))&&(_t.value=(_t.__value=e(Oe))==null?"":e(Oe)),m(ot,` ${la[e(Oe)]??""}
                    ${ha[e(Oe)]??""}`)}),Ut(f,[],_t,()=>(e(Oe),e(n).monsterTypes),Ze=>$e(n,e(n).monsterTypes=Ze)),ne("dblclick",yt,Ze=>N(Ze,"monsterTypes",e(Oe))),s(Be,yt)});var Yt=r(He,2),It=a(Yt),st=a(It),tt=r(It,2),lt=a(tt),it=r(a(lt),2),ft=r(it,4),gt=r(lt,2),ut=r(a(gt),2),St=r(ut,4),Tt=r(gt,2),jt=r(a(Tt),2),et=r(jt,4),at=r(Tt,2),rt=r(a(at),2);ne("click",Le,()=>Y(["monsterCategories"])),ee(3,W,()=>ue,()=>({delay:0,duration:100})),ne("click",Fe,()=>Y(["monsterAttributes"])),ee(3,je,()=>ue,()=>({delay:0,duration:100})),ne("click",ct,()=>Y(["monsterTypes"])),ee(3,He,()=>ue,()=>({delay:0,duration:100})),ne("click",st,()=>Y(["starLowerBound","starUpperBound","atkLowerBound","atkUpperBound","defLowerBound","defUpperBound","atkPlusDef"])),Mt(it,()=>e(n).starLowerBound,Be=>$e(n,e(n).starLowerBound=Be)),Mt(ft,()=>e(n).starUpperBound,Be=>$e(n,e(n).starUpperBound=Be)),Mt(ut,()=>e(n).atkLowerBound,Be=>$e(n,e(n).atkLowerBound=Be)),Mt(St,()=>e(n).atkUpperBound,Be=>$e(n,e(n).atkUpperBound=Be)),Mt(jt,()=>e(n).defLowerBound,Be=>$e(n,e(n).defLowerBound=Be)),Mt(et,()=>e(n).defUpperBound,Be=>$e(n,e(n).defUpperBound=Be)),Mt(rt,()=>e(n).atkPlusDef,Be=>$e(n,e(n).atkPlusDef=Be)),ee(3,Yt,()=>ue,()=>({delay:0,duration:100})),s($,p)};k(V,$=>{(e(n).deckCardKinds.includes("Monster")||e(n).deckCardKinds.includes("ExtraMonster"))&&$(G)})}var H=r(V,2);{var Ce=$=>{var p=nn(),W=a(p),de=a(W),Le=r(W,2);se(Le,5,()=>ja.filter(Re=>Re!=="PendulumScale"),le,(Re,je)=>{var We=sn(),Fe=a(We),Ke,He=r(Fe);y(()=>{Ke!==(Ke=e(je))&&(Fe.value=(Fe.__value=e(je))==null?"":e(je)),m(He,` ${oa[e(je)]??""}`)}),Ut(o,[],Fe,()=>(e(je),e(n).spellCategories),Ve=>$e(n,e(n).spellCategories=Ve)),s(Re,We)}),ne("click",de,()=>Y(["spellCategories"])),ee(3,p,()=>ue,()=>({delay:0,duration:100})),s($,p)};k(H,$=>{e(n).deckCardKinds.includes("Spell")&&$(Ce)})}var Ne=r(H,2);{var Ie=$=>{var p=on(),W=a(p),de=a(W),Le=r(W,2);se(Le,5,()=>Ta,le,(Re,je)=>{var We=ln(),Fe=a(We),Ke,He=r(Fe);y(()=>{Ke!==(Ke=e(je))&&(Fe.value=(Fe.__value=e(je))==null?"":e(je)),m(He,` ${va[e(je)]??""}`)}),Ut(A,[],Fe,()=>(e(je),e(n).trapCategories),Ve=>$e(n,e(n).trapCategories=Ve)),s(Re,We)}),ne("click",de,()=>Y(["trapCategories"])),ee(3,p,()=>ue,()=>({delay:0,duration:100})),s($,p)};k(Ne,$=>{e(n).deckCardKinds.includes("Trap")&&$(Ie)})}var Pe=r(Ne,2),Ae=a(Pe),Ge=a(Ae),Ye=r(Ae,2);se(Ye,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],le,($,p)=>{var W=vn(),de=a(W),Le,Re=r(de);y(()=>{Le!==(Le=p.key)&&(de.value=(de.__value=p.key)==null?"":p.key),m(Re,` ${p.text??""}`)}),Ut(z,[],de,()=>(p.key,e(n).others),je=>$e(n,e(n).others=je)),s($,W)});var be=r(Z,2);Pi(be,{get cardInfo(){return e(Me)},onAttention:j});var De=r(I,2),Ue=a(De);ht(Ue,()=>Jt,$=>{var p=dn();s($,p)},($,p)=>{const W=ce(()=>Object.values(e(p).dic));Ha($,{mode:"List",get allCardInfos(){return e(W)},onAttention:j,get searchCondition(){return e(n)},get selectedCardInfo(){return e(Me)},get deckCardInfos(){return e(ye).cardInfos},set deckCardInfos(de){$e(ye,e(ye).cardInfos=de)},$$legacy:!0})});var qe=r(De,2),Je=a(qe);{var nt=$=>{var p=Te(),W=U(p);ht(W,()=>e(ve),de=>{var Le=yn();s(de,Le)},(de,Le)=>{var Re=gn(),je=U(Re),We=a(je),Fe=r(a(We),2),Ke=a(Fe);y(()=>{e(Se),Lt(()=>{e(Le)})}),se(Ke,5,()=>e(Le),le,(et,at)=>{var rt=cn(),Be={},Oe=a(rt);y(()=>{Be!==(Be=e(at).id)&&(rt.value=(rt.__value=e(at).id)==null?"":e(at).id),m(Oe,e(at).name)}),s(et,rt)});var He=r(We,2),Ve=r(a(He),2),ct=a(Ve),At=r(He,4),Yt=r(a(At),2),It=a(Yt),st=r(Yt,2),tt=a(st),lt=r(st,2),it=a(lt),ft=r(At,2),gt=r(a(ft),2);ht(gt,ie,et=>{var at=un();s(et,at)},(et,at)=>{var rt=_n(),Be=a(rt);y(Oe=>wt(Be,"href",Oe),[()=>$t.convertToObjectURL([e(at)])],ce),s(et,rt)});var ut=r(gt,2);ht(ut,()=>e(ae),et=>{var at=pn();s(et,at)},(et,at)=>{var rt=fn(),Be=a(rt);y(()=>wt(Be,"href",e(at))),s(et,rt)});var St=r(ut,2),Tt=a(St),jt=r(je,2);Ha(jt,{mode:"Deck",allCardInfos:[],onAttention:j,get selectedCardInfo(){return e(Me)},get deckCardInfos(){return e(ye).cardInfos},set deckCardInfos(et){$e(ye,e(ye).cardInfos=et)},$$legacy:!0}),Wt(Ke,()=>e(Se),et=>w(Se,et)),ne("change",Ke,_e),Mt(ct,()=>e(ye).name,et=>$e(ye,e(ye).name=et)),ne("click",It,J),ne("click",tt,E),ne("click",it,B),ne("click",Tt,re),s(de,Re)}),s($,p)},Xe=$=>{var p=mn();s($,p)};k(Je,$=>{e(L)==="DeckEdit"||me()==="wide"?$(nt):$(Xe,!1)})}var Qe=r(O,2);Gi(Qe,{modalController:b}),y(($,p,W)=>Ee(O,`deck_editor screen_size_${$??""} left_pain_mode_${p??""} main_view_mode_${W??""} svelte-n46fl7`),[me,()=>e(X).toLowerCase(),()=>e(L).toLowerCase()],ce),ne("click",F,R),ne("click",S,()=>Y(["name"])),Mt(g,()=>e(n).name,$=>$e(n,e(n).name=$)),ne("click",q,()=>Y(["deckCardKinds"])),ne("click",Ge,()=>Y(["others"])),ee(3,Pe,()=>ue,()=>({delay:0,duration:100})),ne("focusin",Z,()=>{w(X,"SearchCondition"),w(L,"SearchCondition")}),ne("click",Z,()=>{w(X,"SearchCondition"),w(L,"SearchCondition")}),ne("click",qe,()=>{w(L,"DeckEdit")}),ne("focusin",qe,()=>{w(L,"DeckEdit")}),s(c,he),xt()}const kn=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],xn=3;var wn=l('<input class="game_mode_radio svelte-sy4ydn" type="radio" name="game_mode"> <label> </label>',1),Cn=l('<option class="svelte-sy4ydn"> </option>'),Dn=l('<option class="svelte-sy4ydn"> </option>'),$n=l('<option class="svelte-sy4ydn"> </option>'),Sn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_deck_selector" class="deck_selector svelte-sy4ydn"><option class="svelte-sy4ydn">デフォルト</option><!></select></div></td></tr>'),Mn=l('<option class="svelte-sy4ydn"> </option>'),Tn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">対戦相手：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select> <div class="svelte-sy4ydn"> </div></div></td></tr> <!> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">先攻後攻：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select></div></td></tr>',1),jn=l('<option class="svelte-sy4ydn"> </option>'),En=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-sy4ydn">難易度：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="difficulty_selector" class="difficulty_selector svelte-sy4ydn"></select></div></td></tr>'),Bn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label class="config_row_label svelte-sy4ydn" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"></div></td></tr> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="deck_selector" class="deck_selector svelte-sy4ydn"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">duel start!</button></div></td></tr>',1),An=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),Yn=l('<tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">deck edit</button></div></td></tr>'),Un=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="duelist_name" class="config_row_label duelist_name svelte-sy4ydn">名前：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><input id="duelist_name" class="duelist_name svelte-sy4ydn" type="text"></div></td></tr> <!> <!>',1),Ln=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),Nn=l('<div class="app_body svelte-sy4ydn"><table class="config_table svelte-sy4ydn"><tbody><!></tbody></table></div>'),Pn=l('<span class="svelte-sy4ydn"> </span> <span class="svelte-sy4ydn"> </span>',1),qn=l('<div class="result_title result_win svelte-sy4ydn">YOU WIN</div>'),Fn=l('<div class="result_title result_lose svelte-sy4ydn">YOU LOSE</div>'),Hn=l('<div class="result_title result_draw svelte-sy4ydn">DRAW</div>'),On=l('<div class="twitter_share_button_wrapper svelte-sy4ydn"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-sy4ydn">X(twitter)でシェアする</a></div>'),In=l('<div class="result svelte-sy4ydn"><!> <div class="reason_of_end svelte-sy4ydn"> </div> <!> <div class="svelte-sy4ydn"><button class="white_button svelte-sy4ydn">TOPへ戻る</button></div></div>'),zn=l('<main style="flex-direction: column; display :flex" class="svelte-sy4ydn"><div class="link link_left svelte-sy4ydn"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-sy4ydn">posfie(toggeter)</a></div> <div class="link link_right svelte-sy4ydn"><a class="a_button svelte-sy4ydn" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">現時点とこの先のこと</a></div> <!> <div class="footer card_summary svelte-sy4ydn"><!></div> <div class="footer debug_info svelte-sy4ydn"><span class="svelte-sy4ydn"> </span> <span class="user_agent_info svelte-sy4ydn"> </span> <span class="screen_info svelte-sy4ydn"> </span></div> <!></main>');function Rn(c,i){bt(i,!1);const t=new mr("stk_ygo_svelte",xn,kn);let v=fe(0),u=fe(0),d=fe(),f=fe("FtkChallenge"),o=fe("None"),A=fe(0),z=fe(""),b=fe(void 0);const M="https://setta238.github.io/stk_ygo_svelte/",n="遊戯王deそりてあ",L="ninja_no",X=hr.getOrCreateNew(t).then(S=>(w(f,Ua.includes(S.previousGameMode)?S.previousGameMode:"FtkChallenge"),ie(S.previousNpcId),S)),R=S=>{var g;const D=S.find(_=>_.lastUsedAt.getTime()===Math.max(...S.map(h=>h.lastUsedAt.getTime())))??S[0];w(A,D.id),e(f)==="FtkChallenge"&&D.deckType!=="Preset"&&w(A,((g=qt.find(_=>_.deckType==="Preset"))==null?void 0:g.id)??e(A))};let Y=fe($t.getAllDeckInfo(t).then(S=>(Promise.all(S.filter(D=>!D.lastUsedAt).map(D=>{D.saveDeckInfo()})),R(S),S)));const N=async()=>{const S=e(A);let D=(await e(Y)).find(_=>_.id===S)??(await oe()).find(_=>_.id===S);D&&await D.updateTimestamp();let g=D;if(g||(g=qt.find(_=>_.id===S)),!g)throw new Error("illegal state");return g},_e=async()=>{(await X).save({previousGameMode:e(f)})},oe=()=>(w(Y,$t.getAllDeckInfo(t).then(S=>(R(S),S))),e(Y)),Se=async()=>{(await e(Y)).length||(await $t.prepareSampleDeck(),oe())},ve=async()=>{await Promise.all([_e(),Se()]);const S=await N(),D=await X;let g=Rt.find(q=>q.id===Number.MIN_SAFE_INTEGER)??Rt[0],_=qt.find(q=>q.id===Number.MIN_SAFE_INTEGER)??qt[0],h="PlayFirst";e(f)==="FtkChallenge"?g=Rt.filter(q=>q.npcType==="FtkChallenge").find(q=>q.difficulty===D.previousDifficulty)??g:e(f)==="Free"&&(g=Rt.find(q=>q.id===D.previousNpcId)??g,_=qt.slice(-1)[0],h=D.previousStartMode),g.npcType!=="FtkChallenge"&&D.previousNpcDeckId>-1?_=(await e(Y)).find(q=>q.id===D.previousNpcDeckId)??_:_=qt.find(q=>q.id===g.id)??_,w(d,new wr(D,"Player",S,[],g,"NPC",_,[],h)),e(d).onDuelEnd.append(()=>(w(d,e(d)),"RemoveMe"))},ae=async()=>{await Promise.all([_e(),Se()]),w(o,"DeckEdit")},pe=async S=>{await _e(),S.key==="Enter"&&!S.repeat&&(await X).save()},ye=()=>{w(Y,oe()),w(d,void 0),w(o,"None")};let Me=Date.now();const x=S=>{Date.now()-Me<200||(Me=Date.now(),w(f,S),oe())},j=S=>{ie(Number(S.currentTarget.value))},ie=S=>{var D;w(b,Rt.find(g=>g.id===S)),w(z,((D=e(b))==null?void 0:D.description)??"")};Se(),kt();var J=zn(),E=r(a(J),2),B=a(E),re=r(E,2);{var me=S=>{var D=Te(),g=U(D);ht(g,()=>X,null,(_,h)=>{gi(_,{get duel(){return e(d)},get userProfile(){return e(h)}})}),s(S,D)},he=S=>{var D=Te(),g=U(D);{var _=q=>{bn(q,{})},h=q=>{var ke=Nn(),we=a(ke),ge=a(we),V=a(ge);ht(V,()=>X,G=>{var H=Ln();s(G,H)},(G,H)=>{var Ce=Un(),Ne=U(Ce),Ie=a(Ne),Pe=a(Ie),Ae=r(Ie),Ge=a(Ae),Ye=a(Ge),be=r(Ne,2);ht(be,()=>e(Y),qe=>{var Je=An();s(qe,Je)},(qe,Je)=>{var nt=Bn(),Xe=U(nt),Qe=a(Xe),$=a(Qe),p=r(Qe),W=a(p);se(W,5,()=>Ua,le,(st,tt)=>{var lt=wn(),it=U(lt),ft=r(it,2),gt=a(ft);y(ut=>{wt(it,"id",`game_mode_radio_${ut??""}`),kr(it,e(tt)),xr(it,e(f)===e(tt)),Ee(ft,`game_mode_tab_label game_mode_tab_${ut??""} svelte-sy4ydn`),wt(ft,"for",`game_mode_radio_${ut??""}`),m(gt,e(tt))},[()=>e(tt).toLowerCase()],ce),ne("change",it,()=>x(e(tt))),s(st,lt)});var de=r(Xe,2),Le=a(de),Re=a(Le),je=r(Le),We=a(je),Fe=a(We);y(()=>{e(A),Lt(()=>{e(f),e(Je)})}),se(Fe,5,()=>e(f)==="FtkChallenge"?qt.filter(st=>st.deckType==="Preset"):e(Je),le,(st,tt)=>{var lt=Cn(),it={},ft=a(lt);y(()=>{it!==(it=e(tt).id)&&(lt.value=(lt.__value=e(tt).id)==null?"":e(tt).id),m(ft,e(tt).name)}),s(st,lt)});var Ke=r(de,2);{var He=st=>{var tt=Tn(),lt=U(tt),it=a(lt),ft=a(it),gt=r(it),ut=a(gt),St=a(ut);y(()=>{e(H),Lt(()=>{})}),se(St,5,()=>Rt,le,(ot,Ze)=>{var pt=Dn(),Pt={},zt=a(pt);y(()=>{Pt!==(Pt=e(Ze).id)&&(pt.value=(pt.__value=e(Ze).id)==null?"":e(Ze).id),m(zt,e(Ze).name)}),s(ot,pt)});var Tt=r(St,2),jt=a(Tt),et=r(lt,2);{var at=ot=>{var Ze=Sn(),pt=a(Ze),Pt=a(pt),zt=r(pt),xa=a(zt),wa=a(xa);y(()=>{e(H),Lt(()=>{e(Je)})});var da=a(wa);da.value=(da.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Ra=r(da);se(Ra,1,()=>e(Je),le,(ca,ta)=>{var aa=$n(),Ca={},Wa=a(aa);y(()=>{Ca!==(Ca=e(ta).id)&&(aa.value=(aa.__value=e(ta).id)==null?"":e(ta).id),m(Wa,e(ta).name)}),s(ca,aa)}),ee(3,Pt,()=>ue,()=>({duration:200})),ee(3,pt,()=>ue,()=>({duration:200})),Wt(wa,()=>e(H).previousNpcDeckId,ca=>e(H).previousNpcDeckId=ca),ee(3,xa,()=>ue,()=>({duration:200})),ee(3,zt,()=>ue,()=>({duration:200})),ee(3,Ze,()=>ue,()=>({duration:200})),s(ot,Ze)};k(et,ot=>{var Ze;((Ze=e(b))==null?void 0:Ze.npcType)!=="FtkChallenge"&&ot(at)})}var rt=r(et,2),Be=a(rt),Oe=a(Be),yt=r(Be),_t=a(yt),Dt=a(_t);y(()=>{e(H),Lt(()=>{})}),se(Dt,5,()=>Vt(La),le,(ot,Ze)=>{var pt=Mn(),Pt={},zt=a(pt);y(()=>{Pt!==(Pt=e(Ze))&&(pt.value=(pt.__value=e(Ze))==null?"":e(Ze)),m(zt,La[e(Ze)])}),s(ot,pt)}),y(()=>m(jt,`※${e(z)??""}`)),ee(3,ft,()=>ue,()=>({duration:200})),ee(3,it,()=>ue,()=>({duration:200})),ne("change",St,j),Wt(St,()=>e(H).previousNpcId,ot=>e(H).previousNpcId=ot),ee(3,ut,()=>ue,()=>({duration:200})),ee(3,gt,()=>ue,()=>({duration:200})),ee(3,lt,()=>ue,()=>({duration:200})),ee(3,Oe,()=>ue,()=>({duration:200})),ee(3,Be,()=>ue,()=>({duration:200})),Wt(Dt,()=>e(H).previousStartMode,ot=>e(H).previousStartMode=ot),ee(3,_t,()=>ue,()=>({duration:200})),ee(3,yt,()=>ue,()=>({duration:200})),ee(3,rt,()=>ue,()=>({duration:200})),s(st,tt)},Ve=st=>{var tt=Te(),lt=U(tt);{var it=ft=>{var gt=En(),ut=a(gt),St=a(ut),Tt=r(ut),jt=a(Tt),et=a(jt);y(()=>{e(H),Lt(()=>{})}),se(et,5,()=>Cr,le,(at,rt)=>{var Be=jn(),Oe={},yt=a(Be);y(()=>{Oe!==(Oe=e(rt))&&(Be.value=(Be.__value=e(rt))==null?"":e(rt)),m(yt,e(rt))}),s(at,Be)}),ee(3,St,()=>ue,()=>({duration:200})),ee(3,ut,()=>ue,()=>({duration:200})),Wt(et,()=>e(H).previousDifficulty,at=>e(H).previousDifficulty=at),ee(3,jt,()=>ue,()=>({duration:200})),ee(3,Tt,()=>ue,()=>({duration:200})),ee(3,gt,()=>ue,()=>({duration:200})),s(ft,gt)};k(lt,ft=>{e(f)==="FtkChallenge"&&ft(it)},!0)}s(st,tt)};k(Ke,st=>{e(f)==="Free"?st(He):st(Ve,!1)})}var ct=r(Ke,2),At=a(ct),Yt=a(At),It=a(Yt);ee(3,$,()=>ue,()=>({duration:200})),ee(3,Qe,()=>ue,()=>({duration:200})),ee(3,W,()=>ue,()=>({duration:200})),ee(3,p,()=>ue,()=>({duration:200})),ee(3,Xe,()=>ue,()=>({duration:200})),ee(3,Re,()=>ue,()=>({duration:200})),ee(3,Le,()=>ue,()=>({duration:200})),Wt(Fe,()=>e(A),st=>w(A,st)),ee(3,We,()=>ue,()=>({duration:200})),ee(3,je,()=>ue,()=>({duration:200})),ee(3,de,()=>ue,()=>({duration:200})),ne("click",It,ve),ee(3,Yt,()=>ue,()=>({duration:200})),s(qe,nt)});var De=r(be,2);{var Ue=qe=>{var Je=Yn(),nt=a(Je),Xe=a(nt),Qe=a(Xe);ne("click",Qe,ae),ee(3,Xe,()=>ue,()=>({duration:200})),ee(3,nt,()=>ue,()=>({duration:200})),ee(3,Je,()=>ue,()=>({duration:200})),s(qe,Je)};k(De,qe=>{e(f)==="Free"&&qe(Ue)})}ee(3,Pe,()=>ue,()=>({duration:200})),ee(3,Ie,()=>ue,()=>({duration:200})),Mt(Ye,()=>e(H).name,qe=>e(H).name=qe),ne("keypress",Ye,pe),ee(3,Ge,()=>ue,()=>({duration:200})),ee(3,Ae,()=>ue,()=>({duration:200})),ee(3,Ne,()=>ue,()=>({duration:200})),s(G,Ce)}),s(q,ke)};k(g,q=>{e(o)==="DeckEdit"?q(_):q(h,!1)},!0)}s(S,D)};k(re,S=>{e(d)?S(me):S(he,!1)})}var O=r(re,2),T=a(O);ht(T,()=>Jt,S=>{var D=dt("読み込み中");s(S,D)},(S,D)=>{var g=Pn(),_=U(g),h=a(_),q=r(_,2),ke=a(q);y((we,ge,V)=>{m(h,`公式DB上のカード${we??""}枚`),m(ke,`実装済カード（効果あり）${ge??""}枚 （効果なし）${V??""}枚`)},[()=>e(D).knmCount.toLocaleString(),()=>e(D).definitionCount.toLocaleString(),()=>e(D).nonDefinitionCount.toLocaleString()],ce),s(S,g)});var I=r(O,2),Z=a(I),te=a(Z),C=r(Z,2),F=a(C),P=r(C,2),K=a(P),Q=r(I,2);{var xe=S=>{var D=In(),g=a(D);{var _=H=>{var Ce=Te(),Ne=U(Ce);{var Ie=Ae=>{var Ge=qn();s(Ae,Ge)},Pe=Ae=>{var Ge=Te(),Ye=U(Ge);{var be=De=>{var Ue=Fn();s(De,Ue)};k(Ye,De=>{e(d).winner.seat==="Above"&&De(be)},!0)}s(Ae,Ge)};k(Ne,Ae=>{e(d).winner.seat==="Below"?Ae(Ie):Ae(Pe,!1)})}s(H,Ce)},h=H=>{var Ce=Hn();s(H,Ce)};k(g,H=>{e(d).winner?H(_):H(h,!1)})}var q=r(g,2),ke=a(q),we=r(q,2);{var ge=H=>{var Ce=On(),Ne=a(Ce);y(()=>wt(Ne,"href",`https://x.com/share?url=${M}&text=${e(d).twitterShareText??""}&hashtags=${n}&via=${L}`)),s(H,Ce)};k(we,H=>{e(d).twitterShareText&&H(ge)})}var V=r(we,2),G=a(V);y(()=>m(ke,e(d).reasonOfEnd)),ne("click",G,ye),ee(3,D,()=>Sr,()=>({delay:200,duration:200})),s(S,D)};k(Q,S=>{e(d)&&e(d).isEnded&&S(xe)})}y(()=>{m(te,"build at: 20260110_223042"),m(F,br.text),m(K,`w:${e(v)??""}px h:${e(u)??""}px`)}),sa("innerWidth",S=>w(v,S)),sa("innerHeight",S=>w(u,S)),ne("click",B,ye),s(c,J),xt()}Dr(Rn,{target:document.getElementById("app")});
