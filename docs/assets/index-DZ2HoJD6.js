var Oa=Object.defineProperty;var ka=d=>{throw TypeError(d)};var Ra=(d,i,t)=>i in d?Oa(d,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[i]=t;var Ze=(d,i,t)=>Ra(d,typeof i!="symbol"?i+"":i,t),wa=(d,i,t)=>i.has(d)||ka("Cannot "+t);var lt=(d,i,t)=>(wa(d,i,"read from private field"),t?t.call(d):i.get(d)),Ot=(d,i,t)=>i.has(d)?ka("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(d):i.set(d,t),na=(d,i,t,v)=>(wa(d,i,"write to private field"),v?v.call(d,t):i.set(d,t),t);import{s as Da,r as Wa,a as M,b as Ka,l as za,g as e,d as Pa,p as dt,c as He,m as De,i as ct,t as o,e as a,f as k,h as y,j as pe,k as Ae,n as yt,o as ke,q as s,u as _t,v as Me,D as Va,w as je,x as N,y as r,z as oe,A as Ut,B as ae,C as ve,E as g,F as Ga,G as tt,H as ca,I as Xa,J as Qa,K as Lt,L as vt,M as Rt,N as qa,O as _a,P as ea,Q as ua,R as ta,S as fa,T as aa,U as ra,V as Ja,W as Za,X as er,Y as tr,Z as ar,_ as rr,$ as sr,a0 as Xt,a1 as Fa,a2 as ir,a3 as nr,a4 as Qt,a5 as oa,a6 as Ct,a7 as or,a8 as lr,a9 as vr,aa as xt,ab as dr,ac as cr,ad as _r,ae as Ca,af as $a,ag as Sa,ah as Ma,ai as ja,aj as Ta,ak as At,al as Ft,am as Ht,an as wt,ao as ur,ap as fr,aq as Ba,ar as qt,as as Yt,at as pr,au as yr,av as gr,aw as Ea,ax as mr,ay as hr,az as br}from"../chunk/entity_proc_20260103_093546.js";import"../chunk/json_20260103_093546.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))v(p);new MutationObserver(p=>{for(const c of p)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&v(u)}).observe(document,{childList:!0,subtree:!0});function t(p){const c={};return p.integrity&&(c.integrity=p.integrity),p.referrerPolicy&&(c.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?c.credentials="include":p.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function v(p){if(p.ep)return;p.ep=!0;const c=t(p);fetch(p.href,c)}})();const xr=d=>d;function pa(d){const i=d-1;return i*i*i+1}function Aa(d){const i=typeof d=="string"&&d.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[d,"px"]}function kr(d,{delay:i=0,duration:t=400,easing:v=xr}={}){const p=+getComputedStyle(d).opacity;return{delay:i,duration:t,easing:v,css:c=>`opacity: ${c*p}`}}function wr(d,{delay:i=0,duration:t=400,easing:v=pa,x:p=0,y:c=0,opacity:u=0}={}){const l=getComputedStyle(d),U=+l.opacity,z=l.transform==="none"?"":l.transform,D=U*(1-u),[n,R]=Aa(p),[F,H]=Aa(c);return{delay:i,duration:t,easing:v,css:(O,E)=>`
			transform: ${z} translate(${(1-O)*n}${R}, ${(1-O)*F}${H});
			opacity: ${U-D*E}`}}function me(d,{delay:i=0,duration:t=400,easing:v=pa,axis:p="y"}={}){const c=getComputedStyle(d),u=+c.opacity,l=p==="y"?"height":"width",U=parseFloat(c[l]),z=p==="y"?["top","bottom"]:["left","right"],D=z.map(A=>`${A[0].toUpperCase()}${A.slice(1)}`),n=parseFloat(c[`padding${D[0]}`]),R=parseFloat(c[`padding${D[1]}`]),F=parseFloat(c[`margin${D[0]}`]),H=parseFloat(c[`margin${D[1]}`]),O=parseFloat(c[`border${D[0]}Width`]),E=parseFloat(c[`border${D[1]}Width`]);return{delay:i,duration:t,easing:v,css:A=>`overflow: hidden;opacity: ${Math.min(A*20,1)*u};${l}: ${A*U}px;padding-${z[0]}: ${A*n}px;padding-${z[1]}: ${A*R}px;margin-${z[0]}: ${A*F}px;margin-${z[1]}: ${A*H}px;border-${z[0]}-width: ${A*O}px;border-${z[1]}-width: ${A*E}px;min-${l}: 0`}}function Ya(d,i){for(const t in i)d[t]=i[t];return d}function Dr({fallback:d,...i}){const t=new Map,v=new Map;function p(u,l,U){const{delay:z=0,duration:D=S=>Math.sqrt(S)*30,easing:n=pa}=Ya(Ya({},i),U),R=u.getBoundingClientRect(),F=l.getBoundingClientRect(),H=R.left-F.left,O=R.top-F.top,E=R.width/F.width,A=R.height/F.height,se=Math.sqrt(H*H+O*O),le=getComputedStyle(l),Be=le.transform==="none"?"":le.transform,$=+le.opacity;return{delay:z,duration:typeof D=="function"?D(se):D,easing:n,css:(S,Q)=>`
			   opacity: ${S*$};
			   transform-origin: top left;
			   transform: ${Be} translate(${Q*H}px,${Q*O}px) scale(${S+(1-S)*E}, ${S+(1-S)*A});
		   `}}function c(u,l,U){return(z,D)=>(u.set(D.key,z),()=>{if(l.has(D.key)){const n=l.get(D.key);return l.delete(D.key),p(n,z,D)}return u.delete(D.key),d&&d(z,D,U)})}return[c(v,t,!1),c(t,v,!0)]}function Ua(d){return Object.prototype.toString.call(d)==="[object Date]"}function Cr(d){return d}function la(d){const i=d-1;return i*i*i+1}function va(d,i){if(d===i||d!==d)return()=>d;const t=typeof d;if(t!==typeof i||Array.isArray(d)!==Array.isArray(i))throw new Error("Cannot interpolate values of different type");if(Array.isArray(d)){const v=i.map((p,c)=>va(d[c],p));return p=>v.map(c=>c(p))}if(t==="object"){if(!d||!i)throw new Error("Object cannot be null");if(Ua(d)&&Ua(i)){const c=d.getTime(),l=i.getTime()-c;return U=>new Date(c+U*l)}const v=Object.keys(i),p={};return v.forEach(c=>{p[c]=va(d[c],i[c])}),c=>{const u={};return v.forEach(l=>{u[l]=p[l](c)}),u}}if(t==="number"){const v=i-d;return p=>d+p*v}return()=>i}var $t,It,Wt,Nt;const ya=class ya{constructor(i,t={}){Ot(this,$t,Da(void 0));Ot(this,It,Da(void 0));Ot(this,Wt);Ot(this,Nt,null);lt(this,$t).v=lt(this,It).v=i,na(this,Wt,t)}static of(i,t){const v=new ya(i(),t);return Wa(()=>{v.set(i())}),v}set(i,t){var n;M(lt(this,It),i);let{delay:v=0,duration:p=400,easing:c=Cr,interpolate:u=va}={...lt(this,Wt),...t};if(p===0)return(n=lt(this,Nt))==null||n.abort(),M(lt(this,$t),i),Promise.resolve();const l=Ka.now()+v;let U,z=!1,D=lt(this,Nt);return na(this,Nt,za(R=>{if(R<l)return!0;if(!z){z=!0;const H=lt(this,$t).v;U=u(H,i),typeof p=="function"&&(p=p(H,i)),D==null||D.abort()}const F=R-l;return F>p?(M(lt(this,$t),i),!1):(M(lt(this,$t),U(c(F/p))),!0)})),lt(this,Nt).promise}get current(){return e(lt(this,$t))}get target(){return e(lt(this,It))}set target(i){this.set(i)}};$t=new WeakMap,It=new WeakMap,Wt=new WeakMap,Nt=new WeakMap;let Jt=ya;var $r=o('<div class="phase_display svelte-1ycsdg6"><span class="svelte-1ycsdg6"> </span> </div>'),Sr=o('<div class="lifepoint_display svelte-1ycsdg6"><div class="svelte-1ycsdg6"> </div> <div class="svelte-1ycsdg6"> </div></div>'),Mr=(d,i,t)=>i(e(t)),jr=o('<div class="svelte-1ycsdg6"><button class="phase_button svelte-1ycsdg6"> </button></div>'),Tr=o("<div><!></div>"),Br=o('<div class="svelte-1ycsdg6"><!></div>'),Er=o("<div><!></div>"),Ar=o('<div class="config_button_wrapper svelte-1ycsdg6"><button id="config_button" class="svelte-1ycsdg6">⚙</button></div>'),Yr=o("<!> <!> <!> <!>",1),Ur=o('<div style="position: absolute;" class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Lr=o('<div style="position: absolute; top:0rem" class="svelte-1ycsdg6">｛効果対象｝</div>'),Nr=o('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Pr=o(" <!> 】",1),qr=o('<div style="position: absolute; bottom:0rem" class="svelte-1ycsdg6"> <!></div>'),Fr=o("<!> <!>",1),Hr=o('<div class="badge svelte-1ycsdg6"> </div>'),Ir=o('<div class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Or=o("<!> <!> <!> <!>",1),Rr=o('<td><div role="listitem"><!></div></td>');function Wr(d,i){dt(i,!1);let t=He(i,"view",12),v=He(i,"row",8),p=He(i,"column",8),c=He(i,"selectedEntities",28,()=>[]),u=He(i,"selectedCells",28,()=>[]),l=De(t().getCell(v(),p())),U=De(new Jt(e(l).field.duel.duelists.Above.lp,{duration:400,easing:la})),z=De(new Jt(e(l).field.duel.duelists.Below.lp,{duration:400,easing:la}));const D=()=>{M(l,t().getCell(v(),p())),Me(U,e(U).target=e(l).field.duel.duelists.Above.lp),Me(z,e(z).target=e(l).field.duel.duelists.Below.lp)};e(l).onUpdate.append(D),t().onDuelUpdate.append(D),t().modalController.onUpdate.append(D);let n,R=De([]),F=()=>console.log("hoge"),H,O=De([]),E=De(!1),A=De(!1),se=!1;const le=C=>{var j,L;M(de,[]),c().reset(),n=C.activator,F=C.resolve,M(R,C.dummyActionInfos),M(O,C.chainBlockInfos.flatMap(ee=>ee.selectedEntities).getDistinct()),H=C.entitiesChoices,M(E,!1),M(A,((j=C.cellsChoices)==null?void 0:j.selectables.includes(e(l)))??!1),se=e(A)&&((L=C.cellsChoices)==null?void 0:L.qty)===1,D()};t().onWaitStart.append(le);const Be=()=>{n=void 0,M(R,[]),F=()=>{console.log("hoge")},H=void 0,M(O,[]),M(E,!1),M(A,!1),se=!1};t().onWaitEnd.append(Be);let $=De(!1),S=[];const Q=C=>{S=C.filter(j=>j.dests.includes(e(l))),M($,S.length>0),D()},_e=()=>{S=[],M($,!1),D()};t().onDragStart.append(Q),t().onDragEnd.append(_e);const[Ce,ie]=ei;let de=De([]);const Ee=C=>{if(n=void 0,e(l)===C.to||e(l).entities.includes(C.entity)){M(de,[...e(de),C]);const j=C.resolve;M(l,e(l)),setTimeout(()=>{M(de,e(de).filter(L=>L!==C)),C.count++,C.count>1&&j()},600)}};t().onAnimation.append(Ee);const B=C=>{F({phaseChange:C})},I=()=>e(l).isStackCell&&e(l).entities.flatMap(C=>C.actions).filter(C=>e(R).map(j=>j.action.seq).some(j=>j===C.seq)).length>0,V=C=>{var j;if(((j=C.target)==null?void 0:j.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),se)F({selectedCells:[e(l)]});else if(e(A))M(E,!e(E)),u(e(E)?[...u(),e(l)]:u().filter(L=>L!==e(l)));else if(e(l).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(l),!0),t().requireUpdate();const L=e(l).entities.flatMap(re=>re.actions).map(re=>re.seq),ee=e(R).filter(re=>L.includes(re.action.seq));if(ee.length){if(!n)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:n,dummyActionInfos:ee,cancelable:!0}).then(re=>{re&&F({actionInfo:re})});return}}t().requireUpdate(),console.info(e(l),ue(...e(l).visibleEntities))},ce=C=>{C.preventDefault(),C.dataTransfer&&(C.dataTransfer.dropEffect="move")},$e=C=>{C.preventDefault(),console.info("drop",C,e($),S),C.dataTransfer&&(C.dataTransfer.dropEffect="move");try{if(e($)&&S){if(S.length===1){const j=S[0];F({actionInfo:{...j,dest:e(l)}})}else if(S.length>1){if(!n)throw new Va("想定されない状態");e(l).field.duel.view.modalController.terminateAll(),e(l).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:n,dummyActionInfos:S.map(j=>({...j,dest:e(l)})),cancelable:!1}).then(j=>{F({actionInfo:j})})}}}finally{t().removeDraggingActions()}},ue=(...C)=>{if(t().waitMode==="Animation")return"Disabled";if(H&&H.selectables.find(L=>C.find(ee=>L===ee)))return"Selectable";if(!e(R)||e(R).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(L=>L.state==="Shown"))return"Disabled";const j=e(R).filter(L=>C.includes(L.action.entity));return j.length===0?"Disabled":e(l).isStackCell||j[0].action.entity!==C[0]?"Clickable":j.some(L=>L.dests.length)?"Draggable":"Clickable"};ct();var Y=Rr(),b=a(Y);b.__click=V;var G=a(b);{var te=C=>{var j=je(),L=N(j);{var ee=re=>{var he=je(),f=N(he);{var w=h=>{var P=$r(),q=a(P),we=a(q),be=r(q,1,!0);y((fe,X)=>{g(we,fe),g(be,X)},[()=>String(e(l).field.duel.clock.turn).padStart(2,"0"),()=>e(l).field.duel.phase.toUpperCase()],pe),s(h,P)},_=h=>{var P=je(),q=N(P);{var we=fe=>{var X=Sr(),J=a(X),W=a(J),xe=r(J,2),Le=a(xe);y((Fe,Ne)=>{g(W,Fe),g(Le,Ne)},[()=>Math.floor(e(U).current),()=>Math.floor(e(z).current)],pe),s(fe,X)},be=fe=>{var X=je(),J=N(X);{var W=xe=>{var Le=je(),Fe=N(Le);{var Ne=Ye=>{var Oe=je(),x=N(Oe);{var m=T=>{var Z=je(),ye=N(Z);oe(ye,1,()=>t().duel.nextPhaseList,ve,(Se,K)=>{var ge=jr(),Te=a(ge);Te.__click=[Mr,B,K];var Ke=a(Te);y(Ue=>g(Ke,Ue),[()=>e(K).toUpperCase()],pe),s(Se,ge)}),s(T,Z)};k(x,T=>{t().duel.isEnded||T(m)})}s(Ye,Oe)};k(Fe,Ye=>{t().waitMode==="Free"&&Ye(Ne)})}s(xe,Le)};k(J,xe=>{e(l).column===5&&xe(W)},!0)}s(fe,X)};k(q,fe=>{e(l).column===3?fe(we):fe(be,!1)},!0)}s(h,P)};k(f,h=>{e(l).column===1?h(w):h(_,!1)})}s(re,he)};k(L,re=>{e(l).row===3&&re(ee)})}s(C,j)},ne=C=>{var j=je(),L=N(j);{var ee=he=>{var f=Yr();const w=pe(()=>e(de).find(X=>X.to===e(l)));var _=N(f);{var h=X=>{var J=Tr(),W=a(J);Ut(W,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),y(()=>Ae(J,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),ae(1,J,()=>ie,()=>({key:e(w).entity.seq})),s(X,J)};k(_,X=>{e(w)&&e(w).index==="Top"&&X(h)})}var P=r(_,2);oe(P,1,()=>e(l).visibleEntities,ve,(X,J)=>{var W=je(),xe=N(W);{var Le=Fe=>{var Ne=Br(),Ye=a(Ne);const Oe=pe(()=>ue(e(J))),x=pe(()=>e(R).filter(m=>m.action.entity===e(J)));Ut(Ye,{get entity(){return e(J)},get state(){return e(Oe)},get dummyActionInfos(){return e(x)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(m){c(m)},$$legacy:!0}),ae(2,Ne,()=>Ce,()=>({key:e(J).seq})),s(Fe,Ne)};k(xe,Fe=>{e(de).every(Ne=>Ne.entity.seq!==e(J).seq)&&Fe(Le)})}s(X,W)});var q=r(P,2);{var we=X=>{var J=Er(),W=a(J);Ut(W,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),y(()=>Ae(J,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),ae(1,J,()=>ie,()=>({key:e(w).entity.seq})),s(X,J)};k(q,X=>{e(w)&&e(w).index!=="Top"&&X(we)})}var be=r(q,2);{var fe=X=>{var J=Ar();s(X,J)};k(be,X=>{e(l).owner.seat==="Below"&&X(fe)})}s(he,f)},re=he=>{var f=Or();const w=pe(()=>e(de).find(J=>J.to===e(l)));var _=N(f);{var h=J=>{var W=Ur(),xe=a(W);Ut(xe,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),ae(1,W,()=>ie,()=>({key:e(w).entity.seq})),s(J,W)};k(_,J=>{e(w)&&e(w).index!=="Top"&&J(h)})}var P=r(_,2);{var q=J=>{var W=Fr(),xe=N(W);oe(xe,1,()=>e(l).visibleEntities.map((Ne,Ye)=>({index:Ye,entity:Ne})).toReversed(),ve,(Ne,Ye)=>{var Oe=je(),x=N(Oe);{var m=T=>{var Z=Nr();const ye=pe(()=>!e(l).isStackCell&&e(Ye).index===0?ue(...e(l).visibleEntities):void 0);var Se=N(Z);{var K=Ue=>{var Qe=Lr();s(Ue,Qe)};k(Se,Ue=>{e(O).includes(e(Ye).entity)&&Ue(K)})}var ge=r(Se,2),Te=a(ge);const Ke=pe(()=>e(Ye).index===0?e(R).filter(Ue=>e(l).visibleEntities.includes(Ue.action.entity)):void 0);Ut(Te,{get entity(){return e(Ye).entity},get state(){return e(ye)},get dummyActionInfos(){return e(Ke)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(Ue){c(Ue)},$$legacy:!0}),y(()=>Ae(ge,`duel_card_wrapper ${(e(Ye).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1ycsdg6`)),ae(2,ge,()=>Ce,()=>({key:e(Ye).entity.seq})),s(T,Z)};k(x,T=>{e(de).every(Z=>Z.entity.seq!==e(Ye).entity.seq)&&T(m)})}s(Ne,Oe)});var Le=r(xe,2);{var Fe=Ne=>{var Ye=qr(),Oe=a(Ye),x=r(Oe);oe(x,1,()=>ca(e(l).visibleEntities[0].status.maxCounterQty),ve,(m,T)=>{var Z=Pr(),ye=N(Z),Se=r(ye);{var K=ge=>{var Te=tt();y(()=>g(Te,`/${e(l).visibleEntities[0].status.maxCounterQty[e(T)]??""}`)),s(ge,Te)};k(Se,ge=>{(e(l).visibleEntities[0].status.maxCounterQty[e(T)]??9999)<100&&ge(K)})}y((ge,Te)=>g(ye,`【
              ${ge??""}${Te??""} `),[()=>Ga(e(T)),()=>e(l).visibleEntities[0].counterHolder.getQty(e(T))],pe),s(m,Z)}),y(()=>g(Oe,`【${e(l).visibleEntities[0].battlePositionName??""}】 `)),s(Ne,Ye)};k(Le,Ne=>{e(l).visibleEntities[0].battlePosition&&Ne(Fe)})}s(J,W)};k(P,J=>{e(l).visibleEntities.length>0&&J(q)})}var we=r(P,2);{var be=J=>{var W=Hr(),xe=a(W);y(()=>g(xe,e(l).visibleEntities.length)),s(J,W)};k(we,J=>{e(l).isStackCell&&J(be)})}var fe=r(we,2);{var X=J=>{var W=Ir(),xe=a(W);Ut(xe,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),ae(1,W,()=>ie,()=>({key:e(w).entity.seq})),s(J,W)};k(fe,J=>{e(w)&&e(w).index==="Top"&&J(X)})}s(he,f)};k(L,he=>{e(l).cellType==="Hand"?he(ee):he(re,!1)},!0)}s(C,j)};k(G,C=>{e(l).isDisabledCell?C(te):C(ne,!1)})}y(C=>{Ae(Y,`${`duel_field_cell duel_field_cell_${e(l).cellType} ${e(l).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1ycsdg6`),yt(Y,"colspan",e(l).cellType==="Hand"?7:1),Ae(b,`${C??""} svelte-1ycsdg6`)},[()=>`duel_field_cell_inner_box ${e(l).cellType} ${e($)?"can_accept_drop":""} ${I()?"can_action":""} ${e(E)?"is_selected":e(A)?"is_selectable":""} `],pe),ke("dragover",b,ce),ke("drop",b,$e),s(d,Y),_t()}Pa(["click"]);const Kr=(d,i,t=void 0,v="!!!circular reference!!!")=>{let p=[];return JSON.stringify(d,(c,u)=>{if(typeof u=="object"){if(p.indexOf(u)>-1)return v;p.push(u)}let l=u;if(i&&(l=i(c,u)),typeof l=="function")return l.toString();if(l!==u&&typeof l=="object"){if(p.indexOf(l)>-1)return v;p.push(l)}return l},t)};var zr=o('<div class="title svelte-14z6bdh"> </div>'),Vr=o('<div class="title svelte-14z6bdh"> </div>'),Gr=o('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),Xr=o('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),Qr=o("<div><!> <!></div>"),Jr=o('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),Zr=o("<div><!> <!></div>"),es=o("<div><!> <!></div>"),ts=o('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function as(d,i){dt(i,!1);let t=De(void 0),v=He(i,"log",8),p,c=De([]);const u=()=>{const D=((p==null?void 0:p.seq)??-1)+1;v().records.slice(D).forEach(n=>{if(!p){M(c,[[[[n]]]]),p=n;return}if(!e(c)[n.clock.turn]){Me(c,e(c)[n.clock.turn]=[[[n]]]),p=n;return}if(!e(c)[n.clock.turn][n.clock.phaseSeq]){Me(c,e(c)[n.clock.turn][n.clock.phaseSeq]=[[n]]),p=n;return}if(p.clock.chainSeq===n.clock.chainSeq&&p.clock.chainBlockSeq===n.clock.chainBlockSeq&&p.duelist===n.duelist){e(c)[n.clock.turn][n.clock.phaseSeq].slice(-1)[0].push(n),p=n;return}e(c)[n.clock.turn][n.clock.phaseSeq].push([n]),p=n}),M(c,e(c)),Xa().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};v().onUpdate.append(u),v().duel.view.onDuelUpdate.append(u),u(),ct();var l=je(),U=N(l);{var z=D=>{var n=ts(),R=r(a(n),2);oe(R,5,()=>e(c),ve,(F,H)=>{var O=es(),E=a(O);{var A=le=>{var Be=zr(),$=a(Be);y(()=>g($,`ターン：${e(H)[0][0][0].clock.turn??""}`)),s(le,Be)};k(E,le=>{e(H)[0][0][0].clock.turn>0&&le(A)})}var se=r(E,2);oe(se,1,()=>e(H),ve,(le,Be)=>{var $=Zr(),S=a($);{var Q=Ce=>{var ie=Vr(),de=a(ie);y(()=>g(de,e(Be)[0][0].clock.period.name)),s(Ce,ie)};k(S,Ce=>{e(Be)[0][0].clock.turn>0&&Ce(Q)})}var _e=r(S,2);oe(_e,1,()=>e(Be),ve,(Ce,ie)=>{var de=Jr();const Ee=pe(()=>{var Y;return((Y=e(ie).find(b=>b.chainNumber!==void 0))==null?void 0:Y.chainNumber)??0});var B=a(de),I=a(B),V=a(I),ce=r(I,2);{var $e=Y=>{var b=Gr(),G=a(b);y(()=>g(G,`チェーン：${e(Ee)??""}`)),s(Y,b)};k(ce,Y=>{e(Ee)&&Y($e)})}var ue=r(B,2);oe(ue,1,()=>e(ie),ve,(Y,b)=>{var G=Qr(),te=a(G);{var ne=ee=>{var re=tt();y(()=>g(re,e(b).text)),s(ee,re)},C=ee=>{var re=je(),he=N(re);{var f=_=>{var h=tt();y((P,q,we)=>g(h,`移動：${P??""} ${q??""} ⇒ ${we??""}`),[()=>{var P;return(P=e(b).mainEntity)==null?void 0:P.toString()},()=>{var P;return(P=e(b).from)==null?void 0:P.toString()},()=>{var P;return(P=e(b).to)==null?void 0:P.toString()}],pe),s(_,h)},w=_=>{var h=je(),P=N(h);{var q=be=>{var fe=tt();y((X,J)=>g(fe,`生成：${X??""} void ⇒ ${J??""}`),[()=>{var X;return(X=e(b).mainEntity)==null?void 0:X.toString()},()=>{var X;return(X=e(b).to)==null?void 0:X.toString()}],pe),s(be,fe)},we=be=>{var fe=je(),X=N(fe);{var J=xe=>{var Le=tt();y((Fe,Ne)=>g(Le,`消滅：${Fe??""} ${Ne??""} ⇒ void`),[()=>{var Fe;return(Fe=e(b).mainEntity)==null?void 0:Fe.toString()},()=>{var Fe;return(Fe=e(b).from)==null?void 0:Fe.toString()}],pe),s(xe,Le)},W=xe=>{var Le=tt();y(()=>g(Le,e(b).text)),s(xe,Le)};k(X,xe=>{e(b).type==="EntityDisappear"?xe(J):xe(W,!1)},!0)}s(be,fe)};k(P,be=>{e(b).type==="EntityAppear"?be(q):be(we,!1)},!0)}s(_,h)};k(he,_=>{e(b).type==="EntityMove"?_(f):_(w,!1)},!0)}s(ee,re)};k(te,ee=>{e(b).type==="ChainBlockHeader"?ee(ne):ee(C,!1)})}var j=r(te,2);{var L=ee=>{var re=Xr(),he=a(re);y(f=>yt(he,"href",f),[()=>window.URL.createObjectURL(new Blob([Kr(e(b).error,(f,w)=>["pool","bundles","duel"].includes(f)||typeof w=="function"?void 0:w,4)],{type:"text/plain"}))],pe),s(ee,re)};k(j,ee=>{e(b).error&&ee(L)})}y(ee=>Ae(G,`duel_log_record duel_log_record_${ee??""} svelte-14z6bdh`),[()=>e(b).type.toSnakeCase()],pe),s(Y,G)}),y(()=>{var Y,b,G;Ae(de,`duel_log_block_duelist duel_log_block_duelist_${((Y=e(ie)[0].duelist)==null?void 0:Y.seat)??"system"} svelte-14z6bdh`),Ae(I,`duelist ${((b=e(ie)[0].duelist)==null?void 0:b.seat)??""} svelte-14z6bdh`),g(V,((G=e(ie)[0].duelist)==null?void 0:G.profile.name)||"SYSTEM")}),s(Ce,de)}),y(()=>Ae($,`duel_log_block_phase duel_log_block_phase_${e(Be)[0][0].clock.period.key??""} svelte-14z6bdh`)),s(le,$)}),y(()=>Ae(O,`duel_log_block_turn duel_log_block_turn_${e(H)[0][0][0].clock.turn??""} svelte-14z6bdh`)),s(F,O)}),Qa(R,F=>M(t,F),()=>e(t)),s(D,n)};k(U,D=>{(v().duel.view.infoBoardState==="Log"||v().duel.view.infoBoardState==="Default")&&D(z)})}s(d,l),_t()}var rs=o("<div><div> </div> <div> </div></div>");function La(d,i){dt(i,!1);let t=He(i,"duelist",12),v=De(0),p=De();const c=async()=>{const R=t().lp-e(v);if(!e(p)||Math.abs(R)<10){M(v,t().lp),e(p)&&(e(p)(),M(p,void 0));return}M(v,e(v)+Math.floor(Math.random()*R)),await Lt(100),c()},u=()=>{t(t()),!e(p)&&t().lp!==e(v)&&new Promise(R=>{M(p,R),Math.abs(t().lp-e(v)),c()})};t().duel.log.onUpdate.append(u),c(),ct();var l=rs(),U=a(l),z=a(U),D=r(U,2),n=a(D);y(R=>{Ae(l,`duelist duelist_${R??""} svelte-1sy3trd`),Ae(U,`duelist_name duelist_${R??""}_name svelte-1sy3trd`),g(z,t().profile.name),Ae(D,`duelist_lp ${(e(p)?"vibration":"")??""} svelte-1sy3trd`),g(n,e(v))},[()=>t().seat.toLowerCase()],pe),s(d,l),_t()}const ss=(d,i,t)=>(i(i()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),is=(d,i,t)=>(i(i()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var ns=o('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),os=o('<div></div> <div class="svelte-1uevs9j"> </div>',1),ls=o("<div> </div>"),vs=o('<span class="svelte-1uevs9j">/</span> <div class="monster_defense svelte-1uevs9j"> </div>',1),ds=o("<div> </div>"),cs=o('<div class="duel_card_info_row svelte-1uevs9j"><!> <!> <div style="flex-grow: 1;" class="svelte-1uevs9j"></div> <div class="monster_attack svelte-1uevs9j"> </div> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),_s=o('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),us=o('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),fs=o("<!> <!>",1),ps=o('<pre class="description svelte-1uevs9j"> </pre>'),ys=o('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),gs=o('<pre class="description svelte-1uevs9j"> </pre>'),ms=o('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),hs=o('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),bs=o('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),xs=o("[ <!> ],",1),ks=o('<div class="svelte-1uevs9j"> <!></div>'),ws=o('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),Ds=o('<div class="svelte-1uevs9j"> </div>'),Cs=o('<div class="svelte-1uevs9j"> </div>'),$s=o('<div class="svelte-1uevs9j"> </div>'),Ss=o('<div class="svelte-1uevs9j"> </div>'),Ms=o('<div class="svelte-1uevs9j"> </div>'),js=o('<div class="svelte-1uevs9j"> </div>'),Ts=o('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Bs=o('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Es=o('<div class="svelte-1uevs9j">※テスト用カードです</div>'),As=o('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),Ys=o('<div class="duel_card_info_links svelte-1uevs9j"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a> <!></div>'),Us=o("<!> <!>",1),Ls=o('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Ns(d,i){dt(i,!1);let t=He(i,"entity",8,void 0),v=He(i,"mode",12,"Normal");const p=async()=>{if(!t())return;const D=(await Rt).getCardInfo(t().origin.name);if(D)return D.cardId!==void 0&&!D.description&&!D.pendulumDescription&&await qa([D.cardId]),D},c=()=>t()&&t().entityType==="Card"&&(t().origin.cardId??!1)?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t().origin.cardId}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:"";ct();var u=je(),l=N(u);{var U=z=>{var D=Ls();D.__click=[ss,v,t],D.__contextmenu=[is,v,t];var n=a(D),R=a(n),F=a(R),H=a(F),O=r(R,2),E=a(O),A=a(E),se=r(E,2),le=a(se),Be=r(O,2);{var $=B=>{var I=fs(),V=N(I);{var ce=b=>{var G=ns(),te=a(G),ne=a(te),C=r(te,2),j=a(C);y(()=>{g(ne,`◀ ${t().psL??""}`),g(j,`${t().psR??""} ▶`)}),s(b,G)};k(V,b=>{var G;(G=t().origin.monsterCategories)!=null&&G.includes("Pendulum")&&b(ce)})}var $e=r(V,2);{var ue=b=>{var G=cs(),te=N(G),ne=a(te);oe(ne,1,()=>t().attr,ve,(f,w)=>{var _=os(),h=N(_),P=r(h,2),q=a(P);y(()=>{Ae(h,`monster_attr ${e(w)??""} svelte-1uevs9j`),g(q,`${_a[e(w)]??""}属性`)}),s(f,_)});var C=r(ne,2);oe(C,1,()=>t().types,ve,(f,w)=>{var _=ls(),h=a(_);y(()=>{Ae(_,`monster_cat ${e(w)??""} svelte-1uevs9j`),g(h,`${ea[e(w)]??""}${ua[e(w)]??""}族`)}),s(f,_)});var j=r(C,4),L=a(j),ee=r(j,2);{var re=f=>{var w=vs(),_=r(N(w),2),h=a(_);y(()=>g(h,t().def??"?")),s(f,w)};k(ee,f=>{var w;(w=t().status.monsterCategories)!=null&&w.includes("Link")||f(re)})}var he=r(te,2);oe(he,5,()=>t().status.monsterCategories??[],ve,(f,w)=>{var _=ds(),h=a(_);y(()=>{Ae(_,`monster_cat ${e(w)??""} svelte-1uevs9j`),g(h,`${ta[e(w)]??""}${fa[e(w)]??""}`)}),s(f,_)}),y(()=>g(L,t().atk??"?")),s(b,G)},Y=b=>{var G=je(),te=N(G);{var ne=j=>{var L=_s(),ee=r(a(L),2),re=a(ee);y(()=>g(re,`${aa[t().status.spellCategory]??""}魔法`)),s(j,L)},C=j=>{var L=je(),ee=N(L);{var re=he=>{var f=us(),w=r(a(f),2),_=a(w);y(()=>g(_,`${ra[t().status.trapCategory]??""}罠`)),s(he,f)};k(ee,he=>{t().kind==="Trap"&&t().status.trapCategory&&he(re)},!0)}s(j,L)};k(te,j=>{t().kind==="Spell"&&t().status.spellCategory?j(ne):j(C,!1)},!0)}s(b,G)};k($e,b=>{t().kind==="Monster"?b(ue):b(Y,!1)})}s(B,I)};k(Be,B=>{v()!=="Debug"&&B($)})}var S=r(n,2),Q=a(S);{var _e=B=>{var I=ms(),V=N(I);{var ce=Y=>{var b=ys(),G=a(b);vt(G,p,te=>{var ne=tt('"読み込み中"');s(te,ne)},(te,ne)=>{var C=ps(),j=a(C);y(()=>{var L;return g(j,(L=e(ne))==null?void 0:L.pendulumDescription)}),s(te,C)}),s(Y,b)};k(V,Y=>{var b;(b=t().status.monsterCategories)!=null&&b.includes("Pendulum")&&Y(ce)})}var $e=r(V,2),ue=a($e);vt(ue,p,Y=>{var b=tt('"読み込み中"');s(Y,b)},(Y,b)=>{var G=gs(),te=a(G);y(()=>{var ne;return g(te,(ne=e(b))==null?void 0:ne.description)}),s(Y,G)}),s(B,I)},Ce=B=>{var I=je(),V=N(I);{var ce=ue=>{var Y=je(),b=N(Y);{var G=te=>{var ne=bs(),C=r(a(ne),2);oe(C,5,()=>t().actions,ve,(j,L)=>{var ee=je();const re=pe(()=>e(L).actionCountUpperBound),he=pe(()=>e(L).actionCount);var f=N(ee);{var w=_=>{var h=hs(),P=a(h),q=a(P),we=r(P,2),be=a(we),fe=r(we,4),X=a(fe);y(()=>{g(q,e(L).title),g(be,e(he)),g(X,e(re))}),s(_,h)};k(f,_=>{e(re)!==void 0&&e(he)!==void 0&&_(w)})}s(j,ee)}),s(te,ne)};k(b,te=>{t().actions.some(ne=>ne.actionCountUpperBoundKey)&&te(G)})}s(ue,Y)},$e=ue=>{var Y=Ts(),b=a(Y),G=a(b);oe(G,0,()=>["info","status"],ve,(x,m)=>{var T=ws(),Z=N(T),ye=a(Z),Se=r(Z,2);oe(Se,1,()=>Object.entries(t()[m]),ve,(ge,Te)=>{let Ke=()=>e(Te)[0],Ue=()=>e(Te)[1];var Qe=ks(),ot=a(Qe),gt=r(ot);{var kt=Ie=>{var ze=xs(),st=r(N(ze));oe(st,1,Ue,ve,(St,jt)=>{var Dt=tt();y(Ve=>g(Dt,`${Ve??""},`),[()=>e(jt).toString()],pe),s(St,Dt)}),s(Ie,ze)},We=Ie=>{var ze=tt();y(st=>g(ze,`${st??""},`),[()=>{var st;return(st=Ue())==null?void 0:st.toString()}],pe),s(Ie,ze)};k(gt,Ie=>{Array.isArray(Ue())?Ie(kt):Ie(We,!1)})}y(()=>g(ot,`"${Ke()??""}" : `)),s(ge,Qe)});var K=r(Se,2);K.textContent="},",y(()=>g(ye,`"${m??""}" :{`)),s(x,T)});var te=r(G,2);te.textContent='"actions" :[';var ne=r(te,2);oe(ne,1,()=>t().actions,ve,(x,m)=>{var T=Ds(),Z=a(T);y(()=>g(Z,`"${e(m).playType??""} ${e(m).title??""}",`)),s(x,T)});var C=r(ne,2);C.textContent="],";var j=r(C,2);j.textContent='"substituteEffects" :[';var L=r(j,2);oe(L,1,()=>t().substituteEffects,ve,(x,m)=>{var T=Cs(),Z=a(T);y(()=>g(Z,`"${e(m).title??""}",`)),s(x,T)});var ee=r(L,2);ee.textContent="],";var re=r(ee,2);re.textContent='"continuousEffects" :[';var he=r(re,2);oe(he,1,()=>t().continuousEffects,ve,(x,m)=>{var T=$s(),Z=a(T);y(()=>g(Z,`"${e(m).isStarted??""}",`)),s(x,T)});var f=r(he,2);f.textContent="],";var w=r(f,2);w.textContent='"procFilters" :[';var _=r(w,2);oe(_,1,()=>t().procFilterBundle.operators,ve,(x,m)=>{var T=Ss(),Z=a(T);y(ye=>g(Z,`"${ye??""} ${e(m).title??""} ${e(m).isEffective??""} ",`),[()=>e(m).isSpawnedBy.toString()],pe),s(x,T)});var h=r(_,2);h.textContent="],";var P=r(h,2);P.textContent='"numericStateOperators" :[';var q=r(P,2);oe(q,1,()=>t().numericOprsBundle.operators,ve,(x,m)=>{var T=Ms(),Z=a(T);y(ye=>g(Z,`"${ye??""} ${e(m).title??""} ${e(m).isEffective??""} ${e(m).isContinuous??""} ${e(m).targetState??""} ${e(m).targetStateGen??""} ",`),[()=>e(m).isSpawnedBy.toString()],pe),s(x,T)});var we=r(q,2);we.textContent="],";var be=r(we,2);be.textContent='"stateOperators" :[';var fe=r(be,2);oe(fe,1,()=>t().statusOperatorBundle.operators,ve,(x,m)=>{var T=js(),Z=a(T);y(ye=>g(Z,`"${ye??""} ${e(m).title??""} ${e(m).isEffective??""} ",`),[()=>e(m).isSpawnedBy.toString()],pe),s(x,T)});var X=r(fe,2);X.textContent="],";var J=r(X,2);J.textContent='"lastMoveLogRecord" :{';var W=r(J,2),xe=a(W),Le=r(W,2),Fe=a(Le),Ne=r(Le,2),Ye=a(Ne),Oe=r(Ne,2);Oe.textContent="},",y((x,m)=>{g(xe,`"movedBy":"${x??""}",`),g(Fe,`"movedAs":"${m??""}",`),g(Ye,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var x;return(x=t().moveLog.latestRecord.movedBy)==null?void 0:x.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],pe),s(ue,Y)};k(V,ue=>{v()==="Detail"?ue(ce):ue($e,!1)},!0)}s(B,I)};k(Q,B=>{v()==="Normal"?B(_e):B(Ce,!1)})}var ie=r(S,2),de=a(ie);{var Ee=B=>{var I=Us(),V=N(I);{var ce=b=>{var G=Bs();s(b,G)};k(V,b=>{t().origin.isOldVersion&&b(ce)})}var $e=r(V,2);{var ue=b=>{var G=Es();s(b,G)},Y=b=>{var G=Ys(),te=a(G),ne=r(te,2);{var C=j=>{var L=As(),ee=a(L);y(re=>{var he;yt(L,"href",re),g(ee,`⇒${((he=t())!=null&&he.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[c],pe),s(j,L)};k(ne,j=>{t()&&t().entityType==="Card"&&j(C)})}y(()=>yt(te,"href",`https://yugioh-wiki.net/index.php?${t().origin.wikiEncodedName}`)),s(b,G)};k($e,b=>{t().origin.isForTest?b(ue):b(Y,!1)})}s(B,I)};k(de,B=>{t()&&B(Ee)})}y((B,I,V)=>{Ae(D,`duel_card duel_card_info ${t().origin.kind??""} ${B??""} svelte-1uevs9j`),g(H,t().nm),g(A,I),g(le,V)},[()=>{var B;return(B=t().origin.monsterCategories)==null?void 0:B.join(" ")},()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],pe),s(z,D)};k(l,z=>{t()&&z(U)})}s(d,u),_t()}Pa(["click","contextmenu"]);var Ps=o('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),qs=o('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),Fs=o('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Hs(d,i){dt(i,!1);let t=He(i,"cell",12);const v=()=>{t(t())},p=U=>t().cardEntities.filter(z=>z.face===U);t().field.duel.view.onDuelUpdate.append(v),ct();var c=je(),u=N(c);{var l=U=>{var z=Fs(),D=a(z),n=a(D),R=a(n),F=r(n,2),H=a(F),O=r(D,2);oe(O,4,()=>["FaceUp","FaceDown"],ve,(E,A)=>{var se=je(),le=N(se);{var Be=$=>{var S=qs(),Q=a(S),_e=a(Q),Ce=r(Q,2);oe(Ce,1,()=>p(A).toSorted(Ja),ve,(ie,de)=>{var Ee=Ps(),B=a(Ee);const I=pe(()=>t().owner===t().field.duel.duelists.Below);Ut(B,{get entity(){return e(de)},get isVisibleForcibly(){return e(I)},isWideMode:!0,cardActionResolve:void 0}),s(ie,Ee)}),y(()=>g(_e,A==="FaceUp"?"表向き":"裏向き")),s($,S)};k(le,$=>{p(A).length&&$(Be)})}s(E,se)}),y(()=>{var E;g(R,(E=t().owner)==null?void 0:E.profile.name),g(H,t().cellType)}),s(U,z)};k(u,U=>{t().field.duel.view.infoBoardState==="CellInfo"&&U(l)})}s(d,c),_t()}var Is=o('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),Os=o('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function Rs(d,i){dt(i,!1);let t=He(i,"viewController",8),v=He(i,"userProfile",12);ct();var p=je(),c=N(p);{var u=l=>{var U=Os(),z=r(a(U),2),D=r(a(z),2);oe(D,1,()=>tr,ve,(n,R)=>{var F=Is(),H=a(F),O=a(H),E=r(H,2),A=a(E);y(()=>g(A,Za[e(R)])),er(O,()=>v().chainConfig[e(R)],se=>v(v().chainConfig[e(R)]=se,!0)),ke("change",O,()=>v().save()),s(n,F)}),s(l,U)};k(c,l=>{t().infoBoardState==="Config"&&l(u)})}s(d,p),_t()}function Ws(d,{from:i,to:t},v={}){var{delay:p=0,duration:c=S=>Math.sqrt(S)*120,easing:u=la}=v,l=getComputedStyle(d),U=l.transform==="none"?"":l.transform,[z,D]=l.transformOrigin.split(" ").map(parseFloat);z/=d.clientWidth,D/=d.clientHeight;var n=Ks(d),R=d.clientWidth/t.width/n,F=d.clientHeight/t.height/n,H=i.left+i.width*z,O=i.top+i.height*D,E=t.left+t.width*z,A=t.top+t.height*D,se=(H-E)*R,le=(O-A)*F,Be=i.width/t.width,$=i.height/t.height;return{delay:p,duration:typeof c=="function"?c(Math.sqrt(se*se+le*le)):c,easing:u,css:(S,Q)=>{var _e=Q*se,Ce=Q*le,ie=S+Q*Be,de=S+Q*$;return`transform: ${U} translate(${_e}px, ${Ce}px) scale(${ie}, ${de});`}}}function Ks(d){if("currentCSSZoom"in d)return d.currentCSSZoom;for(var i=d,t=1;i!==null;)t*=+getComputedStyle(i).zoom,i=i.parentElement;return t}var zs=o('<div class="chain_number svelte-lqu21u"> </div>'),Vs=o('<div class="duel_card_row svelte-lqu21u"> </div>'),Gs=o('<div class="appendix svelte-lqu21u"> </div>'),Xs=o('<div class="appendix_wrapper svelte-lqu21u"></div>'),Qs=o('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),Js=o("<div></div>");function Zs(d,i){dt(i,!1);let t=He(i,"duel",8),v=He(i,"position",8,"left");const p=-100,c=()=>v()==="left"?-100:100;let u=De([]),l=Promise.resolve(),U=Promise.resolve();const z=1e3,D=500,n=400,R=H=>{const O={...H};O.isKnown=H.chainBlockInfo.action.entity.controller.duelistType==="Player"||H.chainBlockInfo.action.entity.face==="FaceUp",O.chainBlockInfo.onStateChange.append(E=>{if(E==="done"||E==="failed"||E==="negated")return l=l.then(async()=>{const A=new Date().getTime()-O.chainBlockInfo.wasSpawnedAt.getTime();A<z&&await Lt(z-A),M(u,e(u).filter(se=>se.seq!==O.seq)),await Lt(D+n)}).then(),"RemoveMe";M(u,e(u))}),U=U.then(async()=>{M(u,[O,...e(u)].sort((E,A)=>ar.isSameChain(E.clock,A.clock)&&E.chainBlockInfo.action.isWithChainBlock&&A.chainBlockInfo.action.isWithChainBlock?A.clock.totalProcSeq-E.clock.totalProcSeq:E.clock.totalProcSeq-A.clock.totalProcSeq)),await Lt(300)}),l=l.then(()=>Lt(1e3))};t().chainBlockLog.onInsert.append(R),ct();var F=Js();oe(F,13,()=>e(u),H=>H.seq,(H,O)=>{var E=Qs();const A=pe(()=>{const{activator:V,action:ce,appendix:$e}=e(O).chainBlockInfo;return{activator:V,action:ce,appendix:$e}});var se=a(E),le=a(se);{var Be=V=>{var ce=zs(),$e=a(ce);y(()=>g($e,`チェーン：${e(O).chainBlockInfo.chainNumber??""}`)),s(V,ce)};k(le,V=>{e(O).chainBlockInfo.chainNumber&&V(Be)})}var $=r(le,2),S=a($),Q=r($,2),_e=a(Q);{var Ce=V=>{var ce=Vs(),$e=a(ce);y(()=>g($e,e(O).isKnown?e(A).action.entity.nm:"？？？")),s(V,ce)};k(_e,V=>{(e(A).action.entity.entityType==="Card"||e(A).action.entity.entityType==="Token")&&V(Ce)})}var ie=r(_e,2),de=a(ie),Ee=a(de),B=r(de,2);{var I=V=>{var ce=Xs();oe(ce,5,()=>e(A).appendix,ve,($e,ue)=>{var Y=Gs(),b=a(Y);y(()=>g(b,e(ue))),s($e,Y)}),s(V,ce)};k(B,V=>{e(A).appendix&&V(I)})}y((V,ce,$e)=>{Ae(E,`cut_in_row ${(!e(O).chainBlockInfo.chainNumber||e(O).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Ae(se,`cut_in_item cut_in_item_${V??""} cut_in_item_${e(O).chainBlockInfo.state??""} svelte-lqu21u`),Ae($,`duelist_name duelist_${V??""}_name svelte-lqu21u`),g(S,e(A).activator.profile.name),Ae(Q,`duel_card duel_card_${V??""} ${ce??""} ${(e(O).isKnown?e(A).action.entity.origin.kind:"")??""} ${e(A).action.entity.entityType??""}  svelte-lqu21u`),g(Ee,$e)},[()=>e(A).activator.seat.toLowerCase(),()=>e(O).isKnown?(e(A).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(A).action.toString()],pe),ae(3,se,()=>wr,()=>new Date().getTime()-e(O).chainBlockInfo.wasSpawnedAt.getTime()<z?{x:c(),duration:n}:{y:p,duration:n}),rr(E,()=>Ws,()=>({duration:D})),s(H,E)}),y(()=>Ae(F,`cut_in_container cut_in_container_${v()??""} svelte-lqu21u`)),s(d,F),_t()}const ei=Dr({duration:400});var ti=o('<div class="duel_desk_left v_flex svelte-1i63tk9"><!> <!> <!></div>'),ai=o('<button class="duel_field_header_message svelte-1i63tk9"> </button> <div class="duel_field_header_buttons svelte-1i63tk9"><button class="svelte-1i63tk9">サレンダー</button></div>',1),ri=o("<tr></tr>"),si=o('<table class="duel_field svelte-1i63tk9"><tbody class="svelte-1i63tk9"></tbody></table>'),ii=o('<button class="svelte-1i63tk9">OK</button>'),ni=o('<button class="svelte-1i63tk9">cancel</button>'),oi=o("<!> <!>",1),li=o('<button class="svelte-1i63tk9"> </button>'),vi=o('<div style="text-align: left;"><!> <!> <!></div>'),di=o('<div><!> <div class=" duel_desk_center v_flex svelte-1i63tk9"><div class="duel_field_header svelte-1i63tk9"><!></div> <div class="duel_field_body svelte-1i63tk9"><!></div> <div class="duel_field_footer svelte-1i63tk9"><!></div></div> <!></div> <div style="position:fixed;left:0;bottom:0"> </div> <!> <div><!></div>',1);function ci(d,i){dt(i,!1);let t=He(i,"duel",12),v=He(i,"userProfile",8),p=De(0),c=De(0),u=De([]),l=De([]),U=()=>{},z=De([]),D=De(),n=De(),R=De(()=>!1),F=De(!1);const H=_=>{U=_.resolve,M(z,_.dummyActionInfos.filter(h=>h.action.entity.entityType==="Duelist").filter(h=>h.action.entity.controller.seat==="Below")),M(D,void 0),M(n,void 0),M(l,[]),M(u,[]),M(F,!1),_.entitiesChoices&&(M(D,_.entitiesChoices),M(R,()=>{var h;return((h=_.entitiesChoices)==null?void 0:h.validator(e(u)))??!1}),M(F,_.entitiesChoices.cancelable),e(D).selectables.every(h=>h.cell.isPlayFieldCell&&h.getIndexInCell()===0||h.cell.cellType==="Hand"&&h.controller.duelistType==="Player"||h.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:_.entitiesChoices,chainBlockInfos:_.chainBlockInfos,cancelable:_.entitiesChoices.cancelable}).then(h=>{U({selectedEntities:h})})),_.cellsChoices&&(M(n,_.cellsChoices),M(R,()=>{var h;return((h=_.cellsChoices)==null?void 0:h.validator(e(l)))??!1}),M(F,_.cellsChoices.cancelable))};t().view.onWaitStart.append(H);const O=()=>{U=()=>{},M(n,void 0),M(D,void 0),M(l,[]),M(u,[]),M(R,()=>!1),M(F,!1)};t().view.onWaitEnd.append(O);let E=De(void 0),A=De("Normal");const se=({card:_,mode:h})=>{M(E,_),M(A,h??(e(E)===_||e(A)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(se);const le=()=>{t(t())};t().view.onDuelUpdate.append(le),t().log.onUpdate.append(le);const Be=()=>{e(D)&&e(D).validator(e(u))&&U({selectedEntities:e(u)}),e(n)&&e(n).validator(e(l))&&U({selectedCells:e(l)})},$=()=>{U({})},S=_=>{U({actionInfo:_})},Q=()=>{U({surrender:!0})};t().main();const _e=()=>e(p)<=1400?"compact":"wide";ct();var Ce=di(),ie=N(Ce),de=a(ie);{var Ee=_=>{var h=ti(),P=a(h);La(P,{get duelist(){return t().duelists.Above}});var q=r(P,2);Ns(q,{get entity(){return e(E)},get mode(){return e(A)}});var we=r(q,2);La(we,{get duelist(){return t().duelists.Below}}),s(_,h)};k(de,_=>{_e()==="wide"&&_(Ee)})}var B=r(de,2),I=a(B),V=a(I);{var ce=_=>{var h=ai(),P=N(h),q=a(P),we=r(P,2),be=a(we);y(()=>g(q,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),ke("click",P,()=>{t(t().view.infoBoardState="Log",!0)}),ke("click",be,Q),s(_,h)};k(V,_=>{t().isEnded||_(ce)})}var $e=r(I,2),ue=a($e);{var Y=_=>{var h=si(),P=a(h);oe(P,5,()=>t().field.cells,ve,(q,we,be)=>{var fe=ri();Ae(fe,`${`duel_desk_row_${be}`??""} svelte-1i63tk9`),oe(fe,5,()=>e(we),ve,(X,J,W)=>{Wr(X,{get view(){return t().view},row:be,column:W,get selectedEntities(){return e(u)},set selectedEntities(xe){M(u,xe)},get selectedCells(){return e(l)},set selectedCells(xe){M(l,xe)},$$legacy:!0})}),s(q,fe)}),s(_,h)};k(ue,_=>{t().clock.turn>0&&_(Y)})}var b=r($e,2),G=a(b);{var te=_=>{var h=oi(),P=N(h);{var q=fe=>{var X=ii();y(J=>X.disabled=J,[()=>!e(R)()],pe),ke("click",X,Be),s(fe,X)};k(P,fe=>{((e(D)&&e(D).qty)??(e(n)&&e(n).qty)??9999)>1&&fe(q)})}var we=r(P,2);{var be=fe=>{var X=ni();ke("click",X,$),s(fe,X)};k(we,fe=>{e(F)&&fe(be)})}s(_,h)},ne=_=>{var h=je(),P=N(h);oe(P,1,()=>e(z),ve,(q,we)=>{var be=li(),fe=a(be);y(()=>g(fe,e(we).action.title)),ke("click",be,()=>S(e(we))),s(q,be)}),s(_,h)};k(G,_=>{e(D)&&e(D).selectables.length||e(n)&&e(n).selectables?_(te):_(ne,!1)})}var C=r(B,2);{var j=_=>{var h=vi(),P=a(h);as(P,{get log(){return t().log}});var q=r(P,2);Hs(q,{get cell(){return t().view.infoBoardCell}});var we=r(q,2);Rs(we,{get userProfile(){return v()},get viewController(){return t().view}}),y(be=>Ae(h,`duel_desk_right duel_desk_right_${be??""}  svelte-1i63tk9`),[()=>t().view.infoBoardState.toLowerCase()],pe),ae(3,h,()=>me,()=>({duration:e(p)>1400?0:200,axis:"x"})),s(_,h)};k(C,_=>{(e(p)>1400||t().view.infoBoardState!=="Default")&&_(j)})}var L=r(ie,2),ee=a(L),re=r(L,2);sr(re,{get modalController(){return t().view.modalController}});var he=r(re,2),f=a(he);const w=pe(()=>_e()==="wide"?"right":"left");Zs(f,{get duel(){return t()},get position(){return e(w)}}),y((_,h)=>{Ae(ie,`flex duel_desk ${_??""}_mode svelte-1i63tk9`),g(ee,h),Ae(he,`cutin ${_??""}_mode svelte-1i63tk9`)},[_e,()=>t().clock.toFullString()],pe),Xt("innerWidth",_=>M(p,_)),Xt("innerHeight",_=>M(c,_)),s(d,Ce),_t()}var _i=o('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),ui=o('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),fi=o("<div></div>"),pi=o("<!> <!> <!> <!> <!>",1),yi=o('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),gi=o('<li class="deck_editor_item svelte-niobyr"><div role="listitem"><div class="svelte-niobyr"><div class="svelte-niobyr"> </div> <div style="display:flex" class="svelte-niobyr"><div class="svelte-niobyr"><!> <!> <!></div> <div style="flex-grow: 1; width:0.1rem" class="svelte-niobyr"></div> <div class="svelte-niobyr"><!></div></div></div></div> <button class="button_style_reset svelte-niobyr">+</button> <button class="button_style_reset svelte-niobyr">-</button></li>'),mi=o('<div class="deck_editor_card_kind svelte-niobyr"><div class="deck_editor_card_kind_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <ul class="svelte-niobyr"></ul></div>'),hi=o('<div class="deck_editor_deck_type svelte-niobyr"><div class="deck_editor_deck_type_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <!></div>'),bi=o('<div class="svelte-niobyr">読み込み中...</div>'),xi=o('<div class="deck_editor_card_list svelte-niobyr"><!></div>');function Na(d,i){dt(i,!1);let t=He(i,"allCardInfos",8),v=He(i,"deckCardInfos",12),p=He(i,"mode",8),c=He(i,"onAttention",8),u=He(i,"searchCondition",8,void 0);const l={Deck:["Monster","Spell","Trap"],ExtraDeck:["Monster"]},U={Deck:{Monster:[],Spell:[],Trap:[]},ExtraDeck:{Monster:[],Spell:[],Trap:[]}},z=$=>{var S;return(S=$.monsterCategories)!=null&&S.union(Qt).length?"ExtraDeck":"Deck"},D=$=>{Object.values(U).forEach(S=>Object.values(S).forEach(Q=>Q.reset())),$.filter(S=>S.kind!=="XyzMaterial").forEach(S=>{var _e;if(S.kind==="XyzMaterial")return;const Q=(_e=S.monsterCategories)!=null&&_e.union(Qt).length?"ExtraDeck":"Deck";U[Q][S.kind].push(S)}),Object.values(U).forEach(S=>Object.values(S).forEach(Q=>Q.sort(oa)))},n=p()==="List"?new Promise($=>{D(t()),$()}):Promise.resolve(),R=()=>(p()==="Deck"&&(D(v()),M(E,v().length)),U),F=($,S,Q)=>{v(v().filter(_e=>z(_e)!==S||_e.kind!==Q&&Q))},H=($,S)=>{try{if($.ctrlKey){v().push(S);return}const Q=v().filter(Ce=>Ce.name===S.name).length;if(Q>2)return;const _e=$.shiftKey?3-Q:1;if(_e<1)return;v().push(...Array(_e).fill(S))}finally{v().sort(oa),v(v())}},O=($,S)=>{let Q=0;v(v().filter(_e=>_e.name!==S.name?!0:(Q++,!$.shiftKey&&Q>1))),v().sort(oa)};let E=De(100);const A=()=>{e(E)>999||e(E)>t().length+v().length||(M(E,e(E)+100),Lt(100).then(A))},se=($,S,Q,_e)=>{if(S===0&&_e==="Monster"&&(M(E,100),Lt(100).then(A)),!u())return!0;if(!u().cardKinds.includes($.kind)||u().name.trim().length&&[$.name,...$.nameTags??[],...$.textTags??[]].every(ie=>!ie.includes(u().name))||!$.isImplemented&&!u().others.includes("implemented")||$.isForTest&&!u().others.includes("test")||$.isOldVersion&&!u().others.includes("oldVersion"))return!1;if($.kind==="Monster"){if($.attributes&&!u().monsterAttributes.union($.attributes).length||$.types&&!u().monsterTypes.union($.types).length)return!1;const Ce=$.level??$.rank??$.link;return Ct(u().starLowerBound)&&(Ce??0)<u().starLowerBound||Ct(u().starUpperBound)&&(Ce??0)>u().starUpperBound||Ct(u().atkLowerBound)&&($.attack??0)<u().atkLowerBound||Ct(u().atkUpperBound)&&($.attack??0)>u().atkUpperBound||Ct(u().defLowerBound)&&($.defense??0)<u().defLowerBound||Ct(u().defUpperBound)&&($.defense??0)>u().defUpperBound||Ct(u().atkPlusDef)&&(!Ct($.attack)||!Ct($.defense)||$.attack+$.defense!==u().atkPlusDef)||!$.monsterCategories?!1:$.monsterCategories.union(u().monsterCategories).length}if($.kind==="Spell")return $.spellCategory&&u().spellCategories.includes($.spellCategory);if($.kind==="Trap")return $.trapCategory&&u().trapCategories.includes($.trapCategory)};ct();var le=xi(),Be=a(le);vt(Be,()=>n,$=>{var S=bi();s($,S)},$=>{var S=je();const Q=pe(R);var _e=N(S);oe(_e,1,()=>nr,ve,(Ce,ie)=>{var de=hi();const Ee=pe(()=>Object.values(e(Q)[e(ie)]).flatMap(Y=>Y));var B=a(de),I=a(B),V=a(I),ce=r(I,2);{var $e=Y=>{var b=_i(),G=a(b);ke("click",G,te=>F(te,e(ie),void 0)),s(Y,b)};k(ce,Y=>{p()==="Deck"&&e(Ee).some(se)&&Y($e)})}var ue=r(B,2);oe(ue,1,()=>ca(e(Q)[e(ie)]).filter(Y=>l[e(ie)].includes(Y)),ve,(Y,b)=>{var G=mi();const te=pe(()=>e(Q)[e(ie)][e(b)].filter((...he)=>se(...he,e(b))));var ne=a(G),C=a(ne),j=a(C),L=r(C,2);{var ee=he=>{var f=ui(),w=a(f);ke("click",w,_=>F(_,e(ie),e(b))),s(he,f)};k(L,he=>{p()==="Deck"&&e(te).length&&he(ee)})}var re=r(ne,2);oe(re,5,()=>e(te),ve,(he,f,w)=>{var _=je(),h=N(_);{var P=q=>{var we=gi(),be=a(we),fe=a(be),X=a(fe),J=a(X),W=r(X,2),xe=a(W),Le=a(xe);{var Fe=K=>{var ge=pi(),Te=N(ge);{var Ke=We=>{var Ie=tt();y(()=>g(Ie,`★${e(f).level??""}`)),s(We,Ie)};k(Te,We=>{e(f).level&&We(Ke)})}var Ue=r(Te,2);{var Qe=We=>{var Ie=tt();y(()=>g(Ie,`☆${e(f).rank??""}`)),s(We,Ie)};k(Ue,We=>{e(f).rank&&We(Qe)})}var ot=r(Ue,2);oe(ot,1,()=>e(f).attributes??[],ve,(We,Ie)=>{var ze=fi();y(()=>Ae(ze,`monster_attr ${e(Ie)??""} svelte-niobyr`)),s(We,ze)});var gt=r(ot,2);oe(gt,1,()=>e(f).types??[],ve,(We,Ie)=>{var ze=tt();y(()=>g(ze,ea[e(Ie)])),s(We,ze)});var kt=r(gt,2);oe(kt,1,()=>e(f).monsterCategories??[],ve,(We,Ie)=>{var ze=tt();y(()=>g(ze,ta[e(Ie)])),s(We,ze)}),s(K,ge)};k(Le,K=>{e(f).kind==="Monster"&&K(Fe)})}var Ne=r(Le,2);{var Ye=K=>{var ge=tt();y(()=>g(ge,`${aa[e(f).spellCategory]??""}魔法`)),s(K,ge)};k(Ne,K=>{e(f).spellCategory&&K(Ye)})}var Oe=r(Ne,2);{var x=K=>{var ge=tt();y(()=>g(ge,`${ra[e(f).trapCategory]??""}罠`)),s(K,ge)};k(Oe,K=>{e(f).trapCategory&&K(x)})}var m=r(xe,4),T=a(m);{var Z=K=>{var ge=yi(),Te=N(ge),Ke=a(Te),Ue=r(Te,2),Qe=a(Ue);y(()=>{g(Ke,e(f).attack??"?"),g(Qe,e(f).defense??"?")}),s(K,ge)};k(T,K=>{e(f).kind==="Monster"&&K(Z)})}var ye=r(be,2),Se=r(ye,2);y(K=>{Ae(be,`${K??""} svelte-niobyr`),g(J,e(f).name),ye.disabled=!e(f).isImplemented,yt(ye,"title",e(f).isImplemented?"※shiftキー同時押しで一括投入":""),Se.disabled=!e(f).isImplemented,yt(Se,"title",e(f).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>{var K,ge;return`deck_editor_card duel_card ${e(f).kind} ${(ge=(K=e(f))==null?void 0:K.monsterCategories)==null?void 0:ge.join(" ")} ${e(f).isImplemented?"is_implemented":"is_not_implemented"}`}],pe),ke("mouseenter",be,()=>c()(e(f))),ke("click",ye,K=>H(K,e(f))),ke("click",Se,K=>O(K,e(f))),s(q,we)};k(h,q=>{w<e(E)&&q(P)})}s(he,_)}),y(()=>g(j,`${Fa[e(b)]??""}（${e(te).length??""} / ${e(Q)[e(ie)][e(b)].length??""}枚）`)),s(Y,G)}),y(Y=>g(V,`${ir[e(ie)]??""}（${Y??""} / ${e(Ee).length??""}枚）`),[()=>e(Ee).filter(se).length],pe),s(Ce,de)}),s($,S)}),s(d,le),_t()}var ki=o('<div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>'),wi=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),Di=o('<div></div> <div class="svelte-rccxcp"> </div>',1),Ci=o("<div> </div>"),$i=o('<span class="svelte-rccxcp">/</span> <div class="monster_defense svelte-rccxcp"> </div>',1),Si=o("<div> </div>"),Mi=o('<div class="duel_card_info_row svelte-rccxcp"><!> <!> <div style="flex-grow: 1;" class="svelte-rccxcp"></div> <div class="monster_attack svelte-rccxcp"> </div> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),ji=o('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Ti=o('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Bi=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※エラッタ前カードです</div></div>'),Ei=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),Ai=o('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),Yi=o('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <!></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!> <!></div></div>');function Ui(d,i){dt(i,!1);let t=He(i,"cardInfo",8,void 0);ct();var v=je(),p=N(v);{var c=u=>{var l=Yi(),U=a(l),z=a(U),D=a(z),n=a(D),R=r(z,2);{var F=B=>{var I=ki(),V=a(I),ce=a(V),$e=r(V,2),ue=a($e);y((Y,b)=>{g(ce,Y),g(ue,b)},[()=>"★".repeat(t().level||0),()=>"☆".repeat(t().rank||0)],pe),s(B,I)};k(R,B=>{t().kind==="Monster"&&B(F)})}var H=r(U,2),O=a(H);{var E=B=>{var I=wi(),V=N(I),ce=a(V),$e=a(ce),ue=a($e),Y=r(V,2),b=a(Y),G=a(b),te=r(b,2),ne=a(te);y(()=>{g(ue,t().pendulumDescription),g(G,`◀ ${t().pendulumScaleL??""}`),g(ne,`${t().pendulumScaleR??""} ▶`)}),s(B,I)};k(O,B=>{var I;(I=t().monsterCategories)!=null&&I.includes("Pendulum")&&B(E)})}var A=r(O,2);{var se=B=>{var I=Mi(),V=N(I),ce=a(V);{var $e=j=>{var L=Di(),ee=N(L),re=r(ee,2),he=a(re);y(()=>{Ae(ee,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),g(he,`${_a[t().attributes[0]]??""}属性`)}),s(j,L)};k(ce,j=>{t().attributes&&j($e)})}var ue=r(ce,2);{var Y=j=>{var L=Ci(),ee=a(L);y(()=>{Ae(L,`monster_cat ${t().types[0]??""} svelte-rccxcp`),g(ee,`${ea[t().types[0]]??""}${ua[t().types[0]]??""}族`)}),s(j,L)};k(ue,j=>{t().types&&j(Y)})}var b=r(ue,4),G=a(b),te=r(b,2);{var ne=j=>{var L=$i(),ee=r(N(L),2),re=a(ee);y(()=>g(re,t().defense??"?")),s(j,L)};k(te,j=>{var L;(L=t().monsterCategories)!=null&&L.includes("Link")||j(ne)})}var C=r(V,2);oe(C,5,()=>t().monsterCategories??[],ve,(j,L)=>{var ee=Si(),re=a(ee);y(()=>{Ae(ee,`monster_cat ${e(L)??""} svelte-rccxcp`),g(re,`${ta[e(L)]??""}${fa[e(L)]??""}`)}),s(j,ee)}),y(()=>g(G,t().attack??"?")),s(B,I)},le=B=>{var I=je(),V=N(I);{var ce=ue=>{var Y=ji(),b=r(a(Y),2),G=a(b);y(()=>g(G,`${aa[t().spellCategory]??""}魔法`)),s(ue,Y)},$e=ue=>{var Y=je(),b=N(Y);{var G=te=>{var ne=Ti(),C=r(a(ne),2),j=a(C);y(()=>g(j,`${ra[t().trapCategory]??""}罠`)),s(te,ne)};k(b,te=>{t().kind==="Trap"&&t().trapCategory&&te(G)},!0)}s(ue,Y)};k(V,ue=>{t().kind==="Spell"&&t().spellCategory?ue(ce):ue($e,!1)},!0)}s(B,I)};k(A,B=>{t().kind==="Monster"?B(se):B(le,!1)})}var Be=r(A,2),$=a(Be),S=a($),Q=a(S),_e=r(Be,2);{var Ce=B=>{var I=Bi();s(B,I)};k(_e,B=>{t().isOldVersion&&B(Ce)})}var ie=r(_e,2);{var de=B=>{var I=Ei();s(B,I)},Ee=B=>{var I=Ai(),V=a(I),ce=r(V,2),$e=a(ce);y(ue=>{yt(V,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),yt(ce,"href",ue),g($e,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>or(t())],pe),s(B,I)};k(ie,B=>{t().isForTest?B(de):B(Ee,!1)})}y(B=>{Ae(l,`duel_card duel_card_info ${t().kind??""} ${B??""} svelte-rccxcp`),g(n,t().name),g(Q,t().description)},[()=>{var B;return(B=t().monsterCategories)==null?void 0:B.join(" ")}],pe),s(u,l)};k(p,u=>{t()&&u(c)})}s(d,v),_t()}const Li={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class Ni{constructor(){Ze(this,"DefaultSeparator1","/");Ze(this,"DefaultSeparator2"," ");Ze(this,"DefaultSeparator3",":");Ze(this,"createDate",i=>{if(!i)return;const t=new Date(i);if(!isNaN(t.getTime()))return t});Ze(this,"createDateOr",(i,t)=>this.createDate(i)||t||new Date);Ze(this,"truncateDate",i=>{const t=i||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});Ze(this,"addDate",(i,t)=>{const v=this.createDateOr(i);return v.setDate(v.getDate()+t),v});Ze(this,"addMonth",(i,t)=>{const v=this.createDateOr(i);return v.setMonth(v.getMonth()+t),v});Ze(this,"addYear",(i,t)=>{const v=this.createDateOr(i);return v.setFullYear(v.getFullYear()+t),v});Ze(this,"getDayOfWeek",(i,t="dddd")=>{const v=this.createDate(i);return v?Li[v.getDay()][t]:""});Ze(this,"formatToYYYYMMDD",(i,t=this.DefaultSeparator1)=>{const v=this.createDate(i);if(!v)return"";const p=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2),u=("0"+v.getDate()).slice(-2);return p+t+c+t+u});Ze(this,"formatToYYYYMM",(i,t=this.DefaultSeparator1)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const p=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2);return p+t+c});Ze(this,"formatToHHMMSS",(i,t=this.DefaultSeparator3)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const p=v.getHours(),c=v.getMinutes(),u=v.getSeconds();return("0"+p).slice(-2)+t+("0"+c).slice(-2)+t+("0"+u).slice(-2)});Ze(this,"formatToHHMM",(i,t=this.DefaultSeparator3)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const p=("0"+v.getHours()).slice(-2),c=("0"+v.getMinutes()).slice(-2);return p+t+c});Ze(this,"formatToYYYYMMDD_HHMM",(i,t=this.DefaultSeparator1,v=this.DefaultSeparator2,p=this.DefaultSeparator3)=>{const c=this.createDate(i);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMM(c,p):""});Ze(this,"formatToYYYYMMDD_HHMMSS",(i,t=this.DefaultSeparator1,v=this.DefaultSeparator2,p=this.DefaultSeparator3)=>{const c=this.createDate(i);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMMSS(c,p):""})}}const mt=new Ni;Date.prototype.truncateDate=function(){return mt.truncateDate(this)};Date.prototype.getCloneOr=function(d){return mt.createDateOr(this,d)};Date.prototype.addDate=function(d){return mt.addDate(this,d)};Date.prototype.addMonth=function(d){return mt.addDate(this,d)};Date.prototype.addYear=function(d){return mt.addDate(this,d)};Date.prototype.getDayOfWeek=function(d="dddd"){return mt.getDayOfWeek(this,d)};Date.prototype.formatToYYYYMM=function(d){return mt.formatToYYYYMM(this,d)};Date.prototype.formatToYYYYMMDD=function(d){return mt.formatToYYYYMMDD(this,d)};Date.prototype.formatToYYYYMMDD_HHMM=function(d,i,t){return mt.formatToYYYYMMDD_HHMM(this,d,i,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(d,i,t){return mt.formatToYYYYMMDD_HHMMSS(this,d,i,t)};Date.prototype.formatToHHMM=function(d){return mt.formatToHHMM(this,d)};Date.prototype.formatToHHMMSS=function(d){return mt.formatToHHMMSS(this,d)};var Pi=o('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),qi=o('<ul class="deck_info_list svelte-2wdgc8"></ul>'),Fi=o('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),Hi=o('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),Ii=o('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),Oi=o('<button class="svelte-2wdgc8">Cancel</button>'),Ri=o('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function Wi(d,i){dt(i,!1);let t=He(i,"eventHolder",8),v=He(i,"args",8),p=He(i,"resolve",8),c=De(Promise.resolve([])),u=De();const l=()=>{M(u,new DataTransfer().files),M(c,Promise.resolve([]))},U=async F=>{F.preventDefault(),console.log("hoge",F)},z=async F=>{F.preventDefault(),F.dataTransfer&&n(F.dataTransfer.files)},D=()=>{n(e(u))},n=async F=>{if(!F.length)return;const H=[],O=[];for(const E of F)try{O.push(...await xt.createfromJson(E))}catch(A){A instanceof Error&&H.push(A.message)}if(H.length){console.log(...H);return}M(c,e(c).then(()=>O))},R=l;ct(),lr(d,{get eventHolder(){return t()},get args(){return v()},$$slots:{body:(F,H)=>{var O=Hi(),E=a(O);vt(E,()=>Rt,null,(A,se)=>{var le=je(),Be=N(le);vt(Be,()=>e(c),null,($,S)=>{var Q=je(),_e=N(Q);{var Ce=de=>{var Ee=qi();oe(Ee,5,()=>e(S),ve,(B,I)=>{var V=Pi(),ce=a(V),$e=a(ce),ue=r(ce,2),Y=a(ue),b=r(ue,2),G=a(b);y((te,ne,C)=>{g($e,e(I).name),g(Y,`${te??""}
                  /
                  ${ne??""}`),g(G,`最終使用日時 ： ${C??""}`)},[()=>e(I).cardNames.filter(te=>{var ne,C;return!((C=(ne=e(se).getCardInfo(te))==null?void 0:ne.monsterCategories)!=null&&C.union(Qt).length)}).length,()=>e(I).cardNames.filter(te=>{var ne,C;return(C=(ne=e(se).getCardInfo(te))==null?void 0:ne.monsterCategories)==null?void 0:C.union(Qt).length}).length,()=>e(I).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],pe),s(B,V)}),s(de,Ee)},ie=de=>{var Ee=Fi(),B=r(a(Ee),2),I=a(B);vr(I,()=>e(u),V=>M(u,V)),ke("change",I,D),ke("cancel",I,R),ke("drop",Ee,z),ke("dragover",Ee,U),s(de,Ee)};k(_e,de=>{e(S).length?de(Ce):de(ie,!1)})}s($,Q)}),s(A,le)}),s(F,O)},footer:(F,H)=>{var O=Ri(),E=a(O);vt(E,()=>e(c),null,(A,se)=>{var le=je(),Be=N(le);{var $=Q=>{var _e=Ii(),Ce=N(_e),ie=r(Ce,2),de=r(ie,2);y(()=>{Ce.disabled=e(se).length===0,ie.disabled=e(se).length===0}),ke("click",Ce,()=>p()({deckInfos:e(se),replaceAll:!1})),ke("click",ie,()=>p()({deckInfos:e(se),replaceAll:!0})),ke("click",de,R),s(Q,_e)},S=Q=>{var _e=je(),Ce=N(_e);{var ie=de=>{var Ee=Oi();ke("click",Ee,()=>p()(void 0)),s(de,Ee)};k(Ce,de=>{v().cancelable&&de(ie)},!0)}s(Q,_e)};k(Be,Q=>{e(se).length?Q($):Q(S,!1)})}s(A,le)}),s(F,O)}}}),_t()}const Zt=class Zt extends cr{constructor(i,t){super(i,...Object.values(t))}};Ze(Zt,"createModalController",i=>{const t={deckUploader:new _r({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new Zt(i,t),t)});let da=Zt;function Ki(d,i){dt(i,!1);let t=He(i,"modalController",8);ct(),dr(d,{get modalController(){return t()},children:(v,p)=>{var c=je(),u=N(c);{var l=U=>{Wi(U,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};k(u,U=>{t().deckUploader.state==="Shown"&&U(l)})}s(v,c)},$$slots:{default:!0}}),_t()}var zi=o('<label><input type="checkbox"> </label>'),Vi=o('<label><input type="checkbox"> </label>'),Gi=o('<label><input type="checkbox"> <div style="display: inline-block;"></div> </label>'),Xi=o('<label><input type="checkbox"> </label>'),Qi=o('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">モンスター</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">属性</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">種族</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">星攻守</button></div> <div class="svelte-xd4rv4"><div><span>星</span> <input type="number" min="0" max="13" style="width: 2.5rem;"> <span>～</span> <input type="number" min="0" max="13" style="width: 2.5rem;"></div> <div><span>攻</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;"> <span>～</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;"></div> <div><span>守</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;"> <span>～</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;"></div> <div><span>攻+守</span> <input type="number" min="0" max="10000" step="100" style="width: 4rem;"></div></div></div>',1),Ji=o('<label><input type="checkbox"> </label>'),Zi=o('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">魔法</button></div> <div class="svelte-xd4rv4"></div></div>'),en=o('<label><input type="checkbox"> </label>'),tn=o('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">罠</button></div> <div class="svelte-xd4rv4"></div></div>'),an=o('<label><input type="checkbox"> </label>'),rn=o("<div>カード情報読込中</div>"),sn=o("<option> </option>"),nn=o('<div class="svelte-xd4rv4"><a class="white_button svelte-xd4rv4" download="SVS_DeckInfos.json">ダウンロード</a></div>'),on=o('<div class="svelte-xd4rv4"></div>'),ln=o('<div class="svelte-xd4rv4"><a class="white_button svelte-xd4rv4" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),vn=o('<div class="svelte-xd4rv4"></div>'),dn=o('<div class="deck_editor_body_right_header svelte-xd4rv4"><div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">編集対象 <select></select></div> <div class="svelte-xd4rv4"></div> <div class="svelte-xd4rv4">新規名称 <input type="text"></div></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">基本操作</div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">デッキを保存</button></div> <div class="svelte-xd4rv4"></div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">デッキを複製</button></div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">DL/UL</div> <!> <!> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">アップロード</button></div></div></div> <!>',1),cn=o("<div>デッキ情報読込中</div>"),_n=o('<div class="deck_editor svelte-xd4rv4"><div class="deck_editor_header"></div> <div class="deck_editor_body svelte-xd4rv4"><div class="deck_editor_body_left svelte-xd4rv4"><div role="contentinfo"><div class="deck_editor_search_box_header svelte-xd4rv4"><div>検索条件</div> <div><button class="white_button svelte-xd4rv4">条件クリア</button></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">名称</button></div> <div class="svelte-xd4rv4"><input type="text" style="width:70%"> <span>※ルビには対応していません</span></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">種類</button></div> <div class="svelte-xd4rv4"></div></div> <!> <!> <!> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">その他</button></div> <div class="svelte-xd4rv4"></div></div></div> <!></div> <div class="deck_editor_body_center svelte-xd4rv4"><!></div> <div class="deck_editor_body_right svelte-xd4rv4"><!></div></div> <div class="footer svelte-xd4rv4"></div></div> <!>',1);function un(d,i){dt(i,!1);const t=[],v=[],p=[],c=[],u=[],l=[],U=[],z=da.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),D={name:"",cardKinds:ja.filter(x=>x!=="XyzMaterial"),monsterCategories:[...Ta],monsterAttributes:[...Ma],monsterTypes:[...Sa],spellCategories:$a.filter(x=>x!=="PendulumScale"),trapCategories:[...Ca],starLowerBound:0,starUpperBound:13,atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:["test","oldVersion","implemented"]},n=De(structuredClone(D));Me(n,e(n).others=["oldVersion"]);let R=De("SearchCondition");const F=async()=>{Me(n,e(n).name=""),Me(n,e(n).cardKinds=[]),Me(n,e(n).monsterCategories=[]),Me(n,e(n).monsterAttributes=[]),Me(n,e(n).monsterTypes=[]),Me(n,e(n).spellCategories=[]),Me(n,e(n).trapCategories=[]),Me(n,e(n).others=[]),Me(n,e(n).atkLowerBound=0),Me(n,e(n).atkUpperBound=5e3),Me(n,e(n).defLowerBound=0),Me(n,e(n).defUpperBound=5e3),Me(n,e(n).atkPlusDef=void 0)},H=x=>{x.forEach(m=>{Array.isArray(e(n)[m])&&Array.isArray(D[m])?Me(n,e(n)[m]=e(n)[m].length?[]:[...D[m]]):Me(n,e(n)[m]=D[m])})},O=(x,m,T)=>{Array.isArray(e(n)[m])&&Array.isArray(D[m])&&Me(n,e(n)[m]=[T])},E=async()=>{const m=(await e(le)).find(Z=>Z.id===e(se));if(!m)return;const T=await Rt;M(S,{...m,cardInfos:m.cardNames.map(Z=>{const ye=T.getCardInfo(Z);return ye===void 0&&console.error(Z),ye}).filter(Z=>Z!==void 0)})},A=()=>xt.getAllDeckInfo().then(x=>(M(se,(x.find(m=>m.lastUsedAt.getTime()===Math.max(...x.map(T=>T.lastUsedAt.getTime())))??x[0]).id),x));let se=De(-1),le=De(A()),Be=De(e(le).then(x=>xt.convertToObjectURL(x)));e(le).then(E);const $=()=>{M(le,A()),M(Be,e(le).then(x=>xt.convertToObjectURL(x))),E()};let S=De({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),Q=De(void 0),_e=0;const Ce=x=>{M(R,"CardDetail"),x.cardId!==void 0&&!x.description&&!x.pendulumDescription&&(_e=x.cardId,qa([x.cardId]).then(()=>{x.cardId===_e&&M(Q,x)})),M(Q,x)},ie=async()=>{const m=(await e(le)).find(T=>T.id===e(se));if(!m)throw new Error("illegal state");return m},de=async()=>{const x=await ie();await x.saveDeckInfo({...x,name:e(S).name,cardNames:e(S).cardInfos.map(m=>m.name),lastUsedAt:new Date}),$()},Ee=async()=>{(await xt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,e(S).cardInfos.map(m=>m.name))).saveDeckInfo(),$()},B=async x=>{const m=await ie();!x.shiftKey&&!confirm(`デッキ【${m.name}】を削除します。
よろしいですか？`)||(await m.delete(),$())},I=async()=>{const x=await z.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!x)return;const m=[];if(x.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;m.push(...(await e(le)).map(T=>T.id))}await Promise.all(x.deckInfos.map(T=>xt.createNewDeck(T.name,T.description,T.cardNames,T.lastUsedAt))),m.length&&await Promise.all(m.map(xt.remove)),$()};ct();var V=_n(),ce=N(V),$e=r(a(ce),2),ue=a($e),Y=a(ue),b=a(Y),G=r(a(b),2),te=a(G),ne=r(b,2),C=a(ne),j=a(C),L=r(C,2),ee=a(L),re=r(ne,2),he=a(re),f=a(he),w=r(he,2);oe(w,5,()=>ja.filter(x=>x!=="XyzMaterial"),ve,(x,m)=>{var T=zi(),Z=a(T),ye,Se=r(Z);y(()=>{ye!==(ye=e(m))&&(Z.value=(Z.__value=e(m))==null?"":e(m)),g(Se,` ${Fa[e(m)]??""}`)}),At(t,[],Z,()=>(e(m),e(n).cardKinds),K=>Me(n,e(n).cardKinds=K)),s(x,T)});var _=r(re,2);{var h=x=>{var m=Qi(),T=N(m),Z=a(T),ye=a(Z),Se=r(Z,2);oe(Se,5,()=>Ta,ve,(Pe,qe)=>{var Je=Vi(),Xe=a(Je),ut,ht=r(Xe);y(()=>{ut!==(ut=e(qe))&&(Xe.value=(Xe.__value=e(qe))==null?"":e(qe)),g(ht,` ${ta[e(qe)]??""}${fa[e(qe)]??""}`)}),At(v,[],Xe,()=>(e(qe),e(n).monsterCategories),ft=>Me(n,e(n).monsterCategories=ft)),s(Pe,Je)});var K=r(T,2),ge=a(K),Te=a(ge),Ke=r(ge,2);oe(Ke,5,()=>Ma,ve,(Pe,qe)=>{var Je=Gi(),Xe=a(Je),ut,ht=r(Xe,2),ft=r(ht);y(()=>{ut!==(ut=e(qe))&&(Xe.value=(Xe.__value=e(qe))==null?"":e(qe)),Ae(ht,`monster_attr ${e(qe)??""} svelte-xd4rv4`),g(ft,` ${_a[e(qe)]??""}`)}),At(p,[],Xe,()=>(e(qe),e(n).monsterAttributes),Tt=>Me(n,e(n).monsterAttributes=Tt)),s(Pe,Je)});var Ue=r(K,2),Qe=a(Ue),ot=a(Qe),gt=r(Qe,2);oe(gt,5,()=>Sa,ve,(Pe,qe)=>{var Je=Xi(),Xe=a(Je),ut,ht=r(Xe);y(()=>{ut!==(ut=e(qe))&&(Xe.value=(Xe.__value=e(qe))==null?"":e(qe)),g(ht,` ${ea[e(qe)]??""}
                  ${ua[e(qe)]??""}`)}),At(c,[],Xe,()=>(e(qe),e(n).monsterTypes),ft=>Me(n,e(n).monsterTypes=ft)),ke("dblclick",Je,ft=>O(ft,"monsterTypes",e(qe))),s(Pe,Je)});var kt=r(Ue,2),We=a(kt),Ie=a(We),ze=r(We,2),st=a(ze),St=r(a(st),2),jt=r(St,4),Dt=r(st,2),Ve=r(a(Dt),2),et=r(Ve,4),it=r(Dt,2),Re=r(a(it),2),Ge=r(Re,4),nt=r(it,2),at=r(a(nt),2);ke("click",ye,()=>H(["monsterCategories"])),ae(3,T,()=>me,()=>({delay:0,duration:100})),ke("click",Te,()=>H(["monsterAttributes"])),ae(3,K,()=>me,()=>({delay:0,duration:100})),ke("click",ot,()=>H(["monsterTypes"])),ae(3,Ue,()=>me,()=>({delay:0,duration:100})),ke("click",Ie,()=>H(["starLowerBound","starUpperBound","atkLowerBound","atkUpperBound","defLowerBound","defUpperBound","atkPlusDef"])),wt(St,()=>e(n).starLowerBound,Pe=>Me(n,e(n).starLowerBound=Pe)),wt(jt,()=>e(n).starUpperBound,Pe=>Me(n,e(n).starUpperBound=Pe)),wt(Ve,()=>e(n).atkLowerBound,Pe=>Me(n,e(n).atkLowerBound=Pe)),wt(et,()=>e(n).atkUpperBound,Pe=>Me(n,e(n).atkUpperBound=Pe)),wt(Re,()=>e(n).defLowerBound,Pe=>Me(n,e(n).defLowerBound=Pe)),wt(Ge,()=>e(n).defUpperBound,Pe=>Me(n,e(n).defUpperBound=Pe)),wt(at,()=>e(n).atkPlusDef,Pe=>Me(n,e(n).atkPlusDef=Pe)),ae(3,kt,()=>me,()=>({delay:0,duration:100})),s(x,m)};k(_,x=>{e(n).cardKinds.includes("Monster")&&x(h)})}var P=r(_,2);{var q=x=>{var m=Zi(),T=a(m),Z=a(T),ye=r(T,2);oe(ye,5,()=>$a.filter(Se=>Se!=="PendulumScale"),ve,(Se,K)=>{var ge=Ji(),Te=a(ge),Ke,Ue=r(Te);y(()=>{Ke!==(Ke=e(K))&&(Te.value=(Te.__value=e(K))==null?"":e(K)),g(Ue,` ${aa[e(K)]??""}`)}),At(u,[],Te,()=>(e(K),e(n).spellCategories),Qe=>Me(n,e(n).spellCategories=Qe)),s(Se,ge)}),ke("click",Z,()=>H(["spellCategories"])),ae(3,m,()=>me,()=>({delay:0,duration:100})),s(x,m)};k(P,x=>{e(n).cardKinds.includes("Spell")&&x(q)})}var we=r(P,2);{var be=x=>{var m=tn(),T=a(m),Z=a(T),ye=r(T,2);oe(ye,5,()=>Ca,ve,(Se,K)=>{var ge=en(),Te=a(ge),Ke,Ue=r(Te);y(()=>{Ke!==(Ke=e(K))&&(Te.value=(Te.__value=e(K))==null?"":e(K)),g(Ue,` ${ra[e(K)]??""}`)}),At(l,[],Te,()=>(e(K),e(n).trapCategories),Qe=>Me(n,e(n).trapCategories=Qe)),s(Se,ge)}),ke("click",Z,()=>H(["trapCategories"])),ae(3,m,()=>me,()=>({delay:0,duration:100})),s(x,m)};k(we,x=>{e(n).cardKinds.includes("Trap")&&x(be)})}var fe=r(we,2),X=a(fe),J=a(X),W=r(X,2);oe(W,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],ve,(x,m)=>{var T=an(),Z=a(T),ye,Se=r(Z);y(()=>{ye!==(ye=m.key)&&(Z.value=(Z.__value=m.key)==null?"":m.key),g(Se,` ${m.text??""}`)}),At(U,[],Z,()=>(m.key,e(n).others),K=>Me(n,e(n).others=K)),s(x,T)});var xe=r(Y,2);Ui(xe,{get cardInfo(){return e(Q)}});var Le=r(ue,2),Fe=a(Le);vt(Fe,()=>Rt,x=>{var m=rn();s(x,m)},(x,m)=>{const T=pe(()=>Object.values(e(m).dic));Na(x,{mode:"List",get allCardInfos(){return e(T)},onAttention:Ce,get searchCondition(){return e(n)},get deckCardInfos(){return e(S).cardInfos},set deckCardInfos(Z){Me(S,e(S).cardInfos=Z)},$$legacy:!0})});var Ne=r(Le,2),Ye=a(Ne);vt(Ye,()=>e(le),x=>{var m=cn();s(x,m)},(x,m)=>{var T=dn(),Z=N(T),ye=a(Z),Se=a(ye),K=r(a(Se));y(()=>{e(se),Ft(()=>{e(m)})}),oe(K,5,()=>e(m),ve,(Ve,et)=>{var it=sn(),Re={},Ge=a(it);y(()=>{Re!==(Re=e(et).id)&&(it.value=(it.__value=e(et).id)==null?"":e(et).id),g(Ge,e(et).name)}),s(Ve,it)});var ge=r(Se,4),Te=r(a(ge)),Ke=r(ye,4),Ue=r(a(Ke),2),Qe=a(Ue),ot=r(Ue,4),gt=a(ot),kt=r(ot,2),We=a(kt),Ie=r(Ke,2),ze=r(a(Ie),2);vt(ze,ie,Ve=>{var et=on();s(Ve,et)},(Ve,et)=>{var it=nn(),Re=a(it);y(Ge=>yt(Re,"href",Ge),[()=>xt.convertToObjectURL([e(et)])],pe),s(Ve,it)});var st=r(ze,2);vt(st,()=>e(Be),Ve=>{var et=vn();s(Ve,et)},(Ve,et)=>{var it=ln(),Re=a(it);y(()=>yt(Re,"href",e(et))),s(Ve,it)});var St=r(st,2),jt=a(St),Dt=r(Z,2);Na(Dt,{mode:"Deck",allCardInfos:[],onAttention:Ce,get deckCardInfos(){return e(S).cardInfos},set deckCardInfos(Ve){Me(S,e(S).cardInfos=Ve)},$$legacy:!0}),Ht(K,()=>e(se),Ve=>M(se,Ve)),ke("change",K,E),wt(Te,()=>e(S).name,Ve=>Me(S,e(S).name=Ve)),ke("click",Qe,de),ke("click",gt,Ee),ke("click",We,B),ke("click",jt,I),s(x,T)});var Oe=r(ce,2);Ki(Oe,{modalController:z}),y(()=>Ae(Y,`deck_editor_search_box ${(e(R)==="SearchCondition"?"":"minimum")??""} svelte-xd4rv4`)),ke("click",te,F),ke("click",j,()=>H(["name"])),wt(ee,()=>e(n).name,x=>Me(n,e(n).name=x)),ke("click",f,()=>H(["cardKinds"])),ke("click",J,()=>H(["others"])),ae(3,fe,()=>me,()=>({delay:0,duration:100})),ke("mouseenter",Y,()=>M(R,"SearchCondition")),s(d,V),_t()}const fn=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],pn=3;var yn=o('<input class="game_mode_radio svelte-sy4ydn" type="radio" name="game_mode"> <label> </label>',1),gn=o('<option class="svelte-sy4ydn"> </option>'),mn=o('<option class="svelte-sy4ydn"> </option>'),hn=o('<option class="svelte-sy4ydn"> </option>'),bn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_deck_selector" class="deck_selector svelte-sy4ydn"><option class="svelte-sy4ydn">デフォルト</option><!></select></div></td></tr>'),xn=o('<option class="svelte-sy4ydn"> </option>'),kn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">対戦相手：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select> <div class="svelte-sy4ydn"> </div></div></td></tr> <!> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">先攻後攻：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select></div></td></tr>',1),wn=o('<option class="svelte-sy4ydn"> </option>'),Dn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-sy4ydn">難易度：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="difficulty_selector" class="difficulty_selector svelte-sy4ydn"></select></div></td></tr>'),Cn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label class="config_row_label svelte-sy4ydn" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"></div></td></tr> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="deck_selector" class="deck_selector svelte-sy4ydn"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">duel start!</button></div></td></tr>',1),$n=o('<tr><td colspan="2" class="svelte-sy4ydn"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),Sn=o('<tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">deck edit</button></div></td></tr>'),Mn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="duelist_name" class="config_row_label duelist_name svelte-sy4ydn">名前：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><input id="duelist_name" class="duelist_name svelte-sy4ydn" type="text"></div></td></tr> <!> <!>',1),jn=o('<tr><td colspan="2" class="svelte-sy4ydn"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),Tn=o('<div class="app_body svelte-sy4ydn"><table class="config_table svelte-sy4ydn"><tbody><!></tbody></table></div>'),Bn=o('<span class="svelte-sy4ydn"> </span> <span class="svelte-sy4ydn"> </span>',1),En=o('<div class="result_title result_win svelte-sy4ydn">YOU WIN</div>'),An=o('<div class="result_title result_lose svelte-sy4ydn">YOU LOSE</div>'),Yn=o('<div class="result_title result_draw svelte-sy4ydn">DRAW</div>'),Un=o('<div class="twitter_share_button_wrapper svelte-sy4ydn"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-sy4ydn">X(twitter)でシェアする</a></div>'),Ln=o('<div class="result svelte-sy4ydn"><!> <div class="reason_of_end svelte-sy4ydn"> </div> <!> <div class="svelte-sy4ydn"><button class="white_button svelte-sy4ydn">TOPへ戻る</button></div></div>'),Nn=o('<main style="flex-direction: column; display :flex" class="svelte-sy4ydn"><div class="link link_left svelte-sy4ydn"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-sy4ydn">posfie(toggeter)</a></div> <div class="link link_right svelte-sy4ydn"><a class="a_button svelte-sy4ydn" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">現時点とこの先のこと</a></div> <!> <div class="footer card_summary svelte-sy4ydn"><!></div> <div class="footer debug_info svelte-sy4ydn"><span class="svelte-sy4ydn"> </span> <span class="user_agent_info svelte-sy4ydn"> </span> <span class="screen_info svelte-sy4ydn"> </span></div> <!></main>');function Pn(d,i){dt(i,!1);const t=new ur("stk_ygo_svelte",pn,fn);let v=De(0),p=De(0),c=De(),u=De("FtkChallenge"),l=De("None"),U=De(0),z=De(""),D=De(void 0);const n="https://setta238.github.io/stk_ygo_svelte/",R="遊戯王deそりてあ",F="ninja_no",H=fr.getOrCreateNew(t).then(f=>(M(u,Ba.includes(f.previousGameMode)?f.previousGameMode:"FtkChallenge"),Ee(f.previousNpcId),f)),O=f=>{var _;const w=f.find(h=>h.lastUsedAt.getTime()===Math.max(...f.map(P=>P.lastUsedAt.getTime())))??f[0];M(U,w.id),e(u)==="FtkChallenge"&&w.deckType!=="Preset"&&M(U,((_=Yt.find(h=>h.deckType==="Preset"))==null?void 0:_.id)??e(U))};let E=De(xt.getAllDeckInfo(t).then(f=>(Promise.all(f.filter(w=>!w.lastUsedAt).map(w=>{w.saveDeckInfo()})),O(f),f)));const A=async()=>{const f=e(U);let w=(await e(E)).find(h=>h.id===f)??(await le()).find(h=>h.id===f);w&&await w.updateTimestamp();let _=w;if(_||(_=Yt.find(h=>h.id===f)),!_)throw new Error("illegal state");return _},se=async()=>{(await H).save({previousGameMode:e(u)})},le=()=>(M(E,xt.getAllDeckInfo(t).then(f=>(O(f),f))),e(E)),Be=async()=>{(await e(E)).length||(await xt.prepareSampleDeck(),le())},$=async()=>{await Promise.all([se(),Be()]);const f=await A(),w=await H;let _=qt.find(q=>q.id===Number.MIN_SAFE_INTEGER)??qt[0],h=Yt.find(q=>q.id===Number.MIN_SAFE_INTEGER)??Yt[0],P="PlayFirst";e(u)==="FtkChallenge"?_=qt.filter(q=>q.npcType==="FtkChallenge").find(q=>q.difficulty===w.previousDifficulty)??_:e(u)==="Free"&&(_=qt.find(q=>q.id===w.previousNpcId)??_,h=Yt.slice(-1)[0],P=w.previousStartMode),_.npcType!=="FtkChallenge"&&w.previousNpcDeckId>-1?h=(await e(E)).find(q=>q.id===w.previousNpcDeckId)??h:h=Yt.find(q=>q.id===_.id)??h,M(c,new mr(w,"Player",f,[],_,"NPC",h,[],P)),e(c).onDuelEnd.append(()=>(M(c,e(c)),"RemoveMe"))},S=async()=>{await Promise.all([se(),Be()]),M(l,"DeckEdit")},Q=async f=>{await se(),f.key==="Enter"&&!f.repeat&&(await H).save()},_e=()=>{M(E,le()),M(c,void 0),M(l,"None")};let Ce=Date.now();const ie=f=>{Date.now()-Ce<200||(Ce=Date.now(),M(u,f),le())},de=f=>{Ee(Number(f.currentTarget.value))},Ee=f=>{var w;M(D,qt.find(_=>_.id===f)),M(z,((w=e(D))==null?void 0:w.description)??"")};Be(),ct();var B=Nn(),I=r(a(B),2),V=a(I),ce=r(I,2);{var $e=f=>{var w=je(),_=N(w);vt(_,()=>H,null,(h,P)=>{ci(h,{get duel(){return e(c)},get userProfile(){return e(P)}})}),s(f,w)},ue=f=>{var w=je(),_=N(w);{var h=q=>{un(q,{})},P=q=>{var we=Tn(),be=a(we),fe=a(be),X=a(fe);vt(X,()=>H,J=>{var W=jn();s(J,W)},(J,W)=>{var xe=Mn(),Le=N(xe),Fe=a(Le),Ne=a(Fe),Ye=r(Fe),Oe=a(Ye),x=a(Oe),m=r(Le,2);vt(m,()=>e(E),ye=>{var Se=$n();s(ye,Se)},(ye,Se)=>{var K=Cn(),ge=N(K),Te=a(ge),Ke=a(Te),Ue=r(Te),Qe=a(Ue);oe(Qe,5,()=>Ba,ve,(Re,Ge)=>{var nt=yn(),at=N(nt),Pe=r(at,2),qe=a(Pe);y(Je=>{yt(at,"id",`game_mode_radio_${Je??""}`),yr(at,e(Ge)),gr(at,e(u)===e(Ge)),Ae(Pe,`game_mode_tab_label game_mode_tab_${Je??""} svelte-sy4ydn`),yt(Pe,"for",`game_mode_radio_${Je??""}`),g(qe,e(Ge))},[()=>e(Ge).toLowerCase()],pe),ke("change",at,()=>ie(e(Ge))),s(Re,nt)});var ot=r(ge,2),gt=a(ot),kt=a(gt),We=r(gt),Ie=a(We),ze=a(Ie);y(()=>{e(U),Ft(()=>{e(u),e(Se)})}),oe(ze,5,()=>e(u)==="FtkChallenge"?Yt.filter(Re=>Re.deckType==="Preset"):e(Se),ve,(Re,Ge)=>{var nt=gn(),at={},Pe=a(nt);y(()=>{at!==(at=e(Ge).id)&&(nt.value=(nt.__value=e(Ge).id)==null?"":e(Ge).id),g(Pe,e(Ge).name)}),s(Re,nt)});var st=r(ot,2);{var St=Re=>{var Ge=kn(),nt=N(Ge),at=a(nt),Pe=a(at),qe=r(at),Je=a(qe),Xe=a(Je);y(()=>{e(W),Ft(()=>{})}),oe(Xe,5,()=>qt,ve,(bt,rt)=>{var pt=mn(),Et={},Pt=a(pt);y(()=>{Et!==(Et=e(rt).id)&&(pt.value=(pt.__value=e(rt).id)==null?"":e(rt).id),g(Pt,e(rt).name)}),s(bt,pt)});var ut=r(Xe,2),ht=a(ut),ft=r(nt,2);{var Tt=bt=>{var rt=bn(),pt=a(rt),Et=a(pt),Pt=r(pt),ha=a(Pt),ba=a(ha);y(()=>{e(W),Ft(()=>{e(Se)})});var sa=a(ba);sa.value=(sa.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Ha=r(sa);oe(Ha,1,()=>e(Se),ve,(ia,Vt)=>{var Gt=hn(),xa={},Ia=a(Gt);y(()=>{xa!==(xa=e(Vt).id)&&(Gt.value=(Gt.__value=e(Vt).id)==null?"":e(Vt).id),g(Ia,e(Vt).name)}),s(ia,Gt)}),ae(3,Et,()=>me,()=>({duration:200})),ae(3,pt,()=>me,()=>({duration:200})),Ht(ba,()=>e(W).previousNpcDeckId,ia=>e(W).previousNpcDeckId=ia),ae(3,ha,()=>me,()=>({duration:200})),ae(3,Pt,()=>me,()=>({duration:200})),ae(3,rt,()=>me,()=>({duration:200})),s(bt,rt)};k(ft,bt=>{var rt;((rt=e(D))==null?void 0:rt.npcType)!=="FtkChallenge"&&bt(Tt)})}var Bt=r(ft,2),Mt=a(Bt),Kt=a(Mt),zt=r(Mt),ga=a(zt),ma=a(ga);y(()=>{e(W),Ft(()=>{})}),oe(ma,5,()=>ca(Ea),ve,(bt,rt)=>{var pt=xn(),Et={},Pt=a(pt);y(()=>{Et!==(Et=e(rt))&&(pt.value=(pt.__value=e(rt))==null?"":e(rt)),g(Pt,Ea[e(rt)])}),s(bt,pt)}),y(()=>g(ht,`※${e(z)??""}`)),ae(3,Pe,()=>me,()=>({duration:200})),ae(3,at,()=>me,()=>({duration:200})),ke("change",Xe,de),Ht(Xe,()=>e(W).previousNpcId,bt=>e(W).previousNpcId=bt),ae(3,Je,()=>me,()=>({duration:200})),ae(3,qe,()=>me,()=>({duration:200})),ae(3,nt,()=>me,()=>({duration:200})),ae(3,Kt,()=>me,()=>({duration:200})),ae(3,Mt,()=>me,()=>({duration:200})),Ht(ma,()=>e(W).previousStartMode,bt=>e(W).previousStartMode=bt),ae(3,ga,()=>me,()=>({duration:200})),ae(3,zt,()=>me,()=>({duration:200})),ae(3,Bt,()=>me,()=>({duration:200})),s(Re,Ge)},jt=Re=>{var Ge=je(),nt=N(Ge);{var at=Pe=>{var qe=Dn(),Je=a(qe),Xe=a(Je),ut=r(Je),ht=a(ut),ft=a(ht);y(()=>{e(W),Ft(()=>{})}),oe(ft,5,()=>hr,ve,(Tt,Bt)=>{var Mt=wn(),Kt={},zt=a(Mt);y(()=>{Kt!==(Kt=e(Bt))&&(Mt.value=(Mt.__value=e(Bt))==null?"":e(Bt)),g(zt,e(Bt))}),s(Tt,Mt)}),ae(3,Xe,()=>me,()=>({duration:200})),ae(3,Je,()=>me,()=>({duration:200})),Ht(ft,()=>e(W).previousDifficulty,Tt=>e(W).previousDifficulty=Tt),ae(3,ht,()=>me,()=>({duration:200})),ae(3,ut,()=>me,()=>({duration:200})),ae(3,qe,()=>me,()=>({duration:200})),s(Pe,qe)};k(nt,Pe=>{e(u)==="FtkChallenge"&&Pe(at)},!0)}s(Re,Ge)};k(st,Re=>{e(u)==="Free"?Re(St):Re(jt,!1)})}var Dt=r(st,2),Ve=a(Dt),et=a(Ve),it=a(et);ae(3,Ke,()=>me,()=>({duration:200})),ae(3,Te,()=>me,()=>({duration:200})),ae(3,Qe,()=>me,()=>({duration:200})),ae(3,Ue,()=>me,()=>({duration:200})),ae(3,ge,()=>me,()=>({duration:200})),ae(3,kt,()=>me,()=>({duration:200})),ae(3,gt,()=>me,()=>({duration:200})),Ht(ze,()=>e(U),Re=>M(U,Re)),ae(3,Ie,()=>me,()=>({duration:200})),ae(3,We,()=>me,()=>({duration:200})),ae(3,ot,()=>me,()=>({duration:200})),ke("click",it,$),ae(3,et,()=>me,()=>({duration:200})),s(ye,K)});var T=r(m,2);{var Z=ye=>{var Se=Sn(),K=a(Se),ge=a(K),Te=a(ge);ke("click",Te,S),ae(3,ge,()=>me,()=>({duration:200})),ae(3,K,()=>me,()=>({duration:200})),ae(3,Se,()=>me,()=>({duration:200})),s(ye,Se)};k(T,ye=>{e(u)==="Free"&&ye(Z)})}ae(3,Ne,()=>me,()=>({duration:200})),ae(3,Fe,()=>me,()=>({duration:200})),wt(x,()=>e(W).name,ye=>e(W).name=ye),ke("keypress",x,Q),ae(3,Oe,()=>me,()=>({duration:200})),ae(3,Ye,()=>me,()=>({duration:200})),ae(3,Le,()=>me,()=>({duration:200})),s(J,xe)}),s(q,we)};k(_,q=>{e(l)==="DeckEdit"?q(h):q(P,!1)},!0)}s(f,w)};k(ce,f=>{e(c)?f($e):f(ue,!1)})}var Y=r(ce,2),b=a(Y);vt(b,()=>Rt,f=>{var w=tt("読み込み中");s(f,w)},(f,w)=>{var _=Bn(),h=N(_),P=a(h),q=r(h,2),we=a(q);y((be,fe,X)=>{g(P,`公式DB上のカード${be??""}枚`),g(we,`実装済カード（効果あり）${fe??""}枚 （効果なし）${X??""}枚`)},[()=>e(w).knmCount.toLocaleString(),()=>e(w).definitionCount.toLocaleString(),()=>e(w).nonDefinitionCount.toLocaleString()],pe),s(f,_)});var G=r(Y,2),te=a(G),ne=a(te),C=r(te,2),j=a(C),L=r(C,2),ee=a(L),re=r(G,2);{var he=f=>{var w=Ln(),_=a(w);{var h=W=>{var xe=je(),Le=N(xe);{var Fe=Ye=>{var Oe=En();s(Ye,Oe)},Ne=Ye=>{var Oe=je(),x=N(Oe);{var m=T=>{var Z=An();s(T,Z)};k(x,T=>{e(c).winner.seat==="Above"&&T(m)},!0)}s(Ye,Oe)};k(Le,Ye=>{e(c).winner.seat==="Below"?Ye(Fe):Ye(Ne,!1)})}s(W,xe)},P=W=>{var xe=Yn();s(W,xe)};k(_,W=>{e(c).winner?W(h):W(P,!1)})}var q=r(_,2),we=a(q),be=r(q,2);{var fe=W=>{var xe=Un(),Le=a(xe);y(()=>yt(Le,"href",`https://x.com/share?url=${n}&text=${e(c).twitterShareText??""}&hashtags=${R}&via=${F}`)),s(W,xe)};k(be,W=>{e(c).twitterShareText&&W(fe)})}var X=r(be,2),J=a(X);y(()=>g(we,e(c).reasonOfEnd)),ke("click",J,_e),ae(3,w,()=>kr,()=>({delay:200,duration:200})),s(f,w)};k(re,f=>{e(c)&&e(c).isEnded&&f(he)})}y(()=>{g(ne,"build at: 20260103_093546"),g(j,pr.text),g(ee,`w:${e(v)??""}px h:${e(p)??""}px`)}),Xt("innerWidth",f=>M(v,f)),Xt("innerHeight",f=>M(p,f)),ke("click",V,_e),s(d,B),_t()}br(Pn,{target:document.getElementById("app")});
