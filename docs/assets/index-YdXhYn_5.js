var Ja=Object.defineProperty;var Ta=_=>{throw TypeError(_)};var Za=(_,i,t)=>i in _?Ja(_,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):_[i]=t;var nt=(_,i,t)=>Za(_,typeof i!="symbol"?i+"":i,t),Ea=(_,i,t)=>i.has(_)||Ta("Cannot "+t);var ht=(_,i,t)=>(Ea(_,i,"read from private field"),t?t.call(_):i.get(_)),ia=(_,i,t)=>i.has(_)?Ta("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(_):i.set(_,t),ya=(_,i,t,d)=>(Ea(_,i,"write to private field"),d?d.call(_,t):i.set(_,t),t);import{s as ja,r as er,a as x,b as tr,l as ar,g as e,d as Ka,p as ct,c as Te,m as le,i as _t,t as l,e as a,f as C,h as f,j as ie,k as Le,n as ot,o as V,q as r,u as ut,v as he,D as rr,w as ke,x as U,y as s,z as _e,A as Xt,B as oe,C as fe,E as b,F as sr,G as lt,H as Gt,I as ir,J as Wa,K as ea,L as da,M as Ca,N as na,O as ha,P as It,Q as mt,R as xa,S as ma,T as Da,U as la,V as va,W as za,X as pa,Y as ga,Z as nr,_ as lr,$ as or,a0 as dr,a1 as vr,a2 as cr,a3 as _r,a4 as ca,a5 as Va,a6 as ta,a7 as Xa,a8 as _a,a9 as qt,aa as ur,ab as fr,ac as aa,ad as mr,ae as Tt,af as pr,ag as gr,ah as yr,ai as Aa,aj as Ba,ak as La,al as Ya,am as qa,an as Ua,ao as hr,ap as Bt,aq as Nt,ar as Ft,as as br,at as Ot,au as kr,av as wr,aw as Pa,ax as Zt,ay as Vt,az as Cr,aA as xr,aB as Dr,aC as Ha,aD as $r,aE as Sr,aF as Mr}from"../chunk/entity_proc_20260207_190401.js";import"../chunk/json_20260207_190401.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))d(m);new MutationObserver(m=>{for(const p of m)if(p.type==="childList")for(const c of p.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function t(m){const p={};return m.integrity&&(p.integrity=m.integrity),m.referrerPolicy&&(p.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?p.credentials="include":m.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function d(m){if(m.ep)return;m.ep=!0;const p=t(m);fetch(m.href,p)}})();const Tr=_=>_;function $a(_){const i=_-1;return i*i*i+1}function Na(_){const i=typeof _=="string"&&_.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[_,"px"]}function Er(_,{delay:i=0,duration:t=400,easing:d=Tr}={}){const m=+getComputedStyle(_).opacity;return{delay:i,duration:t,easing:d,css:p=>`opacity: ${p*m}`}}function jr(_,{delay:i=0,duration:t=400,easing:d=$a,x:m=0,y:p=0,opacity:c=0}={}){const o=getComputedStyle(_),q=+o.opacity,E=o.transform==="none"?"":o.transform,M=q*(1-c),[T,L]=Na(m),[n,X]=Na(p);return{delay:i,duration:t,easing:d,css:(P,y)=>`
			transform: ${E} translate(${(1-P)*T}${L}, ${(1-P)*n}${X});
			opacity: ${q-M*y}`}}function be(_,{delay:i=0,duration:t=400,easing:d=$a,axis:m="y"}={}){const p=getComputedStyle(_),c=+p.opacity,o=m==="y"?"height":"width",q=parseFloat(p[o]),E=m==="y"?["top","bottom"]:["left","right"],M=E.map(g=>`${g[0].toUpperCase()}${g.slice(1)}`),T=parseFloat(p[`padding${M[0]}`]),L=parseFloat(p[`padding${M[1]}`]),n=parseFloat(p[`margin${M[0]}`]),X=parseFloat(p[`margin${M[1]}`]),P=parseFloat(p[`border${M[0]}Width`]),y=parseFloat(p[`border${M[1]}Width`]);return{delay:i,duration:t,easing:d,css:g=>`overflow: hidden;opacity: ${Math.min(g*20,1)*c};${o}: ${g*q}px;padding-${E[0]}: ${g*T}px;padding-${E[1]}: ${g*L}px;margin-${E[0]}: ${g*n}px;margin-${E[1]}: ${g*X}px;border-${E[0]}-width: ${g*P}px;border-${E[1]}-width: ${g*y}px;min-${o}: 0`}}function Fa(_,i){for(const t in i)_[t]=i[t];return _}function Ar({fallback:_,...i}){const t=new Map,d=new Map;function m(c,o,q){const{delay:E=0,duration:M=j=>Math.sqrt(j)*30,easing:T=$a}=Fa(Fa({},i),q),L=c.getBoundingClientRect(),n=o.getBoundingClientRect(),X=L.left-n.left,P=L.top-n.top,y=L.width/n.width,g=L.height/n.height,F=Math.sqrt(X*X+P*P),Z=getComputedStyle(o),ye=Z.transform==="none"?"":Z.transform,A=+Z.opacity;return{delay:E,duration:typeof M=="function"?M(F):M,easing:T,css:(j,ce)=>`
			   opacity: ${j*A};
			   transform-origin: top left;
			   transform: ${ye} translate(${ce*X}px,${ce*P}px) scale(${j+(1-j)*y}, ${j+(1-j)*g});
		   `}}function p(c,o,q){return(E,M)=>(c.set(M.key,E),()=>{if(o.has(M.key)){const T=o.get(M.key);return o.delete(M.key),m(T,E,M)}return c.delete(M.key),_&&_(E,M,q)})}return[p(d,t,!1),p(t,d,!0)]}function Oa(_){return Object.prototype.toString.call(_)==="[object Date]"}function Br(_){return _}function ba(_){const i=_-1;return i*i*i+1}function ka(_,i){if(_===i||_!==_)return()=>_;const t=typeof _;if(t!==typeof i||Array.isArray(_)!==Array.isArray(i))throw new Error("Cannot interpolate values of different type");if(Array.isArray(_)){const d=i.map((m,p)=>ka(_[p],m));return m=>d.map(p=>p(m))}if(t==="object"){if(!_||!i)throw new Error("Object cannot be null");if(Oa(_)&&Oa(i)){const p=_.getTime(),o=i.getTime()-p;return q=>new Date(p+q*o)}const d=Object.keys(i),m={};return d.forEach(p=>{m[p]=ka(_[p],i[p])}),p=>{const c={};return d.forEach(o=>{c[o]=m[o](p)}),c}}if(t==="number"){const d=i-_;return m=>_+m*d}return()=>i}var Ut,ra,oa,Qt;const Sa=class Sa{constructor(i,t={}){ia(this,Ut,ja(void 0));ia(this,ra,ja(void 0));ia(this,oa);ia(this,Qt,null);ht(this,Ut).v=ht(this,ra).v=i,ya(this,oa,t)}static of(i,t){const d=new Sa(i(),t);return er(()=>{d.set(i())}),d}set(i,t){var T;x(ht(this,ra),i);let{delay:d=0,duration:m=400,easing:p=Br,interpolate:c=ka}={...ht(this,oa),...t};if(m===0)return(T=ht(this,Qt))==null||T.abort(),x(ht(this,Ut),i),Promise.resolve();const o=tr.now()+d;let q,E=!1,M=ht(this,Qt);return ya(this,Qt,ar(L=>{if(L<o)return!0;if(!E){E=!0;const X=ht(this,Ut).v;q=c(X,i),typeof m=="function"&&(m=m(X,i)),M==null||M.abort()}const n=L-o;return n>m?(x(ht(this,Ut),i),!1):(x(ht(this,Ut),q(p(n/m))),!0)})),ht(this,Qt).promise}get current(){return e(ht(this,Ut))}get target(){return e(ht(this,ra))}set target(i){this.set(i)}};Ut=new WeakMap,ra=new WeakMap,oa=new WeakMap,Qt=new WeakMap;let ua=Sa;var Lr=l('<div class="phase_display svelte-1boxe40"><span class="svelte-1boxe40"> </span> </div>'),Yr=l('<div class="lifepoint_display svelte-1boxe40"><div class="svelte-1boxe40"> </div> <div class="svelte-1boxe40"> </div></div>'),qr=(_,i,t)=>i(e(t)),Ur=l('<div class="svelte-1boxe40"><button class="phase_button svelte-1boxe40"> </button></div>'),Pr=l("<div><!></div>"),Hr=l('<div class="svelte-1boxe40"><!></div>'),Nr=l("<div><!></div>"),Fr=l('<div class="config_button_wrapper svelte-1boxe40"><button id="config_button" class="svelte-1boxe40">⚙</button></div>'),Or=l("<!> <!> <!> <!>",1),Ir=l('<div style="position: absolute;" class="card_animation_receiver svelte-1boxe40"><!></div>'),Rr=l('<div style="position: absolute; top:0rem" class="svelte-1boxe40">｛効果対象｝</div>'),Kr=l('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Wr=l(" <!> 】",1),zr=l('<div style="position: absolute; bottom:0rem" class="svelte-1boxe40"> <!></div>'),Vr=l("<!> <!>",1),Xr=l('<div class="badge svelte-1boxe40"> </div>'),Gr=l('<div class="card_animation_receiver svelte-1boxe40"><!></div>'),Qr=l("<!> <!> <!> <!>",1),Jr=l('<td><div role="listitem"><!></div></td>');function Zr(_,i){ct(i,!1);let t=Te(i,"view",12),d=Te(i,"row",8),m=Te(i,"column",8),p=Te(i,"selectedEntities",28,()=>[]),c=Te(i,"selectedCells",28,()=>[]),o=le(t().getCell(d(),m())),q=le(new ua(e(o).field.duel.duelists.Above.lp,{duration:400,easing:ba})),E=le(new ua(e(o).field.duel.duelists.Below.lp,{duration:400,easing:ba}));const M=()=>{x(o,t().getCell(d(),m())),he(q,e(q).target=e(o).field.duel.duelists.Above.lp),he(E,e(E).target=e(o).field.duel.duelists.Below.lp)};e(o).onUpdate.append(M),t().onDuelUpdate.append(M),t().modalController.onUpdate.append(M);let T,L=le([]),n=()=>console.log("hoge"),X,P=le([]),y=le(!1),g=le(!1),F=!1;const Z=D=>{var N,O;x(ee,[]),p().reset(),T=D.activator,n=D.resolve,x(L,D.dummyActionInfos),x(P,D.chainBlockInfos.flatMap(R=>R.selectedEntities).getDistinct()),X=D.entitiesChoices,x(y,!1),x(g,((N=D.cellsChoices)==null?void 0:N.selectables.includes(e(o)))??!1),F=e(g)&&((O=D.cellsChoices)==null?void 0:O.qty)===1,M()};t().onWaitStart.append(Z);const ye=()=>{T=void 0,x(L,[]),n=()=>{console.log("hoge")},X=void 0,x(P,[]),x(y,!1),x(g,!1),F=!1};t().onWaitEnd.append(ye);let A=le(!1),j=[];const ce=D=>{j=D.filter(N=>N.dests.includes(e(o))),x(A,j.length>0),M()},Ee=()=>{j=[],x(A,!1),M()};t().onDragStart.append(ce),t().onDragEnd.append(Ee);const[De,de]=_i;let ee=le([]);const Ae=D=>{if(T=void 0,e(o)===D.to||e(o).entities.includes(D.entity)){x(ee,[...e(ee),D]);const N=D.resolve;x(o,e(o)),setTimeout(()=>{x(ee,e(ee).filter(O=>O!==D)),D.count++,D.count>1&&N()},600)}};t().onAnimation.append(Ae);const Ce=D=>{n({phaseChange:D})},H=()=>e(o).isStackCell&&e(o).entities.flatMap(D=>D.actions).filter(D=>e(L).map(N=>N.action.seq).some(N=>N===D.seq)).length>0,Y=D=>{var N;if(((N=D.target)==null?void 0:N.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),F)n({selectedCells:[e(o)]});else if(e(g))x(y,!e(y)),c(e(y)?[...c(),e(o)]:c().filter(O=>O!==e(o)));else if(e(o).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(o),!0),t().requireUpdate();const O=e(o).entities.flatMap(G=>G.actions).map(G=>G.seq),R=e(L).filter(G=>O.includes(G.action.seq));if(R.length){if(!T)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:T,dummyActionInfos:R,cancelable:!0}).then(G=>{G&&n({actionInfo:G})});return}}t().requireUpdate(),console.info(e(o),se(...e(o).visibleEntities))},Q=D=>{D.preventDefault(),D.dataTransfer&&(D.dataTransfer.dropEffect="move")},me=D=>{D.preventDefault(),console.info("drop",D,e(A),j),D.dataTransfer&&(D.dataTransfer.dropEffect="move");try{if(e(A)&&j){if(j.length===1){const N=j[0];n({actionInfo:{...N,dest:e(o)}})}else if(j.length>1){if(!T)throw new rr("想定されない状態");e(o).field.duel.view.modalController.terminateAll(),e(o).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:T,dummyActionInfos:j.map(N=>({...N,dest:e(o)})),cancelable:!1}).then(N=>{n({actionInfo:N})})}}}finally{t().removeDraggingActions()}},se=(...D)=>{if(t().waitMode==="Animation")return"Disabled";if(X&&X.selectables.find(O=>D.find(R=>O===R)))return"Selectable";if(!e(L)||e(L).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(O=>O.state==="Shown"))return"Disabled";const N=e(L).filter(O=>D.includes(O.action.entity));return N.length===0?"Disabled":e(o).isStackCell||N[0].action.entity!==D[0]?"Clickable":N.some(O=>O.dests.length)?"Draggable":"Clickable"};_t();var te=Jr(),K=a(te);K.__click=Y;var S=a(K);{var B=D=>{var N=ke(),O=U(N);{var R=G=>{var ue=ke(),xe=U(ue);{var k=u=>{var $=Lr(),J=a($),z=a(J),pe=s(J,1,!0);f((ve,ne)=>{b(z,ve),b(pe,ne)},[()=>String(e(o).field.duel.clock.turn).padStart(2,"0"),()=>e(o).field.duel.phase.toUpperCase()],ie),r(u,$)},v=u=>{var $=ke(),J=U($);{var z=ve=>{var ne=Yr(),ae=a(ne),Be=a(ae),re=s(ae,2),Re=a(re);f((Ne,Ke)=>{b(Be,Ne),b(Re,Ke)},[()=>Math.floor(e(q).current),()=>Math.floor(e(E).current)],ie),r(ve,ne)},pe=ve=>{var ne=ke(),ae=U(ne);{var Be=re=>{var Re=ke(),Ne=U(Re);{var Ke=ze=>{var Ge=ke(),it=U(Ge);{var qe=we=>{var je=ke(),Ve=U(je);_e(Ve,1,()=>t().duel.nextPhaseList,fe,(Xe,Ze)=>{var et=Ur(),st=a(et);st.__click=[qr,Ce,Ze];var pt=a(st);f(ft=>b(pt,ft),[()=>e(Ze).toUpperCase()],ie),r(Xe,et)}),r(we,je)};C(it,we=>{t().duel.isEnded||we(qe)})}r(ze,Ge)};C(Ne,ze=>{t().waitMode==="Free"&&ze(Ke)})}r(re,Re)};C(ae,re=>{e(o).column===5&&re(Be)},!0)}r(ve,ne)};C(J,ve=>{e(o).column===3?ve(z):ve(pe,!1)},!0)}r(u,$)};C(xe,u=>{e(o).column===1?u(k):u(v,!1)})}r(G,ue)};C(O,G=>{e(o).row===3&&G(R)})}r(D,N)},W=D=>{var N=ke(),O=U(N);{var R=ue=>{var xe=Or();const k=ie(()=>e(ee).find(ne=>ne.to===e(o)));var v=U(xe);{var u=ne=>{var ae=Pr(),Be=a(ae);Xt(Be,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),f(()=>Le(ae,`card_animation_receiver ${e(o).cellType??""} svelte-1boxe40`)),oe(1,ae,()=>de,()=>({key:e(k).entity.seq})),r(ne,ae)};C(v,ne=>{e(k)&&e(k).index==="Top"&&ne(u)})}var $=s(v,2);_e($,1,()=>e(o).visibleEntities,fe,(ne,ae)=>{var Be=ke(),re=U(Be);{var Re=Ne=>{var Ke=Hr(),ze=a(Ke);const Ge=ie(()=>se(e(ae))),it=ie(()=>e(L).filter(qe=>qe.action.entity===e(ae)));Xt(ze,{get entity(){return e(ae)},get state(){return e(Ge)},get dummyActionInfos(){return e(it)},cardActionResolve:void 0,get selectedList(){return p()},set selectedList(qe){p(qe)},$$legacy:!0}),oe(2,Ke,()=>De,()=>({key:e(ae).seq})),r(Ne,Ke)};C(re,Ne=>{e(ee).every(Ke=>Ke.entity.seq!==e(ae).seq)&&Ne(Re)})}r(ne,Be)});var J=s($,2);{var z=ne=>{var ae=Nr(),Be=a(ae);Xt(Be,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),f(()=>Le(ae,`card_animation_receiver ${e(o).cellType??""} svelte-1boxe40`)),oe(1,ae,()=>de,()=>({key:e(k).entity.seq})),r(ne,ae)};C(J,ne=>{e(k)&&e(k).index!=="Top"&&ne(z)})}var pe=s(J,2);{var ve=ne=>{var ae=Fr();r(ne,ae)};C(pe,ne=>{e(o).owner.seat==="Below"&&ne(ve)})}r(ue,xe)},G=ue=>{var xe=Qr();const k=ie(()=>e(ee).find(ae=>ae.to===e(o)));var v=U(xe);{var u=ae=>{var Be=Ir(),re=a(Be);Xt(re,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),oe(1,Be,()=>de,()=>({key:e(k).entity.seq})),r(ae,Be)};C(v,ae=>{e(k)&&e(k).index!=="Top"&&ae(u)})}var $=s(v,2);{var J=ae=>{var Be=Vr(),re=U(Be);_e(re,1,()=>e(o).visibleEntities.map((Ke,ze)=>({index:ze,entity:Ke})).toReversed(),fe,(Ke,ze)=>{var Ge=ke(),it=U(Ge);{var qe=we=>{var je=Kr();const Ve=ie(()=>!e(o).isStackCell&&e(ze).index===0?se(...e(o).visibleEntities):void 0);var Xe=U(je);{var Ze=ft=>{var Dt=Rr();r(ft,Dt)};C(Xe,ft=>{e(P).includes(e(ze).entity)&&ft(Ze)})}var et=s(Xe,2),st=a(et);const pt=ie(()=>e(ze).index===0?e(L).filter(ft=>e(o).visibleEntities.includes(ft.action.entity)):void 0);Xt(st,{get entity(){return e(ze).entity},get state(){return e(Ve)},get dummyActionInfos(){return e(pt)},cardActionResolve:void 0,get selectedList(){return p()},set selectedList(ft){p(ft)},$$legacy:!0}),f(()=>Le(et,`duel_card_wrapper ${(e(ze).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1boxe40`)),oe(2,et,()=>De,()=>({key:e(ze).entity.seq})),r(we,je)};C(it,we=>{e(ee).every(je=>je.entity.seq!==e(ze).entity.seq)&&we(qe)})}r(Ke,Ge)});var Re=s(re,2);{var Ne=Ke=>{var ze=zr(),Ge=a(ze),it=s(Ge);_e(it,1,()=>Gt(e(o).visibleEntities[0].status.maxCounterQty),fe,(qe,we)=>{var je=Wr(),Ve=U(je),Xe=s(Ve);{var Ze=et=>{var st=lt();f(()=>b(st,`/${e(o).visibleEntities[0].status.maxCounterQty[e(we)]??""}`)),r(et,st)};C(Xe,et=>{(e(o).visibleEntities[0].status.maxCounterQty[e(we)]??9999)<100&&et(Ze)})}f((et,st)=>b(Ve,`【
              ${et??""}${st??""} `),[()=>sr(e(we)),()=>e(o).visibleEntities[0].counterHolder.getQty(e(we))],ie),r(qe,je)}),f(()=>b(Ge,`【${e(o).visibleEntities[0].battlePositionName??""}】 `)),r(Ke,ze)};C(Re,Ke=>{e(o).visibleEntities[0].battlePosition&&Ke(Ne)})}r(ae,Be)};C($,ae=>{e(o).visibleEntities.length>0&&ae(J)})}var z=s($,2);{var pe=ae=>{var Be=Xr(),re=a(Be);f(()=>b(re,e(o).visibleEntities.length)),r(ae,Be)};C(z,ae=>{e(o).isStackCell&&ae(pe)})}var ve=s(z,2);{var ne=ae=>{var Be=Gr(),re=a(Be);Xt(re,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),oe(1,Be,()=>de,()=>({key:e(k).entity.seq})),r(ae,Be)};C(ve,ae=>{e(k)&&e(k).index==="Top"&&ae(ne)})}r(ue,xe)};C(O,ue=>{e(o).cellType==="Hand"?ue(R):ue(G,!1)},!0)}r(D,N)};C(S,D=>{e(o).isDisabledCell?D(B):D(W,!1)})}f(D=>{Le(te,`${`duel_field_cell duel_field_cell_${e(o).cellType} ${e(o).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1boxe40`),ot(te,"colspan",e(o).cellType==="Hand"?7:1),Le(K,`${D??""} svelte-1boxe40`)},[()=>`duel_field_cell_inner_box ${e(o).cellType} ${e(A)?"can_accept_drop":""} ${H()?"can_action":""} ${e(y)?"is_selected":e(g)?"is_selectable":""} `],ie),V("dragover",K,Q),V("drop",K,me),r(_,te),ut()}Ka(["click"]);const es=(_,i,t=void 0,d="!!!circular reference!!!")=>{let m=[];return JSON.stringify(_,(p,c)=>{if(typeof c=="object"){if(m.indexOf(c)>-1)return d;m.push(c)}let o=c;if(i&&(o=i(p,c)),typeof o=="function")return o.toString();if(o!==c&&typeof o=="object"){if(m.indexOf(o)>-1)return d;m.push(o)}return o},t)};var ts=l('<div class="title svelte-14z6bdh"> </div>'),as=l('<div class="title svelte-14z6bdh"> </div>'),rs=l('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),ss=l('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),is=l("<div><!> <!></div>"),ns=l('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),ls=l("<div><!> <!></div>"),os=l("<div><!> <!></div>"),ds=l('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function vs(_,i){ct(i,!1);let t=le(void 0),d=Te(i,"log",8),m,p=le([]);const c=()=>{const M=((m==null?void 0:m.seq)??-1)+1;d().records.slice(M).forEach(T=>{if(!m){x(p,[[[[T]]]]),m=T;return}if(!e(p)[T.clock.turn]){he(p,e(p)[T.clock.turn]=[[[T]]]),m=T;return}if(!e(p)[T.clock.turn][T.clock.phaseSeq]){he(p,e(p)[T.clock.turn][T.clock.phaseSeq]=[[T]]),m=T;return}if(m.clock.chainSeq===T.clock.chainSeq&&m.clock.chainBlockSeq===T.clock.chainBlockSeq&&m.duelist===T.duelist){e(p)[T.clock.turn][T.clock.phaseSeq].slice(-1)[0].push(T),m=T;return}e(p)[T.clock.turn][T.clock.phaseSeq].push([T]),m=T}),x(p,e(p)),ir().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};d().onUpdate.append(c),d().duel.view.onDuelUpdate.append(c),c(),_t();var o=ke(),q=U(o);{var E=M=>{var T=ds(),L=s(a(T),2);_e(L,5,()=>e(p),fe,(n,X)=>{var P=os(),y=a(P);{var g=Z=>{var ye=ts(),A=a(ye);f(()=>b(A,`ターン：${e(X)[0][0][0].clock.turn??""}`)),r(Z,ye)};C(y,Z=>{e(X)[0][0][0].clock.turn>0&&Z(g)})}var F=s(y,2);_e(F,1,()=>e(X),fe,(Z,ye)=>{var A=ls(),j=a(A);{var ce=De=>{var de=as(),ee=a(de);f(()=>b(ee,e(ye)[0][0].clock.period.name)),r(De,de)};C(j,De=>{e(ye)[0][0].clock.turn>0&&De(ce)})}var Ee=s(j,2);_e(Ee,1,()=>e(ye),fe,(De,de)=>{var ee=ns();const Ae=ie(()=>{var te;return((te=e(de).find(K=>K.chainNumber!==void 0))==null?void 0:te.chainNumber)??0});var Ce=a(ee),H=a(Ce),Y=a(H),Q=s(H,2);{var me=te=>{var K=rs(),S=a(K);f(()=>b(S,`チェーン：${e(Ae)??""}`)),r(te,K)};C(Q,te=>{e(Ae)&&te(me)})}var se=s(Ce,2);_e(se,1,()=>e(de),fe,(te,K)=>{var S=is(),B=a(S);{var W=R=>{var G=lt();f(()=>b(G,e(K).text)),r(R,G)},D=R=>{var G=ke(),ue=U(G);{var xe=v=>{var u=lt();f(($,J,z)=>b(u,`移動：${$??""} ${J??""} ⇒ ${z??""}`),[()=>{var $;return($=e(K).mainEntity)==null?void 0:$.toString()},()=>{var $;return($=e(K).from)==null?void 0:$.toString()},()=>{var $;return($=e(K).to)==null?void 0:$.toString()}],ie),r(v,u)},k=v=>{var u=ke(),$=U(u);{var J=pe=>{var ve=lt();f((ne,ae)=>b(ve,`生成：${ne??""} void ⇒ ${ae??""}`),[()=>{var ne;return(ne=e(K).mainEntity)==null?void 0:ne.toString()},()=>{var ne;return(ne=e(K).to)==null?void 0:ne.toString()}],ie),r(pe,ve)},z=pe=>{var ve=ke(),ne=U(ve);{var ae=re=>{var Re=lt();f((Ne,Ke)=>b(Re,`消滅：${Ne??""} ${Ke??""} ⇒ void`),[()=>{var Ne;return(Ne=e(K).mainEntity)==null?void 0:Ne.toString()},()=>{var Ne;return(Ne=e(K).from)==null?void 0:Ne.toString()}],ie),r(re,Re)},Be=re=>{var Re=lt();f(()=>b(Re,e(K).text)),r(re,Re)};C(ne,re=>{e(K).type==="EntityDisappear"?re(ae):re(Be,!1)},!0)}r(pe,ve)};C($,pe=>{e(K).type==="EntityAppear"?pe(J):pe(z,!1)},!0)}r(v,u)};C(ue,v=>{e(K).type==="EntityMove"?v(xe):v(k,!1)},!0)}r(R,G)};C(B,R=>{e(K).type==="ChainBlockHeader"?R(W):R(D,!1)})}var N=s(B,2);{var O=R=>{var G=ss(),ue=a(G);f(xe=>ot(ue,"href",xe),[()=>window.URL.createObjectURL(new Blob([es(e(K).error,(xe,k)=>["pool","bundles","duel"].includes(xe)||typeof k=="function"?void 0:k,4)],{type:"text/plain"}))],ie),r(R,G)};C(N,R=>{e(K).error&&R(O)})}f(R=>Le(S,`duel_log_record duel_log_record_${R??""} svelte-14z6bdh`),[()=>e(K).type.toSnakeCase()],ie),r(te,S)}),f(()=>{var te,K,S;Le(ee,`duel_log_block_duelist duel_log_block_duelist_${((te=e(de)[0].duelist)==null?void 0:te.seat)??"system"} svelte-14z6bdh`),Le(H,`duelist ${((K=e(de)[0].duelist)==null?void 0:K.seat)??""} svelte-14z6bdh`),b(Y,((S=e(de)[0].duelist)==null?void 0:S.profile.name)||"SYSTEM")}),r(De,ee)}),f(()=>Le(A,`duel_log_block_phase duel_log_block_phase_${e(ye)[0][0].clock.period.key??""} svelte-14z6bdh`)),r(Z,A)}),f(()=>Le(P,`duel_log_block_turn duel_log_block_turn_${e(X)[0][0][0].clock.turn??""} svelte-14z6bdh`)),r(n,P)}),Wa(L,n=>x(t,n),()=>e(t)),r(M,T)};C(q,M=>{(d().duel.view.infoBoardState==="Log"||d().duel.view.infoBoardState==="Default")&&M(E)})}r(_,o),ut()}var cs=l("<div><div> </div> <div> </div></div>");function Ia(_,i){ct(i,!1);let t=Te(i,"duelist",12),d=le(0),m=le();const p=async()=>{const L=t().lp-e(d);if(!e(m)||Math.abs(L)<10){x(d,t().lp),e(m)&&(e(m)(),x(m,void 0));return}x(d,e(d)+Math.floor(Math.random()*L)),await ea(100),p()},c=()=>{t(t()),!e(m)&&t().lp!==e(d)&&new Promise(L=>{x(m,L),Math.abs(t().lp-e(d)),p()})};t().duel.log.onUpdate.append(c),p(),_t();var o=cs(),q=a(o),E=a(q),M=s(q,2),T=a(M);f(L=>{Le(o,`duelist duelist_${L??""} svelte-1sy3trd`),Le(q,`duelist_name duelist_${L??""}_name svelte-1sy3trd`),b(E,t().profile.name),Le(M,`duelist_lp ${(e(m)?"vibration":"")??""} svelte-1sy3trd`),b(T,e(d))},[()=>t().seat.toLowerCase()],ie),r(_,o),ut()}const _s=(_,i,t)=>(i(i()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),us=(_,i,t)=>(i(i()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var fs=l('<div class="svelte-1uevs9j"> </div>'),ms=l('<div class="svelte-1uevs9j"> </div>'),ps=l('<div class="link_arrow_emoji svelte-1uevs9j"> </div>'),gs=l('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),ys=l('<div></div> <div class="svelte-1uevs9j"> </div>',1),hs=l("<div> </div>"),bs=l('<span class="svelte-1uevs9j">/</span> <div class="monster_defense svelte-1uevs9j"> </div>',1),ks=l("<div> </div>"),ws=l('<div class="duel_card_info_row svelte-1uevs9j"><!> <!> <div style="flex-grow: 1;" class="svelte-1uevs9j"></div> <div class="monster_attack svelte-1uevs9j"> </div> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),Cs=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),xs=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),Ds=l("<!> <!>",1),$s=l('<pre class="description svelte-1uevs9j"> </pre>'),Ss=l('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),Ms=l('<pre class="description svelte-1uevs9j"> </pre>'),Ts=l('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),Es=l('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),js=l('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),As=l("[ <!> ],",1),Bs=l('<div class="svelte-1uevs9j"> <!></div>'),Ls=l('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),Ys=l('<div class="svelte-1uevs9j"> </div>'),qs=l('<div class="svelte-1uevs9j"> </div>'),Us=l('<div class="svelte-1uevs9j"> </div>'),Ps=l('<div class="svelte-1uevs9j"> </div>'),Hs=l('<div class="svelte-1uevs9j"> </div>'),Ns=l('<div class="svelte-1uevs9j"> </div>'),Fs=l('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Os=l('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Is=l('<div class="svelte-1uevs9j">※テスト用カードです</div>'),Rs=l('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),Ks=l('<a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a>'),Ws=l('<div class="duel_card_info_links svelte-1uevs9j"><!> <!> <a target="_blank" rel="noopener noreferrer" title="google" class="svelte-1uevs9j">⇒google検索</a></div>'),zs=l("<!> <!>",1),Vs=l('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><!> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Xs(_,i){ct(i,!1);let t=Te(i,"entity",8),d=Te(i,"mode",12,"Normal"),m=le(new Promise(()=>{}));const p=()=>{var M,T;let E=t()&&t().entityType==="Card"?t().origin.cardId:(T=(M=t())==null?void 0:M.parent)==null?void 0:T.origin.cardId;return E??!1?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${E}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:""};da(()=>(It(t()),ha),()=>{x(m,na.then(async E=>{if(t().origin.description||t().origin.pendulumDescription||t().origin.wikiEncodedName)return t().origin;const M=E.getCardInfo(t().origin.name);if(M)return M.cardId!==void 0&&!M.description&&!M.pendulumDescription&&await ha([M.cardId]),M}))}),Ca(),_t();var c=ke(),o=U(c);{var q=E=>{var M=Vs();M.__click=[_s,d,t],M.__contextmenu=[us,d,t];var T=a(M),L=a(T),n=a(L),X=a(n),P=s(L,2),y=a(P);{var g=H=>{var Y=fs(),Q=a(Y);f(me=>b(Q,me),[()=>"★".repeat(t().lvl)],ie),r(H,Y)},F=H=>{var Y=ke(),Q=U(Y);{var me=te=>{var K=ms(),S=a(K);f(B=>b(S,B),[()=>"☆".repeat(t().rank)],ie),r(te,K)},se=te=>{var K=ke(),S=U(K);{var B=W=>{var D=ps(),N=a(D);f(O=>b(N,O),[()=>t().origin.linkArrowKeys.map(O=>za[O].emoji).join("")],ie),r(W,D)};C(S,W=>{t().origin.linkArrowKeys&&W(B)},!0)}r(te,K)};C(Q,te=>{t().rank&&t().rank>0?te(me):te(se,!1)},!0)}r(H,Y)};C(y,H=>{t().lvl&&t().lvl>0?H(g):H(F,!1)})}var Z=s(y,2),ye=a(Z),A=s(P,2);{var j=H=>{var Y=Ds(),Q=U(Y);{var me=S=>{var B=gs(),W=a(B),D=a(W),N=s(W,2),O=a(N);f(()=>{b(D,`◀ ${t().psL??""}`),b(O,`${t().psR??""} ▶`)}),r(S,B)};C(Q,S=>{var B;(B=t().origin.monsterCategories)!=null&&B.includes("Pendulum")&&S(me)})}var se=s(Q,2);{var te=S=>{var B=ws(),W=U(B),D=a(W);_e(D,1,()=>t().attr,fe,(k,v)=>{var u=ys(),$=U(u),J=s($,2),z=a(J);f(()=>{Le($,`monster_attr ${e(v)??""} svelte-1uevs9j`),b(z,`${xa[e(v)]??""}属性`)}),r(k,u)});var N=s(D,2);_e(N,1,()=>t().types,fe,(k,v)=>{var u=hs(),$=a(u);f(()=>{Le(u,`monster_cat ${e(v)??""} svelte-1uevs9j`),b($,`${ma[e(v)]??""}${Da[e(v)]??""}族`)}),r(k,u)});var O=s(N,4),R=a(O),G=s(O,2);{var ue=k=>{var v=bs(),u=s(U(v),2),$=a(u);f(()=>b($,t().def??"?")),r(k,v)};C(G,k=>{var v;(v=t().status.monsterCategories)!=null&&v.includes("Link")||k(ue)})}var xe=s(W,2);_e(xe,5,()=>t().status.monsterCategories??[],fe,(k,v)=>{var u=ks(),$=a(u);f(()=>{Le(u,`monster_cat ${e(v)??""} svelte-1uevs9j`),b($,`${la[e(v)]??""}${va[e(v)]??""}`)}),r(k,u)}),f(()=>b(R,t().atk??"?")),r(S,B)},K=S=>{var B=ke(),W=U(B);{var D=O=>{var R=Cs(),G=s(a(R),2),ue=a(G);f(()=>b(ue,`${pa[t().status.spellCategory]??""}魔法`)),r(O,R)},N=O=>{var R=ke(),G=U(R);{var ue=xe=>{var k=xs(),v=s(a(k),2),u=a(v);f(()=>b(u,`${ga[t().status.trapCategory]??""}罠`)),r(xe,k)};C(G,xe=>{t().kind==="Trap"&&t().status.trapCategory&&xe(ue)},!0)}r(O,R)};C(W,O=>{t().kind==="Spell"&&t().status.spellCategory?O(D):O(N,!1)},!0)}r(S,B)};C(se,S=>{t().kind==="Monster"?S(te):S(K,!1)})}r(H,Y)};C(A,H=>{d()!=="Debug"&&H(j)})}var ce=s(T,2),Ee=a(ce);{var De=H=>{var Y=Ts(),Q=U(Y);{var me=K=>{var S=Ss(),B=a(S);mt(B,()=>e(m),W=>{var D=lt('"読み込み中"');r(W,D)},(W,D)=>{var N=$s(),O=a(N);f(()=>{var R;return b(O,(R=e(D))==null?void 0:R.pendulumDescription)}),r(W,N)}),r(K,S)};C(Q,K=>{var S;(S=t().status.monsterCategories)!=null&&S.includes("Pendulum")&&K(me)})}var se=s(Q,2),te=a(se);mt(te,()=>e(m),K=>{var S=lt('"読み込み中"');r(K,S)},(K,S)=>{var B=Ms(),W=a(B);f(()=>{var D;return b(W,(D=e(S))==null?void 0:D.description)}),r(K,B)}),r(H,Y)},de=H=>{var Y=ke(),Q=U(Y);{var me=te=>{var K=ke(),S=U(K);{var B=W=>{var D=js(),N=s(a(D),2);_e(N,5,()=>t().actions,fe,(O,R)=>{var G=ke();const ue=ie(()=>e(R).actionCountUpperBound),xe=ie(()=>e(R).actionCount);var k=U(G);{var v=u=>{var $=Es(),J=a($),z=a(J),pe=s(J,2),ve=a(pe),ne=s(pe,4),ae=a(ne);f(()=>{b(z,e(R).title),b(ve,e(xe)),b(ae,e(ue))}),r(u,$)};C(k,u=>{e(ue)!==void 0&&e(xe)!==void 0&&u(v)})}r(O,G)}),r(W,D)};C(S,W=>{t().actions.some(D=>D.actionCountUpperBoundKey)&&W(B)})}r(te,K)},se=te=>{var K=Fs(),S=a(K),B=a(S);_e(B,0,()=>["info","status"],fe,(qe,we)=>{var je=Ls(),Ve=U(je),Xe=a(Ve),Ze=s(Ve,2);_e(Ze,1,()=>Object.entries(t()[we]),fe,(st,pt)=>{let ft=()=>e(pt)[0],Dt=()=>e(pt)[1];var Rt=Bs(),Pt=a(Rt),Kt=s(Pt);{var sa=$t=>{var Et=As(),h=s(U(Et));_e(h,1,Dt,fe,(w,I)=>{var ge=lt();f(Ye=>b(ge,`${Ye??""},`),[()=>e(I).toString()],ie),r(w,ge)}),r($t,Et)},Wt=$t=>{var Et=lt();f(h=>b(Et,`${h??""},`),[()=>{var h;return(h=Dt())==null?void 0:h.toString()}],ie),r($t,Et)};C(Kt,$t=>{Array.isArray(Dt())?$t(sa):$t(Wt,!1)})}f(()=>b(Pt,`"${ft()??""}" : `)),r(st,Rt)});var et=s(Ze,2);et.textContent="},",f(()=>b(Xe,`"${we??""}" :{`)),r(qe,je)});var W=s(B,2);W.textContent='"actions" :[';var D=s(W,2);_e(D,1,()=>t().actions,fe,(qe,we)=>{var je=Ys(),Ve=a(je);f(()=>b(Ve,`"${e(we).playType??""} ${e(we).title??""}",`)),r(qe,je)});var N=s(D,2);N.textContent="],";var O=s(N,2);O.textContent='"substituteEffects" :[';var R=s(O,2);_e(R,1,()=>t().substituteEffects,fe,(qe,we)=>{var je=qs(),Ve=a(je);f(()=>b(Ve,`"${e(we).title??""}",`)),r(qe,je)});var G=s(R,2);G.textContent="],";var ue=s(G,2);ue.textContent='"continuousEffects" :[';var xe=s(ue,2);_e(xe,1,()=>t().continuousEffects,fe,(qe,we)=>{var je=Us(),Ve=a(je);f(()=>b(Ve,`"${e(we).isStarted??""}",`)),r(qe,je)});var k=s(xe,2);k.textContent="],";var v=s(k,2);v.textContent='"procFilters" :[';var u=s(v,2);_e(u,1,()=>t().procFilterBundle.operators,fe,(qe,we)=>{var je=Ps(),Ve=a(je);f(Xe=>b(Ve,`"${Xe??""} ${e(we).title??""} ${e(we).isEffective??""} ",`),[()=>e(we).isSpawnedBy.toString()],ie),r(qe,je)});var $=s(u,2);$.textContent="],";var J=s($,2);J.textContent='"numericStateOperators" :[';var z=s(J,2);_e(z,1,()=>t().numericOprsBundle.operators,fe,(qe,we)=>{var je=Hs(),Ve=a(je);f(Xe=>b(Ve,`"${Xe??""} ${e(we).title??""} ${e(we).isEffective??""} ${e(we).isContinuous??""} ${e(we).targetState??""} ${e(we).targetStateGen??""} ",`),[()=>e(we).isSpawnedBy.toString()],ie),r(qe,je)});var pe=s(z,2);pe.textContent="],";var ve=s(pe,2);ve.textContent='"stateOperators" :[';var ne=s(ve,2);_e(ne,1,()=>t().statusOperatorBundle.operators,fe,(qe,we)=>{var je=Ns(),Ve=a(je);f(Xe=>b(Ve,`"${Xe??""} ${e(we).title??""} ${e(we).isEffective??""} ",`),[()=>e(we).isSpawnedBy.toString()],ie),r(qe,je)});var ae=s(ne,2);ae.textContent="],";var Be=s(ae,2);Be.textContent='"lastMoveLogRecord" :{';var re=s(Be,2),Re=a(re),Ne=s(re,2),Ke=a(Ne),ze=s(Ne,2),Ge=a(ze),it=s(ze,2);it.textContent="},",f((qe,we)=>{b(Re,`"movedBy":"${qe??""}",`),b(Ke,`"movedAs":"${we??""}",`),b(Ge,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var qe;return(qe=t().moveLog.latestRecord.movedBy)==null?void 0:qe.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],ie),r(te,K)};C(Q,te=>{d()==="Detail"?te(me):te(se,!1)},!0)}r(H,Y)};C(Ee,H=>{d()==="Normal"?H(De):H(de,!1)})}var ee=s(ce,2),Ae=a(ee);{var Ce=H=>{var Y=zs(),Q=U(Y);{var me=S=>{var B=Os();r(S,B)};C(Q,S=>{t().origin.isOldVersion&&S(me)})}var se=s(Q,2);{var te=S=>{var B=Is();r(S,B)},K=S=>{var B=Ws(),W=a(B);{var D=R=>{var G=Rs();const ue=ie(()=>t().entityType==="Card"?t():t().parent);var xe=a(G);f(k=>{var v;ot(G,"href",k),b(xe,`⇒${((v=e(ue))!=null&&v.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[p],ie),r(R,G)};C(W,R=>{var G;t()&&(t().entityType==="Card"||((G=t().parent)==null?void 0:G.entityType)==="Card")&&R(D)})}var N=s(W,2);mt(N,()=>e(m),null,(R,G)=>{var ue=ke(),xe=U(ue);{var k=v=>{var u=Ks();f(()=>ot(u,"href",`https://yugioh-wiki.net/index.php?${e(G).wikiEncodedName}`)),r(v,u)};C(xe,v=>{e(G)&&e(G).wikiEncodedName&&v(k)})}r(R,ue)});var O=s(N,2);f(()=>ot(O,"href",`https://www.google.com/search?q=遊戯王 ${t().origin.name}`)),r(S,B)};C(se,S=>{t().origin.isForTest?S(te):S(K,!1)})}r(H,Y)};C(Ae,H=>{t()&&H(Ce)})}f((H,Y)=>{Le(M,`duel_card duel_card_info ${t().origin.kind??""} ${H??""} svelte-1uevs9j`),b(X,t().nm),b(ye,Y)},[()=>{var H;return(H=t().origin.monsterCategories)==null?void 0:H.join(" ")},()=>"★".repeat(t().lvl||0)],ie),r(E,M)};C(o,E=>{t()&&E(q)})}r(_,c),ut()}Ka(["click","contextmenu"]);var Gs=l('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),Qs=l('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),Js=l('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Zs(_,i){ct(i,!1);let t=Te(i,"cell",12);const d=()=>{t(t())},m=q=>t().cardEntities.filter(E=>E.face===q);t().field.duel.view.onDuelUpdate.append(d),_t();var p=ke(),c=U(p);{var o=q=>{var E=Js(),M=a(E),T=a(M),L=a(T),n=s(T,2),X=a(n),P=s(M,2);_e(P,4,()=>["FaceUp","FaceDown"],fe,(y,g)=>{var F=ke(),Z=U(F);{var ye=A=>{var j=Qs(),ce=a(j),Ee=a(ce),De=s(ce,2);_e(De,1,()=>m(g).toSorted(nr),fe,(de,ee)=>{var Ae=Gs(),Ce=a(Ae);const H=ie(()=>t().owner===t().field.duel.duelists.Below);Xt(Ce,{get entity(){return e(ee)},get isVisibleForcibly(){return e(H)},isWideMode:!0,cardActionResolve:void 0}),r(de,Ae)}),f(()=>b(Ee,g==="FaceUp"?"表向き":"裏向き")),r(A,j)};C(Z,A=>{m(g).length&&A(ye)})}r(y,F)}),f(()=>{var y;b(L,(y=t().owner)==null?void 0:y.profile.name),b(X,t().cellType)}),r(q,E)};C(c,q=>{t().field.duel.view.infoBoardState==="CellInfo"&&q(o)})}r(_,p),ut()}var ei=l('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),ti=l('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function ai(_,i){ct(i,!1);let t=Te(i,"viewController",8),d=Te(i,"userProfile",12);_t();var m=ke(),p=U(m);{var c=o=>{var q=ti(),E=s(a(q),2),M=s(a(E),2);_e(M,1,()=>dr,fe,(T,L)=>{var n=ei(),X=a(n),P=a(X),y=s(X,2),g=a(y);f(()=>b(g,lr[e(L)])),or(P,()=>d().chainConfig[e(L)],F=>d(d().chainConfig[e(L)]=F,!0)),V("change",P,()=>d().save()),r(T,n)}),r(o,q)};C(p,o=>{t().infoBoardState==="Config"&&o(c)})}r(_,m),ut()}function ri(_,{from:i,to:t},d={}){var{delay:m=0,duration:p=j=>Math.sqrt(j)*120,easing:c=ba}=d,o=getComputedStyle(_),q=o.transform==="none"?"":o.transform,[E,M]=o.transformOrigin.split(" ").map(parseFloat);E/=_.clientWidth,M/=_.clientHeight;var T=si(_),L=_.clientWidth/t.width/T,n=_.clientHeight/t.height/T,X=i.left+i.width*E,P=i.top+i.height*M,y=t.left+t.width*E,g=t.top+t.height*M,F=(X-y)*L,Z=(P-g)*n,ye=i.width/t.width,A=i.height/t.height;return{delay:m,duration:typeof p=="function"?p(Math.sqrt(F*F+Z*Z)):p,easing:c,css:(j,ce)=>{var Ee=ce*F,De=ce*Z,de=j+ce*ye,ee=j+ce*A;return`transform: ${q} translate(${Ee}px, ${De}px) scale(${de}, ${ee});`}}}function si(_){if("currentCSSZoom"in _)return _.currentCSSZoom;for(var i=_,t=1;i!==null;)t*=+getComputedStyle(i).zoom,i=i.parentElement;return t}var ii=l('<div class="chain_number svelte-lqu21u"> </div>'),ni=l('<div class="duel_card_row svelte-lqu21u"> </div>'),li=l('<div class="appendix svelte-lqu21u"> </div>'),oi=l('<div class="appendix_wrapper svelte-lqu21u"></div>'),di=l('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),vi=l("<div></div>");function ci(_,i){ct(i,!1);let t=Te(i,"duel",8),d=Te(i,"position",8,"left");const m=-100,p=()=>d()==="left"?-100:100;let c=le([]),o=Promise.resolve(),q=Promise.resolve();const E=1e3,M=500,T=400,L=X=>{const P={...X};P.isKnown=X.chainBlockInfo.action.entity.controller.duelistType==="Player"||X.chainBlockInfo.action.entity.face==="FaceUp",P.chainBlockInfo.onStateChange.append(y=>{if(y==="done"||y==="failed"||y==="negated")return o=o.then(async()=>{const g=new Date().getTime()-P.chainBlockInfo.wasSpawnedAt.getTime();g<E&&await ea(E-g),x(c,e(c).filter(F=>F.seq!==P.seq)),await ea(M+T)}).then(),"RemoveMe";x(c,e(c))}),q=q.then(async()=>{x(c,[P,...e(c)].sort((y,g)=>vr.isSameChain(y.clock,g.clock)&&y.chainBlockInfo.action.isWithChainBlock&&g.chainBlockInfo.action.isWithChainBlock?g.clock.totalProcSeq-y.clock.totalProcSeq:y.clock.totalProcSeq-g.clock.totalProcSeq)),await ea(300)}),o=o.then(()=>ea(1e3))};t().chainBlockLog.onInsert.append(L),_t();var n=vi();_e(n,13,()=>e(c),X=>X.seq,(X,P)=>{var y=di();const g=ie(()=>{const{activator:Y,action:Q,appendix:me}=e(P).chainBlockInfo;return{activator:Y,action:Q,appendix:me}});var F=a(y),Z=a(F);{var ye=Y=>{var Q=ii(),me=a(Q);f(()=>b(me,`チェーン：${e(P).chainBlockInfo.chainNumber??""}`)),r(Y,Q)};C(Z,Y=>{e(P).chainBlockInfo.chainNumber&&Y(ye)})}var A=s(Z,2),j=a(A),ce=s(A,2),Ee=a(ce);{var De=Y=>{var Q=ni(),me=a(Q);f(()=>b(me,e(P).isKnown?e(g).action.entity.nm:"？？？")),r(Y,Q)};C(Ee,Y=>{(e(g).action.entity.entityType==="Card"||e(g).action.entity.entityType==="Token")&&Y(De)})}var de=s(Ee,2),ee=a(de),Ae=a(ee),Ce=s(ee,2);{var H=Y=>{var Q=oi();_e(Q,5,()=>e(g).appendix,fe,(me,se)=>{var te=li(),K=a(te);f(()=>b(K,e(se))),r(me,te)}),r(Y,Q)};C(Ce,Y=>{e(g).appendix&&Y(H)})}f((Y,Q,me)=>{Le(y,`cut_in_row ${(!e(P).chainBlockInfo.chainNumber||e(P).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Le(F,`cut_in_item cut_in_item_${Y??""} cut_in_item_${e(P).chainBlockInfo.state??""} svelte-lqu21u`),Le(A,`duelist_name duelist_${Y??""}_name svelte-lqu21u`),b(j,e(g).activator.profile.name),Le(ce,`duel_card duel_card_${Y??""} ${Q??""} ${(e(P).isKnown?e(g).action.entity.origin.kind:"")??""} ${e(g).action.entity.entityType??""}  svelte-lqu21u`),b(Ae,me)},[()=>e(g).activator.seat.toLowerCase(),()=>e(P).isKnown?(e(g).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(g).action.toString()],ie),oe(3,F,()=>jr,()=>new Date().getTime()-e(P).chainBlockInfo.wasSpawnedAt.getTime()<E?{x:p(),duration:T}:{y:m,duration:T}),cr(y,()=>ri,()=>({duration:M})),r(X,y)}),f(()=>Le(n,`cut_in_container cut_in_container_${d()??""} svelte-lqu21u`)),r(_,n),ut()}const _i=Ar({duration:400});var ui=l('<div class="duel_desk_left v_flex svelte-1w535im"><!> <!> <!></div>'),fi=l('<button class="duel_field_header_message svelte-1w535im"> </button> <div class="duel_field_header_buttons svelte-1w535im"><button class="svelte-1w535im">サレンダー</button></div>',1),mi=l("<tr></tr>"),pi=l('<table class="duel_field svelte-1w535im"><tbody class="svelte-1w535im"></tbody></table>'),gi=l('<button class="svelte-1w535im">OK</button>'),yi=l('<button class="svelte-1w535im">cancel</button>'),hi=l("<!> <!>",1),bi=l('<button class="svelte-1w535im"> </button>'),ki=l('<div style="text-align: left;"><!> <!> <!></div>'),wi=l('<div><!> <div class=" duel_desk_center v_flex svelte-1w535im"><div class="duel_field_header svelte-1w535im"><!></div> <div class="duel_field_body svelte-1w535im"><!></div> <div class="duel_field_footer svelte-1w535im"><!></div></div> <!></div> <div style="position:fixed;bottom:0"> </div> <!> <div><!></div>',1);function Ci(_,i){ct(i,!1);let t=Te(i,"duel",12),d=Te(i,"userProfile",8),m=le(0),p=le(0),c=le([]),o=le([]),q=()=>{},E=le([]),M=le(),T=le(),L=le(()=>!1),n=le(!1);const X=v=>{q=v.resolve,x(E,v.dummyActionInfos.filter(u=>u.action.entity.entityType==="Duelist").filter(u=>u.action.entity.controller.seat==="Below")),x(M,void 0),x(T,void 0),x(o,[]),x(c,[]),x(n,!1),v.entitiesChoices&&(x(M,v.entitiesChoices),x(L,()=>{var u;return((u=v.entitiesChoices)==null?void 0:u.validator(e(c)))??!1}),x(n,v.entitiesChoices.cancelable),e(M).selectables.every(u=>u.cell.isPlayFieldCell&&u.getIndexInCell()===0||u.cell.cellType==="Hand"&&u.controller.duelistType==="Player"||u.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:v.entitiesChoices,chainBlockInfos:v.chainBlockInfos,cancelable:v.entitiesChoices.cancelable}).then(u=>{q({selectedEntities:u})})),v.cellsChoices&&(x(T,v.cellsChoices),x(L,()=>{var u;return((u=v.cellsChoices)==null?void 0:u.validator(e(o)))??!1}),x(n,v.cellsChoices.cancelable))};t().view.onWaitStart.append(X);const P=()=>{q=()=>{},x(T,void 0),x(M,void 0),x(o,[]),x(c,[]),x(L,()=>!1),x(n,!1)};t().view.onWaitEnd.append(P);let y=le(void 0),g=le("Normal");const F=({card:v,mode:u})=>{x(y,v),x(g,u??(e(y)===v||e(g)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(F);const Z=()=>{t(t())};t().view.onDuelUpdate.append(Z),t().log.onUpdate.append(Z);const ye=()=>{e(M)&&e(M).validator(e(c))&&q({selectedEntities:e(c)}),e(T)&&e(T).validator(e(o))&&q({selectedCells:e(o)})},A=()=>{q({})},j=v=>{q({actionInfo:v})},ce=()=>{q({surrender:!0})};t().main();const Ee=()=>e(m)<=1400?"compact":"wide";_t();var De=wi(),de=U(De),ee=a(de);{var Ae=v=>{var u=ui(),$=a(u);Ia($,{get duelist(){return t().duelists.Above}});var J=s($,2);{var z=ve=>{Xs(ve,{get entity(){return e(y)},get mode(){return e(g)}})};C(J,ve=>{e(y)&&ve(z)})}var pe=s(J,2);Ia(pe,{get duelist(){return t().duelists.Below}}),r(v,u)};C(ee,v=>{Ee()==="wide"&&v(Ae)})}var Ce=s(ee,2),H=a(Ce),Y=a(H);{var Q=v=>{var u=fi(),$=U(u),J=a($),z=s($,2),pe=a(z);f(()=>b(J,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),V("click",$,()=>{t(t().view.infoBoardState="Log",!0)}),V("click",pe,ce),r(v,u)};C(Y,v=>{t().isEnded||v(Q)})}var me=s(H,2),se=a(me);{var te=v=>{var u=pi(),$=a(u);_e($,5,()=>t().field.cells,fe,(J,z,pe)=>{var ve=mi();Le(ve,`${`duel_desk_row_${pe}`??""} svelte-1w535im`),_e(ve,5,()=>e(z),fe,(ne,ae,Be)=>{Zr(ne,{get view(){return t().view},row:pe,column:Be,get selectedEntities(){return e(c)},set selectedEntities(re){x(c,re)},get selectedCells(){return e(o)},set selectedCells(re){x(o,re)},$$legacy:!0})}),r(J,ve)}),r(v,u)};C(se,v=>{t().clock.turn>0&&v(te)})}var K=s(me,2),S=a(K);{var B=v=>{var u=hi(),$=U(u);{var J=ve=>{var ne=gi();f(ae=>ne.disabled=ae,[()=>!e(L)()],ie),V("click",ne,ye),r(ve,ne)};C($,ve=>{((e(M)&&e(M).qty)??(e(T)&&e(T).qty)??9999)>1&&ve(J)})}var z=s($,2);{var pe=ve=>{var ne=yi();V("click",ne,A),r(ve,ne)};C(z,ve=>{e(n)&&ve(pe)})}r(v,u)},W=v=>{var u=ke(),$=U(u);_e($,1,()=>e(E),fe,(J,z)=>{var pe=bi(),ve=a(pe);f(()=>b(ve,e(z).action.title)),V("click",pe,()=>j(e(z))),r(J,pe)}),r(v,u)};C(S,v=>{e(M)&&e(M).selectables.length||e(T)&&e(T).selectables?v(B):v(W,!1)})}var D=s(Ce,2);{var N=v=>{var u=ki(),$=a(u);vs($,{get log(){return t().log}});var J=s($,2);Zs(J,{get cell(){return t().view.infoBoardCell}});var z=s(J,2);ai(z,{get userProfile(){return d()},get viewController(){return t().view}}),f(pe=>Le(u,`duel_desk_right duel_desk_right_${pe??""}  svelte-1w535im`),[()=>t().view.infoBoardState.toLowerCase()],ie),oe(3,u,()=>be,()=>({duration:e(m)>1400?0:200,axis:"x"})),r(v,u)};C(D,v=>{(e(m)>1400||t().view.infoBoardState!=="Default")&&v(N)})}var O=s(de,2),R=a(O),G=s(O,2);_r(G,{get modalController(){return t().view.modalController}});var ue=s(G,2),xe=a(ue);const k=ie(()=>Ee()==="wide"?"right":"left");ci(xe,{get duel(){return t()},get position(){return e(k)}}),f((v,u)=>{Le(de,`flex duel_desk ${v??""}_mode svelte-1w535im`),b(R,u),Le(ue,`cutin ${v??""}_mode svelte-1w535im`)},[Ee,()=>t().clock.toFullString()],ie),ca("innerWidth",v=>x(m,v)),ca("innerHeight",v=>x(p,v)),r(_,De),ut()}var xi=l("<div></div>"),Di=l("<!> <!> <!> <!>",1),$i=l('<span class="atk svelte-1y1qbq4"> </span> <span class="slash svelte-1y1qbq4">/</span> <span class="def svelte-1y1qbq4"> </span>',1),Si=l('<div role="listitem"><div class="svelte-1y1qbq4"><div class="duel_card_row card_name svelte-1y1qbq4"> </div> <div style="display:flex; flex-wrap: wrap;" class="svelte-1y1qbq4"><div style="" class="svelte-1y1qbq4"><!> <!> <!></div> <div class="atk_def svelte-1y1qbq4"><!></div></div></div></div>');function Ga(_,i){ct(i,!1);let t=Te(i,"mode",8),d=Te(i,"cardInfo",8),m=Te(i,"onAttention",8),p=Te(i,"cardControlEventHandlers",8);_t();var c=Si(),o=a(c),q=a(o),E=a(q),M=s(q,2),T=a(M),L=a(T);{var n=A=>{var j=Di(),ce=U(j);{var Ee=Ce=>{var H=lt();f(()=>b(H,`★${d().level??""}`)),r(Ce,H)},De=Ce=>{var H=ke(),Y=U(H);{var Q=se=>{var te=lt();f(()=>b(te,`☆${d().rank??""}`)),r(se,te)},me=se=>{var te=ke(),K=U(te);{var S=B=>{var W=lt();f(()=>b(W,`Ｌ${d().link??""}`)),r(B,W)};C(K,B=>{d().link&&B(S)},!0)}r(se,te)};C(Y,se=>{d().rank?se(Q):se(me,!1)},!0)}r(Ce,H)};C(ce,Ce=>{d().level?Ce(Ee):Ce(De,!1)})}var de=s(ce,2);_e(de,1,()=>d().attributes??[],fe,(Ce,H)=>{var Y=xi();f(()=>Le(Y,`monster_attr ${e(H)??""} svelte-1y1qbq4`)),r(Ce,Y)});var ee=s(de,2);_e(ee,1,()=>d().types??[],fe,(Ce,H)=>{var Y=lt();f(()=>b(Y,ma[e(H)])),r(Ce,Y)});var Ae=s(ee,2);_e(Ae,1,()=>d().monsterCategories??[],fe,(Ce,H)=>{var Y=lt();f(()=>b(Y,la[e(H)])),r(Ce,Y)}),r(A,j)};C(L,A=>{d().kind==="Monster"&&A(n)})}var X=s(L,2);{var P=A=>{var j=lt();f(()=>b(j,`${pa[d().spellCategory]??""}魔法`)),r(A,j)};C(X,A=>{d().spellCategory&&A(P)})}var y=s(X,2);{var g=A=>{var j=lt();f(()=>b(j,`${ga[d().trapCategory]??""}罠`)),r(A,j)};C(y,A=>{d().trapCategory&&A(g)})}var F=s(T,2),Z=a(F);{var ye=A=>{var j=$i(),ce=U(j),Ee=a(ce),De=s(ce,4),de=a(De);f(()=>{b(Ee,d().attack??"?"),b(de,d().defense??"?")}),r(A,j)};C(Z,A=>{d().kind==="Monster"&&A(ye)})}f(A=>{Le(c,`${A??""} svelte-1y1qbq4`),b(E,d().name)},[()=>{var A,j;return`deck_editor_card duel_card ${d().kind} ${(j=(A=d())==null?void 0:A.monsterCategories)==null?void 0:j.join(" ")} ${d().isImplemented?"is_implemented":"is_not_implemented"} card_id_${d().cardId}`}],ie),V("click",c,()=>m()(d())),V("touchstart",c,A=>p().onCardDragStart(A,t(),d())),V("touchmove",c,A=>p().onCardDragging(A,t())),V("touchend",c,function(...A){var j;(j=p().onCardDragEnd)==null||j.apply(this,A)}),V("touchcancel",c,function(...A){var j;(j=p().onCardDragCancel)==null||j.apply(this,A)}),V("mousedown",c,A=>p().onCardDragStart(A,t(),d())),V("mousemove",c,A=>p().onCardDragging(A,t())),V("mouseup",c,function(...A){var j;(j=p().onCardDragEnd)==null||j.apply(this,A)}),r(_,c),ut()}var Mi=l('<button class="button_style_reset plus_minus_button svelte-1ty6ui7">+</button> <button class="button_style_reset plus_minus_button svelte-1ty6ui7">-</button>',1),Ti=l('<li class="deck_editor_item svelte-1ty6ui7"><!> <!></li>'),Ei=l('<div class="deck_editor_card_list_wrapper svelte-1ty6ui7"><ul></ul></div>');function ji(_,i){ct(i,!1);let t=Te(i,"cardList",8),d=Te(i,"mode",8),m=Te(i,"state",8),p=Te(i,"onAttention",8),c=Te(i,"cardControlEventHandlers",8);const o=20;let q=le(0),E=le(o),M=le(0),T=le(0),L=le(0),n=le();da(()=>(e(n),It(d()),It(t()),e(L),e(T),It(m())),()=>{if(e(n))if(he(n,e(n).scrollTop=0),d()==="List"){const y=t().length>o?o:t().length;e(L)||(x(T,e(n).scrollHeight/y),x(L,Math.ceil(e(T)))),console.log(m(),t().length),t().length>o?x(M,e(L)*(t().length-o*2)+Math.ceil(e(T)*(o*2-1))):x(M,e(L)*t().length)}else x(E,t().length)}),Ca(),_t();var X=Ei(),P=a(X);_e(P,5,t,fe,(y,g,F)=>{var Z=ke(),ye=U(Z);{var A=j=>{var ce=Ti(),Ee=a(ce);Ga(Ee,{get mode(){return d()},get cardInfo(){return e(g)},get onAttention(){return p()},get cardControlEventHandlers(){return c()}});var De=s(Ee,2);{var de=ee=>{var Ae=Mi(),Ce=U(Ae),H=s(Ce,2);f(Y=>{Ce.disabled=!e(g).isImplemented,ot(Ce,"title",e(g).isImplemented?`※shiftキー同時押しで一括投入
※ctrlキー同時押しで枚数制限無視`:""),H.disabled=Y,ot(H,"title",e(g).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>t().every(Y=>Y.name!==e(g).name)],ie),V("click",Ce,Y=>c().onCardAppend(Y,e(g))),V("click",H,Y=>c().onCardRemove(Y,e(g))),r(ee,Ae)};C(De,ee=>{d()==="Deck"&&ee(de)})}r(j,ce)};C(ye,j=>{F>=e(q)&&F<=e(E)&&j(A)})}r(y,Z)}),Wa(P,y=>x(n,y),()=>e(n)),f(y=>{Le(P,`deck_editor_card_list ${y??""}  indexLowerBound_${e(q)??""} indexUpperBound=${e(E)??""} svelte-1ty6ui7`),ot(P,"style",`height: ${(e(M)?e(M)+"px":"fit-content")??""};padding-top: ${e(q)*e(L)}px`)},[()=>m().toLowerCase()],ie),V("scroll",X,y=>{if(!e(L))return;const g=Math.ceil(y.currentTarget.scrollTop/e(L));x(q,g<o?0:g-o),x(E,g+o)}),r(_,X),ut()}var Ai=l('<div class="svelte-bxy0h6"><button class="button_style_reset svelte-bxy0h6">クリア</button></div>'),Bi=l('<div><div class="deck_editor_card_kind_header svelte-bxy0h6"><div class="svelte-bxy0h6"> <!> 枚）</div> <div style="display: flex;" class="svelte-bxy0h6"><!> <div class="triangle svelte-bxy0h6">▲</div></div></div> <div class="deck_editor_card_kind_body svelte-bxy0h6"><!></div></div>'),Li=l('<div class="deck_editor_card_list svelte-bxy0h6"></div>');function Ra(_,i){ct(i,!1);let t=Te(i,"allCardTree",8),d=Te(i,"deckCardTree",12),m=Te(i,"mode",8),p=Te(i,"onAttention",8),c=Te(i,"searchCondition",8,void 0),o=Te(i,"cardControlEventHandlers",8),q=le("ExtraMonster");const E=le(m()==="List"?t():d()),M=(...y)=>{const g=y.length?y:Gt(e(E)),F=(Z,ye)=>{var A;return Xa(Z,ye,(A=c())==null?void 0:A.sort.filter(j=>j.priority>0).toSorted((j,ce)=>j.priority-ce.priority))};g.forEach(Z=>e(E)[Z].sort(F))},T=(y,g)=>{d(d()[g]=[],!0)};let L=le(m()==="Deck"?structuredClone(e(E)):{ExtraMonster:[],Monster:[],Spell:[],Trap:[]}),n=le("");const X=y=>{if(!c())return!0;if(y.kind==="XyzMaterial")return!1;const g=_a(y);if(!c().deckCardKinds.includes(g)||c().name.trim().length&&[y.name,...y.nameTags??[],...y.textTags??[]].every(Z=>!Z.includes(c().name))||!y.isImplemented&&!c().others.includes("implemented")||y.isForTest&&!c().others.includes("test")||y.isOldVersion&&!c().others.includes("oldVersion"))return!1;if(y.kind==="Monster"){if(y.attributes&&!c().monsterAttributes.union(y.attributes).length||y.types&&!c().monsterTypes.union(y.types).length)return!1;const F=y.level??y.rank??y.link;return qt(c().starLowerBound)&&(F??0)<c().starLowerBound||qt(c().starUpperBound)&&(F??0)>c().starUpperBound||qt(c().atkLowerBound)&&(y.attack??0)<c().atkLowerBound||qt(c().atkUpperBound)&&(y.attack??0)>c().atkUpperBound||qt(c().defLowerBound)&&(y.defense??0)<c().defLowerBound||qt(c().defUpperBound)&&(y.defense??0)>c().defUpperBound||qt(c().atkPlusDef)&&(!qt(y.attack)||!qt(y.defense)||y.attack+y.defense!==c().atkPlusDef)||!y.monsterCategories||g==="ExtraMonster"&&!y.monsterCategories.union(c().exMonsterCategories).length?!1:y.monsterCategories.union(c().monsterCategories).length}if(y.kind==="Spell")return y.spellCategory&&c().spellCategories.includes(y.spellCategory);if(y.kind==="Trap")return y.trapCategory&&c().trapCategories.includes(y.trapCategory)};da(()=>(It(m()),e(E),It(d()),e(q),e(L)),()=>{if(m()==="Deck"){if(Gt(e(E)).forEach(y=>he(E,e(E)[y]=d()[y])),e(E)[e(q)].length){const y=Gt(e(E)).map(g=>({kind:g,cardInfos:e(E)[g]})).filter(({cardInfos:g})=>g.length).find(({kind:g,cardInfos:F})=>F.length!==e(L)[g].length);y&&e(q)!==y.kind&&x(q,y.kind)}else x(q,Gt(e(E)).find(y=>e(E)[y].find(X))??"ExtraMonster");x(L,structuredClone(e(E)))}}),da(()=>(It(m()),It(c()),e(n)),()=>{var y;if(m()==="List"){const g=JSON.stringify((y=c())==null?void 0:y.sort);e(n)!==g&&(x(n,g),M())}}),Ca(),_t();var P=Li();_e(P,5,()=>ta,fe,(y,g,F)=>{var Z=Bi();const ye=ie(()=>e(E)[e(g)].filter(X));var A=a(Z),j=a(A),ce=a(j),Ee=s(ce);{var De=Q=>{var me=lt();f(se=>b(me,`/ ${se??""}`),[()=>e(E)[e(g)].length.toLocaleString()],ie),r(Q,me)};C(Ee,Q=>{m()==="List"&&Q(De)})}var de=s(j,2),ee=a(de);{var Ae=Q=>{var me=Ai(),se=a(me);V("click",se,te=>T(te,e(g))),r(Q,me)};C(ee,Q=>{m()==="Deck"&&e(ye).length&&Q(Ae)})}var Ce=s(A,2),H=a(Ce);const Y=ie(()=>e(q)===e(g)?"Open":"Close");ji(H,{get mode(){return m()},get cardList(){return e(ye)},get onAttention(){return p()},get cardControlEventHandlers(){return o()},get state(){return e(Y)}}),f(Q=>{Le(Z,`deck_editor_card_kind deckCardKind ${(e(g)===e(q)?"selected":"")??""} ${(e(ye).length?"":"empty")??""} svelte-bxy0h6`),b(ce,`${Va[e(g)]??""}（${Q??""} `)},[()=>e(ye).length.toLocaleString()],ie),V("click",A,()=>{if(e(q)!==e(g)){x(q,e(g));return}x(q,ta.map((Q,me)=>me+F).map(Q=>Q%ta.length).map(Q=>ta[Q]).filter(Q=>Q!==e(g)).find(Q=>e(E)[Q].some(X))??e(g))}),r(y,Z)}),r(_,P),ut()}var Yi=l('<div class="svelte-1e9s0mh"> </div>'),qi=l('<div class="svelte-1e9s0mh"> </div>'),Ui=l('<div class="link_arrow_emoji svelte-1e9s0mh"> </div>'),Pi=l('<div class="duel_card_info_row svelte-1e9s0mh" style="position:sticky; top:0;"><!></div>'),Hi=l('<div class="plus_minus_button_area svelte-1e9s0mh"><button class="button_style_reset plus_minus_button svelte-1e9s0mh">+</button> <button class="button_style_reset plus_minus_button svelte-1e9s0mh">-</button></div>'),Ni=l('<div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"><pre class="description svelte-1e9s0mh"> </pre></div></div> <div class="duel_card_info_row svelte-1e9s0mh" style=" justify-content: space-between;"><div class="svelte-1e9s0mh"> </div> <div class="svelte-1e9s0mh"> </div></div>',1),Fi=l('<div></div> <div class="svelte-1e9s0mh"> </div>',1),Oi=l("<div> </div>"),Ii=l('<span class="svelte-1e9s0mh">/</span> <div class="monster_defense svelte-1e9s0mh"> </div>',1),Ri=l("<div> </div>"),Ki=l('<div class="duel_card_info_row svelte-1e9s0mh"><!> <!> <div style="flex-grow: 1;" class="svelte-1e9s0mh"></div> <div class="monster_attack svelte-1e9s0mh"> </div> <!></div> <div class="duel_card_info_row svelte-1e9s0mh"></div>',1),Wi=l('<div class="duel_card_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"></div> <div class="svelte-1e9s0mh"> </div></div>'),zi=l('<div class="duel_card_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"></div> <div class="svelte-1e9s0mh"> </div></div>'),Vi=l('<div class="svelte-1e9s0mh"> </div>'),Xi=l('<div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh">※エラッタ前カードです</div></div>'),Gi=l('<div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh">※テスト用カードです</div></div>'),Qi=l('<div class="duel_card_info_links svelte-1e9s0mh"><a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1e9s0mh"> </a> <a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1e9s0mh">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="google" class="svelte-1e9s0mh">⇒google検索</a></div>'),Ji=l('<div><div class="duel_card_info_header svelte-1e9s0mh"><div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"> </div></div> <!> <!></div> <div class="duel_card_info_body svelte-1e9s0mh"><!> <!> <div class="duel_card_info_row description svelte-1e9s0mh"><div class="svelte-1e9s0mh"><pre class="description svelte-1e9s0mh"> </pre></div> <!></div> <!> <!></div></div>');function Zi(_,i){ct(i,!1);let t=Te(i,"cardInfo",8,void 0),d=Te(i,"onAttention",8),m=Te(i,"cardControlEventHandlers",8),p=Te(i,"deckCardTree",8),c=Te(i,"refOnly",8);_t();var o=ke(),q=U(o);{var E=M=>{var T=Ji(),L=a(T),n=a(L),X=a(n),P=a(X),y=s(n,2);{var g=S=>{var B=Pi(),W=a(B);{var D=O=>{var R=Yi(),G=a(R);f(ue=>b(G,ue),[()=>"★".repeat(t().level)],ie),r(O,R)},N=O=>{var R=ke(),G=U(R);{var ue=k=>{var v=qi(),u=a(v);f($=>b(u,$),[()=>"★".repeat(t().rank)],ie),r(k,v)},xe=k=>{var v=ke(),u=U(v);{var $=J=>{var z=Ui(),pe=a(z);f(ve=>b(pe,ve),[()=>t().linkArrowKeys.map(ve=>za[ve].emoji).join("")],ie),r(J,z)};C(u,J=>{t().linkArrowKeys&&J($)},!0)}r(k,v)};C(G,k=>{t().rank&&t().rank>0?k(ue):k(xe,!1)},!0)}r(O,R)};C(W,O=>{t().level&&t().level>0?O(D):O(N,!1)})}r(S,B)};C(y,S=>{t().kind==="Monster"&&S(g)})}var F=s(y,2);{var Z=S=>{var B=Hi(),W=a(B),D=s(W,2);f(N=>{W.disabled=!t().isImplemented,ot(W,"title",t().isImplemented?`※shiftキー同時押しで一括投入
※ctrlキー同時押しで枚数制限無視`:""),D.disabled=N,ot(D,"title",t().isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>p()[_a(t())].every(N=>N.name!==t().name)],ie),V("click",W,N=>m().onCardAppend(N,t())),V("click",D,N=>m().onCardRemove(N,t())),r(S,B)};C(F,S=>{c()||S(Z)})}var ye=s(L,2),A=a(ye);{var j=S=>{var B=Ni(),W=U(B),D=a(W),N=a(D),O=a(N),R=s(W,2),G=a(R),ue=a(G),xe=s(G,2),k=a(xe);f(()=>{b(O,t().pendulumDescription),b(ue,`◀ ${t().pendulumScaleL??""}`),b(k,`${t().pendulumScaleR??""} ▶`)}),r(S,B)};C(A,S=>{var B;(B=t().monsterCategories)!=null&&B.includes("Pendulum")&&S(j)})}var ce=s(A,2);{var Ee=S=>{var B=Ki(),W=U(B),D=a(W);{var N=u=>{var $=Fi(),J=U($),z=s(J,2),pe=a(z);f(()=>{Le(J,`monster_attr ${t().attributes[0]??""} svelte-1e9s0mh`),b(pe,`${xa[t().attributes[0]]??""}属性`)}),r(u,$)};C(D,u=>{t().attributes&&u(N)})}var O=s(D,2);{var R=u=>{var $=Oi(),J=a($);f(()=>{Le($,`monster_cat ${t().types[0]??""} svelte-1e9s0mh`),b(J,`${ma[t().types[0]]??""}${Da[t().types[0]]??""}族`)}),r(u,$)};C(O,u=>{t().types&&u(R)})}var G=s(O,4),ue=a(G),xe=s(G,2);{var k=u=>{var $=Ii(),J=s(U($),2),z=a(J);f(()=>b(z,t().defense??"?")),r(u,$)};C(xe,u=>{var $;($=t().monsterCategories)!=null&&$.includes("Link")||u(k)})}var v=s(W,2);_e(v,5,()=>t().monsterCategories??[],fe,(u,$)=>{var J=Ri(),z=a(J);f(()=>{Le(J,`monster_cat ${e($)??""} svelte-1e9s0mh`),b(z,`${la[e($)]??""}${va[e($)]??""}`)}),r(u,J)}),f(()=>b(ue,t().attack??"?")),r(S,B)},De=S=>{var B=ke(),W=U(B);{var D=O=>{var R=Wi(),G=s(a(R),2),ue=a(G);f(()=>b(ue,`${pa[t().spellCategory]??""}魔法`)),r(O,R)},N=O=>{var R=ke(),G=U(R);{var ue=xe=>{var k=zi(),v=s(a(k),2),u=a(v);f(()=>b(u,`${ga[t().trapCategory]??""}罠`)),r(xe,k)};C(G,xe=>{t().kind==="Trap"&&t().trapCategory&&xe(ue)},!0)}r(O,R)};C(W,O=>{t().kind==="Spell"&&t().spellCategory?O(D):O(N,!1)},!0)}r(S,B)};C(ce,S=>{t().kind==="Monster"?S(Ee):S(De,!1)})}var de=s(ce,2),ee=a(de),Ae=a(ee),Ce=a(Ae),H=s(ee,2);{var Y=S=>{var B=Vi(),W=a(B);f(D=>b(W,`初版発売日：${D??""}`),[()=>t().releaseDate.formatToYYYYMMDD("-")],ie),r(S,B)};C(H,S=>{t().releaseDate&&S(Y)})}var Q=s(de,2);{var me=S=>{var B=Xi();r(S,B)};C(Q,S=>{t().isOldVersion&&S(me)})}var se=s(Q,2);{var te=S=>{var B=Gi();r(S,B)},K=S=>{var B=Qi(),W=a(B),D=a(W),N=s(W,2),O=s(N,2);f(R=>{ot(W,"href",R),b(D,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`),ot(N,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),ot(O,"href",`https://www.google.com/search?q=遊戯王 ${t().name}`)},[()=>ur(t())],ie),r(S,B)};C(se,S=>{t().isForTest?S(te):S(K,!1)})}f(S=>{Le(T,`duel_card duel_card_info ${t().kind??""} ${S??""} svelte-1e9s0mh`),b(P,t().name),b(Ce,t().description)},[()=>{var S;return(S=t().monsterCategories)==null?void 0:S.join(" ")}],ie),V("click",T,()=>d()(t())),r(M,T)};C(q,M=>{t()&&M(E)})}r(_,o),ut()}const en={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class tn{constructor(){nt(this,"DefaultSeparator1","/");nt(this,"DefaultSeparator2"," ");nt(this,"DefaultSeparator3",":");nt(this,"createDate",i=>{if(!i)return;const t=new Date(i);if(!isNaN(t.getTime()))return t});nt(this,"createDateOr",(i,t)=>this.createDate(i)||t||new Date);nt(this,"truncateDate",i=>{const t=i||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});nt(this,"addDate",(i,t)=>{const d=this.createDateOr(i);return d.setDate(d.getDate()+t),d});nt(this,"addMonth",(i,t)=>{const d=this.createDateOr(i);return d.setMonth(d.getMonth()+t),d});nt(this,"addYear",(i,t)=>{const d=this.createDateOr(i);return d.setFullYear(d.getFullYear()+t),d});nt(this,"getDayOfWeek",(i,t="dddd")=>{const d=this.createDate(i);return d?en[d.getDay()][t]:""});nt(this,"formatToYYYYMMDD",(i,t=this.DefaultSeparator1)=>{const d=this.createDate(i);if(!d)return"";const m=d.getFullYear().toString(),p=("0"+(d.getMonth()+1)).slice(-2),c=("0"+d.getDate()).slice(-2);return m+t+p+t+c});nt(this,"formatToYYYYMM",(i,t=this.DefaultSeparator1)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const m=d.getFullYear().toString(),p=("0"+(d.getMonth()+1)).slice(-2);return m+t+p});nt(this,"formatToHHMMSS",(i,t=this.DefaultSeparator3)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const m=d.getHours(),p=d.getMinutes(),c=d.getSeconds();return("0"+m).slice(-2)+t+("0"+p).slice(-2)+t+("0"+c).slice(-2)});nt(this,"formatToHHMM",(i,t=this.DefaultSeparator3)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const m=("0"+d.getHours()).slice(-2),p=("0"+d.getMinutes()).slice(-2);return m+t+p});nt(this,"formatToYYYYMMDD_HHMM",(i,t=this.DefaultSeparator1,d=this.DefaultSeparator2,m=this.DefaultSeparator3)=>{const p=this.createDate(i);return p?this.formatToYYYYMMDD(p,t)+d+this.formatToHHMM(p,m):""});nt(this,"formatToYYYYMMDD_HHMMSS",(i,t=this.DefaultSeparator1,d=this.DefaultSeparator2,m=this.DefaultSeparator3)=>{const p=this.createDate(i);return p?this.formatToYYYYMMDD(p,t)+d+this.formatToHHMMSS(p,m):""})}}const xt=new tn;Date.prototype.truncateDate=function(){return xt.truncateDate(this)};Date.prototype.getCloneOr=function(_){return xt.createDateOr(this,_)};Date.prototype.addDate=function(_){return xt.addDate(this,_)};Date.prototype.addMonth=function(_){return xt.addDate(this,_)};Date.prototype.addYear=function(_){return xt.addDate(this,_)};Date.prototype.getDayOfWeek=function(_="dddd"){return xt.getDayOfWeek(this,_)};Date.prototype.formatToYYYYMM=function(_){return xt.formatToYYYYMM(this,_)};Date.prototype.formatToYYYYMMDD=function(_){return xt.formatToYYYYMMDD(this,_)};Date.prototype.formatToYYYYMMDD_HHMM=function(_,i,t){return xt.formatToYYYYMMDD_HHMM(this,_,i,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(_,i,t){return xt.formatToYYYYMMDD_HHMMSS(this,_,i,t)};Date.prototype.formatToHHMM=function(_){return xt.formatToHHMM(this,_)};Date.prototype.formatToHHMMSS=function(_){return xt.formatToHHMMSS(this,_)};var an=l('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),rn=l('<ul class="deck_info_list svelte-2wdgc8"></ul>'),sn=l('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),nn=l('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),ln=l('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),on=l('<button class="svelte-2wdgc8">Cancel</button>'),dn=l('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function vn(_,i){ct(i,!1);let t=Te(i,"eventHolder",8),d=Te(i,"args",8),m=Te(i,"resolve",8),p=le(Promise.resolve([])),c=le();const o=()=>{x(c,new DataTransfer().files),x(p,Promise.resolve([]))},q=async n=>{n.preventDefault(),console.log("hoge",n)},E=async n=>{n.preventDefault(),n.dataTransfer&&T(n.dataTransfer.files)},M=()=>{T(e(c))},T=async n=>{if(!n.length)return;const X=[],P=[];for(const y of n)try{P.push(...await Tt.createfromJson(y))}catch(g){g instanceof Error&&X.push(g.message)}if(X.length){console.log(...X);return}x(p,e(p).then(()=>P))},L=o;_t(),fr(_,{get eventHolder(){return t()},get args(){return d()},$$slots:{body:(n,X)=>{var P=nn(),y=a(P);mt(y,()=>na,null,(g,F)=>{var Z=ke(),ye=U(Z);mt(ye,()=>e(p),null,(A,j)=>{var ce=ke(),Ee=U(ce);{var De=ee=>{var Ae=rn();_e(Ae,5,()=>e(j),fe,(Ce,H)=>{var Y=an(),Q=a(Y),me=a(Q),se=s(Q,2),te=a(se),K=s(se,2),S=a(K);f((B,W,D)=>{b(me,e(H).name),b(te,`${B??""}
                  /
                  ${W??""}`),b(S,`最終使用日時 ： ${D??""}`)},[()=>e(H).cardNames.filter(B=>{var W,D;return!((D=(W=e(F).getCardInfo(B))==null?void 0:W.monsterCategories)!=null&&D.union(aa).length)}).length,()=>e(H).cardNames.filter(B=>{var W,D;return(D=(W=e(F).getCardInfo(B))==null?void 0:W.monsterCategories)==null?void 0:D.union(aa).length}).length,()=>e(H).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],ie),r(Ce,Y)}),r(ee,Ae)},de=ee=>{var Ae=sn(),Ce=s(a(Ae),2),H=a(Ce);mr(H,()=>e(c),Y=>x(c,Y)),V("change",H,M),V("cancel",H,L),V("drop",Ae,E),V("dragover",Ae,q),r(ee,Ae)};C(Ee,ee=>{e(j).length?ee(De):ee(de,!1)})}r(A,ce)}),r(g,Z)}),r(n,P)},footer:(n,X)=>{var P=dn(),y=a(P);mt(y,()=>e(p),null,(g,F)=>{var Z=ke(),ye=U(Z);{var A=ce=>{var Ee=ln(),De=U(Ee),de=s(De,2),ee=s(de,2);f(()=>{De.disabled=e(F).length===0,de.disabled=e(F).length===0}),V("click",De,()=>m()({deckInfos:e(F),replaceAll:!1})),V("click",de,()=>m()({deckInfos:e(F),replaceAll:!0})),V("click",ee,L),r(ce,Ee)},j=ce=>{var Ee=ke(),De=U(Ee);{var de=ee=>{var Ae=on();V("click",Ae,()=>m()(void 0)),r(ee,Ae)};C(De,ee=>{d().cancelable&&ee(de)},!0)}r(ce,Ee)};C(ye,ce=>{e(F).length?ce(A):ce(j,!1)})}r(g,Z)}),r(n,P)}}}),ut()}const fa=class fa extends gr{constructor(i,t){super(i,...Object.values(t))}};nt(fa,"createModalController",i=>{const t={deckUploader:new yr({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new fa(i,t),t)});let wa=fa;function cn(_,i){ct(i,!1);let t=Te(i,"modalController",8);_t(),pr(_,{get modalController(){return t()},children:(d,m)=>{var p=ke(),c=U(p);{var o=q=>{vn(q,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};C(c,q=>{t().deckUploader.state==="Shown"&&q(o)})}r(d,p)},$$slots:{default:!0}}),ut()}var _n=l("<button> </button>"),un=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),fn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),mn=l('<div class="deck_editor_search_box_row monster_ex_categories svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">エクストラ</button></div> <div class="svelte-1m129ml"></div></div>'),pn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),gn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> <div style="display: inline-block;"></div> </label>'),yn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),hn=l('<option class="svelte-1m129ml"></option>'),bn=l('<option class="svelte-1m129ml"></option>'),kn=l('<div class="deck_editor_search_box_row monster_categories svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">モンスター</button></div> <div class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row monster_attributes svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">属性</button></div> <div class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">種族</button></div> <div class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">星攻守</button></div> <div class="svelte-1m129ml"><div class="star_range svelte-1m129ml"><span class="svelte-1m129ml">星</span> <select class="svelte-1m129ml"></select> <span class="svelte-1m129ml">～</span> <select class="svelte-1m129ml"></select></div> <div class="atk_range svelte-1m129ml"><span class="svelte-1m129ml">攻</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"> <span class="svelte-1m129ml">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"></div> <div class="def_range svelte-1m129ml"><span class="svelte-1m129ml">守</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"> <span class="svelte-1m129ml">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"></div> <div class="atk_plus_def svelte-1m129ml"><span class="svelte-1m129ml">攻+守</span> <input type="number" min="0" max="10000" step="100" class="svelte-1m129ml"></div></div></div>',1),wn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),Cn=l('<div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">魔法</button></div> <div class="svelte-1m129ml"></div></div>'),xn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),Dn=l('<div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">罠</button></div> <div class="svelte-1m129ml"></div></div>'),$n=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),Sn=l('<div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">その他</button></div> <div class="svelte-1m129ml"></div></div>'),Mn=l('<div class="deck_editor_card_detail svelte-1m129ml"><!></div>'),Tn=l("<div>カード情報整理中</div>"),En=l("<div>カード情報読込中</div>"),jn=l("<option> </option>"),An=l('<div class="svelte-1m129ml"><a class="white_button svelte-1m129ml" download="SVS_DeckInfos.json">ダウンロード</a></div>'),Bn=l('<div class="svelte-1m129ml"></div>'),Ln=l('<div class="svelte-1m129ml"><a class="white_button svelte-1m129ml" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),Yn=l('<div class="svelte-1m129ml"></div>'),qn=l('<div class="deck_editor_body_right_header svelte-1m129ml"><div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">編集対象</div> <div class="svelte-1m129ml"><select style="width:100%" class="svelte-1m129ml"></select></div></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">新規名称</div> <div class="svelte-1m129ml"><input type="text" style="width:100%" class="svelte-1m129ml"></div></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">基本操作</div> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml">デッキを保存</button></div> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml">デッキを複製</button></div> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">DL/UL</div> <!> <!> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml">アップロード</button></div></div></div> <div><!></div>',1),Un=l("<div>デッキ情報読込中</div>"),Pn=l('<div class="deck_editor_body_right_dummy svelte-1m129ml"></div>'),Hn=l('<div class="deck_editor_body_right svelte-1m129ml"><!></div>'),Nn=l("<div><!></div>"),Fn=l('<div><div class="deck_editor_header svelte-1m129ml"></div> <div class="deck_editor_body svelte-1m129ml"><div class="deck_editor_body_left svelte-1m129ml"><div role="contentinfo" class="deck_editor_search_box svelte-1m129ml"><div class="deck_editor_search_box_header svelte-1m129ml"><div class="svelte-1m129ml"><button class="deck_editor_search_box_title svelte-1m129ml">検索条件</button></div> <div class="deck_editor_sort_setting_container svelte-1m129ml"></div></div> <div class="deck_editor_search_box_body svelte-1m129ml"><div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">名称</button></div> <div class="svelte-1m129ml"><input type="text" style="width:100%" placeholder="※ルビには対応していません" class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row card_kind svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">種類</button></div> <div class="svelte-1m129ml"></div></div> <!> <!> <!> <!> <!></div></div> <!></div> <div class="deck_editor_body_center svelte-1m129ml"><div class="deck_editor_body_center_body svelte-1m129ml"><!></div></div> <!></div> <div class="footer svelte-1m129ml"></div></div> <!> <!>',1);function On(_,i){ct(i,!1);const t=[],d=[],m=[],p=[],c=[],o=[],q=[],E=[];let M=Te(i,"refOnly",8);const T=wa.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),L={name:"",deckCardKinds:[...ta],exMonsterCategories:[...aa],monsterCategories:qa.filter(h=>!aa.includes(h)),monsterAttributes:[...Ya],monsterTypes:[...La],spellCategories:Ba.filter(h=>h!=="PendulumScale"),trapCategories:[...Aa],starLowerBound:0,starUpperBound:13,atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:M()?["implemented"]:["oldVersion"],sort:[...Ua]},n=le(structuredClone(L));he(n,e(n).monsterCategories=["Effect","Tuner","Pendulum"]);let X=le("DeckEdit"),P=le("SearchCondition");const y=()=>{if(!e(n).deckCardKinds.length){Gt(e(n)).forEach(h=>{Array.isArray(e(n)[h])&&Array.isArray(L[h])?he(n,e(n)[h]=[...L[h]]):he(n,e(n)[h]=L[h])});return}he(n,e(n).name=""),he(n,e(n).deckCardKinds=[]),he(n,e(n).exMonsterCategories=[]),he(n,e(n).monsterCategories=[]),he(n,e(n).monsterAttributes=[]),he(n,e(n).monsterTypes=[]),he(n,e(n).spellCategories=[]),he(n,e(n).trapCategories=[]),he(n,e(n).others=[]),he(n,e(n).atkLowerBound=0),he(n,e(n).atkUpperBound=5e3),he(n,e(n).defLowerBound=0),he(n,e(n).defUpperBound=5e3),he(n,e(n).atkPlusDef=void 0),he(n,e(n).sort=[...Ua])},g=h=>{h.forEach(w=>{Array.isArray(e(n)[w])&&Array.isArray(L[w])?he(n,e(n)[w]=e(n)[w].length?[]:[...L[w]]):he(n,e(n)[w]=L[w])})};let F=le(),Z,ye=le(!1);const A=200,j=()=>{x(ye,!1),x(F,void 0),Z=void 0},ce=(h,w)=>{const I=_a(w),ge=e(se).cardTree[I].filter(Fe=>Fe.name===w.name).length;let Ye=h.shiftKey?3-ge:1;console.debug(w,I,ge,Ye),!h.ctrlKey&&ge>2&&(Ye=0),Ye&&he(se,e(se).cardTree[I]=[...e(se).cardTree[I],...Array(Ye).fill(w)].sort(Xa)),j(),S(w)},Ee=(h,w)=>{const I=_a(w);let ge=0;he(se,e(se).cardTree[I]=e(se).cardTree[I].filter(Ye=>Ye.name!==w.name?!0:(ge++,!h.shiftKey&&ge>1))),j(),S(w)},De=h=>{if(h.changedTouches&&h.changedTouches.length!==1)return;const{clientX:w,clientY:I}=h.changedTouches?h.changedTouches[0]:h;return{clientX:w,clientY:I}},de={onCardAppend:ce,onCardRemove:Ee,onCardDragCancel:j,onCardDragStart:(h,w,I)=>{if(S(I),M()){j();return}if(w!=="List"&&w!=="Deck"){j();return}if(w==="List"&&!I.isImplemented){j();return}const ge=De(h);if(!ge){j();return}Z={from:w,cardInfo:I,pos:ge,startPos:ge},ea(A).then(()=>{(Z==null?void 0:Z.cardInfo)===I&&x(F,Z)}),x(ye,!1)},onCardDragging:(h,w)=>{if(e(F)&&h.preventDefault&&h.preventDefault(),e(F)&&h.stopPropagation&&h.stopPropagation(),!Z){j();return}const I=De(h);if(!I){j();return}const ge=e(F)||Z;x(ye,!!(ge.from==="List"&&ge.cardInfo.isImplemented&&document.elementsFromPoint(I.clientX,I.clientY).some(Ye=>Ye.classList.contains("deck_editor_body_right_body")||Ye.classList.contains("deck_editor_body_right_dummy")))),e(ye)&&x(X,"DeckEdit"),e(F)?x(F,{...e(F),pos:I}):Z.pos={...I}},onCardDragEnd:h=>{if(!Z||!e(F)){j();return}const w=De(h);if(!w){j();return}e(F).from==="List"&&e(F).cardInfo.isImplemented&&document.elementsFromPoint(w.clientX,w.clientY).some(I=>I.classList.contains("deck_editor_body_right_body"))&&ce(h,e(F).cardInfo),e(F).from==="Deck"&&!document.elementsFromPoint(w.clientX,w.clientY).some(I=>I.classList.contains("deck_editor_body_right_body"))&&Ee(h,e(F).cardInfo),j()}},ee=(h,w,I)=>{Array.isArray(e(n)[w])&&Array.isArray(L[w])&&he(n,e(n)[w]=[I])},Ae=async()=>{const w=(await e(Y)).find(ge=>ge.id===e(H));if(!w)return;const I=await na;x(se,{...w,cardTree:br(w.cardNames.map(ge=>{const Ye=I.getCardInfo(ge);return Ye===void 0&&console.error(ge),Ye}).filter(ge=>ge!==void 0))})},Ce=()=>Tt.getAllDeckInfo().then(h=>(x(H,(h.find(w=>w.lastUsedAt.getTime()===Math.max(...h.map(I=>I.lastUsedAt.getTime())))??h[0]).id),h));let H=le(-1),Y=le(Ce()),Q=le(e(Y).then(h=>Tt.convertToObjectURL(h)));e(Y).then(Ae);const me=()=>{x(Y,Ce()),x(Q,e(Y).then(h=>Tt.convertToObjectURL(h))),Ae()};let se=le({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardTree:{ExtraMonster:[],Monster:[],Spell:[],Trap:[]}}),te=le(void 0),K=0;const S=h=>{x(P,"CardDetail"),h.cardId!==void 0&&!h.description&&!h.pendulumDescription&&(K=h.cardId,ha([h.cardId]).then(()=>{h.cardId===K&&x(te,h)})),x(te,h)},B=async()=>{const w=(await e(Y)).find(I=>I.id===e(H));if(!w)throw new Error("illegal state");return w},W=async()=>{const h=await B();await h.saveDeckInfo({...h,name:e(se).name,cardNames:Object.values(e(se).cardTree).flatMap(w=>w).map(w=>w.name),lastUsedAt:new Date}),me()},D=async()=>{(await Tt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,Object.values(e(se).cardTree).flatMap(w=>w).map(w=>w.name))).saveDeckInfo(),me()},N=async h=>{const w=await B();!h.shiftKey&&!confirm(`デッキ【${w.name}】を削除します。
よろしいですか？`)||(await w.delete(),me())},O=async()=>{const h=await T.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!h)return;const w=[];if(h.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;w.push(...(await e(Y)).map(I=>I.id))}await Promise.all(h.deckInfos.map(I=>Tt.createNewDeck(I.name,I.description,I.cardNames,I.lastUsedAt))),w.length&&await Promise.all(w.map(Tt.remove)),me()},R=()=>innerWidth<=1400?"compact":"wide";_t();var G=Fn(),ue=U(G),xe=s(a(ue),2),k=a(xe),v=a(k),u=a(v),$=a(u),J=a($),z=s($,2);_e(z,5,()=>e(n).sort,fe,(h,w,I)=>{var ge=_n(),Ye=a(ge);f(()=>{Le(ge,`deck_editor_sort_setting_item ${e(w).order??""} priority_${e(w).priority??""} svelte-1m129ml`),b(Ye,`${hr[e(w).key]??""}
                ${(e(w).order==="asc"?"▲":"▼")??""}`)}),V("click",ge,()=>{e(n).sort.forEach(Fe=>Fe.priority++),e(w).order=e(w).order==="asc"?"desc":"asc",Bt(()=>e(n).sort),e(w).priority=1,Bt(()=>e(n).sort)}),r(h,ge)});var pe=s(u,2),ve=a(pe),ne=a(ve),ae=a(ne),Be=s(ne,2),re=a(Be),Re=s(ve,2),Ne=a(Re),Ke=a(Ne),ze=s(Ne,2);_e(ze,5,()=>ta,fe,(h,w)=>{var I=un(),ge=a(I),Ye,Fe=s(ge);f(()=>{Ye!==(Ye=e(w))&&(ge.value=(ge.__value=e(w))==null?"":e(w)),b(Fe,` ${Va[e(w)]??""}`)}),Nt(t,[],ge,()=>(e(w),e(n).deckCardKinds),$e=>he(n,e(n).deckCardKinds=$e)),V("dblclick",I,$e=>ee($e,"deckCardKinds",e(w))),r(h,I)});var Ge=s(Re,2);{var it=h=>{var w=mn(),I=a(w),ge=a(I),Ye=s(I,2);_e(Ye,5,()=>aa,fe,(Fe,$e)=>{var Pe=fn(),Me=a(Pe),He,We=s(Me);f(()=>{He!==(He=e($e))&&(Me.value=(Me.__value=e($e))==null?"":e($e)),b(We,` ${la[e($e)]??""}${va[e($e)]??""}`)}),Nt(d,[],Me,()=>(e($e),e(n).exMonsterCategories),Oe=>he(n,e(n).exMonsterCategories=Oe)),V("dblclick",Pe,Oe=>ee(Oe,"exMonsterCategories",e($e))),r(Fe,Pe)}),V("click",ge,()=>g(["exMonsterCategories"])),oe(3,w,()=>be,()=>({delay:0,duration:100})),r(h,w)};C(Ge,h=>{e(n).deckCardKinds.includes("ExtraMonster")&&h(it)})}var qe=s(Ge,2);{var we=h=>{var w=kn(),I=U(w),ge=a(I),Ye=a(ge),Fe=s(ge,2);_e(Fe,5,()=>qa.filter(Ue=>!aa.includes(Ue)).filter(Ue=>Ue!=="Token"),fe,(Ue,Ie)=>{var Qe=pn(),Se=a(Qe),Je,at=s(Se);f(()=>{Je!==(Je=e(Ie))&&(Se.value=(Se.__value=e(Ie))==null?"":e(Ie)),b(at,` ${la[e(Ie)]??""}${va[e(Ie)]??""}`)}),Nt(m,[],Se,()=>(e(Ie),e(n).monsterCategories),rt=>he(n,e(n).monsterCategories=rt)),V("dblclick",Qe,rt=>ee(rt,"monsterCategories",e(Ie))),r(Ue,Qe)});var $e=s(I,2),Pe=a($e),Me=a(Pe),He=s(Pe,2);_e(He,5,()=>Ya,fe,(Ue,Ie)=>{var Qe=gn(),Se=a(Qe),Je,at=s(Se,2),rt=s(at);f(()=>{Je!==(Je=e(Ie))&&(Se.value=(Se.__value=e(Ie))==null?"":e(Ie)),Le(at,`monster_attr ${e(Ie)??""} svelte-1m129ml`),b(rt,` ${xa[e(Ie)]??""}`)}),Nt(p,[],Se,()=>(e(Ie),e(n).monsterAttributes),Ct=>he(n,e(n).monsterAttributes=Ct)),V("dblclick",Qe,Ct=>ee(Ct,"monsterAttributes",e(Ie))),r(Ue,Qe)});var We=s($e,2),Oe=a(We),bt=a(Oe),gt=s(Oe,2);_e(gt,5,()=>La,fe,(Ue,Ie)=>{var Qe=yn(),Se=a(Qe),Je,at=s(Se);f(()=>{Je!==(Je=e(Ie))&&(Se.value=(Se.__value=e(Ie))==null?"":e(Ie)),b(at,` ${ma[e(Ie)]??""}
                    ${Da[e(Ie)]??""}`)}),Nt(c,[],Se,()=>(e(Ie),e(n).monsterTypes),rt=>he(n,e(n).monsterTypes=rt)),V("dblclick",Qe,rt=>ee(rt,"monsterTypes",e(Ie))),r(Ue,Qe)});var kt=s(We,2),jt=a(kt),Ht=a(jt),Lt=s(jt,2),St=a(Lt),yt=s(a(St),2);f(()=>{e(n),Bt(()=>{})}),_e(yt,4,()=>Array(14),fe,(Ue,Ie,Qe)=>{var Se=hn();Se.value=(Se.__value=Qe)==null?"":Qe,Se.textContent=Qe,r(Ue,Se)});var wt=s(yt,4);f(()=>{e(n),Bt(()=>{})}),_e(wt,4,()=>Array(14),fe,(Ue,Ie,Qe)=>{var Se=bn();Se.value=(Se.__value=Qe)==null?"":Qe,Se.textContent=Qe,r(Ue,Se)});var At=s(St,2),Yt=s(a(At),2),Jt=s(Yt,4),zt=s(At,2),vt=s(a(zt),2),tt=s(vt,4),dt=s(zt,2),Mt=s(a(dt),2);V("click",Ye,()=>g(["monsterCategories"])),oe(3,I,()=>be,()=>({delay:0,duration:100})),V("click",Me,()=>g(["monsterAttributes"])),oe(3,$e,()=>be,()=>({delay:0,duration:100})),V("click",bt,()=>g(["monsterTypes"])),oe(3,We,()=>be,()=>({delay:0,duration:100})),V("click",Ht,()=>g(["starLowerBound","starUpperBound","atkLowerBound","atkUpperBound","defLowerBound","defUpperBound","atkPlusDef"])),Ot(yt,()=>e(n).starLowerBound,Ue=>he(n,e(n).starLowerBound=Ue)),Ot(wt,()=>e(n).starUpperBound,Ue=>he(n,e(n).starUpperBound=Ue)),Ft(Yt,()=>e(n).atkLowerBound,Ue=>he(n,e(n).atkLowerBound=Ue)),Ft(Jt,()=>e(n).atkUpperBound,Ue=>he(n,e(n).atkUpperBound=Ue)),Ft(vt,()=>e(n).defLowerBound,Ue=>he(n,e(n).defLowerBound=Ue)),Ft(tt,()=>e(n).defUpperBound,Ue=>he(n,e(n).defUpperBound=Ue)),Ft(Mt,()=>e(n).atkPlusDef,Ue=>he(n,e(n).atkPlusDef=Ue)),oe(3,kt,()=>be,()=>({delay:0,duration:100})),r(h,w)};C(qe,h=>{(e(n).deckCardKinds.includes("Monster")||e(n).deckCardKinds.includes("ExtraMonster"))&&h(we)})}var je=s(qe,2);{var Ve=h=>{var w=Cn(),I=a(w),ge=a(I),Ye=s(I,2);_e(Ye,5,()=>Ba.filter(Fe=>Fe!=="PendulumScale"),fe,(Fe,$e)=>{var Pe=wn(),Me=a(Pe),He,We=s(Me);f(()=>{He!==(He=e($e))&&(Me.value=(Me.__value=e($e))==null?"":e($e)),b(We,` ${pa[e($e)]??""}`)}),Nt(o,[],Me,()=>(e($e),e(n).spellCategories),Oe=>he(n,e(n).spellCategories=Oe)),V("dblclick",Pe,Oe=>ee(Oe,"spellCategories",e($e))),r(Fe,Pe)}),V("click",ge,()=>g(["spellCategories"])),oe(3,w,()=>be,()=>({delay:0,duration:100})),r(h,w)};C(je,h=>{e(n).deckCardKinds.includes("Spell")&&h(Ve)})}var Xe=s(je,2);{var Ze=h=>{var w=Dn(),I=a(w),ge=a(I),Ye=s(I,2);_e(Ye,5,()=>Aa,fe,(Fe,$e)=>{var Pe=xn(),Me=a(Pe),He,We=s(Me);f(()=>{He!==(He=e($e))&&(Me.value=(Me.__value=e($e))==null?"":e($e)),b(We,` ${ga[e($e)]??""}`)}),Nt(q,[],Me,()=>(e($e),e(n).trapCategories),Oe=>he(n,e(n).trapCategories=Oe)),V("dblclick",Pe,Oe=>ee(Oe,"trapCategories",e($e))),r(Fe,Pe)}),V("click",ge,()=>g(["trapCategories"])),oe(3,w,()=>be,()=>({delay:0,duration:100})),r(h,w)};C(Xe,h=>{e(n).deckCardKinds.includes("Trap")&&h(Ze)})}var et=s(Xe,2);{var st=h=>{var w=Sn(),I=a(w),ge=a(I),Ye=s(I,2);_e(Ye,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],fe,(Fe,$e)=>{var Pe=$n(),Me=a(Pe),He,We=s(Me);f(()=>{He!==(He=$e.key)&&(Me.value=(Me.__value=$e.key)==null?"":$e.key),b(We,` ${$e.text??""}`)}),Nt(E,[],Me,()=>($e.key,e(n).others),Oe=>he(n,e(n).others=Oe)),r(Fe,Pe)}),V("click",ge,()=>g(["others"])),oe(3,w,()=>be,()=>({delay:0,duration:100})),r(h,w)};C(et,h=>{M()||h(st)})}var pt=s(v,2);{var ft=h=>{var w=Mn(),I=a(w);Zi(I,{get cardInfo(){return e(te)},onAttention:S,cardControlEventHandlers:de,get deckCardTree(){return e(se).cardTree},get refOnly(){return M()}}),r(h,w)};C(pt,h=>{e(P)==="CardDetail"&&e(te)&&h(ft)})}var Dt=s(k,2),Rt=a(Dt),Pt=a(Rt);mt(Pt,()=>na,h=>{var w=En();r(h,w)},(h,w)=>{var I=ke(),ge=U(I);mt(ge,()=>e(w).treePrms,Ye=>{var Fe=Tn();r(Ye,Fe)},(Ye,Fe)=>{Ra(Ye,{mode:"List",get allCardTree(){return e(Fe)},onAttention:S,get searchCondition(){return e(n)},cardControlEventHandlers:de,get deckCardTree(){return e(se).cardTree},set deckCardTree($e){he(se,e(se).cardTree=$e)},$$legacy:!0})}),r(h,I)});var Kt=s(Dt,2);{var sa=h=>{var w=Hn(),I=a(w);{var ge=Fe=>{var $e=ke(),Pe=U($e);mt(Pe,()=>e(Y),Me=>{var He=Un();r(Me,He)},(Me,He)=>{var We=qn(),Oe=U(We),bt=a(Oe),gt=s(a(bt),2),kt=a(gt);f(()=>{e(H),Bt(()=>{e(He)})}),_e(kt,5,()=>e(He),fe,(Se,Je)=>{var at=jn(),rt={},Ct=a(at);f(()=>{rt!==(rt=e(Je).id)&&(at.value=(at.__value=e(Je).id)==null?"":e(Je).id),b(Ct,e(Je).name)}),r(Se,at)});var jt=s(bt,2),Ht=s(a(jt),2),Lt=a(Ht),St=s(jt,4),yt=s(a(St),2),wt=a(yt),At=s(yt,2),Yt=a(At),Jt=s(At,2),zt=a(Jt),vt=s(St,2),tt=s(a(vt),2);mt(tt,B,Se=>{var Je=Bn();r(Se,Je)},(Se,Je)=>{var at=An(),rt=a(at);f(Ct=>ot(rt,"href",Ct),[()=>Tt.convertToObjectURL([e(Je)])],ie),r(Se,at)});var dt=s(tt,2);mt(dt,()=>e(Q),Se=>{var Je=Yn();r(Se,Je)},(Se,Je)=>{var at=Ln(),rt=a(at);f(()=>ot(rt,"href",e(Je))),r(Se,at)});var Mt=s(dt,2),Ue=a(Mt),Ie=s(Oe,2),Qe=a(Ie);Ra(Qe,{mode:"Deck",allCardTree:{ExtraMonster:[],Monster:[],Spell:[],Trap:[]},onAttention:S,cardControlEventHandlers:de,get deckCardTree(){return e(se).cardTree},set deckCardTree(Se){he(se,e(se).cardTree=Se)},$$legacy:!0}),f(()=>Le(Ie,`deck_editor_body_right_body ${(e(ye)?"can_drop":"")??""} svelte-1m129ml`)),Ot(kt,()=>e(H),Se=>x(H,Se)),V("change",kt,Ae),Ft(Lt,()=>e(se).name,Se=>he(se,e(se).name=Se)),V("click",wt,W),V("click",Yt,D),V("click",zt,N),V("click",Ue,O),r(Me,We)}),r(Fe,$e)},Ye=Fe=>{var $e=Pn();r(Fe,$e)};C(I,Fe=>{e(X)==="DeckEdit"||R()==="wide"?Fe(ge):Fe(Ye,!1)})}V("click",w,()=>{x(X,"DeckEdit")}),V("focusin",w,()=>{x(X,"DeckEdit")}),r(h,w)};C(Kt,h=>{M()||h(sa)})}var Wt=s(ue,2);{var $t=h=>{var w=Nn(),I=a(w);Ga(I,{mode:"Dragging",get cardInfo(){return e(F).cardInfo},onAttention:S,cardControlEventHandlers:de}),f(()=>ot(w,"style",`position: fixed;
          top:${e(F).pos.clientY??""}px;
          left:${e(F).pos.clientX??""}px;
          z-index:3; 
          filter: opacity(0.8);
        	transform: translateX(-50%) translateY(-50%);`)),r(h,w)};C(Wt,h=>{e(F)&&h($t)})}var Et=s(Wt,2);cn(Et,{modalController:T}),f((h,w,I)=>Le(ue,`deck_editor
         screen_size_${h??""}
         left_pain_mode_${w??""}
         main_view_mode_${I??""}
         ${(e(F)?"dragging_card":"")??""}
          svelte-1m129ml`),[R,()=>e(P).toLowerCase(),()=>e(X).toLowerCase()],ie),V("click",J,y),V("click",ae,()=>g(["name"])),Ft(re,()=>e(n).name,h=>he(n,e(n).name=h)),V("click",Ke,()=>g(["deckCardKinds"])),V("focusin",v,()=>{x(P,"SearchCondition"),x(X,"SearchCondition")}),V("click",v,()=>{x(P,"SearchCondition"),x(X,"SearchCondition")}),V("touchmove",ue,h=>e(F)&&de.onCardDragging(h,"Overlay")),V("mousemove",ue,h=>e(F)&&de.onCardDragging(h,"Overlay")),r(_,G),ut()}class In{constructor(){nt(this,"openMode");new URLSearchParams(window.location.search).get("mode")==="search"?this.openMode="CardSearch":this.openMode="Normal"}}const Rn=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],Kn=3;var Wn=l('<input class="game_mode_radio svelte-sy4ydn" type="radio" name="game_mode"> <label> </label>',1),zn=l('<option class="svelte-sy4ydn"> </option>'),Vn=l('<option class="svelte-sy4ydn"> </option>'),Xn=l('<option class="svelte-sy4ydn"> </option>'),Gn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_deck_selector" class="deck_selector svelte-sy4ydn"><option class="svelte-sy4ydn">デフォルト</option><!></select></div></td></tr>'),Qn=l('<option class="svelte-sy4ydn"> </option>'),Jn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">対戦相手：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select> <div class="svelte-sy4ydn"> </div></div></td></tr> <!> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">先攻後攻：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select></div></td></tr>',1),Zn=l('<option class="svelte-sy4ydn"> </option>'),el=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-sy4ydn">難易度：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="difficulty_selector" class="difficulty_selector svelte-sy4ydn"></select></div></td></tr>'),tl=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label class="config_row_label svelte-sy4ydn" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"></div></td></tr> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="deck_selector" class="deck_selector svelte-sy4ydn"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">duel start!</button></div></td></tr>',1),al=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),rl=l('<tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">deck edit</button></div></td></tr>'),sl=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="duelist_name" class="config_row_label duelist_name svelte-sy4ydn">名前：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><input id="duelist_name" class="duelist_name svelte-sy4ydn" type="text"></div></td></tr> <!> <!>',1),il=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),nl=l('<div class="app_body svelte-sy4ydn"><table class="config_table svelte-sy4ydn"><tbody><!></tbody></table></div>'),ll=l('<span class="svelte-sy4ydn"> </span> <span class="svelte-sy4ydn"> </span>',1),ol=l('<div class="result_title result_win svelte-sy4ydn">YOU WIN</div>'),dl=l('<div class="result_title result_lose svelte-sy4ydn">YOU LOSE</div>'),vl=l('<div class="result_title result_draw svelte-sy4ydn">DRAW</div>'),cl=l('<div class="twitter_share_button_wrapper svelte-sy4ydn"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-sy4ydn">X(twitter)でシェアする</a></div>'),_l=l('<div class="result svelte-sy4ydn"><!> <div class="reason_of_end svelte-sy4ydn"> </div> <!> <div class="svelte-sy4ydn"><button class="white_button svelte-sy4ydn">TOPへ戻る</button></div></div>'),ul=l('<main style="flex-direction: column; display :flex" class="svelte-sy4ydn"><div class="link link_left svelte-sy4ydn"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-sy4ydn">posfie(toggeter)</a></div> <div class="link link_right svelte-sy4ydn"><a class="a_button svelte-sy4ydn" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">現時点とこの先のこと</a></div> <!> <div class="footer card_summary svelte-sy4ydn"><!></div> <div class="footer debug_info svelte-sy4ydn"><span class="svelte-sy4ydn"> </span> <span class="user_agent_info svelte-sy4ydn"> </span> <span class="screen_info svelte-sy4ydn"> </span></div> <!></main>');function fl(_,i){ct(i,!1);const t=new kr("stk_ygo_svelte",Kn,Rn),d=new In;let m=le(0),p=le(0),c=le(),o=le("FtkChallenge"),q=le(d.openMode==="CardSearch"?"DeckEdit":"None"),E=le(0),M=le(""),T=le(void 0);const L="https://setta238.github.io/stk_ygo_svelte/",n="遊戯王deそりてあ",X="ninja_no",P=wr.getOrCreateNew(t).then(k=>(x(o,Pa.includes(k.previousGameMode)?k.previousGameMode:"FtkChallenge"),Ce(k.previousNpcId),k)),y=k=>{var u;const v=k.find($=>$.lastUsedAt.getTime()===Math.max(...k.map(J=>J.lastUsedAt.getTime())))??k[0];x(E,v.id),e(o)==="FtkChallenge"&&v.deckType!=="Preset"&&x(E,((u=Vt.find($=>$.deckType==="Preset"))==null?void 0:u.id)??e(E))};let g=le(Tt.getAllDeckInfo(t).then(k=>(Promise.all(k.filter(v=>!v.lastUsedAt).map(v=>{v.saveDeckInfo()})),y(k),k)));const F=async()=>{const k=e(E);let v=(await e(g)).find($=>$.id===k)??(await ye()).find($=>$.id===k);v&&await v.updateTimestamp();let u=v;if(u||(u=Vt.find($=>$.id===k)),!u)throw new Error("illegal state");return u},Z=async()=>{(await P).save({previousGameMode:e(o)})},ye=()=>(x(g,Tt.getAllDeckInfo(t).then(k=>(y(k),k))),e(g)),A=async()=>{(await e(g)).length||(await Tt.prepareSampleDeck(),ye())},j=async()=>{await Promise.all([Z(),A()]);const k=await F(),v=await P;let u=Zt.find(z=>z.id===Number.MIN_SAFE_INTEGER)??Zt[0],$=Vt.find(z=>z.id===Number.MIN_SAFE_INTEGER)??Vt[0],J="PlayFirst";e(o)==="FtkChallenge"?u=Zt.filter(z=>z.npcType==="FtkChallenge").find(z=>z.difficulty===v.previousDifficulty)??u:e(o)==="Free"&&(u=Zt.find(z=>z.id===v.previousNpcId)??u,$=Vt.slice(-1)[0],J=v.previousStartMode),u.npcType!=="FtkChallenge"&&v.previousNpcDeckId>-1?$=(await e(g)).find(z=>z.id===v.previousNpcDeckId)??$:$=Vt.find(z=>z.id===u.id)??$,x(c,new $r(v,"Player",k,[],u,"NPC",$,[],J)),e(c).onDuelEnd.append(()=>(x(c,e(c)),"RemoveMe"))},ce=async()=>{await Promise.all([Z(),A()]),x(q,"DeckEdit")},Ee=async k=>{await Z(),k.key==="Enter"&&!k.repeat&&(await P).save()},De=()=>{if(d.openMode==="CardSearch"){window.location.replace(window.location.origin+window.location.pathname);return}x(g,ye()),x(c,void 0),x(q,"None")};let de=Date.now();const ee=k=>{Date.now()-de<200||(de=Date.now(),x(o,k),ye())},Ae=k=>{Ce(Number(k.currentTarget.value))},Ce=k=>{var v;x(T,Zt.find(u=>u.id===k)),x(M,((v=e(T))==null?void 0:v.description)??"")};A(),_t();var H=ul(),Y=s(a(H),2),Q=a(Y),me=s(Y,2);{var se=k=>{var v=ke(),u=U(v);mt(u,()=>P,null,($,J)=>{Ci($,{get duel(){return e(c)},get userProfile(){return e(J)}})}),r(k,v)},te=k=>{var v=ke(),u=U(v);{var $=z=>{const pe=ie(()=>d.openMode==="CardSearch");On(z,{get refOnly(){return e(pe)}})},J=z=>{var pe=nl(),ve=a(pe),ne=a(ve),ae=a(ne);mt(ae,()=>P,Be=>{var re=il();r(Be,re)},(Be,re)=>{var Re=sl(),Ne=U(Re),Ke=a(Ne),ze=a(Ke),Ge=s(Ke),it=a(Ge),qe=a(it),we=s(Ne,2);mt(we,()=>e(g),Xe=>{var Ze=al();r(Xe,Ze)},(Xe,Ze)=>{var et=tl(),st=U(et),pt=a(st),ft=a(pt),Dt=s(pt),Rt=a(Dt);_e(Rt,5,()=>Pa,fe,(Pe,Me)=>{var He=Wn(),We=U(He),Oe=s(We,2),bt=a(Oe);f(gt=>{ot(We,"id",`game_mode_radio_${gt??""}`),xr(We,e(Me)),Dr(We,e(o)===e(Me)),Le(Oe,`game_mode_tab_label game_mode_tab_${gt??""} svelte-sy4ydn`),ot(Oe,"for",`game_mode_radio_${gt??""}`),b(bt,e(Me))},[()=>e(Me).toLowerCase()],ie),V("change",We,()=>ee(e(Me))),r(Pe,He)});var Pt=s(st,2),Kt=a(Pt),sa=a(Kt),Wt=s(Kt),$t=a(Wt),Et=a($t);f(()=>{e(E),Bt(()=>{e(o),e(Ze)})}),_e(Et,5,()=>e(o)==="FtkChallenge"?Vt.filter(Pe=>Pe.deckType==="Preset"):e(Ze),fe,(Pe,Me)=>{var He=zn(),We={},Oe=a(He);f(()=>{We!==(We=e(Me).id)&&(He.value=(He.__value=e(Me).id)==null?"":e(Me).id),b(Oe,e(Me).name)}),r(Pe,He)});var h=s(Pt,2);{var w=Pe=>{var Me=Jn(),He=U(Me),We=a(He),Oe=a(We),bt=s(We),gt=a(bt),kt=a(gt);f(()=>{e(re),Bt(()=>{})}),_e(kt,5,()=>Zt,fe,(vt,tt)=>{var dt=Vn(),Mt={},Ue=a(dt);f(()=>{Mt!==(Mt=e(tt).id)&&(dt.value=(dt.__value=e(tt).id)==null?"":e(tt).id),b(Ue,e(tt).name)}),r(vt,dt)});var jt=s(kt,2),Ht=a(jt),Lt=s(He,2);{var St=vt=>{var tt=Gn(),dt=a(tt),Mt=a(dt),Ue=s(dt),Ie=a(Ue),Qe=a(Ie);f(()=>{e(re),Bt(()=>{e(Ze)})});var Se=a(Qe);Se.value=(Se.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Je=s(Se);_e(Je,1,()=>e(Ze),fe,(at,rt)=>{var Ct=Xn(),Ma={},Qa=a(Ct);f(()=>{Ma!==(Ma=e(rt).id)&&(Ct.value=(Ct.__value=e(rt).id)==null?"":e(rt).id),b(Qa,e(rt).name)}),r(at,Ct)}),oe(3,Mt,()=>be,()=>({duration:200})),oe(3,dt,()=>be,()=>({duration:200})),Ot(Qe,()=>e(re).previousNpcDeckId,at=>e(re).previousNpcDeckId=at),oe(3,Ie,()=>be,()=>({duration:200})),oe(3,Ue,()=>be,()=>({duration:200})),oe(3,tt,()=>be,()=>({duration:200})),r(vt,tt)};C(Lt,vt=>{var tt;((tt=e(T))==null?void 0:tt.npcType)!=="FtkChallenge"&&vt(St)})}var yt=s(Lt,2),wt=a(yt),At=a(wt),Yt=s(wt),Jt=a(Yt),zt=a(Jt);f(()=>{e(re),Bt(()=>{})}),_e(zt,5,()=>Gt(Ha),fe,(vt,tt)=>{var dt=Qn(),Mt={},Ue=a(dt);f(()=>{Mt!==(Mt=e(tt))&&(dt.value=(dt.__value=e(tt))==null?"":e(tt)),b(Ue,Ha[e(tt)])}),r(vt,dt)}),f(()=>b(Ht,`※${e(M)??""}`)),oe(3,Oe,()=>be,()=>({duration:200})),oe(3,We,()=>be,()=>({duration:200})),V("change",kt,Ae),Ot(kt,()=>e(re).previousNpcId,vt=>e(re).previousNpcId=vt),oe(3,gt,()=>be,()=>({duration:200})),oe(3,bt,()=>be,()=>({duration:200})),oe(3,He,()=>be,()=>({duration:200})),oe(3,At,()=>be,()=>({duration:200})),oe(3,wt,()=>be,()=>({duration:200})),Ot(zt,()=>e(re).previousStartMode,vt=>e(re).previousStartMode=vt),oe(3,Jt,()=>be,()=>({duration:200})),oe(3,Yt,()=>be,()=>({duration:200})),oe(3,yt,()=>be,()=>({duration:200})),r(Pe,Me)},I=Pe=>{var Me=ke(),He=U(Me);{var We=Oe=>{var bt=el(),gt=a(bt),kt=a(gt),jt=s(gt),Ht=a(jt),Lt=a(Ht);f(()=>{e(re),Bt(()=>{})}),_e(Lt,5,()=>Sr,fe,(St,yt)=>{var wt=Zn(),At={},Yt=a(wt);f(()=>{At!==(At=e(yt))&&(wt.value=(wt.__value=e(yt))==null?"":e(yt)),b(Yt,e(yt))}),r(St,wt)}),oe(3,kt,()=>be,()=>({duration:200})),oe(3,gt,()=>be,()=>({duration:200})),Ot(Lt,()=>e(re).previousDifficulty,St=>e(re).previousDifficulty=St),oe(3,Ht,()=>be,()=>({duration:200})),oe(3,jt,()=>be,()=>({duration:200})),oe(3,bt,()=>be,()=>({duration:200})),r(Oe,bt)};C(He,Oe=>{e(o)==="FtkChallenge"&&Oe(We)},!0)}r(Pe,Me)};C(h,Pe=>{e(o)==="Free"?Pe(w):Pe(I,!1)})}var ge=s(h,2),Ye=a(ge),Fe=a(Ye),$e=a(Fe);oe(3,ft,()=>be,()=>({duration:200})),oe(3,pt,()=>be,()=>({duration:200})),oe(3,Rt,()=>be,()=>({duration:200})),oe(3,Dt,()=>be,()=>({duration:200})),oe(3,st,()=>be,()=>({duration:200})),oe(3,sa,()=>be,()=>({duration:200})),oe(3,Kt,()=>be,()=>({duration:200})),Ot(Et,()=>e(E),Pe=>x(E,Pe)),oe(3,$t,()=>be,()=>({duration:200})),oe(3,Wt,()=>be,()=>({duration:200})),oe(3,Pt,()=>be,()=>({duration:200})),V("click",$e,j),oe(3,Fe,()=>be,()=>({duration:200})),r(Xe,et)});var je=s(we,2);{var Ve=Xe=>{var Ze=rl(),et=a(Ze),st=a(et),pt=a(st);V("click",pt,ce),oe(3,st,()=>be,()=>({duration:200})),oe(3,et,()=>be,()=>({duration:200})),oe(3,Ze,()=>be,()=>({duration:200})),r(Xe,Ze)};C(je,Xe=>{e(o)==="Free"&&Xe(Ve)})}oe(3,ze,()=>be,()=>({duration:200})),oe(3,Ke,()=>be,()=>({duration:200})),Ft(qe,()=>e(re).name,Xe=>e(re).name=Xe),V("keypress",qe,Ee),oe(3,it,()=>be,()=>({duration:200})),oe(3,Ge,()=>be,()=>({duration:200})),oe(3,Ne,()=>be,()=>({duration:200})),r(Be,Re)}),r(z,pe)};C(u,z=>{e(q)==="DeckEdit"?z($):z(J,!1)},!0)}r(k,v)};C(me,k=>{e(c)?k(se):k(te,!1)})}var K=s(me,2),S=a(K);mt(S,()=>na,k=>{var v=lt("読み込み中");r(k,v)},(k,v)=>{var u=ll(),$=U(u),J=a($),z=s($,2),pe=a(z);f((ve,ne,ae)=>{b(J,`公式DB上のカード${ve??""}枚`),b(pe,`実装済カード（効果あり）${ne??""}枚 （効果なし）${ae??""}枚`)},[()=>e(v).knmCount.toLocaleString(),()=>e(v).definitionCount.toLocaleString(),()=>e(v).nonDefinitionCount.toLocaleString()],ie),r(k,u)});var B=s(K,2),W=a(B),D=a(W),N=s(W,2),O=a(N),R=s(N,2),G=a(R),ue=s(B,2);{var xe=k=>{var v=_l(),u=a(v);{var $=re=>{var Re=ke(),Ne=U(Re);{var Ke=Ge=>{var it=ol();r(Ge,it)},ze=Ge=>{var it=ke(),qe=U(it);{var we=je=>{var Ve=dl();r(je,Ve)};C(qe,je=>{e(c).winner.seat==="Above"&&je(we)},!0)}r(Ge,it)};C(Ne,Ge=>{e(c).winner.seat==="Below"?Ge(Ke):Ge(ze,!1)})}r(re,Re)},J=re=>{var Re=vl();r(re,Re)};C(u,re=>{e(c).winner?re($):re(J,!1)})}var z=s(u,2),pe=a(z),ve=s(z,2);{var ne=re=>{var Re=cl(),Ne=a(Re);f(()=>ot(Ne,"href",`https://x.com/share?url=${L}&text=${e(c).twitterShareText??""}&hashtags=${n}&via=${X}`)),r(re,Re)};C(ve,re=>{e(c).twitterShareText&&re(ne)})}var ae=s(ve,2),Be=a(ae);f(()=>b(pe,e(c).reasonOfEnd)),V("click",Be,De),oe(3,v,()=>Er,()=>({delay:200,duration:200})),r(k,v)};C(ue,k=>{e(c)&&e(c).isEnded&&k(xe)})}f(()=>{b(D,"build at: 20260207_190401"),b(O,Cr.text),b(G,`w:${e(m)??""}px h:${e(p)??""}px`)}),ca("innerWidth",k=>x(m,k)),ca("innerHeight",k=>x(p,k)),V("click",Q,De),r(_,H),ut()}Mr(fl,{target:document.getElementById("app")});
