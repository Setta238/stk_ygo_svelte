var $a=Object.defineProperty;var Ia=(e,r,t)=>r in e?$a(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var Ue=(e,r,t)=>Ia(e,typeof r!="symbol"?r+"":r,t);import{m as nr,a as Sr,b as sr,c as Er,s as lr,t as or,S as Na,d as Oa,e as Ya,f as Fi,g as jt,h as ti,i as Pr,j as Ui,k as Ra,l as La,n as gi,o as Pa,p as hi,q as bi,r as yi,u as ki,v as wi,w as xi,D as wt,x as Fa,y as Ua,z as za,A as Fr,B as Ci,C as Ba,E as Di,F as Ha}from"./entity_proc.js";import"./json.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const Kr=!1;var ri=Array.isArray,Wa=Array.prototype.indexOf,ii=Array.from,Ka=Object.defineProperty,Ft=Object.getOwnPropertyDescriptor,zi=Object.getOwnPropertyDescriptors,Va=Object.prototype,Ga=Array.prototype,ai=Object.getPrototypeOf;function Qa(e){return typeof e=="function"}const xt=()=>{};function Xa(e){return typeof(e==null?void 0:e.then)=="function"}function Za(e){return e()}function Vr(e){for(var r=0;r<e.length;r++)e[r]()}const at=2,Bi=4,Tr=8,Mr=16,bt=32,vr=64,hr=128,it=256,br=512,Xe=1024,yt=2048,Ht=4096,mt=8192,qr=16384,Hi=32768,Ar=65536,Wi=1<<17,Ja=1<<19,Ki=1<<20,gt=Symbol("$state"),en=Symbol("legacy props"),tn=Symbol("");function Vi(e){return e===this.v}function Gi(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function ni(e){return!Gi(e,this.v)}function rn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function an(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function nn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function sn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ln(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function on(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function vn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function dn(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function cn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let dr=!1,un=!1;function fn(){dr=!0}const si=1,li=2,Qi=4,_n=8,pn=16,mn=1,gn=2,hn=4,bn=8,yn=16,kn=1,wn=2,xn=4,Cn=1,Dn=2,ze=Symbol();let Ye=null;function yr(e){Ye=e}function Be(e,r=!1,t){Ye={p:Ye,c:null,e:null,m:!1,s:e,x:null,l:null},dr&&!r&&(Ye.l={s:null,u:null,r1:[],r2:Ge(!1)})}function He(e){const r=Ye;if(r!==null){const u=r.e;if(u!==null){var t=Me,a=qe;r.e=null;try{for(var n=0;n<u.length;n++){var s=u[n];st(s.effect),nt(s.reaction),Vt(s.fn)}}finally{st(t),nt(a)}}Ye=r.p,r.m=!0}return{}}function Wt(){return!dr||Ye!==null&&Ye.l===null}function Ge(e,r){var t={f:0,v:e,reactions:null,equals:Vi,rv:0,wv:0};return t}function Sn(e){return Xi(Ge(e))}function tr(e,r=!1){var a;const t=Ge(e);return r||(t.equals=ni),dr&&Ye!==null&&Ye.l!==null&&((a=Ye.l).s??(a.s=[])).push(t),t}function ye(e,r=!1){return Xi(tr(e,r))}function Xi(e){return qe!==null&&!vt&&qe.f&at&&(dt===null?Yn([e]):dt.push(e)),e}function Ie(e,r){return I(e,ct(()=>i(e))),r}function I(e,r){return qe!==null&&!vt&&Wt()&&qe.f&(at|Mr)&&(dt===null||!dt.includes(e))&&cn(),Et(e,r)}function Et(e,r){return e.equals(r)||(e.v,e.v=r,e.wv=ma(),Zi(e,yt),Wt()&&Me!==null&&Me.f&Xe&&!(Me.f&(bt|vr))&&(ft===null?Rn([e]):ft.push(e))),r}function Zi(e,r){var t=e.reactions;if(t!==null)for(var a=Wt(),n=t.length,s=0;s<n;s++){var u=t[s],v=u.f;v&yt||!a&&u===Me||(ut(u,r),v&(Xe|it)&&(v&at?Zi(u,Ht):Or(u)))}}let Ji=!1;function Ct(e,r=null,t){if(typeof e!="object"||e===null||gt in e)return e;const a=ai(e);if(a!==Va&&a!==Ga)return e;var n=new Map,s=ri(e),u=Ge(0);s&&n.set("length",Ge(e.length));var v;return new Proxy(e,{defineProperty(m,l,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&on();var _=n.get(l);return _===void 0?(_=Ge(f.value),n.set(l,_)):I(_,Ct(f.value,v)),!0},deleteProperty(m,l){var f=n.get(l);if(f===void 0)l in m&&n.set(l,Ge(ze));else{if(s&&typeof l=="string"){var _=n.get("length"),d=Number(l);Number.isInteger(d)&&d<_.v&&I(_,d)}I(f,ze),Si(u)}return!0},get(m,l,f){var h;if(l===gt)return e;var _=n.get(l),d=l in m;if(_===void 0&&(!d||(h=Ft(m,l))!=null&&h.writable)&&(_=Ge(Ct(d?m[l]:ze,v)),n.set(l,_)),_!==void 0){var g=i(_);return g===ze?void 0:g}return Reflect.get(m,l,f)},getOwnPropertyDescriptor(m,l){var f=Reflect.getOwnPropertyDescriptor(m,l);if(f&&"value"in f){var _=n.get(l);_&&(f.value=i(_))}else if(f===void 0){var d=n.get(l),g=d==null?void 0:d.v;if(d!==void 0&&g!==ze)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return f},has(m,l){var g;if(l===gt)return!0;var f=n.get(l),_=f!==void 0&&f.v!==ze||Reflect.has(m,l);if(f!==void 0||Me!==null&&(!_||(g=Ft(m,l))!=null&&g.writable)){f===void 0&&(f=Ge(_?Ct(m[l],v):ze),n.set(l,f));var d=i(f);if(d===ze)return!1}return _},set(m,l,f,_){var T;var d=n.get(l),g=l in m;if(s&&l==="length")for(var h=f;h<d.v;h+=1){var x=n.get(h+"");x!==void 0?I(x,ze):h in m&&(x=Ge(ze),n.set(h+"",x))}d===void 0?(!g||(T=Ft(m,l))!=null&&T.writable)&&(d=Ge(void 0),I(d,Ct(f,v)),n.set(l,d)):(g=d.v!==ze,I(d,Ct(f,v)));var S=Reflect.getOwnPropertyDescriptor(m,l);if(S!=null&&S.set&&S.set.call(_,f),!g){if(s&&typeof l=="string"){var j=n.get("length"),k=Number(l);Number.isInteger(k)&&k>=j.v&&I(j,k+1)}Si(u)}return!0},ownKeys(m){i(u);var l=Reflect.ownKeys(m).filter(d=>{var g=n.get(d);return g===void 0||g.v!==ze});for(var[f,_]of n)_.v!==ze&&!(f in m)&&l.push(f);return l},setPrototypeOf(){vn()}})}function Si(e,r=1){I(e,e.v+r)}function Ei(e){return e!==null&&typeof e=="object"&&gt in e?e[gt]:e}function ea(e,r){return Object.is(Ei(e),Ei(r))}var Ti,ta,ra,ia;function En(){if(Ti===void 0){Ti=window,ta=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype;ra=Ft(r,"firstChild").get,ia=Ft(r,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function jr(e=""){return document.createTextNode(e)}function kr(e){return ra.call(e)}function $r(e){return ia.call(e)}function o(e,r){return kr(e)}function Z(e,r){{var t=kr(e);return t instanceof Comment&&t.data===""?$r(t):t}}function c(e,r=1,t=!1){let a=e;for(;r--;)a=$r(a);return a}function Tn(e){e.textContent=""}function rr(e){var r=at|yt,t=qe!==null&&qe.f&at?qe:null;return Me===null||t!==null&&t.f&it?r|=it:Me.f|=Ki,{ctx:Ye,deps:null,effects:null,equals:Vi,f:r,fn:e,reactions:null,rv:0,v:null,wv:0,parent:t??Me}}function me(e){const r=rr(e);return r.equals=ni,r}function aa(e){var r=e.effects;if(r!==null){e.effects=null;for(var t=0;t<r.length;t+=1)Tt(r[t])}}function Mn(e){for(var r=e.parent;r!==null;){if(!(r.f&at))return r;r=r.parent}return null}function qn(e){var r,t=Me;st(Mn(e));try{aa(e),r=ha(e)}finally{st(t)}return r}function na(e){var r=qn(e),t=(St||e.f&it)&&e.deps!==null?Ht:Xe;ut(e,t),e.equals(r)||(e.v=r,e.wv=ma())}function sa(e){Me===null&&qe===null&&nn(),qe!==null&&qe.f&it&&Me===null&&an(),vi&&rn()}function An(e,r){var t=r.last;t===null?r.last=r.first=e:(t.next=e,e.prev=t,r.last=e)}function Kt(e,r,t,a=!0){var n=(e&vr)!==0,s=Me,u={ctx:Ye,deps:null,nodes_start:null,nodes_end:null,f:e|yt,first:null,fn:r,last:null,next:null,parent:n?null:s,prev:null,teardown:null,transitions:null,wv:0};if(t){var v=Ut;try{qi(!0),di(u),u.f|=Hi}catch(f){throw Tt(u),f}finally{qi(v)}}else r!==null&&Or(u);var m=t&&u.deps===null&&u.first===null&&u.nodes_start===null&&u.teardown===null&&(u.f&(Ki|hr))===0;if(!m&&!n&&a&&(s!==null&&An(u,s),qe!==null&&qe.f&at)){var l=qe;(l.effects??(l.effects=[])).push(u)}return u}function la(e){const r=Kt(Tr,null,!1);return ut(r,Xe),r.teardown=e,r}function Mi(e){sa();var r=Me!==null&&(Me.f&bt)!==0&&Ye!==null&&!Ye.m;if(r){var t=Ye;(t.e??(t.e=[])).push({fn:e,effect:Me,reaction:qe})}else{var a=Vt(e);return a}}function jn(e){return sa(),cr(e)}function $n(e){const r=Kt(vr,e,!0);return(t={})=>new Promise(a=>{t.outro?$t(r,()=>{Tt(r),a(void 0)}):(Tt(r),a(void 0))})}function Vt(e){return Kt(Bi,e,!1)}function cr(e){return Kt(Tr,e,!0)}function C(e,r=[],t=rr){const a=r.map(t);return Ir(()=>e(...a.map(i)))}function Ir(e,r=0){return Kt(Tr|Mr|r,e,!0)}function It(e,r=!0){return Kt(Tr|bt,e,!0,r)}function oa(e){var r=e.teardown;if(r!==null){const t=vi,a=qe;Ai(!0),nt(null);try{r.call(null)}finally{Ai(t),nt(a)}}}function va(e,r=!1){var t=e.first;for(e.first=e.last=null;t!==null;){var a=t.next;Tt(t,r),t=a}}function In(e){for(var r=e.first;r!==null;){var t=r.next;r.f&bt||Tt(r),r=t}}function Tt(e,r=!0){var t=!1;if((r||e.f&Ja)&&e.nodes_start!==null){for(var a=e.nodes_start,n=e.nodes_end;a!==null;){var s=a===n?null:$r(a);a.remove(),a=s}t=!0}va(e,r&&!t),Cr(e,0),ut(e,qr);var u=e.transitions;if(u!==null)for(const m of u)m.stop();oa(e);var v=e.parent;v!==null&&v.first!==null&&da(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function da(e){var r=e.parent,t=e.prev,a=e.next;t!==null&&(t.next=a),a!==null&&(a.prev=t),r!==null&&(r.first===e&&(r.first=a),r.last===e&&(r.last=t))}function $t(e,r){var t=[];oi(e,t,!0),ca(t,()=>{Tt(e),r&&r()})}function ca(e,r){var t=e.length;if(t>0){var a=()=>--t||r();for(var n of e)n.out(a)}else r()}function oi(e,r,t){if(!(e.f&mt)){if(e.f^=mt,e.transitions!==null)for(const u of e.transitions)(u.is_global||t)&&r.push(u);for(var a=e.first;a!==null;){var n=a.next,s=(a.f&Ar)!==0||(a.f&bt)!==0;oi(a,r,s?t:!1),a=n}}}function Bt(e){ua(e,!0)}function ua(e,r){if(e.f&mt){e.f^=mt,e.f&Xe||(e.f^=Xe),ur(e)&&(ut(e,yt),Or(e));for(var t=e.first;t!==null;){var a=t.next,n=(t.f&Ar)!==0||(t.f&bt)!==0;ua(t,n?r:!1),t=a}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||r)&&s.in()}}let wr=!1,Gr=[];function fa(){wr=!1;const e=Gr.slice();Gr=[],Vr(e)}function Nt(e){wr||(wr=!0,queueMicrotask(fa)),Gr.push(e)}function Nn(){wr&&fa()}const _a=0,On=1;let mr=!1,gr=_a,ir=!1,ar=null,Ut=!1,vi=!1;function qi(e){Ut=e}function Ai(e){vi=e}let At=[],zt=0;let qe=null,vt=!1;function nt(e){qe=e}let Me=null;function st(e){Me=e}let dt=null;function Yn(e){dt=e}let Qe=null,tt=0,ft=null;function Rn(e){ft=e}let pa=1,xr=0,St=!1,Dt=null;function ma(){return++pa}function ur(e){var _;var r=e.f;if(r&yt)return!0;if(r&Ht){var t=e.deps,a=(r&it)!==0;if(t!==null){var n,s,u=(r&br)!==0,v=a&&Me!==null&&!St,m=t.length;if(u||v){var l=e,f=l.parent;for(n=0;n<m;n++)s=t[n],(u||!((_=s==null?void 0:s.reactions)!=null&&_.includes(l)))&&(s.reactions??(s.reactions=[])).push(l);u&&(l.f^=br),v&&f!==null&&!(f.f&it)&&(l.f^=it)}for(n=0;n<m;n++)if(s=t[n],ur(s)&&na(s),s.wv>e.wv)return!0}(!a||Me!==null&&!St)&&ut(e,Xe)}return!1}function Ln(e,r){for(var t=r;t!==null;){if(t.f&hr)try{t.fn(e);return}catch{t.f^=hr}t=t.parent}throw mr=!1,e}function Pn(e){return(e.f&qr)===0&&(e.parent===null||(e.parent.f&hr)===0)}function Nr(e,r,t,a){if(mr){if(t===null&&(mr=!1),Pn(r))throw e;return}t!==null&&(mr=!0);{Ln(e,r);return}}function ga(e,r,t=!0){var a=e.reactions;if(a!==null)for(var n=0;n<a.length;n++){var s=a[n];s.f&at?ga(s,r,!1):r===s&&(t?ut(s,yt):s.f&Xe&&ut(s,Ht),Or(s))}}function ha(e){var g;var r=Qe,t=tt,a=ft,n=qe,s=St,u=dt,v=Ye,m=vt,l=e.f;Qe=null,tt=0,ft=null,qe=l&(bt|vr)?null:e,St=(l&it)!==0&&(!Ut||n===null||m),dt=null,yr(e.ctx),vt=!1,xr++;try{var f=(0,e.fn)(),_=e.deps;if(Qe!==null){var d;if(Cr(e,tt),_!==null&&tt>0)for(_.length=tt+Qe.length,d=0;d<Qe.length;d++)_[tt+d]=Qe[d];else e.deps=_=Qe;if(!St)for(d=tt;d<_.length;d++)((g=_[d]).reactions??(g.reactions=[])).push(e)}else _!==null&&tt<_.length&&(Cr(e,tt),_.length=tt);if(Wt()&&ft!==null&&!vt&&_!==null&&!(e.f&(at|Ht|yt)))for(d=0;d<ft.length;d++)ga(ft[d],e);return n!==null&&xr++,f}finally{Qe=r,tt=t,ft=a,qe=n,St=s,dt=u,yr(v),vt=m}}function Fn(e,r){let t=r.reactions;if(t!==null){var a=Wa.call(t,e);if(a!==-1){var n=t.length-1;n===0?t=r.reactions=null:(t[a]=t[n],t.pop())}}t===null&&r.f&at&&(Qe===null||!Qe.includes(r))&&(ut(r,Ht),r.f&(it|br)||(r.f^=br),aa(r),Cr(r,0))}function Cr(e,r){var t=e.deps;if(t!==null)for(var a=r;a<t.length;a++)Fn(e,t[a])}function di(e){var r=e.f;if(!(r&qr)){ut(e,Xe);var t=Me,a=Ye;Me=e;try{r&Mr?In(e):va(e),oa(e);var n=ha(e);e.teardown=typeof n=="function"?n:null,e.wv=pa;var s=e.deps,u;Kr&&un&&e.f&yt}catch(v){Nr(v,e,t,a||e.ctx)}finally{Me=t}}}function ba(){if(zt>1e3){zt=0;try{sn()}catch(e){if(ar!==null)Nr(e,ar,null);else throw e}}zt++}function ya(e){var r=e.length;if(r!==0){ba();var t=Ut;Ut=!0;try{for(var a=0;a<r;a++){var n=e[a];n.f&Xe||(n.f^=Xe);var s=Bn(n);Un(s)}}finally{Ut=t}}}function Un(e){var r=e.length;if(r!==0)for(var t=0;t<r;t++){var a=e[t];if(!(a.f&(qr|mt)))try{ur(a)&&(di(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null?da(a):a.fn=null))}catch(n){Nr(n,a,null,a.ctx)}}}function zn(){if(ir=!1,zt>1001)return;const e=At;At=[],ya(e),ir||(zt=0,ar=null)}function Or(e){gr===_a&&(ir||(ir=!0,queueMicrotask(zn))),ar=e;for(var r=e;r.parent!==null;){r=r.parent;var t=r.f;if(t&(vr|bt)){if(!(t&Xe))return;r.f^=Xe}}At.push(r)}function Bn(e){var r=[],t=e.first;e:for(;t!==null;){var a=t.f,n=(a&bt)!==0,s=n&&(a&Xe)!==0,u=t.next;if(!s&&!(a&mt)){if(a&Bi)r.push(t);else if(n)t.f^=Xe;else{var v=qe;try{qe=t,ur(t)&&di(t)}catch(f){Nr(f,t,null,t.ctx)}finally{qe=v}}var m=t.first;if(m!==null){t=m;continue}}if(u===null){let f=t.parent;for(;f!==null;){if(e===f)break e;var l=f.next;if(l!==null){t=l;continue e}f=f.parent}}t=u}return r}function ci(e){var r=gr,t=At;try{ba();const n=[];gr=On,At=n,ir=!1,ya(t);var a=e==null?void 0:e();return Nn(),(At.length>0||n.length>0)&&ci(),zt=0,ar=null,a}finally{gr=r,At=t}}async function Hn(){await Promise.resolve(),ci()}function i(e){var r=e.f,t=(r&at)!==0;if(Dt!==null&&Dt.add(e),qe!==null&&!vt){dt!==null&&dt.includes(e)&&dn();var a=qe.deps;e.rv<xr&&(e.rv=xr,Qe===null&&a!==null&&a[tt]===e?tt++:Qe===null?Qe=[e]:(!St||!Qe.includes(e))&&Qe.push(e))}else if(t&&e.deps===null&&e.effects===null){var n=e,s=n.parent;s!==null&&!(s.f&it)&&(n.f^=it)}return t&&(n=e,ur(n)&&na(n)),e.v}function Wn(e){var r=Dt;Dt=new Set;var t=Dt,a;try{if(ct(e),r!==null)for(a of Dt)r.add(a)}finally{Dt=r}return t}function Qt(e){var r=Wn(()=>ct(e));for(var t of r)if(t.f&Wi)for(const a of t.deps||[])a.f&at||Et(a,a.v);else Et(t,t.v)}function ct(e){var r=vt;try{return vt=!0,e()}finally{vt=r}}const Kn=-7169;function ut(e,r){e.f=e.f&Kn|r}function Vn(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(gt in e)Qr(e);else if(!Array.isArray(e))for(let r in e){const t=e[r];typeof t=="object"&&t&&gt in t&&Qr(t)}}}function Qr(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let a in e)try{Qr(e[a],r)}catch{}const t=ai(e);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const a=zi(t);for(let n in a){const s=a[n].get;if(s)try{s.call(e)}catch{}}}}}const Gn=["touchstart","touchmove"];function Qn(e){return Gn.includes(e)}let ji=!1;function Xn(){ji||(ji=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const t of e.target.elements)(r=t.__on_r)==null||r.call(t)})},{capture:!0}))}function ui(e){var r=qe,t=Me;nt(null),st(null);try{return e()}finally{nt(r),st(t)}}function Yr(e,r,t,a=t){e.addEventListener(r,()=>ui(t));const n=e.__on_r;n?e.__on_r=()=>{n(),a(!0)}:e.__on_r=()=>a(!0),Xn()}const ka=new Set,Xr=new Set;function Zn(e,r,t,a={}){function n(s){if(a.capture||Xt.call(r,s),!s.cancelBubble)return ui(()=>t==null?void 0:t.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Nt(()=>{r.addEventListener(e,n,a)}):r.addEventListener(e,n,a),n}function be(e,r,t,a,n){var s={capture:a,passive:n},u=Zn(e,r,t,s);(r===document.body||r===window||r===document)&&la(()=>{r.removeEventListener(e,u,s)})}function Gt(e){for(var r=0;r<e.length;r++)ka.add(e[r]);for(var t of Xr)t(e)}function Xt(e){var k;var r=this,t=r.ownerDocument,a=e.type,n=((k=e.composedPath)==null?void 0:k.call(e))||[],s=n[0]||e.target,u=0,v=e.__root;if(v){var m=n.indexOf(v);if(m!==-1&&(r===document||r===window)){e.__root=r;return}var l=n.indexOf(r);if(l===-1)return;m<=l&&(u=m)}if(s=n[u]||e.target,s!==r){Ka(e,"currentTarget",{configurable:!0,get(){return s||t}});var f=qe,_=Me;nt(null),st(null);try{for(var d,g=[];s!==null;){var h=s.assignedSlot||s.parentNode||s.host||null;try{var x=s["__"+a];if(x!==void 0&&!s.disabled)if(ri(x)){var[S,...j]=x;S.apply(s,[e,...j])}else x.call(s,e)}catch(T){d?g.push(T):d=T}if(e.cancelBubble||h===r||h===null)break;s=h}if(d){for(let T of g)queueMicrotask(()=>{throw T});throw d}}finally{e.__root=r,delete e.currentTarget,nt(f),st(_)}}}function Jn(e){var r=document.createElement("template");return r.innerHTML=e,r.content}function Dr(e,r){var t=Me;t.nodes_start===null&&(t.nodes_start=e,t.nodes_end=r)}function b(e,r){var t=(r&Cn)!==0,a=(r&Dn)!==0,n,s=!e.startsWith("<!>");return()=>{n===void 0&&(n=Jn(s?e:"<!>"+e),t||(n=kr(n)));var u=a||ta?document.importNode(n,!0):n.cloneNode(!0);if(t){var v=kr(u),m=u.lastChild;Dr(v,m)}else Dr(u,u);return u}}function Mt(e=""){{var r=jr(e+"");return Dr(r,r),r}}function Ce(){var e=document.createDocumentFragment(),r=document.createComment(""),t=jr();return e.append(r,t),Dr(r,t),e}function p(e,r){e!==null&&e.before(r)}let Zr=!0;function w(e,r){var t=r==null?"":typeof r=="object"?r+"":r;t!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=t,e.nodeValue=t+"")}function es(e,r){return ts(e,r)}const Yt=new Map;function ts(e,{target:r,anchor:t,props:a={},events:n,context:s,intro:u=!0}){En();var v=new Set,m=_=>{for(var d=0;d<_.length;d++){var g=_[d];if(!v.has(g)){v.add(g);var h=Qn(g);r.addEventListener(g,Xt,{passive:h});var x=Yt.get(g);x===void 0?(document.addEventListener(g,Xt,{passive:h}),Yt.set(g,1)):Yt.set(g,x+1)}}};m(ii(ka)),Xr.add(m);var l=void 0,f=$n(()=>{var _=t??r.appendChild(jr());return It(()=>{if(s){Be({});var d=Ye;d.c=s}n&&(a.$$events=n),Zr=u,l=e(_,a)||{},Zr=!0,s&&He()}),()=>{var h;for(var d of v){r.removeEventListener(d,Xt);var g=Yt.get(d);--g===0?(document.removeEventListener(d,Xt),Yt.delete(d)):Yt.set(d,g)}Xr.delete(m),_!==t&&((h=_.parentNode)==null||h.removeChild(_))}});return rs.set(l,f),l}let rs=new WeakMap;const Ur=0,fr=1,zr=2;function Jt(e,r,t,a,n){var s=e,u=Wt(),v=Ye,m=ze,l,f,_,d=(u?Ge:tr)(void 0),g=(u?Ge:tr)(void 0),h=!1;function x(j,k){h=!0,k&&(st(S),nt(S),yr(v));try{j===Ur&&t&&(l?Bt(l):l=It(()=>t(s))),j===fr&&a&&(f?Bt(f):f=It(()=>a(s,d))),j!==Ur&&l&&$t(l,()=>l=null),j!==fr&&f&&$t(f,()=>f=null),j!==zr&&_&&$t(_,()=>_=null)}finally{k&&(yr(null),nt(null),st(null),ci())}}var S=Ir(()=>{if(m!==(m=r())){if(Xa(m)){var j=m;h=!1,j.then(k=>{j===m&&(Et(d,k),x(fr,!0))},k=>{if(j===m)throw Et(g,k),x(zr,!0),g.v}),Nt(()=>{h||x(Ur,!0)})}else Et(d,m),x(fr,!1);return()=>m=ze}})}function O(e,r,t=!1){var a=e,n=null,s=null,u=ze,v=t?Ar:0,m=!1;const l=(_,d=!0)=>{m=!0,f(d,_)},f=(_,d)=>{u!==(u=_)&&(u?(n?Bt(n):d&&(n=It(()=>d(a))),s&&$t(s,()=>{s=null})):(s?Bt(s):d&&(s=It(()=>d(a))),n&&$t(n,()=>{n=null})))};Ir(()=>{m=!1,r(l),m||f(null,null)},v)}function ae(e,r){return r}function is(e,r,t,a){for(var n=[],s=r.length,u=0;u<s;u++)oi(r[u].e,n,!0);var v=s>0&&n.length===0&&t!==null;if(v){var m=t.parentNode;Tn(m),m.append(t),a.clear(),kt(e,r[0].prev,r[s-1].next)}ca(n,()=>{for(var l=0;l<s;l++){var f=r[l];v||(a.delete(f.k),kt(e,f.prev,f.next)),Tt(f.e,!v)}})}function ne(e,r,t,a,n,s=null){var u=e,v={flags:r,items:new Map,first:null},m=(r&Qi)!==0;if(m){var l=e;u=l.appendChild(jr())}var f=null,_=!1,d=me(()=>{var g=t();return ri(g)?g:g==null?[]:ii(g)});Ir(()=>{var g=i(d),h=g.length;_&&h===0||(_=h===0,as(g,v,u,n,r,a,t),s!==null&&(h===0?f?Bt(f):f=It(()=>s(u)):f!==null&&$t(f,()=>{f=null})),i(d))})}function as(e,r,t,a,n,s,u){var Y,M,U,Q;var v=(n&_n)!==0,m=(n&(si|li))!==0,l=e.length,f=r.items,_=r.first,d=_,g,h=null,x,S=[],j=[],k,T,q,F;if(v)for(F=0;F<l;F+=1)k=e[F],T=s(k,F),q=f.get(T),q!==void 0&&((Y=q.a)==null||Y.measure(),(x??(x=new Set)).add(q));for(F=0;F<l;F+=1){if(k=e[F],T=s(k,F),q=f.get(T),q===void 0){var J=d?d.e.nodes_start:t;h=ss(J,r,h,h===null?r.first:h.next,k,T,F,a,n,u),f.set(T,h),S=[],j=[],d=h.next;continue}if(m&&ns(q,k,F,n),q.e.f&mt&&(Bt(q.e),v&&((M=q.a)==null||M.unfix(),(x??(x=new Set)).delete(q))),q!==d){if(g!==void 0&&g.has(q)){if(S.length<j.length){var X=j[0],N;h=X.prev;var te=S[0],G=S[S.length-1];for(N=0;N<S.length;N+=1)$i(S[N],X,t);for(N=0;N<j.length;N+=1)g.delete(j[N]);kt(r,te.prev,G.next),kt(r,h,te),kt(r,G,X),d=X,h=G,F-=1,S=[],j=[]}else g.delete(q),$i(q,d,t),kt(r,q.prev,q.next),kt(r,q,h===null?r.first:h.next),kt(r,h,q),h=q;continue}for(S=[],j=[];d!==null&&d.k!==T;)d.e.f&mt||(g??(g=new Set)).add(d),j.push(d),d=d.next;if(d===null)continue;q=d}S.push(q),h=q,d=q.next}if(d!==null||g!==void 0){for(var W=g===void 0?[]:ii(g);d!==null;)d.e.f&mt||W.push(d),d=d.next;var Se=W.length;if(Se>0){var K=n&Qi&&l===0?t:null;if(v){for(F=0;F<Se;F+=1)(U=W[F].a)==null||U.measure();for(F=0;F<Se;F+=1)(Q=W[F].a)==null||Q.fix()}is(r,W,K,f)}}v&&Nt(()=>{var re;if(x!==void 0)for(q of x)(re=q.a)==null||re.apply()}),Me.first=r.first&&r.first.e,Me.last=h&&h.e}function ns(e,r,t,a){a&si&&Et(e.v,r),a&li?Et(e.i,t):e.i=t}function ss(e,r,t,a,n,s,u,v,m,l){var f=(m&si)!==0,_=(m&pn)===0,d=f?_?tr(n):Ge(n):n,g=m&li?Ge(u):u,h={i:g,v:d,k:s,a:null,e:null,prev:t,next:a};try{return h.e=It(()=>v(e,d,g,l),Ji),h.e.prev=t&&t.e,h.e.next=a&&a.e,t===null?r.first=h:(t.next=h,t.e.next=h.e),a!==null&&(a.prev=h,a.e.prev=h.e),h}finally{}}function $i(e,r,t){for(var a=e.next?e.next.e.nodes_start:t,n=r?r.e.nodes_start:t,s=e.e.nodes_start;s!==a;){var u=$r(s);n.before(s),s=u}}function kt(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function wa(e){var r,t,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(r=0;r<n;r++)e[r]&&(t=wa(e[r]))&&(a&&(a+=" "),a+=t)}else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function ls(){for(var e,r,t=0,a="",n=arguments.length;t<n;t++)(e=arguments[t])&&(r=wa(e))&&(a&&(a+=" "),a+=r);return a}function Rt(e){return typeof e=="object"?ls(e):e??""}function ht(e,r,t,a){var n=e.__attributes??(e.__attributes={});n[r]!==(n[r]=t)&&(r==="style"&&"__styles"in e&&(e.__styles={}),r==="loading"&&(e[tn]=t),t==null?e.removeAttribute(r):typeof t!="string"&&os(e).includes(r)?e[r]=t:e.setAttribute(r,t))}var Ii=new Map;function os(e){var r=Ii.get(e.nodeName);if(r)return r;Ii.set(e.nodeName,r=[]);for(var t,a=e,n=Element.prototype;n!==a;){t=zi(a);for(var s in t)t[s].set&&r.push(s);a=ai(a)}return r}function he(e,r,t){var a=e.__className,n=vs(r,t);(a!==n||Ji)&&(r==null&&!t?e.removeAttribute("class"):e.className=n,e.__className=n)}function vs(e,r){return(e??"")+(r?" "+r:"")}const ds=()=>performance.now(),pt={tick:e=>requestAnimationFrame(e),now:()=>ds(),tasks:new Set};function xa(){const e=pt.now();pt.tasks.forEach(r=>{r.c(e)||(pt.tasks.delete(r),r.f())}),pt.tasks.size!==0&&pt.tick(xa)}function cs(e){let r;return pt.tasks.size===0&&pt.tick(xa),{promise:new Promise(t=>{pt.tasks.add(r={c:e,f:t})}),abort(){pt.tasks.delete(r)}}}function _r(e,r){ui(()=>{e.dispatchEvent(new CustomEvent(r))})}function us(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const r=e.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Ni(e){const r={},t=e.split(";");for(const a of t){const[n,s]=a.split(":");if(!n||s===void 0)break;const u=us(n.trim());r[u]=s.trim()}return r}const fs=e=>e;function qt(e,r,t,a){var n=(e&kn)!==0,s=(e&wn)!==0,u=n&&s,v=(e&xn)!==0,m=u?"both":n?"in":"out",l,f=r.inert,_=r.style.overflow,d,g;function h(){var T=qe,q=Me;nt(null),st(null);try{return l??(l=t()(r,(a==null?void 0:a())??{},{direction:m}))}finally{nt(T),st(q)}}var x={is_global:v,in(){var T;if(r.inert=f,!n){g==null||g.abort(),(T=g==null?void 0:g.reset)==null||T.call(g);return}s||d==null||d.abort(),_r(r,"introstart"),d=Jr(r,h(),g,1,()=>{_r(r,"introend"),d==null||d.abort(),d=l=void 0,r.style.overflow=_})},out(T){if(!s){T==null||T(),l=void 0;return}r.inert=!0,_r(r,"outrostart"),g=Jr(r,h(),d,0,()=>{_r(r,"outroend"),T==null||T()})},stop:()=>{d==null||d.abort(),g==null||g.abort()}},S=Me;if((S.transitions??(S.transitions=[])).push(x),n&&Zr){var j=v;if(!j){for(var k=S.parent;k&&k.f&Ar;)for(;(k=k.parent)&&!(k.f&Mr););j=!k||(k.f&Hi)!==0}j&&Vt(()=>{ct(()=>x.in())})}}function Jr(e,r,t,a,n){var s=a===1;if(Qa(r)){var u,v=!1;return Nt(()=>{if(!v){var S=r({direction:s?"in":"out"});u=Jr(e,S,t,a,n)}}),{abort:()=>{v=!0,u==null||u.abort()},deactivate:()=>u.deactivate(),reset:()=>u.reset(),t:()=>u.t()}}if(t==null||t.deactivate(),!(r!=null&&r.duration))return n(),{abort:xt,deactivate:xt,reset:xt,t:()=>a};const{delay:m=0,css:l,tick:f,easing:_=fs}=r;var d=[];if(s&&t===void 0&&(f&&f(0,1),l)){var g=Ni(l(0,1));d.push(g,g)}var h=()=>1-a,x=e.animate(d,{duration:m});return x.onfinish=()=>{var S=(t==null?void 0:t.t())??1-a;t==null||t.abort();var j=a-S,k=r.duration*Math.abs(j),T=[];if(k>0){var q=!1;if(l)for(var F=Math.ceil(k/16.666666666666668),J=0;J<=F;J+=1){var X=S+j*_(J/F),N=Ni(l(X,1-X));T.push(N),q||(q=N.overflow==="hidden")}q&&(e.style.overflow="hidden"),h=()=>{var te=x.currentTime;return S+j*_(te/k)},f&&cs(()=>{if(x.playState!=="running")return!1;var te=h();return f(te,1-te),!0})}x=e.animate(T,{duration:k,fill:"forwards"}),x.onfinish=()=>{h=()=>a,f==null||f(a,1-a),n()}},{abort:()=>{x&&(x.cancel(),x.effect=null,x.onfinish=xt)},deactivate:()=>{n=xt},reset:()=>{a===0&&(f==null||f(1,0))},t:()=>h()}}function ei(e,r,t=r){var a=Wt();Yr(e,"input",n=>{var s=n?e.defaultValue:e.value;if(s=Hr(e)?Wr(s):s,t(s),a&&s!==(s=r())){var u=e.selectionStart,v=e.selectionEnd;e.value=s??"",v!==null&&(e.selectionStart=u,e.selectionEnd=Math.min(v,e.value.length))}}),ct(r)==null&&e.value&&t(Hr(e)?Wr(e.value):e.value),cr(()=>{var n=r();Hr(e)&&n===Wr(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}const Br=new Set;function Lt(e,r,t,a,n=a){var s=t.getAttribute("type")==="checkbox",u=e;if(r!==null)for(var v of r)u=u[v]??(u[v]=[]);u.push(t),Yr(t,"change",()=>{var m=t.__value;s&&(m=ps(u,m,t.checked)),n(m)},()=>n(s?[]:null)),cr(()=>{var m=a();s?(m=m||[],t.checked=m.includes(t.__value)):t.checked=ea(t.__value,m)}),la(()=>{var m=u.indexOf(t);m!==-1&&u.splice(m,1)}),Br.has(u)||(Br.add(u),Nt(()=>{u.sort((m,l)=>m.compareDocumentPosition(l)===4?-1:1),Br.delete(u)})),Nt(()=>{})}function _s(e,r,t=r){Yr(e,"change",a=>{var n=a?e.defaultChecked:e.checked;t(n)}),ct(r)==null&&t(e.checked),cr(()=>{var a=r();e.checked=!!a})}function ps(e,r,t){for(var a=new Set,n=0;n<e.length;n+=1)e[n].checked&&a.add(e[n].__value);return t||a.delete(r),Array.from(a)}function Hr(e){var r=e.type;return r==="number"||r==="range"}function Wr(e){return e===""?null:+e}function Ca(e,r,t){if(e.multiple)return gs(e,r);for(var a of e.options){var n=er(a);if(ea(n,r)){a.selected=!0;return}}(!t||r!==void 0)&&(e.selectedIndex=-1)}function ms(e,r){Vt(()=>{var t=new MutationObserver(()=>{var a=e.__value;Ca(e,a)});return t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function Zt(e,r,t=r){var a=!0;Yr(e,"change",n=>{var s=n?"[selected]":":checked",u;if(e.multiple)u=[].map.call(e.querySelectorAll(s),er);else{var v=e.querySelector(s)??e.querySelector("option:not([disabled])");u=v&&er(v)}t(u)}),Vt(()=>{var n=r();if(Ca(e,n,a),a&&n===void 0){var s=e.querySelector(":checked");s!==null&&(n=er(s),t(n))}e.__value=n,a=!1}),ms(e)}function gs(e,r){for(var t of e.options)t.selected=~r.indexOf(er(t))}function er(e){return"__value"in e?e.__value:e.value}function Oi(e,r){return e===r||(e==null?void 0:e[gt])===r}function hs(e={},r,t,a){return Vt(()=>{var n,s;return cr(()=>{n=s,s=[],ct(()=>{e!==t(...s)&&(r(e,...s),n&&Oi(t(...n),e)&&r(null,...n))})}),()=>{Nt(()=>{s&&Oi(t(...s),e)&&r(null,...s)})}}),e}function Je(e=!1){const r=Ye,t=r.l.u;if(!t)return;let a=()=>Vn(r.s);if(e){let n=0,s={};const u=rr(()=>{let v=!1;const m=r.s;for(const l in m)m[l]!==s[l]&&(s[l]=m[l],v=!0);return v&&n++,n});a=()=>i(u)}t.b.length&&jn(()=>{Yi(r,a),Vr(t.b)}),Mi(()=>{const n=ct(()=>t.m.map(Za));return()=>{for(const s of n)typeof s=="function"&&s()}}),t.a.length&&Mi(()=>{Yi(r,a),Vr(t.a)})}function Yi(e,r){if(e.l.s)for(const t of e.l.s)i(t);r()}const Pt=[];function bs(e,r=xt){let t=null;const a=new Set;function n(v){if(Gi(e,v)&&(e=v,t)){const m=!Pt.length;for(const l of a)l[1](),Pt.push(l,e);if(m){for(let l=0;l<Pt.length;l+=2)Pt[l][0](Pt[l+1]);Pt.length=0}}}function s(v){n(v(e))}function u(v,m=xt){const l=[v,m];return a.add(l),a.size===1&&(t=r(n,s)||xt),v(e),()=>{a.delete(l),a.size===0&&t&&(t(),t=null)}}return{set:n,update:s,subscribe:u}}let pr=!1;function ys(e){var r=pr;try{return pr=!1,[e(),pr]}finally{pr=r}}function De(e,r,t,a){var X;var n=(t&mn)!==0,s=!dr||(t&gn)!==0,u=(t&bn)!==0,v=(t&yn)!==0,m=!1,l;u?[l,m]=ys(()=>e[r]):l=e[r];var f=gt in e||en in e,_=u&&(((X=Ft(e,r))==null?void 0:X.set)??(f&&r in e&&(N=>e[r]=N)))||void 0,d=a,g=!0,h=!1,x=()=>(h=!0,g&&(g=!1,v?d=ct(a):d=a),d);l===void 0&&a!==void 0&&(_&&s&&ln(),l=x(),_&&_(l));var S;if(s)S=()=>{var N=e[r];return N===void 0?x():(g=!0,h=!1,N)};else{var j=(n?rr:me)(()=>e[r]);j.f|=Wi,S=()=>{var N=i(j);return N!==void 0&&(d=void 0),N===void 0?d:N}}if(!(t&hn))return S;if(_){var k=e.$$legacy;return function(N,te){return arguments.length>0?((!s||!te||k||m)&&_(te?S():N),N):S()}}var T=!1,q=!1,F=tr(l),J=rr(()=>{var N=S(),te=i(F);return T?(T=!1,q=!0,te):(q=!1,F.v=N)});return n||(J.equals=ni),function(N,te){if(Dt!==null&&(T=q,S(),i(F)),arguments.length>0){const G=te?i(J):s&&u?Ct(N):N;return J.equals(G)||(T=!0,I(F,G),h&&d!==void 0&&(d=G),ct(()=>i(J))),N}return i(J)}}const ks="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ks);fn();const ws=e=>e;function xs(e){const r=e-1;return r*r*r+1}function Cs(e,{delay:r=0,duration:t=400,easing:a=ws}={}){const n=+getComputedStyle(e).opacity;return{delay:r,duration:t,easing:a,css:s=>`opacity: ${s*n}`}}function Ri(e,r){for(const t in r)e[t]=r[t];return e}function Ds({fallback:e,...r}){const t=new Map,a=new Map;function n(u,v,m){const{delay:l=0,duration:f=J=>Math.sqrt(J)*30,easing:_=xs}=Ri(Ri({},r),m),d=u.getBoundingClientRect(),g=v.getBoundingClientRect(),h=d.left-g.left,x=d.top-g.top,S=d.width/g.width,j=d.height/g.height,k=Math.sqrt(h*h+x*x),T=getComputedStyle(v),q=T.transform==="none"?"":T.transform,F=+T.opacity;return{delay:l,duration:typeof f=="function"?f(k):f,easing:_,css:(J,X)=>`
			   opacity: ${J*F};
			   transform-origin: top left;
			   transform: ${q} translate(${X*h}px,${X*x}px) scale(${J+(1-J)*S}, ${J+(1-J)*j});
		   `}}function s(u,v,m){return(l,f)=>(u.set(f.key,l),()=>{if(v.has(f.key)){const _=v.get(f.key);return v.delete(f.key),n(_,l,f)}return u.delete(f.key),e&&e(l,f,m)})}return[s(a,t,!1),s(t,a,!0)]}var Ss=b("<div></div>"),Es=b('<div class="duel_card_row svelte-14cfp8z"><div> </div> <div> </div></div>'),Ts=b('<div class="duel_card_row svelte-14cfp8z"><div class="svelte-14cfp8z"></div> <div class="svelte-14cfp8z"> </div></div>'),Ms=b('<div class="duel_card_row svelte-14cfp8z"><div class="svelte-14cfp8z"></div> <div class="svelte-14cfp8z"> </div></div>'),qs=b('<div class="duel_card_row svelte-14cfp8z"><div> </div> <div> </div></div>'),As=b('<div class="duel_card_row svelte-14cfp8z"><div class="svelte-14cfp8z"></div> <div class="svelte-14cfp8z">ペンデュラム</div></div>'),js=b('<div class="duel_card_row duel_card_detail svelte-14cfp8z"><div class="svelte-14cfp8z"> </div></div> <div class="duel_card_row duel_card_detail svelte-14cfp8z"><div class="svelte-14cfp8z"></div> <div class="svelte-14cfp8z"><span> </span> / <span> </span></div></div>',1),$s=b('<button><div class="duel_card_body svelte-14cfp8z"><div class="duel_card_row svelte-14cfp8z" style="position:relative"><div class="svelte-14cfp8z"> </div> <div class="svelte-14cfp8z"></div> <!></div> <!> <!> <!> <!></div></button>'),Is=b('<button><div class="svelte-14cfp8z">裏守備</div></button>'),Ns=b('<div class="duel_card duel_card_face_down svelte-14cfp8z"><div class="svelte-14cfp8z">セット</div></div>');function _t(e,r){Be(r,!1);let t=De(r,"entity",8),a=De(r,"state",8,"Disabled"),n=De(r,"selectedList",28,()=>[]),s=De(r,"isVisibleForcibly",8,!1),u=De(r,"isWideMode",8,!1),v=De(r,"dummyActionInfos",24,()=>[]),m=De(r,"cardActionResolve",8),l=De(r,"entitySelectResolve",8,()=>{}),f,_=ye(!1),d=()=>{},g=De(r,"qty",12,void 0);const h=G=>{var W;f=G.activator,I(_,!1),g((W=G.entitiesChoices)==null?void 0:W.qty),d=G.resolve};t().field.duel.view.onWaitStart.append(h);let x=ye(!1);const S=()=>{if(a()!=="Disabled"&&a()==="Selectable"&&g()===1){if(n().some(G=>G.seq!==t().seq)){n([t()]);return}g()===1&&l()&&l()([t()])}},j=G=>{(t().face==="FaceUp"||t().owner===t().field.duel.duelists.Below&&(t().isUnderControl||s()))&&t().field.duel.view.showCardInfo(t(),G??"Normal")},k=()=>{if(j(),console.log(t().toString(),a(),v().length,m()),a()==="Disabled")return;if(a()==="Selectable"){I(_,!i(_)),g()===1&&(n().splice(0),t().duel.view.requireUpdate()),n(i(_)?[...n(),t()]:n().filter(W=>W!==t()));return}if(v().length===0)return;if(v().length===1){const W=v()[0];if(m()){m()(W);return}console.log(t().toString(),a(),v().length,d),d({actionInfo:W});return}if(!f)return;t().field.duel.view.modalController.actionSelector.show({title:"行動を選択。",activator:f,dummyActionInfos:v(),cancelable:!0}).then(W=>{W&&d({actionInfo:W})})},T=G=>{var W;window.getSelection&&((W=window.getSelection())==null||W.removeAllRanges()),console.info("drag start",G,v()),t().field.duel.view.setDraggingActions(v()),I(x,!0)},q=G=>{console.info("drag end",G,v()),t().field.duel.view.removeDraggingActions(),G.dataTransfer&&I(x,!1)},F=()=>(j("Debug"),!1);Je();var J=Ce(),X=Z(J);{var N=G=>{var W=$s(),Se=o(W),K=o(Se),Y=o(K),M=o(Y),U=c(Y,4);ne(U,1,()=>t().attr,ae,(B,H)=>{var E=Ss();C(()=>he(E,`monster_attr ${i(H)??""} svelte-14cfp8z`)),p(B,E)});var Q=c(K,2);{var re=B=>{var H=Es(),E=o(H),D=o(E),V=c(E,2),ie=o(V);C(($,z)=>{he(E,Rt(t().lvl!==t().origin.level?"different_from_its_origin":""),"svelte-14cfp8z"),w(D,$),he(V,Rt(t().rank!==t().origin.rank?"different_from_its_origin":""),"svelte-14cfp8z"),w(ie,z)},[()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],me),p(B,H)},fe=B=>{var H=Ce(),E=Z(H);{var D=ie=>{var $=Ts(),z=c(o($),2),oe=o(z);C(()=>w(oe,`${lr[t().status.spellCategory]??""}魔法`)),p(ie,$)},V=ie=>{var $=Ce(),z=Z($);{var oe=pe=>{var ve=Ms(),de=c(o(ve),2),se=o(de);C(()=>w(se,`${or[t().status.trapCategory]??""}罠`)),p(pe,ve)};O(z,pe=>{t().kind==="Trap"&&t().status.trapCategory&&pe(oe)},!0)}p(ie,$)};O(E,ie=>{t().kind==="Spell"&&t().status.spellCategory?ie(D):ie(V,!1)},!0)}p(B,H)};O(Q,B=>{t().kind==="Monster"?B(re):B(fe,!1)})}var _e=c(Q,2);{var ue=B=>{var H=qs(),E=o(H),D=o(E),V=c(E,2),ie=o(V);C(()=>{he(E,Rt(t().psL!==t().origin.pendulumScaleL?"different_from_its_origin":""),"svelte-14cfp8z"),w(D,`◀ ${t().psL??""}`),he(V,Rt(t().psR!==t().origin.pendulumScaleR?"different_from_its_origin":""),"svelte-14cfp8z"),w(ie,`${t().psR??""} ▶`)}),p(B,H)};O(_e,B=>{var H;(H=t().status.monsterCategories)!=null&&H.includes("Pendulum")&&B(ue)})}var y=c(_e,2);{var R=B=>{var H=As();p(B,H)};O(y,B=>{t().kind==="Spell"&&t().isPendulumScale&&B(R)})}var P=c(y,2);{var ee=B=>{var H=js(),E=Z(H),D=o(E),V=o(D),ie=c(E,2),$=c(o(ie),2),z=o($),oe=o(z),pe=c(z,2),ve=o(pe);C((de,se)=>{w(V,`${de??""}
            ${se??""}`),he(z,Rt(t().atk!==t().origin.attack?"different_from_its_origin":""),"svelte-14cfp8z"),w(oe,t().atk??"?"),he(pe,Rt(t().def!==t().origin.defense?"different_from_its_origin":""),"svelte-14cfp8z"),w(ve,t().def??"?")},[()=>t().types.map(de=>nr[de]+(u()?Sr[de]:"")).join(),()=>{var de;return(de=t().status.monsterCategories)==null?void 0:de.map(se=>sr[se]+(u()?Er[se]:"")).join()}],me),p(B,H)};O(P,B=>{t().kind==="Monster"&&B(ee)})}C(B=>{he(W,`duel_card button_style_reset ${t().origin.kind??""} ${B??""} ${(i(_)?"duel_card_selected":"")??""} ${a()??""} duel_card_${t().orientation??""} ${(i(x)?"isDragging":"")??""} ${(u()?"duel_card_wide":"")??""} duel_card_${t().face??""} ${(t().isOnField?"duel_card_is_on_field":"")??""} svelte-14cfp8z`),ht(W,"draggable",a()==="Draggable"),ht(W,"title",t().nm),w(M,t().nm)},[()=>{var B;return((B=t().status.monsterCategories)==null?void 0:B.join(" "))||""}],me),be("dragstart",W,T),be("dragend",W,q),be("click",W,k),be("dblclick",W,S),be("mouseenter",W,()=>j()),be("contextmenu",W,F),p(G,W)},te=G=>{var W=Ce(),Se=Z(W);{var K=M=>{var U=Is();C(()=>he(U,`duel_card duel_card_face_down duel_card_face_down_defense ${a()??""}  ${(i(_)?"duel_card_selected":"")??""} svelte-14cfp8z`)),be("click",U,k),be("dblclick",U,S),p(M,U)},Y=M=>{var U=Ns();p(M,U)};O(Se,M=>{t().battlePosition==="Set"?M(K):M(Y,!1)},!0)}p(G,W)};O(X,G=>{t().face==="FaceUp"||s()||t().controller.duelistType==="Player"&&t().isUnderControl?G(N):G(te,!1)})}p(e,J),He()}var Os=b('<div class="phase_display svelte-1mv96a1"><span class="svelte-1mv96a1"> </span> </div>'),Ys=b('<div class="lifepoint_display svelte-1mv96a1"><div class="svelte-1mv96a1"> </div> <div class="svelte-1mv96a1"> </div></div>'),Rs=(e,r,t)=>r(i(t)),Ls=b('<div class="svelte-1mv96a1"><button class="phase_button svelte-1mv96a1"> </button></div>'),Ps=b("<div><!></div>"),Fs=b('<div class="svelte-1mv96a1"><!></div>'),Us=b("<div><!></div>"),zs=b("<!> <!> <!>",1),Bs=b('<div style="position: absolute;" class="card_animation_receiver svelte-1mv96a1"><!></div>'),Hs=b('<div style="position: absolute; top:0rem" class="svelte-1mv96a1">｛効果対象｝</div>'),Ws=b('<!> <div style="position: absolute; display:flex;justify-content: center;" class="svelte-1mv96a1"><!></div>',1),Ks=b(" <!> 】",1),Vs=b('<div style="position: absolute; bottom:0rem" class="svelte-1mv96a1"> <!></div>'),Gs=b("<!> <!>",1),Qs=b('<div class="badge svelte-1mv96a1"> </div>'),Xs=b('<div class="card_animation_receiver svelte-1mv96a1"><!></div>'),Zs=b("<!> <!> <!> <!>",1),Js=b('<td><div role="listitem"><!></div></td>');function el(e,r){Be(r,!1);let t=De(r,"view",8),a=De(r,"row",8),n=De(r,"column",8),s=De(r,"selectedEntities",28,()=>[]),u=De(r,"selectedCells",28,()=>[]),v=ye(t().getCell(a(),n()));const m=()=>{I(v,t().getCell(a(),n()))};i(v).onUpdate.append(m),t().onDuelUpdate.append(m),t().modalController.onUpdate.append(m);let l,f=ye([]),_=()=>console.log("hoge"),d,g=ye([]),h=ye(!1),x=ye(!1),S=!1;const j=y=>{var R,P;I(te,[]),s().reset(),l=y.activator,_=y.resolve,I(f,y.dummyActionInfos),I(g,y.chainBlockInfos.flatMap(ee=>ee.selectedEntities).getDistinct()),d=y.entitiesChoices,I(h,!1),I(x,((R=y.cellsChoices)==null?void 0:R.selectables.includes(i(v)))??!1),S=i(x)&&((P=y.cellsChoices)==null?void 0:P.qty)===1};t().onWaitStart.append(j);const k=()=>{l=void 0,I(f,[]),_=()=>{console.log("hoge")},d=void 0,I(g,[]),I(h,!1),I(x,!1),S=!1};t().onWaitEnd.append(k);let T=ye(!1),q=[];const F=y=>{q=y.filter(R=>R.dests.includes(i(v))),I(T,q.length>0),m()},J=()=>{q=[],I(T,!1),m()};t().onDragStart.append(F),t().onDragEnd.append(J);const[X,N]=no;let te=ye([]);const G=y=>{if(l=void 0,i(v)===y.to||i(v).entities.includes(y.entity)){I(te,[...i(te),y]);const R=y.resolve;I(v,i(v)),setTimeout(()=>{I(te,i(te).filter(P=>P!==y)),y.count++,y.count>1&&R()},600)}};t().onAnimation.append(G);const W=y=>{_({phaseChange:y})},Se=()=>i(v).isStackCell&&i(v).entities.flatMap(y=>y.actions).filter(y=>i(f).map(R=>R.action.seq).some(R=>R===y.seq)).length>0,K=()=>{if(Ie(v,i(v).field.duel.view.infoBoardState="Log"),S)_({selectedCells:[i(v)]});else if(i(x))I(h,!i(h)),u(i(h)?[...u(),i(v)]:u().filter(y=>y!==i(v)));else if(i(v).isStackCell){Ie(v,i(v).field.duel.view.infoBoardState="CellInfo"),Ie(v,i(v).field.duel.view.infoBoardCell=i(v)),i(v).field.duel.view.requireUpdate();const y=i(v).entities.flatMap(P=>P.actions).map(P=>P.seq),R=i(f).filter(P=>y.includes(P.action.seq));if(R.length){if(!l)return;i(v).field.duel.view.modalController.actionSelector.show({title:"カードを選択。",activator:l,dummyActionInfos:R,cancelable:!0}).then(ee=>{ee&&_({actionInfo:ee})});return}}i(v).field.duel.view.requireUpdate(),console.info(i(v))},Y=y=>{y.preventDefault(),y.dataTransfer&&(y.dataTransfer.dropEffect="move")},M=y=>{y.preventDefault(),console.info("drop",y,i(T),q),y.dataTransfer&&(y.dataTransfer.dropEffect="move");try{if(i(T)&&q){if(q.length===1){const R=q[0];console.log(_,{actionInfo:{...R,dest:i(v)}}),_({actionInfo:{...R,dest:i(v)}})}else if(q.length>1){if(!l)throw new Na("想定されない状態");i(v).field.duel.view.modalController.terminateAll(),i(v).field.duel.view.modalController.actionSelector.show({title:"選択",activator:l,dummyActionInfos:q.map(R=>({...R,dest:i(v)})),cancelable:!1}).then(R=>{_({actionInfo:R})})}}}finally{t().removeDraggingActions()}},U=(...y)=>{if(t().waitMode==="Animation")return"Disabled";if(d&&d.selectables.find(P=>y.find(ee=>P===ee)))return"Selectable";if(!i(f)||i(f).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(P=>P.state==="Shown"))return"Disabled";const R=i(f).filter(P=>y.includes(P.action.entity));return R.length===0?"Disabled":i(v).isStackCell||R[0].action.entity!==y[0]?"Clickable":R.some(P=>P.dests.length)?"Draggable":"Clickable"};Je();var Q=Js(),re=o(Q);re.__click=K;var fe=o(re);{var _e=y=>{var R=Ce(),P=Z(R);{var ee=B=>{var H=Ce(),E=Z(H);{var D=ie=>{var $=Os(),z=o($),oe=o(z),pe=c(z,1,!0);C((ve,de)=>{w(oe,ve),w(pe,de)},[()=>String(i(v).field.duel.clock.turn).padStart(2,"0"),()=>i(v).field.duel.phase.toUpperCase()],me),p(ie,$)},V=ie=>{var $=Ce(),z=Z($);{var oe=ve=>{var de=Ys(),se=o(de),Ae=o(se),je=c(se,2),Re=o(je);C(()=>{w(Ae,i(v).field.duel.duelists.Above.lp),w(Re,i(v).field.duel.duelists.Below.lp)}),p(ve,de)},pe=ve=>{var de=Ce(),se=Z(de);{var Ae=je=>{var Re=Ce(),Ze=Z(Re);{var Pe=Ne=>{var Fe=Ce(),we=Z(Fe);{var xe=ge=>{var le=Ce(),ce=Z(le);ne(ce,1,()=>t().duel.nextPhaseList,ae,(Te,$e)=>{var Oe=Ls(),et=o(Oe);et.__click=[Rs,W,$e];var A=o(et);C(L=>w(A,L),[()=>i($e).toUpperCase()],me),p(Te,Oe)}),p(ge,le)};O(we,ge=>{t().duel.isEnded||ge(xe)})}p(Ne,Fe)};O(Ze,Ne=>{t().waitMode==="Free"&&Ne(Pe)})}p(je,Re)};O(se,je=>{i(v).column===5&&je(Ae)},!0)}p(ve,de)};O(z,ve=>{i(v).column===3?ve(oe):ve(pe,!1)},!0)}p(ie,$)};O(E,ie=>{i(v).column===1?ie(D):ie(V,!1)})}p(B,H)};O(P,B=>{i(v).row===3&&B(ee)})}p(y,R)},ue=y=>{var R=Ce(),P=Z(R);{var ee=H=>{var E=zs();const D=me(()=>i(te).find(pe=>pe.to===i(v)));var V=Z(E);{var ie=pe=>{var ve=Ps(),de=o(ve);_t(de,{get entity(){return i(D).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),C(()=>he(ve,`card_animation_receiver ${i(v).cellType??""} svelte-1mv96a1`)),qt(1,ve,()=>N,()=>({key:i(D).entity.seq})),p(pe,ve)};O(V,pe=>{i(D)&&i(D).index==="Top"&&pe(ie)})}var $=c(V,2);ne($,1,()=>i(v).visibleEntities,ae,(pe,ve)=>{var de=Ce(),se=Z(de);{var Ae=je=>{var Re=Fs(),Ze=o(Re);const Pe=me(()=>U(i(ve))),Ne=me(()=>i(f).filter(Fe=>Fe.action.entity===i(ve)));_t(Ze,{get entity(){return i(ve)},get state(){return i(Pe)},get dummyActionInfos(){return i(Ne)},cardActionResolve:void 0,get selectedList(){return s()},set selectedList(Fe){s(Fe)},$$legacy:!0}),qt(2,Re,()=>X,()=>({key:i(ve).seq})),p(je,Re)};O(se,je=>{i(te).every(Re=>Re.entity.seq!==i(ve).seq)&&je(Ae)})}p(pe,de)});var z=c($,2);{var oe=pe=>{var ve=Us(),de=o(ve);_t(de,{get entity(){return i(D).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),C(()=>he(ve,`card_animation_receiver ${i(v).cellType??""} svelte-1mv96a1`)),qt(1,ve,()=>N,()=>({key:i(D).entity.seq})),p(pe,ve)};O(z,pe=>{i(D)&&i(D).index!=="Top"&&pe(oe)})}p(H,E)},B=H=>{var E=Zs();const D=me(()=>i(te).find(se=>se.to===i(v)));var V=Z(E);{var ie=se=>{var Ae=Bs(),je=o(Ae);_t(je,{get entity(){return i(D).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),qt(1,Ae,()=>N,()=>({key:i(D).entity.seq})),p(se,Ae)};O(V,se=>{i(D)&&i(D).index!=="Top"&&se(ie)})}var $=c(V,2);{var z=se=>{var Ae=Gs(),je=Z(Ae);ne(je,1,()=>i(v).visibleEntities.map((Pe,Ne)=>({index:Ne,entity:Pe})).toReversed(),ae,(Pe,Ne)=>{var Fe=Ce(),we=Z(Fe);{var xe=ge=>{var le=Ws(),ce=Z(le);{var Te=L=>{var Ee=Hs();p(L,Ee)};O(ce,L=>{i(g).includes(i(Ne).entity)&&L(Te)})}var $e=c(ce,2),Oe=o($e);const et=me(()=>!i(v).isStackCell&&i(Ne).index===0?U(...i(v).visibleEntities):void 0),A=me(()=>i(Ne).index===0?i(f).filter(L=>i(v).visibleEntities.includes(L.action.entity)):void 0);_t(Oe,{get entity(){return i(Ne).entity},get state(){return i(et)},get dummyActionInfos(){return i(A)},cardActionResolve:void 0,get selectedList(){return s()},set selectedList(L){s(L)},$$legacy:!0}),qt(2,$e,()=>X,()=>({key:i(Ne).entity.seq})),p(ge,le)};O(we,ge=>{i(te).every(le=>le.entity.seq!==i(Ne).entity.seq)&&ge(xe)})}p(Pe,Fe)});var Re=c(je,2);{var Ze=Pe=>{var Ne=Vs(),Fe=o(Ne),we=c(Fe);ne(we,1,()=>Object.keys(i(v).visibleEntities[0].status.maxCounterQty),ae,(xe,ge)=>{var le=Ks(),ce=Z(le),Te=c(ce);{var $e=Oe=>{var et=Mt();C(()=>w(et,`/${i(v).visibleEntities[0].status.maxCounterQty[i(ge)]??""}`)),p(Oe,et)};O(Te,Oe=>{(i(v).visibleEntities[0].status.maxCounterQty[i(ge)]??!1)&&Oe($e)})}C(Oe=>w(ce,`【
              ${Oa[i(ge)]??""}${Oe??""} `),[()=>i(v).visibleEntities[0].counterHolder.getQty(i(ge))],me),p(xe,le)}),C(()=>w(Fe,`【${i(v).visibleEntities[0].battlePositionName??""}】 `)),p(Pe,Ne)};O(Re,Pe=>{i(v).visibleEntities[0].battlePosition&&Pe(Ze)})}p(se,Ae)};O($,se=>{i(v).visibleEntities.length>0&&se(z)})}var oe=c($,2);{var pe=se=>{var Ae=Qs(),je=o(Ae);C(()=>w(je,i(v).visibleEntities.length)),p(se,Ae)};O(oe,se=>{i(v).isStackCell&&se(pe)})}var ve=c(oe,2);{var de=se=>{var Ae=Xs(),je=o(Ae);_t(je,{get entity(){return i(D).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),qt(1,Ae,()=>N,()=>({key:i(D).entity.seq})),p(se,Ae)};O(ve,se=>{i(D)&&i(D).index==="Top"&&se(de)})}p(H,E)};O(P,H=>{i(v).cellType==="Hand"?H(ee):H(B,!1)},!0)}p(y,R)};O(fe,y=>{i(v).isDisabledCell?y(_e):y(ue,!1)})}C(y=>{he(Q,`${`duel_field_cell duel_field_cell_${i(v).cellType} ${i(v).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1mv96a1`),ht(Q,"colspan",i(v).cellType==="Hand"?7:1),he(re,`${y??""} svelte-1mv96a1`)},[()=>`duel_card_wrapper ${i(v).cellType} ${i(T)?"can_accept_drop":""} ${Se()?"can_action":""} ${i(h)?"is_selected":i(x)?"is_selectable":""} `],me),be("dragover",re,Y),be("drop",re,M),p(e,Q),He()}Gt(["click"]);var tl=b('<div class="title svelte-1sjjr5s"> </div>'),rl=b('<div class="title svelte-1sjjr5s"> </div>'),il=b('<div class="duel_log_record svelte-1sjjr5s"> </div>'),al=b('<div><div style=" white-space: nowrap;text-align: center;"> </div> <!></div>'),nl=b("<div><!> <!></div>"),sl=b("<div><!> <!></div>"),ll=b('<div class="duel_log svelte-1sjjr5s"><div class="duel_log_header svelte-1sjjr5s"></div> <div class="duel_log_body svelte-1sjjr5s"></div> <div class="duel_log_footer svelte-1sjjr5s"></div></div>');function ol(e,r){Be(r,!1);let t=ye(void 0),a=De(r,"log",8),n,s=ye([]);const u=()=>{const f=((n==null?void 0:n.seq)??-1)+1;a().records.slice(f).forEach(_=>{if(!n){I(s,[[[[_]]]]),n=_;return}if(!i(s)[_.clock.turn]){Ie(s,i(s)[_.clock.turn]=[[[_]]]),n=_;return}if(!i(s)[_.clock.turn][_.clock.phaseSeq]){Ie(s,i(s)[_.clock.turn][_.clock.phaseSeq]=[[_]]),n=_;return}if(n.clock.chainSeq===_.clock.chainSeq&&n.clock.chainBlockSeq===_.clock.chainBlockSeq&&n.duelist===_.duelist){i(s)[_.clock.turn][_.clock.phaseSeq].slice(-1)[0].push(_),n=_;return}i(s)[_.clock.turn][_.clock.phaseSeq].push([_]),n=_}),I(s,i(s)),Hn().then(()=>i(t)&&i(t).scroll(0,i(t).clientHeight*990))};a().onUpdate.append(u),a().duel.view.onDuelUpdate.append(u),Je();var v=Ce(),m=Z(v);{var l=f=>{var _=ll(),d=c(o(_),2);ne(d,5,()=>i(s),ae,(g,h)=>{var x=sl(),S=o(x);{var j=T=>{var q=tl(),F=o(q);C(()=>w(F,`ターン：${i(h)[0][0][0].clock.turn??""}`)),p(T,q)};O(S,T=>{i(h)[0][0][0].clock.turn>0&&T(j)})}var k=c(S,2);ne(k,1,()=>i(h),ae,(T,q)=>{var F=nl(),J=o(F);{var X=te=>{var G=rl(),W=o(G);C(()=>w(W,i(q)[0][0].clock.period.name)),p(te,G)};O(J,te=>{i(q)[0][0].clock.turn>0&&te(X)})}var N=c(J,2);ne(N,1,()=>i(q),ae,(te,G)=>{var W=al(),Se=o(W),K=o(Se),Y=c(Se,2);ne(Y,1,()=>i(G),ae,(M,U)=>{var Q=il(),re=o(Q);C(()=>w(re,i(U).text)),p(M,Q)}),C(()=>{var M,U,Q;he(W,`duel_log_block_duelist duel_log_block_duelist_${((M=i(G)[0].duelist)==null?void 0:M.seat)??"system"} svelte-1sjjr5s`),he(Se,`duelist ${((U=i(G)[0].duelist)==null?void 0:U.seat)??""} svelte-1sjjr5s`),w(K,((Q=i(G)[0].duelist)==null?void 0:Q.profile.name)||"SYSTEM")}),p(te,W)}),C(()=>he(F,`duel_log_block_phase duel_log_block_phase_${i(q)[0][0].clock.period.key??""} svelte-1sjjr5s`)),p(T,F)}),C(()=>he(x,`duel_log_block_turn duel_log_block_turn_${i(h)[0][0][0].clock.turn??""} svelte-1sjjr5s`)),p(g,x)}),hs(d,g=>I(t,g),()=>i(t)),p(f,_)};O(m,f=>{a().duel.view.infoBoardState==="Log"&&f(l)})}p(e,v),He()}var vl=b('<div><div class="duelist_name svelte-1u7codf"> </div> <div> </div></div>');function Li(e,r){Be(r,!1);let t=De(r,"duelist",12),a=ye(0),n=ye();const s=async()=>{const d=t().lp-i(a);if(!i(n)||Math.abs(d)<10){I(a,t().lp),i(n)&&(i(n)(),I(n,void 0));return}I(a,i(a)+Math.floor(Math.random()*d)),await Ya(100),s()},u=()=>{t(t()),!i(n)&&t().lp!==i(a)&&new Promise(d=>{I(n,d),Math.abs(t().lp-i(a)),s()})};t().duel.log.onUpdate.append(u),s(),Je();var v=vl(),m=o(v),l=o(m),f=c(m,2),_=o(f);C(()=>{he(v,`duelist ${t().seat??""} svelte-1u7codf`),w(l,t().profile.name),he(f,`duelist_lp ${(i(n)?"vibration":"")??""} svelte-1u7codf`),w(_,i(a))}),p(e,v),He()}const dl=(e,r,t)=>{r.resolve(i(t))};var cl=b("<div><!></div>"),ul=b("<div></div>"),fl=(e,r)=>r.resolve(void 0),_l=b('<button class="svelte-ynkuoo">Cancel</button>'),pl=b('<div class="modal_window svelte-ynkuoo"><div> </div> <!> <div><button class="svelte-ynkuoo">OK</button> <!></div></div>');function ml(e,r){Be(r,!0);let t=Sn(Ct([])),a=r.args.chainBlockInfos.flatMap(v=>v.selectedEntities).getDistinct();var n=Ce(),s=Z(n);{var u=v=>{var m=pl(),l=o(m),f=o(l),_=c(l,2);ne(_,17,()=>r.args.entitiesChoices.selectables.map(S=>S.controller.seat).getDistinct(),ae,(S,j)=>{var k=ul();ne(k,21,()=>r.args.entitiesChoices.selectables.filter(T=>T.controller.seat===i(j)).toSorted(Fi),ae,(T,q)=>{var F=cl(),J=o(F);_t(J,{get entity(){return i(q)},isVisibleForcibly:!0,state:"Selectable",entitySelectResolve:X=>r.resolve(X),get qty(){return r.args.entitiesChoices.qty},cardActionResolve:void 0,get selectedList(){return i(t)},set selectedList(X){I(t,Ct(X))}}),C(X=>he(F,`entities_list_item ${X??""} svelte-ynkuoo`),[()=>a.includes(i(q))?"effect_target":""]),p(T,F)}),C(()=>he(k,`entities_list ${i(j)??""} svelte-ynkuoo`)),p(S,k)});var d=c(_,2),g=o(d);g.__click=[dl,r,t];var h=c(g,2);{var x=S=>{var j=_l();j.__click=[fl,r],p(S,j)};O(h,S=>{r.args.entitiesChoices.cancelable&&S(x)})}C(S=>{w(f,r.args.title),g.disabled=S},[()=>!r.args.entitiesChoices.validator(i(t))]),p(v,m)};O(s,v=>{v(u)})}p(e,n),He()}Gt(["click"]);var gl=b('<div class="duel_card_wrapper svelte-1k3dhp1"><!> <div> </div></div>'),hl=(e,r)=>r()(),bl=b('<div><button class="cancel_button svelte-1k3dhp1">Cancel</button></div>'),yl=b('<div class="modal_window svelte-1k3dhp1"><div> </div> <div class="flex svelte-1k3dhp1" style="display: flex;"></div> <!></div>');function kl(e,r){Be(r,!1);let t=De(r,"view",8),a=De(r,"args",8),n=De(r,"resolve",8),s=bs(!1);const u=()=>s.set(!0),v=()=>s.set(!1);t().onDragStart.append(u),t().onDragEnd.append(v),Je();var m=Ce(),l=Z(m);{var f=_=>{var d=yl(),g=o(d),h=o(g),x=c(g,2);ne(x,5,()=>a().dummyActionInfos,ae,(k,T)=>{var q=gl(),F=o(q);const J=me(()=>i(T).dests.length?"Draggable":"Clickable"),X=me(()=>a().dragAndDropOnly?[]:[i(T)]);_t(F,{get entity(){return i(T).action.entity},isVisibleForcibly:!0,get state(){return i(J)},get dummyActionInfos(){return i(X)},get cardActionResolve(){return n()}});var N=c(F,2),te=o(N);C(()=>w(te,`«${i(T).action.title??""}»`)),p(k,q)});var S=c(x,2);{var j=k=>{var T=bl(),q=o(T);q.__click=[hl,n],p(k,T)};O(S,k=>{a().cancelable&&k(j)})}C(()=>w(h,a().title)),p(_,d)};O(l,_=>{_(f)})}p(e,m),He()}Gt(["click"]);var wl=(e,r,t)=>r()(t()),xl=b('<li><button class="svelte-1w70c2f"> </button></li>'),Cl=(e,r)=>r()(void 0),Dl=b('<button class="svelte-1w70c2f">Cancel</button>'),Sl=b('<div class="modal_window svelte-1w70c2f"><div class="svelte-1w70c2f"> </div> <ui class="text_list svelte-1w70c2f"></ui> <!></div>');function El(e,r){Be(r,!1);let t=De(r,"arg",8),a=De(r,"resolve",8);Je();var n=Ce(),s=Z(n);{var u=v=>{var m=Sl(),l=o(m),f=o(l),_=c(l,2);ne(_,5,()=>t().choises,ae,(h,x)=>{let S=()=>i(x).seq,j=()=>i(x).text;var k=xl(),T=o(k);T.__click=[wl,a,S];var q=o(T);C(()=>{he(k,`text_item ${S()??""} svelte-1w70c2f`),w(q,j())}),p(h,k)});var d=c(_,2);{var g=h=>{var x=Dl();x.__click=[Cl,a],p(h,x)};O(d,h=>{t().cancelable&&h(g)})}C(()=>w(f,t().title)),p(v,m)};O(s,v=>{v(u)})}p(e,n),He()}Gt(["click"]);const Tl=(e,r)=>{r().modals.forEach(t=>t.cancel())};var Ml=b('<button class="overlay svelte-5wiqd8">☆</button> <!> <!> <!>',1),ql=b('<div class="base svelte-5wiqd8"><!></div>');function Al(e,r){var v,m;Be(r,!1);let t=De(r,"modalController",12);const a=()=>{t(t())};(m=(v=t())==null?void 0:v.onUpdate)==null||m.append(a),Je();var n=ql(),s=o(n);{var u=l=>{var f=Ml(),_=Z(f);_.__click=[Tl,t];var d=c(_,2);{var g=k=>{ml(k,{get args(){return t().entitySelector.args},get resolve(){return t().entitySelector.resolve}})};O(d,k=>{t().entitySelector.state==="Shown"&&k(g)})}var h=c(d,2);{var x=k=>{kl(k,{get view(){return t().view},get args(){return t().actionSelector.args},get resolve(){return t().actionSelector.resolve}})};O(h,k=>{t().actionSelector.state==="Shown"&&k(x)})}var S=c(h,2);{var j=k=>{El(k,{get arg(){return t().textSelector.args},get resolve(){return t().textSelector.resolve}})};O(S,k=>{t().textSelector.state==="Shown"&&k(j)})}p(l,f)};O(s,l=>{t().modals.some(f=>f.state==="Shown")&&l(u)})}p(e,n),He()}Gt(["click"]);const jl=(e,r)=>(r(r()==="Normal"?"Debug":"Normal"),!0);var $l=b('<div class="duel_card_info_row svelte-1qknre5"><div class="svelte-1qknre5"><pre class="description svelte-1qknre5"> </pre></div></div> <div class="duel_card_info_row svelte-1qknre5" style=" justify-content: space-between;"><div class="svelte-1qknre5"> </div> <div class="svelte-1qknre5"> </div></div>',1),Il=b('<div></div> <div class="svelte-1qknre5"> </div>',1),Nl=b("<div> </div>"),Ol=b("<div> </div>"),Yl=b('<div class="duel_card_info_row svelte-1qknre5"><!> <!></div> <div class="duel_card_info_row svelte-1qknre5"></div>',1),Rl=b('<div class="duel_card_row svelte-1qknre5"><div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"> </div></div>'),Ll=b('<div class="duel_card_row svelte-1qknre5"><div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"> </div></div>'),Pl=b("<!> <!>",1),Fl=b('<div class="duel_card_info_row svelte-1qknre5"><div class="svelte-1qknre5"><pre class="description svelte-1qknre5"> </pre></div></div>'),Ul=b('<div class="svelte-1qknre5"> </div>'),zl=b('<div class="svelte-1qknre5"> </div>'),Bl=b('<div class="svelte-1qknre5"> </div>'),Hl=b('<div class="svelte-1qknre5"> </div>'),Wl=b('<div class="svelte-1qknre5"> </div>'),Kl=b('<div class="svelte-1qknre5"> </div>'),Vl=b('<div class="svelte-1qknre5"> </div>'),Gl=b('<div class="svelte-1qknre5"> </div>'),Ql=b('<div class="duel_card_info_row svelte-1qknre5"><div class="svelte-1qknre5"><div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <!> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"></div> <div class="svelte-1qknre5"> </div> <div class="svelte-1qknre5"> </div> <div class="svelte-1qknre5"> </div> <div class="svelte-1qknre5"></div></div></div>'),Xl=b('<div class="svelte-1qknre5">※テスト用カードです</div>'),Zl=b('<div class="duel_card_info_links svelte-1qknre5"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1qknre5">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1qknre5"> </a></div>'),Jl=b('<div role="contentinfo"><div class="duel_card_info_header svelte-1qknre5"><div class="duel_card_info_row svelte-1qknre5"><div class="svelte-1qknre5"> </div></div> <div class="duel_card_info_row svelte-1qknre5" style="position:sticky; top:0;"><div class="svelte-1qknre5"> </div> <div class="svelte-1qknre5"> </div></div> <!></div> <div class="duel_card_info_body svelte-1qknre5"><!></div> <div class="duel_card_info_footer svelte-1qknre5"><!></div></div>');function eo(e,r){Be(r,!1);let t=De(r,"entity",8,void 0);const a=()=>t()?jt[t().origin.name]:void 0,n=()=>{var l;return t()&&(t().origin.cardId??!1)?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t().origin.cardId}`:`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${(l=a())==null?void 0:l.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`};let s=De(r,"mode",12,"Normal");Je();var u=Ce(),v=Z(u);{var m=l=>{var f=Jl();f.__contextmenu=[jl,s];var _=o(f),d=o(_),g=o(d),h=o(g),x=c(d,2),S=o(x),j=o(S),k=c(S,2),T=o(k),q=c(x,2);{var F=Y=>{var M=Pl(),U=Z(M);{var Q=ue=>{var y=$l(),R=Z(y),P=o(R),ee=o(P),B=o(ee),H=c(R,2),E=o(H),D=o(E),V=c(E,2),ie=o(V);C(()=>{w(B,jt[t().origin.name].pendulumDescription),w(D,`◀ ${t().psL??""}`),w(ie,`${t().psR??""} ▶`)}),p(ue,y)};O(U,ue=>{var y;(y=t().status.monsterCategories)!=null&&y.includes("Pendulum")&&ue(Q)})}var re=c(U,2);{var fe=ue=>{var y=Yl(),R=Z(y),P=o(R);ne(P,1,()=>t().attr,ae,(H,E)=>{var D=Il(),V=Z(D),ie=c(V,2),$=o(ie);C(()=>{he(V,`monster_attr ${i(E)??""} svelte-1qknre5`),w($,`${ti[i(E)]??""}属性`)}),p(H,D)});var ee=c(P,2);ne(ee,1,()=>t().types,ae,(H,E)=>{var D=Nl(),V=o(D);C(()=>{he(D,`monster_cat ${i(E)??""} svelte-1qknre5`),w(V,`${nr[i(E)]??""}${Sr[i(E)]??""}族`)}),p(H,D)});var B=c(R,2);ne(B,5,()=>t().status.monsterCategories??[],ae,(H,E)=>{var D=Ol(),V=o(D);C(()=>{he(D,`monster_cat ${i(E)??""} svelte-1qknre5`),w(V,`${sr[i(E)]??""}${Er[i(E)]??""}`)}),p(H,D)}),p(ue,y)},_e=ue=>{var y=Ce(),R=Z(y);{var P=B=>{var H=Rl(),E=c(o(H),2),D=o(E);C(()=>w(D,`${lr[t().status.spellCategory]??""}魔法`)),p(B,H)},ee=B=>{var H=Ce(),E=Z(H);{var D=V=>{var ie=Ll(),$=c(o(ie),2),z=o($);C(()=>w(z,`${or[t().status.trapCategory]??""}罠`)),p(V,ie)};O(E,V=>{t().kind==="Trap"&&t().status.trapCategory&&V(D)},!0)}p(B,H)};O(R,B=>{t().kind==="Spell"&&t().status.spellCategory?B(P):B(ee,!1)},!0)}p(ue,y)};O(re,ue=>{t().kind==="Monster"?ue(fe):ue(_e,!1)})}p(Y,M)};O(q,Y=>{s()==="Normal"&&Y(F)})}var J=c(_,2),X=o(J);{var N=Y=>{var M=Fl(),U=o(M),Q=o(U),re=o(Q);C(fe=>w(re,fe),[()=>{var fe;return(fe=a())==null?void 0:fe.description}],me),p(Y,M)},te=Y=>{var M=Ql(),U=o(M),Q=o(U);Q.textContent='"info" :{';var re=c(Q,2);ne(re,1,()=>Object.entries(t().info),ae,(le,ce)=>{let Te=()=>i(ce)[0],$e=()=>i(ce)[1];var Oe=Ul(),et=o(Oe);C(A=>w(et,`"${Te()??""}" :${A??""},`),[()=>{var A;return(A=$e())==null?void 0:A.toString()}],me),p(le,Oe)});var fe=c(re,2);fe.textContent="},";var _e=c(fe,2);_e.textContent='"status" :{';var ue=c(_e,2);ne(ue,1,()=>Object.entries(t().status),ae,(le,ce)=>{let Te=()=>i(ce)[0],$e=()=>i(ce)[1];var Oe=zl(),et=o(Oe);C(A=>w(et,`"${Te()??""}" :${A??""},`),[()=>{var A;return(A=$e())==null?void 0:A.toString()}],me),p(le,Oe)});var y=c(ue,2);y.textContent="},";var R=c(y,2);R.textContent='"actions" :[';var P=c(R,2);ne(P,1,()=>t().actions,ae,(le,ce)=>{var Te=Bl(),$e=o(Te);C(()=>w($e,`"${i(ce).playType??""} ${i(ce).title??""}",`)),p(le,Te)});var ee=c(P,2);ee.textContent="],";var B=c(ee,2);B.textContent='"substituteEffects" :[';var H=c(B,2);ne(H,1,()=>t().substituteEffects,ae,(le,ce)=>{var Te=Hl(),$e=o(Te);C(()=>w($e,`"${i(ce).title??""}",`)),p(le,Te)});var E=c(H,2);E.textContent="],";var D=c(E,2);D.textContent='"continuousEffects" :[';var V=c(D,2);ne(V,1,()=>t().continuousEffects,ae,(le,ce)=>{var Te=Wl(),$e=o(Te);C(()=>w($e,`"${i(ce).isStarted??""}",`)),p(le,Te)});var ie=c(V,2);ie.textContent="],";var $=c(ie,2);$.textContent='"procFilters" :[';var z=c($,2);ne(z,1,()=>t().procFilterBundle.operators,ae,(le,ce)=>{var Te=Kl(),$e=o(Te);C(Oe=>w($e,`"${Oe??""} ${i(ce).title??""}",`),[()=>i(ce).isSpawnedBy.toString()],me),p(le,Te)});var oe=c(z,2);oe.textContent="],";var pe=c(oe,2);pe.textContent='"numericStateOperators" :[';var ve=c(pe,2);ne(ve,1,()=>t().numericOprsBundle.operators,ae,(le,ce)=>{var Te=Vl(),$e=o(Te);C(Oe=>w($e,`"${Oe??""} ${i(ce).title??""}",`),[()=>i(ce).isSpawnedBy.toString()],me),p(le,Te)});var de=c(ve,2);de.textContent="],";var se=c(de,2);se.textContent='"stateOperators" :[';var Ae=c(se,2);ne(Ae,1,()=>t().statusOperatorBundle.operators,ae,(le,ce)=>{var Te=Gl(),$e=o(Te);C(Oe=>w($e,`"${Oe??""} ${i(ce).title??""}",`),[()=>i(ce).isSpawnedBy.toString()],me),p(le,Te)});var je=c(Ae,2);je.textContent="],";var Re=c(je,2);Re.textContent='"lastMoveLogRecord" :{';var Ze=c(Re,2),Pe=o(Ze),Ne=c(Ze,2),Fe=o(Ne),we=c(Ne,2),xe=o(we),ge=c(we,2);ge.textContent="},",C((le,ce)=>{w(Pe,`"movedBy":"${le??""}",`),w(Fe,`"movedAs":"${ce??""}",`),w(xe,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var le;return(le=t().moveLog.latestRecord.movedBy)==null?void 0:le.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],me),p(Y,M)};O(X,Y=>{s()==="Normal"?Y(N):Y(te,!1)})}var G=c(J,2),W=o(G);{var Se=Y=>{var M=Xl();p(Y,M)},K=Y=>{var M=Zl(),U=o(M),Q=c(U,2),re=o(Q);C(fe=>{var _e;ht(U,"href",`https://yugioh-wiki.net/index.php?${t().origin.wikiEncodedName}`),ht(Q,"href",fe),w(re,`⇒${((_e=t())!=null&&_e.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[n],me),p(Y,M)};O(W,Y=>{var M;(M=t())!=null&&M.origin.isForTest?Y(Se):Y(K,!1)})}C((Y,M,U)=>{he(f,`duel_card duel_card_info ${t().origin.kind??""} ${Y??""} svelte-1qknre5`),w(h,t().nm),w(j,M),w(T,U)},[()=>{var Y;return(Y=t().origin.monsterCategories)==null?void 0:Y.join(" ")},()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],me),p(l,f)};O(v,l=>{t()&&l(m)})}p(e,u),He()}Gt(["contextmenu"]);var to=b('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),ro=b('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),io=b('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function ao(e,r){Be(r,!1);let t=De(r,"cell",12);const a=()=>{t(t())},n=m=>t().cardEntities.filter(l=>l.face===m);t().field.duel.view.onDuelUpdate.append(a),Je();var s=Ce(),u=Z(s);{var v=m=>{var l=io(),f=o(l),_=o(f),d=o(_),g=c(_,2),h=o(g),x=c(f,2);ne(x,4,()=>["FaceUp","FaceDown"],ae,(S,j)=>{var k=Ce(),T=Z(k);{var q=F=>{var J=ro(),X=o(J),N=o(X),te=c(X,2);ne(te,1,()=>n(j).toSorted(Fi),ae,(G,W)=>{var Se=to(),K=o(Se);const Y=me(()=>t().owner===t().field.duel.duelists.Below);_t(K,{get entity(){return i(W)},get isVisibleForcibly(){return i(Y)},isWideMode:!0,cardActionResolve:void 0}),p(G,Se)}),C(()=>w(N,j==="FaceUp"?"表向き":"裏向き")),p(F,J)};O(T,F=>{n(j).length&&F(q)})}p(S,k)}),C(()=>{var S;w(d,(S=t().owner)==null?void 0:S.profile.name),w(h,t().cellType)}),p(m,l)};O(u,m=>{t().field.duel.view.infoBoardState==="CellInfo"&&m(v)})}p(e,s),He()}const no=Ds({duration:400});var so=b('<div class="duel_field_header_message svelte-accyye"> </div> <div class="duel_field_header_buttons svelte-accyye"><button class="svelte-accyye">サレンダー</button></div>',1),lo=b("<tr></tr>"),oo=b('<table class="duel_field svelte-accyye"><tbody class="svelte-accyye"></tbody></table>'),vo=b('<button class="svelte-accyye">cancel</button>'),co=b('<button class="svelte-accyye">OK</button> <!>',1),uo=b('<button class="svelte-accyye"> </button>'),fo=b('<div class="flex duel_desk svelte-accyye"><div class="duel_desk_left v_flex svelte-accyye"><!> <!> <!></div> <div class=" duel_desk_center v_flex svelte-accyye"><div class="duel_field_header svelte-accyye"><!></div> <div class="svelte-accyye"><!></div> <div class="duel_field_footer svelte-accyye"><!></div></div> <div class=" duel_desk_right svelte-accyye" style="text-align: left;"><!> <!></div></div> <div style="position:absolute;left:0;bottom:0"> </div> <!>',1);function _o(e,r){Be(r,!1);let t=De(r,"duel",12),a=ye([]),n=ye([]),s=()=>{},u=ye([]),v=ye(),m=ye(),l=ye(()=>!1),f=ye(!1);const _=E=>{s=E.resolve,I(u,E.dummyActionInfos.filter(D=>D.action.entity.entityType==="Duelist").filter(D=>D.action.entity.controller.seat==="Below")),I(v,void 0),I(m,void 0),I(n,[]),I(a,[]),I(f,!1),E.entitiesChoices&&(I(v,E.entitiesChoices),I(l,()=>{var D;return((D=E.entitiesChoices)==null?void 0:D.validator(i(a)))??!1}),I(f,E.entitiesChoices.cancelable),i(v).selectables.every(D=>D.fieldCell.isPlayFieldCell&&D.getIndexInCell()===0||D.fieldCell.cellType==="Hand"&&D.controller.duelistType==="Player"||D.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,entitiesChoices:E.entitiesChoices,chainBlockInfos:E.chainBlockInfos,cancelable:E.entitiesChoices.cancelable}).then(D=>{s({selectedEntities:D})})),E.cellsChoices&&(I(m,E.cellsChoices),I(l,()=>{var D;return((D=E.cellsChoices)==null?void 0:D.validator(i(n)))??!1}),I(f,E.cellsChoices.cancelable))};t().view.onWaitStart.append(_);const d=()=>{s=()=>{},I(m,void 0),I(v,void 0),I(n,[]),I(a,[]),I(l,()=>!1),I(f,!1)};t().view.onWaitEnd.append(d);let g=ye(void 0),h=ye("Normal");const x=({card:E,mode:D})=>{I(g,E),I(h,D)};t().view.onShowCardEntity.append(x);const S=()=>{t(t())};t().view.onDuelUpdate.append(S),t().log.onUpdate.append(S);const j=()=>{i(v)&&i(v).validator(i(a))&&s({selectedEntities:i(a)}),i(m)&&i(m).validator(i(n))&&s({selectedCells:i(n)})},k=()=>{s({})},T=E=>{s({actionInfo:E})},q=()=>{s({surrender:!0})};t().main(),Je();var F=fo(),J=Z(F),X=o(J),N=o(X);Li(N,{get duelist(){return t().duelists.Above}});var te=c(N,2);eo(te,{get entity(){return i(g)},get mode(){return i(h)}});var G=c(te,2);Li(G,{get duelist(){return t().duelists.Below}});var W=c(X,2),Se=o(W),K=o(Se);{var Y=E=>{var D=so(),V=Z(D),ie=o(V),$=c(V,2),z=o($);C(()=>w(ie,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),be("click",z,q),p(E,D)};O(K,E=>{t().isEnded||E(Y)})}var M=c(Se,2),U=o(M);{var Q=E=>{var D=oo(),V=o(D);ne(V,5,()=>t().field.cells,ae,(ie,$,z)=>{var oe=lo();he(oe,`${`duel_desk_row_${z}`??""} svelte-accyye`),ne(oe,5,()=>i($),ae,(pe,ve,de)=>{el(pe,{get view(){return t().view},row:z,column:de,get selectedEntities(){return i(a)},set selectedEntities(se){I(a,se)},get selectedCells(){return i(n)},set selectedCells(se){I(n,se)},$$legacy:!0})}),p(ie,oe)}),p(E,D)};O(U,E=>{t().clock.turn>0&&E(Q)})}var re=c(M,2),fe=o(re);{var _e=E=>{var D=co(),V=Z(D),ie=c(V,2);{var $=z=>{var oe=vo();be("click",oe,k),p(z,oe)};O(ie,z=>{i(f)&&z($)})}C(z=>V.disabled=z,[()=>!i(l)()],me),be("click",V,j),p(E,D)},ue=E=>{var D=Ce(),V=Z(D);{var ie=$=>{var z=Ce(),oe=Z(z);ne(oe,1,()=>i(u),ae,(pe,ve)=>{var de=uo(),se=o(de);C(()=>w(se,i(ve).action.title)),be("click",de,()=>T(i(ve))),p(pe,de)}),p($,z)};O(V,$=>{i(u)&&i(u).length&&$(ie)},!0)}p(E,D)};O(fe,E=>{i(v)&&i(v).selectables.length||i(m)&&i(m).selectables?E(_e):E(ue,!1)})}var y=c(W,2),R=o(y);ol(R,{get log(){return t().log}});var P=c(R,2);ao(P,{get cell(){return t().view.infoBoardCell}});var ee=c(J,2),B=o(ee),H=c(ee,2);Al(H,{get modalController(){return t().view.modalController}}),C(E=>w(B,E),[()=>t().clock.toString()],me),p(e,F),He()}var po=b("<div></div>"),mo=b('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),go=b('<li class="deck_editor_item svelte-vivzk2"><div role="listitem"><div class="svelte-vivzk2"><div class="svelte-vivzk2"> </div> <div style="display:flex" class="svelte-vivzk2"><div class="svelte-vivzk2"><!> <!> <!> <!> <!> <!> <!></div> <div style="flex-grow: 1; width:0.1rem" class="svelte-vivzk2"></div> <div class="svelte-vivzk2"><!></div></div></div></div> <button class="button_style_reset svelte-vivzk2" title="※shiftキー同時押しで一括投入">+</button> <button class="button_style_reset svelte-vivzk2" title="※shiftキー同時押しで一括外し">-</button></li>'),ho=b('<div class="deck_editor_card_kind svelte-vivzk2"><span class="svelte-vivzk2"> </span> <ul class="svelte-vivzk2"></ul></div>'),bo=b('<div class="deck_editor_deck_type svelte-vivzk2"><span class="svelte-vivzk2"> </span> <!></div>'),yo=b('<div class="deck_editor_card_list svelte-vivzk2"></div>');function Pi(e,r){Be(r,!1);let t=De(r,"allCardInfos",8),a=De(r,"deckCardInfos",12),n=De(r,"mode",8),s=De(r,"onAttention",8);const u={Deck:["Monster","Spell","Trap"],ExtraDeck:["Monster"]},v=(_,d)=>(n()==="List"?t():a()).filter(g=>g.isImplemented).filter(g=>!d||g.kind===d).filter(g=>{var h,x;return!_||_==="Deck"&&!((h=g==null?void 0:g.monsterCategories)!=null&&h.union(gi).length)||_==="ExtraDeck"&&((x=g==null?void 0:g.monsterCategories)==null?void 0:x.union(gi).length)}),m=(_,d)=>{try{if(_.ctrlKey){a().push(d);return}const g=a().filter(x=>x.name===d.name).length;if(g>2)return;const h=_.shiftKey?3-g:1;if(h<1)return;a().push(...Array(h).fill(d))}finally{a().sort(Pr),a(a())}},l=(_,d)=>{let g=0;a(a().filter(h=>h.name!==d.name?!0:(g++,!_.shiftKey&&g>1))),a().sort(Pr)};Je();var f=yo();ne(f,5,()=>La,ae,(_,d)=>{var g=bo(),h=o(g),x=o(h),S=c(h,2);ne(S,1,()=>u[i(d)],ae,(j,k)=>{var T=ho(),q=o(T),F=o(q),J=c(q,2);ne(J,5,()=>v(i(d),i(k)).toSorted(Pr),ae,(X,N)=>{var te=go(),G=o(te),W=o(G),Se=o(W),K=o(Se),Y=c(Se,2),M=o(Y),U=o(M);{var Q=$=>{var z=Mt();C(()=>w(z,`★${i(N).level??""}`)),p($,z)};O(U,$=>{i(N).level&&$(Q)})}var re=c(U,2);{var fe=$=>{var z=Mt();C(()=>w(z,`☆${i(N).rank??""}`)),p($,z)};O(re,$=>{i(N).rank&&$(fe)})}var _e=c(re,2);ne(_e,1,()=>i(N).attributes??[],ae,($,z)=>{var oe=po();C(()=>he(oe,`monster_attr ${i(z)??""} svelte-vivzk2`)),p($,oe)});var ue=c(_e,2);ne(ue,1,()=>i(N).types??[],ae,($,z)=>{var oe=Mt();C(()=>w(oe,nr[i(z)])),p($,oe)});var y=c(ue,2);ne(y,1,()=>i(N).monsterCategories??[],ae,($,z)=>{var oe=Mt();C(()=>w(oe,sr[i(z)])),p($,oe)});var R=c(y,2);{var P=$=>{var z=Mt();C(()=>w(z,`${lr[i(N).spellCategory]??""}魔法`)),p($,z)};O(R,$=>{i(N).spellCategory!==void 0&&$(P)})}var ee=c(R,2);{var B=$=>{var z=Mt();C(()=>w(z,`${or[i(N).trapCategory]??""}罠`)),p($,z)};O(ee,$=>{i(N).trapCategory!==void 0&&$(B)})}var H=c(M,4),E=o(H);{var D=$=>{var z=mo(),oe=Z(z),pe=o(oe),ve=c(oe,2),de=o(ve);C(()=>{w(pe,i(N).attack??"?"),w(de,i(N).defense??"?")}),p($,z)};O(E,$=>{i(N).kind==="Monster"&&$(D)})}var V=c(G,2),ie=c(V,2);C($=>{he(G,`${$??""} svelte-vivzk2`),w(K,i(N).name)},[()=>{var $,z;return`deck_editor_card duel_card ${i(N).kind} ${(z=($=i(N))==null?void 0:$.monsterCategories)==null?void 0:z.join(" ")} ${i(N).isImplemented?"is_implemented":"is_not_implemented"}`}],me),be("mouseenter",G,()=>s()(i(N))),be("click",V,$=>m($,i(N))),be("click",ie,$=>l($,i(N))),p(X,te)}),C(X=>w(F,`${Ui[i(k)]??""}（${X??""}枚）`),[()=>v(i(d),i(k)).length],me),p(j,T)}),C(j=>w(x,`${Ra[i(d)]??""}（${j??""}枚）`),[()=>v(i(d)).length],me),p(_,g)}),p(e,f),He()}var ko=b('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),wo=b('<div></div> <div class="svelte-rccxcp"> </div>',1),xo=b("<div> </div>"),Co=b("<div> </div>"),Do=b('<div class="duel_card_info_row svelte-rccxcp"><!> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),So=b('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Eo=b('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),To=b('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),Mo=b('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),qo=b('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!></div></div>');function Ao(e,r){Be(r,!1);let t=De(r,"cardInfo",8,void 0);const a=()=>t()?jt[t().name]:void 0;Je();var n=Ce(),s=Z(n);{var u=v=>{var m=qo(),l=o(m),f=o(l),_=o(f),d=o(_),g=c(f,2),h=o(g),x=o(h),S=c(h,2),j=o(S),k=c(l,2),T=o(k);{var q=M=>{var U=ko(),Q=Z(U),re=o(Q),fe=o(re),_e=o(fe),ue=c(Q,2),y=o(ue),R=o(y),P=c(y,2),ee=o(P);C(()=>{w(_e,jt[t().name].pendulumDescription),w(R,`◀ ${t().pendulumScaleL??""}`),w(ee,`${t().pendulumScaleR??""} ▶`)}),p(M,U)};O(T,M=>{var U;(U=t().monsterCategories)!=null&&U.includes("Pendulum")&&M(q)})}var F=c(T,2);{var J=M=>{var U=Do(),Q=Z(U),re=o(Q);{var fe=R=>{var P=wo(),ee=Z(P),B=c(ee,2),H=o(B);C(()=>{he(ee,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),w(H,`${ti[t().attributes[0]]??""}属性`)}),p(R,P)};O(re,R=>{t().attributes&&R(fe)})}var _e=c(re,2);{var ue=R=>{var P=xo(),ee=o(P);C(()=>{he(P,`monster_cat ${t().types[0]??""} svelte-rccxcp`),w(ee,`${nr[t().types[0]]??""}${Sr[t().types[0]]??""}族`)}),p(R,P)};O(_e,R=>{t().types&&R(ue)})}var y=c(Q,2);ne(y,5,()=>t().monsterCategories??[],ae,(R,P)=>{var ee=Co(),B=o(ee);C(()=>{he(ee,`monster_cat ${i(P)??""} svelte-rccxcp`),w(B,`${sr[i(P)]??""}${Er[i(P)]??""}`)}),p(R,ee)}),p(M,U)},X=M=>{var U=Ce(),Q=Z(U);{var re=_e=>{var ue=So(),y=c(o(ue),2),R=o(y);C(()=>w(R,`${lr[t().spellCategory]??""}魔法`)),p(_e,ue)},fe=_e=>{var ue=Ce(),y=Z(ue);{var R=P=>{var ee=Eo(),B=c(o(ee),2),H=o(B);C(()=>w(H,`${or[t().trapCategory]??""}罠`)),p(P,ee)};O(y,P=>{t().kind==="Trap"&&t().trapCategory&&P(R)},!0)}p(_e,ue)};O(Q,_e=>{t().kind==="Spell"&&t().spellCategory?_e(re):_e(fe,!1)},!0)}p(M,U)};O(F,M=>{t().kind==="Monster"?M(J):M(X,!1)})}var N=c(F,2),te=o(N),G=o(te),W=o(G),Se=c(N,2);{var K=M=>{var U=To();p(M,U)},Y=M=>{var U=Mo(),Q=o(U),re=c(Q,2),fe=o(re);C(_e=>{ht(Q,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),ht(re,"href",_e),w(fe,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>Pa(t())],me),p(M,U)};O(Se,M=>{t().isForTest?M(K):M(Y,!1)})}C((M,U,Q,re)=>{he(m,`duel_card duel_card_info ${t().kind??""} ${M??""} svelte-rccxcp`),w(d,t().name),w(x,U),w(j,Q),w(W,re)},[()=>{var M;return(M=t().monsterCategories)==null?void 0:M.join(" ")},()=>"★".repeat(t().level||0),()=>"☆".repeat(t().rank||0),()=>{var M;return(M=a())==null?void 0:M.description}],me),p(v,m)};O(s,v=>{t()&&v(u)})}p(e,n),He()}const jo={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class $o{constructor(){Ue(this,"DefaultSeparator1","/");Ue(this,"DefaultSeparator2"," ");Ue(this,"DefaultSeparator3",":");Ue(this,"createDate",r=>{if(!r)return;const t=new Date(r);if(!isNaN(t.getTime()))return t});Ue(this,"createDateOr",(r,t)=>this.createDate(r)||t||new Date);Ue(this,"truncateDate",r=>{const t=r||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});Ue(this,"addDate",(r,t)=>{const a=this.createDateOr(r);return a.setDate(a.getDate()+t),a});Ue(this,"addMonth",(r,t)=>{const a=this.createDateOr(r);return a.setMonth(a.getMonth()+t),a});Ue(this,"addYear",(r,t)=>{const a=this.createDateOr(r);return a.setFullYear(a.getFullYear()+t),a});Ue(this,"getDayOfWeek",(r,t="dddd")=>{const a=this.createDate(r);return a?jo[a.getDay()][t]:""});Ue(this,"formatToYYYYMMDD",(r,t=this.DefaultSeparator1)=>{const a=this.createDate(r);if(!a)return"";const n=a.getFullYear().toString(),s=("0"+(a.getMonth()+1)).slice(-2),u=("0"+a.getDate()).slice(-2);return n+t+s+t+u});Ue(this,"formatToYYYYMM",(r,t=this.DefaultSeparator1)=>{const a=this.createDate(r);if(!a)return"";t||(t="");const n=a.getFullYear().toString(),s=("0"+(a.getMonth()+1)).slice(-2);return n+t+s});Ue(this,"formatToHHMMSS",(r,t=this.DefaultSeparator3)=>{const a=this.createDate(r);if(!a)return"";t||(t="");const n=a.getHours(),s=a.getMinutes(),u=a.getSeconds();return("0"+n).slice(-2)+t+("0"+s).slice(-2)+t+("0"+u).slice(-2)});Ue(this,"formatToHHMM",(r,t=this.DefaultSeparator3)=>{const a=this.createDate(r);if(!a)return"";t||(t="");const n=("0"+a.getHours()).slice(-2),s=("0"+a.getMinutes()).slice(-2);return n+t+s});Ue(this,"formatToYYYYMMDD_HHMM",(r,t=this.DefaultSeparator1,a=this.DefaultSeparator2,n=this.DefaultSeparator3)=>{const s=this.createDate(r);return s?this.formatToYYYYMMDD(s,t)+a+this.formatToHHMM(s,n):""});Ue(this,"formatToYYYYMMDD_HHMMSS",(r,t=this.DefaultSeparator1,a=this.DefaultSeparator2,n=this.DefaultSeparator3)=>{const s=this.createDate(r);return s?this.formatToYYYYMMDD(s,t)+a+this.formatToHHMMSS(s,n):""})}}const lt=new $o;Date.prototype.truncateDate=function(){return lt.truncateDate(this)};Date.prototype.getCloneOr=function(e){return lt.createDateOr(this,e)};Date.prototype.addDate=function(e){return lt.addDate(this,e)};Date.prototype.addMonth=function(e){return lt.addDate(this,e)};Date.prototype.addYear=function(e){return lt.addDate(this,e)};Date.prototype.getDayOfWeek=function(e="dddd"){return lt.getDayOfWeek(this,e)};Date.prototype.formatToYYYYMM=function(e){return lt.formatToYYYYMM(this,e)};Date.prototype.formatToYYYYMMDD=function(e){return lt.formatToYYYYMMDD(this,e)};Date.prototype.formatToYYYYMMDD_HHMM=function(e,r,t){return lt.formatToYYYYMMDD_HHMM(this,e,r,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(e,r,t){return lt.formatToYYYYMMDD_HHMMSS(this,e,r,t)};Date.prototype.formatToHHMM=function(e){return lt.formatToHHMM(this,e)};Date.prototype.formatToHHMMSS=function(e){return lt.formatToHHMMSS(this,e)};String.prototype.format=(e,...r)=>{for(const[t,a]of r.entries()){const n=new RegExp(`\\{${t}\\}`,"g");e=e.replace(n,a)}return e};var Io=b('<label><input type="checkbox"> </label>'),No=b('<label><input type="checkbox"> </label>'),Oo=b('<label><input type="checkbox"> <div style="display: inline-block;"></div> </label>'),Yo=b('<label><input type="checkbox"> </label>'),Ro=b('<label><input type="checkbox"> </label>'),Lo=b('<label><input type="checkbox"> </label>'),Po=b("<option> </option>"),Fo=b('<div class="svelte-138s9ji"><a class="white_button svelte-138s9ji" download="SVS_DeckInfos.json">ダウンロード</a></div>'),Uo=b('<div class="svelte-138s9ji"></div>'),zo=b('<div class="svelte-138s9ji"><a class="white_button svelte-138s9ji" download="SVS_DeckInfos.json">ダウンロード（一括）</a></div>'),Bo=b('<div class="svelte-138s9ji"></div>'),Ho=b('<div class="deck_editor_body_right_header svelte-138s9ji"><div class="deck_editor_body_right_header_row svelte-138s9ji"><div class="svelte-138s9ji">編集対象 <select></select></div> <div class="svelte-138s9ji"></div> <div class="svelte-138s9ji">新規名称 <input type="text"></div></div> <div class="deck_editor_body_right_header_row svelte-138s9ji"></div> <div class="deck_editor_body_right_header_row svelte-138s9ji"><div class="svelte-138s9ji">基本操作</div> <div class="svelte-138s9ji"><button class="white_button svelte-138s9ji">デッキを保存</button></div> <div class="svelte-138s9ji"></div> <div class="svelte-138s9ji"><button class="white_button svelte-138s9ji">デッキを複製</button></div> <div class="svelte-138s9ji"><button class="white_button svelte-138s9ji" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-138s9ji"><div class="svelte-138s9ji">DL/UL</div> <!> <!></div></div> <!>',1),Wo=b("<div>デッキ情報読込中</div>"),Ko=b('<div class="deck_editor svelte-138s9ji"><div class="deck_editor_header"></div> <div class="deck_editor_body svelte-138s9ji"><div class="deck_editor_body_left svelte-138s9ji"><div role="contentinfo"><div class="deck_editor_search_box_header svelte-138s9ji"><div>検索条件</div> <div><button class="white_button svelte-138s9ji">条件クリア</button></div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji">名称</div> <div class="svelte-138s9ji"><input type="text" style="width:70%">※ルビには対応していません</div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji"><button class="search_condition_title black_button svelte-138s9ji">種類</button></div> <div class="svelte-138s9ji"></div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji"><button class="search_condition_title black_button svelte-138s9ji">モンスター</button></div> <div class="svelte-138s9ji"></div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji"><button class="search_condition_title black_button svelte-138s9ji">属性</button></div> <div class="svelte-138s9ji"></div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji"><button class="search_condition_title black_button svelte-138s9ji">種族</button></div> <div class="svelte-138s9ji"></div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji"><button class="search_condition_title black_button svelte-138s9ji">魔法</button></div> <div class="svelte-138s9ji"></div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji"><button class="search_condition_title black_button svelte-138s9ji">罠</button></div> <div class="svelte-138s9ji"></div></div> <div class="deck_editor_search_box_row svelte-138s9ji"><div class="svelte-138s9ji">テスト用</div> <div class="svelte-138s9ji"><label><input type="checkbox"> テスト用カードを表示する</label></div></div></div> <!></div> <div class="deck_editor_body_center svelte-138s9ji"><!></div> <div class="deck_editor_body_right svelte-138s9ji"><!></div></div></div>');function Vo(e,r){Be(r,!1);const t=[],a=[],n=[],s=[],u=[],v=[],m={name:"",cardKinds:hi.filter(A=>A!=="XyzMaterial"),monsterCategories:[...xi],monsterAttributes:[...wi],monsterTypes:[...ki],spellCategories:[...yi],trapCategories:[...bi],isForTest:!1},l=ye(structuredClone(m));let f=ye("SearchCondition");const _=async()=>{Ie(l,i(l).name=""),Ie(l,i(l).cardKinds=[]),Ie(l,i(l).monsterCategories=[]),Ie(l,i(l).monsterAttributes=[]),Ie(l,i(l).monsterTypes=[]),Ie(l,i(l).spellCategories=[]),Ie(l,i(l).trapCategories=[]),Ie(l,i(l).isForTest=!1)},d=async()=>{const L=(await i(x)).find(Ee=>Ee.id===i(h));L&&I(k,{...L,cardInfos:L.cardNames.map(Ee=>jt[Ee])})},g=()=>wt.getAllDeckInfo().then(A=>(I(h,(A.find(L=>L.lastUsedAt.getTime()===Math.max(...A.map(Ee=>Ee.lastUsedAt.getTime())))??A[0]).id),A));let h=ye(-1),x=ye(g()),S=ye(i(x).then(A=>wt.convertToObjectURL(A)));i(x).then(d);const j=()=>{I(x,g()),I(S,i(x).then(A=>wt.convertToObjectURL(A))),d()};let k=ye({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),T=ye(jt.ゾンビーノ);const q=()=>Object.values(jt).filter(A=>{if(!i(l).cardKinds.includes(A.kind)||i(l).name.trim().length&&!A.name.includes(i(l).name)||A.isForTest&&!i(l).isForTest)return!1;if(A.kind==="Monster")return A.attributes&&!i(l).monsterAttributes.union(A.attributes).length||A.types&&!i(l).monsterTypes.union(A.types).length||!A.monsterCategories?!1:A.monsterCategories.union(i(l).monsterCategories).length;if(A.kind==="Spell")return A.spellCategory&&i(l).spellCategories.includes(A.spellCategory);if(A.kind==="Trap")return A.trapCategory&&i(l).trapCategories.includes(A.trapCategory)}),F=A=>{I(f,"CardDetail"),I(T,A)},J=async()=>{const L=(await i(x)).find(Ee=>Ee.id===i(h));if(!L)throw new Error("illegal state");return L},X=async A=>{Array.isArray(i(l)[A])&&Array.isArray(m[A])&&Ie(l,i(l)[A]=i(l)[A].length?[]:[...m[A]])},N=async()=>{const A=await J();await A.saveDeckInfo({...A,name:i(k).name,cardNames:i(k).cardInfos.map(L=>L.name),lastUsedAt:new Date}),j()},te=async()=>{(await wt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,i(k).cardInfos.map(L=>L.name))).saveDeckInfo(),j()},G=async A=>{const L=await J();!A.shiftKey&&!confirm(`デッキ【${L.name}】を削除します。
よろしいですか？`)||(await L.delete(),j())};Je();var W=Ko(),Se=c(o(W),2),K=o(Se),Y=o(K),M=o(Y),U=c(o(M),2),Q=o(U),re=c(M,2),fe=c(o(re),2),_e=o(fe),ue=c(re,2),y=o(ue),R=o(y),P=c(y,2);ne(P,5,()=>hi.filter(A=>A!=="XyzMaterial"),ae,(A,L)=>{var Ee=Io(),ke=o(Ee),Le,We=c(ke);C(()=>{Le!==(Le=i(L))&&(ke.value=(ke.__value=i(L))==null?"":i(L)),w(We,` ${Ui[i(L)]??""}`)}),Lt(t,[],ke,()=>(i(L),i(l).cardKinds),Ke=>Ie(l,i(l).cardKinds=Ke)),p(A,Ee)});var ee=c(ue,2),B=o(ee),H=o(B),E=c(B,2);ne(E,5,()=>xi,ae,(A,L)=>{var Ee=No(),ke=o(Ee),Le,We=c(ke);C(()=>{Le!==(Le=i(L))&&(ke.value=(ke.__value=i(L))==null?"":i(L)),w(We,` ${sr[i(L)]??""}${Er[i(L)]??""}`)}),Lt(a,[],ke,()=>(i(L),i(l).monsterCategories),Ke=>Ie(l,i(l).monsterCategories=Ke)),p(A,Ee)});var D=c(ee,2),V=o(D),ie=o(V),$=c(V,2);ne($,5,()=>wi,ae,(A,L)=>{var Ee=Oo(),ke=o(Ee),Le,We=c(ke,2),Ke=c(We);C(()=>{Le!==(Le=i(L))&&(ke.value=(ke.__value=i(L))==null?"":i(L)),he(We,`monster_attr ${i(L)??""} svelte-138s9ji`),w(Ke,` ${ti[i(L)]??""}`)}),Lt(n,[],ke,()=>(i(L),i(l).monsterAttributes),Rr=>Ie(l,i(l).monsterAttributes=Rr)),p(A,Ee)});var z=c(D,2),oe=o(z),pe=o(oe),ve=c(oe,2);ne(ve,5,()=>ki,ae,(A,L)=>{var Ee=Yo(),ke=o(Ee),Le,We=c(ke);C(()=>{Le!==(Le=i(L))&&(ke.value=(ke.__value=i(L))==null?"":i(L)),w(We,` ${nr[i(L)]??""}
                ${Sr[i(L)]??""}`)}),Lt(s,[],ke,()=>(i(L),i(l).monsterTypes),Ke=>Ie(l,i(l).monsterTypes=Ke)),p(A,Ee)});var de=c(z,2),se=o(de),Ae=o(se),je=c(se,2);ne(je,5,()=>yi,ae,(A,L)=>{var Ee=Ro(),ke=o(Ee),Le,We=c(ke);C(()=>{Le!==(Le=i(L))&&(ke.value=(ke.__value=i(L))==null?"":i(L)),w(We,` ${lr[i(L)]??""}`)}),Lt(u,[],ke,()=>(i(L),i(l).spellCategories),Ke=>Ie(l,i(l).spellCategories=Ke)),p(A,Ee)});var Re=c(de,2),Ze=o(Re),Pe=o(Ze),Ne=c(Ze,2);ne(Ne,5,()=>bi,ae,(A,L)=>{var Ee=Lo(),ke=o(Ee),Le,We=c(ke);C(()=>{Le!==(Le=i(L))&&(ke.value=(ke.__value=i(L))==null?"":i(L)),w(We,` ${or[i(L)]??""}`)}),Lt(v,[],ke,()=>(i(L),i(l).trapCategories),Ke=>Ie(l,i(l).trapCategories=Ke)),p(A,Ee)});var Fe=c(Re,2),we=c(o(Fe),2),xe=o(we),ge=o(xe),le=c(Y,2);Ao(le,{get cardInfo(){return i(T)}});var ce=c(K,2),Te=o(ce);const $e=me(q);Pi(Te,{mode:"List",get allCardInfos(){return i($e)},onAttention:F,get deckCardInfos(){return i(k).cardInfos},set deckCardInfos(A){Ie(k,i(k).cardInfos=A)},$$legacy:!0});var Oe=c(ce,2),et=o(Oe);Jt(et,()=>i(x),A=>{var L=Wo();p(A,L)},(A,L)=>{var Ee=Ho(),ke=Z(Ee),Le=o(ke),We=o(Le),Ke=c(o(We));C(()=>{i(h),Qt(()=>{i(L)})}),ne(Ke,5,()=>i(L),ae,(Ve,rt)=>{var ot=Po(),Ot={},Lr=o(ot);C(()=>{Ot!==(Ot=i(rt).id)&&(ot.value=(ot.__value=i(rt).id)==null?"":i(rt).id),w(Lr,i(rt).name)}),p(Ve,ot)});var Rr=c(We,4),Da=c(o(Rr)),fi=c(Le,4),_i=c(o(fi),2),Sa=o(_i),pi=c(_i,4),Ea=o(pi),Ta=c(pi,2),Ma=o(Ta),qa=c(fi,2),mi=c(o(qa),2);Jt(mi,J,Ve=>{var rt=Uo();p(Ve,rt)},(Ve,rt)=>{var ot=Fo(),Ot=o(ot);C(Lr=>ht(Ot,"href",Lr),[()=>wt.convertToObjectURL([i(rt)])],me),p(Ve,ot)});var Aa=c(mi,2);Jt(Aa,()=>i(S),Ve=>{var rt=Bo();p(Ve,rt)},(Ve,rt)=>{var ot=zo(),Ot=o(ot);C(()=>ht(Ot,"href",i(rt))),p(Ve,ot)});var ja=c(ke,2);Pi(ja,{mode:"Deck",allCardInfos:[],onAttention:F,get deckCardInfos(){return i(k).cardInfos},set deckCardInfos(Ve){Ie(k,i(k).cardInfos=Ve)},$$legacy:!0}),Zt(Ke,()=>i(h),Ve=>I(h,Ve)),be("change",Ke,d),ei(Da,()=>i(k).name,Ve=>Ie(k,i(k).name=Ve)),be("click",Sa,N),be("click",Ea,te),be("click",Ma,G),p(A,Ee)}),C(()=>he(Y,`deck_editor_search_box ${(i(f)==="SearchCondition"?"":"minimum")??""} svelte-138s9ji`)),be("click",Q,_),ei(_e,()=>i(l).name,A=>Ie(l,i(l).name=A)),be("click",R,()=>X("cardKinds")),be("click",H,()=>X("monsterCategories")),be("click",ie,()=>X("monsterAttributes")),be("click",pe,()=>X("monsterTypes")),be("click",Ae,()=>X("spellCategories")),be("click",Pe,()=>X("trapCategories")),_s(ge,()=>i(l).isForTest,A=>Ie(l,i(l).isForTest=A)),be("mouseenter",Y,()=>I(f,"SearchCondition")),p(e,W),He()}const Go="2025-05-05 16:03:53",Qo={timestamp:Go},Xo=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],Zo=3;var Jo=b("<option> </option>"),ev=b("<option> </option>"),tv=b("<option> </option>"),rv=b("<option> </option>"),iv=b('<div class="svelte-1tmphfm"><label for="deck_selector" class="deck_selector svelte-1tmphfm">デッキ：</label> <select id="deck_selector" class="deck_selector svelte-1tmphfm"></select></div> <div class="svelte-1tmphfm"><label for="npc_selector" class="npc_selector svelte-1tmphfm">対戦相手：</label> <select id="npc_selector" class="npc_selector svelte-1tmphfm"></select> <div> </div></div> <div class="svelte-1tmphfm"><label for="npc_deck_selector" class="deck_selector svelte-1tmphfm">対戦相手のデッキ：</label> <select id="npc_deck_selector" class="deck_selector svelte-1tmphfm"><option>デフォルト</option><!></select></div> <div class="svelte-1tmphfm"><label for="npc_selector" class="npc_selector svelte-1tmphfm">先攻後攻：</label> <select id="npc_selector" class="npc_selector svelte-1tmphfm"></select></div> <div class="svelte-1tmphfm"><button class="btn svelte-1tmphfm">duel start!</button></div>',1),av=b('<div class="svelte-1tmphfm">デッキ情報の読み込み、もしくは作成中...</div>'),nv=b('<div class="svelte-1tmphfm"><label for="duelist_name" class="duelist_name svelte-1tmphfm">名前：</label> <input id="duelist_name" class="duelist_name svelte-1tmphfm" type="text"></div> <!> <div class="svelte-1tmphfm"><button class="btn svelte-1tmphfm">deck edit</button></div>',1),sv=b('<div class="svelte-1tmphfm">デュエリスト情報の読み込み、もしくは作成中...</div>'),lv=b('<div class="app_body svelte-1tmphfm"><!></div>'),ov=b('<div class="result_title result_win svelte-1tmphfm">YOU WIN</div>'),vv=b('<div class="result_title result_lose svelte-1tmphfm">YOU LOSE</div>'),dv=b('<div class="result_title result_draw svelte-1tmphfm">DRAW</div>'),cv=b('<div class="result svelte-1tmphfm"><!> <button class="white_button svelte-1tmphfm">TOPへ戻る</button></div>'),uv=b('<main class="svelte-1tmphfm"><div class="link link_left svelte-1tmphfm"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-1tmphfm">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-1tmphfm">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-1tmphfm">posfie(toggeter)</a></div> <div class="link link_right svelte-1tmphfm"><a class="a_button svelte-1tmphfm" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-1tmphfm">現時点とこの先のこと</a></div> <!> <div class="debug_info svelte-1tmphfm"><span> </span> <span class="user_agent_info"> </span> <span class="screen_info"></span></div> <!></main>');function fv(e,r){Be(r,!1);const t=new Fa("stk_ygo_svelte",Zo,Xo);let a=ye(),n=ye("None"),s=ye(0);const u=Ua.getOrCreateNew(t);let v=ye(wt.getAllDeckInfo(t).then(K=>(Promise.all(K.filter(Y=>!Y.lastUsedAt).map(Y=>{Y.saveDeckInfo()})),I(s,(K.find(Y=>Y.lastUsedAt.getTime()===Math.max(...K.map(M=>M.lastUsedAt.getTime())))??K[0]).id),K)));const m=async()=>{let K=(await i(v)).find(Y=>Y.id===i(s));if(K||(K=(await f()).find(Y=>Y.id===i(s))),!K)throw new Error("illegal state");return K},l=async()=>{(await u).save()},f=()=>(I(v,wt.getAllDeckInfo(t).then(K=>(I(s,(K.find(Y=>Y.lastUsedAt.getTime()===Math.max(...K.map(M=>M.lastUsedAt.getTime())))??K[0]).id),K))),i(v)),_=async()=>{(await i(v)).length||(await wt.prepareSampleDeck(),f())},d=async()=>{await Promise.all([l(),_()]);const K=await m(),Y=await u;await K.updateTimestamp();const M=Fr.find(Q=>Q.id===Y.previousNpcId);let U=Di.slice(-1)[0];M&&(Y.previousNpcDeckId>-1?U=(await i(v)).find(Q=>Q.id===Y.previousNpcDeckId)??U:M.id===-1&&(U=Di.find(Q=>Q.id===-1)??U),I(a,new Ha(Y,"Player",K,[],M,"NPC",U,[],Y.previousStartMode)),i(a).onDuelEnd.append(()=>(I(a,i(a)),"RemoveMe")))},g=async()=>{await Promise.all([l(),_()]),I(n,"DeckEdit")},h=async K=>{await l(),K.key==="Enter"&&!K.repeat&&(await u).save()},x=()=>{I(v,f()),I(a,void 0),I(n,"None")};_(),Je();var S=uv(),j=c(o(S),2),k=o(j),T=c(j,2);{var q=K=>{_o(K,{get duel(){return i(a)}})},F=K=>{var Y=Ce(),M=Z(Y);{var U=re=>{Vo(re,{})},Q=re=>{var fe=lv(),_e=o(fe);Jt(_e,()=>u,ue=>{var y=sv();p(ue,y)},(ue,y)=>{var R=nv(),P=Z(R),ee=c(o(P),2),B=c(P,2);Jt(B,()=>i(v),D=>{var V=av();p(D,V)},(D,V)=>{var ie=iv(),$=Z(ie),z=c(o($),2);C(()=>{i(s),Qt(()=>{i(V)})}),ne(z,5,()=>i(V),ae,(we,xe)=>{var ge=Jo(),le={},ce=o(ge);C(()=>{le!==(le=i(xe).id)&&(ge.value=(ge.__value=i(xe).id)==null?"":i(xe).id),w(ce,i(xe).name)}),p(we,ge)});var oe=c($,2),pe=c(o(oe),2);C(()=>{i(y),Qt(()=>{})}),ne(pe,5,()=>Fr,ae,(we,xe)=>{var ge=ev(),le={},ce=o(ge);C(()=>{le!==(le=i(xe).id)&&(ge.value=(ge.__value=i(xe).id)==null?"":i(xe).id),w(ce,i(xe).name)}),p(we,ge)});var ve=c(pe,2),de=o(ve),se=c(oe,2),Ae=c(o(se),2);C(()=>{i(y),Qt(()=>{i(V)})});var je=o(Ae);je.value=(je.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Re=c(je);ne(Re,1,()=>i(V),ae,(we,xe)=>{var ge=tv(),le={},ce=o(ge);C(()=>{le!==(le=i(xe).id)&&(ge.value=(ge.__value=i(xe).id)==null?"":i(xe).id),w(ce,i(xe).name)}),p(we,ge)});var Ze=c(se,2),Pe=c(o(Ze),2);C(()=>{i(y),Qt(()=>{})}),ne(Pe,5,()=>Ba(Ci),ae,(we,xe)=>{var ge=rv(),le={},ce=o(ge);C(()=>{le!==(le=i(xe))&&(ge.value=(ge.__value=i(xe))==null?"":i(xe)),w(ce,Ci[i(xe)])}),p(we,ge)});var Ne=c(Ze,2),Fe=o(Ne);C(we=>w(de,`※${we??""}`),[()=>{var we;return(we=Fr.find(xe=>xe.id===i(y).previousNpcId))==null?void 0:we.description}],me),Zt(z,()=>i(s),we=>I(s,we)),Zt(pe,()=>i(y).previousNpcId,we=>i(y).previousNpcId=we),Zt(Ae,()=>i(y).previousNpcDeckId,we=>i(y).previousNpcDeckId=we),Zt(Pe,()=>i(y).previousStartMode,we=>i(y).previousStartMode=we),be("click",Fe,d),p(D,ie)});var H=c(B,2),E=o(H);ei(ee,()=>i(y).name,D=>i(y).name=D),be("keypress",ee,h),be("click",E,g),p(ue,R)}),p(re,fe)};O(M,re=>{i(n)==="DeckEdit"?re(U):re(Q,!1)},!0)}p(K,Y)};O(T,K=>{i(a)?K(q):K(F,!1)})}var J=c(T,2),X=o(J),N=o(X),te=c(X,2),G=o(te),W=c(J,2);{var Se=K=>{var Y=cv(),M=o(Y);{var U=fe=>{var _e=Ce(),ue=Z(_e);{var y=P=>{var ee=ov();p(P,ee)},R=P=>{var ee=Ce(),B=Z(ee);{var H=E=>{var D=vv();p(E,D)};O(B,E=>{i(a).winner.seat==="Above"&&E(H)},!0)}p(P,ee)};O(ue,P=>{i(a).winner.seat==="Below"?P(y):P(R,!1)})}p(fe,_e)},Q=fe=>{var _e=dv();p(fe,_e)};O(M,fe=>{i(a).winner?fe(U):fe(Q,!1)})}var re=c(M,2);be("click",re,x),qt(3,Y,()=>Cs,()=>({delay:200,duration:2e3})),p(K,Y)};O(W,K=>{i(a)&&i(a).isEnded&&K(Se)})}C(()=>{w(N,`build at: ${Qo.timestamp}`),w(G,za.text)}),be("click",k,x),p(e,S),He()}es(fv,{target:document.getElementById("app")});
