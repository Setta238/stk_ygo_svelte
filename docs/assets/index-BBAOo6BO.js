var Ha=Object.defineProperty;var ha=d=>{throw TypeError(d)};var Pa=(d,s,t)=>s in d?Ha(d,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[s]=t;var Qe=(d,s,t)=>Pa(d,typeof s!="symbol"?s+"":s,t),ya=(d,s,t)=>s.has(d)||ha("Cannot "+t);var it=(d,s,t)=>(ya(d,s,"read from private field"),t?t.call(d):s.get(d)),Nt=(d,s,t)=>s.has(d)?ha("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(d):s.set(d,t),aa=(d,s,t,v)=>(ya(d,s,"write to private field"),v?v.call(d,t):s.set(d,t),t);import{s as xa,r as Oa,a as $,b as La,l as Ra,g as e,d as Ia,p as nt,c as Ke,m as xe,i as ot,t as n,e as a,f as y,h as f,j as ge,k as Ye,n as dt,o as ye,q as r,u as lt,v as Pe,D as Wa,w as Se,x as U,y as i,z as oe,A as $t,B as re,C as ve,E as g,F as Ka,G as Je,H as la,I as za,J as Va,K as St,L as st,M as Ut,N as qa,O as va,P as Xt,Q as da,R as Qt,S as ca,T as Jt,U as Zt,V as Ga,W as Xa,X as Qa,Y as Ja,Z as Za,_ as er,$ as tr,a0 as Kt,a1 as zt,a2 as ra,a3 as Na,a4 as ar,a5 as rr,a6 as ir,a7 as sr,a8 as nr,a9 as gt,aa as or,ab as lr,ac as vr,ad as ka,ae as wa,af as Ca,ag as Da,ah as $a,ai as Sa,aj as At,ak as Yt,al as ia,am as Ct,an as dr,ao as cr,ap as Ma,aq as Et,ar as Dt,as as _r,at as ur,au as fr,av as gr,aw as Ta,ax as pr,ay as br}from"../chunk/entity_proc_20260102_143115.js";import"../chunk/json_20260102_143115.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))v(_);new MutationObserver(_=>{for(const c of _)if(c.type==="childList")for(const b of c.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&v(b)}).observe(document,{childList:!0,subtree:!0});function t(_){const c={};return _.integrity&&(c.integrity=_.integrity),_.referrerPolicy&&(c.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?c.credentials="include":_.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function v(_){if(_.ep)return;_.ep=!0;const c=t(_);fetch(_.href,c)}})();const mr=d=>d;function _a(d){const s=d-1;return s*s*s+1}function ja(d){const s=typeof d=="string"&&d.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return s?[parseFloat(s[1]),s[2]||"px"]:[d,"px"]}function hr(d,{delay:s=0,duration:t=400,easing:v=mr}={}){const _=+getComputedStyle(d).opacity;return{delay:s,duration:t,easing:v,css:c=>`opacity: ${c*_}`}}function yr(d,{delay:s=0,duration:t=400,easing:v=_a,x:_=0,y:c=0,opacity:b=0}={}){const o=getComputedStyle(d),I=+o.opacity,V=o.transform==="none"?"":o.transform,k=I*(1-b),[l,K]=ja(_),[H,z]=ja(c);return{delay:s,duration:t,easing:v,css:(R,q)=>`
			transform: ${V} translate(${(1-R)*l}${K}, ${(1-R)*H}${z});
			opacity: ${I-k*q}`}}function pe(d,{delay:s=0,duration:t=400,easing:v=_a,axis:_="y"}={}){const c=getComputedStyle(d),b=+c.opacity,o=_==="y"?"height":"width",I=parseFloat(c[o]),V=_==="y"?["top","bottom"]:["left","right"],k=V.map(Y=>`${Y[0].toUpperCase()}${Y.slice(1)}`),l=parseFloat(c[`padding${k[0]}`]),K=parseFloat(c[`padding${k[1]}`]),H=parseFloat(c[`margin${k[0]}`]),z=parseFloat(c[`margin${k[1]}`]),R=parseFloat(c[`border${k[0]}Width`]),q=parseFloat(c[`border${k[1]}Width`]);return{delay:s,duration:t,easing:v,css:Y=>`overflow: hidden;opacity: ${Math.min(Y*20,1)*b};${o}: ${Y*I}px;padding-${V[0]}: ${Y*l}px;padding-${V[1]}: ${Y*K}px;margin-${V[0]}: ${Y*H}px;margin-${V[1]}: ${Y*z}px;border-${V[0]}-width: ${Y*R}px;border-${V[1]}-width: ${Y*q}px;min-${o}: 0`}}function Ea(d,s){for(const t in s)d[t]=s[t];return d}function xr({fallback:d,...s}){const t=new Map,v=new Map;function _(b,o,I){const{delay:V=0,duration:k=D=>Math.sqrt(D)*30,easing:l=_a}=Ea(Ea({},s),I),K=b.getBoundingClientRect(),H=o.getBoundingClientRect(),z=K.left-H.left,R=K.top-H.top,q=K.width/H.width,Y=K.height/H.height,ie=Math.sqrt(z*z+R*R),le=getComputedStyle(o),Te=le.transform==="none"?"":le.transform,j=+le.opacity;return{delay:V,duration:typeof k=="function"?k(ie):k,easing:l,css:(D,X)=>`
			   opacity: ${D*j};
			   transform-origin: top left;
			   transform: ${Te} translate(${X*z}px,${X*R}px) scale(${D+(1-D)*q}, ${D+(1-D)*Y});
		   `}}function c(b,o,I){return(V,k)=>(b.set(k.key,V),()=>{if(o.has(k.key)){const l=o.get(k.key);return o.delete(k.key),_(l,V,k)}return b.delete(k.key),d&&d(V,k,I)})}return[c(v,t,!1),c(t,v,!0)]}function Aa(d){return Object.prototype.toString.call(d)==="[object Date]"}function kr(d){return d}function sa(d){const s=d-1;return s*s*s+1}function na(d,s){if(d===s||d!==d)return()=>d;const t=typeof d;if(t!==typeof s||Array.isArray(d)!==Array.isArray(s))throw new Error("Cannot interpolate values of different type");if(Array.isArray(d)){const v=s.map((_,c)=>na(d[c],_));return _=>v.map(c=>c(_))}if(t==="object"){if(!d||!s)throw new Error("Object cannot be null");if(Aa(d)&&Aa(s)){const c=d.getTime(),o=s.getTime()-c;return I=>new Date(c+I*o)}const v=Object.keys(s),_={};return v.forEach(c=>{_[c]=na(d[c],s[c])}),c=>{const b={};return v.forEach(o=>{b[o]=_[o](c)}),b}}if(t==="number"){const v=s-d;return _=>d+_*v}return()=>s}var mt,Bt,Ft,Mt;const ua=class ua{constructor(s,t={}){Nt(this,mt,xa(void 0));Nt(this,Bt,xa(void 0));Nt(this,Ft);Nt(this,Mt,null);it(this,mt).v=it(this,Bt).v=s,aa(this,Ft,t)}static of(s,t){const v=new ua(s(),t);return Oa(()=>{v.set(s())}),v}set(s,t){var l;$(it(this,Bt),s);let{delay:v=0,duration:_=400,easing:c=kr,interpolate:b=na}={...it(this,Ft),...t};if(_===0)return(l=it(this,Mt))==null||l.abort(),$(it(this,mt),s),Promise.resolve();const o=La.now()+v;let I,V=!1,k=it(this,Mt);return aa(this,Mt,Ra(K=>{if(K<o)return!0;if(!V){V=!0;const z=it(this,mt).v;I=b(z,s),typeof _=="function"&&(_=_(z,s)),k==null||k.abort()}const H=K-o;return H>_?($(it(this,mt),s),!1):($(it(this,mt),I(c(H/_))),!0)})),it(this,Mt).promise}get current(){return e(it(this,mt))}get target(){return e(it(this,Bt))}set target(s){this.set(s)}};mt=new WeakMap,Bt=new WeakMap,Ft=new WeakMap,Mt=new WeakMap;let Vt=ua;var wr=n('<div class="phase_display svelte-1ycsdg6"><span class="svelte-1ycsdg6"> </span> </div>'),Cr=n('<div class="lifepoint_display svelte-1ycsdg6"><div class="svelte-1ycsdg6"> </div> <div class="svelte-1ycsdg6"> </div></div>'),Dr=(d,s,t)=>s(e(t)),$r=n('<div class="svelte-1ycsdg6"><button class="phase_button svelte-1ycsdg6"> </button></div>'),Sr=n("<div><!></div>"),Mr=n('<div class="svelte-1ycsdg6"><!></div>'),Tr=n("<div><!></div>"),jr=n('<div class="config_button_wrapper svelte-1ycsdg6"><button id="config_button" class="svelte-1ycsdg6">⚙</button></div>'),Er=n("<!> <!> <!> <!>",1),Ar=n('<div style="position: absolute;" class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Yr=n('<div style="position: absolute; top:0rem" class="svelte-1ycsdg6">｛効果対象｝</div>'),Br=n('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Ir=n(" <!> 】",1),qr=n('<div style="position: absolute; bottom:0rem" class="svelte-1ycsdg6"> <!></div>'),Nr=n("<!> <!>",1),Ur=n('<div class="badge svelte-1ycsdg6"> </div>'),Fr=n('<div class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Hr=n("<!> <!> <!> <!>",1),Pr=n('<td><div role="listitem"><!></div></td>');function Or(d,s){nt(s,!1);let t=Ke(s,"view",12),v=Ke(s,"row",8),_=Ke(s,"column",8),c=Ke(s,"selectedEntities",28,()=>[]),b=Ke(s,"selectedCells",28,()=>[]),o=xe(t().getCell(v(),_())),I=xe(new Vt(e(o).field.duel.duelists.Above.lp,{duration:400,easing:sa})),V=xe(new Vt(e(o).field.duel.duelists.Below.lp,{duration:400,easing:sa}));const k=()=>{$(o,t().getCell(v(),_())),Pe(I,e(I).target=e(o).field.duel.duelists.Above.lp),Pe(V,e(V).target=e(o).field.duel.duelists.Below.lp)};e(o).onUpdate.append(k),t().onDuelUpdate.append(k),t().modalController.onUpdate.append(k);let l,K=xe([]),H=()=>console.log("hoge"),z,R=xe([]),q=xe(!1),Y=xe(!1),ie=!1;const le=C=>{var F,J;$(de,[]),c().reset(),l=C.activator,H=C.resolve,$(K,C.dummyActionInfos),$(R,C.chainBlockInfos.flatMap(ee=>ee.selectedEntities).getDistinct()),z=C.entitiesChoices,$(q,!1),$(Y,((F=C.cellsChoices)==null?void 0:F.selectables.includes(e(o)))??!1),ie=e(Y)&&((J=C.cellsChoices)==null?void 0:J.qty)===1,k()};t().onWaitStart.append(le);const Te=()=>{l=void 0,$(K,[]),H=()=>{console.log("hoge")},z=void 0,$(R,[]),$(q,!1),$(Y,!1),ie=!1};t().onWaitEnd.append(Te);let j=xe(!1),D=[];const X=C=>{D=C.filter(F=>F.dests.includes(e(o))),$(j,D.length>0),k()},_e=()=>{D=[],$(j,!1),k()};t().onDragStart.append(X),t().onDragEnd.append(_e);const[De,se]=Xi;let de=xe([]);const Ee=C=>{if(l=void 0,e(o)===C.to||e(o).entities.includes(C.entity)){$(de,[...e(de),C]);const F=C.resolve;$(o,e(o)),setTimeout(()=>{$(de,e(de).filter(J=>J!==C)),C.count++,C.count>1&&F()},600)}};t().onAnimation.append(Ee);const A=C=>{H({phaseChange:C})},P=()=>e(o).isStackCell&&e(o).entities.flatMap(C=>C.actions).filter(C=>e(K).map(F=>F.action.seq).some(F=>F===C.seq)).length>0,G=C=>{var F;if(((F=C.target)==null?void 0:F.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),ie)H({selectedCells:[e(o)]});else if(e(Y))$(q,!e(q)),b(e(q)?[...b(),e(o)]:b().filter(J=>J!==e(o)));else if(e(o).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(o),!0),t().requireUpdate();const J=e(o).entities.flatMap(m=>m.actions).map(m=>m.seq),ee=e(K).filter(m=>J.includes(m.action.seq));if(ee.length){if(!l)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:l,dummyActionInfos:ee,cancelable:!0}).then(m=>{m&&H({actionInfo:m})});return}}t().requireUpdate(),console.info(e(o),fe(...e(o).visibleEntities))},ce=C=>{C.preventDefault(),C.dataTransfer&&(C.dataTransfer.dropEffect="move")},ke=C=>{C.preventDefault(),console.info("drop",C,e(j),D),C.dataTransfer&&(C.dataTransfer.dropEffect="move");try{if(e(j)&&D){if(D.length===1){const F=D[0];H({actionInfo:{...F,dest:e(o)}})}else if(D.length>1){if(!l)throw new Wa("想定されない状態");e(o).field.duel.view.modalController.terminateAll(),e(o).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:l,dummyActionInfos:D.map(F=>({...F,dest:e(o)})),cancelable:!1}).then(F=>{H({actionInfo:F})})}}}finally{t().removeDraggingActions()}},fe=(...C)=>{if(t().waitMode==="Animation")return"Disabled";if(z&&z.selectables.find(J=>C.find(ee=>J===ee)))return"Selectable";if(!e(K)||e(K).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(J=>J.state==="Shown"))return"Disabled";const F=e(K).filter(J=>C.includes(J.action.entity));return F.length===0?"Disabled":e(o).isStackCell||F[0].action.entity!==C[0]?"Clickable":F.some(J=>J.dests.length)?"Draggable":"Clickable"};ot();var B=Pr(),h=a(B);h.__click=G;var N=a(h);{var W=C=>{var F=Se(),J=U(F);{var ee=m=>{var T=Se(),S=U(T);{var O=x=>{var Z=wr(),me=a(Z),$e=a(me),he=i(me,1,!0);f((ue,M)=>{g($e,ue),g(he,M)},[()=>String(e(o).field.duel.clock.turn).padStart(2,"0"),()=>e(o).field.duel.phase.toUpperCase()],ge),r(x,Z)},w=x=>{var Z=Se(),me=U(Z);{var $e=ue=>{var M=Cr(),L=a(M),we=a(L),Ce=i(L,2),Oe=a(Ce);f((Be,Ae)=>{g(we,Be),g(Oe,Ae)},[()=>Math.floor(e(I).current),()=>Math.floor(e(V).current)],ge),r(ue,M)},he=ue=>{var M=Se(),L=U(M);{var we=Ce=>{var Oe=Se(),Be=U(Oe);{var Ae=Ue=>{var Ge=Se(),je=U(Ge);{var u=p=>{var E=Se(),ae=U(E);oe(ae,1,()=>t().duel.nextPhaseList,ve,(Me,ne)=>{var te=$r(),qe=a(te);qe.__click=[Dr,A,ne];var Le=a(qe);f(Ie=>g(Le,Ie),[()=>e(ne).toUpperCase()],ge),r(Me,te)}),r(p,E)};y(je,p=>{t().duel.isEnded||p(u)})}r(Ue,Ge)};y(Be,Ue=>{t().waitMode==="Free"&&Ue(Ae)})}r(Ce,Oe)};y(L,Ce=>{e(o).column===5&&Ce(we)},!0)}r(ue,M)};y(me,ue=>{e(o).column===3?ue($e):ue(he,!1)},!0)}r(x,Z)};y(S,x=>{e(o).column===1?x(O):x(w,!1)})}r(m,T)};y(J,m=>{e(o).row===3&&m(ee)})}r(C,F)},Q=C=>{var F=Se(),J=U(F);{var ee=T=>{var S=Er();const O=ge(()=>e(de).find(M=>M.to===e(o)));var w=U(S);{var x=M=>{var L=Sr(),we=a(L);$t(we,{get entity(){return e(O).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),f(()=>Ye(L,`card_animation_receiver ${e(o).cellType??""} svelte-1ycsdg6`)),re(1,L,()=>se,()=>({key:e(O).entity.seq})),r(M,L)};y(w,M=>{e(O)&&e(O).index==="Top"&&M(x)})}var Z=i(w,2);oe(Z,1,()=>e(o).visibleEntities,ve,(M,L)=>{var we=Se(),Ce=U(we);{var Oe=Be=>{var Ae=Mr(),Ue=a(Ae);const Ge=ge(()=>fe(e(L))),je=ge(()=>e(K).filter(u=>u.action.entity===e(L)));$t(Ue,{get entity(){return e(L)},get state(){return e(Ge)},get dummyActionInfos(){return e(je)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(u){c(u)},$$legacy:!0}),re(2,Ae,()=>De,()=>({key:e(L).seq})),r(Be,Ae)};y(Ce,Be=>{e(de).every(Ae=>Ae.entity.seq!==e(L).seq)&&Be(Oe)})}r(M,we)});var me=i(Z,2);{var $e=M=>{var L=Tr(),we=a(L);$t(we,{get entity(){return e(O).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),f(()=>Ye(L,`card_animation_receiver ${e(o).cellType??""} svelte-1ycsdg6`)),re(1,L,()=>se,()=>({key:e(O).entity.seq})),r(M,L)};y(me,M=>{e(O)&&e(O).index!=="Top"&&M($e)})}var he=i(me,2);{var ue=M=>{var L=jr();r(M,L)};y(he,M=>{e(o).owner.seat==="Below"&&M(ue)})}r(T,S)},m=T=>{var S=Hr();const O=ge(()=>e(de).find(L=>L.to===e(o)));var w=U(S);{var x=L=>{var we=Ar(),Ce=a(we);$t(Ce,{get entity(){return e(O).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),re(1,we,()=>se,()=>({key:e(O).entity.seq})),r(L,we)};y(w,L=>{e(O)&&e(O).index!=="Top"&&L(x)})}var Z=i(w,2);{var me=L=>{var we=Nr(),Ce=U(we);oe(Ce,1,()=>e(o).visibleEntities.map((Ae,Ue)=>({index:Ue,entity:Ae})).toReversed(),ve,(Ae,Ue)=>{var Ge=Se(),je=U(Ge);{var u=p=>{var E=Br();const ae=ge(()=>!e(o).isStackCell&&e(Ue).index===0?fe(...e(o).visibleEntities):void 0);var Me=U(E);{var ne=Ie=>{var Ve=Yr();r(Ie,Ve)};y(Me,Ie=>{e(R).includes(e(Ue).entity)&&Ie(ne)})}var te=i(Me,2),qe=a(te);const Le=ge(()=>e(Ue).index===0?e(K).filter(Ie=>e(o).visibleEntities.includes(Ie.action.entity)):void 0);$t(qe,{get entity(){return e(Ue).entity},get state(){return e(ae)},get dummyActionInfos(){return e(Le)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(Ie){c(Ie)},$$legacy:!0}),f(()=>Ye(te,`duel_card_wrapper ${(e(Ue).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1ycsdg6`)),re(2,te,()=>De,()=>({key:e(Ue).entity.seq})),r(p,E)};y(je,p=>{e(de).every(E=>E.entity.seq!==e(Ue).entity.seq)&&p(u)})}r(Ae,Ge)});var Oe=i(Ce,2);{var Be=Ae=>{var Ue=qr(),Ge=a(Ue),je=i(Ge);oe(je,1,()=>la(e(o).visibleEntities[0].status.maxCounterQty),ve,(u,p)=>{var E=Ir(),ae=U(E),Me=i(ae);{var ne=te=>{var qe=Je();f(()=>g(qe,`/${e(o).visibleEntities[0].status.maxCounterQty[e(p)]??""}`)),r(te,qe)};y(Me,te=>{(e(o).visibleEntities[0].status.maxCounterQty[e(p)]??9999)<100&&te(ne)})}f((te,qe)=>g(ae,`【
              ${te??""}${qe??""} `),[()=>Ka(e(p)),()=>e(o).visibleEntities[0].counterHolder.getQty(e(p))],ge),r(u,E)}),f(()=>g(Ge,`【${e(o).visibleEntities[0].battlePositionName??""}】 `)),r(Ae,Ue)};y(Oe,Ae=>{e(o).visibleEntities[0].battlePosition&&Ae(Be)})}r(L,we)};y(Z,L=>{e(o).visibleEntities.length>0&&L(me)})}var $e=i(Z,2);{var he=L=>{var we=Ur(),Ce=a(we);f(()=>g(Ce,e(o).visibleEntities.length)),r(L,we)};y($e,L=>{e(o).isStackCell&&L(he)})}var ue=i($e,2);{var M=L=>{var we=Fr(),Ce=a(we);$t(Ce,{get entity(){return e(O).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),re(1,we,()=>se,()=>({key:e(O).entity.seq})),r(L,we)};y(ue,L=>{e(O)&&e(O).index==="Top"&&L(M)})}r(T,S)};y(J,T=>{e(o).cellType==="Hand"?T(ee):T(m,!1)},!0)}r(C,F)};y(N,C=>{e(o).isDisabledCell?C(W):C(Q,!1)})}f(C=>{Ye(B,`${`duel_field_cell duel_field_cell_${e(o).cellType} ${e(o).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1ycsdg6`),dt(B,"colspan",e(o).cellType==="Hand"?7:1),Ye(h,`${C??""} svelte-1ycsdg6`)},[()=>`duel_field_cell_inner_box ${e(o).cellType} ${e(j)?"can_accept_drop":""} ${P()?"can_action":""} ${e(q)?"is_selected":e(Y)?"is_selectable":""} `],ge),ye("dragover",h,ce),ye("drop",h,ke),r(d,B),lt()}Ia(["click"]);const Lr=(d,s,t=void 0,v="!!!circular reference!!!")=>{let _=[];return JSON.stringify(d,(c,b)=>{if(typeof b=="object"){if(_.indexOf(b)>-1)return v;_.push(b)}let o=b;if(s&&(o=s(c,b)),typeof o=="function")return o.toString();if(o!==b&&typeof o=="object"){if(_.indexOf(o)>-1)return v;_.push(o)}return o},t)};var Rr=n('<div class="title svelte-14z6bdh"> </div>'),Wr=n('<div class="title svelte-14z6bdh"> </div>'),Kr=n('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),zr=n('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),Vr=n("<div><!> <!></div>"),Gr=n('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),Xr=n("<div><!> <!></div>"),Qr=n("<div><!> <!></div>"),Jr=n('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function Zr(d,s){nt(s,!1);let t=xe(void 0),v=Ke(s,"log",8),_,c=xe([]);const b=()=>{const k=((_==null?void 0:_.seq)??-1)+1;v().records.slice(k).forEach(l=>{if(!_){$(c,[[[[l]]]]),_=l;return}if(!e(c)[l.clock.turn]){Pe(c,e(c)[l.clock.turn]=[[[l]]]),_=l;return}if(!e(c)[l.clock.turn][l.clock.phaseSeq]){Pe(c,e(c)[l.clock.turn][l.clock.phaseSeq]=[[l]]),_=l;return}if(_.clock.chainSeq===l.clock.chainSeq&&_.clock.chainBlockSeq===l.clock.chainBlockSeq&&_.duelist===l.duelist){e(c)[l.clock.turn][l.clock.phaseSeq].slice(-1)[0].push(l),_=l;return}e(c)[l.clock.turn][l.clock.phaseSeq].push([l]),_=l}),$(c,e(c)),za().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};v().onUpdate.append(b),v().duel.view.onDuelUpdate.append(b),b(),ot();var o=Se(),I=U(o);{var V=k=>{var l=Jr(),K=i(a(l),2);oe(K,5,()=>e(c),ve,(H,z)=>{var R=Qr(),q=a(R);{var Y=le=>{var Te=Rr(),j=a(Te);f(()=>g(j,`ターン：${e(z)[0][0][0].clock.turn??""}`)),r(le,Te)};y(q,le=>{e(z)[0][0][0].clock.turn>0&&le(Y)})}var ie=i(q,2);oe(ie,1,()=>e(z),ve,(le,Te)=>{var j=Xr(),D=a(j);{var X=De=>{var se=Wr(),de=a(se);f(()=>g(de,e(Te)[0][0].clock.period.name)),r(De,se)};y(D,De=>{e(Te)[0][0].clock.turn>0&&De(X)})}var _e=i(D,2);oe(_e,1,()=>e(Te),ve,(De,se)=>{var de=Gr();const Ee=ge(()=>{var B;return((B=e(se).find(h=>h.chainNumber!==void 0))==null?void 0:B.chainNumber)??0});var A=a(de),P=a(A),G=a(P),ce=i(P,2);{var ke=B=>{var h=Kr(),N=a(h);f(()=>g(N,`チェーン：${e(Ee)??""}`)),r(B,h)};y(ce,B=>{e(Ee)&&B(ke)})}var fe=i(A,2);oe(fe,1,()=>e(se),ve,(B,h)=>{var N=Vr(),W=a(N);{var Q=ee=>{var m=Je();f(()=>g(m,e(h).text)),r(ee,m)},C=ee=>{var m=Se(),T=U(m);{var S=w=>{var x=Je();f((Z,me,$e)=>g(x,`移動：${Z??""} ${me??""} ⇒ ${$e??""}`),[()=>{var Z;return(Z=e(h).mainEntity)==null?void 0:Z.toString()},()=>{var Z;return(Z=e(h).from)==null?void 0:Z.toString()},()=>{var Z;return(Z=e(h).to)==null?void 0:Z.toString()}],ge),r(w,x)},O=w=>{var x=Se(),Z=U(x);{var me=he=>{var ue=Je();f((M,L)=>g(ue,`生成：${M??""} void ⇒ ${L??""}`),[()=>{var M;return(M=e(h).mainEntity)==null?void 0:M.toString()},()=>{var M;return(M=e(h).to)==null?void 0:M.toString()}],ge),r(he,ue)},$e=he=>{var ue=Se(),M=U(ue);{var L=Ce=>{var Oe=Je();f((Be,Ae)=>g(Oe,`消滅：${Be??""} ${Ae??""} ⇒ void`),[()=>{var Be;return(Be=e(h).mainEntity)==null?void 0:Be.toString()},()=>{var Be;return(Be=e(h).from)==null?void 0:Be.toString()}],ge),r(Ce,Oe)},we=Ce=>{var Oe=Je();f(()=>g(Oe,e(h).text)),r(Ce,Oe)};y(M,Ce=>{e(h).type==="EntityDisappear"?Ce(L):Ce(we,!1)},!0)}r(he,ue)};y(Z,he=>{e(h).type==="EntityAppear"?he(me):he($e,!1)},!0)}r(w,x)};y(T,w=>{e(h).type==="EntityMove"?w(S):w(O,!1)},!0)}r(ee,m)};y(W,ee=>{e(h).type==="ChainBlockHeader"?ee(Q):ee(C,!1)})}var F=i(W,2);{var J=ee=>{var m=zr(),T=a(m);f(S=>dt(T,"href",S),[()=>window.URL.createObjectURL(new Blob([Lr(e(h).error,(S,O)=>["pool","bundles","duel"].includes(S)||typeof O=="function"?void 0:O,4)],{type:"text/plain"}))],ge),r(ee,m)};y(F,ee=>{e(h).error&&ee(J)})}f(ee=>Ye(N,`duel_log_record duel_log_record_${ee??""} svelte-14z6bdh`),[()=>e(h).type.toSnakeCase()],ge),r(B,N)}),f(()=>{var B,h,N;Ye(de,`duel_log_block_duelist duel_log_block_duelist_${((B=e(se)[0].duelist)==null?void 0:B.seat)??"system"} svelte-14z6bdh`),Ye(P,`duelist ${((h=e(se)[0].duelist)==null?void 0:h.seat)??""} svelte-14z6bdh`),g(G,((N=e(se)[0].duelist)==null?void 0:N.profile.name)||"SYSTEM")}),r(De,de)}),f(()=>Ye(j,`duel_log_block_phase duel_log_block_phase_${e(Te)[0][0].clock.period.key??""} svelte-14z6bdh`)),r(le,j)}),f(()=>Ye(R,`duel_log_block_turn duel_log_block_turn_${e(z)[0][0][0].clock.turn??""} svelte-14z6bdh`)),r(H,R)}),Va(K,H=>$(t,H),()=>e(t)),r(k,l)};y(I,k=>{(v().duel.view.infoBoardState==="Log"||v().duel.view.infoBoardState==="Default")&&k(V)})}r(d,o),lt()}var ei=n("<div><div> </div> <div> </div></div>");function Ya(d,s){nt(s,!1);let t=Ke(s,"duelist",12),v=xe(0),_=xe();const c=async()=>{const K=t().lp-e(v);if(!e(_)||Math.abs(K)<10){$(v,t().lp),e(_)&&(e(_)(),$(_,void 0));return}$(v,e(v)+Math.floor(Math.random()*K)),await St(100),c()},b=()=>{t(t()),!e(_)&&t().lp!==e(v)&&new Promise(K=>{$(_,K),Math.abs(t().lp-e(v)),c()})};t().duel.log.onUpdate.append(b),c(),ot();var o=ei(),I=a(o),V=a(I),k=i(I,2),l=a(k);f(K=>{Ye(o,`duelist duelist_${K??""} svelte-1sy3trd`),Ye(I,`duelist_name duelist_${K??""}_name svelte-1sy3trd`),g(V,t().profile.name),Ye(k,`duelist_lp ${(e(_)?"vibration":"")??""} svelte-1sy3trd`),g(l,e(v))},[()=>t().seat.toLowerCase()],ge),r(d,o),lt()}const ti=(d,s,t)=>(s(s()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),ai=(d,s,t)=>(s(s()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var ri=n('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),ii=n('<div></div> <div class="svelte-1uevs9j"> </div>',1),si=n("<div> </div>"),ni=n("<div> </div>"),oi=n('<div class="duel_card_info_row svelte-1uevs9j"><!> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),li=n('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),vi=n('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),di=n("<!> <!>",1),ci=n('<pre class="description svelte-1uevs9j"> </pre>'),_i=n('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),ui=n('<pre class="description svelte-1uevs9j"> </pre>'),fi=n('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),gi=n('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),pi=n('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),bi=n("[ <!> ],",1),mi=n('<div class="svelte-1uevs9j"> <!></div>'),hi=n('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),yi=n('<div class="svelte-1uevs9j"> </div>'),xi=n('<div class="svelte-1uevs9j"> </div>'),ki=n('<div class="svelte-1uevs9j"> </div>'),wi=n('<div class="svelte-1uevs9j"> </div>'),Ci=n('<div class="svelte-1uevs9j"> </div>'),Di=n('<div class="svelte-1uevs9j"> </div>'),$i=n('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Si=n('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Mi=n('<div class="svelte-1uevs9j">※テスト用カードです</div>'),Ti=n('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),ji=n('<div class="duel_card_info_links svelte-1uevs9j"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a> <!></div>'),Ei=n("<!> <!>",1),Ai=n('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Yi(d,s){nt(s,!1);let t=Ke(s,"entity",8,void 0),v=Ke(s,"mode",12,"Normal");const _=async()=>{if(!t())return;const k=(await Ut).getCardInfo(t().origin.name);if(k)return k.cardId!==void 0&&!k.description&&!k.pendulumDescription&&await qa([k.cardId]),k},c=()=>t()&&t().entityType==="Card"&&(t().origin.cardId??!1)?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t().origin.cardId}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:"";ot();var b=Se(),o=U(b);{var I=V=>{var k=Ai();k.__click=[ti,v,t],k.__contextmenu=[ai,v,t];var l=a(k),K=a(l),H=a(K),z=a(H),R=i(K,2),q=a(R),Y=a(q),ie=i(q,2),le=a(ie),Te=i(R,2);{var j=A=>{var P=di(),G=U(P);{var ce=h=>{var N=ri(),W=a(N),Q=a(W),C=i(W,2),F=a(C);f(()=>{g(Q,`◀ ${t().psL??""}`),g(F,`${t().psR??""} ▶`)}),r(h,N)};y(G,h=>{var N;(N=t().origin.monsterCategories)!=null&&N.includes("Pendulum")&&h(ce)})}var ke=i(G,2);{var fe=h=>{var N=oi(),W=U(N),Q=a(W);oe(Q,1,()=>t().attr,ve,(J,ee)=>{var m=ii(),T=U(m),S=i(T,2),O=a(S);f(()=>{Ye(T,`monster_attr ${e(ee)??""} svelte-1uevs9j`),g(O,`${va[e(ee)]??""}属性`)}),r(J,m)});var C=i(Q,2);oe(C,1,()=>t().types,ve,(J,ee)=>{var m=si(),T=a(m);f(()=>{Ye(m,`monster_cat ${e(ee)??""} svelte-1uevs9j`),g(T,`${Xt[e(ee)]??""}${da[e(ee)]??""}族`)}),r(J,m)});var F=i(W,2);oe(F,5,()=>t().status.monsterCategories??[],ve,(J,ee)=>{var m=ni(),T=a(m);f(()=>{Ye(m,`monster_cat ${e(ee)??""} svelte-1uevs9j`),g(T,`${Qt[e(ee)]??""}${ca[e(ee)]??""}`)}),r(J,m)}),r(h,N)},B=h=>{var N=Se(),W=U(N);{var Q=F=>{var J=li(),ee=i(a(J),2),m=a(ee);f(()=>g(m,`${Jt[t().status.spellCategory]??""}魔法`)),r(F,J)},C=F=>{var J=Se(),ee=U(J);{var m=T=>{var S=vi(),O=i(a(S),2),w=a(O);f(()=>g(w,`${Zt[t().status.trapCategory]??""}罠`)),r(T,S)};y(ee,T=>{t().kind==="Trap"&&t().status.trapCategory&&T(m)},!0)}r(F,J)};y(W,F=>{t().kind==="Spell"&&t().status.spellCategory?F(Q):F(C,!1)},!0)}r(h,N)};y(ke,h=>{t().kind==="Monster"?h(fe):h(B,!1)})}r(A,P)};y(Te,A=>{v()!=="Debug"&&A(j)})}var D=i(l,2),X=a(D);{var _e=A=>{var P=fi(),G=U(P);{var ce=B=>{var h=_i(),N=a(h);st(N,_,W=>{var Q=Je('"読み込み中"');r(W,Q)},(W,Q)=>{var C=ci(),F=a(C);f(()=>{var J;return g(F,(J=e(Q))==null?void 0:J.pendulumDescription)}),r(W,C)}),r(B,h)};y(G,B=>{var h;(h=t().status.monsterCategories)!=null&&h.includes("Pendulum")&&B(ce)})}var ke=i(G,2),fe=a(ke);st(fe,_,B=>{var h=Je('"読み込み中"');r(B,h)},(B,h)=>{var N=ui(),W=a(N);f(()=>{var Q;return g(W,(Q=e(h))==null?void 0:Q.description)}),r(B,N)}),r(A,P)},De=A=>{var P=Se(),G=U(P);{var ce=fe=>{var B=Se(),h=U(B);{var N=W=>{var Q=pi(),C=i(a(Q),2);oe(C,5,()=>t().actions,ve,(F,J)=>{var ee=Se();const m=ge(()=>e(J).actionCountUpperBound),T=ge(()=>e(J).actionCount);var S=U(ee);{var O=w=>{var x=gi(),Z=a(x),me=a(Z),$e=i(Z,2),he=a($e),ue=i($e,4),M=a(ue);f(()=>{g(me,e(J).title),g(he,e(T)),g(M,e(m))}),r(w,x)};y(S,w=>{e(m)!==void 0&&e(T)!==void 0&&w(O)})}r(F,ee)}),r(W,Q)};y(h,W=>{t().actions.some(Q=>Q.actionCountUpperBoundKey)&&W(N)})}r(fe,B)},ke=fe=>{var B=$i(),h=a(B),N=a(h);oe(N,0,()=>["info","status"],ve,(je,u)=>{var p=hi(),E=U(p),ae=a(E),Me=i(E,2);oe(Me,1,()=>Object.entries(t()[u]),ve,(te,qe)=>{let Le=()=>e(qe)[0],Ie=()=>e(qe)[1];var Ve=mi(),Ze=a(Ve),ct=i(Ze);{var pt=be=>{var He=bi(),We=i(U(He));oe(We,1,Ie,ve,(tt,_t)=>{var at=Je();f(xt=>g(at,`${xt??""},`),[()=>e(_t).toString()],ge),r(tt,at)}),r(be,He)},Re=be=>{var He=Je();f(We=>g(He,`${We??""},`),[()=>{var We;return(We=Ie())==null?void 0:We.toString()}],ge),r(be,He)};y(ct,be=>{Array.isArray(Ie())?be(pt):be(Re,!1)})}f(()=>g(Ze,`"${Le()??""}" : `)),r(te,Ve)});var ne=i(Me,2);ne.textContent="},",f(()=>g(ae,`"${u??""}" :{`)),r(je,p)});var W=i(N,2);W.textContent='"actions" :[';var Q=i(W,2);oe(Q,1,()=>t().actions,ve,(je,u)=>{var p=yi(),E=a(p);f(()=>g(E,`"${e(u).playType??""} ${e(u).title??""}",`)),r(je,p)});var C=i(Q,2);C.textContent="],";var F=i(C,2);F.textContent='"substituteEffects" :[';var J=i(F,2);oe(J,1,()=>t().substituteEffects,ve,(je,u)=>{var p=xi(),E=a(p);f(()=>g(E,`"${e(u).title??""}",`)),r(je,p)});var ee=i(J,2);ee.textContent="],";var m=i(ee,2);m.textContent='"continuousEffects" :[';var T=i(m,2);oe(T,1,()=>t().continuousEffects,ve,(je,u)=>{var p=ki(),E=a(p);f(()=>g(E,`"${e(u).isStarted??""}",`)),r(je,p)});var S=i(T,2);S.textContent="],";var O=i(S,2);O.textContent='"procFilters" :[';var w=i(O,2);oe(w,1,()=>t().procFilterBundle.operators,ve,(je,u)=>{var p=wi(),E=a(p);f(ae=>g(E,`"${ae??""} ${e(u).title??""} ${e(u).isEffective??""} ",`),[()=>e(u).isSpawnedBy.toString()],ge),r(je,p)});var x=i(w,2);x.textContent="],";var Z=i(x,2);Z.textContent='"numericStateOperators" :[';var me=i(Z,2);oe(me,1,()=>t().numericOprsBundle.operators,ve,(je,u)=>{var p=Ci(),E=a(p);f(ae=>g(E,`"${ae??""} ${e(u).title??""} ${e(u).isEffective??""} ${e(u).isContinuous??""} ${e(u).targetState??""} ${e(u).targetStateGen??""} ",`),[()=>e(u).isSpawnedBy.toString()],ge),r(je,p)});var $e=i(me,2);$e.textContent="],";var he=i($e,2);he.textContent='"stateOperators" :[';var ue=i(he,2);oe(ue,1,()=>t().statusOperatorBundle.operators,ve,(je,u)=>{var p=Di(),E=a(p);f(ae=>g(E,`"${ae??""} ${e(u).title??""} ${e(u).isEffective??""} ",`),[()=>e(u).isSpawnedBy.toString()],ge),r(je,p)});var M=i(ue,2);M.textContent="],";var L=i(M,2);L.textContent='"lastMoveLogRecord" :{';var we=i(L,2),Ce=a(we),Oe=i(we,2),Be=a(Oe),Ae=i(Oe,2),Ue=a(Ae),Ge=i(Ae,2);Ge.textContent="},",f((je,u)=>{g(Ce,`"movedBy":"${je??""}",`),g(Be,`"movedAs":"${u??""}",`),g(Ue,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var je;return(je=t().moveLog.latestRecord.movedBy)==null?void 0:je.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],ge),r(fe,B)};y(G,fe=>{v()==="Detail"?fe(ce):fe(ke,!1)},!0)}r(A,P)};y(X,A=>{v()==="Normal"?A(_e):A(De,!1)})}var se=i(D,2),de=a(se);{var Ee=A=>{var P=Ei(),G=U(P);{var ce=h=>{var N=Si();r(h,N)};y(G,h=>{t().origin.isOldVersion&&h(ce)})}var ke=i(G,2);{var fe=h=>{var N=Mi();r(h,N)},B=h=>{var N=ji(),W=a(N),Q=i(W,2);{var C=F=>{var J=Ti(),ee=a(J);f(m=>{var T;dt(J,"href",m),g(ee,`⇒${((T=t())!=null&&T.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[c],ge),r(F,J)};y(Q,F=>{t()&&t().entityType==="Card"&&F(C)})}f(()=>dt(W,"href",`https://yugioh-wiki.net/index.php?${t().origin.wikiEncodedName}`)),r(h,N)};y(ke,h=>{t().origin.isForTest?h(fe):h(B,!1)})}r(A,P)};y(de,A=>{t()&&A(Ee)})}f((A,P,G)=>{Ye(k,`duel_card duel_card_info ${t().origin.kind??""} ${A??""} svelte-1uevs9j`),g(z,t().nm),g(Y,P),g(le,G)},[()=>{var A;return(A=t().origin.monsterCategories)==null?void 0:A.join(" ")},()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],ge),r(V,k)};y(o,V=>{t()&&V(I)})}r(d,b),lt()}Ia(["click","contextmenu"]);var Bi=n('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),Ii=n('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),qi=n('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Ni(d,s){nt(s,!1);let t=Ke(s,"cell",12);const v=()=>{t(t())},_=I=>t().cardEntities.filter(V=>V.face===I);t().field.duel.view.onDuelUpdate.append(v),ot();var c=Se(),b=U(c);{var o=I=>{var V=qi(),k=a(V),l=a(k),K=a(l),H=i(l,2),z=a(H),R=i(k,2);oe(R,4,()=>["FaceUp","FaceDown"],ve,(q,Y)=>{var ie=Se(),le=U(ie);{var Te=j=>{var D=Ii(),X=a(D),_e=a(X),De=i(X,2);oe(De,1,()=>_(Y).toSorted(Ga),ve,(se,de)=>{var Ee=Bi(),A=a(Ee);const P=ge(()=>t().owner===t().field.duel.duelists.Below);$t(A,{get entity(){return e(de)},get isVisibleForcibly(){return e(P)},isWideMode:!0,cardActionResolve:void 0}),r(se,Ee)}),f(()=>g(_e,Y==="FaceUp"?"表向き":"裏向き")),r(j,D)};y(le,j=>{_(Y).length&&j(Te)})}r(q,ie)}),f(()=>{var q;g(K,(q=t().owner)==null?void 0:q.profile.name),g(z,t().cellType)}),r(I,V)};y(b,I=>{t().field.duel.view.infoBoardState==="CellInfo"&&I(o)})}r(d,c),lt()}var Ui=n('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),Fi=n('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function Hi(d,s){nt(s,!1);let t=Ke(s,"viewController",8),v=Ke(s,"userProfile",12);ot();var _=Se(),c=U(_);{var b=o=>{var I=Fi(),V=i(a(I),2),k=i(a(V),2);oe(k,1,()=>Ja,ve,(l,K)=>{var H=Ui(),z=a(H),R=a(z),q=i(z,2),Y=a(q);f(()=>g(Y,Xa[e(K)])),Qa(R,()=>v().chainConfig[e(K)],ie=>v(v().chainConfig[e(K)]=ie,!0)),ye("change",R,()=>v().save()),r(l,H)}),r(o,I)};y(c,o=>{t().infoBoardState==="Config"&&o(b)})}r(d,_),lt()}function Pi(d,{from:s,to:t},v={}){var{delay:_=0,duration:c=D=>Math.sqrt(D)*120,easing:b=sa}=v,o=getComputedStyle(d),I=o.transform==="none"?"":o.transform,[V,k]=o.transformOrigin.split(" ").map(parseFloat);V/=d.clientWidth,k/=d.clientHeight;var l=Oi(d),K=d.clientWidth/t.width/l,H=d.clientHeight/t.height/l,z=s.left+s.width*V,R=s.top+s.height*k,q=t.left+t.width*V,Y=t.top+t.height*k,ie=(z-q)*K,le=(R-Y)*H,Te=s.width/t.width,j=s.height/t.height;return{delay:_,duration:typeof c=="function"?c(Math.sqrt(ie*ie+le*le)):c,easing:b,css:(D,X)=>{var _e=X*ie,De=X*le,se=D+X*Te,de=D+X*j;return`transform: ${I} translate(${_e}px, ${De}px) scale(${se}, ${de});`}}}function Oi(d){if("currentCSSZoom"in d)return d.currentCSSZoom;for(var s=d,t=1;s!==null;)t*=+getComputedStyle(s).zoom,s=s.parentElement;return t}var Li=n('<div class="chain_number svelte-lqu21u"> </div>'),Ri=n('<div class="duel_card_row svelte-lqu21u"> </div>'),Wi=n('<div class="appendix svelte-lqu21u"> </div>'),Ki=n('<div class="appendix_wrapper svelte-lqu21u"></div>'),zi=n('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),Vi=n("<div></div>");function Gi(d,s){nt(s,!1);let t=Ke(s,"duel",8),v=Ke(s,"position",8,"left");const _=-100,c=()=>v()==="left"?-100:100;let b=xe([]),o=Promise.resolve(),I=Promise.resolve();const V=1e3,k=500,l=400,K=z=>{const R={...z};R.isKnown=z.chainBlockInfo.action.entity.controller.duelistType==="Player"||z.chainBlockInfo.action.entity.face==="FaceUp",R.chainBlockInfo.onStateChange.append(q=>{if(q==="done"||q==="failed"||q==="negated")return o=o.then(async()=>{const Y=new Date().getTime()-R.chainBlockInfo.wasSpawnedAt.getTime();Y<V&&await St(V-Y),$(b,e(b).filter(ie=>ie.seq!==R.seq)),await St(k+l)}).then(),"RemoveMe";$(b,e(b))}),I=I.then(async()=>{$(b,[R,...e(b)].sort((q,Y)=>Za.isSameChain(q.clock,Y.clock)&&q.chainBlockInfo.action.isWithChainBlock&&Y.chainBlockInfo.action.isWithChainBlock?Y.clock.totalProcSeq-q.clock.totalProcSeq:q.clock.totalProcSeq-Y.clock.totalProcSeq)),await St(300)}),o=o.then(()=>St(1e3))};t().chainBlockLog.onInsert.append(K),ot();var H=Vi();oe(H,13,()=>e(b),z=>z.seq,(z,R)=>{var q=zi();const Y=ge(()=>{const{activator:G,action:ce,appendix:ke}=e(R).chainBlockInfo;return{activator:G,action:ce,appendix:ke}});var ie=a(q),le=a(ie);{var Te=G=>{var ce=Li(),ke=a(ce);f(()=>g(ke,`チェーン：${e(R).chainBlockInfo.chainNumber??""}`)),r(G,ce)};y(le,G=>{e(R).chainBlockInfo.chainNumber&&G(Te)})}var j=i(le,2),D=a(j),X=i(j,2),_e=a(X);{var De=G=>{var ce=Ri(),ke=a(ce);f(()=>g(ke,e(R).isKnown?e(Y).action.entity.nm:"？？？")),r(G,ce)};y(_e,G=>{(e(Y).action.entity.entityType==="Card"||e(Y).action.entity.entityType==="Token")&&G(De)})}var se=i(_e,2),de=a(se),Ee=a(de),A=i(de,2);{var P=G=>{var ce=Ki();oe(ce,5,()=>e(Y).appendix,ve,(ke,fe)=>{var B=Wi(),h=a(B);f(()=>g(h,e(fe))),r(ke,B)}),r(G,ce)};y(A,G=>{e(Y).appendix&&G(P)})}f((G,ce,ke)=>{Ye(q,`cut_in_row ${(!e(R).chainBlockInfo.chainNumber||e(R).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Ye(ie,`cut_in_item cut_in_item_${G??""} cut_in_item_${e(R).chainBlockInfo.state??""} svelte-lqu21u`),Ye(j,`duelist_name duelist_${G??""}_name svelte-lqu21u`),g(D,e(Y).activator.profile.name),Ye(X,`duel_card duel_card_${G??""} ${ce??""} ${(e(R).isKnown?e(Y).action.entity.origin.kind:"")??""} ${e(Y).action.entity.entityType??""}  svelte-lqu21u`),g(Ee,ke)},[()=>e(Y).activator.seat.toLowerCase(),()=>e(R).isKnown?(e(Y).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(Y).action.toString()],ge),re(3,ie,()=>yr,()=>new Date().getTime()-e(R).chainBlockInfo.wasSpawnedAt.getTime()<V?{x:c(),duration:l}:{y:_,duration:l}),er(q,()=>Pi,()=>({duration:k})),r(z,q)}),f(()=>Ye(H,`cut_in_container cut_in_container_${v()??""} svelte-lqu21u`)),r(d,H),lt()}const Xi=xr({duration:400});var Qi=n('<div class="duel_desk_left v_flex svelte-1i63tk9"><!> <!> <!></div>'),Ji=n('<button class="duel_field_header_message svelte-1i63tk9"> </button> <div class="duel_field_header_buttons svelte-1i63tk9"><button class="svelte-1i63tk9">サレンダー</button></div>',1),Zi=n("<tr></tr>"),es=n('<table class="duel_field svelte-1i63tk9"><tbody class="svelte-1i63tk9"></tbody></table>'),ts=n('<button class="svelte-1i63tk9">OK</button>'),as=n('<button class="svelte-1i63tk9">cancel</button>'),rs=n("<!> <!>",1),is=n('<button class="svelte-1i63tk9"> </button>'),ss=n('<div style="text-align: left;"><!> <!> <!></div>'),ns=n('<div><!> <div class=" duel_desk_center v_flex svelte-1i63tk9"><div class="duel_field_header svelte-1i63tk9"><!></div> <div class="duel_field_body svelte-1i63tk9"><!></div> <div class="duel_field_footer svelte-1i63tk9"><!></div></div> <!></div> <div style="position:fixed;left:0;bottom:0"> </div> <!> <div><!></div>',1);function os(d,s){nt(s,!1);let t=Ke(s,"duel",12),v=Ke(s,"userProfile",8),_=xe(0),c=xe(0),b=xe([]),o=xe([]),I=()=>{},V=xe([]),k=xe(),l=xe(),K=xe(()=>!1),H=xe(!1);const z=w=>{I=w.resolve,$(V,w.dummyActionInfos.filter(x=>x.action.entity.entityType==="Duelist").filter(x=>x.action.entity.controller.seat==="Below")),$(k,void 0),$(l,void 0),$(o,[]),$(b,[]),$(H,!1),w.entitiesChoices&&($(k,w.entitiesChoices),$(K,()=>{var x;return((x=w.entitiesChoices)==null?void 0:x.validator(e(b)))??!1}),$(H,w.entitiesChoices.cancelable),e(k).selectables.every(x=>x.cell.isPlayFieldCell&&x.getIndexInCell()===0||x.cell.cellType==="Hand"&&x.controller.duelistType==="Player"||x.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:w.entitiesChoices,chainBlockInfos:w.chainBlockInfos,cancelable:w.entitiesChoices.cancelable}).then(x=>{I({selectedEntities:x})})),w.cellsChoices&&($(l,w.cellsChoices),$(K,()=>{var x;return((x=w.cellsChoices)==null?void 0:x.validator(e(o)))??!1}),$(H,w.cellsChoices.cancelable))};t().view.onWaitStart.append(z);const R=()=>{I=()=>{},$(l,void 0),$(k,void 0),$(o,[]),$(b,[]),$(K,()=>!1),$(H,!1)};t().view.onWaitEnd.append(R);let q=xe(void 0),Y=xe("Normal");const ie=({card:w,mode:x})=>{$(q,w),$(Y,x??(e(q)===w||e(Y)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(ie);const le=()=>{t(t())};t().view.onDuelUpdate.append(le),t().log.onUpdate.append(le);const Te=()=>{e(k)&&e(k).validator(e(b))&&I({selectedEntities:e(b)}),e(l)&&e(l).validator(e(o))&&I({selectedCells:e(o)})},j=()=>{I({})},D=w=>{I({actionInfo:w})},X=()=>{I({surrender:!0})};t().main();const _e=()=>e(_)<=1400?"compact":"wide";ot();var De=ns(),se=U(De),de=a(se);{var Ee=w=>{var x=Qi(),Z=a(x);Ya(Z,{get duelist(){return t().duelists.Above}});var me=i(Z,2);Yi(me,{get entity(){return e(q)},get mode(){return e(Y)}});var $e=i(me,2);Ya($e,{get duelist(){return t().duelists.Below}}),r(w,x)};y(de,w=>{_e()==="wide"&&w(Ee)})}var A=i(de,2),P=a(A),G=a(P);{var ce=w=>{var x=Ji(),Z=U(x),me=a(Z),$e=i(Z,2),he=a($e);f(()=>g(me,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),ye("click",Z,()=>{t(t().view.infoBoardState="Log",!0)}),ye("click",he,X),r(w,x)};y(G,w=>{t().isEnded||w(ce)})}var ke=i(P,2),fe=a(ke);{var B=w=>{var x=es(),Z=a(x);oe(Z,5,()=>t().field.cells,ve,(me,$e,he)=>{var ue=Zi();Ye(ue,`${`duel_desk_row_${he}`??""} svelte-1i63tk9`),oe(ue,5,()=>e($e),ve,(M,L,we)=>{Or(M,{get view(){return t().view},row:he,column:we,get selectedEntities(){return e(b)},set selectedEntities(Ce){$(b,Ce)},get selectedCells(){return e(o)},set selectedCells(Ce){$(o,Ce)},$$legacy:!0})}),r(me,ue)}),r(w,x)};y(fe,w=>{t().clock.turn>0&&w(B)})}var h=i(ke,2),N=a(h);{var W=w=>{var x=rs(),Z=U(x);{var me=ue=>{var M=ts();f(L=>M.disabled=L,[()=>!e(K)()],ge),ye("click",M,Te),r(ue,M)};y(Z,ue=>{((e(k)&&e(k).qty)??(e(l)&&e(l).qty)??9999)>1&&ue(me)})}var $e=i(Z,2);{var he=ue=>{var M=as();ye("click",M,j),r(ue,M)};y($e,ue=>{e(H)&&ue(he)})}r(w,x)},Q=w=>{var x=Se(),Z=U(x);oe(Z,1,()=>e(V),ve,(me,$e)=>{var he=is(),ue=a(he);f(()=>g(ue,e($e).action.title)),ye("click",he,()=>D(e($e))),r(me,he)}),r(w,x)};y(N,w=>{e(k)&&e(k).selectables.length||e(l)&&e(l).selectables?w(W):w(Q,!1)})}var C=i(A,2);{var F=w=>{var x=ss(),Z=a(x);Zr(Z,{get log(){return t().log}});var me=i(Z,2);Ni(me,{get cell(){return t().view.infoBoardCell}});var $e=i(me,2);Hi($e,{get userProfile(){return v()},get viewController(){return t().view}}),f(he=>Ye(x,`duel_desk_right duel_desk_right_${he??""}  svelte-1i63tk9`),[()=>t().view.infoBoardState.toLowerCase()],ge),re(3,x,()=>pe,()=>({duration:e(_)>1400?0:200,axis:"x"})),r(w,x)};y(C,w=>{(e(_)>1400||t().view.infoBoardState!=="Default")&&w(F)})}var J=i(se,2),ee=a(J),m=i(J,2);tr(m,{get modalController(){return t().view.modalController}});var T=i(m,2),S=a(T);const O=ge(()=>_e()==="wide"?"right":"left");Gi(S,{get duel(){return t()},get position(){return e(O)}}),f((w,x)=>{Ye(se,`flex duel_desk ${w??""}_mode svelte-1i63tk9`),g(ee,x),Ye(T,`cutin ${w??""}_mode svelte-1i63tk9`)},[_e,()=>t().clock.toFullString()],ge),Kt("innerWidth",w=>$(_,w)),Kt("innerHeight",w=>$(c,w)),r(d,De),lt()}var ls=n('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),vs=n('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),ds=n("<div></div>"),cs=n("<!> <!> <!> <!> <!>",1),_s=n('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),us=n('<li class="deck_editor_item svelte-niobyr"><div role="listitem"><div class="svelte-niobyr"><div class="svelte-niobyr"> </div> <div style="display:flex" class="svelte-niobyr"><div class="svelte-niobyr"><!> <!> <!></div> <div style="flex-grow: 1; width:0.1rem" class="svelte-niobyr"></div> <div class="svelte-niobyr"><!></div></div></div></div> <button class="button_style_reset svelte-niobyr">+</button> <button class="button_style_reset svelte-niobyr">-</button></li>'),fs=n('<div class="deck_editor_card_kind svelte-niobyr"><div class="deck_editor_card_kind_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <ul class="svelte-niobyr"></ul></div>'),gs=n('<div class="deck_editor_deck_type svelte-niobyr"><div class="deck_editor_deck_type_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <!></div>'),ps=n('<div class="svelte-niobyr">読み込み中...</div>'),bs=n('<div class="deck_editor_card_list svelte-niobyr"><!></div>');function Ba(d,s){nt(s,!1);let t=Ke(s,"allCardInfos",8),v=Ke(s,"deckCardInfos",12),_=Ke(s,"mode",8),c=Ke(s,"onAttention",8),b=Ke(s,"searchCondition",8,void 0);const o={Deck:["Monster","Spell","Trap"],ExtraDeck:["Monster"]},I={Deck:{Monster:[],Spell:[],Trap:[]},ExtraDeck:{Monster:[],Spell:[],Trap:[]}},V=j=>{var D;return(D=j.monsterCategories)!=null&&D.union(zt).length?"ExtraDeck":"Deck"},k=j=>{Object.values(I).forEach(D=>Object.values(D).forEach(X=>X.reset())),j.filter(D=>D.kind!=="XyzMaterial").forEach(D=>{var _e;if(D.kind==="XyzMaterial")return;const X=(_e=D.monsterCategories)!=null&&_e.union(zt).length?"ExtraDeck":"Deck";I[X][D.kind].push(D)}),Object.values(I).forEach(D=>Object.values(D).forEach(X=>X.sort(ra)))},l=_()==="List"?new Promise(j=>{k(t()),j()}):Promise.resolve(),K=()=>(_()==="Deck"&&(k(v()),$(q,v().length)),I),H=(j,D,X)=>{v(v().filter(_e=>V(_e)!==D||_e.kind!==X&&X))},z=(j,D)=>{try{if(j.ctrlKey){v().push(D);return}const X=v().filter(De=>De.name===D.name).length;if(X>2)return;const _e=j.shiftKey?3-X:1;if(_e<1)return;v().push(...Array(_e).fill(D))}finally{v().sort(ra),v(v())}},R=(j,D)=>{let X=0;v(v().filter(_e=>_e.name!==D.name?!0:(X++,!j.shiftKey&&X>1))),v().sort(ra)};let q=xe(100);const Y=()=>{e(q)>t().length+v().length||($(q,e(q)+100),St(100).then(Y))},ie=(j,D,X,_e)=>{if(D===0&&_e==="Monster"&&($(q,100),St(100).then(Y)),!b())return!0;if(!b().cardKinds.includes(j.kind)||b().name.trim().length&&[j.name,...j.nameTags??[],...j.textTags??[]].every(se=>!se.includes(b().name))||!j.isImplemented&&!b().others.includes("implemented")||j.isForTest&&!b().others.includes("test")||j.isOldVersion&&!b().others.includes("oldVersion"))return!1;if(j.kind==="Monster")return j.attributes&&!b().monsterAttributes.union(j.attributes).length||j.types&&!b().monsterTypes.union(j.types).length||!j.monsterCategories?!1:j.monsterCategories.union(b().monsterCategories).length;if(j.kind==="Spell")return j.spellCategory&&b().spellCategories.includes(j.spellCategory);if(j.kind==="Trap")return j.trapCategory&&b().trapCategories.includes(j.trapCategory)};ot();var le=bs(),Te=a(le);st(Te,()=>l,j=>{var D=ps();r(j,D)},j=>{var D=Se();const X=ge(K);var _e=U(D);oe(_e,1,()=>rr,ve,(De,se)=>{var de=gs();const Ee=ge(()=>Object.values(e(X)[e(se)]).flatMap(B=>B));var A=a(de),P=a(A),G=a(P),ce=i(P,2);{var ke=B=>{var h=ls(),N=a(h);ye("click",N,W=>H(W,e(se),void 0)),r(B,h)};y(ce,B=>{_()==="Deck"&&e(Ee).some(ie)&&B(ke)})}var fe=i(A,2);oe(fe,1,()=>la(e(X)[e(se)]).filter(B=>o[e(se)].includes(B)),ve,(B,h)=>{var N=fs();const W=ge(()=>e(X)[e(se)][e(h)].filter((...T)=>ie(...T,e(h))));var Q=a(N),C=a(Q),F=a(C),J=i(C,2);{var ee=T=>{var S=vs(),O=a(S);ye("click",O,w=>H(w,e(se),e(h))),r(T,S)};y(J,T=>{_()==="Deck"&&e(W).length&&T(ee)})}var m=i(Q,2);oe(m,5,()=>e(W),ve,(T,S,O)=>{var w=Se(),x=U(w);{var Z=me=>{var $e=us(),he=a($e),ue=a(he),M=a(ue),L=a(M),we=i(M,2),Ce=a(we),Oe=a(Ce);{var Be=ne=>{var te=cs(),qe=U(te);{var Le=Re=>{var be=Je();f(()=>g(be,`★${e(S).level??""}`)),r(Re,be)};y(qe,Re=>{e(S).level&&Re(Le)})}var Ie=i(qe,2);{var Ve=Re=>{var be=Je();f(()=>g(be,`☆${e(S).rank??""}`)),r(Re,be)};y(Ie,Re=>{e(S).rank&&Re(Ve)})}var Ze=i(Ie,2);oe(Ze,1,()=>e(S).attributes??[],ve,(Re,be)=>{var He=ds();f(()=>Ye(He,`monster_attr ${e(be)??""} svelte-niobyr`)),r(Re,He)});var ct=i(Ze,2);oe(ct,1,()=>e(S).types??[],ve,(Re,be)=>{var He=Je();f(()=>g(He,Xt[e(be)])),r(Re,He)});var pt=i(ct,2);oe(pt,1,()=>e(S).monsterCategories??[],ve,(Re,be)=>{var He=Je();f(()=>g(He,Qt[e(be)])),r(Re,He)}),r(ne,te)};y(Oe,ne=>{e(S).kind==="Monster"&&ne(Be)})}var Ae=i(Oe,2);{var Ue=ne=>{var te=Je();f(()=>g(te,`${Jt[e(S).spellCategory]??""}魔法`)),r(ne,te)};y(Ae,ne=>{e(S).spellCategory&&ne(Ue)})}var Ge=i(Ae,2);{var je=ne=>{var te=Je();f(()=>g(te,`${Zt[e(S).trapCategory]??""}罠`)),r(ne,te)};y(Ge,ne=>{e(S).trapCategory&&ne(je)})}var u=i(Ce,4),p=a(u);{var E=ne=>{var te=_s(),qe=U(te),Le=a(qe),Ie=i(qe,2),Ve=a(Ie);f(()=>{g(Le,e(S).attack??"?"),g(Ve,e(S).defense??"?")}),r(ne,te)};y(p,ne=>{e(S).kind==="Monster"&&ne(E)})}var ae=i(he,2),Me=i(ae,2);f(ne=>{Ye(he,`${ne??""} svelte-niobyr`),g(L,e(S).name),ae.disabled=!e(S).isImplemented,dt(ae,"title",e(S).isImplemented?"※shiftキー同時押しで一括投入":""),Me.disabled=!e(S).isImplemented,dt(Me,"title",e(S).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>{var ne,te;return`deck_editor_card duel_card ${e(S).kind} ${(te=(ne=e(S))==null?void 0:ne.monsterCategories)==null?void 0:te.join(" ")} ${e(S).isImplemented?"is_implemented":"is_not_implemented"}`}],ge),ye("mouseenter",he,()=>c()(e(S))),ye("click",ae,ne=>z(ne,e(S))),ye("click",Me,ne=>R(ne,e(S))),r(me,$e)};y(x,me=>{O<e(q)&&me(Z)})}r(T,w)}),f(()=>g(F,`${Na[e(h)]??""}（${e(W).length??""} / ${e(X)[e(se)][e(h)].length??""}枚）`)),r(B,N)}),f(B=>g(G,`${ar[e(se)]??""}（${B??""} / ${e(Ee).length??""}枚）`),[()=>e(Ee).filter(ie).length],ge),r(De,de)}),r(j,D)}),r(d,le),lt()}var ms=n('<div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>'),hs=n('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),ys=n('<div></div> <div class="svelte-rccxcp"> </div>',1),xs=n("<div> </div>"),ks=n("<div> </div>"),ws=n('<div class="duel_card_info_row svelte-rccxcp"><!> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),Cs=n('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Ds=n('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),$s=n('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※エラッタ前カードです</div></div>'),Ss=n('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),Ms=n('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),Ts=n('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <!></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!> <!></div></div>');function js(d,s){nt(s,!1);let t=Ke(s,"cardInfo",8,void 0);ot();var v=Se(),_=U(v);{var c=b=>{var o=Ts(),I=a(o),V=a(I),k=a(V),l=a(k),K=i(V,2);{var H=A=>{var P=ms(),G=a(P),ce=a(G),ke=i(G,2),fe=a(ke);f((B,h)=>{g(ce,B),g(fe,h)},[()=>"★".repeat(t().level||0),()=>"☆".repeat(t().rank||0)],ge),r(A,P)};y(K,A=>{t().kind==="Monster"&&A(H)})}var z=i(I,2),R=a(z);{var q=A=>{var P=hs(),G=U(P),ce=a(G),ke=a(ce),fe=a(ke),B=i(G,2),h=a(B),N=a(h),W=i(h,2),Q=a(W);f(()=>{g(fe,t().pendulumDescription),g(N,`◀ ${t().pendulumScaleL??""}`),g(Q,`${t().pendulumScaleR??""} ▶`)}),r(A,P)};y(R,A=>{var P;(P=t().monsterCategories)!=null&&P.includes("Pendulum")&&A(q)})}var Y=i(R,2);{var ie=A=>{var P=ws(),G=U(P),ce=a(G);{var ke=N=>{var W=ys(),Q=U(W),C=i(Q,2),F=a(C);f(()=>{Ye(Q,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),g(F,`${va[t().attributes[0]]??""}属性`)}),r(N,W)};y(ce,N=>{t().attributes&&N(ke)})}var fe=i(ce,2);{var B=N=>{var W=xs(),Q=a(W);f(()=>{Ye(W,`monster_cat ${t().types[0]??""} svelte-rccxcp`),g(Q,`${Xt[t().types[0]]??""}${da[t().types[0]]??""}族`)}),r(N,W)};y(fe,N=>{t().types&&N(B)})}var h=i(G,2);oe(h,5,()=>t().monsterCategories??[],ve,(N,W)=>{var Q=ks(),C=a(Q);f(()=>{Ye(Q,`monster_cat ${e(W)??""} svelte-rccxcp`),g(C,`${Qt[e(W)]??""}${ca[e(W)]??""}`)}),r(N,Q)}),r(A,P)},le=A=>{var P=Se(),G=U(P);{var ce=fe=>{var B=Cs(),h=i(a(B),2),N=a(h);f(()=>g(N,`${Jt[t().spellCategory]??""}魔法`)),r(fe,B)},ke=fe=>{var B=Se(),h=U(B);{var N=W=>{var Q=Ds(),C=i(a(Q),2),F=a(C);f(()=>g(F,`${Zt[t().trapCategory]??""}罠`)),r(W,Q)};y(h,W=>{t().kind==="Trap"&&t().trapCategory&&W(N)},!0)}r(fe,B)};y(G,fe=>{t().kind==="Spell"&&t().spellCategory?fe(ce):fe(ke,!1)},!0)}r(A,P)};y(Y,A=>{t().kind==="Monster"?A(ie):A(le,!1)})}var Te=i(Y,2),j=a(Te),D=a(j),X=a(D),_e=i(Te,2);{var De=A=>{var P=$s();r(A,P)};y(_e,A=>{t().isOldVersion&&A(De)})}var se=i(_e,2);{var de=A=>{var P=Ss();r(A,P)},Ee=A=>{var P=Ms(),G=a(P),ce=i(G,2),ke=a(ce);f(fe=>{dt(G,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),dt(ce,"href",fe),g(ke,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>ir(t())],ge),r(A,P)};y(se,A=>{t().isForTest?A(de):A(Ee,!1)})}f(A=>{Ye(o,`duel_card duel_card_info ${t().kind??""} ${A??""} svelte-rccxcp`),g(l,t().name),g(X,t().description)},[()=>{var A;return(A=t().monsterCategories)==null?void 0:A.join(" ")}],ge),r(b,o)};y(_,b=>{t()&&b(c)})}r(d,v),lt()}const Es={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class As{constructor(){Qe(this,"DefaultSeparator1","/");Qe(this,"DefaultSeparator2"," ");Qe(this,"DefaultSeparator3",":");Qe(this,"createDate",s=>{if(!s)return;const t=new Date(s);if(!isNaN(t.getTime()))return t});Qe(this,"createDateOr",(s,t)=>this.createDate(s)||t||new Date);Qe(this,"truncateDate",s=>{const t=s||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});Qe(this,"addDate",(s,t)=>{const v=this.createDateOr(s);return v.setDate(v.getDate()+t),v});Qe(this,"addMonth",(s,t)=>{const v=this.createDateOr(s);return v.setMonth(v.getMonth()+t),v});Qe(this,"addYear",(s,t)=>{const v=this.createDateOr(s);return v.setFullYear(v.getFullYear()+t),v});Qe(this,"getDayOfWeek",(s,t="dddd")=>{const v=this.createDate(s);return v?Es[v.getDay()][t]:""});Qe(this,"formatToYYYYMMDD",(s,t=this.DefaultSeparator1)=>{const v=this.createDate(s);if(!v)return"";const _=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2),b=("0"+v.getDate()).slice(-2);return _+t+c+t+b});Qe(this,"formatToYYYYMM",(s,t=this.DefaultSeparator1)=>{const v=this.createDate(s);if(!v)return"";t||(t="");const _=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2);return _+t+c});Qe(this,"formatToHHMMSS",(s,t=this.DefaultSeparator3)=>{const v=this.createDate(s);if(!v)return"";t||(t="");const _=v.getHours(),c=v.getMinutes(),b=v.getSeconds();return("0"+_).slice(-2)+t+("0"+c).slice(-2)+t+("0"+b).slice(-2)});Qe(this,"formatToHHMM",(s,t=this.DefaultSeparator3)=>{const v=this.createDate(s);if(!v)return"";t||(t="");const _=("0"+v.getHours()).slice(-2),c=("0"+v.getMinutes()).slice(-2);return _+t+c});Qe(this,"formatToYYYYMMDD_HHMM",(s,t=this.DefaultSeparator1,v=this.DefaultSeparator2,_=this.DefaultSeparator3)=>{const c=this.createDate(s);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMM(c,_):""});Qe(this,"formatToYYYYMMDD_HHMMSS",(s,t=this.DefaultSeparator1,v=this.DefaultSeparator2,_=this.DefaultSeparator3)=>{const c=this.createDate(s);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMMSS(c,_):""})}}const ut=new As;Date.prototype.truncateDate=function(){return ut.truncateDate(this)};Date.prototype.getCloneOr=function(d){return ut.createDateOr(this,d)};Date.prototype.addDate=function(d){return ut.addDate(this,d)};Date.prototype.addMonth=function(d){return ut.addDate(this,d)};Date.prototype.addYear=function(d){return ut.addDate(this,d)};Date.prototype.getDayOfWeek=function(d="dddd"){return ut.getDayOfWeek(this,d)};Date.prototype.formatToYYYYMM=function(d){return ut.formatToYYYYMM(this,d)};Date.prototype.formatToYYYYMMDD=function(d){return ut.formatToYYYYMMDD(this,d)};Date.prototype.formatToYYYYMMDD_HHMM=function(d,s,t){return ut.formatToYYYYMMDD_HHMM(this,d,s,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(d,s,t){return ut.formatToYYYYMMDD_HHMMSS(this,d,s,t)};Date.prototype.formatToHHMM=function(d){return ut.formatToHHMM(this,d)};Date.prototype.formatToHHMMSS=function(d){return ut.formatToHHMMSS(this,d)};var Ys=n('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),Bs=n('<ul class="deck_info_list svelte-2wdgc8"></ul>'),Is=n('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),qs=n('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),Ns=n('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),Us=n('<button class="svelte-2wdgc8">Cancel</button>'),Fs=n('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function Hs(d,s){nt(s,!1);let t=Ke(s,"eventHolder",8),v=Ke(s,"args",8),_=Ke(s,"resolve",8),c=xe(Promise.resolve([])),b=xe();const o=()=>{$(b,new DataTransfer().files),$(c,Promise.resolve([]))},I=async H=>{H.preventDefault(),console.log("hoge",H)},V=async H=>{H.preventDefault(),H.dataTransfer&&l(H.dataTransfer.files)},k=()=>{l(e(b))},l=async H=>{if(!H.length)return;const z=[],R=[];for(const q of H)try{R.push(...await gt.createfromJson(q))}catch(Y){Y instanceof Error&&z.push(Y.message)}if(z.length){console.log(...z);return}$(c,e(c).then(()=>R))},K=o;ot(),sr(d,{get eventHolder(){return t()},get args(){return v()},$$slots:{body:(H,z)=>{var R=qs(),q=a(R);st(q,()=>Ut,null,(Y,ie)=>{var le=Se(),Te=U(le);st(Te,()=>e(c),null,(j,D)=>{var X=Se(),_e=U(X);{var De=de=>{var Ee=Bs();oe(Ee,5,()=>e(D),ve,(A,P)=>{var G=Ys(),ce=a(G),ke=a(ce),fe=i(ce,2),B=a(fe),h=i(fe,2),N=a(h);f((W,Q,C)=>{g(ke,e(P).name),g(B,`${W??""}
                  /
                  ${Q??""}`),g(N,`最終使用日時 ： ${C??""}`)},[()=>e(P).cardNames.filter(W=>{var Q,C;return!((C=(Q=e(ie).getCardInfo(W))==null?void 0:Q.monsterCategories)!=null&&C.union(zt).length)}).length,()=>e(P).cardNames.filter(W=>{var Q,C;return(C=(Q=e(ie).getCardInfo(W))==null?void 0:Q.monsterCategories)==null?void 0:C.union(zt).length}).length,()=>e(P).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],ge),r(A,G)}),r(de,Ee)},se=de=>{var Ee=Is(),A=i(a(Ee),2),P=a(A);nr(P,()=>e(b),G=>$(b,G)),ye("change",P,k),ye("cancel",P,K),ye("drop",Ee,V),ye("dragover",Ee,I),r(de,Ee)};y(_e,de=>{e(D).length?de(De):de(se,!1)})}r(j,X)}),r(Y,le)}),r(H,R)},footer:(H,z)=>{var R=Fs(),q=a(R);st(q,()=>e(c),null,(Y,ie)=>{var le=Se(),Te=U(le);{var j=X=>{var _e=Ns(),De=U(_e),se=i(De,2),de=i(se,2);f(()=>{De.disabled=e(ie).length===0,se.disabled=e(ie).length===0}),ye("click",De,()=>_()({deckInfos:e(ie),replaceAll:!1})),ye("click",se,()=>_()({deckInfos:e(ie),replaceAll:!0})),ye("click",de,K),r(X,_e)},D=X=>{var _e=Se(),De=U(_e);{var se=de=>{var Ee=Us();ye("click",Ee,()=>_()(void 0)),r(de,Ee)};y(De,de=>{v().cancelable&&de(se)},!0)}r(X,_e)};y(Te,X=>{e(ie).length?X(j):X(D,!1)})}r(Y,le)}),r(H,R)}}}),lt()}const Gt=class Gt extends lr{constructor(s,t){super(s,...Object.values(t))}};Qe(Gt,"createModalController",s=>{const t={deckUploader:new vr({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new Gt(s,t),t)});let oa=Gt;function Ps(d,s){nt(s,!1);let t=Ke(s,"modalController",8);ot(),or(d,{get modalController(){return t()},children:(v,_)=>{var c=Se(),b=U(c);{var o=I=>{Hs(I,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};y(b,I=>{t().deckUploader.state==="Shown"&&I(o)})}r(v,c)},$$slots:{default:!0}}),lt()}var Os=n('<label><input type="checkbox"> </label>'),Ls=n('<label><input type="checkbox"> </label>'),Rs=n('<label><input type="checkbox"> <div style="display: inline-block;"></div> </label>'),Ws=n('<label><input type="checkbox"> </label>'),Ks=n('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">モンスター</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">属性</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">種族</button></div> <div class="svelte-xd4rv4"></div></div>',1),zs=n('<label><input type="checkbox"> </label>'),Vs=n('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">魔法</button></div> <div class="svelte-xd4rv4"></div></div>'),Gs=n('<label><input type="checkbox"> </label>'),Xs=n('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">罠</button></div> <div class="svelte-xd4rv4"></div></div>'),Qs=n('<label><input type="checkbox"> </label>'),Js=n("<div>カード情報読込中</div>"),Zs=n("<option> </option>"),en=n('<div class="svelte-xd4rv4"><a class="white_button svelte-xd4rv4" download="SVS_DeckInfos.json">ダウンロード</a></div>'),tn=n('<div class="svelte-xd4rv4"></div>'),an=n('<div class="svelte-xd4rv4"><a class="white_button svelte-xd4rv4" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),rn=n('<div class="svelte-xd4rv4"></div>'),sn=n('<div class="deck_editor_body_right_header svelte-xd4rv4"><div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">編集対象 <select></select></div> <div class="svelte-xd4rv4"></div> <div class="svelte-xd4rv4">新規名称 <input type="text"></div></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">基本操作</div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">デッキを保存</button></div> <div class="svelte-xd4rv4"></div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">デッキを複製</button></div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">DL/UL</div> <!> <!> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">アップロード</button></div></div></div> <!>',1),nn=n("<div>デッキ情報読込中</div>"),on=n('<div class="deck_editor svelte-xd4rv4"><div class="deck_editor_header"></div> <div class="deck_editor_body svelte-xd4rv4"><div class="deck_editor_body_left svelte-xd4rv4"><div role="contentinfo"><div class="deck_editor_search_box_header svelte-xd4rv4"><div>検索条件</div> <div><button class="white_button svelte-xd4rv4">条件クリア</button></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4">名称</div> <div class="svelte-xd4rv4"><input type="text" style="width:70%"> <button class="white_button svelte-xd4rv4">クリア</button> <span>※ルビには対応していません</span></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">種類</button></div> <div class="svelte-xd4rv4"></div></div> <!> <!> <!> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">その他</button></div> <div class="svelte-xd4rv4"></div></div></div> <!></div> <div class="deck_editor_body_center svelte-xd4rv4"><!></div> <div class="deck_editor_body_right svelte-xd4rv4"><!></div></div> <div class="footer svelte-xd4rv4"><!></div></div> <!>',1);function ln(d,s){nt(s,!1);const t=[],v=[],_=[],c=[],b=[],o=[],I=[],V=oa.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),k={name:"",cardKinds:$a.filter(u=>u!=="XyzMaterial"),monsterCategories:[...Sa],monsterAttributes:[...Da],monsterTypes:[...Ca],spellCategories:[...wa],trapCategories:[...ka],others:["test","oldVersion","implemented"]},l=xe(structuredClone(k));Pe(l,e(l).others=["oldVersion"]);let K=xe("SearchCondition");const H=async()=>{Pe(l,e(l).name=""),Pe(l,e(l).cardKinds=[]),Pe(l,e(l).monsterCategories=[]),Pe(l,e(l).monsterAttributes=[]),Pe(l,e(l).monsterTypes=[]),Pe(l,e(l).spellCategories=[]),Pe(l,e(l).trapCategories=[]),Pe(l,e(l).others=[])},z=async u=>{Array.isArray(e(l)[u])&&Array.isArray(k[u])&&Pe(l,e(l)[u]=e(l)[u].length?[]:[...k[u]])},R=(u,p,E)=>{Array.isArray(e(l)[p])&&Array.isArray(k[p])&&Pe(l,e(l)[p]=[E])},q=async()=>{const p=(await e(le)).find(ae=>ae.id===e(ie));if(!p)return;const E=await Ut;$(D,{...p,cardInfos:p.cardNames.map(ae=>{const Me=E.getCardInfo(ae);return Me===void 0&&console.error(ae),Me}).filter(ae=>ae!==void 0)})},Y=()=>gt.getAllDeckInfo().then(u=>($(ie,(u.find(p=>p.lastUsedAt.getTime()===Math.max(...u.map(E=>E.lastUsedAt.getTime())))??u[0]).id),u));let ie=xe(-1),le=xe(Y()),Te=xe(e(le).then(u=>gt.convertToObjectURL(u)));e(le).then(q);const j=()=>{$(le,Y()),$(Te,e(le).then(u=>gt.convertToObjectURL(u))),q()};let D=xe({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),X=xe(void 0),_e=0;const De=u=>{$(K,"CardDetail"),u.cardId!==void 0&&!u.description&&!u.pendulumDescription&&(_e=u.cardId,qa([u.cardId]).then(()=>{u.cardId===_e&&$(X,u)})),$(X,u)},se=async()=>{const p=(await e(le)).find(E=>E.id===e(ie));if(!p)throw new Error("illegal state");return p},de=async()=>{const u=await se();await u.saveDeckInfo({...u,name:e(D).name,cardNames:e(D).cardInfos.map(p=>p.name),lastUsedAt:new Date}),j()},Ee=async()=>{(await gt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,e(D).cardInfos.map(p=>p.name))).saveDeckInfo(),j()},A=async u=>{const p=await se();!u.shiftKey&&!confirm(`デッキ【${p.name}】を削除します。
よろしいですか？`)||(await p.delete(),j())},P=async()=>{const u=await V.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!u)return;const p=[];if(u.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;p.push(...(await e(le)).map(E=>E.id))}await Promise.all(u.deckInfos.map(E=>gt.createNewDeck(E.name,E.description,E.cardNames,E.lastUsedAt))),p.length&&await Promise.all(p.map(gt.remove)),j()};ot();var G=on(),ce=U(G),ke=i(a(ce),2),fe=a(ke),B=a(fe),h=a(B),N=i(a(h),2),W=a(N),Q=i(h,2),C=i(a(Q),2),F=a(C),J=i(F,2),ee=i(Q,2),m=a(ee),T=a(m),S=i(m,2);oe(S,5,()=>$a.filter(u=>u!=="XyzMaterial"),ve,(u,p)=>{var E=Os(),ae=a(E),Me,ne=i(ae);f(()=>{Me!==(Me=e(p))&&(ae.value=(ae.__value=e(p))==null?"":e(p)),g(ne,` ${Na[e(p)]??""}`)}),Ct(t,[],ae,()=>(e(p),e(l).cardKinds),te=>Pe(l,e(l).cardKinds=te)),r(u,E)});var O=i(ee,2);{var w=u=>{var p=Ks(),E=U(p),ae=a(E),Me=a(ae),ne=i(ae,2);oe(ne,5,()=>Sa,ve,(Re,be)=>{var He=Ls(),We=a(He),tt,_t=i(We);f(()=>{tt!==(tt=e(be))&&(We.value=(We.__value=e(be))==null?"":e(be)),g(_t,` ${Qt[e(be)]??""}${ca[e(be)]??""}`)}),Ct(v,[],We,()=>(e(be),e(l).monsterCategories),at=>Pe(l,e(l).monsterCategories=at)),r(Re,He)});var te=i(E,2),qe=a(te),Le=a(qe),Ie=i(qe,2);oe(Ie,5,()=>Da,ve,(Re,be)=>{var He=Rs(),We=a(He),tt,_t=i(We,2),at=i(_t);f(()=>{tt!==(tt=e(be))&&(We.value=(We.__value=e(be))==null?"":e(be)),Ye(_t,`monster_attr ${e(be)??""} svelte-xd4rv4`),g(at,` ${va[e(be)]??""}`)}),Ct(_,[],We,()=>(e(be),e(l).monsterAttributes),xt=>Pe(l,e(l).monsterAttributes=xt)),r(Re,He)});var Ve=i(te,2),Ze=a(Ve),ct=a(Ze),pt=i(Ze,2);oe(pt,5,()=>Ca,ve,(Re,be)=>{var He=Ws(),We=a(He),tt,_t=i(We);f(()=>{tt!==(tt=e(be))&&(We.value=(We.__value=e(be))==null?"":e(be)),g(_t,` ${Xt[e(be)]??""}
                  ${da[e(be)]??""}`)}),Ct(c,[],We,()=>(e(be),e(l).monsterTypes),at=>Pe(l,e(l).monsterTypes=at)),ye("dblclick",He,at=>R(at,"monsterTypes",e(be))),r(Re,He)}),ye("click",Me,()=>z("monsterCategories")),re(3,E,()=>pe,()=>({delay:0,duration:100})),ye("click",Le,()=>z("monsterAttributes")),re(3,te,()=>pe,()=>({delay:0,duration:100})),ye("click",ct,()=>z("monsterTypes")),re(3,Ve,()=>pe,()=>({delay:0,duration:100})),r(u,p)};y(O,u=>{e(l).cardKinds.includes("Monster")&&u(w)})}var x=i(O,2);{var Z=u=>{var p=Vs(),E=a(p),ae=a(E),Me=i(E,2);oe(Me,5,()=>wa,ve,(ne,te)=>{var qe=zs(),Le=a(qe),Ie,Ve=i(Le);f(()=>{Ie!==(Ie=e(te))&&(Le.value=(Le.__value=e(te))==null?"":e(te)),g(Ve,` ${Jt[e(te)]??""}`)}),Ct(b,[],Le,()=>(e(te),e(l).spellCategories),Ze=>Pe(l,e(l).spellCategories=Ze)),r(ne,qe)}),ye("click",ae,()=>z("spellCategories")),re(3,p,()=>pe,()=>({delay:0,duration:100})),r(u,p)};y(x,u=>{e(l).cardKinds.includes("Spell")&&u(Z)})}var me=i(x,2);{var $e=u=>{var p=Xs(),E=a(p),ae=a(E),Me=i(E,2);oe(Me,5,()=>ka,ve,(ne,te)=>{var qe=Gs(),Le=a(qe),Ie,Ve=i(Le);f(()=>{Ie!==(Ie=e(te))&&(Le.value=(Le.__value=e(te))==null?"":e(te)),g(Ve,` ${Zt[e(te)]??""}`)}),Ct(o,[],Le,()=>(e(te),e(l).trapCategories),Ze=>Pe(l,e(l).trapCategories=Ze)),r(ne,qe)}),ye("click",ae,()=>z("trapCategories")),re(3,p,()=>pe,()=>({delay:0,duration:100})),r(u,p)};y(me,u=>{e(l).cardKinds.includes("Trap")&&u($e)})}var he=i(me,2),ue=a(he),M=a(ue),L=i(ue,2);oe(L,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],ve,(u,p)=>{var E=Qs(),ae=a(E),Me,ne=i(ae);f(()=>{Me!==(Me=p.key)&&(ae.value=(ae.__value=p.key)==null?"":p.key),g(ne,` ${p.text??""}`)}),Ct(I,[],ae,()=>(p.key,e(l).others),te=>Pe(l,e(l).others=te)),r(u,E)});var we=i(B,2);js(we,{get cardInfo(){return e(X)}});var Ce=i(fe,2),Oe=a(Ce);st(Oe,()=>Ut,u=>{var p=Js();r(u,p)},(u,p)=>{const E=ge(()=>Object.values(e(p).dic));Ba(u,{mode:"List",get allCardInfos(){return e(E)},onAttention:De,get searchCondition(){return e(l)},get deckCardInfos(){return e(D).cardInfos},set deckCardInfos(ae){Pe(D,e(D).cardInfos=ae)},$$legacy:!0})});var Be=i(Ce,2),Ae=a(Be);st(Ae,()=>e(le),u=>{var p=nn();r(u,p)},(u,p)=>{var E=sn(),ae=U(E),Me=a(ae),ne=a(Me),te=i(a(ne));f(()=>{e(ie),At(()=>{e(p)})}),oe(te,5,()=>e(p),ve,(Ne,Fe)=>{var ze=Zs(),Xe={},rt=a(ze);f(()=>{Xe!==(Xe=e(Fe).id)&&(ze.value=(ze.__value=e(Fe).id)==null?"":e(Fe).id),g(rt,e(Fe).name)}),r(Ne,ze)});var qe=i(ne,4),Le=i(a(qe)),Ie=i(Me,4),Ve=i(a(Ie),2),Ze=a(Ve),ct=i(Ve,4),pt=a(ct),Re=i(ct,2),be=a(Re),He=i(Ie,2),We=i(a(He),2);st(We,se,Ne=>{var Fe=tn();r(Ne,Fe)},(Ne,Fe)=>{var ze=en(),Xe=a(ze);f(rt=>dt(Xe,"href",rt),[()=>gt.convertToObjectURL([e(Fe)])],ge),r(Ne,ze)});var tt=i(We,2);st(tt,()=>e(Te),Ne=>{var Fe=rn();r(Ne,Fe)},(Ne,Fe)=>{var ze=an(),Xe=a(ze);f(()=>dt(Xe,"href",e(Fe))),r(Ne,ze)});var _t=i(tt,2),at=a(_t),xt=i(ae,2);Ba(xt,{mode:"Deck",allCardInfos:[],onAttention:De,get deckCardInfos(){return e(D).cardInfos},set deckCardInfos(Ne){Pe(D,e(D).cardInfos=Ne)},$$legacy:!0}),Yt(te,()=>e(ie),Ne=>$(ie,Ne)),ye("change",te,q),ia(Le,()=>e(D).name,Ne=>Pe(D,e(D).name=Ne)),ye("click",Ze,de),ye("click",pt,Ee),ye("click",be,A),ye("click",at,P),r(u,E)});var Ue=i(ke,2),Ge=a(Ue);st(Ge,()=>Ut,u=>{var p=Je("読み込み中");r(u,p)},(u,p)=>{var E=Je();f(()=>g(E,`実装済カード${e(p).definitionCount+e(p).nonDefinitionCount}枚（内、効果のないモンスター${e(p).nonDefinitionCount??""}枚）`)),r(u,E)});var je=i(ce,2);Ps(je,{modalController:V}),f(()=>Ye(B,`deck_editor_search_box ${(e(K)==="SearchCondition"?"":"minimum")??""} svelte-xd4rv4`)),ye("click",W,H),ia(F,()=>e(l).name,u=>Pe(l,e(l).name=u)),ye("click",J,()=>Pe(l,e(l).name="")),ye("click",T,()=>z("cardKinds")),ye("click",M,()=>z("others")),re(3,he,()=>pe,()=>({delay:0,duration:100})),ye("mouseenter",B,()=>$(K,"SearchCondition")),r(d,G),lt()}const vn=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],dn=3;var cn=n('<input class="game_mode_radio svelte-abgng1" type="radio" name="game_mode"> <label> </label>',1),_n=n('<option class="svelte-abgng1"> </option>'),un=n('<option class="svelte-abgng1"> </option>'),fn=n('<option class="svelte-abgng1"> </option>'),gn=n('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-abgng1">デッキ：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_deck_selector" class="deck_selector svelte-abgng1"><option class="svelte-abgng1">デフォルト</option><!></select></div></td></tr>'),pn=n('<option class="svelte-abgng1"> </option>'),bn=n('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_selector" class="config_row_label npc_selector svelte-abgng1">対戦相手：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_selector" class="npc_selector svelte-abgng1"></select> <div class="svelte-abgng1"> </div></div></td></tr> <!> <tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_selector" class="config_row_label npc_selector svelte-abgng1">先攻後攻：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_selector" class="npc_selector svelte-abgng1"></select></div></td></tr>',1),mn=n('<option class="svelte-abgng1"> </option>'),hn=n('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-abgng1">難易度：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="difficulty_selector" class="difficulty_selector svelte-abgng1"></select></div></td></tr>'),yn=n('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label class="config_row_label svelte-abgng1" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"></div></td></tr> <tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="deck_selector" class="config_row_label deck_selector svelte-abgng1">デッキ：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="deck_selector" class="deck_selector svelte-abgng1"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-abgng1"><div><button class="btn svelte-abgng1">duel start!</button></div></td></tr>',1),xn=n('<tr><td colspan="2" class="svelte-abgng1"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),kn=n('<tr><td colspan="2" class="svelte-abgng1"><div><button class="btn svelte-abgng1">deck edit</button></div></td></tr>'),wn=n('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="duelist_name" class="config_row_label duelist_name svelte-abgng1">名前：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><input id="duelist_name" class="duelist_name svelte-abgng1" type="text"></div></td></tr> <!> <!>',1),Cn=n('<tr><td colspan="2" class="svelte-abgng1"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),Dn=n('<div class="app_body svelte-abgng1"><table class="config_table svelte-abgng1"><tbody><!></tbody></table></div>'),$n=n('<div class="result_title result_win svelte-abgng1">YOU WIN</div>'),Sn=n('<div class="result_title result_lose svelte-abgng1">YOU LOSE</div>'),Mn=n('<div class="result_title result_draw svelte-abgng1">DRAW</div>'),Tn=n('<div class="twitter_share_button_wrapper svelte-abgng1"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-abgng1">X(twitter)でシェアする</a></div>'),jn=n('<div class="result svelte-abgng1"><!> <div class="reason_of_end svelte-abgng1"> </div> <!> <div class="svelte-abgng1"><button class="white_button svelte-abgng1">TOPへ戻る</button></div></div>'),En=n('<main style="flex-direction: column; display :flex" class="svelte-abgng1"><div class="link link_left svelte-abgng1"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-abgng1">posfie(toggeter)</a></div> <div class="link link_right svelte-abgng1"><a class="a_button svelte-abgng1" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">現時点とこの先のこと</a></div> <!> <div class="debug_info svelte-abgng1"><span class="svelte-abgng1"> </span> <span class="user_agent_info svelte-abgng1"> </span> <span class="screen_info svelte-abgng1"> </span></div> <!></main>');function An(d,s){nt(s,!1);const t=new dr("stk_ygo_svelte",dn,vn);let v=xe(0),_=xe(0),c=xe(),b=xe("FtkChallenge"),o=xe("None"),I=xe(0),V=xe(""),k=xe(void 0);const l="https://setta238.github.io/stk_ygo_svelte/",K="遊戯王deそりてあ",H="ninja_no",z=cr.getOrCreateNew(t).then(m=>($(b,Ma.includes(m.previousGameMode)?m.previousGameMode:"FtkChallenge"),Ee(m.previousNpcId),m)),R=m=>{var S;const T=m.find(O=>O.lastUsedAt.getTime()===Math.max(...m.map(w=>w.lastUsedAt.getTime())))??m[0];$(I,T.id),e(b)==="FtkChallenge"&&T.deckType!=="Preset"&&$(I,((S=Dt.find(O=>O.deckType==="Preset"))==null?void 0:S.id)??e(I))};let q=xe(gt.getAllDeckInfo(t).then(m=>(Promise.all(m.filter(T=>!T.lastUsedAt).map(T=>{T.saveDeckInfo()})),R(m),m)));const Y=async()=>{const m=e(I);let T=(await e(q)).find(O=>O.id===m)??(await le()).find(O=>O.id===m);T&&await T.updateTimestamp();let S=T;if(S||(S=Dt.find(O=>O.id===m)),!S)throw new Error("illegal state");return S},ie=async()=>{(await z).save({previousGameMode:e(b)})},le=()=>($(q,gt.getAllDeckInfo(t).then(m=>(R(m),m))),e(q)),Te=async()=>{(await e(q)).length||(await gt.prepareSampleDeck(),le())},j=async()=>{await Promise.all([ie(),Te()]);const m=await Y(),T=await z;let S=Et.find(x=>x.id===Number.MIN_SAFE_INTEGER)??Et[0],O=Dt.find(x=>x.id===Number.MIN_SAFE_INTEGER)??Dt[0],w="PlayFirst";e(b)==="FtkChallenge"?S=Et.filter(x=>x.npcType==="FtkChallenge").find(x=>x.difficulty===T.previousDifficulty)??S:e(b)==="Free"&&(S=Et.find(x=>x.id===T.previousNpcId)??S,O=Dt.slice(-1)[0],w=T.previousStartMode),S.npcType!=="FtkChallenge"&&T.previousNpcDeckId>-1?O=(await e(q)).find(x=>x.id===T.previousNpcDeckId)??O:O=Dt.find(x=>x.id===S.id)??O,$(c,new ur(T,"Player",m,[],S,"NPC",O,[],w)),e(c).onDuelEnd.append(()=>($(c,e(c)),"RemoveMe"))},D=async()=>{await Promise.all([ie(),Te()]),$(o,"DeckEdit")},X=async m=>{await ie(),m.key==="Enter"&&!m.repeat&&(await z).save()},_e=()=>{$(q,le()),$(c,void 0),$(o,"None")};let De=Date.now();const se=m=>{Date.now()-De<200||(De=Date.now(),$(b,m),le())},de=m=>{Ee(Number(m.currentTarget.value))},Ee=m=>{var T;$(k,Et.find(S=>S.id===m)),$(V,((T=e(k))==null?void 0:T.description)??"")};Te(),ot();var A=En(),P=i(a(A),2),G=a(P),ce=i(P,2);{var ke=m=>{var T=Se(),S=U(T);st(S,()=>z,null,(O,w)=>{os(O,{get duel(){return e(c)},get userProfile(){return e(w)}})}),r(m,T)},fe=m=>{var T=Se(),S=U(T);{var O=x=>{ln(x,{})},w=x=>{var Z=Dn(),me=a(Z),$e=a(me),he=a($e);st(he,()=>z,ue=>{var M=Cn();r(ue,M)},(ue,M)=>{var L=wn(),we=U(L),Ce=a(we),Oe=a(Ce),Be=i(Ce),Ae=a(Be),Ue=a(Ae),Ge=i(we,2);st(Ge,()=>e(q),p=>{var E=xn();r(p,E)},(p,E)=>{var ae=yn(),Me=U(ae),ne=a(Me),te=a(ne),qe=i(ne),Le=a(qe);oe(Le,5,()=>Ma,ve,(Ne,Fe)=>{var ze=cn(),Xe=U(ze),rt=i(Xe,2),ht=a(rt);f(bt=>{dt(Xe,"id",`game_mode_radio_${bt??""}`),fr(Xe,e(Fe)),gr(Xe,e(b)===e(Fe)),Ye(rt,`game_mode_tab_label game_mode_tab_${bt??""} svelte-abgng1`),dt(rt,"for",`game_mode_radio_${bt??""}`),g(ht,e(Fe))},[()=>e(Fe).toLowerCase()],ge),ye("change",Xe,()=>se(e(Fe))),r(Ne,ze)});var Ie=i(Me,2),Ve=a(Ie),Ze=a(Ve),ct=i(Ve),pt=a(ct),Re=a(pt);f(()=>{e(I),At(()=>{e(b),e(E)})}),oe(Re,5,()=>e(b)==="FtkChallenge"?Dt.filter(Ne=>Ne.deckType==="Preset"):e(E),ve,(Ne,Fe)=>{var ze=_n(),Xe={},rt=a(ze);f(()=>{Xe!==(Xe=e(Fe).id)&&(ze.value=(ze.__value=e(Fe).id)==null?"":e(Fe).id),g(rt,e(Fe).name)}),r(Ne,ze)});var be=i(Ie,2);{var He=Ne=>{var Fe=bn(),ze=U(Fe),Xe=a(ze),rt=a(Xe),ht=i(Xe),bt=a(ht),Tt=a(bt);f(()=>{e(M),At(()=>{})}),oe(Tt,5,()=>Et,ve,(ft,et)=>{var vt=un(),wt={},jt=a(vt);f(()=>{wt!==(wt=e(et).id)&&(vt.value=(vt.__value=e(et).id)==null?"":e(et).id),g(jt,e(et).name)}),r(ft,vt)});var Ht=i(Tt,2),Pt=a(Ht),It=i(ze,2);{var qt=ft=>{var et=gn(),vt=a(et),wt=a(vt),jt=i(vt),pa=a(jt),ba=a(pa);f(()=>{e(M),At(()=>{e(E)})});var ea=a(ba);ea.value=(ea.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Ua=i(ea);oe(Ua,1,()=>e(E),ve,(ta,Rt)=>{var Wt=fn(),ma={},Fa=a(Wt);f(()=>{ma!==(ma=e(Rt).id)&&(Wt.value=(Wt.__value=e(Rt).id)==null?"":e(Rt).id),g(Fa,e(Rt).name)}),r(ta,Wt)}),re(3,wt,()=>pe,()=>({duration:200})),re(3,vt,()=>pe,()=>({duration:200})),Yt(ba,()=>e(M).previousNpcDeckId,ta=>e(M).previousNpcDeckId=ta),re(3,pa,()=>pe,()=>({duration:200})),re(3,jt,()=>pe,()=>({duration:200})),re(3,et,()=>pe,()=>({duration:200})),r(ft,et)};y(It,ft=>{var et;((et=e(k))==null?void 0:et.npcType)!=="FtkChallenge"&&ft(qt)})}var kt=i(It,2),yt=a(kt),Ot=a(yt),Lt=i(yt),fa=a(Lt),ga=a(fa);f(()=>{e(M),At(()=>{})}),oe(ga,5,()=>la(Ta),ve,(ft,et)=>{var vt=pn(),wt={},jt=a(vt);f(()=>{wt!==(wt=e(et))&&(vt.value=(vt.__value=e(et))==null?"":e(et)),g(jt,Ta[e(et)])}),r(ft,vt)}),f(()=>g(Pt,`※${e(V)??""}`)),re(3,rt,()=>pe,()=>({duration:200})),re(3,Xe,()=>pe,()=>({duration:200})),ye("change",Tt,de),Yt(Tt,()=>e(M).previousNpcId,ft=>e(M).previousNpcId=ft),re(3,bt,()=>pe,()=>({duration:200})),re(3,ht,()=>pe,()=>({duration:200})),re(3,ze,()=>pe,()=>({duration:200})),re(3,Ot,()=>pe,()=>({duration:200})),re(3,yt,()=>pe,()=>({duration:200})),Yt(ga,()=>e(M).previousStartMode,ft=>e(M).previousStartMode=ft),re(3,fa,()=>pe,()=>({duration:200})),re(3,Lt,()=>pe,()=>({duration:200})),re(3,kt,()=>pe,()=>({duration:200})),r(Ne,Fe)},We=Ne=>{var Fe=Se(),ze=U(Fe);{var Xe=rt=>{var ht=hn(),bt=a(ht),Tt=a(bt),Ht=i(bt),Pt=a(Ht),It=a(Pt);f(()=>{e(M),At(()=>{})}),oe(It,5,()=>pr,ve,(qt,kt)=>{var yt=mn(),Ot={},Lt=a(yt);f(()=>{Ot!==(Ot=e(kt))&&(yt.value=(yt.__value=e(kt))==null?"":e(kt)),g(Lt,e(kt))}),r(qt,yt)}),re(3,Tt,()=>pe,()=>({duration:200})),re(3,bt,()=>pe,()=>({duration:200})),Yt(It,()=>e(M).previousDifficulty,qt=>e(M).previousDifficulty=qt),re(3,Pt,()=>pe,()=>({duration:200})),re(3,Ht,()=>pe,()=>({duration:200})),re(3,ht,()=>pe,()=>({duration:200})),r(rt,ht)};y(ze,rt=>{e(b)==="FtkChallenge"&&rt(Xe)},!0)}r(Ne,Fe)};y(be,Ne=>{e(b)==="Free"?Ne(He):Ne(We,!1)})}var tt=i(be,2),_t=a(tt),at=a(_t),xt=a(at);re(3,te,()=>pe,()=>({duration:200})),re(3,ne,()=>pe,()=>({duration:200})),re(3,Le,()=>pe,()=>({duration:200})),re(3,qe,()=>pe,()=>({duration:200})),re(3,Me,()=>pe,()=>({duration:200})),re(3,Ze,()=>pe,()=>({duration:200})),re(3,Ve,()=>pe,()=>({duration:200})),Yt(Re,()=>e(I),Ne=>$(I,Ne)),re(3,pt,()=>pe,()=>({duration:200})),re(3,ct,()=>pe,()=>({duration:200})),re(3,Ie,()=>pe,()=>({duration:200})),ye("click",xt,j),re(3,at,()=>pe,()=>({duration:200})),r(p,ae)});var je=i(Ge,2);{var u=p=>{var E=kn(),ae=a(E),Me=a(ae),ne=a(Me);ye("click",ne,D),re(3,Me,()=>pe,()=>({duration:200})),re(3,ae,()=>pe,()=>({duration:200})),re(3,E,()=>pe,()=>({duration:200})),r(p,E)};y(je,p=>{e(b)==="Free"&&p(u)})}re(3,Oe,()=>pe,()=>({duration:200})),re(3,Ce,()=>pe,()=>({duration:200})),ia(Ue,()=>e(M).name,p=>e(M).name=p),ye("keypress",Ue,X),re(3,Ae,()=>pe,()=>({duration:200})),re(3,Be,()=>pe,()=>({duration:200})),re(3,we,()=>pe,()=>({duration:200})),r(ue,L)}),r(x,Z)};y(S,x=>{e(o)==="DeckEdit"?x(O):x(w,!1)},!0)}r(m,T)};y(ce,m=>{e(c)?m(ke):m(fe,!1)})}var B=i(ce,2),h=a(B),N=a(h),W=i(h,2),Q=a(W),C=i(W,2),F=a(C),J=i(B,2);{var ee=m=>{var T=jn(),S=a(T);{var O=M=>{var L=Se(),we=U(L);{var Ce=Be=>{var Ae=$n();r(Be,Ae)},Oe=Be=>{var Ae=Se(),Ue=U(Ae);{var Ge=je=>{var u=Sn();r(je,u)};y(Ue,je=>{e(c).winner.seat==="Above"&&je(Ge)},!0)}r(Be,Ae)};y(we,Be=>{e(c).winner.seat==="Below"?Be(Ce):Be(Oe,!1)})}r(M,L)},w=M=>{var L=Mn();r(M,L)};y(S,M=>{e(c).winner?M(O):M(w,!1)})}var x=i(S,2),Z=a(x),me=i(x,2);{var $e=M=>{var L=Tn(),we=a(L);f(()=>dt(we,"href",`https://x.com/share?url=${l}&text=${e(c).twitterShareText??""}&hashtags=${K}&via=${H}`)),r(M,L)};y(me,M=>{e(c).twitterShareText&&M($e)})}var he=i(me,2),ue=a(he);f(()=>g(Z,e(c).reasonOfEnd)),ye("click",ue,_e),re(3,T,()=>hr,()=>({delay:200,duration:200})),r(m,T)};y(J,m=>{e(c)&&e(c).isEnded&&m(ee)})}f(()=>{g(N,"build at: 20260102_143115"),g(Q,_r.text),g(F,`w:${e(v)??""}px h:${e(_)??""}px`)}),Kt("innerWidth",m=>$(v,m)),Kt("innerHeight",m=>$(_,m)),ye("click",G,_e),r(d,A),lt()}br(An,{target:document.getElementById("app")});
