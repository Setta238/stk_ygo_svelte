var Ha=Object.defineProperty;var ya=d=>{throw TypeError(d)};var Ia=(d,s,t)=>s in d?Ha(d,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[s]=t;var tt=(d,s,t)=>Ia(d,typeof s!="symbol"?s+"":s,t),xa=(d,s,t)=>s.has(d)||ya("Cannot "+t);var vt=(d,s,t)=>(xa(d,s,"read from private field"),t?t.call(d):s.get(d)),Ot=(d,s,t)=>s.has(d)?ya("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(d):s.set(d,t),ia=(d,s,t,v)=>(xa(d,s,"write to private field"),v?v.call(d,t):s.set(d,t),t);import{s as ka,r as Oa,a as S,b as Ra,l as Wa,g as e,d as La,p as ct,c as Re,m as ye,i as _t,t as o,e as a,f as y,h as p,j as pe,k as Le,n as pt,o as be,q as r,u as ut,v as Me,D as Ka,w as Te,x as N,y as i,z as se,A as Yt,B as te,C as oe,E as m,F as za,G as at,H as va,I as Va,J as Ga,K as Ut,L as dt,M as Rt,N as Na,O as da,P as Jt,Q as ca,R as Zt,S as _a,T as ea,U as ta,V as Xa,W as Qa,X as Ja,Y as Za,Z as er,_ as tr,$ as ar,a0 as Vt,a1 as Gt,a2 as sa,a3 as Pa,a4 as rr,a5 as ir,a6 as $t,a7 as sr,a8 as nr,a9 as or,aa as kt,ab as lr,ac as vr,ad as dr,ae as wa,af as Da,ag as Ca,ah as $a,ai as Sa,aj as Ma,ak as Ft,al as Ht,am as Dt,an as Et,ao as cr,ap as _r,aq as Ta,ar as qt,as as At,at as ur,au as fr,av as pr,aw as gr,ax as ja,ay as mr,az as br}from"../chunk/entity_proc_20260102_210719.js";import"../chunk/json_20260102_210719.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))v(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const _ of c.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&v(_)}).observe(document,{childList:!0,subtree:!0});function t(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function v(u){if(u.ep)return;u.ep=!0;const c=t(u);fetch(u.href,c)}})();const hr=d=>d;function ua(d){const s=d-1;return s*s*s+1}function Ba(d){const s=typeof d=="string"&&d.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return s?[parseFloat(s[1]),s[2]||"px"]:[d,"px"]}function yr(d,{delay:s=0,duration:t=400,easing:v=hr}={}){const u=+getComputedStyle(d).opacity;return{delay:s,duration:t,easing:v,css:c=>`opacity: ${c*u}`}}function xr(d,{delay:s=0,duration:t=400,easing:v=ua,x:u=0,y:c=0,opacity:_=0}={}){const l=getComputedStyle(d),Y=+l.opacity,V=l.transform==="none"?"":l.transform,x=Y*(1-_),[n,z]=Ba(u),[P,q]=Ba(c);return{delay:s,duration:t,easing:v,css:(O,U)=>`
			transform: ${V} translate(${(1-O)*n}${z}, ${(1-O)*P}${q});
			opacity: ${Y-x*U}`}}function fe(d,{delay:s=0,duration:t=400,easing:v=ua,axis:u="y"}={}){const c=getComputedStyle(d),_=+c.opacity,l=u==="y"?"height":"width",Y=parseFloat(c[l]),V=u==="y"?["top","bottom"]:["left","right"],x=V.map(E=>`${E[0].toUpperCase()}${E.slice(1)}`),n=parseFloat(c[`padding${x[0]}`]),z=parseFloat(c[`padding${x[1]}`]),P=parseFloat(c[`margin${x[0]}`]),q=parseFloat(c[`margin${x[1]}`]),O=parseFloat(c[`border${x[0]}Width`]),U=parseFloat(c[`border${x[1]}Width`]);return{delay:s,duration:t,easing:v,css:E=>`overflow: hidden;opacity: ${Math.min(E*20,1)*_};${l}: ${E*Y}px;padding-${V[0]}: ${E*n}px;padding-${V[1]}: ${E*z}px;margin-${V[0]}: ${E*P}px;margin-${V[1]}: ${E*q}px;border-${V[0]}-width: ${E*O}px;border-${V[1]}-width: ${E*U}px;min-${l}: 0`}}function Ea(d,s){for(const t in s)d[t]=s[t];return d}function kr({fallback:d,...s}){const t=new Map,v=new Map;function u(_,l,Y){const{delay:V=0,duration:x=$=>Math.sqrt($)*30,easing:n=ua}=Ea(Ea({},s),Y),z=_.getBoundingClientRect(),P=l.getBoundingClientRect(),q=z.left-P.left,O=z.top-P.top,U=z.width/P.width,E=z.height/P.height,re=Math.sqrt(q*q+O*O),ne=getComputedStyle(l),je=ne.transform==="none"?"":ne.transform,C=+ne.opacity;return{delay:V,duration:typeof x=="function"?x(re):x,easing:n,css:($,X)=>`
			   opacity: ${$*C};
			   transform-origin: top left;
			   transform: ${je} translate(${X*q}px,${X*O}px) scale(${$+(1-$)*U}, ${$+(1-$)*E});
		   `}}function c(_,l,Y){return(V,x)=>(_.set(x.key,V),()=>{if(l.has(x.key)){const n=l.get(x.key);return l.delete(x.key),u(n,V,x)}return _.delete(x.key),d&&d(V,x,Y)})}return[c(v,t,!1),c(t,v,!0)]}function Aa(d){return Object.prototype.toString.call(d)==="[object Date]"}function wr(d){return d}function na(d){const s=d-1;return s*s*s+1}function oa(d,s){if(d===s||d!==d)return()=>d;const t=typeof d;if(t!==typeof s||Array.isArray(d)!==Array.isArray(s))throw new Error("Cannot interpolate values of different type");if(Array.isArray(d)){const v=s.map((u,c)=>oa(d[c],u));return u=>v.map(c=>c(u))}if(t==="object"){if(!d||!s)throw new Error("Object cannot be null");if(Aa(d)&&Aa(s)){const c=d.getTime(),l=s.getTime()-c;return Y=>new Date(c+Y*l)}const v=Object.keys(s),u={};return v.forEach(c=>{u[c]=oa(d[c],s[c])}),c=>{const _={};return v.forEach(l=>{_[l]=u[l](c)}),_}}if(t==="number"){const v=s-d;return u=>d+u*v}return()=>s}var St,It,Wt,Lt;const fa=class fa{constructor(s,t={}){Ot(this,St,ka(void 0));Ot(this,It,ka(void 0));Ot(this,Wt);Ot(this,Lt,null);vt(this,St).v=vt(this,It).v=s,ia(this,Wt,t)}static of(s,t){const v=new fa(s(),t);return Oa(()=>{v.set(s())}),v}set(s,t){var n;S(vt(this,It),s);let{delay:v=0,duration:u=400,easing:c=wr,interpolate:_=oa}={...vt(this,Wt),...t};if(u===0)return(n=vt(this,Lt))==null||n.abort(),S(vt(this,St),s),Promise.resolve();const l=Ra.now()+v;let Y,V=!1,x=vt(this,Lt);return ia(this,Lt,Wa(z=>{if(z<l)return!0;if(!V){V=!0;const q=vt(this,St).v;Y=_(q,s),typeof u=="function"&&(u=u(q,s)),x==null||x.abort()}const P=z-l;return P>u?(S(vt(this,St),s),!1):(S(vt(this,St),Y(c(P/u))),!0)})),vt(this,Lt).promise}get current(){return e(vt(this,St))}get target(){return e(vt(this,It))}set target(s){this.set(s)}};St=new WeakMap,It=new WeakMap,Wt=new WeakMap,Lt=new WeakMap;let Xt=fa;var Dr=o('<div class="phase_display svelte-1ycsdg6"><span class="svelte-1ycsdg6"> </span> </div>'),Cr=o('<div class="lifepoint_display svelte-1ycsdg6"><div class="svelte-1ycsdg6"> </div> <div class="svelte-1ycsdg6"> </div></div>'),$r=(d,s,t)=>s(e(t)),Sr=o('<div class="svelte-1ycsdg6"><button class="phase_button svelte-1ycsdg6"> </button></div>'),Mr=o("<div><!></div>"),Tr=o('<div class="svelte-1ycsdg6"><!></div>'),jr=o("<div><!></div>"),Br=o('<div class="config_button_wrapper svelte-1ycsdg6"><button id="config_button" class="svelte-1ycsdg6">⚙</button></div>'),Er=o("<!> <!> <!> <!>",1),Ar=o('<div style="position: absolute;" class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Yr=o('<div style="position: absolute; top:0rem" class="svelte-1ycsdg6">｛効果対象｝</div>'),Ur=o('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Lr=o(" <!> 】",1),Nr=o('<div style="position: absolute; bottom:0rem" class="svelte-1ycsdg6"> <!></div>'),Pr=o("<!> <!>",1),qr=o('<div class="badge svelte-1ycsdg6"> </div>'),Fr=o('<div class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Hr=o("<!> <!> <!> <!>",1),Ir=o('<td><div role="listitem"><!></div></td>');function Or(d,s){ct(s,!1);let t=Re(s,"view",12),v=Re(s,"row",8),u=Re(s,"column",8),c=Re(s,"selectedEntities",28,()=>[]),_=Re(s,"selectedCells",28,()=>[]),l=ye(t().getCell(v(),u())),Y=ye(new Xt(e(l).field.duel.duelists.Above.lp,{duration:400,easing:na})),V=ye(new Xt(e(l).field.duel.duelists.Below.lp,{duration:400,easing:na}));const x=()=>{S(l,t().getCell(v(),u())),Me(Y,e(Y).target=e(l).field.duel.duelists.Above.lp),Me(V,e(V).target=e(l).field.duel.duelists.Below.lp)};e(l).onUpdate.append(x),t().onDuelUpdate.append(x),t().modalController.onUpdate.append(x);let n,z=ye([]),P=()=>console.log("hoge"),q,O=ye([]),U=ye(!1),E=ye(!1),re=!1;const ne=D=>{var H,J;S(le,[]),c().reset(),n=D.activator,P=D.resolve,S(z,D.dummyActionInfos),S(O,D.chainBlockInfos.flatMap(ae=>ae.selectedEntities).getDistinct()),q=D.entitiesChoices,S(U,!1),S(E,((H=D.cellsChoices)==null?void 0:H.selectables.includes(e(l)))??!1),re=e(E)&&((J=D.cellsChoices)==null?void 0:J.qty)===1,x()};t().onWaitStart.append(ne);const je=()=>{n=void 0,S(z,[]),P=()=>{console.log("hoge")},q=void 0,S(O,[]),S(U,!1),S(E,!1),re=!1};t().onWaitEnd.append(je);let C=ye(!1),$=[];const X=D=>{$=D.filter(H=>H.dests.includes(e(l))),S(C,$.length>0),x()},ce=()=>{$=[],S(C,!1),x()};t().onDragStart.append(X),t().onDragEnd.append(ce);const[xe,ie]=Qi;let le=ye([]);const Ae=D=>{if(n=void 0,e(l)===D.to||e(l).entities.includes(D.entity)){S(le,[...e(le),D]);const H=D.resolve;S(l,e(l)),setTimeout(()=>{S(le,e(le).filter(J=>J!==D)),D.count++,D.count>1&&H()},600)}};t().onAnimation.append(Ae);const B=D=>{P({phaseChange:D})},F=()=>e(l).isStackCell&&e(l).entities.flatMap(D=>D.actions).filter(D=>e(z).map(H=>H.action.seq).some(H=>H===D.seq)).length>0,G=D=>{var H;if(((H=D.target)==null?void 0:H.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),re)P({selectedCells:[e(l)]});else if(e(E))S(U,!e(U)),_(e(U)?[..._(),e(l)]:_().filter(J=>J!==e(l)));else if(e(l).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(l),!0),t().requireUpdate();const J=e(l).entities.flatMap(b=>b.actions).map(b=>b.seq),ae=e(z).filter(b=>J.includes(b.action.seq));if(ae.length){if(!n)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:n,dummyActionInfos:ae,cancelable:!0}).then(b=>{b&&P({actionInfo:b})});return}}t().requireUpdate(),console.info(e(l),ue(...e(l).visibleEntities))},ve=D=>{D.preventDefault(),D.dataTransfer&&(D.dataTransfer.dropEffect="move")},ke=D=>{D.preventDefault(),console.info("drop",D,e(C),$),D.dataTransfer&&(D.dataTransfer.dropEffect="move");try{if(e(C)&&$){if($.length===1){const H=$[0];P({actionInfo:{...H,dest:e(l)}})}else if($.length>1){if(!n)throw new Ka("想定されない状態");e(l).field.duel.view.modalController.terminateAll(),e(l).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:n,dummyActionInfos:$.map(H=>({...H,dest:e(l)})),cancelable:!1}).then(H=>{P({actionInfo:H})})}}}finally{t().removeDraggingActions()}},ue=(...D)=>{if(t().waitMode==="Animation")return"Disabled";if(q&&q.selectables.find(J=>D.find(ae=>J===ae)))return"Selectable";if(!e(z)||e(z).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(J=>J.state==="Shown"))return"Disabled";const H=e(z).filter(J=>D.includes(J.action.entity));return H.length===0?"Disabled":e(l).isStackCell||H[0].action.entity!==D[0]?"Clickable":H.some(J=>J.dests.length)?"Draggable":"Clickable"};_t();var A=Ir(),h=a(A);h.__click=G;var L=a(h);{var R=D=>{var H=Te(),J=N(H);{var ae=b=>{var j=Te(),T=N(j);{var W=k=>{var Z=Dr(),we=a(Z),$e=a(we),De=i(we,1,!0);p((_e,M)=>{m($e,_e),m(De,M)},[()=>String(e(l).field.duel.clock.turn).padStart(2,"0"),()=>e(l).field.duel.phase.toUpperCase()],pe),r(k,Z)},w=k=>{var Z=Te(),we=N(Z);{var $e=_e=>{var M=Cr(),I=a(M),Ce=a(I),Se=i(I,2),He=a(Se);p((Ne,Ye)=>{m(Ce,Ne),m(He,Ye)},[()=>Math.floor(e(Y).current),()=>Math.floor(e(V).current)],pe),r(_e,M)},De=_e=>{var M=Te(),I=N(M);{var Ce=Se=>{var He=Te(),Ne=N(He);{var Ye=Pe=>{var Ge=Te(),Be=N(Ge);{var he=f=>{var g=Te(),K=N(g);se(K,1,()=>t().duel.nextPhaseList,oe,(de,ee)=>{var ge=Sr(),me=a(ge);me.__click=[$r,B,ee];var Ke=a(me);p(Ee=>m(Ke,Ee),[()=>e(ee).toUpperCase()],pe),r(de,ge)}),r(f,g)};y(Be,f=>{t().duel.isEnded||f(he)})}r(Pe,Ge)};y(Ne,Pe=>{t().waitMode==="Free"&&Pe(Ye)})}r(Se,He)};y(I,Se=>{e(l).column===5&&Se(Ce)},!0)}r(_e,M)};y(we,_e=>{e(l).column===3?_e($e):_e(De,!1)},!0)}r(k,Z)};y(T,k=>{e(l).column===1?k(W):k(w,!1)})}r(b,j)};y(J,b=>{e(l).row===3&&b(ae)})}r(D,H)},Q=D=>{var H=Te(),J=N(H);{var ae=j=>{var T=Er();const W=pe(()=>e(le).find(M=>M.to===e(l)));var w=N(T);{var k=M=>{var I=Mr(),Ce=a(I);Yt(Ce,{get entity(){return e(W).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),p(()=>Le(I,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),te(1,I,()=>ie,()=>({key:e(W).entity.seq})),r(M,I)};y(w,M=>{e(W)&&e(W).index==="Top"&&M(k)})}var Z=i(w,2);se(Z,1,()=>e(l).visibleEntities,oe,(M,I)=>{var Ce=Te(),Se=N(Ce);{var He=Ne=>{var Ye=Tr(),Pe=a(Ye);const Ge=pe(()=>ue(e(I))),Be=pe(()=>e(z).filter(he=>he.action.entity===e(I)));Yt(Pe,{get entity(){return e(I)},get state(){return e(Ge)},get dummyActionInfos(){return e(Be)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(he){c(he)},$$legacy:!0}),te(2,Ye,()=>xe,()=>({key:e(I).seq})),r(Ne,Ye)};y(Se,Ne=>{e(le).every(Ye=>Ye.entity.seq!==e(I).seq)&&Ne(He)})}r(M,Ce)});var we=i(Z,2);{var $e=M=>{var I=jr(),Ce=a(I);Yt(Ce,{get entity(){return e(W).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),p(()=>Le(I,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),te(1,I,()=>ie,()=>({key:e(W).entity.seq})),r(M,I)};y(we,M=>{e(W)&&e(W).index!=="Top"&&M($e)})}var De=i(we,2);{var _e=M=>{var I=Br();r(M,I)};y(De,M=>{e(l).owner.seat==="Below"&&M(_e)})}r(j,T)},b=j=>{var T=Hr();const W=pe(()=>e(le).find(I=>I.to===e(l)));var w=N(T);{var k=I=>{var Ce=Ar(),Se=a(Ce);Yt(Se,{get entity(){return e(W).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),te(1,Ce,()=>ie,()=>({key:e(W).entity.seq})),r(I,Ce)};y(w,I=>{e(W)&&e(W).index!=="Top"&&I(k)})}var Z=i(w,2);{var we=I=>{var Ce=Pr(),Se=N(Ce);se(Se,1,()=>e(l).visibleEntities.map((Ye,Pe)=>({index:Pe,entity:Ye})).toReversed(),oe,(Ye,Pe)=>{var Ge=Te(),Be=N(Ge);{var he=f=>{var g=Ur();const K=pe(()=>!e(l).isStackCell&&e(Pe).index===0?ue(...e(l).visibleEntities):void 0);var de=N(g);{var ee=Ee=>{var ze=Yr();r(Ee,ze)};y(de,Ee=>{e(O).includes(e(Pe).entity)&&Ee(ee)})}var ge=i(de,2),me=a(ge);const Ke=pe(()=>e(Pe).index===0?e(z).filter(Ee=>e(l).visibleEntities.includes(Ee.action.entity)):void 0);Yt(me,{get entity(){return e(Pe).entity},get state(){return e(K)},get dummyActionInfos(){return e(Ke)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(Ee){c(Ee)},$$legacy:!0}),p(()=>Le(ge,`duel_card_wrapper ${(e(Pe).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1ycsdg6`)),te(2,ge,()=>xe,()=>({key:e(Pe).entity.seq})),r(f,g)};y(Be,f=>{e(le).every(g=>g.entity.seq!==e(Pe).entity.seq)&&f(he)})}r(Ye,Ge)});var He=i(Se,2);{var Ne=Ye=>{var Pe=Nr(),Ge=a(Pe),Be=i(Ge);se(Be,1,()=>va(e(l).visibleEntities[0].status.maxCounterQty),oe,(he,f)=>{var g=Lr(),K=N(g),de=i(K);{var ee=ge=>{var me=at();p(()=>m(me,`/${e(l).visibleEntities[0].status.maxCounterQty[e(f)]??""}`)),r(ge,me)};y(de,ge=>{(e(l).visibleEntities[0].status.maxCounterQty[e(f)]??9999)<100&&ge(ee)})}p((ge,me)=>m(K,`【
              ${ge??""}${me??""} `),[()=>za(e(f)),()=>e(l).visibleEntities[0].counterHolder.getQty(e(f))],pe),r(he,g)}),p(()=>m(Ge,`【${e(l).visibleEntities[0].battlePositionName??""}】 `)),r(Ye,Pe)};y(He,Ye=>{e(l).visibleEntities[0].battlePosition&&Ye(Ne)})}r(I,Ce)};y(Z,I=>{e(l).visibleEntities.length>0&&I(we)})}var $e=i(Z,2);{var De=I=>{var Ce=qr(),Se=a(Ce);p(()=>m(Se,e(l).visibleEntities.length)),r(I,Ce)};y($e,I=>{e(l).isStackCell&&I(De)})}var _e=i($e,2);{var M=I=>{var Ce=Fr(),Se=a(Ce);Yt(Se,{get entity(){return e(W).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),te(1,Ce,()=>ie,()=>({key:e(W).entity.seq})),r(I,Ce)};y(_e,I=>{e(W)&&e(W).index==="Top"&&I(M)})}r(j,T)};y(J,j=>{e(l).cellType==="Hand"?j(ae):j(b,!1)},!0)}r(D,H)};y(L,D=>{e(l).isDisabledCell?D(R):D(Q,!1)})}p(D=>{Le(A,`${`duel_field_cell duel_field_cell_${e(l).cellType} ${e(l).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1ycsdg6`),pt(A,"colspan",e(l).cellType==="Hand"?7:1),Le(h,`${D??""} svelte-1ycsdg6`)},[()=>`duel_field_cell_inner_box ${e(l).cellType} ${e(C)?"can_accept_drop":""} ${F()?"can_action":""} ${e(U)?"is_selected":e(E)?"is_selectable":""} `],pe),be("dragover",h,ve),be("drop",h,ke),r(d,A),ut()}La(["click"]);const Rr=(d,s,t=void 0,v="!!!circular reference!!!")=>{let u=[];return JSON.stringify(d,(c,_)=>{if(typeof _=="object"){if(u.indexOf(_)>-1)return v;u.push(_)}let l=_;if(s&&(l=s(c,_)),typeof l=="function")return l.toString();if(l!==_&&typeof l=="object"){if(u.indexOf(l)>-1)return v;u.push(l)}return l},t)};var Wr=o('<div class="title svelte-14z6bdh"> </div>'),Kr=o('<div class="title svelte-14z6bdh"> </div>'),zr=o('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),Vr=o('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),Gr=o("<div><!> <!></div>"),Xr=o('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),Qr=o("<div><!> <!></div>"),Jr=o("<div><!> <!></div>"),Zr=o('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function ei(d,s){ct(s,!1);let t=ye(void 0),v=Re(s,"log",8),u,c=ye([]);const _=()=>{const x=((u==null?void 0:u.seq)??-1)+1;v().records.slice(x).forEach(n=>{if(!u){S(c,[[[[n]]]]),u=n;return}if(!e(c)[n.clock.turn]){Me(c,e(c)[n.clock.turn]=[[[n]]]),u=n;return}if(!e(c)[n.clock.turn][n.clock.phaseSeq]){Me(c,e(c)[n.clock.turn][n.clock.phaseSeq]=[[n]]),u=n;return}if(u.clock.chainSeq===n.clock.chainSeq&&u.clock.chainBlockSeq===n.clock.chainBlockSeq&&u.duelist===n.duelist){e(c)[n.clock.turn][n.clock.phaseSeq].slice(-1)[0].push(n),u=n;return}e(c)[n.clock.turn][n.clock.phaseSeq].push([n]),u=n}),S(c,e(c)),Va().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};v().onUpdate.append(_),v().duel.view.onDuelUpdate.append(_),_(),_t();var l=Te(),Y=N(l);{var V=x=>{var n=Zr(),z=i(a(n),2);se(z,5,()=>e(c),oe,(P,q)=>{var O=Jr(),U=a(O);{var E=ne=>{var je=Wr(),C=a(je);p(()=>m(C,`ターン：${e(q)[0][0][0].clock.turn??""}`)),r(ne,je)};y(U,ne=>{e(q)[0][0][0].clock.turn>0&&ne(E)})}var re=i(U,2);se(re,1,()=>e(q),oe,(ne,je)=>{var C=Qr(),$=a(C);{var X=xe=>{var ie=Kr(),le=a(ie);p(()=>m(le,e(je)[0][0].clock.period.name)),r(xe,ie)};y($,xe=>{e(je)[0][0].clock.turn>0&&xe(X)})}var ce=i($,2);se(ce,1,()=>e(je),oe,(xe,ie)=>{var le=Xr();const Ae=pe(()=>{var A;return((A=e(ie).find(h=>h.chainNumber!==void 0))==null?void 0:A.chainNumber)??0});var B=a(le),F=a(B),G=a(F),ve=i(F,2);{var ke=A=>{var h=zr(),L=a(h);p(()=>m(L,`チェーン：${e(Ae)??""}`)),r(A,h)};y(ve,A=>{e(Ae)&&A(ke)})}var ue=i(B,2);se(ue,1,()=>e(ie),oe,(A,h)=>{var L=Gr(),R=a(L);{var Q=ae=>{var b=at();p(()=>m(b,e(h).text)),r(ae,b)},D=ae=>{var b=Te(),j=N(b);{var T=w=>{var k=at();p((Z,we,$e)=>m(k,`移動：${Z??""} ${we??""} ⇒ ${$e??""}`),[()=>{var Z;return(Z=e(h).mainEntity)==null?void 0:Z.toString()},()=>{var Z;return(Z=e(h).from)==null?void 0:Z.toString()},()=>{var Z;return(Z=e(h).to)==null?void 0:Z.toString()}],pe),r(w,k)},W=w=>{var k=Te(),Z=N(k);{var we=De=>{var _e=at();p((M,I)=>m(_e,`生成：${M??""} void ⇒ ${I??""}`),[()=>{var M;return(M=e(h).mainEntity)==null?void 0:M.toString()},()=>{var M;return(M=e(h).to)==null?void 0:M.toString()}],pe),r(De,_e)},$e=De=>{var _e=Te(),M=N(_e);{var I=Se=>{var He=at();p((Ne,Ye)=>m(He,`消滅：${Ne??""} ${Ye??""} ⇒ void`),[()=>{var Ne;return(Ne=e(h).mainEntity)==null?void 0:Ne.toString()},()=>{var Ne;return(Ne=e(h).from)==null?void 0:Ne.toString()}],pe),r(Se,He)},Ce=Se=>{var He=at();p(()=>m(He,e(h).text)),r(Se,He)};y(M,Se=>{e(h).type==="EntityDisappear"?Se(I):Se(Ce,!1)},!0)}r(De,_e)};y(Z,De=>{e(h).type==="EntityAppear"?De(we):De($e,!1)},!0)}r(w,k)};y(j,w=>{e(h).type==="EntityMove"?w(T):w(W,!1)},!0)}r(ae,b)};y(R,ae=>{e(h).type==="ChainBlockHeader"?ae(Q):ae(D,!1)})}var H=i(R,2);{var J=ae=>{var b=Vr(),j=a(b);p(T=>pt(j,"href",T),[()=>window.URL.createObjectURL(new Blob([Rr(e(h).error,(T,W)=>["pool","bundles","duel"].includes(T)||typeof W=="function"?void 0:W,4)],{type:"text/plain"}))],pe),r(ae,b)};y(H,ae=>{e(h).error&&ae(J)})}p(ae=>Le(L,`duel_log_record duel_log_record_${ae??""} svelte-14z6bdh`),[()=>e(h).type.toSnakeCase()],pe),r(A,L)}),p(()=>{var A,h,L;Le(le,`duel_log_block_duelist duel_log_block_duelist_${((A=e(ie)[0].duelist)==null?void 0:A.seat)??"system"} svelte-14z6bdh`),Le(F,`duelist ${((h=e(ie)[0].duelist)==null?void 0:h.seat)??""} svelte-14z6bdh`),m(G,((L=e(ie)[0].duelist)==null?void 0:L.profile.name)||"SYSTEM")}),r(xe,le)}),p(()=>Le(C,`duel_log_block_phase duel_log_block_phase_${e(je)[0][0].clock.period.key??""} svelte-14z6bdh`)),r(ne,C)}),p(()=>Le(O,`duel_log_block_turn duel_log_block_turn_${e(q)[0][0][0].clock.turn??""} svelte-14z6bdh`)),r(P,O)}),Ga(z,P=>S(t,P),()=>e(t)),r(x,n)};y(Y,x=>{(v().duel.view.infoBoardState==="Log"||v().duel.view.infoBoardState==="Default")&&x(V)})}r(d,l),ut()}var ti=o("<div><div> </div> <div> </div></div>");function Ya(d,s){ct(s,!1);let t=Re(s,"duelist",12),v=ye(0),u=ye();const c=async()=>{const z=t().lp-e(v);if(!e(u)||Math.abs(z)<10){S(v,t().lp),e(u)&&(e(u)(),S(u,void 0));return}S(v,e(v)+Math.floor(Math.random()*z)),await Ut(100),c()},_=()=>{t(t()),!e(u)&&t().lp!==e(v)&&new Promise(z=>{S(u,z),Math.abs(t().lp-e(v)),c()})};t().duel.log.onUpdate.append(_),c(),_t();var l=ti(),Y=a(l),V=a(Y),x=i(Y,2),n=a(x);p(z=>{Le(l,`duelist duelist_${z??""} svelte-1sy3trd`),Le(Y,`duelist_name duelist_${z??""}_name svelte-1sy3trd`),m(V,t().profile.name),Le(x,`duelist_lp ${(e(u)?"vibration":"")??""} svelte-1sy3trd`),m(n,e(v))},[()=>t().seat.toLowerCase()],pe),r(d,l),ut()}const ai=(d,s,t)=>(s(s()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),ri=(d,s,t)=>(s(s()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var ii=o('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),si=o('<div></div> <div class="svelte-1uevs9j"> </div>',1),ni=o("<div> </div>"),oi=o("<div> </div>"),li=o('<div class="duel_card_info_row svelte-1uevs9j"><!> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),vi=o('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),di=o('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),ci=o("<!> <!>",1),_i=o('<pre class="description svelte-1uevs9j"> </pre>'),ui=o('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),fi=o('<pre class="description svelte-1uevs9j"> </pre>'),pi=o('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),gi=o('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),mi=o('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),bi=o("[ <!> ],",1),hi=o('<div class="svelte-1uevs9j"> <!></div>'),yi=o('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),xi=o('<div class="svelte-1uevs9j"> </div>'),ki=o('<div class="svelte-1uevs9j"> </div>'),wi=o('<div class="svelte-1uevs9j"> </div>'),Di=o('<div class="svelte-1uevs9j"> </div>'),Ci=o('<div class="svelte-1uevs9j"> </div>'),$i=o('<div class="svelte-1uevs9j"> </div>'),Si=o('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Mi=o('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Ti=o('<div class="svelte-1uevs9j">※テスト用カードです</div>'),ji=o('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),Bi=o('<div class="duel_card_info_links svelte-1uevs9j"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a> <!></div>'),Ei=o("<!> <!>",1),Ai=o('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Yi(d,s){ct(s,!1);let t=Re(s,"entity",8,void 0),v=Re(s,"mode",12,"Normal");const u=async()=>{if(!t())return;const x=(await Rt).getCardInfo(t().origin.name);if(x)return x.cardId!==void 0&&!x.description&&!x.pendulumDescription&&await Na([x.cardId]),x},c=()=>t()&&t().entityType==="Card"&&(t().origin.cardId??!1)?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t().origin.cardId}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:"";_t();var _=Te(),l=N(_);{var Y=V=>{var x=Ai();x.__click=[ai,v,t],x.__contextmenu=[ri,v,t];var n=a(x),z=a(n),P=a(z),q=a(P),O=i(z,2),U=a(O),E=a(U),re=i(U,2),ne=a(re),je=i(O,2);{var C=B=>{var F=ci(),G=N(F);{var ve=h=>{var L=ii(),R=a(L),Q=a(R),D=i(R,2),H=a(D);p(()=>{m(Q,`◀ ${t().psL??""}`),m(H,`${t().psR??""} ▶`)}),r(h,L)};y(G,h=>{var L;(L=t().origin.monsterCategories)!=null&&L.includes("Pendulum")&&h(ve)})}var ke=i(G,2);{var ue=h=>{var L=li(),R=N(L),Q=a(R);se(Q,1,()=>t().attr,oe,(J,ae)=>{var b=si(),j=N(b),T=i(j,2),W=a(T);p(()=>{Le(j,`monster_attr ${e(ae)??""} svelte-1uevs9j`),m(W,`${da[e(ae)]??""}属性`)}),r(J,b)});var D=i(Q,2);se(D,1,()=>t().types,oe,(J,ae)=>{var b=ni(),j=a(b);p(()=>{Le(b,`monster_cat ${e(ae)??""} svelte-1uevs9j`),m(j,`${Jt[e(ae)]??""}${ca[e(ae)]??""}族`)}),r(J,b)});var H=i(R,2);se(H,5,()=>t().status.monsterCategories??[],oe,(J,ae)=>{var b=oi(),j=a(b);p(()=>{Le(b,`monster_cat ${e(ae)??""} svelte-1uevs9j`),m(j,`${Zt[e(ae)]??""}${_a[e(ae)]??""}`)}),r(J,b)}),r(h,L)},A=h=>{var L=Te(),R=N(L);{var Q=H=>{var J=vi(),ae=i(a(J),2),b=a(ae);p(()=>m(b,`${ea[t().status.spellCategory]??""}魔法`)),r(H,J)},D=H=>{var J=Te(),ae=N(J);{var b=j=>{var T=di(),W=i(a(T),2),w=a(W);p(()=>m(w,`${ta[t().status.trapCategory]??""}罠`)),r(j,T)};y(ae,j=>{t().kind==="Trap"&&t().status.trapCategory&&j(b)},!0)}r(H,J)};y(R,H=>{t().kind==="Spell"&&t().status.spellCategory?H(Q):H(D,!1)},!0)}r(h,L)};y(ke,h=>{t().kind==="Monster"?h(ue):h(A,!1)})}r(B,F)};y(je,B=>{v()!=="Debug"&&B(C)})}var $=i(n,2),X=a($);{var ce=B=>{var F=pi(),G=N(F);{var ve=A=>{var h=ui(),L=a(h);dt(L,u,R=>{var Q=at('"読み込み中"');r(R,Q)},(R,Q)=>{var D=_i(),H=a(D);p(()=>{var J;return m(H,(J=e(Q))==null?void 0:J.pendulumDescription)}),r(R,D)}),r(A,h)};y(G,A=>{var h;(h=t().status.monsterCategories)!=null&&h.includes("Pendulum")&&A(ve)})}var ke=i(G,2),ue=a(ke);dt(ue,u,A=>{var h=at('"読み込み中"');r(A,h)},(A,h)=>{var L=fi(),R=a(L);p(()=>{var Q;return m(R,(Q=e(h))==null?void 0:Q.description)}),r(A,L)}),r(B,F)},xe=B=>{var F=Te(),G=N(F);{var ve=ue=>{var A=Te(),h=N(A);{var L=R=>{var Q=mi(),D=i(a(Q),2);se(D,5,()=>t().actions,oe,(H,J)=>{var ae=Te();const b=pe(()=>e(J).actionCountUpperBound),j=pe(()=>e(J).actionCount);var T=N(ae);{var W=w=>{var k=gi(),Z=a(k),we=a(Z),$e=i(Z,2),De=a($e),_e=i($e,4),M=a(_e);p(()=>{m(we,e(J).title),m(De,e(j)),m(M,e(b))}),r(w,k)};y(T,w=>{e(b)!==void 0&&e(j)!==void 0&&w(W)})}r(H,ae)}),r(R,Q)};y(h,R=>{t().actions.some(Q=>Q.actionCountUpperBoundKey)&&R(L)})}r(ue,A)},ke=ue=>{var A=Si(),h=a(A),L=a(h);se(L,0,()=>["info","status"],oe,(Be,he)=>{var f=yi(),g=N(f),K=a(g),de=i(g,2);se(de,1,()=>Object.entries(t()[he]),oe,(ge,me)=>{let Ke=()=>e(me)[0],Ee=()=>e(me)[1];var ze=hi(),et=a(ze),rt=i(et);{var yt=Ie=>{var Xe=bi(),gt=i(N(Xe));se(gt,1,Ee,oe,(Mt,Ct)=>{var wt=at();p(jt=>m(wt,`${jt??""},`),[()=>e(Ct).toString()],pe),r(Mt,wt)}),r(Ie,Xe)},Ve=Ie=>{var Xe=at();p(gt=>m(Xe,`${gt??""},`),[()=>{var gt;return(gt=Ee())==null?void 0:gt.toString()}],pe),r(Ie,Xe)};y(rt,Ie=>{Array.isArray(Ee())?Ie(yt):Ie(Ve,!1)})}p(()=>m(et,`"${Ke()??""}" : `)),r(ge,ze)});var ee=i(de,2);ee.textContent="},",p(()=>m(K,`"${he??""}" :{`)),r(Be,f)});var R=i(L,2);R.textContent='"actions" :[';var Q=i(R,2);se(Q,1,()=>t().actions,oe,(Be,he)=>{var f=xi(),g=a(f);p(()=>m(g,`"${e(he).playType??""} ${e(he).title??""}",`)),r(Be,f)});var D=i(Q,2);D.textContent="],";var H=i(D,2);H.textContent='"substituteEffects" :[';var J=i(H,2);se(J,1,()=>t().substituteEffects,oe,(Be,he)=>{var f=ki(),g=a(f);p(()=>m(g,`"${e(he).title??""}",`)),r(Be,f)});var ae=i(J,2);ae.textContent="],";var b=i(ae,2);b.textContent='"continuousEffects" :[';var j=i(b,2);se(j,1,()=>t().continuousEffects,oe,(Be,he)=>{var f=wi(),g=a(f);p(()=>m(g,`"${e(he).isStarted??""}",`)),r(Be,f)});var T=i(j,2);T.textContent="],";var W=i(T,2);W.textContent='"procFilters" :[';var w=i(W,2);se(w,1,()=>t().procFilterBundle.operators,oe,(Be,he)=>{var f=Di(),g=a(f);p(K=>m(g,`"${K??""} ${e(he).title??""} ${e(he).isEffective??""} ",`),[()=>e(he).isSpawnedBy.toString()],pe),r(Be,f)});var k=i(w,2);k.textContent="],";var Z=i(k,2);Z.textContent='"numericStateOperators" :[';var we=i(Z,2);se(we,1,()=>t().numericOprsBundle.operators,oe,(Be,he)=>{var f=Ci(),g=a(f);p(K=>m(g,`"${K??""} ${e(he).title??""} ${e(he).isEffective??""} ${e(he).isContinuous??""} ${e(he).targetState??""} ${e(he).targetStateGen??""} ",`),[()=>e(he).isSpawnedBy.toString()],pe),r(Be,f)});var $e=i(we,2);$e.textContent="],";var De=i($e,2);De.textContent='"stateOperators" :[';var _e=i(De,2);se(_e,1,()=>t().statusOperatorBundle.operators,oe,(Be,he)=>{var f=$i(),g=a(f);p(K=>m(g,`"${K??""} ${e(he).title??""} ${e(he).isEffective??""} ",`),[()=>e(he).isSpawnedBy.toString()],pe),r(Be,f)});var M=i(_e,2);M.textContent="],";var I=i(M,2);I.textContent='"lastMoveLogRecord" :{';var Ce=i(I,2),Se=a(Ce),He=i(Ce,2),Ne=a(He),Ye=i(He,2),Pe=a(Ye),Ge=i(Ye,2);Ge.textContent="},",p((Be,he)=>{m(Se,`"movedBy":"${Be??""}",`),m(Ne,`"movedAs":"${he??""}",`),m(Pe,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var Be;return(Be=t().moveLog.latestRecord.movedBy)==null?void 0:Be.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],pe),r(ue,A)};y(G,ue=>{v()==="Detail"?ue(ve):ue(ke,!1)},!0)}r(B,F)};y(X,B=>{v()==="Normal"?B(ce):B(xe,!1)})}var ie=i($,2),le=a(ie);{var Ae=B=>{var F=Ei(),G=N(F);{var ve=h=>{var L=Mi();r(h,L)};y(G,h=>{t().origin.isOldVersion&&h(ve)})}var ke=i(G,2);{var ue=h=>{var L=Ti();r(h,L)},A=h=>{var L=Bi(),R=a(L),Q=i(R,2);{var D=H=>{var J=ji(),ae=a(J);p(b=>{var j;pt(J,"href",b),m(ae,`⇒${((j=t())!=null&&j.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[c],pe),r(H,J)};y(Q,H=>{t()&&t().entityType==="Card"&&H(D)})}p(()=>pt(R,"href",`https://yugioh-wiki.net/index.php?${t().origin.wikiEncodedName}`)),r(h,L)};y(ke,h=>{t().origin.isForTest?h(ue):h(A,!1)})}r(B,F)};y(le,B=>{t()&&B(Ae)})}p((B,F,G)=>{Le(x,`duel_card duel_card_info ${t().origin.kind??""} ${B??""} svelte-1uevs9j`),m(q,t().nm),m(E,F),m(ne,G)},[()=>{var B;return(B=t().origin.monsterCategories)==null?void 0:B.join(" ")},()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],pe),r(V,x)};y(l,V=>{t()&&V(Y)})}r(d,_),ut()}La(["click","contextmenu"]);var Ui=o('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),Li=o('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),Ni=o('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Pi(d,s){ct(s,!1);let t=Re(s,"cell",12);const v=()=>{t(t())},u=Y=>t().cardEntities.filter(V=>V.face===Y);t().field.duel.view.onDuelUpdate.append(v),_t();var c=Te(),_=N(c);{var l=Y=>{var V=Ni(),x=a(V),n=a(x),z=a(n),P=i(n,2),q=a(P),O=i(x,2);se(O,4,()=>["FaceUp","FaceDown"],oe,(U,E)=>{var re=Te(),ne=N(re);{var je=C=>{var $=Li(),X=a($),ce=a(X),xe=i(X,2);se(xe,1,()=>u(E).toSorted(Xa),oe,(ie,le)=>{var Ae=Ui(),B=a(Ae);const F=pe(()=>t().owner===t().field.duel.duelists.Below);Yt(B,{get entity(){return e(le)},get isVisibleForcibly(){return e(F)},isWideMode:!0,cardActionResolve:void 0}),r(ie,Ae)}),p(()=>m(ce,E==="FaceUp"?"表向き":"裏向き")),r(C,$)};y(ne,C=>{u(E).length&&C(je)})}r(U,re)}),p(()=>{var U;m(z,(U=t().owner)==null?void 0:U.profile.name),m(q,t().cellType)}),r(Y,V)};y(_,Y=>{t().field.duel.view.infoBoardState==="CellInfo"&&Y(l)})}r(d,c),ut()}var qi=o('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),Fi=o('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function Hi(d,s){ct(s,!1);let t=Re(s,"viewController",8),v=Re(s,"userProfile",12);_t();var u=Te(),c=N(u);{var _=l=>{var Y=Fi(),V=i(a(Y),2),x=i(a(V),2);se(x,1,()=>Za,oe,(n,z)=>{var P=qi(),q=a(P),O=a(q),U=i(q,2),E=a(U);p(()=>m(E,Qa[e(z)])),Ja(O,()=>v().chainConfig[e(z)],re=>v(v().chainConfig[e(z)]=re,!0)),be("change",O,()=>v().save()),r(n,P)}),r(l,Y)};y(c,l=>{t().infoBoardState==="Config"&&l(_)})}r(d,u),ut()}function Ii(d,{from:s,to:t},v={}){var{delay:u=0,duration:c=$=>Math.sqrt($)*120,easing:_=na}=v,l=getComputedStyle(d),Y=l.transform==="none"?"":l.transform,[V,x]=l.transformOrigin.split(" ").map(parseFloat);V/=d.clientWidth,x/=d.clientHeight;var n=Oi(d),z=d.clientWidth/t.width/n,P=d.clientHeight/t.height/n,q=s.left+s.width*V,O=s.top+s.height*x,U=t.left+t.width*V,E=t.top+t.height*x,re=(q-U)*z,ne=(O-E)*P,je=s.width/t.width,C=s.height/t.height;return{delay:u,duration:typeof c=="function"?c(Math.sqrt(re*re+ne*ne)):c,easing:_,css:($,X)=>{var ce=X*re,xe=X*ne,ie=$+X*je,le=$+X*C;return`transform: ${Y} translate(${ce}px, ${xe}px) scale(${ie}, ${le});`}}}function Oi(d){if("currentCSSZoom"in d)return d.currentCSSZoom;for(var s=d,t=1;s!==null;)t*=+getComputedStyle(s).zoom,s=s.parentElement;return t}var Ri=o('<div class="chain_number svelte-lqu21u"> </div>'),Wi=o('<div class="duel_card_row svelte-lqu21u"> </div>'),Ki=o('<div class="appendix svelte-lqu21u"> </div>'),zi=o('<div class="appendix_wrapper svelte-lqu21u"></div>'),Vi=o('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),Gi=o("<div></div>");function Xi(d,s){ct(s,!1);let t=Re(s,"duel",8),v=Re(s,"position",8,"left");const u=-100,c=()=>v()==="left"?-100:100;let _=ye([]),l=Promise.resolve(),Y=Promise.resolve();const V=1e3,x=500,n=400,z=q=>{const O={...q};O.isKnown=q.chainBlockInfo.action.entity.controller.duelistType==="Player"||q.chainBlockInfo.action.entity.face==="FaceUp",O.chainBlockInfo.onStateChange.append(U=>{if(U==="done"||U==="failed"||U==="negated")return l=l.then(async()=>{const E=new Date().getTime()-O.chainBlockInfo.wasSpawnedAt.getTime();E<V&&await Ut(V-E),S(_,e(_).filter(re=>re.seq!==O.seq)),await Ut(x+n)}).then(),"RemoveMe";S(_,e(_))}),Y=Y.then(async()=>{S(_,[O,...e(_)].sort((U,E)=>er.isSameChain(U.clock,E.clock)&&U.chainBlockInfo.action.isWithChainBlock&&E.chainBlockInfo.action.isWithChainBlock?E.clock.totalProcSeq-U.clock.totalProcSeq:U.clock.totalProcSeq-E.clock.totalProcSeq)),await Ut(300)}),l=l.then(()=>Ut(1e3))};t().chainBlockLog.onInsert.append(z),_t();var P=Gi();se(P,13,()=>e(_),q=>q.seq,(q,O)=>{var U=Vi();const E=pe(()=>{const{activator:G,action:ve,appendix:ke}=e(O).chainBlockInfo;return{activator:G,action:ve,appendix:ke}});var re=a(U),ne=a(re);{var je=G=>{var ve=Ri(),ke=a(ve);p(()=>m(ke,`チェーン：${e(O).chainBlockInfo.chainNumber??""}`)),r(G,ve)};y(ne,G=>{e(O).chainBlockInfo.chainNumber&&G(je)})}var C=i(ne,2),$=a(C),X=i(C,2),ce=a(X);{var xe=G=>{var ve=Wi(),ke=a(ve);p(()=>m(ke,e(O).isKnown?e(E).action.entity.nm:"？？？")),r(G,ve)};y(ce,G=>{(e(E).action.entity.entityType==="Card"||e(E).action.entity.entityType==="Token")&&G(xe)})}var ie=i(ce,2),le=a(ie),Ae=a(le),B=i(le,2);{var F=G=>{var ve=zi();se(ve,5,()=>e(E).appendix,oe,(ke,ue)=>{var A=Ki(),h=a(A);p(()=>m(h,e(ue))),r(ke,A)}),r(G,ve)};y(B,G=>{e(E).appendix&&G(F)})}p((G,ve,ke)=>{Le(U,`cut_in_row ${(!e(O).chainBlockInfo.chainNumber||e(O).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Le(re,`cut_in_item cut_in_item_${G??""} cut_in_item_${e(O).chainBlockInfo.state??""} svelte-lqu21u`),Le(C,`duelist_name duelist_${G??""}_name svelte-lqu21u`),m($,e(E).activator.profile.name),Le(X,`duel_card duel_card_${G??""} ${ve??""} ${(e(O).isKnown?e(E).action.entity.origin.kind:"")??""} ${e(E).action.entity.entityType??""}  svelte-lqu21u`),m(Ae,ke)},[()=>e(E).activator.seat.toLowerCase(),()=>e(O).isKnown?(e(E).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(E).action.toString()],pe),te(3,re,()=>xr,()=>new Date().getTime()-e(O).chainBlockInfo.wasSpawnedAt.getTime()<V?{x:c(),duration:n}:{y:u,duration:n}),tr(U,()=>Ii,()=>({duration:x})),r(q,U)}),p(()=>Le(P,`cut_in_container cut_in_container_${v()??""} svelte-lqu21u`)),r(d,P),ut()}const Qi=kr({duration:400});var Ji=o('<div class="duel_desk_left v_flex svelte-1i63tk9"><!> <!> <!></div>'),Zi=o('<button class="duel_field_header_message svelte-1i63tk9"> </button> <div class="duel_field_header_buttons svelte-1i63tk9"><button class="svelte-1i63tk9">サレンダー</button></div>',1),es=o("<tr></tr>"),ts=o('<table class="duel_field svelte-1i63tk9"><tbody class="svelte-1i63tk9"></tbody></table>'),as=o('<button class="svelte-1i63tk9">OK</button>'),rs=o('<button class="svelte-1i63tk9">cancel</button>'),is=o("<!> <!>",1),ss=o('<button class="svelte-1i63tk9"> </button>'),ns=o('<div style="text-align: left;"><!> <!> <!></div>'),os=o('<div><!> <div class=" duel_desk_center v_flex svelte-1i63tk9"><div class="duel_field_header svelte-1i63tk9"><!></div> <div class="duel_field_body svelte-1i63tk9"><!></div> <div class="duel_field_footer svelte-1i63tk9"><!></div></div> <!></div> <div style="position:fixed;left:0;bottom:0"> </div> <!> <div><!></div>',1);function ls(d,s){ct(s,!1);let t=Re(s,"duel",12),v=Re(s,"userProfile",8),u=ye(0),c=ye(0),_=ye([]),l=ye([]),Y=()=>{},V=ye([]),x=ye(),n=ye(),z=ye(()=>!1),P=ye(!1);const q=w=>{Y=w.resolve,S(V,w.dummyActionInfos.filter(k=>k.action.entity.entityType==="Duelist").filter(k=>k.action.entity.controller.seat==="Below")),S(x,void 0),S(n,void 0),S(l,[]),S(_,[]),S(P,!1),w.entitiesChoices&&(S(x,w.entitiesChoices),S(z,()=>{var k;return((k=w.entitiesChoices)==null?void 0:k.validator(e(_)))??!1}),S(P,w.entitiesChoices.cancelable),e(x).selectables.every(k=>k.cell.isPlayFieldCell&&k.getIndexInCell()===0||k.cell.cellType==="Hand"&&k.controller.duelistType==="Player"||k.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:w.entitiesChoices,chainBlockInfos:w.chainBlockInfos,cancelable:w.entitiesChoices.cancelable}).then(k=>{Y({selectedEntities:k})})),w.cellsChoices&&(S(n,w.cellsChoices),S(z,()=>{var k;return((k=w.cellsChoices)==null?void 0:k.validator(e(l)))??!1}),S(P,w.cellsChoices.cancelable))};t().view.onWaitStart.append(q);const O=()=>{Y=()=>{},S(n,void 0),S(x,void 0),S(l,[]),S(_,[]),S(z,()=>!1),S(P,!1)};t().view.onWaitEnd.append(O);let U=ye(void 0),E=ye("Normal");const re=({card:w,mode:k})=>{S(U,w),S(E,k??(e(U)===w||e(E)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(re);const ne=()=>{t(t())};t().view.onDuelUpdate.append(ne),t().log.onUpdate.append(ne);const je=()=>{e(x)&&e(x).validator(e(_))&&Y({selectedEntities:e(_)}),e(n)&&e(n).validator(e(l))&&Y({selectedCells:e(l)})},C=()=>{Y({})},$=w=>{Y({actionInfo:w})},X=()=>{Y({surrender:!0})};t().main();const ce=()=>e(u)<=1400?"compact":"wide";_t();var xe=os(),ie=N(xe),le=a(ie);{var Ae=w=>{var k=Ji(),Z=a(k);Ya(Z,{get duelist(){return t().duelists.Above}});var we=i(Z,2);Yi(we,{get entity(){return e(U)},get mode(){return e(E)}});var $e=i(we,2);Ya($e,{get duelist(){return t().duelists.Below}}),r(w,k)};y(le,w=>{ce()==="wide"&&w(Ae)})}var B=i(le,2),F=a(B),G=a(F);{var ve=w=>{var k=Zi(),Z=N(k),we=a(Z),$e=i(Z,2),De=a($e);p(()=>m(we,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),be("click",Z,()=>{t(t().view.infoBoardState="Log",!0)}),be("click",De,X),r(w,k)};y(G,w=>{t().isEnded||w(ve)})}var ke=i(F,2),ue=a(ke);{var A=w=>{var k=ts(),Z=a(k);se(Z,5,()=>t().field.cells,oe,(we,$e,De)=>{var _e=es();Le(_e,`${`duel_desk_row_${De}`??""} svelte-1i63tk9`),se(_e,5,()=>e($e),oe,(M,I,Ce)=>{Or(M,{get view(){return t().view},row:De,column:Ce,get selectedEntities(){return e(_)},set selectedEntities(Se){S(_,Se)},get selectedCells(){return e(l)},set selectedCells(Se){S(l,Se)},$$legacy:!0})}),r(we,_e)}),r(w,k)};y(ue,w=>{t().clock.turn>0&&w(A)})}var h=i(ke,2),L=a(h);{var R=w=>{var k=is(),Z=N(k);{var we=_e=>{var M=as();p(I=>M.disabled=I,[()=>!e(z)()],pe),be("click",M,je),r(_e,M)};y(Z,_e=>{((e(x)&&e(x).qty)??(e(n)&&e(n).qty)??9999)>1&&_e(we)})}var $e=i(Z,2);{var De=_e=>{var M=rs();be("click",M,C),r(_e,M)};y($e,_e=>{e(P)&&_e(De)})}r(w,k)},Q=w=>{var k=Te(),Z=N(k);se(Z,1,()=>e(V),oe,(we,$e)=>{var De=ss(),_e=a(De);p(()=>m(_e,e($e).action.title)),be("click",De,()=>$(e($e))),r(we,De)}),r(w,k)};y(L,w=>{e(x)&&e(x).selectables.length||e(n)&&e(n).selectables?w(R):w(Q,!1)})}var D=i(B,2);{var H=w=>{var k=ns(),Z=a(k);ei(Z,{get log(){return t().log}});var we=i(Z,2);Pi(we,{get cell(){return t().view.infoBoardCell}});var $e=i(we,2);Hi($e,{get userProfile(){return v()},get viewController(){return t().view}}),p(De=>Le(k,`duel_desk_right duel_desk_right_${De??""}  svelte-1i63tk9`),[()=>t().view.infoBoardState.toLowerCase()],pe),te(3,k,()=>fe,()=>({duration:e(u)>1400?0:200,axis:"x"})),r(w,k)};y(D,w=>{(e(u)>1400||t().view.infoBoardState!=="Default")&&w(H)})}var J=i(ie,2),ae=a(J),b=i(J,2);ar(b,{get modalController(){return t().view.modalController}});var j=i(b,2),T=a(j);const W=pe(()=>ce()==="wide"?"right":"left");Xi(T,{get duel(){return t()},get position(){return e(W)}}),p((w,k)=>{Le(ie,`flex duel_desk ${w??""}_mode svelte-1i63tk9`),m(ae,k),Le(j,`cutin ${w??""}_mode svelte-1i63tk9`)},[ce,()=>t().clock.toFullString()],pe),Vt("innerWidth",w=>S(u,w)),Vt("innerHeight",w=>S(c,w)),r(d,xe),ut()}var vs=o('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),ds=o('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),cs=o("<div></div>"),_s=o("<!> <!> <!> <!> <!>",1),us=o('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),fs=o('<li class="deck_editor_item svelte-niobyr"><div role="listitem"><div class="svelte-niobyr"><div class="svelte-niobyr"> </div> <div style="display:flex" class="svelte-niobyr"><div class="svelte-niobyr"><!> <!> <!></div> <div style="flex-grow: 1; width:0.1rem" class="svelte-niobyr"></div> <div class="svelte-niobyr"><!></div></div></div></div> <button class="button_style_reset svelte-niobyr">+</button> <button class="button_style_reset svelte-niobyr">-</button></li>'),ps=o('<div class="deck_editor_card_kind svelte-niobyr"><div class="deck_editor_card_kind_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <ul class="svelte-niobyr"></ul></div>'),gs=o('<div class="deck_editor_deck_type svelte-niobyr"><div class="deck_editor_deck_type_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <!></div>'),ms=o('<div class="svelte-niobyr">読み込み中...</div>'),bs=o('<div class="deck_editor_card_list svelte-niobyr"><!></div>');function Ua(d,s){ct(s,!1);let t=Re(s,"allCardInfos",8),v=Re(s,"deckCardInfos",12),u=Re(s,"mode",8),c=Re(s,"onAttention",8),_=Re(s,"searchCondition",8,void 0);const l={Deck:["Monster","Spell","Trap"],ExtraDeck:["Monster"]},Y={Deck:{Monster:[],Spell:[],Trap:[]},ExtraDeck:{Monster:[],Spell:[],Trap:[]}},V=C=>{var $;return($=C.monsterCategories)!=null&&$.union(Gt).length?"ExtraDeck":"Deck"},x=C=>{Object.values(Y).forEach($=>Object.values($).forEach(X=>X.reset())),C.filter($=>$.kind!=="XyzMaterial").forEach($=>{var ce;if($.kind==="XyzMaterial")return;const X=(ce=$.monsterCategories)!=null&&ce.union(Gt).length?"ExtraDeck":"Deck";Y[X][$.kind].push($)}),Object.values(Y).forEach($=>Object.values($).forEach(X=>X.sort(sa)))},n=u()==="List"?new Promise(C=>{x(t()),C()}):Promise.resolve(),z=()=>(u()==="Deck"&&(x(v()),S(U,v().length)),Y),P=(C,$,X)=>{v(v().filter(ce=>V(ce)!==$||ce.kind!==X&&X))},q=(C,$)=>{try{if(C.ctrlKey){v().push($);return}const X=v().filter(xe=>xe.name===$.name).length;if(X>2)return;const ce=C.shiftKey?3-X:1;if(ce<1)return;v().push(...Array(ce).fill($))}finally{v().sort(sa),v(v())}},O=(C,$)=>{let X=0;v(v().filter(ce=>ce.name!==$.name?!0:(X++,!C.shiftKey&&X>1))),v().sort(sa)};let U=ye(100);const E=()=>{e(U)>t().length+v().length||(S(U,e(U)+100),Ut(100).then(E))},re=(C,$,X,ce)=>{if($===0&&ce==="Monster"&&(S(U,100),Ut(100).then(E)),!_())return!0;if(!_().cardKinds.includes(C.kind)||_().name.trim().length&&[C.name,...C.nameTags??[],...C.textTags??[]].every(ie=>!ie.includes(_().name))||!C.isImplemented&&!_().others.includes("implemented")||C.isForTest&&!_().others.includes("test")||C.isOldVersion&&!_().others.includes("oldVersion"))return!1;if(C.kind==="Monster"){if(C.attributes&&!_().monsterAttributes.union(C.attributes).length||C.types&&!_().monsterTypes.union(C.types).length)return!1;const xe=C.level??C.rank??C.link;return $t(_().starLowerBound)&&(xe??0)<_().starLowerBound||$t(_().starUpperBound)&&(xe??0)>_().starUpperBound||$t(_().atkLowerBound)&&(C.attack??0)<_().atkLowerBound||$t(_().atkUpperBound)&&(C.attack??0)>_().atkUpperBound||$t(_().defLowerBound)&&(C.defense??0)<_().defLowerBound||$t(_().defUpperBound)&&(C.defense??0)>_().defUpperBound||$t(_().atkPlusDef)&&(!$t(C.attack)||!$t(C.defense)||C.attack+C.defense!==_().atkPlusDef)||!C.monsterCategories?!1:C.monsterCategories.union(_().monsterCategories).length}if(C.kind==="Spell")return C.spellCategory&&_().spellCategories.includes(C.spellCategory);if(C.kind==="Trap")return C.trapCategory&&_().trapCategories.includes(C.trapCategory)};_t();var ne=bs(),je=a(ne);dt(je,()=>n,C=>{var $=ms();r(C,$)},C=>{var $=Te();const X=pe(z);var ce=N($);se(ce,1,()=>ir,oe,(xe,ie)=>{var le=gs();const Ae=pe(()=>Object.values(e(X)[e(ie)]).flatMap(A=>A));var B=a(le),F=a(B),G=a(F),ve=i(F,2);{var ke=A=>{var h=vs(),L=a(h);be("click",L,R=>P(R,e(ie),void 0)),r(A,h)};y(ve,A=>{u()==="Deck"&&e(Ae).some(re)&&A(ke)})}var ue=i(B,2);se(ue,1,()=>va(e(X)[e(ie)]).filter(A=>l[e(ie)].includes(A)),oe,(A,h)=>{var L=ps();const R=pe(()=>e(X)[e(ie)][e(h)].filter((...j)=>re(...j,e(h))));var Q=a(L),D=a(Q),H=a(D),J=i(D,2);{var ae=j=>{var T=ds(),W=a(T);be("click",W,w=>P(w,e(ie),e(h))),r(j,T)};y(J,j=>{u()==="Deck"&&e(R).length&&j(ae)})}var b=i(Q,2);se(b,5,()=>e(R),oe,(j,T,W)=>{var w=Te(),k=N(w);{var Z=we=>{var $e=fs(),De=a($e),_e=a(De),M=a(_e),I=a(M),Ce=i(M,2),Se=a(Ce),He=a(Se);{var Ne=ee=>{var ge=_s(),me=N(ge);{var Ke=Ve=>{var Ie=at();p(()=>m(Ie,`★${e(T).level??""}`)),r(Ve,Ie)};y(me,Ve=>{e(T).level&&Ve(Ke)})}var Ee=i(me,2);{var ze=Ve=>{var Ie=at();p(()=>m(Ie,`☆${e(T).rank??""}`)),r(Ve,Ie)};y(Ee,Ve=>{e(T).rank&&Ve(ze)})}var et=i(Ee,2);se(et,1,()=>e(T).attributes??[],oe,(Ve,Ie)=>{var Xe=cs();p(()=>Le(Xe,`monster_attr ${e(Ie)??""} svelte-niobyr`)),r(Ve,Xe)});var rt=i(et,2);se(rt,1,()=>e(T).types??[],oe,(Ve,Ie)=>{var Xe=at();p(()=>m(Xe,Jt[e(Ie)])),r(Ve,Xe)});var yt=i(rt,2);se(yt,1,()=>e(T).monsterCategories??[],oe,(Ve,Ie)=>{var Xe=at();p(()=>m(Xe,Zt[e(Ie)])),r(Ve,Xe)}),r(ee,ge)};y(He,ee=>{e(T).kind==="Monster"&&ee(Ne)})}var Ye=i(He,2);{var Pe=ee=>{var ge=at();p(()=>m(ge,`${ea[e(T).spellCategory]??""}魔法`)),r(ee,ge)};y(Ye,ee=>{e(T).spellCategory&&ee(Pe)})}var Ge=i(Ye,2);{var Be=ee=>{var ge=at();p(()=>m(ge,`${ta[e(T).trapCategory]??""}罠`)),r(ee,ge)};y(Ge,ee=>{e(T).trapCategory&&ee(Be)})}var he=i(Se,4),f=a(he);{var g=ee=>{var ge=us(),me=N(ge),Ke=a(me),Ee=i(me,2),ze=a(Ee);p(()=>{m(Ke,e(T).attack??"?"),m(ze,e(T).defense??"?")}),r(ee,ge)};y(f,ee=>{e(T).kind==="Monster"&&ee(g)})}var K=i(De,2),de=i(K,2);p(ee=>{Le(De,`${ee??""} svelte-niobyr`),m(I,e(T).name),K.disabled=!e(T).isImplemented,pt(K,"title",e(T).isImplemented?"※shiftキー同時押しで一括投入":""),de.disabled=!e(T).isImplemented,pt(de,"title",e(T).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>{var ee,ge;return`deck_editor_card duel_card ${e(T).kind} ${(ge=(ee=e(T))==null?void 0:ee.monsterCategories)==null?void 0:ge.join(" ")} ${e(T).isImplemented?"is_implemented":"is_not_implemented"}`}],pe),be("mouseenter",De,()=>c()(e(T))),be("click",K,ee=>q(ee,e(T))),be("click",de,ee=>O(ee,e(T))),r(we,$e)};y(k,we=>{W<e(U)&&we(Z)})}r(j,w)}),p(()=>m(H,`${Pa[e(h)]??""}（${e(R).length??""} / ${e(X)[e(ie)][e(h)].length??""}枚）`)),r(A,L)}),p(A=>m(G,`${rr[e(ie)]??""}（${A??""} / ${e(Ae).length??""}枚）`),[()=>e(Ae).filter(re).length],pe),r(xe,le)}),r(C,$)}),r(d,ne),ut()}var hs=o('<div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>'),ys=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),xs=o('<div></div> <div class="svelte-rccxcp"> </div>',1),ks=o("<div> </div>"),ws=o("<div> </div>"),Ds=o('<div class="duel_card_info_row svelte-rccxcp"><!> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),Cs=o('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),$s=o('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Ss=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※エラッタ前カードです</div></div>'),Ms=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),Ts=o('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),js=o('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <!></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!> <!></div></div>');function Bs(d,s){ct(s,!1);let t=Re(s,"cardInfo",8,void 0);_t();var v=Te(),u=N(v);{var c=_=>{var l=js(),Y=a(l),V=a(Y),x=a(V),n=a(x),z=i(V,2);{var P=B=>{var F=hs(),G=a(F),ve=a(G),ke=i(G,2),ue=a(ke);p((A,h)=>{m(ve,A),m(ue,h)},[()=>"★".repeat(t().level||0),()=>"☆".repeat(t().rank||0)],pe),r(B,F)};y(z,B=>{t().kind==="Monster"&&B(P)})}var q=i(Y,2),O=a(q);{var U=B=>{var F=ys(),G=N(F),ve=a(G),ke=a(ve),ue=a(ke),A=i(G,2),h=a(A),L=a(h),R=i(h,2),Q=a(R);p(()=>{m(ue,t().pendulumDescription),m(L,`◀ ${t().pendulumScaleL??""}`),m(Q,`${t().pendulumScaleR??""} ▶`)}),r(B,F)};y(O,B=>{var F;(F=t().monsterCategories)!=null&&F.includes("Pendulum")&&B(U)})}var E=i(O,2);{var re=B=>{var F=Ds(),G=N(F),ve=a(G);{var ke=L=>{var R=xs(),Q=N(R),D=i(Q,2),H=a(D);p(()=>{Le(Q,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),m(H,`${da[t().attributes[0]]??""}属性`)}),r(L,R)};y(ve,L=>{t().attributes&&L(ke)})}var ue=i(ve,2);{var A=L=>{var R=ks(),Q=a(R);p(()=>{Le(R,`monster_cat ${t().types[0]??""} svelte-rccxcp`),m(Q,`${Jt[t().types[0]]??""}${ca[t().types[0]]??""}族`)}),r(L,R)};y(ue,L=>{t().types&&L(A)})}var h=i(G,2);se(h,5,()=>t().monsterCategories??[],oe,(L,R)=>{var Q=ws(),D=a(Q);p(()=>{Le(Q,`monster_cat ${e(R)??""} svelte-rccxcp`),m(D,`${Zt[e(R)]??""}${_a[e(R)]??""}`)}),r(L,Q)}),r(B,F)},ne=B=>{var F=Te(),G=N(F);{var ve=ue=>{var A=Cs(),h=i(a(A),2),L=a(h);p(()=>m(L,`${ea[t().spellCategory]??""}魔法`)),r(ue,A)},ke=ue=>{var A=Te(),h=N(A);{var L=R=>{var Q=$s(),D=i(a(Q),2),H=a(D);p(()=>m(H,`${ta[t().trapCategory]??""}罠`)),r(R,Q)};y(h,R=>{t().kind==="Trap"&&t().trapCategory&&R(L)},!0)}r(ue,A)};y(G,ue=>{t().kind==="Spell"&&t().spellCategory?ue(ve):ue(ke,!1)},!0)}r(B,F)};y(E,B=>{t().kind==="Monster"?B(re):B(ne,!1)})}var je=i(E,2),C=a(je),$=a(C),X=a($),ce=i(je,2);{var xe=B=>{var F=Ss();r(B,F)};y(ce,B=>{t().isOldVersion&&B(xe)})}var ie=i(ce,2);{var le=B=>{var F=Ms();r(B,F)},Ae=B=>{var F=Ts(),G=a(F),ve=i(G,2),ke=a(ve);p(ue=>{pt(G,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),pt(ve,"href",ue),m(ke,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>sr(t())],pe),r(B,F)};y(ie,B=>{t().isForTest?B(le):B(Ae,!1)})}p(B=>{Le(l,`duel_card duel_card_info ${t().kind??""} ${B??""} svelte-rccxcp`),m(n,t().name),m(X,t().description)},[()=>{var B;return(B=t().monsterCategories)==null?void 0:B.join(" ")}],pe),r(_,l)};y(u,_=>{t()&&_(c)})}r(d,v),ut()}const Es={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class As{constructor(){tt(this,"DefaultSeparator1","/");tt(this,"DefaultSeparator2"," ");tt(this,"DefaultSeparator3",":");tt(this,"createDate",s=>{if(!s)return;const t=new Date(s);if(!isNaN(t.getTime()))return t});tt(this,"createDateOr",(s,t)=>this.createDate(s)||t||new Date);tt(this,"truncateDate",s=>{const t=s||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});tt(this,"addDate",(s,t)=>{const v=this.createDateOr(s);return v.setDate(v.getDate()+t),v});tt(this,"addMonth",(s,t)=>{const v=this.createDateOr(s);return v.setMonth(v.getMonth()+t),v});tt(this,"addYear",(s,t)=>{const v=this.createDateOr(s);return v.setFullYear(v.getFullYear()+t),v});tt(this,"getDayOfWeek",(s,t="dddd")=>{const v=this.createDate(s);return v?Es[v.getDay()][t]:""});tt(this,"formatToYYYYMMDD",(s,t=this.DefaultSeparator1)=>{const v=this.createDate(s);if(!v)return"";const u=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2),_=("0"+v.getDate()).slice(-2);return u+t+c+t+_});tt(this,"formatToYYYYMM",(s,t=this.DefaultSeparator1)=>{const v=this.createDate(s);if(!v)return"";t||(t="");const u=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2);return u+t+c});tt(this,"formatToHHMMSS",(s,t=this.DefaultSeparator3)=>{const v=this.createDate(s);if(!v)return"";t||(t="");const u=v.getHours(),c=v.getMinutes(),_=v.getSeconds();return("0"+u).slice(-2)+t+("0"+c).slice(-2)+t+("0"+_).slice(-2)});tt(this,"formatToHHMM",(s,t=this.DefaultSeparator3)=>{const v=this.createDate(s);if(!v)return"";t||(t="");const u=("0"+v.getHours()).slice(-2),c=("0"+v.getMinutes()).slice(-2);return u+t+c});tt(this,"formatToYYYYMMDD_HHMM",(s,t=this.DefaultSeparator1,v=this.DefaultSeparator2,u=this.DefaultSeparator3)=>{const c=this.createDate(s);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMM(c,u):""});tt(this,"formatToYYYYMMDD_HHMMSS",(s,t=this.DefaultSeparator1,v=this.DefaultSeparator2,u=this.DefaultSeparator3)=>{const c=this.createDate(s);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMMSS(c,u):""})}}const ht=new As;Date.prototype.truncateDate=function(){return ht.truncateDate(this)};Date.prototype.getCloneOr=function(d){return ht.createDateOr(this,d)};Date.prototype.addDate=function(d){return ht.addDate(this,d)};Date.prototype.addMonth=function(d){return ht.addDate(this,d)};Date.prototype.addYear=function(d){return ht.addDate(this,d)};Date.prototype.getDayOfWeek=function(d="dddd"){return ht.getDayOfWeek(this,d)};Date.prototype.formatToYYYYMM=function(d){return ht.formatToYYYYMM(this,d)};Date.prototype.formatToYYYYMMDD=function(d){return ht.formatToYYYYMMDD(this,d)};Date.prototype.formatToYYYYMMDD_HHMM=function(d,s,t){return ht.formatToYYYYMMDD_HHMM(this,d,s,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(d,s,t){return ht.formatToYYYYMMDD_HHMMSS(this,d,s,t)};Date.prototype.formatToHHMM=function(d){return ht.formatToHHMM(this,d)};Date.prototype.formatToHHMMSS=function(d){return ht.formatToHHMMSS(this,d)};var Ys=o('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),Us=o('<ul class="deck_info_list svelte-2wdgc8"></ul>'),Ls=o('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),Ns=o('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),Ps=o('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),qs=o('<button class="svelte-2wdgc8">Cancel</button>'),Fs=o('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function Hs(d,s){ct(s,!1);let t=Re(s,"eventHolder",8),v=Re(s,"args",8),u=Re(s,"resolve",8),c=ye(Promise.resolve([])),_=ye();const l=()=>{S(_,new DataTransfer().files),S(c,Promise.resolve([]))},Y=async P=>{P.preventDefault(),console.log("hoge",P)},V=async P=>{P.preventDefault(),P.dataTransfer&&n(P.dataTransfer.files)},x=()=>{n(e(_))},n=async P=>{if(!P.length)return;const q=[],O=[];for(const U of P)try{O.push(...await kt.createfromJson(U))}catch(E){E instanceof Error&&q.push(E.message)}if(q.length){console.log(...q);return}S(c,e(c).then(()=>O))},z=l;_t(),nr(d,{get eventHolder(){return t()},get args(){return v()},$$slots:{body:(P,q)=>{var O=Ns(),U=a(O);dt(U,()=>Rt,null,(E,re)=>{var ne=Te(),je=N(ne);dt(je,()=>e(c),null,(C,$)=>{var X=Te(),ce=N(X);{var xe=le=>{var Ae=Us();se(Ae,5,()=>e($),oe,(B,F)=>{var G=Ys(),ve=a(G),ke=a(ve),ue=i(ve,2),A=a(ue),h=i(ue,2),L=a(h);p((R,Q,D)=>{m(ke,e(F).name),m(A,`${R??""}
                  /
                  ${Q??""}`),m(L,`最終使用日時 ： ${D??""}`)},[()=>e(F).cardNames.filter(R=>{var Q,D;return!((D=(Q=e(re).getCardInfo(R))==null?void 0:Q.monsterCategories)!=null&&D.union(Gt).length)}).length,()=>e(F).cardNames.filter(R=>{var Q,D;return(D=(Q=e(re).getCardInfo(R))==null?void 0:Q.monsterCategories)==null?void 0:D.union(Gt).length}).length,()=>e(F).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],pe),r(B,G)}),r(le,Ae)},ie=le=>{var Ae=Ls(),B=i(a(Ae),2),F=a(B);or(F,()=>e(_),G=>S(_,G)),be("change",F,x),be("cancel",F,z),be("drop",Ae,V),be("dragover",Ae,Y),r(le,Ae)};y(ce,le=>{e($).length?le(xe):le(ie,!1)})}r(C,X)}),r(E,ne)}),r(P,O)},footer:(P,q)=>{var O=Fs(),U=a(O);dt(U,()=>e(c),null,(E,re)=>{var ne=Te(),je=N(ne);{var C=X=>{var ce=Ps(),xe=N(ce),ie=i(xe,2),le=i(ie,2);p(()=>{xe.disabled=e(re).length===0,ie.disabled=e(re).length===0}),be("click",xe,()=>u()({deckInfos:e(re),replaceAll:!1})),be("click",ie,()=>u()({deckInfos:e(re),replaceAll:!0})),be("click",le,z),r(X,ce)},$=X=>{var ce=Te(),xe=N(ce);{var ie=le=>{var Ae=qs();be("click",Ae,()=>u()(void 0)),r(le,Ae)};y(xe,le=>{v().cancelable&&le(ie)},!0)}r(X,ce)};y(je,X=>{e(re).length?X(C):X($,!1)})}r(E,ne)}),r(P,O)}}}),ut()}const Qt=class Qt extends vr{constructor(s,t){super(s,...Object.values(t))}};tt(Qt,"createModalController",s=>{const t={deckUploader:new dr({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new Qt(s,t),t)});let la=Qt;function Is(d,s){ct(s,!1);let t=Re(s,"modalController",8);_t(),lr(d,{get modalController(){return t()},children:(v,u)=>{var c=Te(),_=N(c);{var l=Y=>{Hs(Y,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};y(_,Y=>{t().deckUploader.state==="Shown"&&Y(l)})}r(v,c)},$$slots:{default:!0}}),ut()}var Os=o('<label><input type="checkbox"> </label>'),Rs=o('<label><input type="checkbox"> </label>'),Ws=o('<label><input type="checkbox"> <div style="display: inline-block;"></div> </label>'),Ks=o('<label><input type="checkbox"> </label>'),zs=o('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">モンスター</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">属性</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">種族</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">星攻守</button></div> <div class="svelte-xd4rv4"><div><span>星</span> <input type="number" min="0" max="5000" step="100" style="width: 2.5rem;"> <span>～</span> <input type="number" min="0" max="5000" step="100" style="width: 2.5rem;"></div> <div><span>攻</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;"> <span>～</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;"></div> <div><span>守</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;"> <span>～</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;"></div> <div><span>攻+守</span> <input type="number" min="0" max="10000" step="100" style="width: 4rem;"></div></div></div>',1),Vs=o('<label><input type="checkbox"> </label>'),Gs=o('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">魔法</button></div> <div class="svelte-xd4rv4"></div></div>'),Xs=o('<label><input type="checkbox"> </label>'),Qs=o('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">罠</button></div> <div class="svelte-xd4rv4"></div></div>'),Js=o('<label><input type="checkbox"> </label>'),Zs=o("<div>カード情報読込中</div>"),en=o("<option> </option>"),tn=o('<div class="svelte-xd4rv4"><a class="white_button svelte-xd4rv4" download="SVS_DeckInfos.json">ダウンロード</a></div>'),an=o('<div class="svelte-xd4rv4"></div>'),rn=o('<div class="svelte-xd4rv4"><a class="white_button svelte-xd4rv4" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),sn=o('<div class="svelte-xd4rv4"></div>'),nn=o('<div class="deck_editor_body_right_header svelte-xd4rv4"><div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">編集対象 <select></select></div> <div class="svelte-xd4rv4"></div> <div class="svelte-xd4rv4">新規名称 <input type="text"></div></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">基本操作</div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">デッキを保存</button></div> <div class="svelte-xd4rv4"></div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">デッキを複製</button></div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">DL/UL</div> <!> <!> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">アップロード</button></div></div></div> <!>',1),on=o("<div>デッキ情報読込中</div>"),ln=o('<div class="deck_editor svelte-xd4rv4"><div class="deck_editor_header"></div> <div class="deck_editor_body svelte-xd4rv4"><div class="deck_editor_body_left svelte-xd4rv4"><div role="contentinfo"><div class="deck_editor_search_box_header svelte-xd4rv4"><div>検索条件</div> <div><button class="white_button svelte-xd4rv4">条件クリア</button></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">名称</button></div> <div class="svelte-xd4rv4"><input type="text" style="width:70%"> <span>※ルビには対応していません</span></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">種類</button></div> <div class="svelte-xd4rv4"></div></div> <!> <!> <!> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">その他</button></div> <div class="svelte-xd4rv4"></div></div></div> <!></div> <div class="deck_editor_body_center svelte-xd4rv4"><!></div> <div class="deck_editor_body_right svelte-xd4rv4"><!></div></div> <div class="footer svelte-xd4rv4"><!></div></div> <!>',1);function vn(d,s){ct(s,!1);const t=[],v=[],u=[],c=[],_=[],l=[],Y=[],V=la.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),x={name:"",cardKinds:Sa.filter(f=>f!=="XyzMaterial"),monsterCategories:[...Ma],monsterAttributes:[...$a],monsterTypes:[...Ca],spellCategories:Da.filter(f=>f!=="PendulumScale"),trapCategories:[...wa],starLowerBound:0,starUpperBound:13,atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:["test","oldVersion","implemented"]},n=ye(structuredClone(x));Me(n,e(n).others=["oldVersion"]);let z=ye("SearchCondition");const P=async()=>{Me(n,e(n).name=""),Me(n,e(n).cardKinds=[]),Me(n,e(n).monsterCategories=[]),Me(n,e(n).monsterAttributes=[]),Me(n,e(n).monsterTypes=[]),Me(n,e(n).spellCategories=[]),Me(n,e(n).trapCategories=[]),Me(n,e(n).others=[]),Me(n,e(n).atkLowerBound=0),Me(n,e(n).atkUpperBound=5e3),Me(n,e(n).defLowerBound=0),Me(n,e(n).defUpperBound=5e3),Me(n,e(n).atkPlusDef=void 0)},q=f=>{f.forEach(g=>{Array.isArray(e(n)[g])&&Array.isArray(x[g])?Me(n,e(n)[g]=e(n)[g].length?[]:[...x[g]]):Me(n,e(n)[g]=x[g])})},O=(f,g,K)=>{Array.isArray(e(n)[g])&&Array.isArray(x[g])&&Me(n,e(n)[g]=[K])},U=async()=>{const g=(await e(ne)).find(de=>de.id===e(re));if(!g)return;const K=await Rt;S($,{...g,cardInfos:g.cardNames.map(de=>{const ee=K.getCardInfo(de);return ee===void 0&&console.error(de),ee}).filter(de=>de!==void 0)})},E=()=>kt.getAllDeckInfo().then(f=>(S(re,(f.find(g=>g.lastUsedAt.getTime()===Math.max(...f.map(K=>K.lastUsedAt.getTime())))??f[0]).id),f));let re=ye(-1),ne=ye(E()),je=ye(e(ne).then(f=>kt.convertToObjectURL(f)));e(ne).then(U);const C=()=>{S(ne,E()),S(je,e(ne).then(f=>kt.convertToObjectURL(f))),U()};let $=ye({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),X=ye(void 0),ce=0;const xe=f=>{S(z,"CardDetail"),f.cardId!==void 0&&!f.description&&!f.pendulumDescription&&(ce=f.cardId,Na([f.cardId]).then(()=>{f.cardId===ce&&S(X,f)})),S(X,f)},ie=async()=>{const g=(await e(ne)).find(K=>K.id===e(re));if(!g)throw new Error("illegal state");return g},le=async()=>{const f=await ie();await f.saveDeckInfo({...f,name:e($).name,cardNames:e($).cardInfos.map(g=>g.name),lastUsedAt:new Date}),C()},Ae=async()=>{(await kt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,e($).cardInfos.map(g=>g.name))).saveDeckInfo(),C()},B=async f=>{const g=await ie();!f.shiftKey&&!confirm(`デッキ【${g.name}】を削除します。
よろしいですか？`)||(await g.delete(),C())},F=async()=>{const f=await V.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!f)return;const g=[];if(f.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;g.push(...(await e(ne)).map(K=>K.id))}await Promise.all(f.deckInfos.map(K=>kt.createNewDeck(K.name,K.description,K.cardNames,K.lastUsedAt))),g.length&&await Promise.all(g.map(kt.remove)),C()};_t();var G=ln(),ve=N(G),ke=i(a(ve),2),ue=a(ke),A=a(ue),h=a(A),L=i(a(h),2),R=a(L),Q=i(h,2),D=a(Q),H=a(D),J=i(D,2),ae=a(J),b=i(Q,2),j=a(b),T=a(j),W=i(j,2);se(W,5,()=>Sa.filter(f=>f!=="XyzMaterial"),oe,(f,g)=>{var K=Os(),de=a(K),ee,ge=i(de);p(()=>{ee!==(ee=e(g))&&(de.value=(de.__value=e(g))==null?"":e(g)),m(ge,` ${Pa[e(g)]??""}`)}),Et(t,[],de,()=>(e(g),e(n).cardKinds),me=>Me(n,e(n).cardKinds=me)),r(f,K)});var w=i(b,2);{var k=f=>{var g=zs(),K=N(g),de=a(K),ee=a(de),ge=i(de,2);se(ge,5,()=>Ma,oe,(We,Oe)=>{var nt=Rs(),Je=a(nt),it,ot=i(Je);p(()=>{it!==(it=e(Oe))&&(Je.value=(Je.__value=e(Oe))==null?"":e(Oe)),m(ot,` ${Zt[e(Oe)]??""}${_a[e(Oe)]??""}`)}),Et(v,[],Je,()=>(e(Oe),e(n).monsterCategories),bt=>Me(n,e(n).monsterCategories=bt)),r(We,nt)});var me=i(K,2),Ke=a(me),Ee=a(Ke),ze=i(Ke,2);se(ze,5,()=>$a,oe,(We,Oe)=>{var nt=Ws(),Je=a(nt),it,ot=i(Je,2),bt=i(ot);p(()=>{it!==(it=e(Oe))&&(Je.value=(Je.__value=e(Oe))==null?"":e(Oe)),Le(ot,`monster_attr ${e(Oe)??""} svelte-xd4rv4`),m(bt,` ${da[e(Oe)]??""}`)}),Et(u,[],Je,()=>(e(Oe),e(n).monsterAttributes),Nt=>Me(n,e(n).monsterAttributes=Nt)),r(We,nt)});var et=i(me,2),rt=a(et),yt=a(rt),Ve=i(rt,2);se(Ve,5,()=>Ca,oe,(We,Oe)=>{var nt=Ks(),Je=a(nt),it,ot=i(Je);p(()=>{it!==(it=e(Oe))&&(Je.value=(Je.__value=e(Oe))==null?"":e(Oe)),m(ot,` ${Jt[e(Oe)]??""}
                  ${ca[e(Oe)]??""}`)}),Et(c,[],Je,()=>(e(Oe),e(n).monsterTypes),bt=>Me(n,e(n).monsterTypes=bt)),be("dblclick",nt,bt=>O(bt,"monsterTypes",e(Oe))),r(We,nt)});var Ie=i(et,2),Xe=a(Ie),gt=a(Xe),Mt=i(Xe,2),Ct=a(Mt),wt=i(a(Ct),2),jt=i(wt,4),Ze=i(Ct,2),Ue=i(a(Ze),2),qe=i(Ue,4),Fe=i(Ze,2),Qe=i(a(Fe),2),lt=i(Qe,4),mt=i(Fe,2),Tt=i(a(mt),2);be("click",ee,()=>q(["monsterCategories"])),te(3,K,()=>fe,()=>({delay:0,duration:100})),be("click",Ee,()=>q(["monsterAttributes"])),te(3,me,()=>fe,()=>({delay:0,duration:100})),be("click",yt,()=>q(["monsterTypes"])),te(3,et,()=>fe,()=>({delay:0,duration:100})),be("click",gt,()=>q(["starLowerBound","starUpperBound","atkLowerBound","atkUpperBound","defLowerBound","defUpperBound","atkPlusDef"])),Dt(wt,()=>e(n).starLowerBound,We=>Me(n,e(n).starLowerBound=We)),Dt(jt,()=>e(n).starUpperBound,We=>Me(n,e(n).starUpperBound=We)),Dt(Ue,()=>e(n).atkLowerBound,We=>Me(n,e(n).atkLowerBound=We)),Dt(qe,()=>e(n).atkUpperBound,We=>Me(n,e(n).atkUpperBound=We)),Dt(Qe,()=>e(n).defLowerBound,We=>Me(n,e(n).defLowerBound=We)),Dt(lt,()=>e(n).defUpperBound,We=>Me(n,e(n).defUpperBound=We)),Dt(Tt,()=>e(n).atkPlusDef,We=>Me(n,e(n).atkPlusDef=We)),te(3,Ie,()=>fe,()=>({delay:0,duration:100})),r(f,g)};y(w,f=>{e(n).cardKinds.includes("Monster")&&f(k)})}var Z=i(w,2);{var we=f=>{var g=Gs(),K=a(g),de=a(K),ee=i(K,2);se(ee,5,()=>Da.filter(ge=>ge!=="PendulumScale"),oe,(ge,me)=>{var Ke=Vs(),Ee=a(Ke),ze,et=i(Ee);p(()=>{ze!==(ze=e(me))&&(Ee.value=(Ee.__value=e(me))==null?"":e(me)),m(et,` ${ea[e(me)]??""}`)}),Et(_,[],Ee,()=>(e(me),e(n).spellCategories),rt=>Me(n,e(n).spellCategories=rt)),r(ge,Ke)}),be("click",de,()=>q(["spellCategories"])),te(3,g,()=>fe,()=>({delay:0,duration:100})),r(f,g)};y(Z,f=>{e(n).cardKinds.includes("Spell")&&f(we)})}var $e=i(Z,2);{var De=f=>{var g=Qs(),K=a(g),de=a(K),ee=i(K,2);se(ee,5,()=>wa,oe,(ge,me)=>{var Ke=Xs(),Ee=a(Ke),ze,et=i(Ee);p(()=>{ze!==(ze=e(me))&&(Ee.value=(Ee.__value=e(me))==null?"":e(me)),m(et,` ${ta[e(me)]??""}`)}),Et(l,[],Ee,()=>(e(me),e(n).trapCategories),rt=>Me(n,e(n).trapCategories=rt)),r(ge,Ke)}),be("click",de,()=>q(["trapCategories"])),te(3,g,()=>fe,()=>({delay:0,duration:100})),r(f,g)};y($e,f=>{e(n).cardKinds.includes("Trap")&&f(De)})}var _e=i($e,2),M=a(_e),I=a(M),Ce=i(M,2);se(Ce,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],oe,(f,g)=>{var K=Js(),de=a(K),ee,ge=i(de);p(()=>{ee!==(ee=g.key)&&(de.value=(de.__value=g.key)==null?"":g.key),m(ge,` ${g.text??""}`)}),Et(Y,[],de,()=>(g.key,e(n).others),me=>Me(n,e(n).others=me)),r(f,K)});var Se=i(A,2);Bs(Se,{get cardInfo(){return e(X)}});var He=i(ue,2),Ne=a(He);dt(Ne,()=>Rt,f=>{var g=Zs();r(f,g)},(f,g)=>{const K=pe(()=>Object.values(e(g).dic));Ua(f,{mode:"List",get allCardInfos(){return e(K)},onAttention:xe,get searchCondition(){return e(n)},get deckCardInfos(){return e($).cardInfos},set deckCardInfos(de){Me($,e($).cardInfos=de)},$$legacy:!0})});var Ye=i(He,2),Pe=a(Ye);dt(Pe,()=>e(ne),f=>{var g=on();r(f,g)},(f,g)=>{var K=nn(),de=N(K),ee=a(de),ge=a(ee),me=i(a(ge));p(()=>{e(re),Ft(()=>{e(g)})}),se(me,5,()=>e(g),oe,(Ue,qe)=>{var Fe=en(),Qe={},lt=a(Fe);p(()=>{Qe!==(Qe=e(qe).id)&&(Fe.value=(Fe.__value=e(qe).id)==null?"":e(qe).id),m(lt,e(qe).name)}),r(Ue,Fe)});var Ke=i(ge,4),Ee=i(a(Ke)),ze=i(ee,4),et=i(a(ze),2),rt=a(et),yt=i(et,4),Ve=a(yt),Ie=i(yt,2),Xe=a(Ie),gt=i(ze,2),Mt=i(a(gt),2);dt(Mt,ie,Ue=>{var qe=an();r(Ue,qe)},(Ue,qe)=>{var Fe=tn(),Qe=a(Fe);p(lt=>pt(Qe,"href",lt),[()=>kt.convertToObjectURL([e(qe)])],pe),r(Ue,Fe)});var Ct=i(Mt,2);dt(Ct,()=>e(je),Ue=>{var qe=sn();r(Ue,qe)},(Ue,qe)=>{var Fe=rn(),Qe=a(Fe);p(()=>pt(Qe,"href",e(qe))),r(Ue,Fe)});var wt=i(Ct,2),jt=a(wt),Ze=i(de,2);Ua(Ze,{mode:"Deck",allCardInfos:[],onAttention:xe,get deckCardInfos(){return e($).cardInfos},set deckCardInfos(Ue){Me($,e($).cardInfos=Ue)},$$legacy:!0}),Ht(me,()=>e(re),Ue=>S(re,Ue)),be("change",me,U),Dt(Ee,()=>e($).name,Ue=>Me($,e($).name=Ue)),be("click",rt,le),be("click",Ve,Ae),be("click",Xe,B),be("click",jt,F),r(f,K)});var Ge=i(ke,2),Be=a(Ge);dt(Be,()=>Rt,f=>{var g=at("読み込み中");r(f,g)},(f,g)=>{var K=at();p(()=>m(K,`実装済カード${e(g).definitionCount+e(g).nonDefinitionCount}枚（内、効果のないモンスター${e(g).nonDefinitionCount??""}枚）`)),r(f,K)});var he=i(ve,2);Is(he,{modalController:V}),p(()=>Le(A,`deck_editor_search_box ${(e(z)==="SearchCondition"?"":"minimum")??""} svelte-xd4rv4`)),be("click",R,P),be("click",H,()=>q(["name"])),Dt(ae,()=>e(n).name,f=>Me(n,e(n).name=f)),be("click",T,()=>q(["cardKinds"])),be("click",I,()=>q(["others"])),te(3,_e,()=>fe,()=>({delay:0,duration:100})),be("mouseenter",A,()=>S(z,"SearchCondition")),r(d,G),ut()}const dn=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],cn=3;var _n=o('<input class="game_mode_radio svelte-abgng1" type="radio" name="game_mode"> <label> </label>',1),un=o('<option class="svelte-abgng1"> </option>'),fn=o('<option class="svelte-abgng1"> </option>'),pn=o('<option class="svelte-abgng1"> </option>'),gn=o('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-abgng1">デッキ：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_deck_selector" class="deck_selector svelte-abgng1"><option class="svelte-abgng1">デフォルト</option><!></select></div></td></tr>'),mn=o('<option class="svelte-abgng1"> </option>'),bn=o('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_selector" class="config_row_label npc_selector svelte-abgng1">対戦相手：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_selector" class="npc_selector svelte-abgng1"></select> <div class="svelte-abgng1"> </div></div></td></tr> <!> <tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_selector" class="config_row_label npc_selector svelte-abgng1">先攻後攻：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_selector" class="npc_selector svelte-abgng1"></select></div></td></tr>',1),hn=o('<option class="svelte-abgng1"> </option>'),yn=o('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-abgng1">難易度：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="difficulty_selector" class="difficulty_selector svelte-abgng1"></select></div></td></tr>'),xn=o('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label class="config_row_label svelte-abgng1" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"></div></td></tr> <tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="deck_selector" class="config_row_label deck_selector svelte-abgng1">デッキ：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="deck_selector" class="deck_selector svelte-abgng1"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-abgng1"><div><button class="btn svelte-abgng1">duel start!</button></div></td></tr>',1),kn=o('<tr><td colspan="2" class="svelte-abgng1"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),wn=o('<tr><td colspan="2" class="svelte-abgng1"><div><button class="btn svelte-abgng1">deck edit</button></div></td></tr>'),Dn=o('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="duelist_name" class="config_row_label duelist_name svelte-abgng1">名前：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><input id="duelist_name" class="duelist_name svelte-abgng1" type="text"></div></td></tr> <!> <!>',1),Cn=o('<tr><td colspan="2" class="svelte-abgng1"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),$n=o('<div class="app_body svelte-abgng1"><table class="config_table svelte-abgng1"><tbody><!></tbody></table></div>'),Sn=o('<div class="result_title result_win svelte-abgng1">YOU WIN</div>'),Mn=o('<div class="result_title result_lose svelte-abgng1">YOU LOSE</div>'),Tn=o('<div class="result_title result_draw svelte-abgng1">DRAW</div>'),jn=o('<div class="twitter_share_button_wrapper svelte-abgng1"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-abgng1">X(twitter)でシェアする</a></div>'),Bn=o('<div class="result svelte-abgng1"><!> <div class="reason_of_end svelte-abgng1"> </div> <!> <div class="svelte-abgng1"><button class="white_button svelte-abgng1">TOPへ戻る</button></div></div>'),En=o('<main style="flex-direction: column; display :flex" class="svelte-abgng1"><div class="link link_left svelte-abgng1"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-abgng1">posfie(toggeter)</a></div> <div class="link link_right svelte-abgng1"><a class="a_button svelte-abgng1" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">現時点とこの先のこと</a></div> <!> <div class="debug_info svelte-abgng1"><span class="svelte-abgng1"> </span> <span class="user_agent_info svelte-abgng1"> </span> <span class="screen_info svelte-abgng1"> </span></div> <!></main>');function An(d,s){ct(s,!1);const t=new cr("stk_ygo_svelte",cn,dn);let v=ye(0),u=ye(0),c=ye(),_=ye("FtkChallenge"),l=ye("None"),Y=ye(0),V=ye(""),x=ye(void 0);const n="https://setta238.github.io/stk_ygo_svelte/",z="遊戯王deそりてあ",P="ninja_no",q=_r.getOrCreateNew(t).then(b=>(S(_,Ta.includes(b.previousGameMode)?b.previousGameMode:"FtkChallenge"),Ae(b.previousNpcId),b)),O=b=>{var T;const j=b.find(W=>W.lastUsedAt.getTime()===Math.max(...b.map(w=>w.lastUsedAt.getTime())))??b[0];S(Y,j.id),e(_)==="FtkChallenge"&&j.deckType!=="Preset"&&S(Y,((T=At.find(W=>W.deckType==="Preset"))==null?void 0:T.id)??e(Y))};let U=ye(kt.getAllDeckInfo(t).then(b=>(Promise.all(b.filter(j=>!j.lastUsedAt).map(j=>{j.saveDeckInfo()})),O(b),b)));const E=async()=>{const b=e(Y);let j=(await e(U)).find(W=>W.id===b)??(await ne()).find(W=>W.id===b);j&&await j.updateTimestamp();let T=j;if(T||(T=At.find(W=>W.id===b)),!T)throw new Error("illegal state");return T},re=async()=>{(await q).save({previousGameMode:e(_)})},ne=()=>(S(U,kt.getAllDeckInfo(t).then(b=>(O(b),b))),e(U)),je=async()=>{(await e(U)).length||(await kt.prepareSampleDeck(),ne())},C=async()=>{await Promise.all([re(),je()]);const b=await E(),j=await q;let T=qt.find(k=>k.id===Number.MIN_SAFE_INTEGER)??qt[0],W=At.find(k=>k.id===Number.MIN_SAFE_INTEGER)??At[0],w="PlayFirst";e(_)==="FtkChallenge"?T=qt.filter(k=>k.npcType==="FtkChallenge").find(k=>k.difficulty===j.previousDifficulty)??T:e(_)==="Free"&&(T=qt.find(k=>k.id===j.previousNpcId)??T,W=At.slice(-1)[0],w=j.previousStartMode),T.npcType!=="FtkChallenge"&&j.previousNpcDeckId>-1?W=(await e(U)).find(k=>k.id===j.previousNpcDeckId)??W:W=At.find(k=>k.id===T.id)??W,S(c,new fr(j,"Player",b,[],T,"NPC",W,[],w)),e(c).onDuelEnd.append(()=>(S(c,e(c)),"RemoveMe"))},$=async()=>{await Promise.all([re(),je()]),S(l,"DeckEdit")},X=async b=>{await re(),b.key==="Enter"&&!b.repeat&&(await q).save()},ce=()=>{S(U,ne()),S(c,void 0),S(l,"None")};let xe=Date.now();const ie=b=>{Date.now()-xe<200||(xe=Date.now(),S(_,b),ne())},le=b=>{Ae(Number(b.currentTarget.value))},Ae=b=>{var j;S(x,qt.find(T=>T.id===b)),S(V,((j=e(x))==null?void 0:j.description)??"")};je(),_t();var B=En(),F=i(a(B),2),G=a(F),ve=i(F,2);{var ke=b=>{var j=Te(),T=N(j);dt(T,()=>q,null,(W,w)=>{ls(W,{get duel(){return e(c)},get userProfile(){return e(w)}})}),r(b,j)},ue=b=>{var j=Te(),T=N(j);{var W=k=>{vn(k,{})},w=k=>{var Z=$n(),we=a(Z),$e=a(we),De=a($e);dt(De,()=>q,_e=>{var M=Cn();r(_e,M)},(_e,M)=>{var I=Dn(),Ce=N(I),Se=a(Ce),He=a(Se),Ne=i(Se),Ye=a(Ne),Pe=a(Ye),Ge=i(Ce,2);dt(Ge,()=>e(U),f=>{var g=kn();r(f,g)},(f,g)=>{var K=xn(),de=N(K),ee=a(de),ge=a(ee),me=i(ee),Ke=a(me);se(Ke,5,()=>Ta,oe,(Ze,Ue)=>{var qe=_n(),Fe=N(qe),Qe=i(Fe,2),lt=a(Qe);p(mt=>{pt(Fe,"id",`game_mode_radio_${mt??""}`),pr(Fe,e(Ue)),gr(Fe,e(_)===e(Ue)),Le(Qe,`game_mode_tab_label game_mode_tab_${mt??""} svelte-abgng1`),pt(Qe,"for",`game_mode_radio_${mt??""}`),m(lt,e(Ue))},[()=>e(Ue).toLowerCase()],pe),be("change",Fe,()=>ie(e(Ue))),r(Ze,qe)});var Ee=i(de,2),ze=a(Ee),et=a(ze),rt=i(ze),yt=a(rt),Ve=a(yt);p(()=>{e(Y),Ft(()=>{e(_),e(g)})}),se(Ve,5,()=>e(_)==="FtkChallenge"?At.filter(Ze=>Ze.deckType==="Preset"):e(g),oe,(Ze,Ue)=>{var qe=un(),Fe={},Qe=a(qe);p(()=>{Fe!==(Fe=e(Ue).id)&&(qe.value=(qe.__value=e(Ue).id)==null?"":e(Ue).id),m(Qe,e(Ue).name)}),r(Ze,qe)});var Ie=i(Ee,2);{var Xe=Ze=>{var Ue=bn(),qe=N(Ue),Fe=a(qe),Qe=a(Fe),lt=i(Fe),mt=a(lt),Tt=a(mt);p(()=>{e(M),Ft(()=>{})}),se(Tt,5,()=>qt,oe,(xt,st)=>{var ft=fn(),Bt={},Pt=a(ft);p(()=>{Bt!==(Bt=e(st).id)&&(ft.value=(ft.__value=e(st).id)==null?"":e(st).id),m(Pt,e(st).name)}),r(xt,ft)});var We=i(Tt,2),Oe=a(We),nt=i(qe,2);{var Je=xt=>{var st=gn(),ft=a(st),Bt=a(ft),Pt=i(ft),ma=a(Pt),ba=a(ma);p(()=>{e(M),Ft(()=>{e(g)})});var aa=a(ba);aa.value=(aa.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var qa=i(aa);se(qa,1,()=>e(g),oe,(ra,Kt)=>{var zt=pn(),ha={},Fa=a(zt);p(()=>{ha!==(ha=e(Kt).id)&&(zt.value=(zt.__value=e(Kt).id)==null?"":e(Kt).id),m(Fa,e(Kt).name)}),r(ra,zt)}),te(3,Bt,()=>fe,()=>({duration:200})),te(3,ft,()=>fe,()=>({duration:200})),Ht(ba,()=>e(M).previousNpcDeckId,ra=>e(M).previousNpcDeckId=ra),te(3,ma,()=>fe,()=>({duration:200})),te(3,Pt,()=>fe,()=>({duration:200})),te(3,st,()=>fe,()=>({duration:200})),r(xt,st)};y(nt,xt=>{var st;((st=e(x))==null?void 0:st.npcType)!=="FtkChallenge"&&xt(Je)})}var it=i(nt,2),ot=a(it),bt=a(ot),Nt=i(ot),pa=a(Nt),ga=a(pa);p(()=>{e(M),Ft(()=>{})}),se(ga,5,()=>va(ja),oe,(xt,st)=>{var ft=mn(),Bt={},Pt=a(ft);p(()=>{Bt!==(Bt=e(st))&&(ft.value=(ft.__value=e(st))==null?"":e(st)),m(Pt,ja[e(st)])}),r(xt,ft)}),p(()=>m(Oe,`※${e(V)??""}`)),te(3,Qe,()=>fe,()=>({duration:200})),te(3,Fe,()=>fe,()=>({duration:200})),be("change",Tt,le),Ht(Tt,()=>e(M).previousNpcId,xt=>e(M).previousNpcId=xt),te(3,mt,()=>fe,()=>({duration:200})),te(3,lt,()=>fe,()=>({duration:200})),te(3,qe,()=>fe,()=>({duration:200})),te(3,bt,()=>fe,()=>({duration:200})),te(3,ot,()=>fe,()=>({duration:200})),Ht(ga,()=>e(M).previousStartMode,xt=>e(M).previousStartMode=xt),te(3,pa,()=>fe,()=>({duration:200})),te(3,Nt,()=>fe,()=>({duration:200})),te(3,it,()=>fe,()=>({duration:200})),r(Ze,Ue)},gt=Ze=>{var Ue=Te(),qe=N(Ue);{var Fe=Qe=>{var lt=yn(),mt=a(lt),Tt=a(mt),We=i(mt),Oe=a(We),nt=a(Oe);p(()=>{e(M),Ft(()=>{})}),se(nt,5,()=>mr,oe,(Je,it)=>{var ot=hn(),bt={},Nt=a(ot);p(()=>{bt!==(bt=e(it))&&(ot.value=(ot.__value=e(it))==null?"":e(it)),m(Nt,e(it))}),r(Je,ot)}),te(3,Tt,()=>fe,()=>({duration:200})),te(3,mt,()=>fe,()=>({duration:200})),Ht(nt,()=>e(M).previousDifficulty,Je=>e(M).previousDifficulty=Je),te(3,Oe,()=>fe,()=>({duration:200})),te(3,We,()=>fe,()=>({duration:200})),te(3,lt,()=>fe,()=>({duration:200})),r(Qe,lt)};y(qe,Qe=>{e(_)==="FtkChallenge"&&Qe(Fe)},!0)}r(Ze,Ue)};y(Ie,Ze=>{e(_)==="Free"?Ze(Xe):Ze(gt,!1)})}var Mt=i(Ie,2),Ct=a(Mt),wt=a(Ct),jt=a(wt);te(3,ge,()=>fe,()=>({duration:200})),te(3,ee,()=>fe,()=>({duration:200})),te(3,Ke,()=>fe,()=>({duration:200})),te(3,me,()=>fe,()=>({duration:200})),te(3,de,()=>fe,()=>({duration:200})),te(3,et,()=>fe,()=>({duration:200})),te(3,ze,()=>fe,()=>({duration:200})),Ht(Ve,()=>e(Y),Ze=>S(Y,Ze)),te(3,yt,()=>fe,()=>({duration:200})),te(3,rt,()=>fe,()=>({duration:200})),te(3,Ee,()=>fe,()=>({duration:200})),be("click",jt,C),te(3,wt,()=>fe,()=>({duration:200})),r(f,K)});var Be=i(Ge,2);{var he=f=>{var g=wn(),K=a(g),de=a(K),ee=a(de);be("click",ee,$),te(3,de,()=>fe,()=>({duration:200})),te(3,K,()=>fe,()=>({duration:200})),te(3,g,()=>fe,()=>({duration:200})),r(f,g)};y(Be,f=>{e(_)==="Free"&&f(he)})}te(3,He,()=>fe,()=>({duration:200})),te(3,Se,()=>fe,()=>({duration:200})),Dt(Pe,()=>e(M).name,f=>e(M).name=f),be("keypress",Pe,X),te(3,Ye,()=>fe,()=>({duration:200})),te(3,Ne,()=>fe,()=>({duration:200})),te(3,Ce,()=>fe,()=>({duration:200})),r(_e,I)}),r(k,Z)};y(T,k=>{e(l)==="DeckEdit"?k(W):k(w,!1)},!0)}r(b,j)};y(ve,b=>{e(c)?b(ke):b(ue,!1)})}var A=i(ve,2),h=a(A),L=a(h),R=i(h,2),Q=a(R),D=i(R,2),H=a(D),J=i(A,2);{var ae=b=>{var j=Bn(),T=a(j);{var W=M=>{var I=Te(),Ce=N(I);{var Se=Ne=>{var Ye=Sn();r(Ne,Ye)},He=Ne=>{var Ye=Te(),Pe=N(Ye);{var Ge=Be=>{var he=Mn();r(Be,he)};y(Pe,Be=>{e(c).winner.seat==="Above"&&Be(Ge)},!0)}r(Ne,Ye)};y(Ce,Ne=>{e(c).winner.seat==="Below"?Ne(Se):Ne(He,!1)})}r(M,I)},w=M=>{var I=Tn();r(M,I)};y(T,M=>{e(c).winner?M(W):M(w,!1)})}var k=i(T,2),Z=a(k),we=i(k,2);{var $e=M=>{var I=jn(),Ce=a(I);p(()=>pt(Ce,"href",`https://x.com/share?url=${n}&text=${e(c).twitterShareText??""}&hashtags=${z}&via=${P}`)),r(M,I)};y(we,M=>{e(c).twitterShareText&&M($e)})}var De=i(we,2),_e=a(De);p(()=>m(Z,e(c).reasonOfEnd)),be("click",_e,ce),te(3,j,()=>yr,()=>({delay:200,duration:200})),r(b,j)};y(J,b=>{e(c)&&e(c).isEnded&&b(ae)})}p(()=>{m(L,"build at: 20260102_210719"),m(Q,ur.text),m(H,`w:${e(v)??""}px h:${e(u)??""}px`)}),Vt("innerWidth",b=>S(v,b)),Vt("innerHeight",b=>S(u,b)),be("click",G,ce),r(d,B),ut()}br(An,{target:document.getElementById("app")});
