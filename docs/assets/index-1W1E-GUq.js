var Ha=Object.defineProperty;var ka=d=>{throw TypeError(d)};var Oa=(d,i,t)=>i in d?Ha(d,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[i]=t;var lt=(d,i,t)=>Oa(d,typeof i!="symbol"?i+"":i,t),wa=(d,i,t)=>i.has(d)||ka("Cannot "+t);var pt=(d,i,t)=>(wa(d,i,"read from private field"),t?t.call(d):i.get(d)),Vt=(d,i,t)=>i.has(d)?ka("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(d):i.set(d,t),va=(d,i,t,v)=>(wa(d,i,"write to private field"),v?v.call(d,t):i.set(d,t),t);import{s as Ca,r as Ia,a as C,b as Ra,l as Wa,g as e,d as Na,p as yt,c as Ve,m as he,i as mt,t as n,e as a,f as h,h as g,j as de,k as Le,n as xt,o as ve,q as s,u as ht,v as ze,D as Ka,w as je,x as U,y as r,z as ne,A as Pt,B as te,C as oe,E as y,F as Va,G as dt,H as fa,I as Ga,J as Xa,K as qt,L as gt,M as Gt,N as Pa,O as pa,P as sa,Q as ga,R as Xt,S as ea,T as ia,U as na,V as Qa,W as Ja,X as Za,Y as er,Z as tr,_ as ar,$ as rr,a0 as ta,a1 as sr,a2 as ir,a3 as nr,a4 as Et,a5 as da,a6 as Tt,a7 as or,a8 as lr,a9 as vr,aa as Dt,ab as dr,ac as cr,ad as _r,ae as Da,af as $a,ag as Sa,ah as Ma,ai as za,aj as ja,ak as ur,al as At,am as $t,an as Rt,ao as Wt,ap as fr,aq as pr,ar as Ta,as as It,at as Nt,au as gr,av as yr,aw as mr,ax as Ba,ay as hr,az as br,aA as xr}from"../chunk/entity_proc_20260104_175649.js";import"../chunk/json_20260104_175649.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))v(p);new MutationObserver(p=>{for(const c of p)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&v(u)}).observe(document,{childList:!0,subtree:!0});function t(p){const c={};return p.integrity&&(c.integrity=p.integrity),p.referrerPolicy&&(c.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?c.credentials="include":p.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function v(p){if(p.ep)return;p.ep=!0;const c=t(p);fetch(p.href,c)}})();const kr=d=>d;function ya(d){const i=d-1;return i*i*i+1}function Ea(d){const i=typeof d=="string"&&d.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[d,"px"]}function wr(d,{delay:i=0,duration:t=400,easing:v=kr}={}){const p=+getComputedStyle(d).opacity;return{delay:i,duration:t,easing:v,css:c=>`opacity: ${c*p}`}}function Cr(d,{delay:i=0,duration:t=400,easing:v=ya,x:p=0,y:c=0,opacity:u=0}={}){const l=getComputedStyle(d),E=+l.opacity,R=l.transform==="none"?"":l.transform,D=E*(1-u),[S,o]=Ea(p),[L,X]=Ea(c);return{delay:i,duration:t,easing:v,css:(H,z)=>`
			transform: ${R} translate(${(1-H)*S}${o}, ${(1-H)*L}${X});
			opacity: ${E-D*z}`}}function fe(d,{delay:i=0,duration:t=400,easing:v=ya,axis:p="y"}={}){const c=getComputedStyle(d),u=+c.opacity,l=p==="y"?"height":"width",E=parseFloat(c[l]),R=p==="y"?["top","bottom"]:["left","right"],D=R.map(A=>`${A[0].toUpperCase()}${A.slice(1)}`),S=parseFloat(c[`padding${D[0]}`]),o=parseFloat(c[`padding${D[1]}`]),L=parseFloat(c[`margin${D[0]}`]),X=parseFloat(c[`margin${D[1]}`]),H=parseFloat(c[`border${D[0]}Width`]),z=parseFloat(c[`border${D[1]}Width`]);return{delay:i,duration:t,easing:v,css:A=>`overflow: hidden;opacity: ${Math.min(A*20,1)*u};${l}: ${A*E}px;padding-${R[0]}: ${A*S}px;padding-${R[1]}: ${A*o}px;margin-${R[0]}: ${A*L}px;margin-${R[1]}: ${A*X}px;border-${R[0]}-width: ${A*H}px;border-${R[1]}-width: ${A*z}px;min-${l}: 0`}}function Aa(d,i){for(const t in i)d[t]=i[t];return d}function Dr({fallback:d,...i}){const t=new Map,v=new Map;function p(u,l,E){const{delay:R=0,duration:D=T=>Math.sqrt(T)*30,easing:S=ya}=Aa(Aa({},i),E),o=u.getBoundingClientRect(),L=l.getBoundingClientRect(),X=o.left-L.left,H=o.top-L.top,z=o.width/L.width,A=o.height/L.height,le=Math.sqrt(X*X+H*H),be=getComputedStyle(l),$e=be.transform==="none"?"":be.transform,x=+be.opacity;return{delay:R,duration:typeof D=="function"?D(le):D,easing:S,css:(T,W)=>`
			   opacity: ${T*x};
			   transform-origin: top left;
			   transform: ${$e} translate(${W*X}px,${W*H}px) scale(${T+(1-T)*z}, ${T+(1-T)*A});
		   `}}function c(u,l,E){return(R,D)=>(u.set(D.key,R),()=>{if(l.has(D.key)){const S=l.get(D.key);return l.delete(D.key),p(S,R,D)}return u.delete(D.key),d&&d(R,D,E)})}return[c(v,t,!1),c(t,v,!0)]}function Ya(d){return Object.prototype.toString.call(d)==="[object Date]"}function $r(d){return d}function ca(d){const i=d-1;return i*i*i+1}function _a(d,i){if(d===i||d!==d)return()=>d;const t=typeof d;if(t!==typeof i||Array.isArray(d)!==Array.isArray(i))throw new Error("Cannot interpolate values of different type");if(Array.isArray(d)){const v=i.map((p,c)=>_a(d[c],p));return p=>v.map(c=>c(p))}if(t==="object"){if(!d||!i)throw new Error("Object cannot be null");if(Ya(d)&&Ya(i)){const c=d.getTime(),l=i.getTime()-c;return E=>new Date(c+E*l)}const v=Object.keys(i),p={};return v.forEach(c=>{p[c]=_a(d[c],i[c])}),c=>{const u={};return v.forEach(l=>{u[l]=p[l](c)}),u}}if(t==="number"){const v=i-d;return p=>d+p*v}return()=>i}var Bt,Kt,Qt,Ft;const ma=class ma{constructor(i,t={}){Vt(this,Bt,Ca(void 0));Vt(this,Kt,Ca(void 0));Vt(this,Qt);Vt(this,Ft,null);pt(this,Bt).v=pt(this,Kt).v=i,va(this,Qt,t)}static of(i,t){const v=new ma(i(),t);return Ia(()=>{v.set(i())}),v}set(i,t){var S;C(pt(this,Kt),i);let{delay:v=0,duration:p=400,easing:c=$r,interpolate:u=_a}={...pt(this,Qt),...t};if(p===0)return(S=pt(this,Ft))==null||S.abort(),C(pt(this,Bt),i),Promise.resolve();const l=Ra.now()+v;let E,R=!1,D=pt(this,Ft);return va(this,Ft,Wa(o=>{if(o<l)return!0;if(!R){R=!0;const X=pt(this,Bt).v;E=u(X,i),typeof p=="function"&&(p=p(X,i)),D==null||D.abort()}const L=o-l;return L>p?(C(pt(this,Bt),i),!1):(C(pt(this,Bt),E(c(L/p))),!0)})),pt(this,Ft).promise}get current(){return e(pt(this,Bt))}get target(){return e(pt(this,Kt))}set target(i){this.set(i)}};Bt=new WeakMap,Kt=new WeakMap,Qt=new WeakMap,Ft=new WeakMap;let aa=ma;var Sr=n('<div class="phase_display svelte-1ycsdg6"><span class="svelte-1ycsdg6"> </span> </div>'),Mr=n('<div class="lifepoint_display svelte-1ycsdg6"><div class="svelte-1ycsdg6"> </div> <div class="svelte-1ycsdg6"> </div></div>'),zr=(d,i,t)=>i(e(t)),jr=n('<div class="svelte-1ycsdg6"><button class="phase_button svelte-1ycsdg6"> </button></div>'),Tr=n("<div><!></div>"),Br=n('<div class="svelte-1ycsdg6"><!></div>'),Er=n("<div><!></div>"),Ar=n('<div class="config_button_wrapper svelte-1ycsdg6"><button id="config_button" class="svelte-1ycsdg6">⚙</button></div>'),Yr=n("<!> <!> <!> <!>",1),Ur=n('<div style="position: absolute;" class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Lr=n('<div style="position: absolute; top:0rem" class="svelte-1ycsdg6">｛効果対象｝</div>'),Nr=n('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Pr=n(" <!> 】",1),qr=n('<div style="position: absolute; bottom:0rem" class="svelte-1ycsdg6"> <!></div>'),Fr=n("<!> <!>",1),Hr=n('<div class="badge svelte-1ycsdg6"> </div>'),Or=n('<div class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Ir=n("<!> <!> <!> <!>",1),Rr=n('<td><div role="listitem"><!></div></td>');function Wr(d,i){yt(i,!1);let t=Ve(i,"view",12),v=Ve(i,"row",8),p=Ve(i,"column",8),c=Ve(i,"selectedEntities",28,()=>[]),u=Ve(i,"selectedCells",28,()=>[]),l=he(t().getCell(v(),p())),E=he(new aa(e(l).field.duel.duelists.Above.lp,{duration:400,easing:ca})),R=he(new aa(e(l).field.duel.duelists.Below.lp,{duration:400,easing:ca}));const D=()=>{C(l,t().getCell(v(),p())),ze(E,e(E).target=e(l).field.duel.duelists.Above.lp),ze(R,e(R).target=e(l).field.duel.duelists.Below.lp)};e(l).onUpdate.append(D),t().onDuelUpdate.append(D),t().modalController.onUpdate.append(D);let S,o=he([]),L=()=>console.log("hoge"),X,H=he([]),z=he(!1),A=he(!1),le=!1;const be=$=>{var j,N;C(ae,[]),c().reset(),S=$.activator,L=$.resolve,C(o,$.dummyActionInfos),C(H,$.chainBlockInfos.flatMap(ee=>ee.selectedEntities).getDistinct()),X=$.entitiesChoices,C(z,!1),C(A,((j=$.cellsChoices)==null?void 0:j.selectables.includes(e(l)))??!1),le=e(A)&&((N=$.cellsChoices)==null?void 0:N.qty)===1,D()};t().onWaitStart.append(be);const $e=()=>{S=void 0,C(o,[]),L=()=>{console.log("hoge")},X=void 0,C(H,[]),C(z,!1),C(A,!1),le=!1};t().onWaitEnd.append($e);let x=he(!1),T=[];const W=$=>{T=$.filter(j=>j.dests.includes(e(l))),C(x,T.length>0),D()},J=()=>{T=[],C(x,!1),D()};t().onDragStart.append(W),t().onDragEnd.append(J);const[ke,se]=ti;let ae=he([]);const Te=$=>{if(S=void 0,e(l)===$.to||e(l).entities.includes($.entity)){C(ae,[...e(ae),$]);const j=$.resolve;C(l,e(l)),setTimeout(()=>{C(ae,e(ae).filter(N=>N!==$)),$.count++,$.count>1&&j()},600)}};t().onAnimation.append(Te);const B=$=>{L({phaseChange:$})},F=()=>e(l).isStackCell&&e(l).entities.flatMap($=>$.actions).filter($=>e(o).map(j=>j.action.seq).some(j=>j===$.seq)).length>0,K=$=>{var j;if(((j=$.target)==null?void 0:j.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),le)L({selectedCells:[e(l)]});else if(e(A))C(z,!e(z)),u(e(z)?[...u(),e(l)]:u().filter(N=>N!==e(l)));else if(e(l).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(l),!0),t().requireUpdate();const N=e(l).entities.flatMap(re=>re.actions).map(re=>re.seq),ee=e(o).filter(re=>N.includes(re.action.seq));if(ee.length){if(!S)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:S,dummyActionInfos:ee,cancelable:!0}).then(re=>{re&&L({actionInfo:re})});return}}t().requireUpdate(),console.info(e(l),_e(...e(l).visibleEntities))},ce=$=>{$.preventDefault(),$.dataTransfer&&($.dataTransfer.dropEffect="move")},we=$=>{$.preventDefault(),console.info("drop",$,e(x),T),$.dataTransfer&&($.dataTransfer.dropEffect="move");try{if(e(x)&&T){if(T.length===1){const j=T[0];L({actionInfo:{...j,dest:e(l)}})}else if(T.length>1){if(!S)throw new Ka("想定されない状態");e(l).field.duel.view.modalController.terminateAll(),e(l).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:S,dummyActionInfos:T.map(j=>({...j,dest:e(l)})),cancelable:!1}).then(j=>{L({actionInfo:j})})}}}finally{t().removeDraggingActions()}},_e=(...$)=>{if(t().waitMode==="Animation")return"Disabled";if(X&&X.selectables.find(N=>$.find(ee=>N===ee)))return"Selectable";if(!e(o)||e(o).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(N=>N.state==="Shown"))return"Disabled";const j=e(o).filter(N=>$.includes(N.action.entity));return j.length===0?"Disabled":e(l).isStackCell||j[0].action.entity!==$[0]?"Clickable":j.some(N=>N.dests.length)?"Draggable":"Clickable"};mt();var Y=Rr(),b=a(Y);b.__click=K;var I=a(b);{var Z=$=>{var j=je(),N=U(j);{var ee=re=>{var me=je(),f=U(me);{var w=m=>{var P=Sr(),q=a(P),xe=a(q),pe=r(q,1,!0);g((ue,Q)=>{y(xe,ue),y(pe,Q)},[()=>String(e(l).field.duel.clock.turn).padStart(2,"0"),()=>e(l).field.duel.phase.toUpperCase()],de),s(m,P)},_=m=>{var P=je(),q=U(P);{var xe=ue=>{var Q=Mr(),V=a(Q),O=a(V),ge=r(V,2),Re=a(ge);g((We,Fe)=>{y(O,We),y(Re,Fe)},[()=>Math.floor(e(E).current),()=>Math.floor(e(R).current)],de),s(ue,Q)},pe=ue=>{var Q=je(),V=U(Q);{var O=ge=>{var Re=je(),We=U(Re);{var Fe=Ne=>{var Xe=je(),Ae=U(Xe);{var ye=Ce=>{var Ye=je(),Oe=U(Ye);ne(Oe,1,()=>t().duel.nextPhaseList,oe,(Ke,Se)=>{var Be=jr(),k=a(Be);k.__click=[zr,B,Se];var M=a(k);g(G=>y(M,G),[()=>e(Se).toUpperCase()],de),s(Ke,Be)}),s(Ce,Ye)};h(Ae,Ce=>{t().duel.isEnded||Ce(ye)})}s(Ne,Xe)};h(We,Ne=>{t().waitMode==="Free"&&Ne(Fe)})}s(ge,Re)};h(V,ge=>{e(l).column===5&&ge(O)},!0)}s(ue,Q)};h(q,ue=>{e(l).column===3?ue(xe):ue(pe,!1)},!0)}s(m,P)};h(f,m=>{e(l).column===1?m(w):m(_,!1)})}s(re,me)};h(N,re=>{e(l).row===3&&re(ee)})}s($,j)},ie=$=>{var j=je(),N=U(j);{var ee=me=>{var f=Yr();const w=de(()=>e(ae).find(Q=>Q.to===e(l)));var _=U(f);{var m=Q=>{var V=Tr(),O=a(V);Pt(O,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),g(()=>Le(V,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),te(1,V,()=>se,()=>({key:e(w).entity.seq})),s(Q,V)};h(_,Q=>{e(w)&&e(w).index==="Top"&&Q(m)})}var P=r(_,2);ne(P,1,()=>e(l).visibleEntities,oe,(Q,V)=>{var O=je(),ge=U(O);{var Re=We=>{var Fe=Br(),Ne=a(Fe);const Xe=de(()=>_e(e(V))),Ae=de(()=>e(o).filter(ye=>ye.action.entity===e(V)));Pt(Ne,{get entity(){return e(V)},get state(){return e(Xe)},get dummyActionInfos(){return e(Ae)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(ye){c(ye)},$$legacy:!0}),te(2,Fe,()=>ke,()=>({key:e(V).seq})),s(We,Fe)};h(ge,We=>{e(ae).every(Fe=>Fe.entity.seq!==e(V).seq)&&We(Re)})}s(Q,O)});var q=r(P,2);{var xe=Q=>{var V=Er(),O=a(V);Pt(O,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),g(()=>Le(V,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),te(1,V,()=>se,()=>({key:e(w).entity.seq})),s(Q,V)};h(q,Q=>{e(w)&&e(w).index!=="Top"&&Q(xe)})}var pe=r(q,2);{var ue=Q=>{var V=Ar();s(Q,V)};h(pe,Q=>{e(l).owner.seat==="Below"&&Q(ue)})}s(me,f)},re=me=>{var f=Ir();const w=de(()=>e(ae).find(V=>V.to===e(l)));var _=U(f);{var m=V=>{var O=Ur(),ge=a(O);Pt(ge,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),te(1,O,()=>se,()=>({key:e(w).entity.seq})),s(V,O)};h(_,V=>{e(w)&&e(w).index!=="Top"&&V(m)})}var P=r(_,2);{var q=V=>{var O=Fr(),ge=U(O);ne(ge,1,()=>e(l).visibleEntities.map((Fe,Ne)=>({index:Ne,entity:Fe})).toReversed(),oe,(Fe,Ne)=>{var Xe=je(),Ae=U(Xe);{var ye=Ce=>{var Ye=Nr();const Oe=de(()=>!e(l).isStackCell&&e(Ne).index===0?_e(...e(l).visibleEntities):void 0);var Ke=U(Ye);{var Se=G=>{var De=Lr();s(G,De)};h(Ke,G=>{e(H).includes(e(Ne).entity)&&G(Se)})}var Be=r(Ke,2),k=a(Be);const M=de(()=>e(Ne).index===0?e(o).filter(G=>e(l).visibleEntities.includes(G.action.entity)):void 0);Pt(k,{get entity(){return e(Ne).entity},get state(){return e(Oe)},get dummyActionInfos(){return e(M)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(G){c(G)},$$legacy:!0}),g(()=>Le(Be,`duel_card_wrapper ${(e(Ne).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1ycsdg6`)),te(2,Be,()=>ke,()=>({key:e(Ne).entity.seq})),s(Ce,Ye)};h(Ae,Ce=>{e(ae).every(Ye=>Ye.entity.seq!==e(Ne).entity.seq)&&Ce(ye)})}s(Fe,Xe)});var Re=r(ge,2);{var We=Fe=>{var Ne=qr(),Xe=a(Ne),Ae=r(Xe);ne(Ae,1,()=>fa(e(l).visibleEntities[0].status.maxCounterQty),oe,(ye,Ce)=>{var Ye=Pr(),Oe=U(Ye),Ke=r(Oe);{var Se=Be=>{var k=dt();g(()=>y(k,`/${e(l).visibleEntities[0].status.maxCounterQty[e(Ce)]??""}`)),s(Be,k)};h(Ke,Be=>{(e(l).visibleEntities[0].status.maxCounterQty[e(Ce)]??9999)<100&&Be(Se)})}g((Be,k)=>y(Oe,`【
              ${Be??""}${k??""} `),[()=>Va(e(Ce)),()=>e(l).visibleEntities[0].counterHolder.getQty(e(Ce))],de),s(ye,Ye)}),g(()=>y(Xe,`【${e(l).visibleEntities[0].battlePositionName??""}】 `)),s(Fe,Ne)};h(Re,Fe=>{e(l).visibleEntities[0].battlePosition&&Fe(We)})}s(V,O)};h(P,V=>{e(l).visibleEntities.length>0&&V(q)})}var xe=r(P,2);{var pe=V=>{var O=Hr(),ge=a(O);g(()=>y(ge,e(l).visibleEntities.length)),s(V,O)};h(xe,V=>{e(l).isStackCell&&V(pe)})}var ue=r(xe,2);{var Q=V=>{var O=Or(),ge=a(O);Pt(ge,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),te(1,O,()=>se,()=>({key:e(w).entity.seq})),s(V,O)};h(ue,V=>{e(w)&&e(w).index==="Top"&&V(Q)})}s(me,f)};h(N,me=>{e(l).cellType==="Hand"?me(ee):me(re,!1)},!0)}s($,j)};h(I,$=>{e(l).isDisabledCell?$(Z):$(ie,!1)})}g($=>{Le(Y,`${`duel_field_cell duel_field_cell_${e(l).cellType} ${e(l).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1ycsdg6`),xt(Y,"colspan",e(l).cellType==="Hand"?7:1),Le(b,`${$??""} svelte-1ycsdg6`)},[()=>`duel_field_cell_inner_box ${e(l).cellType} ${e(x)?"can_accept_drop":""} ${F()?"can_action":""} ${e(z)?"is_selected":e(A)?"is_selectable":""} `],de),ve("dragover",b,ce),ve("drop",b,we),s(d,Y),ht()}Na(["click"]);const Kr=(d,i,t=void 0,v="!!!circular reference!!!")=>{let p=[];return JSON.stringify(d,(c,u)=>{if(typeof u=="object"){if(p.indexOf(u)>-1)return v;p.push(u)}let l=u;if(i&&(l=i(c,u)),typeof l=="function")return l.toString();if(l!==u&&typeof l=="object"){if(p.indexOf(l)>-1)return v;p.push(l)}return l},t)};var Vr=n('<div class="title svelte-14z6bdh"> </div>'),Gr=n('<div class="title svelte-14z6bdh"> </div>'),Xr=n('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),Qr=n('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),Jr=n("<div><!> <!></div>"),Zr=n('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),es=n("<div><!> <!></div>"),ts=n("<div><!> <!></div>"),as=n('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function rs(d,i){yt(i,!1);let t=he(void 0),v=Ve(i,"log",8),p,c=he([]);const u=()=>{const D=((p==null?void 0:p.seq)??-1)+1;v().records.slice(D).forEach(S=>{if(!p){C(c,[[[[S]]]]),p=S;return}if(!e(c)[S.clock.turn]){ze(c,e(c)[S.clock.turn]=[[[S]]]),p=S;return}if(!e(c)[S.clock.turn][S.clock.phaseSeq]){ze(c,e(c)[S.clock.turn][S.clock.phaseSeq]=[[S]]),p=S;return}if(p.clock.chainSeq===S.clock.chainSeq&&p.clock.chainBlockSeq===S.clock.chainBlockSeq&&p.duelist===S.duelist){e(c)[S.clock.turn][S.clock.phaseSeq].slice(-1)[0].push(S),p=S;return}e(c)[S.clock.turn][S.clock.phaseSeq].push([S]),p=S}),C(c,e(c)),Ga().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};v().onUpdate.append(u),v().duel.view.onDuelUpdate.append(u),u(),mt();var l=je(),E=U(l);{var R=D=>{var S=as(),o=r(a(S),2);ne(o,5,()=>e(c),oe,(L,X)=>{var H=ts(),z=a(H);{var A=be=>{var $e=Vr(),x=a($e);g(()=>y(x,`ターン：${e(X)[0][0][0].clock.turn??""}`)),s(be,$e)};h(z,be=>{e(X)[0][0][0].clock.turn>0&&be(A)})}var le=r(z,2);ne(le,1,()=>e(X),oe,(be,$e)=>{var x=es(),T=a(x);{var W=ke=>{var se=Gr(),ae=a(se);g(()=>y(ae,e($e)[0][0].clock.period.name)),s(ke,se)};h(T,ke=>{e($e)[0][0].clock.turn>0&&ke(W)})}var J=r(T,2);ne(J,1,()=>e($e),oe,(ke,se)=>{var ae=Zr();const Te=de(()=>{var Y;return((Y=e(se).find(b=>b.chainNumber!==void 0))==null?void 0:Y.chainNumber)??0});var B=a(ae),F=a(B),K=a(F),ce=r(F,2);{var we=Y=>{var b=Xr(),I=a(b);g(()=>y(I,`チェーン：${e(Te)??""}`)),s(Y,b)};h(ce,Y=>{e(Te)&&Y(we)})}var _e=r(B,2);ne(_e,1,()=>e(se),oe,(Y,b)=>{var I=Jr(),Z=a(I);{var ie=ee=>{var re=dt();g(()=>y(re,e(b).text)),s(ee,re)},$=ee=>{var re=je(),me=U(re);{var f=_=>{var m=dt();g((P,q,xe)=>y(m,`移動：${P??""} ${q??""} ⇒ ${xe??""}`),[()=>{var P;return(P=e(b).mainEntity)==null?void 0:P.toString()},()=>{var P;return(P=e(b).from)==null?void 0:P.toString()},()=>{var P;return(P=e(b).to)==null?void 0:P.toString()}],de),s(_,m)},w=_=>{var m=je(),P=U(m);{var q=pe=>{var ue=dt();g((Q,V)=>y(ue,`生成：${Q??""} void ⇒ ${V??""}`),[()=>{var Q;return(Q=e(b).mainEntity)==null?void 0:Q.toString()},()=>{var Q;return(Q=e(b).to)==null?void 0:Q.toString()}],de),s(pe,ue)},xe=pe=>{var ue=je(),Q=U(ue);{var V=ge=>{var Re=dt();g((We,Fe)=>y(Re,`消滅：${We??""} ${Fe??""} ⇒ void`),[()=>{var We;return(We=e(b).mainEntity)==null?void 0:We.toString()},()=>{var We;return(We=e(b).from)==null?void 0:We.toString()}],de),s(ge,Re)},O=ge=>{var Re=dt();g(()=>y(Re,e(b).text)),s(ge,Re)};h(Q,ge=>{e(b).type==="EntityDisappear"?ge(V):ge(O,!1)},!0)}s(pe,ue)};h(P,pe=>{e(b).type==="EntityAppear"?pe(q):pe(xe,!1)},!0)}s(_,m)};h(me,_=>{e(b).type==="EntityMove"?_(f):_(w,!1)},!0)}s(ee,re)};h(Z,ee=>{e(b).type==="ChainBlockHeader"?ee(ie):ee($,!1)})}var j=r(Z,2);{var N=ee=>{var re=Qr(),me=a(re);g(f=>xt(me,"href",f),[()=>window.URL.createObjectURL(new Blob([Kr(e(b).error,(f,w)=>["pool","bundles","duel"].includes(f)||typeof w=="function"?void 0:w,4)],{type:"text/plain"}))],de),s(ee,re)};h(j,ee=>{e(b).error&&ee(N)})}g(ee=>Le(I,`duel_log_record duel_log_record_${ee??""} svelte-14z6bdh`),[()=>e(b).type.toSnakeCase()],de),s(Y,I)}),g(()=>{var Y,b,I;Le(ae,`duel_log_block_duelist duel_log_block_duelist_${((Y=e(se)[0].duelist)==null?void 0:Y.seat)??"system"} svelte-14z6bdh`),Le(F,`duelist ${((b=e(se)[0].duelist)==null?void 0:b.seat)??""} svelte-14z6bdh`),y(K,((I=e(se)[0].duelist)==null?void 0:I.profile.name)||"SYSTEM")}),s(ke,ae)}),g(()=>Le(x,`duel_log_block_phase duel_log_block_phase_${e($e)[0][0].clock.period.key??""} svelte-14z6bdh`)),s(be,x)}),g(()=>Le(H,`duel_log_block_turn duel_log_block_turn_${e(X)[0][0][0].clock.turn??""} svelte-14z6bdh`)),s(L,H)}),Xa(o,L=>C(t,L),()=>e(t)),s(D,S)};h(E,D=>{(v().duel.view.infoBoardState==="Log"||v().duel.view.infoBoardState==="Default")&&D(R)})}s(d,l),ht()}var ss=n("<div><div> </div> <div> </div></div>");function Ua(d,i){yt(i,!1);let t=Ve(i,"duelist",12),v=he(0),p=he();const c=async()=>{const o=t().lp-e(v);if(!e(p)||Math.abs(o)<10){C(v,t().lp),e(p)&&(e(p)(),C(p,void 0));return}C(v,e(v)+Math.floor(Math.random()*o)),await qt(100),c()},u=()=>{t(t()),!e(p)&&t().lp!==e(v)&&new Promise(o=>{C(p,o),Math.abs(t().lp-e(v)),c()})};t().duel.log.onUpdate.append(u),c(),mt();var l=ss(),E=a(l),R=a(E),D=r(E,2),S=a(D);g(o=>{Le(l,`duelist duelist_${o??""} svelte-1sy3trd`),Le(E,`duelist_name duelist_${o??""}_name svelte-1sy3trd`),y(R,t().profile.name),Le(D,`duelist_lp ${(e(p)?"vibration":"")??""} svelte-1sy3trd`),y(S,e(v))},[()=>t().seat.toLowerCase()],de),s(d,l),ht()}const is=(d,i,t)=>(i(i()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),ns=(d,i,t)=>(i(i()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var os=n('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),ls=n('<div></div> <div class="svelte-1uevs9j"> </div>',1),vs=n("<div> </div>"),ds=n('<span class="svelte-1uevs9j">/</span> <div class="monster_defense svelte-1uevs9j"> </div>',1),cs=n("<div> </div>"),_s=n('<div class="duel_card_info_row svelte-1uevs9j"><!> <!> <div style="flex-grow: 1;" class="svelte-1uevs9j"></div> <div class="monster_attack svelte-1uevs9j"> </div> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),us=n('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),fs=n('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),ps=n("<!> <!>",1),gs=n('<pre class="description svelte-1uevs9j"> </pre>'),ys=n('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),ms=n('<pre class="description svelte-1uevs9j"> </pre>'),hs=n('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),bs=n('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),xs=n('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),ks=n("[ <!> ],",1),ws=n('<div class="svelte-1uevs9j"> <!></div>'),Cs=n('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),Ds=n('<div class="svelte-1uevs9j"> </div>'),$s=n('<div class="svelte-1uevs9j"> </div>'),Ss=n('<div class="svelte-1uevs9j"> </div>'),Ms=n('<div class="svelte-1uevs9j"> </div>'),zs=n('<div class="svelte-1uevs9j"> </div>'),js=n('<div class="svelte-1uevs9j"> </div>'),Ts=n('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Bs=n('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Es=n('<div class="svelte-1uevs9j">※テスト用カードです</div>'),As=n('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),Ys=n('<div class="duel_card_info_links svelte-1uevs9j"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a> <!></div>'),Us=n("<!> <!>",1),Ls=n('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Ns(d,i){yt(i,!1);let t=Ve(i,"entity",8,void 0),v=Ve(i,"mode",12,"Normal");const p=async()=>{if(!t())return;const D=(await Gt).getCardInfo(t().origin.name);if(D)return D.cardId!==void 0&&!D.description&&!D.pendulumDescription&&await Pa([D.cardId]),D},c=()=>t()&&t().entityType==="Card"&&(t().origin.cardId??!1)?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t().origin.cardId}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:"";mt();var u=je(),l=U(u);{var E=R=>{var D=Ls();D.__click=[is,v,t],D.__contextmenu=[ns,v,t];var S=a(D),o=a(S),L=a(o),X=a(L),H=r(o,2),z=a(H),A=a(z),le=r(z,2),be=a(le),$e=r(H,2);{var x=B=>{var F=ps(),K=U(F);{var ce=b=>{var I=os(),Z=a(I),ie=a(Z),$=r(Z,2),j=a($);g(()=>{y(ie,`◀ ${t().psL??""}`),y(j,`${t().psR??""} ▶`)}),s(b,I)};h(K,b=>{var I;(I=t().origin.monsterCategories)!=null&&I.includes("Pendulum")&&b(ce)})}var we=r(K,2);{var _e=b=>{var I=_s(),Z=U(I),ie=a(Z);ne(ie,1,()=>t().attr,oe,(f,w)=>{var _=ls(),m=U(_),P=r(m,2),q=a(P);g(()=>{Le(m,`monster_attr ${e(w)??""} svelte-1uevs9j`),y(q,`${pa[e(w)]??""}属性`)}),s(f,_)});var $=r(ie,2);ne($,1,()=>t().types,oe,(f,w)=>{var _=vs(),m=a(_);g(()=>{Le(_,`monster_cat ${e(w)??""} svelte-1uevs9j`),y(m,`${sa[e(w)]??""}${ga[e(w)]??""}族`)}),s(f,_)});var j=r($,4),N=a(j),ee=r(j,2);{var re=f=>{var w=ds(),_=r(U(w),2),m=a(_);g(()=>y(m,t().def??"?")),s(f,w)};h(ee,f=>{var w;(w=t().status.monsterCategories)!=null&&w.includes("Link")||f(re)})}var me=r(Z,2);ne(me,5,()=>t().status.monsterCategories??[],oe,(f,w)=>{var _=cs(),m=a(_);g(()=>{Le(_,`monster_cat ${e(w)??""} svelte-1uevs9j`),y(m,`${Xt[e(w)]??""}${ea[e(w)]??""}`)}),s(f,_)}),g(()=>y(N,t().atk??"?")),s(b,I)},Y=b=>{var I=je(),Z=U(I);{var ie=j=>{var N=us(),ee=r(a(N),2),re=a(ee);g(()=>y(re,`${ia[t().status.spellCategory]??""}魔法`)),s(j,N)},$=j=>{var N=je(),ee=U(N);{var re=me=>{var f=fs(),w=r(a(f),2),_=a(w);g(()=>y(_,`${na[t().status.trapCategory]??""}罠`)),s(me,f)};h(ee,me=>{t().kind==="Trap"&&t().status.trapCategory&&me(re)},!0)}s(j,N)};h(Z,j=>{t().kind==="Spell"&&t().status.spellCategory?j(ie):j($,!1)},!0)}s(b,I)};h(we,b=>{t().kind==="Monster"?b(_e):b(Y,!1)})}s(B,F)};h($e,B=>{v()!=="Debug"&&B(x)})}var T=r(S,2),W=a(T);{var J=B=>{var F=hs(),K=U(F);{var ce=Y=>{var b=ys(),I=a(b);gt(I,p,Z=>{var ie=dt('"読み込み中"');s(Z,ie)},(Z,ie)=>{var $=gs(),j=a($);g(()=>{var N;return y(j,(N=e(ie))==null?void 0:N.pendulumDescription)}),s(Z,$)}),s(Y,b)};h(K,Y=>{var b;(b=t().status.monsterCategories)!=null&&b.includes("Pendulum")&&Y(ce)})}var we=r(K,2),_e=a(we);gt(_e,p,Y=>{var b=dt('"読み込み中"');s(Y,b)},(Y,b)=>{var I=ms(),Z=a(I);g(()=>{var ie;return y(Z,(ie=e(b))==null?void 0:ie.description)}),s(Y,I)}),s(B,F)},ke=B=>{var F=je(),K=U(F);{var ce=_e=>{var Y=je(),b=U(Y);{var I=Z=>{var ie=xs(),$=r(a(ie),2);ne($,5,()=>t().actions,oe,(j,N)=>{var ee=je();const re=de(()=>e(N).actionCountUpperBound),me=de(()=>e(N).actionCount);var f=U(ee);{var w=_=>{var m=bs(),P=a(m),q=a(P),xe=r(P,2),pe=a(xe),ue=r(xe,4),Q=a(ue);g(()=>{y(q,e(N).title),y(pe,e(me)),y(Q,e(re))}),s(_,m)};h(f,_=>{e(re)!==void 0&&e(me)!==void 0&&_(w)})}s(j,ee)}),s(Z,ie)};h(b,Z=>{t().actions.some(ie=>ie.actionCountUpperBoundKey)&&Z(I)})}s(_e,Y)},we=_e=>{var Y=Ts(),b=a(Y),I=a(b);ne(I,0,()=>["info","status"],oe,(Ae,ye)=>{var Ce=Cs(),Ye=U(Ce),Oe=a(Ye),Ke=r(Ye,2);ne(Ke,1,()=>Object.entries(t()[ye]),oe,(Be,k)=>{let M=()=>e(k)[0],G=()=>e(k)[1];var De=ws(),Ie=a(De),Ge=r(Ie);{var Ue=Me=>{var He=ks(),Qe=r(U(He));ne(Qe,1,G,oe,(ct,Yt)=>{var St=dt();g(Mt=>y(St,`${Mt??""},`),[()=>e(Yt).toString()],de),s(ct,St)}),s(Me,He)},qe=Me=>{var He=dt();g(Qe=>y(He,`${Qe??""},`),[()=>{var Qe;return(Qe=G())==null?void 0:Qe.toString()}],de),s(Me,He)};h(Ge,Me=>{Array.isArray(G())?Me(Ue):Me(qe,!1)})}g(()=>y(Ie,`"${M()??""}" : `)),s(Be,De)});var Se=r(Ke,2);Se.textContent="},",g(()=>y(Oe,`"${ye??""}" :{`)),s(Ae,Ce)});var Z=r(I,2);Z.textContent='"actions" :[';var ie=r(Z,2);ne(ie,1,()=>t().actions,oe,(Ae,ye)=>{var Ce=Ds(),Ye=a(Ce);g(()=>y(Ye,`"${e(ye).playType??""} ${e(ye).title??""}",`)),s(Ae,Ce)});var $=r(ie,2);$.textContent="],";var j=r($,2);j.textContent='"substituteEffects" :[';var N=r(j,2);ne(N,1,()=>t().substituteEffects,oe,(Ae,ye)=>{var Ce=$s(),Ye=a(Ce);g(()=>y(Ye,`"${e(ye).title??""}",`)),s(Ae,Ce)});var ee=r(N,2);ee.textContent="],";var re=r(ee,2);re.textContent='"continuousEffects" :[';var me=r(re,2);ne(me,1,()=>t().continuousEffects,oe,(Ae,ye)=>{var Ce=Ss(),Ye=a(Ce);g(()=>y(Ye,`"${e(ye).isStarted??""}",`)),s(Ae,Ce)});var f=r(me,2);f.textContent="],";var w=r(f,2);w.textContent='"procFilters" :[';var _=r(w,2);ne(_,1,()=>t().procFilterBundle.operators,oe,(Ae,ye)=>{var Ce=Ms(),Ye=a(Ce);g(Oe=>y(Ye,`"${Oe??""} ${e(ye).title??""} ${e(ye).isEffective??""} ",`),[()=>e(ye).isSpawnedBy.toString()],de),s(Ae,Ce)});var m=r(_,2);m.textContent="],";var P=r(m,2);P.textContent='"numericStateOperators" :[';var q=r(P,2);ne(q,1,()=>t().numericOprsBundle.operators,oe,(Ae,ye)=>{var Ce=zs(),Ye=a(Ce);g(Oe=>y(Ye,`"${Oe??""} ${e(ye).title??""} ${e(ye).isEffective??""} ${e(ye).isContinuous??""} ${e(ye).targetState??""} ${e(ye).targetStateGen??""} ",`),[()=>e(ye).isSpawnedBy.toString()],de),s(Ae,Ce)});var xe=r(q,2);xe.textContent="],";var pe=r(xe,2);pe.textContent='"stateOperators" :[';var ue=r(pe,2);ne(ue,1,()=>t().statusOperatorBundle.operators,oe,(Ae,ye)=>{var Ce=js(),Ye=a(Ce);g(Oe=>y(Ye,`"${Oe??""} ${e(ye).title??""} ${e(ye).isEffective??""} ",`),[()=>e(ye).isSpawnedBy.toString()],de),s(Ae,Ce)});var Q=r(ue,2);Q.textContent="],";var V=r(Q,2);V.textContent='"lastMoveLogRecord" :{';var O=r(V,2),ge=a(O),Re=r(O,2),We=a(Re),Fe=r(Re,2),Ne=a(Fe),Xe=r(Fe,2);Xe.textContent="},",g((Ae,ye)=>{y(ge,`"movedBy":"${Ae??""}",`),y(We,`"movedAs":"${ye??""}",`),y(Ne,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var Ae;return(Ae=t().moveLog.latestRecord.movedBy)==null?void 0:Ae.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],de),s(_e,Y)};h(K,_e=>{v()==="Detail"?_e(ce):_e(we,!1)},!0)}s(B,F)};h(W,B=>{v()==="Normal"?B(J):B(ke,!1)})}var se=r(T,2),ae=a(se);{var Te=B=>{var F=Us(),K=U(F);{var ce=b=>{var I=Bs();s(b,I)};h(K,b=>{t().origin.isOldVersion&&b(ce)})}var we=r(K,2);{var _e=b=>{var I=Es();s(b,I)},Y=b=>{var I=Ys(),Z=a(I),ie=r(Z,2);{var $=j=>{var N=As(),ee=a(N);g(re=>{var me;xt(N,"href",re),y(ee,`⇒${((me=t())!=null&&me.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[c],de),s(j,N)};h(ie,j=>{t()&&t().entityType==="Card"&&j($)})}g(()=>xt(Z,"href",`https://yugioh-wiki.net/index.php?${t().origin.wikiEncodedName}`)),s(b,I)};h(we,b=>{t().origin.isForTest?b(_e):b(Y,!1)})}s(B,F)};h(ae,B=>{t()&&B(Te)})}g((B,F,K)=>{Le(D,`duel_card duel_card_info ${t().origin.kind??""} ${B??""} svelte-1uevs9j`),y(X,t().nm),y(A,F),y(be,K)},[()=>{var B;return(B=t().origin.monsterCategories)==null?void 0:B.join(" ")},()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],de),s(R,D)};h(l,R=>{t()&&R(E)})}s(d,u),ht()}Na(["click","contextmenu"]);var Ps=n('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),qs=n('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),Fs=n('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Hs(d,i){yt(i,!1);let t=Ve(i,"cell",12);const v=()=>{t(t())},p=E=>t().cardEntities.filter(R=>R.face===E);t().field.duel.view.onDuelUpdate.append(v),mt();var c=je(),u=U(c);{var l=E=>{var R=Fs(),D=a(R),S=a(D),o=a(S),L=r(S,2),X=a(L),H=r(D,2);ne(H,4,()=>["FaceUp","FaceDown"],oe,(z,A)=>{var le=je(),be=U(le);{var $e=x=>{var T=qs(),W=a(T),J=a(W),ke=r(W,2);ne(ke,1,()=>p(A).toSorted(Qa),oe,(se,ae)=>{var Te=Ps(),B=a(Te);const F=de(()=>t().owner===t().field.duel.duelists.Below);Pt(B,{get entity(){return e(ae)},get isVisibleForcibly(){return e(F)},isWideMode:!0,cardActionResolve:void 0}),s(se,Te)}),g(()=>y(J,A==="FaceUp"?"表向き":"裏向き")),s(x,T)};h(be,x=>{p(A).length&&x($e)})}s(z,le)}),g(()=>{var z;y(o,(z=t().owner)==null?void 0:z.profile.name),y(X,t().cellType)}),s(E,R)};h(u,E=>{t().field.duel.view.infoBoardState==="CellInfo"&&E(l)})}s(d,c),ht()}var Os=n('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),Is=n('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function Rs(d,i){yt(i,!1);let t=Ve(i,"viewController",8),v=Ve(i,"userProfile",12);mt();var p=je(),c=U(p);{var u=l=>{var E=Is(),R=r(a(E),2),D=r(a(R),2);ne(D,1,()=>er,oe,(S,o)=>{var L=Os(),X=a(L),H=a(X),z=r(X,2),A=a(z);g(()=>y(A,Ja[e(o)])),Za(H,()=>v().chainConfig[e(o)],le=>v(v().chainConfig[e(o)]=le,!0)),ve("change",H,()=>v().save()),s(S,L)}),s(l,E)};h(c,l=>{t().infoBoardState==="Config"&&l(u)})}s(d,p),ht()}function Ws(d,{from:i,to:t},v={}){var{delay:p=0,duration:c=T=>Math.sqrt(T)*120,easing:u=ca}=v,l=getComputedStyle(d),E=l.transform==="none"?"":l.transform,[R,D]=l.transformOrigin.split(" ").map(parseFloat);R/=d.clientWidth,D/=d.clientHeight;var S=Ks(d),o=d.clientWidth/t.width/S,L=d.clientHeight/t.height/S,X=i.left+i.width*R,H=i.top+i.height*D,z=t.left+t.width*R,A=t.top+t.height*D,le=(X-z)*o,be=(H-A)*L,$e=i.width/t.width,x=i.height/t.height;return{delay:p,duration:typeof c=="function"?c(Math.sqrt(le*le+be*be)):c,easing:u,css:(T,W)=>{var J=W*le,ke=W*be,se=T+W*$e,ae=T+W*x;return`transform: ${E} translate(${J}px, ${ke}px) scale(${se}, ${ae});`}}}function Ks(d){if("currentCSSZoom"in d)return d.currentCSSZoom;for(var i=d,t=1;i!==null;)t*=+getComputedStyle(i).zoom,i=i.parentElement;return t}var Vs=n('<div class="chain_number svelte-lqu21u"> </div>'),Gs=n('<div class="duel_card_row svelte-lqu21u"> </div>'),Xs=n('<div class="appendix svelte-lqu21u"> </div>'),Qs=n('<div class="appendix_wrapper svelte-lqu21u"></div>'),Js=n('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),Zs=n("<div></div>");function ei(d,i){yt(i,!1);let t=Ve(i,"duel",8),v=Ve(i,"position",8,"left");const p=-100,c=()=>v()==="left"?-100:100;let u=he([]),l=Promise.resolve(),E=Promise.resolve();const R=1e3,D=500,S=400,o=X=>{const H={...X};H.isKnown=X.chainBlockInfo.action.entity.controller.duelistType==="Player"||X.chainBlockInfo.action.entity.face==="FaceUp",H.chainBlockInfo.onStateChange.append(z=>{if(z==="done"||z==="failed"||z==="negated")return l=l.then(async()=>{const A=new Date().getTime()-H.chainBlockInfo.wasSpawnedAt.getTime();A<R&&await qt(R-A),C(u,e(u).filter(le=>le.seq!==H.seq)),await qt(D+S)}).then(),"RemoveMe";C(u,e(u))}),E=E.then(async()=>{C(u,[H,...e(u)].sort((z,A)=>tr.isSameChain(z.clock,A.clock)&&z.chainBlockInfo.action.isWithChainBlock&&A.chainBlockInfo.action.isWithChainBlock?A.clock.totalProcSeq-z.clock.totalProcSeq:z.clock.totalProcSeq-A.clock.totalProcSeq)),await qt(300)}),l=l.then(()=>qt(1e3))};t().chainBlockLog.onInsert.append(o),mt();var L=Zs();ne(L,13,()=>e(u),X=>X.seq,(X,H)=>{var z=Js();const A=de(()=>{const{activator:K,action:ce,appendix:we}=e(H).chainBlockInfo;return{activator:K,action:ce,appendix:we}});var le=a(z),be=a(le);{var $e=K=>{var ce=Vs(),we=a(ce);g(()=>y(we,`チェーン：${e(H).chainBlockInfo.chainNumber??""}`)),s(K,ce)};h(be,K=>{e(H).chainBlockInfo.chainNumber&&K($e)})}var x=r(be,2),T=a(x),W=r(x,2),J=a(W);{var ke=K=>{var ce=Gs(),we=a(ce);g(()=>y(we,e(H).isKnown?e(A).action.entity.nm:"？？？")),s(K,ce)};h(J,K=>{(e(A).action.entity.entityType==="Card"||e(A).action.entity.entityType==="Token")&&K(ke)})}var se=r(J,2),ae=a(se),Te=a(ae),B=r(ae,2);{var F=K=>{var ce=Qs();ne(ce,5,()=>e(A).appendix,oe,(we,_e)=>{var Y=Xs(),b=a(Y);g(()=>y(b,e(_e))),s(we,Y)}),s(K,ce)};h(B,K=>{e(A).appendix&&K(F)})}g((K,ce,we)=>{Le(z,`cut_in_row ${(!e(H).chainBlockInfo.chainNumber||e(H).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Le(le,`cut_in_item cut_in_item_${K??""} cut_in_item_${e(H).chainBlockInfo.state??""} svelte-lqu21u`),Le(x,`duelist_name duelist_${K??""}_name svelte-lqu21u`),y(T,e(A).activator.profile.name),Le(W,`duel_card duel_card_${K??""} ${ce??""} ${(e(H).isKnown?e(A).action.entity.origin.kind:"")??""} ${e(A).action.entity.entityType??""}  svelte-lqu21u`),y(Te,we)},[()=>e(A).activator.seat.toLowerCase(),()=>e(H).isKnown?(e(A).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(A).action.toString()],de),te(3,le,()=>Cr,()=>new Date().getTime()-e(H).chainBlockInfo.wasSpawnedAt.getTime()<R?{x:c(),duration:S}:{y:p,duration:S}),ar(z,()=>Ws,()=>({duration:D})),s(X,z)}),g(()=>Le(L,`cut_in_container cut_in_container_${v()??""} svelte-lqu21u`)),s(d,L),ht()}const ti=Dr({duration:400});var ai=n('<div class="duel_desk_left v_flex svelte-1i63tk9"><!> <!> <!></div>'),ri=n('<button class="duel_field_header_message svelte-1i63tk9"> </button> <div class="duel_field_header_buttons svelte-1i63tk9"><button class="svelte-1i63tk9">サレンダー</button></div>',1),si=n("<tr></tr>"),ii=n('<table class="duel_field svelte-1i63tk9"><tbody class="svelte-1i63tk9"></tbody></table>'),ni=n('<button class="svelte-1i63tk9">OK</button>'),oi=n('<button class="svelte-1i63tk9">cancel</button>'),li=n("<!> <!>",1),vi=n('<button class="svelte-1i63tk9"> </button>'),di=n('<div style="text-align: left;"><!> <!> <!></div>'),ci=n('<div><!> <div class=" duel_desk_center v_flex svelte-1i63tk9"><div class="duel_field_header svelte-1i63tk9"><!></div> <div class="duel_field_body svelte-1i63tk9"><!></div> <div class="duel_field_footer svelte-1i63tk9"><!></div></div> <!></div> <div style="position:fixed;left:0;bottom:0"> </div> <!> <div><!></div>',1);function _i(d,i){yt(i,!1);let t=Ve(i,"duel",12),v=Ve(i,"userProfile",8),p=he(0),c=he(0),u=he([]),l=he([]),E=()=>{},R=he([]),D=he(),S=he(),o=he(()=>!1),L=he(!1);const X=_=>{E=_.resolve,C(R,_.dummyActionInfos.filter(m=>m.action.entity.entityType==="Duelist").filter(m=>m.action.entity.controller.seat==="Below")),C(D,void 0),C(S,void 0),C(l,[]),C(u,[]),C(L,!1),_.entitiesChoices&&(C(D,_.entitiesChoices),C(o,()=>{var m;return((m=_.entitiesChoices)==null?void 0:m.validator(e(u)))??!1}),C(L,_.entitiesChoices.cancelable),e(D).selectables.every(m=>m.cell.isPlayFieldCell&&m.getIndexInCell()===0||m.cell.cellType==="Hand"&&m.controller.duelistType==="Player"||m.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:_.entitiesChoices,chainBlockInfos:_.chainBlockInfos,cancelable:_.entitiesChoices.cancelable}).then(m=>{E({selectedEntities:m})})),_.cellsChoices&&(C(S,_.cellsChoices),C(o,()=>{var m;return((m=_.cellsChoices)==null?void 0:m.validator(e(l)))??!1}),C(L,_.cellsChoices.cancelable))};t().view.onWaitStart.append(X);const H=()=>{E=()=>{},C(S,void 0),C(D,void 0),C(l,[]),C(u,[]),C(o,()=>!1),C(L,!1)};t().view.onWaitEnd.append(H);let z=he(void 0),A=he("Normal");const le=({card:_,mode:m})=>{C(z,_),C(A,m??(e(z)===_||e(A)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(le);const be=()=>{t(t())};t().view.onDuelUpdate.append(be),t().log.onUpdate.append(be);const $e=()=>{e(D)&&e(D).validator(e(u))&&E({selectedEntities:e(u)}),e(S)&&e(S).validator(e(l))&&E({selectedCells:e(l)})},x=()=>{E({})},T=_=>{E({actionInfo:_})},W=()=>{E({surrender:!0})};t().main();const J=()=>e(p)<=1400?"compact":"wide";mt();var ke=ci(),se=U(ke),ae=a(se);{var Te=_=>{var m=ai(),P=a(m);Ua(P,{get duelist(){return t().duelists.Above}});var q=r(P,2);Ns(q,{get entity(){return e(z)},get mode(){return e(A)}});var xe=r(q,2);Ua(xe,{get duelist(){return t().duelists.Below}}),s(_,m)};h(ae,_=>{J()==="wide"&&_(Te)})}var B=r(ae,2),F=a(B),K=a(F);{var ce=_=>{var m=ri(),P=U(m),q=a(P),xe=r(P,2),pe=a(xe);g(()=>y(q,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),ve("click",P,()=>{t(t().view.infoBoardState="Log",!0)}),ve("click",pe,W),s(_,m)};h(K,_=>{t().isEnded||_(ce)})}var we=r(F,2),_e=a(we);{var Y=_=>{var m=ii(),P=a(m);ne(P,5,()=>t().field.cells,oe,(q,xe,pe)=>{var ue=si();Le(ue,`${`duel_desk_row_${pe}`??""} svelte-1i63tk9`),ne(ue,5,()=>e(xe),oe,(Q,V,O)=>{Wr(Q,{get view(){return t().view},row:pe,column:O,get selectedEntities(){return e(u)},set selectedEntities(ge){C(u,ge)},get selectedCells(){return e(l)},set selectedCells(ge){C(l,ge)},$$legacy:!0})}),s(q,ue)}),s(_,m)};h(_e,_=>{t().clock.turn>0&&_(Y)})}var b=r(we,2),I=a(b);{var Z=_=>{var m=li(),P=U(m);{var q=ue=>{var Q=ni();g(V=>Q.disabled=V,[()=>!e(o)()],de),ve("click",Q,$e),s(ue,Q)};h(P,ue=>{((e(D)&&e(D).qty)??(e(S)&&e(S).qty)??9999)>1&&ue(q)})}var xe=r(P,2);{var pe=ue=>{var Q=oi();ve("click",Q,x),s(ue,Q)};h(xe,ue=>{e(L)&&ue(pe)})}s(_,m)},ie=_=>{var m=je(),P=U(m);ne(P,1,()=>e(R),oe,(q,xe)=>{var pe=vi(),ue=a(pe);g(()=>y(ue,e(xe).action.title)),ve("click",pe,()=>T(e(xe))),s(q,pe)}),s(_,m)};h(I,_=>{e(D)&&e(D).selectables.length||e(S)&&e(S).selectables?_(Z):_(ie,!1)})}var $=r(B,2);{var j=_=>{var m=di(),P=a(m);rs(P,{get log(){return t().log}});var q=r(P,2);Hs(q,{get cell(){return t().view.infoBoardCell}});var xe=r(q,2);Rs(xe,{get userProfile(){return v()},get viewController(){return t().view}}),g(pe=>Le(m,`duel_desk_right duel_desk_right_${pe??""}  svelte-1i63tk9`),[()=>t().view.infoBoardState.toLowerCase()],de),te(3,m,()=>fe,()=>({duration:e(p)>1400?0:200,axis:"x"})),s(_,m)};h($,_=>{(e(p)>1400||t().view.infoBoardState!=="Default")&&_(j)})}var N=r(se,2),ee=a(N),re=r(N,2);rr(re,{get modalController(){return t().view.modalController}});var me=r(re,2),f=a(me);const w=de(()=>J()==="wide"?"right":"left");ei(f,{get duel(){return t()},get position(){return e(w)}}),g((_,m)=>{Le(se,`flex duel_desk ${_??""}_mode svelte-1i63tk9`),y(ee,m),Le(me,`cutin ${_??""}_mode svelte-1i63tk9`)},[J,()=>t().clock.toFullString()],de),ta("innerWidth",_=>C(p,_)),ta("innerHeight",_=>C(c,_)),s(d,ke),ht()}var ui=n('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),fi=n('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),pi=n("<div></div>"),gi=n("<!> <!> <!> <!> <!>",1),yi=n('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),mi=n('<li class="deck_editor_item svelte-niobyr"><div role="listitem"><div class="svelte-niobyr"><div class="svelte-niobyr"> </div> <div style="display:flex" class="svelte-niobyr"><div class="svelte-niobyr"><!> <!> <!></div> <div style="flex-grow: 1; width:0.1rem" class="svelte-niobyr"></div> <div class="svelte-niobyr"><!></div></div></div></div> <button class="button_style_reset svelte-niobyr">+</button> <button class="button_style_reset svelte-niobyr">-</button></li>'),hi=n('<div class="deck_editor_card_kind svelte-niobyr"><div class="deck_editor_card_kind_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <ul class="svelte-niobyr"></ul></div>'),bi=n('<div class="deck_editor_deck_type svelte-niobyr"><div class="deck_editor_deck_type_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <!></div>'),xi=n('<div class="svelte-niobyr">読み込み中...</div>'),ki=n('<div class="deck_editor_card_list svelte-niobyr"><!></div>');function La(d,i){yt(i,!1);let t=Ve(i,"allCardInfos",8),v=Ve(i,"deckCardInfos",12),p=Ve(i,"mode",8),c=Ve(i,"onAttention",8),u=Ve(i,"searchCondition",8,void 0);const l={Deck:["Monster","Spell","Trap"],ExtraDeck:["Monster"]},E={ExtraDeck:{Monster:[],Spell:[],Trap:[]},Deck:{Monster:[],Spell:[],Trap:[]}},R=x=>{var T;return(T=x.monsterCategories)!=null&&T.union(Et).length?"ExtraDeck":"Deck"},D=x=>{Object.values(E).forEach(T=>Object.values(T).forEach(W=>W.reset())),x.filter(T=>T.kind!=="XyzMaterial").forEach(T=>{var J;if(T.kind==="XyzMaterial")return;const W=(J=T.monsterCategories)!=null&&J.union(Et).length?"ExtraDeck":"Deck";E[W][T.kind].push(T)}),Object.values(E).forEach(T=>Object.values(T).forEach(W=>W.sort(da)))},S=p()==="List"?new Promise(x=>{D(t()),x()}):Promise.resolve(),o=()=>(p()==="Deck"&&(D(v()),C(z,v().length)),E),L=(x,T,W)=>{v(v().filter(J=>R(J)!==T||J.kind!==W&&W))},X=(x,T)=>{try{if(x.ctrlKey){v().push(T);return}const W=v().filter(ke=>ke.name===T.name).length;if(W>2)return;const J=x.shiftKey?3-W:1;if(J<1)return;v().push(...Array(J).fill(T))}finally{v().sort(da),v(v())}},H=(x,T)=>{let W=0;v(v().filter(J=>J.name!==T.name?!0:(W++,!x.shiftKey&&W>1))),v().sort(da)};let z=he(100);const A=()=>{C(z,e(z)+10),!(e(z)>499)&&(e(z)>t().length+v().length||qt(100).then(A))},le=(x,T,W,J)=>{var se;if(T===0&&J==="Monster"&&(C(z,100),qt(100).then(A)),!u())return!0;if(x.kind==="XyzMaterial")return!1;const ke=x.kind!=="Monster"?x.kind:(se=x.monsterCategories)!=null&&se.union(Et).length?"ExtraMonster":"Monster";if(!u().deckCardKinds.includes(ke)||u().name.trim().length&&[x.name,...x.nameTags??[],...x.textTags??[]].every(Te=>!Te.includes(u().name))||!x.isImplemented&&!u().others.includes("implemented")||x.isForTest&&!u().others.includes("test")||x.isOldVersion&&!u().others.includes("oldVersion"))return!1;if(x.kind==="Monster"){if(x.attributes&&!u().monsterAttributes.union(x.attributes).length||x.types&&!u().monsterTypes.union(x.types).length)return!1;const ae=x.level??x.rank??x.link;return Tt(u().starLowerBound)&&(ae??0)<u().starLowerBound||Tt(u().starUpperBound)&&(ae??0)>u().starUpperBound||Tt(u().atkLowerBound)&&(x.attack??0)<u().atkLowerBound||Tt(u().atkUpperBound)&&(x.attack??0)>u().atkUpperBound||Tt(u().defLowerBound)&&(x.defense??0)<u().defLowerBound||Tt(u().defUpperBound)&&(x.defense??0)>u().defUpperBound||Tt(u().atkPlusDef)&&(!Tt(x.attack)||!Tt(x.defense)||x.attack+x.defense!==u().atkPlusDef)||!x.monsterCategories||ke==="ExtraMonster"&&!x.monsterCategories.union(u().exMonsterCategories).length?!1:x.monsterCategories.union(u().monsterCategories).length}if(x.kind==="Spell")return x.spellCategory&&u().spellCategories.includes(x.spellCategory);if(x.kind==="Trap")return x.trapCategory&&u().trapCategories.includes(x.trapCategory)};mt();var be=ki(),$e=a(be);gt($e,()=>S,x=>{var T=xi();s(x,T)},x=>{var T=je();const W=de(o);var J=U(T);ne(J,1,()=>nr.toReversed(),oe,(ke,se)=>{var ae=bi();const Te=de(()=>Object.values(e(W)[e(se)]).flatMap(Y=>Y));var B=a(ae),F=a(B),K=a(F),ce=r(F,2);{var we=Y=>{var b=ui(),I=a(b);ve("click",I,Z=>L(Z,e(se),void 0)),s(Y,b)};h(ce,Y=>{p()==="Deck"&&e(Te).some(le)&&Y(we)})}var _e=r(B,2);ne(_e,1,()=>fa(e(W)[e(se)]).filter(Y=>l[e(se)].includes(Y)),oe,(Y,b)=>{var I=hi();const Z=de(()=>e(W)[e(se)][e(b)].filter((...me)=>le(...me,e(b))));var ie=a(I),$=a(ie),j=a($),N=r($,2);{var ee=me=>{var f=fi(),w=a(f);ve("click",w,_=>L(_,e(se),e(b))),s(me,f)};h(N,me=>{p()==="Deck"&&e(Z).length&&me(ee)})}var re=r(ie,2);ne(re,5,()=>e(Z),oe,(me,f,w)=>{var _=je(),m=U(_);{var P=q=>{var xe=mi(),pe=a(xe),ue=a(pe),Q=a(ue),V=a(Q),O=r(Q,2),ge=a(O),Re=a(ge);{var We=Se=>{var Be=gi(),k=U(Be);{var M=qe=>{var Me=dt();g(()=>y(Me,`★${e(f).level??""}`)),s(qe,Me)};h(k,qe=>{e(f).level&&qe(M)})}var G=r(k,2);{var De=qe=>{var Me=dt();g(()=>y(Me,`☆${e(f).rank??""}`)),s(qe,Me)};h(G,qe=>{e(f).rank&&qe(De)})}var Ie=r(G,2);ne(Ie,1,()=>e(f).attributes??[],oe,(qe,Me)=>{var He=pi();g(()=>Le(He,`monster_attr ${e(Me)??""} svelte-niobyr`)),s(qe,He)});var Ge=r(Ie,2);ne(Ge,1,()=>e(f).types??[],oe,(qe,Me)=>{var He=dt();g(()=>y(He,sa[e(Me)])),s(qe,He)});var Ue=r(Ge,2);ne(Ue,1,()=>e(f).monsterCategories??[],oe,(qe,Me)=>{var He=dt();g(()=>y(He,Xt[e(Me)])),s(qe,He)}),s(Se,Be)};h(Re,Se=>{e(f).kind==="Monster"&&Se(We)})}var Fe=r(Re,2);{var Ne=Se=>{var Be=dt();g(()=>y(Be,`${ia[e(f).spellCategory]??""}魔法`)),s(Se,Be)};h(Fe,Se=>{e(f).spellCategory&&Se(Ne)})}var Xe=r(Fe,2);{var Ae=Se=>{var Be=dt();g(()=>y(Be,`${na[e(f).trapCategory]??""}罠`)),s(Se,Be)};h(Xe,Se=>{e(f).trapCategory&&Se(Ae)})}var ye=r(ge,4),Ce=a(ye);{var Ye=Se=>{var Be=yi(),k=U(Be),M=a(k),G=r(k,2),De=a(G);g(()=>{y(M,e(f).attack??"?"),y(De,e(f).defense??"?")}),s(Se,Be)};h(Ce,Se=>{e(f).kind==="Monster"&&Se(Ye)})}var Oe=r(pe,2),Ke=r(Oe,2);g(Se=>{Le(pe,`${Se??""} svelte-niobyr`),y(V,e(f).name),Oe.disabled=!e(f).isImplemented,xt(Oe,"title",e(f).isImplemented?"※shiftキー同時押しで一括投入":""),Ke.disabled=!e(f).isImplemented,xt(Ke,"title",e(f).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>{var Se,Be;return`deck_editor_card duel_card ${e(f).kind} ${(Be=(Se=e(f))==null?void 0:Se.monsterCategories)==null?void 0:Be.join(" ")} ${e(f).isImplemented?"is_implemented":"is_not_implemented"}`}],de),ve("click",pe,()=>c()(e(f))),ve("click",Oe,Se=>X(Se,e(f))),ve("click",Ke,Se=>H(Se,e(f))),s(q,xe)};h(m,q=>{w<e(z)&&q(P)})}s(me,_)}),g(()=>y(j,`${sr[e(b)]??""}（${e(Z).length??""} / ${e(W)[e(se)][e(b)].length??""}枚）`)),s(Y,I)}),g(Y=>y(K,`${ir[e(se)]??""}（${Y??""} / ${e(Te).length??""}枚）`),[()=>e(Te).filter(le).length],de),s(ke,ae)}),s(x,T)}),s(d,be),ht()}var wi=n('<div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>'),Ci=n('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),Di=n('<div></div> <div class="svelte-rccxcp"> </div>',1),$i=n("<div> </div>"),Si=n('<span class="svelte-rccxcp">/</span> <div class="monster_defense svelte-rccxcp"> </div>',1),Mi=n("<div> </div>"),zi=n('<div class="duel_card_info_row svelte-rccxcp"><!> <!> <div style="flex-grow: 1;" class="svelte-rccxcp"></div> <div class="monster_attack svelte-rccxcp"> </div> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),ji=n('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Ti=n('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Bi=n('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※エラッタ前カードです</div></div>'),Ei=n('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),Ai=n('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),Yi=n('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <!></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!> <!></div></div>');function Ui(d,i){yt(i,!1);let t=Ve(i,"cardInfo",8,void 0);mt();var v=je(),p=U(v);{var c=u=>{var l=Yi(),E=a(l),R=a(E),D=a(R),S=a(D),o=r(R,2);{var L=B=>{var F=wi(),K=a(F),ce=a(K),we=r(K,2),_e=a(we);g((Y,b)=>{y(ce,Y),y(_e,b)},[()=>"★".repeat(t().level||0),()=>"☆".repeat(t().rank||0)],de),s(B,F)};h(o,B=>{t().kind==="Monster"&&B(L)})}var X=r(E,2),H=a(X);{var z=B=>{var F=Ci(),K=U(F),ce=a(K),we=a(ce),_e=a(we),Y=r(K,2),b=a(Y),I=a(b),Z=r(b,2),ie=a(Z);g(()=>{y(_e,t().pendulumDescription),y(I,`◀ ${t().pendulumScaleL??""}`),y(ie,`${t().pendulumScaleR??""} ▶`)}),s(B,F)};h(H,B=>{var F;(F=t().monsterCategories)!=null&&F.includes("Pendulum")&&B(z)})}var A=r(H,2);{var le=B=>{var F=zi(),K=U(F),ce=a(K);{var we=j=>{var N=Di(),ee=U(N),re=r(ee,2),me=a(re);g(()=>{Le(ee,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),y(me,`${pa[t().attributes[0]]??""}属性`)}),s(j,N)};h(ce,j=>{t().attributes&&j(we)})}var _e=r(ce,2);{var Y=j=>{var N=$i(),ee=a(N);g(()=>{Le(N,`monster_cat ${t().types[0]??""} svelte-rccxcp`),y(ee,`${sa[t().types[0]]??""}${ga[t().types[0]]??""}族`)}),s(j,N)};h(_e,j=>{t().types&&j(Y)})}var b=r(_e,4),I=a(b),Z=r(b,2);{var ie=j=>{var N=Si(),ee=r(U(N),2),re=a(ee);g(()=>y(re,t().defense??"?")),s(j,N)};h(Z,j=>{var N;(N=t().monsterCategories)!=null&&N.includes("Link")||j(ie)})}var $=r(K,2);ne($,5,()=>t().monsterCategories??[],oe,(j,N)=>{var ee=Mi(),re=a(ee);g(()=>{Le(ee,`monster_cat ${e(N)??""} svelte-rccxcp`),y(re,`${Xt[e(N)]??""}${ea[e(N)]??""}`)}),s(j,ee)}),g(()=>y(I,t().attack??"?")),s(B,F)},be=B=>{var F=je(),K=U(F);{var ce=_e=>{var Y=ji(),b=r(a(Y),2),I=a(b);g(()=>y(I,`${ia[t().spellCategory]??""}魔法`)),s(_e,Y)},we=_e=>{var Y=je(),b=U(Y);{var I=Z=>{var ie=Ti(),$=r(a(ie),2),j=a($);g(()=>y(j,`${na[t().trapCategory]??""}罠`)),s(Z,ie)};h(b,Z=>{t().kind==="Trap"&&t().trapCategory&&Z(I)},!0)}s(_e,Y)};h(K,_e=>{t().kind==="Spell"&&t().spellCategory?_e(ce):_e(we,!1)},!0)}s(B,F)};h(A,B=>{t().kind==="Monster"?B(le):B(be,!1)})}var $e=r(A,2),x=a($e),T=a(x),W=a(T),J=r($e,2);{var ke=B=>{var F=Bi();s(B,F)};h(J,B=>{t().isOldVersion&&B(ke)})}var se=r(J,2);{var ae=B=>{var F=Ei();s(B,F)},Te=B=>{var F=Ai(),K=a(F),ce=r(K,2),we=a(ce);g(_e=>{xt(K,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),xt(ce,"href",_e),y(we,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>or(t())],de),s(B,F)};h(se,B=>{t().isForTest?B(ae):B(Te,!1)})}g(B=>{Le(l,`duel_card duel_card_info ${t().kind??""} ${B??""} svelte-rccxcp`),y(S,t().name),y(W,t().description)},[()=>{var B;return(B=t().monsterCategories)==null?void 0:B.join(" ")}],de),s(u,l)};h(p,u=>{t()&&u(c)})}s(d,v),ht()}const Li={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class Ni{constructor(){lt(this,"DefaultSeparator1","/");lt(this,"DefaultSeparator2"," ");lt(this,"DefaultSeparator3",":");lt(this,"createDate",i=>{if(!i)return;const t=new Date(i);if(!isNaN(t.getTime()))return t});lt(this,"createDateOr",(i,t)=>this.createDate(i)||t||new Date);lt(this,"truncateDate",i=>{const t=i||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});lt(this,"addDate",(i,t)=>{const v=this.createDateOr(i);return v.setDate(v.getDate()+t),v});lt(this,"addMonth",(i,t)=>{const v=this.createDateOr(i);return v.setMonth(v.getMonth()+t),v});lt(this,"addYear",(i,t)=>{const v=this.createDateOr(i);return v.setFullYear(v.getFullYear()+t),v});lt(this,"getDayOfWeek",(i,t="dddd")=>{const v=this.createDate(i);return v?Li[v.getDay()][t]:""});lt(this,"formatToYYYYMMDD",(i,t=this.DefaultSeparator1)=>{const v=this.createDate(i);if(!v)return"";const p=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2),u=("0"+v.getDate()).slice(-2);return p+t+c+t+u});lt(this,"formatToYYYYMM",(i,t=this.DefaultSeparator1)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const p=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2);return p+t+c});lt(this,"formatToHHMMSS",(i,t=this.DefaultSeparator3)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const p=v.getHours(),c=v.getMinutes(),u=v.getSeconds();return("0"+p).slice(-2)+t+("0"+c).slice(-2)+t+("0"+u).slice(-2)});lt(this,"formatToHHMM",(i,t=this.DefaultSeparator3)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const p=("0"+v.getHours()).slice(-2),c=("0"+v.getMinutes()).slice(-2);return p+t+c});lt(this,"formatToYYYYMMDD_HHMM",(i,t=this.DefaultSeparator1,v=this.DefaultSeparator2,p=this.DefaultSeparator3)=>{const c=this.createDate(i);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMM(c,p):""});lt(this,"formatToYYYYMMDD_HHMMSS",(i,t=this.DefaultSeparator1,v=this.DefaultSeparator2,p=this.DefaultSeparator3)=>{const c=this.createDate(i);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMMSS(c,p):""})}}const kt=new Ni;Date.prototype.truncateDate=function(){return kt.truncateDate(this)};Date.prototype.getCloneOr=function(d){return kt.createDateOr(this,d)};Date.prototype.addDate=function(d){return kt.addDate(this,d)};Date.prototype.addMonth=function(d){return kt.addDate(this,d)};Date.prototype.addYear=function(d){return kt.addDate(this,d)};Date.prototype.getDayOfWeek=function(d="dddd"){return kt.getDayOfWeek(this,d)};Date.prototype.formatToYYYYMM=function(d){return kt.formatToYYYYMM(this,d)};Date.prototype.formatToYYYYMMDD=function(d){return kt.formatToYYYYMMDD(this,d)};Date.prototype.formatToYYYYMMDD_HHMM=function(d,i,t){return kt.formatToYYYYMMDD_HHMM(this,d,i,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(d,i,t){return kt.formatToYYYYMMDD_HHMMSS(this,d,i,t)};Date.prototype.formatToHHMM=function(d){return kt.formatToHHMM(this,d)};Date.prototype.formatToHHMMSS=function(d){return kt.formatToHHMMSS(this,d)};var Pi=n('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),qi=n('<ul class="deck_info_list svelte-2wdgc8"></ul>'),Fi=n('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),Hi=n('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),Oi=n('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),Ii=n('<button class="svelte-2wdgc8">Cancel</button>'),Ri=n('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function Wi(d,i){yt(i,!1);let t=Ve(i,"eventHolder",8),v=Ve(i,"args",8),p=Ve(i,"resolve",8),c=he(Promise.resolve([])),u=he();const l=()=>{C(u,new DataTransfer().files),C(c,Promise.resolve([]))},E=async L=>{L.preventDefault(),console.log("hoge",L)},R=async L=>{L.preventDefault(),L.dataTransfer&&S(L.dataTransfer.files)},D=()=>{S(e(u))},S=async L=>{if(!L.length)return;const X=[],H=[];for(const z of L)try{H.push(...await Dt.createfromJson(z))}catch(A){A instanceof Error&&X.push(A.message)}if(X.length){console.log(...X);return}C(c,e(c).then(()=>H))},o=l;mt(),lr(d,{get eventHolder(){return t()},get args(){return v()},$$slots:{body:(L,X)=>{var H=Hi(),z=a(H);gt(z,()=>Gt,null,(A,le)=>{var be=je(),$e=U(be);gt($e,()=>e(c),null,(x,T)=>{var W=je(),J=U(W);{var ke=ae=>{var Te=qi();ne(Te,5,()=>e(T),oe,(B,F)=>{var K=Pi(),ce=a(K),we=a(ce),_e=r(ce,2),Y=a(_e),b=r(_e,2),I=a(b);g((Z,ie,$)=>{y(we,e(F).name),y(Y,`${Z??""}
                  /
                  ${ie??""}`),y(I,`最終使用日時 ： ${$??""}`)},[()=>e(F).cardNames.filter(Z=>{var ie,$;return!(($=(ie=e(le).getCardInfo(Z))==null?void 0:ie.monsterCategories)!=null&&$.union(Et).length)}).length,()=>e(F).cardNames.filter(Z=>{var ie,$;return($=(ie=e(le).getCardInfo(Z))==null?void 0:ie.monsterCategories)==null?void 0:$.union(Et).length}).length,()=>e(F).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],de),s(B,K)}),s(ae,Te)},se=ae=>{var Te=Fi(),B=r(a(Te),2),F=a(B);vr(F,()=>e(u),K=>C(u,K)),ve("change",F,D),ve("cancel",F,o),ve("drop",Te,R),ve("dragover",Te,E),s(ae,Te)};h(J,ae=>{e(T).length?ae(ke):ae(se,!1)})}s(x,W)}),s(A,be)}),s(L,H)},footer:(L,X)=>{var H=Ri(),z=a(H);gt(z,()=>e(c),null,(A,le)=>{var be=je(),$e=U(be);{var x=W=>{var J=Oi(),ke=U(J),se=r(ke,2),ae=r(se,2);g(()=>{ke.disabled=e(le).length===0,se.disabled=e(le).length===0}),ve("click",ke,()=>p()({deckInfos:e(le),replaceAll:!1})),ve("click",se,()=>p()({deckInfos:e(le),replaceAll:!0})),ve("click",ae,o),s(W,J)},T=W=>{var J=je(),ke=U(J);{var se=ae=>{var Te=Ii();ve("click",Te,()=>p()(void 0)),s(ae,Te)};h(ke,ae=>{v().cancelable&&ae(se)},!0)}s(W,J)};h($e,W=>{e(le).length?W(x):W(T,!1)})}s(A,be)}),s(L,H)}}}),ht()}const ra=class ra extends cr{constructor(i,t){super(i,...Object.values(t))}};lt(ra,"createModalController",i=>{const t={deckUploader:new _r({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new ra(i,t),t)});let ua=ra;function Ki(d,i){yt(i,!1);let t=Ve(i,"modalController",8);mt(),dr(d,{get modalController(){return t()},children:(v,p)=>{var c=je(),u=U(c);{var l=E=>{Wi(E,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};h(u,E=>{t().deckUploader.state==="Shown"&&E(l)})}s(v,c)},$$slots:{default:!0}}),ht()}var Vi=n('<label class="svelte-agxzr5"><input type="checkbox" class="search_condition svelte-agxzr5"> </label>'),Gi=n('<label class="svelte-agxzr5"><input type="checkbox" class="search_condition svelte-agxzr5"> </label>'),Xi=n('<div class="deck_editor_search_box_row monster_ex_categories svelte-agxzr5"><div class="svelte-agxzr5"><button class="search_condition_title black_button svelte-agxzr5">エクストラ</button></div> <div class="svelte-agxzr5"></div></div>'),Qi=n('<label class="svelte-agxzr5"><input type="checkbox" class="search_condition svelte-agxzr5"> </label>'),Ji=n('<label class="svelte-agxzr5"><input type="checkbox" class="search_condition svelte-agxzr5"> <div style="display: inline-block;"></div> </label>'),Zi=n('<label class="svelte-agxzr5"><input type="checkbox" class="search_condition svelte-agxzr5"> </label>'),en=n('<div class="deck_editor_search_box_row monster_categories svelte-agxzr5"><div class="svelte-agxzr5"><button class="search_condition_title black_button svelte-agxzr5">モンスター</button></div> <div class="svelte-agxzr5"></div></div> <div class="deck_editor_search_box_row monster_attributes svelte-agxzr5"><div class="svelte-agxzr5"><button class="search_condition_title black_button svelte-agxzr5">属性</button></div> <div class="svelte-agxzr5"></div></div> <div class="deck_editor_search_box_row svelte-agxzr5"><div class="svelte-agxzr5"><button class="search_condition_title black_button svelte-agxzr5">種族</button></div> <div class="svelte-agxzr5"></div></div> <div class="deck_editor_search_box_row svelte-agxzr5"><div class="svelte-agxzr5"><button class="search_condition_title black_button svelte-agxzr5">星攻守</button></div> <div class="svelte-agxzr5"><div class="star_range svelte-agxzr5"><span class="svelte-agxzr5">星</span> <input type="number" min="0" max="13" class="svelte-agxzr5"> <span class="svelte-agxzr5">～</span> <input type="number" min="0" max="13" class="svelte-agxzr5"></div> <div class="atk_range svelte-agxzr5"><span class="svelte-agxzr5">攻</span> <input type="number" min="0" max="5000" step="100" class="svelte-agxzr5"> <span class="svelte-agxzr5">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-agxzr5"></div> <div class="def_range svelte-agxzr5"><span class="svelte-agxzr5">守</span> <input type="number" min="0" max="5000" step="100" class="svelte-agxzr5"> <span class="svelte-agxzr5">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-agxzr5"></div> <div class="atk_plus_def svelte-agxzr5"><span class="svelte-agxzr5">攻+守</span> <input type="number" min="0" max="10000" step="100" class="svelte-agxzr5"></div></div></div>',1),tn=n('<label class="svelte-agxzr5"><input type="checkbox" class="search_condition svelte-agxzr5"> </label>'),an=n('<div class="deck_editor_search_box_row svelte-agxzr5"><div class="svelte-agxzr5"><button class="search_condition_title black_button svelte-agxzr5">魔法</button></div> <div class="svelte-agxzr5"></div></div>'),rn=n('<label class="svelte-agxzr5"><input type="checkbox" class="search_condition svelte-agxzr5"> </label>'),sn=n('<div class="deck_editor_search_box_row svelte-agxzr5"><div class="svelte-agxzr5"><button class="search_condition_title black_button svelte-agxzr5">罠</button></div> <div class="svelte-agxzr5"></div></div>'),nn=n('<label class="svelte-agxzr5"><input type="checkbox" class="search_condition svelte-agxzr5"> </label>'),on=n("<div>カード情報読込中</div>"),ln=n("<option> </option>"),vn=n('<div class="svelte-agxzr5"><a class="white_button svelte-agxzr5" download="SVS_DeckInfos.json">ダウンロード</a></div>'),dn=n('<div class="svelte-agxzr5"></div>'),cn=n('<div class="svelte-agxzr5"><a class="white_button svelte-agxzr5" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),_n=n('<div class="svelte-agxzr5"></div>'),un=n('<div class="deck_editor_body_right_header svelte-agxzr5"><div class="deck_editor_body_right_header_row svelte-agxzr5"><div class="svelte-agxzr5">編集対象</div> <div class="svelte-agxzr5"><select style="width:100%" class="svelte-agxzr5"></select></div></div> <div class="deck_editor_body_right_header_row svelte-agxzr5"><div class="svelte-agxzr5">新規名称</div> <div class="svelte-agxzr5"><input type="text" style="width:100%" class="svelte-agxzr5"></div></div> <div class="deck_editor_body_right_header_row svelte-agxzr5"></div> <div class="deck_editor_body_right_header_row svelte-agxzr5"><div class="svelte-agxzr5">基本操作</div> <div class="svelte-agxzr5"><button class="white_button svelte-agxzr5">デッキを保存</button></div> <div class="svelte-agxzr5"><button class="white_button svelte-agxzr5">デッキを複製</button></div> <div class="svelte-agxzr5"><button class="white_button svelte-agxzr5" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-agxzr5"><div class="svelte-agxzr5">DL/UL</div> <!> <!> <div class="svelte-agxzr5"><button class="white_button svelte-agxzr5">アップロード</button></div></div></div> <!>',1),fn=n('<div class="svelte-agxzr5">デッキ情報読込中</div>'),pn=n('<div class="svelte-agxzr5"></div>'),gn=n('<div><div class="deck_editor_header svelte-agxzr5"></div> <div class="deck_editor_body svelte-agxzr5"><div class="deck_editor_body_left svelte-agxzr5"><div role="contentinfo" class="deck_editor_search_box svelte-agxzr5"><div class="deck_editor_search_box_header svelte-agxzr5"><div class="svelte-agxzr5">検索条件</div> <div class="svelte-agxzr5"><button class="white_button svelte-agxzr5">条件クリア</button></div></div> <div class="deck_editor_search_box_body svelte-agxzr5"><div class="deck_editor_search_box_row svelte-agxzr5"><div class="svelte-agxzr5"><button class="search_condition_title black_button svelte-agxzr5">名称</button></div> <div class="svelte-agxzr5"><input type="text" style="width:100%" placeholder="※ルビには対応していません" class="svelte-agxzr5"></div></div> <div class="deck_editor_search_box_row card_kind svelte-agxzr5"><div class="svelte-agxzr5"><button class="search_condition_title black_button svelte-agxzr5">種類</button></div> <div class="svelte-agxzr5"></div></div> <!> <!> <!> <!> <div class="deck_editor_search_box_row svelte-agxzr5"><div class="svelte-agxzr5"><button class="search_condition_title black_button svelte-agxzr5">その他</button></div> <div class="svelte-agxzr5"></div></div></div></div> <!></div> <div class="deck_editor_body_center svelte-agxzr5"><!></div>  <div class="deck_editor_body_right svelte-agxzr5"><!></div></div> <div class="footer svelte-agxzr5"></div></div> <!>',1);function yn(d,i){yt(i,!1);const t=[],v=[],p=[],c=[],u=[],l=[],E=[],R=[],D=ua.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),S={name:"",deckCardKinds:[...ja],exMonsterCategories:[...Et],monsterCategories:za.filter(k=>!Et.includes(k)),monsterAttributes:[...Ma],monsterTypes:[...Sa],spellCategories:$a.filter(k=>k!=="PendulumScale"),trapCategories:[...Da],starLowerBound:0,starUpperBound:13,atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:["test","oldVersion","implemented"]},o=he(structuredClone(S));ze(o,e(o).others=["oldVersion"]);let L=he("DeckEdit"),X=he("SearchCondition");const H=async()=>{ze(o,e(o).name=""),ze(o,e(o).deckCardKinds=[]),ze(o,e(o).monsterCategories=[]),ze(o,e(o).monsterAttributes=[]),ze(o,e(o).monsterTypes=[]),ze(o,e(o).spellCategories=[]),ze(o,e(o).trapCategories=[]),ze(o,e(o).others=[]),ze(o,e(o).atkLowerBound=0),ze(o,e(o).atkUpperBound=5e3),ze(o,e(o).defLowerBound=0),ze(o,e(o).defUpperBound=5e3),ze(o,e(o).atkPlusDef=void 0)},z=k=>{k.forEach(M=>{Array.isArray(e(o)[M])&&Array.isArray(S[M])?ze(o,e(o)[M]=e(o)[M].length?[]:[...S[M]]):ze(o,e(o)[M]=S[M])})},A=(k,M,G)=>{Array.isArray(e(o)[M])&&Array.isArray(S[M])&&ze(o,e(o)[M]=[G])},le=async()=>{const M=(await e(x)).find(De=>De.id===e($e));if(!M)return;const G=await Gt;C(J,{...M,cardInfos:M.cardNames.map(De=>{const Ie=G.getCardInfo(De);return Ie===void 0&&console.error(De),Ie}).filter(De=>De!==void 0)})},be=()=>Dt.getAllDeckInfo().then(k=>(C($e,(k.find(M=>M.lastUsedAt.getTime()===Math.max(...k.map(G=>G.lastUsedAt.getTime())))??k[0]).id),k));let $e=he(-1),x=he(be()),T=he(e(x).then(k=>Dt.convertToObjectURL(k)));e(x).then(le);const W=()=>{C(x,be()),C(T,e(x).then(k=>Dt.convertToObjectURL(k))),le()};let J=he({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),ke=he(void 0),se=0;const ae=k=>{C(X,"CardDetail"),k.cardId!==void 0&&!k.description&&!k.pendulumDescription&&(se=k.cardId,Pa([k.cardId]).then(()=>{k.cardId===se&&C(ke,k)})),C(ke,k)},Te=async()=>{const M=(await e(x)).find(G=>G.id===e($e));if(!M)throw new Error("illegal state");return M},B=async()=>{const k=await Te();await k.saveDeckInfo({...k,name:e(J).name,cardNames:e(J).cardInfos.map(M=>M.name),lastUsedAt:new Date}),W()},F=async()=>{(await Dt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,e(J).cardInfos.map(M=>M.name))).saveDeckInfo(),W()},K=async k=>{const M=await Te();!k.shiftKey&&!confirm(`デッキ【${M.name}】を削除します。
よろしいですか？`)||(await M.delete(),W())},ce=async()=>{const k=await D.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!k)return;const M=[];if(k.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;M.push(...(await e(x)).map(G=>G.id))}await Promise.all(k.deckInfos.map(G=>Dt.createNewDeck(G.name,G.description,G.cardNames,G.lastUsedAt))),M.length&&await Promise.all(M.map(Dt.remove)),W()},we=()=>innerWidth<=1400?"compact":"wide";mt();var _e=gn(),Y=U(_e),b=r(a(Y),2),I=a(b),Z=a(I),ie=a(Z),$=r(a(ie),2),j=a($),N=r(ie,2),ee=a(N),re=a(ee),me=a(re),f=r(re,2),w=a(f),_=r(ee,2),m=a(_),P=a(m),q=r(m,2);ne(q,5,()=>ja,oe,(k,M)=>{var G=Vi(),De=a(G),Ie,Ge=r(De);g(()=>{Ie!==(Ie=e(M))&&(De.value=(De.__value=e(M))==null?"":e(M)),y(Ge,` ${ur[e(M)]??""}`)}),At(t,[],De,()=>(e(M),e(o).deckCardKinds),Ue=>ze(o,e(o).deckCardKinds=Ue)),s(k,G)});var xe=r(_,2);{var pe=k=>{var M=Xi(),G=a(M),De=a(G),Ie=r(G,2);ne(Ie,5,()=>Et,oe,(Ge,Ue)=>{var qe=Gi(),Me=a(qe),He,Qe=r(Me);g(()=>{He!==(He=e(Ue))&&(Me.value=(Me.__value=e(Ue))==null?"":e(Ue)),y(Qe,` ${Xt[e(Ue)]??""}${ea[e(Ue)]??""}`)}),At(v,[],Me,()=>(e(Ue),e(o).exMonsterCategories),ct=>ze(o,e(o).exMonsterCategories=ct)),s(Ge,qe)}),ve("click",De,()=>z(["monsterCategories"])),te(3,M,()=>fe,()=>({delay:0,duration:100})),s(k,M)};h(xe,k=>{e(o).deckCardKinds.includes("ExtraMonster")&&k(pe)})}var ue=r(xe,2);{var Q=k=>{var M=en(),G=U(M),De=a(G),Ie=a(De),Ge=r(De,2);ne(Ge,5,()=>za.filter(Ee=>!Et.includes(Ee)),oe,(Ee,Pe)=>{var ft=Qi(),tt=a(ft),Ct,jt=r(tt);g(()=>{Ct!==(Ct=e(Pe))&&(tt.value=(tt.__value=e(Pe))==null?"":e(Pe)),y(jt,` ${Xt[e(Pe)]??""}${ea[e(Pe)]??""}`)}),At(p,[],tt,()=>(e(Pe),e(o).monsterCategories),at=>ze(o,e(o).monsterCategories=at)),s(Ee,ft)});var Ue=r(G,2),qe=a(Ue),Me=a(qe),He=r(qe,2);ne(He,5,()=>Ma,oe,(Ee,Pe)=>{var ft=Ji(),tt=a(ft),Ct,jt=r(tt,2),at=r(jt);g(()=>{Ct!==(Ct=e(Pe))&&(tt.value=(tt.__value=e(Pe))==null?"":e(Pe)),Le(jt,`monster_attr ${e(Pe)??""} svelte-agxzr5`),y(at,` ${pa[e(Pe)]??""}`)}),At(c,[],tt,()=>(e(Pe),e(o).monsterAttributes),ot=>ze(o,e(o).monsterAttributes=ot)),s(Ee,ft)});var Qe=r(Ue,2),ct=a(Qe),Yt=a(ct),St=r(ct,2);ne(St,5,()=>Sa,oe,(Ee,Pe)=>{var ft=Zi(),tt=a(ft),Ct,jt=r(tt);g(()=>{Ct!==(Ct=e(Pe))&&(tt.value=(tt.__value=e(Pe))==null?"":e(Pe)),y(jt,` ${sa[e(Pe)]??""}
                    ${ga[e(Pe)]??""}`)}),At(u,[],tt,()=>(e(Pe),e(o).monsterTypes),at=>ze(o,e(o).monsterTypes=at)),ve("dblclick",ft,at=>A(at,"monsterTypes",e(Pe))),s(Ee,ft)});var Mt=r(Qe,2),Ut=a(Mt),Ht=a(Ut),rt=r(Ut,2),Ze=a(rt),st=r(a(Ze),2),it=r(st,4),vt=r(Ze,2),_t=r(a(vt),2),ut=r(_t,4),wt=r(vt,2),zt=r(a(wt),2),Je=r(zt,4),et=r(wt,2),nt=r(a(et),2);ve("click",Ie,()=>z(["monsterCategories"])),te(3,G,()=>fe,()=>({delay:0,duration:100})),ve("click",Me,()=>z(["monsterAttributes"])),te(3,Ue,()=>fe,()=>({delay:0,duration:100})),ve("click",Yt,()=>z(["monsterTypes"])),te(3,Qe,()=>fe,()=>({delay:0,duration:100})),ve("click",Ht,()=>z(["starLowerBound","starUpperBound","atkLowerBound","atkUpperBound","defLowerBound","defUpperBound","atkPlusDef"])),$t(st,()=>e(o).starLowerBound,Ee=>ze(o,e(o).starLowerBound=Ee)),$t(it,()=>e(o).starUpperBound,Ee=>ze(o,e(o).starUpperBound=Ee)),$t(_t,()=>e(o).atkLowerBound,Ee=>ze(o,e(o).atkLowerBound=Ee)),$t(ut,()=>e(o).atkUpperBound,Ee=>ze(o,e(o).atkUpperBound=Ee)),$t(zt,()=>e(o).defLowerBound,Ee=>ze(o,e(o).defLowerBound=Ee)),$t(Je,()=>e(o).defUpperBound,Ee=>ze(o,e(o).defUpperBound=Ee)),$t(nt,()=>e(o).atkPlusDef,Ee=>ze(o,e(o).atkPlusDef=Ee)),te(3,Mt,()=>fe,()=>({delay:0,duration:100})),s(k,M)};h(ue,k=>{(e(o).deckCardKinds.includes("Monster")||e(o).deckCardKinds.includes("ExtraMonster"))&&k(Q)})}var V=r(ue,2);{var O=k=>{var M=an(),G=a(M),De=a(G),Ie=r(G,2);ne(Ie,5,()=>$a.filter(Ge=>Ge!=="PendulumScale"),oe,(Ge,Ue)=>{var qe=tn(),Me=a(qe),He,Qe=r(Me);g(()=>{He!==(He=e(Ue))&&(Me.value=(Me.__value=e(Ue))==null?"":e(Ue)),y(Qe,` ${ia[e(Ue)]??""}`)}),At(l,[],Me,()=>(e(Ue),e(o).spellCategories),ct=>ze(o,e(o).spellCategories=ct)),s(Ge,qe)}),ve("click",De,()=>z(["spellCategories"])),te(3,M,()=>fe,()=>({delay:0,duration:100})),s(k,M)};h(V,k=>{e(o).deckCardKinds.includes("Spell")&&k(O)})}var ge=r(V,2);{var Re=k=>{var M=sn(),G=a(M),De=a(G),Ie=r(G,2);ne(Ie,5,()=>Da,oe,(Ge,Ue)=>{var qe=rn(),Me=a(qe),He,Qe=r(Me);g(()=>{He!==(He=e(Ue))&&(Me.value=(Me.__value=e(Ue))==null?"":e(Ue)),y(Qe,` ${na[e(Ue)]??""}`)}),At(E,[],Me,()=>(e(Ue),e(o).trapCategories),ct=>ze(o,e(o).trapCategories=ct)),s(Ge,qe)}),ve("click",De,()=>z(["trapCategories"])),te(3,M,()=>fe,()=>({delay:0,duration:100})),s(k,M)};h(ge,k=>{e(o).deckCardKinds.includes("Trap")&&k(Re)})}var We=r(ge,2),Fe=a(We),Ne=a(Fe),Xe=r(Fe,2);ne(Xe,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],oe,(k,M)=>{var G=nn(),De=a(G),Ie,Ge=r(De);g(()=>{Ie!==(Ie=M.key)&&(De.value=(De.__value=M.key)==null?"":M.key),y(Ge,` ${M.text??""}`)}),At(R,[],De,()=>(M.key,e(o).others),Ue=>ze(o,e(o).others=Ue)),s(k,G)});var Ae=r(Z,2);Ui(Ae,{get cardInfo(){return e(ke)}});var ye=r(I,2),Ce=a(ye);gt(Ce,()=>Gt,k=>{var M=on();s(k,M)},(k,M)=>{const G=de(()=>Object.values(e(M).dic));La(k,{mode:"List",get allCardInfos(){return e(G)},onAttention:ae,get searchCondition(){return e(o)},get deckCardInfos(){return e(J).cardInfos},set deckCardInfos(De){ze(J,e(J).cardInfos=De)},$$legacy:!0})});var Ye=r(ye,2),Oe=a(Ye);{var Ke=k=>{var M=je(),G=U(M);gt(G,()=>e(x),De=>{var Ie=fn();s(De,Ie)},(De,Ie)=>{var Ge=un(),Ue=U(Ge),qe=a(Ue),Me=r(a(qe),2),He=a(Me);g(()=>{e($e),Rt(()=>{e(Ie)})}),ne(He,5,()=>e(Ie),oe,(Je,et)=>{var nt=ln(),Ee={},Pe=a(nt);g(()=>{Ee!==(Ee=e(et).id)&&(nt.value=(nt.__value=e(et).id)==null?"":e(et).id),y(Pe,e(et).name)}),s(Je,nt)});var Qe=r(qe,2),ct=r(a(Qe),2),Yt=a(ct),St=r(Qe,4),Mt=r(a(St),2),Ut=a(Mt),Ht=r(Mt,2),rt=a(Ht),Ze=r(Ht,2),st=a(Ze),it=r(St,2),vt=r(a(it),2);gt(vt,Te,Je=>{var et=dn();s(Je,et)},(Je,et)=>{var nt=vn(),Ee=a(nt);g(Pe=>xt(Ee,"href",Pe),[()=>Dt.convertToObjectURL([e(et)])],de),s(Je,nt)});var _t=r(vt,2);gt(_t,()=>e(T),Je=>{var et=_n();s(Je,et)},(Je,et)=>{var nt=cn(),Ee=a(nt);g(()=>xt(Ee,"href",e(et))),s(Je,nt)});var ut=r(_t,2),wt=a(ut),zt=r(Ue,2);La(zt,{mode:"Deck",allCardInfos:[],onAttention:ae,get deckCardInfos(){return e(J).cardInfos},set deckCardInfos(Je){ze(J,e(J).cardInfos=Je)},$$legacy:!0}),Wt(He,()=>e($e),Je=>C($e,Je)),ve("change",He,le),$t(Yt,()=>e(J).name,Je=>ze(J,e(J).name=Je)),ve("click",Ut,B),ve("click",rt,F),ve("click",st,K),ve("click",wt,ce),s(De,Ge)}),s(k,M)},Se=k=>{var M=pn();s(k,M)};h(Oe,k=>{e(L)==="DeckEdit"||we()==="wide"?k(Ke):k(Se,!1)})}var Be=r(Y,2);Ki(Be,{modalController:D}),g((k,M,G)=>Le(Y,`deck_editor screen_size_${k??""} left_pain_mode_${M??""} main_view_mode_${G??""} svelte-agxzr5`),[we,()=>e(X).toLowerCase(),()=>e(L).toLowerCase()],de),ve("click",j,H),ve("click",me,()=>z(["name"])),$t(w,()=>e(o).name,k=>ze(o,e(o).name=k)),ve("click",P,()=>z(["deckCardKinds"])),ve("click",Ne,()=>z(["others"])),te(3,We,()=>fe,()=>({delay:0,duration:100})),ve("focusin",Z,()=>{C(X,"SearchCondition"),C(L,"SearchCondition")}),ve("click",Z,()=>{C(X,"SearchCondition"),C(L,"SearchCondition")}),ve("click",Ye,()=>{C(L,"DeckEdit")}),ve("focusin",Ye,()=>{C(L,"DeckEdit")}),s(d,_e),ht()}const mn=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],hn=3;var bn=n('<input class="game_mode_radio svelte-sy4ydn" type="radio" name="game_mode"> <label> </label>',1),xn=n('<option class="svelte-sy4ydn"> </option>'),kn=n('<option class="svelte-sy4ydn"> </option>'),wn=n('<option class="svelte-sy4ydn"> </option>'),Cn=n('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_deck_selector" class="deck_selector svelte-sy4ydn"><option class="svelte-sy4ydn">デフォルト</option><!></select></div></td></tr>'),Dn=n('<option class="svelte-sy4ydn"> </option>'),$n=n('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">対戦相手：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select> <div class="svelte-sy4ydn"> </div></div></td></tr> <!> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">先攻後攻：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select></div></td></tr>',1),Sn=n('<option class="svelte-sy4ydn"> </option>'),Mn=n('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-sy4ydn">難易度：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="difficulty_selector" class="difficulty_selector svelte-sy4ydn"></select></div></td></tr>'),zn=n('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label class="config_row_label svelte-sy4ydn" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"></div></td></tr> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="deck_selector" class="deck_selector svelte-sy4ydn"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">duel start!</button></div></td></tr>',1),jn=n('<tr><td colspan="2" class="svelte-sy4ydn"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),Tn=n('<tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">deck edit</button></div></td></tr>'),Bn=n('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="duelist_name" class="config_row_label duelist_name svelte-sy4ydn">名前：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><input id="duelist_name" class="duelist_name svelte-sy4ydn" type="text"></div></td></tr> <!> <!>',1),En=n('<tr><td colspan="2" class="svelte-sy4ydn"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),An=n('<div class="app_body svelte-sy4ydn"><table class="config_table svelte-sy4ydn"><tbody><!></tbody></table></div>'),Yn=n('<span class="svelte-sy4ydn"> </span> <span class="svelte-sy4ydn"> </span>',1),Un=n('<div class="result_title result_win svelte-sy4ydn">YOU WIN</div>'),Ln=n('<div class="result_title result_lose svelte-sy4ydn">YOU LOSE</div>'),Nn=n('<div class="result_title result_draw svelte-sy4ydn">DRAW</div>'),Pn=n('<div class="twitter_share_button_wrapper svelte-sy4ydn"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-sy4ydn">X(twitter)でシェアする</a></div>'),qn=n('<div class="result svelte-sy4ydn"><!> <div class="reason_of_end svelte-sy4ydn"> </div> <!> <div class="svelte-sy4ydn"><button class="white_button svelte-sy4ydn">TOPへ戻る</button></div></div>'),Fn=n('<main style="flex-direction: column; display :flex" class="svelte-sy4ydn"><div class="link link_left svelte-sy4ydn"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-sy4ydn">posfie(toggeter)</a></div> <div class="link link_right svelte-sy4ydn"><a class="a_button svelte-sy4ydn" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">現時点とこの先のこと</a></div> <!> <div class="footer card_summary svelte-sy4ydn"><!></div> <div class="footer debug_info svelte-sy4ydn"><span class="svelte-sy4ydn"> </span> <span class="user_agent_info svelte-sy4ydn"> </span> <span class="screen_info svelte-sy4ydn"> </span></div> <!></main>');function Hn(d,i){yt(i,!1);const t=new fr("stk_ygo_svelte",hn,mn);let v=he(0),p=he(0),c=he(),u=he("FtkChallenge"),l=he("None"),E=he(0),R=he(""),D=he(void 0);const S="https://setta238.github.io/stk_ygo_svelte/",o="遊戯王deそりてあ",L="ninja_no",X=pr.getOrCreateNew(t).then(f=>(C(u,Ta.includes(f.previousGameMode)?f.previousGameMode:"FtkChallenge"),Te(f.previousNpcId),f)),H=f=>{var _;const w=f.find(m=>m.lastUsedAt.getTime()===Math.max(...f.map(P=>P.lastUsedAt.getTime())))??f[0];C(E,w.id),e(u)==="FtkChallenge"&&w.deckType!=="Preset"&&C(E,((_=Nt.find(m=>m.deckType==="Preset"))==null?void 0:_.id)??e(E))};let z=he(Dt.getAllDeckInfo(t).then(f=>(Promise.all(f.filter(w=>!w.lastUsedAt).map(w=>{w.saveDeckInfo()})),H(f),f)));const A=async()=>{const f=e(E);let w=(await e(z)).find(m=>m.id===f)??(await be()).find(m=>m.id===f);w&&await w.updateTimestamp();let _=w;if(_||(_=Nt.find(m=>m.id===f)),!_)throw new Error("illegal state");return _},le=async()=>{(await X).save({previousGameMode:e(u)})},be=()=>(C(z,Dt.getAllDeckInfo(t).then(f=>(H(f),f))),e(z)),$e=async()=>{(await e(z)).length||(await Dt.prepareSampleDeck(),be())},x=async()=>{await Promise.all([le(),$e()]);const f=await A(),w=await X;let _=It.find(q=>q.id===Number.MIN_SAFE_INTEGER)??It[0],m=Nt.find(q=>q.id===Number.MIN_SAFE_INTEGER)??Nt[0],P="PlayFirst";e(u)==="FtkChallenge"?_=It.filter(q=>q.npcType==="FtkChallenge").find(q=>q.difficulty===w.previousDifficulty)??_:e(u)==="Free"&&(_=It.find(q=>q.id===w.previousNpcId)??_,m=Nt.slice(-1)[0],P=w.previousStartMode),_.npcType!=="FtkChallenge"&&w.previousNpcDeckId>-1?m=(await e(z)).find(q=>q.id===w.previousNpcDeckId)??m:m=Nt.find(q=>q.id===_.id)??m,C(c,new hr(w,"Player",f,[],_,"NPC",m,[],P)),e(c).onDuelEnd.append(()=>(C(c,e(c)),"RemoveMe"))},T=async()=>{await Promise.all([le(),$e()]),C(l,"DeckEdit")},W=async f=>{await le(),f.key==="Enter"&&!f.repeat&&(await X).save()},J=()=>{C(z,be()),C(c,void 0),C(l,"None")};let ke=Date.now();const se=f=>{Date.now()-ke<200||(ke=Date.now(),C(u,f),be())},ae=f=>{Te(Number(f.currentTarget.value))},Te=f=>{var w;C(D,It.find(_=>_.id===f)),C(R,((w=e(D))==null?void 0:w.description)??"")};$e(),mt();var B=Fn(),F=r(a(B),2),K=a(F),ce=r(F,2);{var we=f=>{var w=je(),_=U(w);gt(_,()=>X,null,(m,P)=>{_i(m,{get duel(){return e(c)},get userProfile(){return e(P)}})}),s(f,w)},_e=f=>{var w=je(),_=U(w);{var m=q=>{yn(q,{})},P=q=>{var xe=An(),pe=a(xe),ue=a(pe),Q=a(ue);gt(Q,()=>X,V=>{var O=En();s(V,O)},(V,O)=>{var ge=Bn(),Re=U(ge),We=a(Re),Fe=a(We),Ne=r(We),Xe=a(Ne),Ae=a(Xe),ye=r(Re,2);gt(ye,()=>e(z),Oe=>{var Ke=jn();s(Oe,Ke)},(Oe,Ke)=>{var Se=zn(),Be=U(Se),k=a(Be),M=a(k),G=r(k),De=a(G);ne(De,5,()=>Ta,oe,(rt,Ze)=>{var st=bn(),it=U(st),vt=r(it,2),_t=a(vt);g(ut=>{xt(it,"id",`game_mode_radio_${ut??""}`),yr(it,e(Ze)),mr(it,e(u)===e(Ze)),Le(vt,`game_mode_tab_label game_mode_tab_${ut??""} svelte-sy4ydn`),xt(vt,"for",`game_mode_radio_${ut??""}`),y(_t,e(Ze))},[()=>e(Ze).toLowerCase()],de),ve("change",it,()=>se(e(Ze))),s(rt,st)});var Ie=r(Be,2),Ge=a(Ie),Ue=a(Ge),qe=r(Ge),Me=a(qe),He=a(Me);g(()=>{e(E),Rt(()=>{e(u),e(Ke)})}),ne(He,5,()=>e(u)==="FtkChallenge"?Nt.filter(rt=>rt.deckType==="Preset"):e(Ke),oe,(rt,Ze)=>{var st=xn(),it={},vt=a(st);g(()=>{it!==(it=e(Ze).id)&&(st.value=(st.__value=e(Ze).id)==null?"":e(Ze).id),y(vt,e(Ze).name)}),s(rt,st)});var Qe=r(Ie,2);{var ct=rt=>{var Ze=$n(),st=U(Ze),it=a(st),vt=a(it),_t=r(it),ut=a(_t),wt=a(ut);g(()=>{e(O),Rt(()=>{})}),ne(wt,5,()=>It,oe,(at,ot)=>{var bt=kn(),Lt={},Ot=a(bt);g(()=>{Lt!==(Lt=e(ot).id)&&(bt.value=(bt.__value=e(ot).id)==null?"":e(ot).id),y(Ot,e(ot).name)}),s(at,bt)});var zt=r(wt,2),Je=a(zt),et=r(st,2);{var nt=at=>{var ot=Cn(),bt=a(ot),Lt=a(bt),Ot=r(bt),ha=a(Ot),ba=a(ha);g(()=>{e(O),Rt(()=>{e(Ke)})});var oa=a(ba);oa.value=(oa.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var qa=r(oa);ne(qa,1,()=>e(Ke),oe,(la,Jt)=>{var Zt=wn(),xa={},Fa=a(Zt);g(()=>{xa!==(xa=e(Jt).id)&&(Zt.value=(Zt.__value=e(Jt).id)==null?"":e(Jt).id),y(Fa,e(Jt).name)}),s(la,Zt)}),te(3,Lt,()=>fe,()=>({duration:200})),te(3,bt,()=>fe,()=>({duration:200})),Wt(ba,()=>e(O).previousNpcDeckId,la=>e(O).previousNpcDeckId=la),te(3,ha,()=>fe,()=>({duration:200})),te(3,Ot,()=>fe,()=>({duration:200})),te(3,ot,()=>fe,()=>({duration:200})),s(at,ot)};h(et,at=>{var ot;((ot=e(D))==null?void 0:ot.npcType)!=="FtkChallenge"&&at(nt)})}var Ee=r(et,2),Pe=a(Ee),ft=a(Pe),tt=r(Pe),Ct=a(tt),jt=a(Ct);g(()=>{e(O),Rt(()=>{})}),ne(jt,5,()=>fa(Ba),oe,(at,ot)=>{var bt=Dn(),Lt={},Ot=a(bt);g(()=>{Lt!==(Lt=e(ot))&&(bt.value=(bt.__value=e(ot))==null?"":e(ot)),y(Ot,Ba[e(ot)])}),s(at,bt)}),g(()=>y(Je,`※${e(R)??""}`)),te(3,vt,()=>fe,()=>({duration:200})),te(3,it,()=>fe,()=>({duration:200})),ve("change",wt,ae),Wt(wt,()=>e(O).previousNpcId,at=>e(O).previousNpcId=at),te(3,ut,()=>fe,()=>({duration:200})),te(3,_t,()=>fe,()=>({duration:200})),te(3,st,()=>fe,()=>({duration:200})),te(3,ft,()=>fe,()=>({duration:200})),te(3,Pe,()=>fe,()=>({duration:200})),Wt(jt,()=>e(O).previousStartMode,at=>e(O).previousStartMode=at),te(3,Ct,()=>fe,()=>({duration:200})),te(3,tt,()=>fe,()=>({duration:200})),te(3,Ee,()=>fe,()=>({duration:200})),s(rt,Ze)},Yt=rt=>{var Ze=je(),st=U(Ze);{var it=vt=>{var _t=Mn(),ut=a(_t),wt=a(ut),zt=r(ut),Je=a(zt),et=a(Je);g(()=>{e(O),Rt(()=>{})}),ne(et,5,()=>br,oe,(nt,Ee)=>{var Pe=Sn(),ft={},tt=a(Pe);g(()=>{ft!==(ft=e(Ee))&&(Pe.value=(Pe.__value=e(Ee))==null?"":e(Ee)),y(tt,e(Ee))}),s(nt,Pe)}),te(3,wt,()=>fe,()=>({duration:200})),te(3,ut,()=>fe,()=>({duration:200})),Wt(et,()=>e(O).previousDifficulty,nt=>e(O).previousDifficulty=nt),te(3,Je,()=>fe,()=>({duration:200})),te(3,zt,()=>fe,()=>({duration:200})),te(3,_t,()=>fe,()=>({duration:200})),s(vt,_t)};h(st,vt=>{e(u)==="FtkChallenge"&&vt(it)},!0)}s(rt,Ze)};h(Qe,rt=>{e(u)==="Free"?rt(ct):rt(Yt,!1)})}var St=r(Qe,2),Mt=a(St),Ut=a(Mt),Ht=a(Ut);te(3,M,()=>fe,()=>({duration:200})),te(3,k,()=>fe,()=>({duration:200})),te(3,De,()=>fe,()=>({duration:200})),te(3,G,()=>fe,()=>({duration:200})),te(3,Be,()=>fe,()=>({duration:200})),te(3,Ue,()=>fe,()=>({duration:200})),te(3,Ge,()=>fe,()=>({duration:200})),Wt(He,()=>e(E),rt=>C(E,rt)),te(3,Me,()=>fe,()=>({duration:200})),te(3,qe,()=>fe,()=>({duration:200})),te(3,Ie,()=>fe,()=>({duration:200})),ve("click",Ht,x),te(3,Ut,()=>fe,()=>({duration:200})),s(Oe,Se)});var Ce=r(ye,2);{var Ye=Oe=>{var Ke=Tn(),Se=a(Ke),Be=a(Se),k=a(Be);ve("click",k,T),te(3,Be,()=>fe,()=>({duration:200})),te(3,Se,()=>fe,()=>({duration:200})),te(3,Ke,()=>fe,()=>({duration:200})),s(Oe,Ke)};h(Ce,Oe=>{e(u)==="Free"&&Oe(Ye)})}te(3,Fe,()=>fe,()=>({duration:200})),te(3,We,()=>fe,()=>({duration:200})),$t(Ae,()=>e(O).name,Oe=>e(O).name=Oe),ve("keypress",Ae,W),te(3,Xe,()=>fe,()=>({duration:200})),te(3,Ne,()=>fe,()=>({duration:200})),te(3,Re,()=>fe,()=>({duration:200})),s(V,ge)}),s(q,xe)};h(_,q=>{e(l)==="DeckEdit"?q(m):q(P,!1)},!0)}s(f,w)};h(ce,f=>{e(c)?f(we):f(_e,!1)})}var Y=r(ce,2),b=a(Y);gt(b,()=>Gt,f=>{var w=dt("読み込み中");s(f,w)},(f,w)=>{var _=Yn(),m=U(_),P=a(m),q=r(m,2),xe=a(q);g((pe,ue,Q)=>{y(P,`公式DB上のカード${pe??""}枚`),y(xe,`実装済カード（効果あり）${ue??""}枚 （効果なし）${Q??""}枚`)},[()=>e(w).knmCount.toLocaleString(),()=>e(w).definitionCount.toLocaleString(),()=>e(w).nonDefinitionCount.toLocaleString()],de),s(f,_)});var I=r(Y,2),Z=a(I),ie=a(Z),$=r(Z,2),j=a($),N=r($,2),ee=a(N),re=r(I,2);{var me=f=>{var w=qn(),_=a(w);{var m=O=>{var ge=je(),Re=U(ge);{var We=Ne=>{var Xe=Un();s(Ne,Xe)},Fe=Ne=>{var Xe=je(),Ae=U(Xe);{var ye=Ce=>{var Ye=Ln();s(Ce,Ye)};h(Ae,Ce=>{e(c).winner.seat==="Above"&&Ce(ye)},!0)}s(Ne,Xe)};h(Re,Ne=>{e(c).winner.seat==="Below"?Ne(We):Ne(Fe,!1)})}s(O,ge)},P=O=>{var ge=Nn();s(O,ge)};h(_,O=>{e(c).winner?O(m):O(P,!1)})}var q=r(_,2),xe=a(q),pe=r(q,2);{var ue=O=>{var ge=Pn(),Re=a(ge);g(()=>xt(Re,"href",`https://x.com/share?url=${S}&text=${e(c).twitterShareText??""}&hashtags=${o}&via=${L}`)),s(O,ge)};h(pe,O=>{e(c).twitterShareText&&O(ue)})}var Q=r(pe,2),V=a(Q);g(()=>y(xe,e(c).reasonOfEnd)),ve("click",V,J),te(3,w,()=>wr,()=>({delay:200,duration:200})),s(f,w)};h(re,f=>{e(c)&&e(c).isEnded&&f(me)})}g(()=>{y(ie,"build at: 20260104_175649"),y(j,gr.text),y(ee,`w:${e(v)??""}px h:${e(p)??""}px`)}),ta("innerWidth",f=>C(v,f)),ta("innerHeight",f=>C(p,f)),ve("click",K,J),s(d,B),ht()}xr(Hn,{target:document.getElementById("app")});
