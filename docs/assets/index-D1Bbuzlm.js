var Ha=Object.defineProperty;var ha=v=>{throw TypeError(v)};var Oa=(v,i,t)=>i in v?Ha(v,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):v[i]=t;var Ze=(v,i,t)=>Oa(v,typeof i!="symbol"?i+"":i,t),ya=(v,i,t)=>i.has(v)||ha("Cannot "+t);var tt=(v,i,t)=>(ya(v,i,"read from private field"),t?t.call(v):i.get(v)),Ut=(v,i,t)=>i.has(v)?ha("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(v):i.set(v,t),aa=(v,i,t,d)=>(ya(v,i,"write to private field"),d?d.call(v,t):i.set(v,t),t);import{s as ka,r as Pa,a as S,b as La,l as Ra,g as e,d as Na,p as rt,c as Re,m as he,i as st,t as n,e as a,f as b,h as u,j as de,k as Ee,n as pt,o as be,q as r,u as it,v as Pe,D as Wa,w as Me,x as U,y as s,z as ie,A as St,B as ae,C as oe,E as f,F as Ka,G as at,H as oa,I as za,J as Va,K as Mt,L as ht,M as va,N as Xt,O as da,P as Qt,Q as ca,R as Zt,S as Jt,T as Ga,U as Xa,V as Qa,W as Za,X as Ja,Y as er,Z as tr,_ as Kt,$ as yt,a0 as zt,a1 as ra,a2 as Ia,a3 as ar,a4 as rr,a5 as sr,a6 as ir,a7 as nr,a8 as ft,a9 as lr,aa as or,ab as vr,ac as wa,ad as xa,ae as Ca,af as Da,ag as $a,ah as Sa,ai as At,aj as Yt,ak as sa,al as Ma,am as dr,an as Dt,ao as cr,ap as _r,aq as ja,ar as Et,as as $t,at as ur,au as fr,av as pr,aw as gr,ax as Ta,ay as mr,az as br}from"../chunk/entity_proc_20251231_164009.js";import"../chunk/card_json_20251231_164009.js";import"../chunk/others_json_20251231_164009.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))d(_);new MutationObserver(_=>{for(const c of _)if(c.type==="childList")for(const g of c.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&d(g)}).observe(document,{childList:!0,subtree:!0});function t(_){const c={};return _.integrity&&(c.integrity=_.integrity),_.referrerPolicy&&(c.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?c.credentials="include":_.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function d(_){if(_.ep)return;_.ep=!0;const c=t(_);fetch(_.href,c)}})();const hr=v=>v;function _a(v){const i=v-1;return i*i*i+1}function qa(v){const i=typeof v=="string"&&v.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[v,"px"]}function yr(v,{delay:i=0,duration:t=400,easing:d=hr}={}){const _=+getComputedStyle(v).opacity;return{delay:i,duration:t,easing:d,css:c=>`opacity: ${c*_}`}}function kr(v,{delay:i=0,duration:t=400,easing:d=_a,x:_=0,y:c=0,opacity:g=0}={}){const l=getComputedStyle(v),E=+l.opacity,P=l.transform==="none"?"":l.transform,D=E*(1-g),[o,W]=qa(_),[F,K]=qa(c);return{delay:i,duration:t,easing:d,css:(z,A)=>`
			transform: ${P} translate(${(1-z)*o}${W}, ${(1-z)*F}${K});
			opacity: ${E-D*A}`}}function fe(v,{delay:i=0,duration:t=400,easing:d=_a,axis:_="y"}={}){const c=getComputedStyle(v),g=+c.opacity,l=_==="y"?"height":"width",E=parseFloat(c[l]),P=_==="y"?["top","bottom"]:["left","right"],D=P.map(Y=>`${Y[0].toUpperCase()}${Y.slice(1)}`),o=parseFloat(c[`padding${D[0]}`]),W=parseFloat(c[`padding${D[1]}`]),F=parseFloat(c[`margin${D[0]}`]),K=parseFloat(c[`margin${D[1]}`]),z=parseFloat(c[`border${D[0]}Width`]),A=parseFloat(c[`border${D[1]}Width`]);return{delay:i,duration:t,easing:d,css:Y=>`overflow: hidden;opacity: ${Math.min(Y*20,1)*g};${l}: ${Y*E}px;padding-${P[0]}: ${Y*o}px;padding-${P[1]}: ${Y*W}px;margin-${P[0]}: ${Y*F}px;margin-${P[1]}: ${Y*K}px;border-${P[0]}-width: ${Y*z}px;border-${P[1]}-width: ${Y*A}px;min-${l}: 0`}}function Ea(v,i){for(const t in i)v[t]=i[t];return v}function wr({fallback:v,...i}){const t=new Map,d=new Map;function _(g,l,E){const{delay:P=0,duration:D=C=>Math.sqrt(C)*30,easing:o=_a}=Ea(Ea({},i),E),W=g.getBoundingClientRect(),F=l.getBoundingClientRect(),K=W.left-F.left,z=W.top-F.top,A=W.width/F.width,Y=W.height/F.height,re=Math.sqrt(K*K+z*z),ne=getComputedStyle(l),je=ne.transform==="none"?"":ne.transform,T=+ne.opacity;return{delay:P,duration:typeof D=="function"?D(re):D,easing:o,css:(C,V)=>`
			   opacity: ${C*T};
			   transform-origin: top left;
			   transform: ${je} translate(${V*K}px,${V*z}px) scale(${C+(1-C)*A}, ${C+(1-C)*Y});
		   `}}function c(g,l,E){return(P,D)=>(g.set(D.key,P),()=>{if(l.has(D.key)){const o=l.get(D.key);return l.delete(D.key),_(o,P,D)}return g.delete(D.key),v&&v(P,D,E)})}return[c(d,t,!1),c(t,d,!0)]}function Aa(v){return Object.prototype.toString.call(v)==="[object Date]"}function xr(v){return v}function ia(v){const i=v-1;return i*i*i+1}function na(v,i){if(v===i||v!==v)return()=>v;const t=typeof v;if(t!==typeof i||Array.isArray(v)!==Array.isArray(i))throw new Error("Cannot interpolate values of different type");if(Array.isArray(v)){const d=i.map((_,c)=>na(v[c],_));return _=>d.map(c=>c(_))}if(t==="object"){if(!v||!i)throw new Error("Object cannot be null");if(Aa(v)&&Aa(i)){const c=v.getTime(),l=i.getTime()-c;return E=>new Date(c+E*l)}const d=Object.keys(i),_={};return d.forEach(c=>{_[c]=na(v[c],i[c])}),c=>{const g={};return d.forEach(l=>{g[l]=_[l](c)}),g}}if(t==="number"){const d=i-v;return _=>v+_*d}return()=>i}var bt,Bt,Ft,jt;const ua=class ua{constructor(i,t={}){Ut(this,bt,ka(void 0));Ut(this,Bt,ka(void 0));Ut(this,Ft);Ut(this,jt,null);tt(this,bt).v=tt(this,Bt).v=i,aa(this,Ft,t)}static of(i,t){const d=new ua(i(),t);return Pa(()=>{d.set(i())}),d}set(i,t){var o;S(tt(this,Bt),i);let{delay:d=0,duration:_=400,easing:c=xr,interpolate:g=na}={...tt(this,Ft),...t};if(_===0)return(o=tt(this,jt))==null||o.abort(),S(tt(this,bt),i),Promise.resolve();const l=La.now()+d;let E,P=!1,D=tt(this,jt);return aa(this,jt,Ra(W=>{if(W<l)return!0;if(!P){P=!0;const K=tt(this,bt).v;E=g(K,i),typeof _=="function"&&(_=_(K,i)),D==null||D.abort()}const F=W-l;return F>_?(S(tt(this,bt),i),!1):(S(tt(this,bt),E(c(F/_))),!0)})),tt(this,jt).promise}get current(){return e(tt(this,bt))}get target(){return e(tt(this,Bt))}set target(i){this.set(i)}};bt=new WeakMap,Bt=new WeakMap,Ft=new WeakMap,jt=new WeakMap;let Vt=ua;var Cr=n('<div class="phase_display svelte-1ycsdg6"><span class="svelte-1ycsdg6"> </span> </div>'),Dr=n('<div class="lifepoint_display svelte-1ycsdg6"><div class="svelte-1ycsdg6"> </div> <div class="svelte-1ycsdg6"> </div></div>'),$r=(v,i,t)=>i(e(t)),Sr=n('<div class="svelte-1ycsdg6"><button class="phase_button svelte-1ycsdg6"> </button></div>'),Mr=n("<div><!></div>"),jr=n('<div class="svelte-1ycsdg6"><!></div>'),Tr=n("<div><!></div>"),qr=n('<div class="config_button_wrapper svelte-1ycsdg6"><button id="config_button" class="svelte-1ycsdg6">⚙</button></div>'),Er=n("<!> <!> <!> <!>",1),Ar=n('<div style="position: absolute;" class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Yr=n('<div style="position: absolute; top:0rem" class="svelte-1ycsdg6">｛効果対象｝</div>'),Br=n('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Nr=n(" <!> 】",1),Ir=n('<div style="position: absolute; bottom:0rem" class="svelte-1ycsdg6"> <!></div>'),Ur=n("<!> <!>",1),Fr=n('<div class="badge svelte-1ycsdg6"> </div>'),Hr=n('<div class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Or=n("<!> <!> <!> <!>",1),Pr=n('<td><div role="listitem"><!></div></td>');function Lr(v,i){rt(i,!1);let t=Re(i,"view",12),d=Re(i,"row",8),_=Re(i,"column",8),c=Re(i,"selectedEntities",28,()=>[]),g=Re(i,"selectedCells",28,()=>[]),l=he(t().getCell(d(),_())),E=he(new Vt(e(l).field.duel.duelists.Above.lp,{duration:400,easing:ia})),P=he(new Vt(e(l).field.duel.duelists.Below.lp,{duration:400,easing:ia}));const D=()=>{S(l,t().getCell(d(),_())),Pe(E,e(E).target=e(l).field.duel.duelists.Above.lp),Pe(P,e(P).target=e(l).field.duel.duelists.Below.lp)};e(l).onUpdate.append(D),t().onDuelUpdate.append(D),t().modalController.onUpdate.append(D);let o,W=he([]),F=()=>console.log("hoge"),K,z=he([]),A=he(!1),Y=he(!1),re=!1;const ne=$=>{var H,Q;S(ce,[]),c().reset(),o=$.activator,F=$.resolve,S(W,$.dummyActionInfos),S(z,$.chainBlockInfos.flatMap(ee=>ee.selectedEntities).getDistinct()),K=$.entitiesChoices,S(A,!1),S(Y,((H=$.cellsChoices)==null?void 0:H.selectables.includes(e(l)))??!1),re=e(Y)&&((Q=$.cellsChoices)==null?void 0:Q.qty)===1,D()};t().onWaitStart.append(ne);const je=()=>{o=void 0,S(W,[]),F=()=>{console.log("hoge")},K=void 0,S(z,[]),S(A,!1),S(Y,!1),re=!1};t().onWaitEnd.append(je);let T=he(!1),C=[];const V=$=>{C=$.filter(H=>H.dests.includes(e(l))),S(T,C.length>0),D()},se=()=>{C=[],S(T,!1),D()};t().onDragStart.append(V),t().onDragEnd.append(se);const[ye,J]=Gs;let ce=he([]);const Ue=$=>{if(o=void 0,e(l)===$.to||e(l).entities.includes($.entity)){S(ce,[...e(ce),$]);const H=$.resolve;S(l,e(l)),setTimeout(()=>{S(ce,e(ce).filter(Q=>Q!==$)),$.count++,$.count>1&&H()},600)}};t().onAnimation.append(Ue);const ke=$=>{F({phaseChange:$})},B=()=>e(l).isStackCell&&e(l).entities.flatMap($=>$.actions).filter($=>e(W).map(H=>H.action.seq).some(H=>H===$.seq)).length>0,N=$=>{var H;if(((H=$.target)==null?void 0:H.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),re)F({selectedCells:[e(l)]});else if(e(Y))S(A,!e(A)),g(e(A)?[...g(),e(l)]:g().filter(Q=>Q!==e(l)));else if(e(l).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(l),!0),t().requireUpdate();const Q=e(l).entities.flatMap(p=>p.actions).map(p=>p.seq),ee=e(W).filter(p=>Q.includes(p.action.seq));if(ee.length){if(!o)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:o,dummyActionInfos:ee,cancelable:!0}).then(p=>{p&&F({actionInfo:p})});return}}t().requireUpdate(),console.info(e(l),_e(...e(l).visibleEntities))},le=$=>{$.preventDefault(),$.dataTransfer&&($.dataTransfer.dropEffect="move")},pe=$=>{$.preventDefault(),console.info("drop",$,e(T),C),$.dataTransfer&&($.dataTransfer.dropEffect="move");try{if(e(T)&&C){if(C.length===1){const H=C[0];F({actionInfo:{...H,dest:e(l)}})}else if(C.length>1){if(!o)throw new Wa("想定されない状態");e(l).field.duel.view.modalController.terminateAll(),e(l).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:o,dummyActionInfos:C.map(H=>({...H,dest:e(l)})),cancelable:!1}).then(H=>{F({actionInfo:H})})}}}finally{t().removeDraggingActions()}},_e=(...$)=>{if(t().waitMode==="Animation")return"Disabled";if(K&&K.selectables.find(Q=>$.find(ee=>Q===ee)))return"Selectable";if(!e(W)||e(W).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(Q=>Q.state==="Shown"))return"Disabled";const H=e(W).filter(Q=>$.includes(Q.action.entity));return H.length===0?"Disabled":e(l).isStackCell||H[0].action.entity!==$[0]?"Clickable":H.some(Q=>Q.dests.length)?"Draggable":"Clickable"};st();var I=Pr(),m=a(I);m.__click=N;var X=a(m);{var te=$=>{var H=Me(),Q=U(H);{var ee=p=>{var q=Me(),j=U(q);{var L=y=>{var Z=Cr(),we=a(Z),De=a(we),ge=s(we,1,!0);u((ue,M)=>{f(De,ue),f(ge,M)},[()=>String(e(l).field.duel.clock.turn).padStart(2,"0"),()=>e(l).field.duel.phase.toUpperCase()],de),r(y,Z)},w=y=>{var Z=Me(),we=U(Z);{var De=ue=>{var M=Dr(),O=a(M),me=a(O),$e=s(O,2),Le=a($e);u((Ye,Te)=>{f(me,Ye),f(Le,Te)},[()=>Math.floor(e(E).current),()=>Math.floor(e(P).current)],de),r(ue,M)},ge=ue=>{var M=Me(),O=U(M);{var me=$e=>{var Le=Me(),Ye=U(Le);{var Te=Fe=>{var Ke=Me(),k=U(Ke);{var h=x=>{var R=Me(),Se=U(R);ie(Se,1,()=>t().duel.nextPhaseList,oe,(Ie,G)=>{var xe=Sr(),qe=a(xe);qe.__click=[$r,ke,G];var We=a(qe);u(Ne=>f(We,Ne),[()=>e(G).toUpperCase()],de),r(Ie,xe)}),r(x,R)};b(k,x=>{t().duel.isEnded||x(h)})}r(Fe,Ke)};b(Ye,Fe=>{t().waitMode==="Free"&&Fe(Te)})}r($e,Le)};b(O,$e=>{e(l).column===5&&$e(me)},!0)}r(ue,M)};b(we,ue=>{e(l).column===3?ue(De):ue(ge,!1)},!0)}r(y,Z)};b(j,y=>{e(l).column===1?y(L):y(w,!1)})}r(p,q)};b(Q,p=>{e(l).row===3&&p(ee)})}r($,H)},ve=$=>{var H=Me(),Q=U(H);{var ee=q=>{var j=Er();const L=de(()=>e(ce).find(M=>M.to===e(l)));var w=U(j);{var y=M=>{var O=Mr(),me=a(O);St(me,{get entity(){return e(L).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),u(()=>Ee(O,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),ae(1,O,()=>J,()=>({key:e(L).entity.seq})),r(M,O)};b(w,M=>{e(L)&&e(L).index==="Top"&&M(y)})}var Z=s(w,2);ie(Z,1,()=>e(l).visibleEntities,oe,(M,O)=>{var me=Me(),$e=U(me);{var Le=Ye=>{var Te=jr(),Fe=a(Te);const Ke=de(()=>_e(e(O))),k=de(()=>e(W).filter(h=>h.action.entity===e(O)));St(Fe,{get entity(){return e(O)},get state(){return e(Ke)},get dummyActionInfos(){return e(k)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(h){c(h)},$$legacy:!0}),ae(2,Te,()=>ye,()=>({key:e(O).seq})),r(Ye,Te)};b($e,Ye=>{e(ce).every(Te=>Te.entity.seq!==e(O).seq)&&Ye(Le)})}r(M,me)});var we=s(Z,2);{var De=M=>{var O=Tr(),me=a(O);St(me,{get entity(){return e(L).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),u(()=>Ee(O,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),ae(1,O,()=>J,()=>({key:e(L).entity.seq})),r(M,O)};b(we,M=>{e(L)&&e(L).index!=="Top"&&M(De)})}var ge=s(we,2);{var ue=M=>{var O=qr();r(M,O)};b(ge,M=>{e(l).owner.seat==="Below"&&M(ue)})}r(q,j)},p=q=>{var j=Or();const L=de(()=>e(ce).find(O=>O.to===e(l)));var w=U(j);{var y=O=>{var me=Ar(),$e=a(me);St($e,{get entity(){return e(L).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),ae(1,me,()=>J,()=>({key:e(L).entity.seq})),r(O,me)};b(w,O=>{e(L)&&e(L).index!=="Top"&&O(y)})}var Z=s(w,2);{var we=O=>{var me=Ur(),$e=U(me);ie($e,1,()=>e(l).visibleEntities.map((Te,Fe)=>({index:Fe,entity:Te})).toReversed(),oe,(Te,Fe)=>{var Ke=Me(),k=U(Ke);{var h=x=>{var R=Br();const Se=de(()=>!e(l).isStackCell&&e(Fe).index===0?_e(...e(l).visibleEntities):void 0);var Ie=U(R);{var G=Ne=>{var ze=Yr();r(Ne,ze)};b(Ie,Ne=>{e(z).includes(e(Fe).entity)&&Ne(G)})}var xe=s(Ie,2),qe=a(xe);const We=de(()=>e(Fe).index===0?e(W).filter(Ne=>e(l).visibleEntities.includes(Ne.action.entity)):void 0);St(qe,{get entity(){return e(Fe).entity},get state(){return e(Se)},get dummyActionInfos(){return e(We)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(Ne){c(Ne)},$$legacy:!0}),u(()=>Ee(xe,`duel_card_wrapper ${(e(Fe).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1ycsdg6`)),ae(2,xe,()=>ye,()=>({key:e(Fe).entity.seq})),r(x,R)};b(k,x=>{e(ce).every(R=>R.entity.seq!==e(Fe).entity.seq)&&x(h)})}r(Te,Ke)});var Le=s($e,2);{var Ye=Te=>{var Fe=Ir(),Ke=a(Fe),k=s(Ke);ie(k,1,()=>oa(e(l).visibleEntities[0].status.maxCounterQty),oe,(h,x)=>{var R=Nr(),Se=U(R),Ie=s(Se);{var G=xe=>{var qe=at();u(()=>f(qe,`/${e(l).visibleEntities[0].status.maxCounterQty[e(x)]??""}`)),r(xe,qe)};b(Ie,xe=>{(e(l).visibleEntities[0].status.maxCounterQty[e(x)]??9999)<100&&xe(G)})}u((xe,qe)=>f(Se,`【
              ${xe??""}${qe??""} `),[()=>Ka(e(x)),()=>e(l).visibleEntities[0].counterHolder.getQty(e(x))],de),r(h,R)}),u(()=>f(Ke,`【${e(l).visibleEntities[0].battlePositionName??""}】 `)),r(Te,Fe)};b(Le,Te=>{e(l).visibleEntities[0].battlePosition&&Te(Ye)})}r(O,me)};b(Z,O=>{e(l).visibleEntities.length>0&&O(we)})}var De=s(Z,2);{var ge=O=>{var me=Fr(),$e=a(me);u(()=>f($e,e(l).visibleEntities.length)),r(O,me)};b(De,O=>{e(l).isStackCell&&O(ge)})}var ue=s(De,2);{var M=O=>{var me=Hr(),$e=a(me);St($e,{get entity(){return e(L).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),ae(1,me,()=>J,()=>({key:e(L).entity.seq})),r(O,me)};b(ue,O=>{e(L)&&e(L).index==="Top"&&O(M)})}r(q,j)};b(Q,q=>{e(l).cellType==="Hand"?q(ee):q(p,!1)},!0)}r($,H)};b(X,$=>{e(l).isDisabledCell?$(te):$(ve,!1)})}u($=>{Ee(I,`${`duel_field_cell duel_field_cell_${e(l).cellType} ${e(l).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1ycsdg6`),pt(I,"colspan",e(l).cellType==="Hand"?7:1),Ee(m,`${$??""} svelte-1ycsdg6`)},[()=>`duel_field_cell_inner_box ${e(l).cellType} ${e(T)?"can_accept_drop":""} ${B()?"can_action":""} ${e(A)?"is_selected":e(Y)?"is_selectable":""} `],de),be("dragover",m,le),be("drop",m,pe),r(v,I),it()}Na(["click"]);const Rr=(v,i,t=void 0,d="!!!circular reference!!!")=>{let _=[];return JSON.stringify(v,(c,g)=>{if(typeof g=="object"){if(_.indexOf(g)>-1)return d;_.push(g)}let l=g;if(i&&(l=i(c,g)),typeof l=="function")return l.toString();if(l!==g&&typeof l=="object"){if(_.indexOf(l)>-1)return d;_.push(l)}return l},t)};var Wr=n('<div class="title svelte-14z6bdh"> </div>'),Kr=n('<div class="title svelte-14z6bdh"> </div>'),zr=n('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),Vr=n('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),Gr=n("<div><!> <!></div>"),Xr=n('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),Qr=n("<div><!> <!></div>"),Zr=n("<div><!> <!></div>"),Jr=n('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function es(v,i){rt(i,!1);let t=he(void 0),d=Re(i,"log",8),_,c=he([]);const g=()=>{const D=((_==null?void 0:_.seq)??-1)+1;d().records.slice(D).forEach(o=>{if(!_){S(c,[[[[o]]]]),_=o;return}if(!e(c)[o.clock.turn]){Pe(c,e(c)[o.clock.turn]=[[[o]]]),_=o;return}if(!e(c)[o.clock.turn][o.clock.phaseSeq]){Pe(c,e(c)[o.clock.turn][o.clock.phaseSeq]=[[o]]),_=o;return}if(_.clock.chainSeq===o.clock.chainSeq&&_.clock.chainBlockSeq===o.clock.chainBlockSeq&&_.duelist===o.duelist){e(c)[o.clock.turn][o.clock.phaseSeq].slice(-1)[0].push(o),_=o;return}e(c)[o.clock.turn][o.clock.phaseSeq].push([o]),_=o}),S(c,e(c)),za().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};d().onUpdate.append(g),d().duel.view.onDuelUpdate.append(g),g(),st();var l=Me(),E=U(l);{var P=D=>{var o=Jr(),W=s(a(o),2);ie(W,5,()=>e(c),oe,(F,K)=>{var z=Zr(),A=a(z);{var Y=ne=>{var je=Wr(),T=a(je);u(()=>f(T,`ターン：${e(K)[0][0][0].clock.turn??""}`)),r(ne,je)};b(A,ne=>{e(K)[0][0][0].clock.turn>0&&ne(Y)})}var re=s(A,2);ie(re,1,()=>e(K),oe,(ne,je)=>{var T=Qr(),C=a(T);{var V=ye=>{var J=Kr(),ce=a(J);u(()=>f(ce,e(je)[0][0].clock.period.name)),r(ye,J)};b(C,ye=>{e(je)[0][0].clock.turn>0&&ye(V)})}var se=s(C,2);ie(se,1,()=>e(je),oe,(ye,J)=>{var ce=Xr();const Ue=de(()=>{var I;return((I=e(J).find(m=>m.chainNumber!==void 0))==null?void 0:I.chainNumber)??0});var ke=a(ce),B=a(ke),N=a(B),le=s(B,2);{var pe=I=>{var m=zr(),X=a(m);u(()=>f(X,`チェーン：${e(Ue)??""}`)),r(I,m)};b(le,I=>{e(Ue)&&I(pe)})}var _e=s(ke,2);ie(_e,1,()=>e(J),oe,(I,m)=>{var X=Gr(),te=a(X);{var ve=ee=>{var p=at();u(()=>f(p,e(m).text)),r(ee,p)},$=ee=>{var p=Me(),q=U(p);{var j=w=>{var y=at();u((Z,we,De)=>f(y,`移動：${Z??""} ${we??""} ⇒ ${De??""}`),[()=>{var Z;return(Z=e(m).mainEntity)==null?void 0:Z.toString()},()=>{var Z;return(Z=e(m).from)==null?void 0:Z.toString()},()=>{var Z;return(Z=e(m).to)==null?void 0:Z.toString()}],de),r(w,y)},L=w=>{var y=Me(),Z=U(y);{var we=ge=>{var ue=at();u((M,O)=>f(ue,`生成：${M??""} void ⇒ ${O??""}`),[()=>{var M;return(M=e(m).mainEntity)==null?void 0:M.toString()},()=>{var M;return(M=e(m).to)==null?void 0:M.toString()}],de),r(ge,ue)},De=ge=>{var ue=Me(),M=U(ue);{var O=$e=>{var Le=at();u((Ye,Te)=>f(Le,`消滅：${Ye??""} ${Te??""} ⇒ void`),[()=>{var Ye;return(Ye=e(m).mainEntity)==null?void 0:Ye.toString()},()=>{var Ye;return(Ye=e(m).from)==null?void 0:Ye.toString()}],de),r($e,Le)},me=$e=>{var Le=at();u(()=>f(Le,e(m).text)),r($e,Le)};b(M,$e=>{e(m).type==="EntityDisappear"?$e(O):$e(me,!1)},!0)}r(ge,ue)};b(Z,ge=>{e(m).type==="EntityAppear"?ge(we):ge(De,!1)},!0)}r(w,y)};b(q,w=>{e(m).type==="EntityMove"?w(j):w(L,!1)},!0)}r(ee,p)};b(te,ee=>{e(m).type==="ChainBlockHeader"?ee(ve):ee($,!1)})}var H=s(te,2);{var Q=ee=>{var p=Vr(),q=a(p);u(j=>pt(q,"href",j),[()=>window.URL.createObjectURL(new Blob([Rr(e(m).error,(j,L)=>["pool","bundles","duel"].includes(j)||typeof L=="function"?void 0:L,4)],{type:"text/plain"}))],de),r(ee,p)};b(H,ee=>{e(m).error&&ee(Q)})}u(ee=>Ee(X,`duel_log_record duel_log_record_${ee??""} svelte-14z6bdh`),[()=>e(m).type.toSnakeCase()],de),r(I,X)}),u(()=>{var I,m,X;Ee(ce,`duel_log_block_duelist duel_log_block_duelist_${((I=e(J)[0].duelist)==null?void 0:I.seat)??"system"} svelte-14z6bdh`),Ee(B,`duelist ${((m=e(J)[0].duelist)==null?void 0:m.seat)??""} svelte-14z6bdh`),f(N,((X=e(J)[0].duelist)==null?void 0:X.profile.name)||"SYSTEM")}),r(ye,ce)}),u(()=>Ee(T,`duel_log_block_phase duel_log_block_phase_${e(je)[0][0].clock.period.key??""} svelte-14z6bdh`)),r(ne,T)}),u(()=>Ee(z,`duel_log_block_turn duel_log_block_turn_${e(K)[0][0][0].clock.turn??""} svelte-14z6bdh`)),r(F,z)}),Va(W,F=>S(t,F),()=>e(t)),r(D,o)};b(E,D=>{(d().duel.view.infoBoardState==="Log"||d().duel.view.infoBoardState==="Default")&&D(P)})}r(v,l),it()}var ts=n("<div><div> </div> <div> </div></div>");function Ya(v,i){rt(i,!1);let t=Re(i,"duelist",12),d=he(0),_=he();const c=async()=>{const W=t().lp-e(d);if(!e(_)||Math.abs(W)<10){S(d,t().lp),e(_)&&(e(_)(),S(_,void 0));return}S(d,e(d)+Math.floor(Math.random()*W)),await Mt(100),c()},g=()=>{t(t()),!e(_)&&t().lp!==e(d)&&new Promise(W=>{S(_,W),Math.abs(t().lp-e(d)),c()})};t().duel.log.onUpdate.append(g),c(),st();var l=ts(),E=a(l),P=a(E),D=s(E,2),o=a(D);u(W=>{Ee(l,`duelist duelist_${W??""} svelte-1sy3trd`),Ee(E,`duelist_name duelist_${W??""}_name svelte-1sy3trd`),f(P,t().profile.name),Ee(D,`duelist_lp ${(e(_)?"vibration":"")??""} svelte-1sy3trd`),f(o,e(d))},[()=>t().seat.toLowerCase()],de),r(v,l),it()}const as=(v,i,t)=>(i(i()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),rs=(v,i,t)=>(i(i()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var ss=n('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),is=n('<div></div> <div class="svelte-1uevs9j"> </div>',1),ns=n("<div> </div>"),ls=n("<div> </div>"),os=n('<div class="duel_card_info_row svelte-1uevs9j"><!> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),vs=n('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),ds=n('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),cs=n("<!> <!>",1),_s=n('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><pre class="description svelte-1uevs9j"> </pre></div>'),us=n('<!> <div class="duel_card_info_row svelte-1uevs9j"><pre class="description svelte-1uevs9j"> </pre></div>',1),fs=n('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),ps=n('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),gs=n("[ <!> ],",1),ms=n('<div class="svelte-1uevs9j"> <!></div>'),bs=n('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),hs=n('<div class="svelte-1uevs9j"> </div>'),ys=n('<div class="svelte-1uevs9j"> </div>'),ks=n('<div class="svelte-1uevs9j"> </div>'),ws=n('<div class="svelte-1uevs9j"> </div>'),xs=n('<div class="svelte-1uevs9j"> </div>'),Cs=n('<div class="svelte-1uevs9j"> </div>'),Ds=n('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),$s=n('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Ss=n('<div class="svelte-1uevs9j">※テスト用カードです</div>'),Ms=n('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),js=n('<div class="duel_card_info_links svelte-1uevs9j"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a> <!></div>'),Ts=n("<!> <!>",1),qs=n('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Es(v,i){rt(i,!1);let t=Re(i,"entity",8,void 0),d=Re(i,"mode",12,"Normal");const _=()=>t()?ht[t().origin.name]:void 0,c=()=>{var P;return t()&&t().entityType==="Card"&&(t().origin.cardId??!1)?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t().origin.cardId}`:`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${(P=_())==null?void 0:P.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`};st();var g=Me(),l=U(g);{var E=P=>{var D=qs();D.__click=[as,d,t],D.__contextmenu=[rs,d,t];var o=a(D),W=a(o),F=a(W),K=a(F),z=s(W,2),A=a(z),Y=a(A),re=s(A,2),ne=a(re),je=s(z,2);{var T=ke=>{var B=cs(),N=U(B);{var le=m=>{var X=ss(),te=a(X),ve=a(te),$=s(te,2),H=a($);u(()=>{f(ve,`◀ ${t().psL??""}`),f(H,`${t().psR??""} ▶`)}),r(m,X)};b(N,m=>{var X;(X=t().origin.monsterCategories)!=null&&X.includes("Pendulum")&&m(le)})}var pe=s(N,2);{var _e=m=>{var X=os(),te=U(X),ve=a(te);ie(ve,1,()=>t().attr,oe,(Q,ee)=>{var p=is(),q=U(p),j=s(q,2),L=a(j);u(()=>{Ee(q,`monster_attr ${e(ee)??""} svelte-1uevs9j`),f(L,`${va[e(ee)]??""}属性`)}),r(Q,p)});var $=s(ve,2);ie($,1,()=>t().types,oe,(Q,ee)=>{var p=ns(),q=a(p);u(()=>{Ee(p,`monster_cat ${e(ee)??""} svelte-1uevs9j`),f(q,`${Xt[e(ee)]??""}${da[e(ee)]??""}族`)}),r(Q,p)});var H=s(te,2);ie(H,5,()=>t().status.monsterCategories??[],oe,(Q,ee)=>{var p=ls(),q=a(p);u(()=>{Ee(p,`monster_cat ${e(ee)??""} svelte-1uevs9j`),f(q,`${Qt[e(ee)]??""}${ca[e(ee)]??""}`)}),r(Q,p)}),r(m,X)},I=m=>{var X=Me(),te=U(X);{var ve=H=>{var Q=vs(),ee=s(a(Q),2),p=a(ee);u(()=>f(p,`${Zt[t().status.spellCategory]??""}魔法`)),r(H,Q)},$=H=>{var Q=Me(),ee=U(Q);{var p=q=>{var j=ds(),L=s(a(j),2),w=a(L);u(()=>f(w,`${Jt[t().status.trapCategory]??""}罠`)),r(q,j)};b(ee,q=>{t().kind==="Trap"&&t().status.trapCategory&&q(p)},!0)}r(H,Q)};b(te,H=>{t().kind==="Spell"&&t().status.spellCategory?H(ve):H($,!1)},!0)}r(m,X)};b(pe,m=>{t().kind==="Monster"?m(_e):m(I,!1)})}r(ke,B)};b(je,ke=>{d()!=="Debug"&&ke(T)})}var C=s(o,2),V=a(C);{var se=ke=>{var B=us(),N=U(B);{var le=m=>{var X=_s(),te=a(X),ve=a(te);u(()=>f(ve,ht[t().origin.name].pendulumDescription)),r(m,X)};b(N,m=>{var X;(X=t().status.monsterCategories)!=null&&X.includes("Pendulum")&&m(le)})}var pe=s(N,2),_e=a(pe),I=a(_e);u(m=>f(I,m),[()=>{var m;return(m=_())==null?void 0:m.description}],de),r(ke,B)},ye=ke=>{var B=Me(),N=U(B);{var le=_e=>{var I=Me(),m=U(I);{var X=te=>{var ve=ps(),$=s(a(ve),2);ie($,5,()=>t().actions,oe,(H,Q)=>{var ee=Me();const p=de(()=>e(Q).actionCountUpperBound),q=de(()=>e(Q).actionCount);var j=U(ee);{var L=w=>{var y=fs(),Z=a(y),we=a(Z),De=s(Z,2),ge=a(De),ue=s(De,4),M=a(ue);u(()=>{f(we,e(Q).title),f(ge,e(q)),f(M,e(p))}),r(w,y)};b(j,w=>{e(p)!==void 0&&e(q)!==void 0&&w(L)})}r(H,ee)}),r(te,ve)};b(m,te=>{t().actions.some(ve=>ve.actionCountUpperBoundKey)&&te(X)})}r(_e,I)},pe=_e=>{var I=Ds(),m=a(I),X=a(m);ie(X,0,()=>["info","status"],oe,(k,h)=>{var x=bs(),R=U(x),Se=a(R),Ie=s(R,2);ie(Ie,1,()=>Object.entries(t()[h]),oe,(xe,qe)=>{let We=()=>e(qe)[0],Ne=()=>e(qe)[1];var ze=ms(),ot=a(ze),ct=s(ot);{var et=Be=>{var Ae=gs(),Ve=s(U(Ae));ie(Ve,1,Ne,oe,(vt,nt)=>{var mt=at();u(Xe=>f(mt,`${Xe??""},`),[()=>e(nt).toString()],de),r(vt,mt)}),r(Be,Ae)},Ce=Be=>{var Ae=at();u(Ve=>f(Ae,`${Ve??""},`),[()=>{var Ve;return(Ve=Ne())==null?void 0:Ve.toString()}],de),r(Be,Ae)};b(ct,Be=>{Array.isArray(Ne())?Be(et):Be(Ce,!1)})}u(()=>f(ot,`"${We()??""}" : `)),r(xe,ze)});var G=s(Ie,2);G.textContent="},",u(()=>f(Se,`"${h??""}" :{`)),r(k,x)});var te=s(X,2);te.textContent='"actions" :[';var ve=s(te,2);ie(ve,1,()=>t().actions,oe,(k,h)=>{var x=hs(),R=a(x);u(()=>f(R,`"${e(h).playType??""} ${e(h).title??""}",`)),r(k,x)});var $=s(ve,2);$.textContent="],";var H=s($,2);H.textContent='"substituteEffects" :[';var Q=s(H,2);ie(Q,1,()=>t().substituteEffects,oe,(k,h)=>{var x=ys(),R=a(x);u(()=>f(R,`"${e(h).title??""}",`)),r(k,x)});var ee=s(Q,2);ee.textContent="],";var p=s(ee,2);p.textContent='"continuousEffects" :[';var q=s(p,2);ie(q,1,()=>t().continuousEffects,oe,(k,h)=>{var x=ks(),R=a(x);u(()=>f(R,`"${e(h).isStarted??""}",`)),r(k,x)});var j=s(q,2);j.textContent="],";var L=s(j,2);L.textContent='"procFilters" :[';var w=s(L,2);ie(w,1,()=>t().procFilterBundle.operators,oe,(k,h)=>{var x=ws(),R=a(x);u(Se=>f(R,`"${Se??""} ${e(h).title??""} ${e(h).isEffective??""} ",`),[()=>e(h).isSpawnedBy.toString()],de),r(k,x)});var y=s(w,2);y.textContent="],";var Z=s(y,2);Z.textContent='"numericStateOperators" :[';var we=s(Z,2);ie(we,1,()=>t().numericOprsBundle.operators,oe,(k,h)=>{var x=xs(),R=a(x);u(Se=>f(R,`"${Se??""} ${e(h).title??""} ${e(h).isEffective??""} ${e(h).isContinuous??""} ${e(h).targetState??""} ${e(h).targetStateGen??""} ",`),[()=>e(h).isSpawnedBy.toString()],de),r(k,x)});var De=s(we,2);De.textContent="],";var ge=s(De,2);ge.textContent='"stateOperators" :[';var ue=s(ge,2);ie(ue,1,()=>t().statusOperatorBundle.operators,oe,(k,h)=>{var x=Cs(),R=a(x);u(Se=>f(R,`"${Se??""} ${e(h).title??""} ${e(h).isEffective??""} ",`),[()=>e(h).isSpawnedBy.toString()],de),r(k,x)});var M=s(ue,2);M.textContent="],";var O=s(M,2);O.textContent='"lastMoveLogRecord" :{';var me=s(O,2),$e=a(me),Le=s(me,2),Ye=a(Le),Te=s(Le,2),Fe=a(Te),Ke=s(Te,2);Ke.textContent="},",u((k,h)=>{f($e,`"movedBy":"${k??""}",`),f(Ye,`"movedAs":"${h??""}",`),f(Fe,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var k;return(k=t().moveLog.latestRecord.movedBy)==null?void 0:k.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],de),r(_e,I)};b(N,_e=>{d()==="Detail"?_e(le):_e(pe,!1)},!0)}r(ke,B)};b(V,ke=>{d()==="Normal"?ke(se):ke(ye,!1)})}var J=s(C,2),ce=a(J);{var Ue=ke=>{var B=Ts(),N=U(B);{var le=m=>{var X=$s();r(m,X)};b(N,m=>{t().origin.isOldVersion&&m(le)})}var pe=s(N,2);{var _e=m=>{var X=Ss();r(m,X)},I=m=>{var X=js(),te=a(X),ve=s(te,2);{var $=H=>{var Q=Ms(),ee=a(Q);u(p=>{var q;pt(Q,"href",p),f(ee,`⇒${((q=t())!=null&&q.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[c],de),r(H,Q)};b(ve,H=>{t()&&t().entityType==="Card"&&H($)})}u(()=>pt(te,"href",`https://yugioh-wiki.net/index.php?${t().origin.wikiEncodedName}`)),r(m,X)};b(pe,m=>{t().origin.isForTest?m(_e):m(I,!1)})}r(ke,B)};b(ce,ke=>{t()&&ke(Ue)})}u((ke,B,N)=>{Ee(D,`duel_card duel_card_info ${t().origin.kind??""} ${ke??""} svelte-1uevs9j`),f(K,t().nm),f(Y,B),f(ne,N)},[()=>{var ke;return(ke=t().origin.monsterCategories)==null?void 0:ke.join(" ")},()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],de),r(P,D)};b(l,P=>{t()&&P(E)})}r(v,g),it()}Na(["click","contextmenu"]);var As=n('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),Ys=n('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),Bs=n('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Ns(v,i){rt(i,!1);let t=Re(i,"cell",12);const d=()=>{t(t())},_=E=>t().cardEntities.filter(P=>P.face===E);t().field.duel.view.onDuelUpdate.append(d),st();var c=Me(),g=U(c);{var l=E=>{var P=Bs(),D=a(P),o=a(D),W=a(o),F=s(o,2),K=a(F),z=s(D,2);ie(z,4,()=>["FaceUp","FaceDown"],oe,(A,Y)=>{var re=Me(),ne=U(re);{var je=T=>{var C=Ys(),V=a(C),se=a(V),ye=s(V,2);ie(ye,1,()=>_(Y).toSorted(Ga),oe,(J,ce)=>{var Ue=As(),ke=a(Ue);const B=de(()=>t().owner===t().field.duel.duelists.Below);St(ke,{get entity(){return e(ce)},get isVisibleForcibly(){return e(B)},isWideMode:!0,cardActionResolve:void 0}),r(J,Ue)}),u(()=>f(se,Y==="FaceUp"?"表向き":"裏向き")),r(T,C)};b(ne,T=>{_(Y).length&&T(je)})}r(A,re)}),u(()=>{var A;f(W,(A=t().owner)==null?void 0:A.profile.name),f(K,t().cellType)}),r(E,P)};b(g,E=>{t().field.duel.view.infoBoardState==="CellInfo"&&E(l)})}r(v,c),it()}var Is=n('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),Us=n('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function Fs(v,i){rt(i,!1);let t=Re(i,"viewController",8),d=Re(i,"userProfile",12);st();var _=Me(),c=U(_);{var g=l=>{var E=Us(),P=s(a(E),2),D=s(a(P),2);ie(D,1,()=>Za,oe,(o,W)=>{var F=Is(),K=a(F),z=a(K),A=s(K,2),Y=a(A);u(()=>f(Y,Xa[e(W)])),Qa(z,()=>d().chainConfig[e(W)],re=>d(d().chainConfig[e(W)]=re,!0)),be("change",z,()=>d().save()),r(o,F)}),r(l,E)};b(c,l=>{t().infoBoardState==="Config"&&l(g)})}r(v,_),it()}function Hs(v,{from:i,to:t},d={}){var{delay:_=0,duration:c=C=>Math.sqrt(C)*120,easing:g=ia}=d,l=getComputedStyle(v),E=l.transform==="none"?"":l.transform,[P,D]=l.transformOrigin.split(" ").map(parseFloat);P/=v.clientWidth,D/=v.clientHeight;var o=Os(v),W=v.clientWidth/t.width/o,F=v.clientHeight/t.height/o,K=i.left+i.width*P,z=i.top+i.height*D,A=t.left+t.width*P,Y=t.top+t.height*D,re=(K-A)*W,ne=(z-Y)*F,je=i.width/t.width,T=i.height/t.height;return{delay:_,duration:typeof c=="function"?c(Math.sqrt(re*re+ne*ne)):c,easing:g,css:(C,V)=>{var se=V*re,ye=V*ne,J=C+V*je,ce=C+V*T;return`transform: ${E} translate(${se}px, ${ye}px) scale(${J}, ${ce});`}}}function Os(v){if("currentCSSZoom"in v)return v.currentCSSZoom;for(var i=v,t=1;i!==null;)t*=+getComputedStyle(i).zoom,i=i.parentElement;return t}var Ps=n('<div class="chain_number svelte-lqu21u"> </div>'),Ls=n('<div class="duel_card_row svelte-lqu21u"> </div>'),Rs=n('<div class="appendix svelte-lqu21u"> </div>'),Ws=n('<div class="appendix_wrapper svelte-lqu21u"></div>'),Ks=n('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),zs=n("<div></div>");function Vs(v,i){rt(i,!1);let t=Re(i,"duel",8),d=Re(i,"position",8,"left");const _=-100,c=()=>d()==="left"?-100:100;let g=he([]),l=Promise.resolve(),E=Promise.resolve();const P=1e3,D=500,o=400,W=K=>{const z={...K};z.isKnown=K.chainBlockInfo.action.entity.controller.duelistType==="Player"||K.chainBlockInfo.action.entity.face==="FaceUp",z.chainBlockInfo.onStateChange.append(A=>{if(A==="done"||A==="failed"||A==="negated")return l=l.then(async()=>{const Y=new Date().getTime()-z.chainBlockInfo.wasSpawnedAt.getTime();Y<P&&await Mt(P-Y),S(g,e(g).filter(re=>re.seq!==z.seq)),await Mt(D+o)}).then(),"RemoveMe";S(g,e(g))}),E=E.then(async()=>{S(g,[z,...e(g)].sort((A,Y)=>Ja.isSameChain(A.clock,Y.clock)&&A.chainBlockInfo.action.isWithChainBlock&&Y.chainBlockInfo.action.isWithChainBlock?Y.clock.totalProcSeq-A.clock.totalProcSeq:A.clock.totalProcSeq-Y.clock.totalProcSeq)),await Mt(300)}),l=l.then(()=>Mt(1e3))};t().chainBlockLog.onInsert.append(W),st();var F=zs();ie(F,13,()=>e(g),K=>K.seq,(K,z)=>{var A=Ks();const Y=de(()=>{const{activator:N,action:le,appendix:pe}=e(z).chainBlockInfo;return{activator:N,action:le,appendix:pe}});var re=a(A),ne=a(re);{var je=N=>{var le=Ps(),pe=a(le);u(()=>f(pe,`チェーン：${e(z).chainBlockInfo.chainNumber??""}`)),r(N,le)};b(ne,N=>{e(z).chainBlockInfo.chainNumber&&N(je)})}var T=s(ne,2),C=a(T),V=s(T,2),se=a(V);{var ye=N=>{var le=Ls(),pe=a(le);u(()=>f(pe,e(z).isKnown?e(Y).action.entity.nm:"？？？")),r(N,le)};b(se,N=>{(e(Y).action.entity.entityType==="Card"||e(Y).action.entity.entityType==="Token")&&N(ye)})}var J=s(se,2),ce=a(J),Ue=a(ce),ke=s(ce,2);{var B=N=>{var le=Ws();ie(le,5,()=>e(Y).appendix,oe,(pe,_e)=>{var I=Rs(),m=a(I);u(()=>f(m,e(_e))),r(pe,I)}),r(N,le)};b(ke,N=>{e(Y).appendix&&N(B)})}u((N,le,pe)=>{Ee(A,`cut_in_row ${(!e(z).chainBlockInfo.chainNumber||e(z).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Ee(re,`cut_in_item cut_in_item_${N??""} cut_in_item_${e(z).chainBlockInfo.state??""} svelte-lqu21u`),Ee(T,`duelist_name duelist_${N??""}_name svelte-lqu21u`),f(C,e(Y).activator.profile.name),Ee(V,`duel_card duel_card_${N??""} ${le??""} ${(e(z).isKnown?e(Y).action.entity.origin.kind:"")??""} ${e(Y).action.entity.entityType??""}  svelte-lqu21u`),f(Ue,pe)},[()=>e(Y).activator.seat.toLowerCase(),()=>e(z).isKnown?(e(Y).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(Y).action.toString()],de),ae(3,re,()=>kr,()=>new Date().getTime()-e(z).chainBlockInfo.wasSpawnedAt.getTime()<P?{x:c(),duration:o}:{y:_,duration:o}),er(A,()=>Hs,()=>({duration:D})),r(K,A)}),u(()=>Ee(F,`cut_in_container cut_in_container_${d()??""} svelte-lqu21u`)),r(v,F),it()}const Gs=wr({duration:400});var Xs=n('<div class="duel_desk_left v_flex svelte-1i63tk9"><!> <!> <!></div>'),Qs=n('<button class="duel_field_header_message svelte-1i63tk9"> </button> <div class="duel_field_header_buttons svelte-1i63tk9"><button class="svelte-1i63tk9">サレンダー</button></div>',1),Zs=n("<tr></tr>"),Js=n('<table class="duel_field svelte-1i63tk9"><tbody class="svelte-1i63tk9"></tbody></table>'),ei=n('<button class="svelte-1i63tk9">OK</button>'),ti=n('<button class="svelte-1i63tk9">cancel</button>'),ai=n("<!> <!>",1),ri=n('<button class="svelte-1i63tk9"> </button>'),si=n('<div style="text-align: left;"><!> <!> <!></div>'),ii=n('<div><!> <div class=" duel_desk_center v_flex svelte-1i63tk9"><div class="duel_field_header svelte-1i63tk9"><!></div> <div class="duel_field_body svelte-1i63tk9"><!></div> <div class="duel_field_footer svelte-1i63tk9"><!></div></div> <!></div> <div style="position:fixed;left:0;bottom:0"> </div> <!> <div><!></div>',1);function ni(v,i){rt(i,!1);let t=Re(i,"duel",12),d=Re(i,"userProfile",8),_=he(0),c=he(0),g=he([]),l=he([]),E=()=>{},P=he([]),D=he(),o=he(),W=he(()=>!1),F=he(!1);const K=w=>{E=w.resolve,S(P,w.dummyActionInfos.filter(y=>y.action.entity.entityType==="Duelist").filter(y=>y.action.entity.controller.seat==="Below")),S(D,void 0),S(o,void 0),S(l,[]),S(g,[]),S(F,!1),w.entitiesChoices&&(S(D,w.entitiesChoices),S(W,()=>{var y;return((y=w.entitiesChoices)==null?void 0:y.validator(e(g)))??!1}),S(F,w.entitiesChoices.cancelable),e(D).selectables.every(y=>y.cell.isPlayFieldCell&&y.getIndexInCell()===0||y.cell.cellType==="Hand"&&y.controller.duelistType==="Player"||y.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:w.entitiesChoices,chainBlockInfos:w.chainBlockInfos,cancelable:w.entitiesChoices.cancelable}).then(y=>{E({selectedEntities:y})})),w.cellsChoices&&(S(o,w.cellsChoices),S(W,()=>{var y;return((y=w.cellsChoices)==null?void 0:y.validator(e(l)))??!1}),S(F,w.cellsChoices.cancelable))};t().view.onWaitStart.append(K);const z=()=>{E=()=>{},S(o,void 0),S(D,void 0),S(l,[]),S(g,[]),S(W,()=>!1),S(F,!1)};t().view.onWaitEnd.append(z);let A=he(void 0),Y=he("Normal");const re=({card:w,mode:y})=>{S(A,w),S(Y,y??(e(A)===w||e(Y)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(re);const ne=()=>{t(t())};t().view.onDuelUpdate.append(ne),t().log.onUpdate.append(ne);const je=()=>{e(D)&&e(D).validator(e(g))&&E({selectedEntities:e(g)}),e(o)&&e(o).validator(e(l))&&E({selectedCells:e(l)})},T=()=>{E({})},C=w=>{E({actionInfo:w})},V=()=>{E({surrender:!0})};t().main();const se=()=>e(_)<=1400?"compact":"wide";st();var ye=ii(),J=U(ye),ce=a(J);{var Ue=w=>{var y=Xs(),Z=a(y);Ya(Z,{get duelist(){return t().duelists.Above}});var we=s(Z,2);Es(we,{get entity(){return e(A)},get mode(){return e(Y)}});var De=s(we,2);Ya(De,{get duelist(){return t().duelists.Below}}),r(w,y)};b(ce,w=>{se()==="wide"&&w(Ue)})}var ke=s(ce,2),B=a(ke),N=a(B);{var le=w=>{var y=Qs(),Z=U(y),we=a(Z),De=s(Z,2),ge=a(De);u(()=>f(we,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),be("click",Z,()=>{t(t().view.infoBoardState="Log",!0)}),be("click",ge,V),r(w,y)};b(N,w=>{t().isEnded||w(le)})}var pe=s(B,2),_e=a(pe);{var I=w=>{var y=Js(),Z=a(y);ie(Z,5,()=>t().field.cells,oe,(we,De,ge)=>{var ue=Zs();Ee(ue,`${`duel_desk_row_${ge}`??""} svelte-1i63tk9`),ie(ue,5,()=>e(De),oe,(M,O,me)=>{Lr(M,{get view(){return t().view},row:ge,column:me,get selectedEntities(){return e(g)},set selectedEntities($e){S(g,$e)},get selectedCells(){return e(l)},set selectedCells($e){S(l,$e)},$$legacy:!0})}),r(we,ue)}),r(w,y)};b(_e,w=>{t().clock.turn>0&&w(I)})}var m=s(pe,2),X=a(m);{var te=w=>{var y=ai(),Z=U(y);{var we=ue=>{var M=ei();u(O=>M.disabled=O,[()=>!e(W)()],de),be("click",M,je),r(ue,M)};b(Z,ue=>{((e(D)&&e(D).qty)??(e(o)&&e(o).qty)??9999)>1&&ue(we)})}var De=s(Z,2);{var ge=ue=>{var M=ti();be("click",M,T),r(ue,M)};b(De,ue=>{e(F)&&ue(ge)})}r(w,y)},ve=w=>{var y=Me(),Z=U(y);ie(Z,1,()=>e(P),oe,(we,De)=>{var ge=ri(),ue=a(ge);u(()=>f(ue,e(De).action.title)),be("click",ge,()=>C(e(De))),r(we,ge)}),r(w,y)};b(X,w=>{e(D)&&e(D).selectables.length||e(o)&&e(o).selectables?w(te):w(ve,!1)})}var $=s(ke,2);{var H=w=>{var y=si(),Z=a(y);es(Z,{get log(){return t().log}});var we=s(Z,2);Ns(we,{get cell(){return t().view.infoBoardCell}});var De=s(we,2);Fs(De,{get userProfile(){return d()},get viewController(){return t().view}}),u(ge=>Ee(y,`duel_desk_right duel_desk_right_${ge??""}  svelte-1i63tk9`),[()=>t().view.infoBoardState.toLowerCase()],de),ae(3,y,()=>fe,()=>({duration:e(_)>1400?0:200,axis:"x"})),r(w,y)};b($,w=>{(e(_)>1400||t().view.infoBoardState!=="Default")&&w(H)})}var Q=s(J,2),ee=a(Q),p=s(Q,2);tr(p,{get modalController(){return t().view.modalController}});var q=s(p,2),j=a(q);const L=de(()=>se()==="wide"?"right":"left");Vs(j,{get duel(){return t()},get position(){return e(L)}}),u((w,y)=>{Ee(J,`flex duel_desk ${w??""}_mode svelte-1i63tk9`),f(ee,y),Ee(q,`cutin ${w??""}_mode svelte-1i63tk9`)},[se,()=>t().clock.toFullString()],de),Kt("innerWidth",w=>S(_,w)),Kt("innerHeight",w=>S(c,w)),r(v,ye),it()}var li=n('<div class="svelte-swqq02"><button class="button_style_reset svelte-swqq02" title="※shiftキー同時押しで一括外し">クリア</button></div>'),oi=n('<div class="svelte-swqq02"><button class="button_style_reset svelte-swqq02" title="※shiftキー同時押しで一括外し">クリア</button></div>'),vi=n("<div></div>"),di=n("<!> <!> <!> <!> <!>",1),ci=n('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),_i=n('<li class="deck_editor_item svelte-swqq02"><div role="listitem"><div class="svelte-swqq02"><div class="svelte-swqq02"> </div> <div style="display:flex" class="svelte-swqq02"><div class="svelte-swqq02"><!> <!> <!></div> <div style="flex-grow: 1; width:0.1rem" class="svelte-swqq02"></div> <div class="svelte-swqq02"><!></div></div></div></div> <button class="button_style_reset svelte-swqq02" title="※shiftキー同時押しで一括投入">+</button> <button class="button_style_reset svelte-swqq02" title="※shiftキー同時押しで一括外し">-</button></li>'),ui=n('<div class="deck_editor_card_kind svelte-swqq02"><div class="deck_editor_card_kind_header svelte-swqq02"><div class="svelte-swqq02"> </div> <!></div> <ul class="svelte-swqq02"></ul></div>'),fi=n('<div class="deck_editor_deck_type svelte-swqq02"><div class="deck_editor_deck_type_header svelte-swqq02"><div class="svelte-swqq02"> </div> <!></div> <!></div>'),pi=n('<div class="svelte-swqq02">読み込み中...</div>'),gi=n('<div class="deck_editor_card_list svelte-swqq02"><!></div>');function Ba(v,i){rt(i,!1);let t=Re(i,"allCardInfos",8),d=Re(i,"deckCardInfos",12),_=Re(i,"mode",8),c=Re(i,"onAttention",8),g=Re(i,"searchCondition",8,void 0);const l={Deck:["Monster","Spell","Trap"],ExtraDeck:["Monster"]},E={Deck:{Monster:[],Spell:[],Trap:[]},ExtraDeck:{Monster:[],Spell:[],Trap:[]}},P=T=>{var C;return(C=T.monsterCategories)!=null&&C.union(zt).length?"ExtraDeck":"Deck"},D=T=>{Object.values(E).forEach(C=>Object.values(C).forEach(V=>V.reset())),T.filter(C=>C.isImplemented).filter(C=>C.kind!=="XyzMaterial").forEach(C=>{var se;if(C.kind==="XyzMaterial")return;const V=(se=C.monsterCategories)!=null&&se.union(zt).length?"ExtraDeck":"Deck";E[V][C.kind].push(C)}),Object.values(E).forEach(C=>Object.values(C).forEach(V=>V.sort(ra)))},o=_()==="List"?new Promise(T=>{D(t()),T()}):Promise.resolve(),W=()=>(_()==="Deck"&&(D(d()),S(A,d().length)),E),F=(T,C,V)=>{d(d().filter(se=>P(se)!==C||se.kind!==V&&V))},K=(T,C)=>{try{if(T.ctrlKey){d().push(C);return}const V=d().filter(ye=>ye.name===C.name).length;if(V>2)return;const se=T.shiftKey?3-V:1;if(se<1)return;d().push(...Array(se).fill(C))}finally{d().sort(ra),d(d())}},z=(T,C)=>{let V=0;d(d().filter(se=>se.name!==C.name?!0:(V++,!T.shiftKey&&V>1))),d().sort(ra)};let A=he(100);const Y=()=>{e(A)>t().length+d().length||(S(A,e(A)+10),Mt(100).then(Y))};Mt(100).then(Y);const re=(T,C)=>{if(!g())return!0;if(!g().cardKinds.includes(T.kind)||g().name.trim().length&&[T.name,...T.nameTags??[],...T.textTags??[]].every(se=>!se.includes(g().name))||T.isForTest&&!g().others.includes("test")||T.isOldVersion&&!g().others.includes("oldVersion"))return!1;if(T.kind==="Monster")return T.attributes&&!g().monsterAttributes.union(T.attributes).length||T.types&&!g().monsterTypes.union(T.types).length||!T.monsterCategories?!1:T.monsterCategories.union(g().monsterCategories).length;if(T.kind==="Spell")return T.spellCategory&&g().spellCategories.includes(T.spellCategory);if(T.kind==="Trap")return T.trapCategory&&g().trapCategories.includes(T.trapCategory)};st();var ne=gi(),je=a(ne);yt(je,()=>o,T=>{var C=pi();r(T,C)},T=>{var C=Me();const V=de(W);var se=U(C);ie(se,1,()=>rr,oe,(ye,J)=>{var ce=fi();const Ue=de(()=>Object.values(e(V)[e(J)]).flatMap(I=>I));var ke=a(ce),B=a(ke),N=a(B),le=s(B,2);{var pe=I=>{var m=li(),X=a(m);be("click",X,te=>F(te,e(J),void 0)),r(I,m)};b(le,I=>{_()==="Deck"&&e(Ue).some(re)&&I(pe)})}var _e=s(ke,2);ie(_e,1,()=>oa(e(V)[e(J)]).filter(I=>l[e(J)].includes(I)),oe,(I,m)=>{var X=ui();const te=de(()=>e(V)[e(J)][e(m)].filter(re));var ve=a(X),$=a(ve),H=a($),Q=s($,2);{var ee=q=>{var j=oi(),L=a(j);be("click",L,w=>F(w,e(J),e(m))),r(q,j)};b(Q,q=>{_()==="Deck"&&e(te).length&&q(ee)})}var p=s(ve,2);ie(p,5,()=>e(te),oe,(q,j,L)=>{var w=Me(),y=U(w);{var Z=we=>{var De=_i(),ge=a(De),ue=a(ge),M=a(ue),O=a(M),me=s(M,2),$e=a(me),Le=a($e);{var Ye=G=>{var xe=di(),qe=U(xe);{var We=Ce=>{var Be=at();u(()=>f(Be,`★${e(j).level??""}`)),r(Ce,Be)};b(qe,Ce=>{e(j).level&&Ce(We)})}var Ne=s(qe,2);{var ze=Ce=>{var Be=at();u(()=>f(Be,`☆${e(j).rank??""}`)),r(Ce,Be)};b(Ne,Ce=>{e(j).rank&&Ce(ze)})}var ot=s(Ne,2);ie(ot,1,()=>e(j).attributes??[],oe,(Ce,Be)=>{var Ae=vi();u(()=>Ee(Ae,`monster_attr ${e(Be)??""} svelte-swqq02`)),r(Ce,Ae)});var ct=s(ot,2);ie(ct,1,()=>e(j).types??[],oe,(Ce,Be)=>{var Ae=at();u(()=>f(Ae,Xt[e(Be)])),r(Ce,Ae)});var et=s(ct,2);ie(et,1,()=>e(j).monsterCategories??[],oe,(Ce,Be)=>{var Ae=at();u(()=>f(Ae,Qt[e(Be)])),r(Ce,Ae)}),r(G,xe)};b(Le,G=>{e(j).kind==="Monster"&&G(Ye)})}var Te=s(Le,2);{var Fe=G=>{var xe=at();u(()=>f(xe,`${Zt[e(j).spellCategory]??""}魔法`)),r(G,xe)};b(Te,G=>{e(j).spellCategory!==void 0&&G(Fe)})}var Ke=s(Te,2);{var k=G=>{var xe=at();u(()=>f(xe,`${Jt[e(j).trapCategory]??""}罠`)),r(G,xe)};b(Ke,G=>{e(j).trapCategory!==void 0&&G(k)})}var h=s($e,4),x=a(h);{var R=G=>{var xe=ci(),qe=U(xe),We=a(qe),Ne=s(qe,2),ze=a(Ne);u(()=>{f(We,e(j).attack??"?"),f(ze,e(j).defense??"?")}),r(G,xe)};b(x,G=>{e(j).kind==="Monster"&&G(R)})}var Se=s(ge,2),Ie=s(Se,2);u(G=>{Ee(ge,`${G??""} svelte-swqq02`),f(O,e(j).name)},[()=>{var G,xe;return`deck_editor_card duel_card ${e(j).kind} ${(xe=(G=e(j))==null?void 0:G.monsterCategories)==null?void 0:xe.join(" ")} ${e(j).isImplemented?"is_implemented":"is_not_implemented"}`}],de),be("mouseenter",ge,()=>c()(e(j))),be("click",Se,G=>K(G,e(j))),be("click",Ie,G=>z(G,e(j))),r(we,De)};b(y,we=>{L<e(A)&&we(Z)})}r(q,w)}),u(()=>f(H,`${Ia[e(m)]??""}（${e(te).length??""} / ${e(V)[e(J)][e(m)].length??""}枚）`)),r(I,X)}),u(I=>f(N,`${ar[e(J)]??""}（${I??""} / ${e(Ue).length??""}枚）`),[()=>e(Ue).filter(re).length],de),r(ye,ce)}),r(T,C)}),r(v,ne),it()}var mi=n('<div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>'),bi=n('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),hi=n('<div></div> <div class="svelte-rccxcp"> </div>',1),yi=n("<div> </div>"),ki=n("<div> </div>"),wi=n('<div class="duel_card_info_row svelte-rccxcp"><!> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),xi=n('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Ci=n('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Di=n('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※エラッタ前カードです</div></div>'),$i=n('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),Si=n('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),Mi=n('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <!></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!> <!></div></div>');function ji(v,i){rt(i,!1);let t=Re(i,"cardInfo",8,void 0);const d=()=>t()?ht[t().name]:void 0;st();var _=Me(),c=U(_);{var g=l=>{var E=Mi(),P=a(E),D=a(P),o=a(D),W=a(o),F=s(D,2);{var K=B=>{var N=mi(),le=a(N),pe=a(le),_e=s(le,2),I=a(_e);u((m,X)=>{f(pe,m),f(I,X)},[()=>"★".repeat(t().level||0),()=>"☆".repeat(t().rank||0)],de),r(B,N)};b(F,B=>{t().kind==="Monster"&&B(K)})}var z=s(P,2),A=a(z);{var Y=B=>{var N=bi(),le=U(N),pe=a(le),_e=a(pe),I=a(_e),m=s(le,2),X=a(m),te=a(X),ve=s(X,2),$=a(ve);u(()=>{f(I,ht[t().name].pendulumDescription),f(te,`◀ ${t().pendulumScaleL??""}`),f($,`${t().pendulumScaleR??""} ▶`)}),r(B,N)};b(A,B=>{var N;(N=t().monsterCategories)!=null&&N.includes("Pendulum")&&B(Y)})}var re=s(A,2);{var ne=B=>{var N=wi(),le=U(N),pe=a(le);{var _e=te=>{var ve=hi(),$=U(ve),H=s($,2),Q=a(H);u(()=>{Ee($,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),f(Q,`${va[t().attributes[0]]??""}属性`)}),r(te,ve)};b(pe,te=>{t().attributes&&te(_e)})}var I=s(pe,2);{var m=te=>{var ve=yi(),$=a(ve);u(()=>{Ee(ve,`monster_cat ${t().types[0]??""} svelte-rccxcp`),f($,`${Xt[t().types[0]]??""}${da[t().types[0]]??""}族`)}),r(te,ve)};b(I,te=>{t().types&&te(m)})}var X=s(le,2);ie(X,5,()=>t().monsterCategories??[],oe,(te,ve)=>{var $=ki(),H=a($);u(()=>{Ee($,`monster_cat ${e(ve)??""} svelte-rccxcp`),f(H,`${Qt[e(ve)]??""}${ca[e(ve)]??""}`)}),r(te,$)}),r(B,N)},je=B=>{var N=Me(),le=U(N);{var pe=I=>{var m=xi(),X=s(a(m),2),te=a(X);u(()=>f(te,`${Zt[t().spellCategory]??""}魔法`)),r(I,m)},_e=I=>{var m=Me(),X=U(m);{var te=ve=>{var $=Ci(),H=s(a($),2),Q=a(H);u(()=>f(Q,`${Jt[t().trapCategory]??""}罠`)),r(ve,$)};b(X,ve=>{t().kind==="Trap"&&t().trapCategory&&ve(te)},!0)}r(I,m)};b(le,I=>{t().kind==="Spell"&&t().spellCategory?I(pe):I(_e,!1)},!0)}r(B,N)};b(re,B=>{t().kind==="Monster"?B(ne):B(je,!1)})}var T=s(re,2),C=a(T),V=a(C),se=a(V),ye=s(T,2);{var J=B=>{var N=Di();r(B,N)};b(ye,B=>{t().isOldVersion&&B(J)})}var ce=s(ye,2);{var Ue=B=>{var N=$i();r(B,N)},ke=B=>{var N=Si(),le=a(N),pe=s(le,2),_e=a(pe);u(I=>{pt(le,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),pt(pe,"href",I),f(_e,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>sr(t())],de),r(B,N)};b(ce,B=>{t().isForTest?B(Ue):B(ke,!1)})}u((B,N)=>{Ee(E,`duel_card duel_card_info ${t().kind??""} ${B??""} svelte-rccxcp`),f(W,t().name),f(se,N)},[()=>{var B;return(B=t().monsterCategories)==null?void 0:B.join(" ")},()=>{var B;return(B=d())==null?void 0:B.description}],de),r(l,E)};b(c,l=>{t()&&l(g)})}r(v,_),it()}const Ti={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class qi{constructor(){Ze(this,"DefaultSeparator1","/");Ze(this,"DefaultSeparator2"," ");Ze(this,"DefaultSeparator3",":");Ze(this,"createDate",i=>{if(!i)return;const t=new Date(i);if(!isNaN(t.getTime()))return t});Ze(this,"createDateOr",(i,t)=>this.createDate(i)||t||new Date);Ze(this,"truncateDate",i=>{const t=i||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});Ze(this,"addDate",(i,t)=>{const d=this.createDateOr(i);return d.setDate(d.getDate()+t),d});Ze(this,"addMonth",(i,t)=>{const d=this.createDateOr(i);return d.setMonth(d.getMonth()+t),d});Ze(this,"addYear",(i,t)=>{const d=this.createDateOr(i);return d.setFullYear(d.getFullYear()+t),d});Ze(this,"getDayOfWeek",(i,t="dddd")=>{const d=this.createDate(i);return d?Ti[d.getDay()][t]:""});Ze(this,"formatToYYYYMMDD",(i,t=this.DefaultSeparator1)=>{const d=this.createDate(i);if(!d)return"";const _=d.getFullYear().toString(),c=("0"+(d.getMonth()+1)).slice(-2),g=("0"+d.getDate()).slice(-2);return _+t+c+t+g});Ze(this,"formatToYYYYMM",(i,t=this.DefaultSeparator1)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const _=d.getFullYear().toString(),c=("0"+(d.getMonth()+1)).slice(-2);return _+t+c});Ze(this,"formatToHHMMSS",(i,t=this.DefaultSeparator3)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const _=d.getHours(),c=d.getMinutes(),g=d.getSeconds();return("0"+_).slice(-2)+t+("0"+c).slice(-2)+t+("0"+g).slice(-2)});Ze(this,"formatToHHMM",(i,t=this.DefaultSeparator3)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const _=("0"+d.getHours()).slice(-2),c=("0"+d.getMinutes()).slice(-2);return _+t+c});Ze(this,"formatToYYYYMMDD_HHMM",(i,t=this.DefaultSeparator1,d=this.DefaultSeparator2,_=this.DefaultSeparator3)=>{const c=this.createDate(i);return c?this.formatToYYYYMMDD(c,t)+d+this.formatToHHMM(c,_):""});Ze(this,"formatToYYYYMMDD_HHMMSS",(i,t=this.DefaultSeparator1,d=this.DefaultSeparator2,_=this.DefaultSeparator3)=>{const c=this.createDate(i);return c?this.formatToYYYYMMDD(c,t)+d+this.formatToHHMMSS(c,_):""})}}const dt=new qi;Date.prototype.truncateDate=function(){return dt.truncateDate(this)};Date.prototype.getCloneOr=function(v){return dt.createDateOr(this,v)};Date.prototype.addDate=function(v){return dt.addDate(this,v)};Date.prototype.addMonth=function(v){return dt.addDate(this,v)};Date.prototype.addYear=function(v){return dt.addDate(this,v)};Date.prototype.getDayOfWeek=function(v="dddd"){return dt.getDayOfWeek(this,v)};Date.prototype.formatToYYYYMM=function(v){return dt.formatToYYYYMM(this,v)};Date.prototype.formatToYYYYMMDD=function(v){return dt.formatToYYYYMMDD(this,v)};Date.prototype.formatToYYYYMMDD_HHMM=function(v,i,t){return dt.formatToYYYYMMDD_HHMM(this,v,i,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(v,i,t){return dt.formatToYYYYMMDD_HHMMSS(this,v,i,t)};Date.prototype.formatToHHMM=function(v){return dt.formatToHHMM(this,v)};Date.prototype.formatToHHMMSS=function(v){return dt.formatToHHMMSS(this,v)};var Ei=n('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),Ai=n('<ul class="deck_info_list svelte-2wdgc8"></ul>'),Yi=n('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),Bi=n('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),Ni=n('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),Ii=n('<button class="svelte-2wdgc8">Cancel</button>'),Ui=n('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function Fi(v,i){rt(i,!1);let t=Re(i,"eventHolder",8),d=Re(i,"args",8),_=Re(i,"resolve",8),c=he(Promise.resolve([])),g=he();const l=()=>{S(g,new DataTransfer().files),S(c,Promise.resolve([]))},E=async F=>{F.preventDefault(),console.log("hoge",F)},P=async F=>{F.preventDefault(),F.dataTransfer&&o(F.dataTransfer.files)},D=()=>{o(e(g))},o=async F=>{if(!F.length)return;const K=[],z=[];for(const A of F)try{z.push(...await ft.createfromJson(A))}catch(Y){Y instanceof Error&&K.push(Y.message)}if(K.length){console.log(...K);return}S(c,e(c).then(()=>z))},W=l;st(),ir(v,{get eventHolder(){return t()},get args(){return d()},$$slots:{body:(F,K)=>{var z=Bi(),A=a(z);yt(A,()=>e(c),null,(Y,re)=>{var ne=Me(),je=U(ne);{var T=V=>{var se=Ai();ie(se,5,()=>e(re),oe,(ye,J)=>{var ce=Ei(),Ue=a(ce),ke=a(Ue),B=s(Ue,2),N=a(B),le=s(B,2),pe=a(le);u((_e,I,m)=>{f(ke,e(J).name),f(N,`${_e??""}
                /
                ${I??""}`),f(pe,`最終使用日時 ： ${m??""}`)},[()=>e(J).cardNames.filter(_e=>d().mainCardNames.includes(_e)).length,()=>e(J).cardNames.filter(_e=>d().exCardNames.includes(_e)).length,()=>e(J).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],de),r(ye,ce)}),r(V,se)},C=V=>{var se=Yi(),ye=s(a(se),2),J=a(ye);nr(J,()=>e(g),ce=>S(g,ce)),be("change",J,D),be("cancel",J,W),be("drop",se,P),be("dragover",se,E),r(V,se)};b(je,V=>{e(re).length?V(T):V(C,!1)})}r(Y,ne)}),r(F,z)},footer:(F,K)=>{var z=Ui(),A=a(z);yt(A,()=>e(c),null,(Y,re)=>{var ne=Me(),je=U(ne);{var T=V=>{var se=Ni(),ye=U(se),J=s(ye,2),ce=s(J,2);u(()=>{ye.disabled=e(re).length===0,J.disabled=e(re).length===0}),be("click",ye,()=>_()({deckInfos:e(re),replaceAll:!1})),be("click",J,()=>_()({deckInfos:e(re),replaceAll:!0})),be("click",ce,W),r(V,se)},C=V=>{var se=Me(),ye=U(se);{var J=ce=>{var Ue=Ii();be("click",Ue,()=>_()(void 0)),r(ce,Ue)};b(ye,ce=>{d().cancelable&&ce(J)},!0)}r(V,se)};b(je,V=>{e(re).length?V(T):V(C,!1)})}r(Y,ne)}),r(F,z)}}}),it()}const Gt=class Gt extends or{constructor(i,t){super(i,...Object.values(t))}};Ze(Gt,"createModalController",i=>{const t={deckUploader:new vr({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1,mainCardNames:[],exCardNames:[]})};return Object.assign(new Gt(i,t),t)});let la=Gt;function Hi(v,i){rt(i,!1);let t=Re(i,"modalController",8);st(),lr(v,{get modalController(){return t()},children:(d,_)=>{var c=Me(),g=U(c);{var l=E=>{Fi(E,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};b(g,E=>{t().deckUploader.state==="Shown"&&E(l)})}r(d,c)},$$slots:{default:!0}}),it()}var Oi=n('<label><input type="checkbox"> </label>'),Pi=n('<label><input type="checkbox"> </label>'),Li=n('<label><input type="checkbox"> <div style="display: inline-block;"></div> </label>'),Ri=n('<label><input type="checkbox"> </label>'),Wi=n('<div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5"><button class="search_condition_title black_button svelte-1s1plv5">モンスター</button></div> <div class="svelte-1s1plv5"></div></div> <div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5"><button class="search_condition_title black_button svelte-1s1plv5">属性</button></div> <div class="svelte-1s1plv5"></div></div> <div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5"><button class="search_condition_title black_button svelte-1s1plv5">種族</button></div> <div class="svelte-1s1plv5"></div></div>',1),Ki=n('<label><input type="checkbox"> </label>'),zi=n('<div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5"><button class="search_condition_title black_button svelte-1s1plv5">魔法</button></div> <div class="svelte-1s1plv5"></div></div>'),Vi=n('<label><input type="checkbox"> </label>'),Gi=n('<div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5"><button class="search_condition_title black_button svelte-1s1plv5">罠</button></div> <div class="svelte-1s1plv5"></div></div>'),Xi=n('<label><input type="checkbox"> </label>'),Qi=n("<option> </option>"),Zi=n('<div class="svelte-1s1plv5"><a class="white_button svelte-1s1plv5" download="SVS_DeckInfos.json">ダウンロード</a></div>'),Ji=n('<div class="svelte-1s1plv5"></div>'),en=n('<div class="svelte-1s1plv5"><a class="white_button svelte-1s1plv5" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),tn=n('<div class="svelte-1s1plv5"></div>'),an=n('<div class="deck_editor_body_right_header svelte-1s1plv5"><div class="deck_editor_body_right_header_row svelte-1s1plv5"><div class="svelte-1s1plv5">編集対象 <select></select></div> <div class="svelte-1s1plv5"></div> <div class="svelte-1s1plv5">新規名称 <input type="text"></div></div> <div class="deck_editor_body_right_header_row svelte-1s1plv5"></div> <div class="deck_editor_body_right_header_row svelte-1s1plv5"><div class="svelte-1s1plv5">基本操作</div> <div class="svelte-1s1plv5"><button class="white_button svelte-1s1plv5">デッキを保存</button></div> <div class="svelte-1s1plv5"></div> <div class="svelte-1s1plv5"><button class="white_button svelte-1s1plv5">デッキを複製</button></div> <div class="svelte-1s1plv5"><button class="white_button svelte-1s1plv5" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-1s1plv5"><div class="svelte-1s1plv5">DL/UL</div> <!> <!> <div class="svelte-1s1plv5"><button class="white_button svelte-1s1plv5">アップロード</button></div></div></div> <!>',1),rn=n("<div>デッキ情報読込中</div>"),sn=n('<div class="deck_editor svelte-1s1plv5"><div class="deck_editor_header"></div> <div class="deck_editor_body svelte-1s1plv5"><div class="deck_editor_body_left svelte-1s1plv5"><div role="contentinfo"><div class="deck_editor_search_box_header svelte-1s1plv5"><div>検索条件</div> <div><button class="white_button svelte-1s1plv5">条件クリア</button></div></div> <div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5">名称</div> <div class="svelte-1s1plv5"><input type="text" style="width:70%"> <button class="white_button svelte-1s1plv5">クリア</button> <span>※ルビには対応していません</span></div></div> <div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5"><button class="search_condition_title black_button svelte-1s1plv5">種類</button></div> <div class="svelte-1s1plv5"></div></div> <!> <!> <!> <div class="deck_editor_search_box_row svelte-1s1plv5"><div class="svelte-1s1plv5"><button class="search_condition_title black_button svelte-1s1plv5">その他</button></div> <div class="svelte-1s1plv5"></div></div></div> <!></div> <div class="deck_editor_body_center svelte-1s1plv5"><!></div> <div class="deck_editor_body_right svelte-1s1plv5"><!></div></div> <div class="footer svelte-1s1plv5"></div></div> <!>',1);function nn(v,i){rt(i,!1);const t=[],d=[],_=[],c=[],g=[],l=[],E=[],P=la.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),D={name:"",cardKinds:wa.filter(k=>k!=="XyzMaterial"),monsterCategories:[...Sa],monsterAttributes:[...$a],monsterTypes:[...Da],spellCategories:[...Ca],trapCategories:[...xa],others:["test","oldVersion"]},o=he(structuredClone(D));Pe(o,e(o).others=["oldVersion"]);let W=he("SearchCondition");const F=async()=>{Pe(o,e(o).name=""),Pe(o,e(o).cardKinds=[]),Pe(o,e(o).monsterCategories=[]),Pe(o,e(o).monsterAttributes=[]),Pe(o,e(o).monsterTypes=[]),Pe(o,e(o).spellCategories=[]),Pe(o,e(o).trapCategories=[]),Pe(o,e(o).others=[])},K=async k=>{Array.isArray(e(o)[k])&&Array.isArray(D[k])&&Pe(o,e(o)[k]=e(o)[k].length?[]:[...D[k]])},z=(k,h,x)=>{Array.isArray(e(o)[h])&&Array.isArray(D[h])&&Pe(o,e(o)[h]=[x])},A=async()=>{const h=(await e(ne)).find(x=>x.id===e(re));h&&S(C,{...h,cardInfos:h.cardNames.map(x=>ht[x])})},Y=()=>ft.getAllDeckInfo().then(k=>(S(re,(k.find(h=>h.lastUsedAt.getTime()===Math.max(...k.map(x=>x.lastUsedAt.getTime())))??k[0]).id),k));let re=he(-1),ne=he(Y()),je=he(e(ne).then(k=>ft.convertToObjectURL(k)));e(ne).then(A);const T=()=>{S(ne,Y()),S(je,e(ne).then(k=>ft.convertToObjectURL(k))),A()};let C=he({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),V=he(ht.ゾンビーノ);const se=k=>{S(W,"CardDetail"),S(V,k)},ye=async()=>{const h=(await e(ne)).find(x=>x.id===e(re));if(!h)throw new Error("illegal state");return h},J=async()=>{const k=await ye();await k.saveDeckInfo({...k,name:e(C).name,cardNames:e(C).cardInfos.map(h=>h.name),lastUsedAt:new Date}),T()},ce=async()=>{(await ft.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,e(C).cardInfos.map(h=>h.name))).saveDeckInfo(),T()},Ue=async k=>{const h=await ye();!k.shiftKey&&!confirm(`デッキ【${h.name}】を削除します。
よろしいですか？`)||(await h.delete(),T())},ke=async()=>{const k=await P.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0,mainCardNames:Object.values(ht).filter(x=>{var R;return!((R=x.monsterCategories)!=null&&R.union(zt).length)}).map(x=>x.name),exCardNames:Object.values(ht).filter(x=>{var R;return(R=x.monsterCategories)==null?void 0:R.union(zt).length}).map(x=>x.name)});if(!k)return;const h=[];if(k.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;h.push(...(await e(ne)).map(x=>x.id))}await Promise.all(k.deckInfos.map(x=>ft.createNewDeck(x.name,x.description,x.cardNames,x.lastUsedAt))),h.length&&await Promise.all(h.map(ft.remove)),T()};st();var B=sn(),N=U(B),le=s(a(N),2),pe=a(le),_e=a(pe),I=a(_e),m=s(a(I),2),X=a(m),te=s(I,2),ve=s(a(te),2),$=a(ve),H=s($,2),Q=s(te,2),ee=a(Q),p=a(ee),q=s(ee,2);ie(q,5,()=>wa.filter(k=>k!=="XyzMaterial"),oe,(k,h)=>{var x=Oi(),R=a(x),Se,Ie=s(R);u(()=>{Se!==(Se=e(h))&&(R.value=(R.__value=e(h))==null?"":e(h)),f(Ie,` ${Ia[e(h)]??""}`)}),Dt(t,[],R,()=>(e(h),e(o).cardKinds),G=>Pe(o,e(o).cardKinds=G)),r(k,x)});var j=s(Q,2);{var L=k=>{var h=Wi(),x=U(h),R=a(x),Se=a(R),Ie=s(R,2);ie(Ie,5,()=>Sa,oe,(et,Ce)=>{var Be=Pi(),Ae=a(Be),Ve,vt=s(Ae);u(()=>{Ve!==(Ve=e(Ce))&&(Ae.value=(Ae.__value=e(Ce))==null?"":e(Ce)),f(vt,` ${Qt[e(Ce)]??""}${ca[e(Ce)]??""}`)}),Dt(d,[],Ae,()=>(e(Ce),e(o).monsterCategories),nt=>Pe(o,e(o).monsterCategories=nt)),r(et,Be)});var G=s(x,2),xe=a(G),qe=a(xe),We=s(xe,2);ie(We,5,()=>$a,oe,(et,Ce)=>{var Be=Li(),Ae=a(Be),Ve,vt=s(Ae,2),nt=s(vt);u(()=>{Ve!==(Ve=e(Ce))&&(Ae.value=(Ae.__value=e(Ce))==null?"":e(Ce)),Ee(vt,`monster_attr ${e(Ce)??""} svelte-1s1plv5`),f(nt,` ${va[e(Ce)]??""}`)}),Dt(_,[],Ae,()=>(e(Ce),e(o).monsterAttributes),mt=>Pe(o,e(o).monsterAttributes=mt)),r(et,Be)});var Ne=s(G,2),ze=a(Ne),ot=a(ze),ct=s(ze,2);ie(ct,5,()=>Da,oe,(et,Ce)=>{var Be=Ri(),Ae=a(Be),Ve,vt=s(Ae);u(()=>{Ve!==(Ve=e(Ce))&&(Ae.value=(Ae.__value=e(Ce))==null?"":e(Ce)),f(vt,` ${Xt[e(Ce)]??""}
                  ${da[e(Ce)]??""}`)}),Dt(c,[],Ae,()=>(e(Ce),e(o).monsterTypes),nt=>Pe(o,e(o).monsterTypes=nt)),be("dblclick",Be,nt=>z(nt,"monsterTypes",e(Ce))),r(et,Be)}),be("click",Se,()=>K("monsterCategories")),ae(3,x,()=>fe,()=>({delay:0,duration:100})),be("click",qe,()=>K("monsterAttributes")),ae(3,G,()=>fe,()=>({delay:0,duration:100})),be("click",ot,()=>K("monsterTypes")),ae(3,Ne,()=>fe,()=>({delay:0,duration:100})),r(k,h)};b(j,k=>{e(o).cardKinds.includes("Monster")&&k(L)})}var w=s(j,2);{var y=k=>{var h=zi(),x=a(h),R=a(x),Se=s(x,2);ie(Se,5,()=>Ca,oe,(Ie,G)=>{var xe=Ki(),qe=a(xe),We,Ne=s(qe);u(()=>{We!==(We=e(G))&&(qe.value=(qe.__value=e(G))==null?"":e(G)),f(Ne,` ${Zt[e(G)]??""}`)}),Dt(g,[],qe,()=>(e(G),e(o).spellCategories),ze=>Pe(o,e(o).spellCategories=ze)),r(Ie,xe)}),be("click",R,()=>K("spellCategories")),ae(3,h,()=>fe,()=>({delay:0,duration:100})),r(k,h)};b(w,k=>{e(o).cardKinds.includes("Spell")&&k(y)})}var Z=s(w,2);{var we=k=>{var h=Gi(),x=a(h),R=a(x),Se=s(x,2);ie(Se,5,()=>xa,oe,(Ie,G)=>{var xe=Vi(),qe=a(xe),We,Ne=s(qe);u(()=>{We!==(We=e(G))&&(qe.value=(qe.__value=e(G))==null?"":e(G)),f(Ne,` ${Jt[e(G)]??""}`)}),Dt(l,[],qe,()=>(e(G),e(o).trapCategories),ze=>Pe(o,e(o).trapCategories=ze)),r(Ie,xe)}),be("click",R,()=>K("trapCategories")),ae(3,h,()=>fe,()=>({delay:0,duration:100})),r(k,h)};b(Z,k=>{e(o).cardKinds.includes("Trap")&&k(we)})}var De=s(Z,2),ge=a(De),ue=a(ge),M=s(ge,2);ie(M,4,()=>[{key:"test",text:"テスト用カードを表示する"},{key:"oldVersion",text:"エラッタ前カードを表示する"}],oe,(k,h)=>{var x=Xi(),R=a(x),Se,Ie=s(R);u(()=>{Se!==(Se=h.key)&&(R.value=(R.__value=h.key)==null?"":h.key),f(Ie,` ${h.text??""}`)}),Dt(E,[],R,()=>(h.key,e(o).others),G=>Pe(o,e(o).others=G)),r(k,x)});var O=s(_e,2);ji(O,{get cardInfo(){return e(V)}});var me=s(pe,2),$e=a(me);const Le=de(()=>Object.values(ht));Ba($e,{mode:"List",get allCardInfos(){return e(Le)},onAttention:se,get searchCondition(){return e(o)},get deckCardInfos(){return e(C).cardInfos},set deckCardInfos(k){Pe(C,e(C).cardInfos=k)},$$legacy:!0});var Ye=s(me,2),Te=a(Ye);yt(Te,()=>e(ne),k=>{var h=rn();r(k,h)},(k,h)=>{var x=an(),R=U(x),Se=a(R),Ie=a(Se),G=s(a(Ie));u(()=>{e(re),At(()=>{e(h)})}),ie(G,5,()=>e(h),oe,(Xe,He)=>{var Oe=Qi(),Ge={},Qe=a(Oe);u(()=>{Ge!==(Ge=e(He).id)&&(Oe.value=(Oe.__value=e(He).id)==null?"":e(He).id),f(Qe,e(He).name)}),r(Xe,Oe)});var xe=s(Ie,4),qe=s(a(xe)),We=s(Se,4),Ne=s(a(We),2),ze=a(Ne),ot=s(Ne,4),ct=a(ot),et=s(ot,2),Ce=a(et),Be=s(We,2),Ae=s(a(Be),2);yt(Ae,ye,Xe=>{var He=Ji();r(Xe,He)},(Xe,He)=>{var Oe=Zi(),Ge=a(Oe);u(Qe=>pt(Ge,"href",Qe),[()=>ft.convertToObjectURL([e(He)])],de),r(Xe,Oe)});var Ve=s(Ae,2);yt(Ve,()=>e(je),Xe=>{var He=tn();r(Xe,He)},(Xe,He)=>{var Oe=en(),Ge=a(Oe);u(()=>pt(Ge,"href",e(He))),r(Xe,Oe)});var vt=s(Ve,2),nt=a(vt),mt=s(R,2);Ba(mt,{mode:"Deck",allCardInfos:[],onAttention:se,get deckCardInfos(){return e(C).cardInfos},set deckCardInfos(Xe){Pe(C,e(C).cardInfos=Xe)},$$legacy:!0}),Yt(G,()=>e(re),Xe=>S(re,Xe)),be("change",G,A),sa(qe,()=>e(C).name,Xe=>Pe(C,e(C).name=Xe)),be("click",ze,J),be("click",ct,ce),be("click",Ce,Ue),be("click",nt,ke),r(k,x)});var Fe=s(le,2);Fe.textContent=`実装済カード${dr+Ma}枚（内、効果のないモンスター${Ma??""}枚）`;var Ke=s(N,2);Hi(Ke,{modalController:P}),u(()=>Ee(_e,`deck_editor_search_box ${(e(W)==="SearchCondition"?"":"minimum")??""} svelte-1s1plv5`)),be("click",X,F),sa($,()=>e(o).name,k=>Pe(o,e(o).name=k)),be("click",H,()=>Pe(o,e(o).name="")),be("click",p,()=>K("cardKinds")),be("click",ue,()=>K("others")),ae(3,De,()=>fe,()=>({delay:0,duration:100})),be("mouseenter",_e,()=>S(W,"SearchCondition")),r(v,B),it()}String.prototype.format=function(...v){let i=this;for(const[t,d]of v.entries()){const _=new RegExp(`\\{${t}\\}`,"g");i=i.replace(_,d)}return i};String.prototype.toSnakeCase=function(){return this.split(/(?=[A-Z])/).join("_").toLowerCase()};String.prototype.toNarrow=function(){return this.replace(/[Ａ-Ｚａ-ｚ０-９]/g,function(v){return String.fromCharCode(v.charCodeAt(0)-65248)})};String.prototype.toWide=function(){return this.replace(/[A-Za-z0-9]/g,function(v){return String.fromCharCode(v.charCodeAt(0)+65248)})};const ln=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],on=3;var vn=n('<input class="game_mode_radio svelte-abgng1" type="radio" name="game_mode"> <label> </label>',1),dn=n('<option class="svelte-abgng1"> </option>'),cn=n('<option class="svelte-abgng1"> </option>'),_n=n('<option class="svelte-abgng1"> </option>'),un=n('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-abgng1">デッキ：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_deck_selector" class="deck_selector svelte-abgng1"><option class="svelte-abgng1">デフォルト</option><!></select></div></td></tr>'),fn=n('<option class="svelte-abgng1"> </option>'),pn=n('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_selector" class="config_row_label npc_selector svelte-abgng1">対戦相手：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_selector" class="npc_selector svelte-abgng1"></select> <div class="svelte-abgng1"> </div></div></td></tr> <!> <tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_selector" class="config_row_label npc_selector svelte-abgng1">先攻後攻：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_selector" class="npc_selector svelte-abgng1"></select></div></td></tr>',1),gn=n('<option class="svelte-abgng1"> </option>'),mn=n('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-abgng1">難易度：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="difficulty_selector" class="difficulty_selector svelte-abgng1"></select></div></td></tr>'),bn=n('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label class="config_row_label svelte-abgng1" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"></div></td></tr> <tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="deck_selector" class="config_row_label deck_selector svelte-abgng1">デッキ：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="deck_selector" class="deck_selector svelte-abgng1"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-abgng1"><div><button class="btn svelte-abgng1">duel start!</button></div></td></tr>',1),hn=n('<tr><td colspan="2" class="svelte-abgng1"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),yn=n('<tr><td colspan="2" class="svelte-abgng1"><div><button class="btn svelte-abgng1">deck edit</button></div></td></tr>'),kn=n('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="duelist_name" class="config_row_label duelist_name svelte-abgng1">名前：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><input id="duelist_name" class="duelist_name svelte-abgng1" type="text"></div></td></tr> <!> <!>',1),wn=n('<tr><td colspan="2" class="svelte-abgng1"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),xn=n('<div class="app_body svelte-abgng1"><table class="config_table svelte-abgng1"><tbody><!></tbody></table></div>'),Cn=n('<div class="result_title result_win svelte-abgng1">YOU WIN</div>'),Dn=n('<div class="result_title result_lose svelte-abgng1">YOU LOSE</div>'),$n=n('<div class="result_title result_draw svelte-abgng1">DRAW</div>'),Sn=n('<div class="twitter_share_button_wrapper svelte-abgng1"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-abgng1">X(twitter)でシェアする</a></div>'),Mn=n('<div class="result svelte-abgng1"><!> <div class="reason_of_end svelte-abgng1"> </div> <!> <div class="svelte-abgng1"><button class="white_button svelte-abgng1">TOPへ戻る</button></div></div>'),jn=n('<main style="flex-direction: column; display :flex" class="svelte-abgng1"><div class="link link_left svelte-abgng1"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-abgng1">posfie(toggeter)</a></div> <div class="link link_right svelte-abgng1"><a class="a_button svelte-abgng1" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">現時点とこの先のこと</a></div> <!> <div class="debug_info svelte-abgng1"><span class="svelte-abgng1"> </span> <span class="user_agent_info svelte-abgng1"> </span> <span class="screen_info svelte-abgng1"> </span></div> <!></main>');function Tn(v,i){rt(i,!1);const t=new cr("stk_ygo_svelte",on,ln);let d=he(0),_=he(0),c=he(),g=he("FtkChallenge"),l=he("None"),E=he(0),P=he(""),D=he(void 0);const o="https://setta238.github.io/stk_ygo_svelte/",W="遊戯王deそりてあ",F="ninja_no",K=_r.getOrCreateNew(t).then(p=>(S(g,ja.includes(p.previousGameMode)?p.previousGameMode:"FtkChallenge"),Ue(p.previousNpcId),p)),z=p=>{var j;const q=p.find(L=>L.lastUsedAt.getTime()===Math.max(...p.map(w=>w.lastUsedAt.getTime())))??p[0];S(E,q.id),e(g)==="FtkChallenge"&&q.deckType!=="Preset"&&S(E,((j=$t.find(L=>L.deckType==="Preset"))==null?void 0:j.id)??e(E))};let A=he(ft.getAllDeckInfo(t).then(p=>(Promise.all(p.filter(q=>!q.lastUsedAt).map(q=>{q.saveDeckInfo()})),z(p),p)));const Y=async()=>{const p=e(E);let q=(await e(A)).find(L=>L.id===p)??(await ne()).find(L=>L.id===p);q&&await q.updateTimestamp();let j=q;if(j||(j=$t.find(L=>L.id===p)),!j)throw new Error("illegal state");return j},re=async()=>{(await K).save({previousGameMode:e(g)})},ne=()=>(S(A,ft.getAllDeckInfo(t).then(p=>(z(p),p))),e(A)),je=async()=>{(await e(A)).length||(await ft.prepareSampleDeck(),ne())},T=async()=>{await Promise.all([re(),je()]);const p=await Y(),q=await K;let j=Et.find(y=>y.id===Number.MIN_SAFE_INTEGER)??Et[0],L=$t.find(y=>y.id===Number.MIN_SAFE_INTEGER)??$t[0],w="PlayFirst";e(g)==="FtkChallenge"?j=Et.filter(y=>y.npcType==="FtkChallenge").find(y=>y.difficulty===q.previousDifficulty)??j:e(g)==="Free"&&(j=Et.find(y=>y.id===q.previousNpcId)??j,L=$t.slice(-1)[0],w=q.previousStartMode),j.npcType!=="FtkChallenge"&&q.previousNpcDeckId>-1?L=(await e(A)).find(y=>y.id===q.previousNpcDeckId)??L:L=$t.find(y=>y.id===j.id)??L,S(c,new fr(q,"Player",p,[],j,"NPC",L,[],w)),e(c).onDuelEnd.append(()=>(S(c,e(c)),"RemoveMe"))},C=async()=>{await Promise.all([re(),je()]),S(l,"DeckEdit")},V=async p=>{await re(),p.key==="Enter"&&!p.repeat&&(await K).save()},se=()=>{S(A,ne()),S(c,void 0),S(l,"None")};let ye=Date.now();const J=p=>{Date.now()-ye<200||(ye=Date.now(),S(g,p),ne())},ce=p=>{Ue(Number(p.currentTarget.value))},Ue=p=>{var q;S(D,Et.find(j=>j.id===p)),S(P,((q=e(D))==null?void 0:q.description)??"")};je(),st();var ke=jn(),B=s(a(ke),2),N=a(B),le=s(B,2);{var pe=p=>{var q=Me(),j=U(q);yt(j,()=>K,null,(L,w)=>{ni(L,{get duel(){return e(c)},get userProfile(){return e(w)}})}),r(p,q)},_e=p=>{var q=Me(),j=U(q);{var L=y=>{nn(y,{})},w=y=>{var Z=xn(),we=a(Z),De=a(we),ge=a(De);yt(ge,()=>K,ue=>{var M=wn();r(ue,M)},(ue,M)=>{var O=kn(),me=U(O),$e=a(me),Le=a($e),Ye=s($e),Te=a(Ye),Fe=a(Te),Ke=s(me,2);yt(Ke,()=>e(A),x=>{var R=hn();r(x,R)},(x,R)=>{var Se=bn(),Ie=U(Se),G=a(Ie),xe=a(G),qe=s(G),We=a(qe);ie(We,5,()=>ja,oe,(He,Oe)=>{var Ge=vn(),Qe=U(Ge),_t=s(Qe,2),kt=a(_t);u(gt=>{pt(Qe,"id",`game_mode_radio_${gt??""}`),pr(Qe,e(Oe)),gr(Qe,e(g)===e(Oe)),Ee(_t,`game_mode_tab_label game_mode_tab_${gt??""} svelte-abgng1`),pt(_t,"for",`game_mode_radio_${gt??""}`),f(kt,e(Oe))},[()=>e(Oe).toLowerCase()],de),be("change",Qe,()=>J(e(Oe))),r(He,Ge)});var Ne=s(Ie,2),ze=a(Ne),ot=a(ze),ct=s(ze),et=a(ct),Ce=a(et);u(()=>{e(E),At(()=>{e(g),e(R)})}),ie(Ce,5,()=>e(g)==="FtkChallenge"?$t.filter(He=>He.deckType==="Preset"):e(R),oe,(He,Oe)=>{var Ge=dn(),Qe={},_t=a(Ge);u(()=>{Qe!==(Qe=e(Oe).id)&&(Ge.value=(Ge.__value=e(Oe).id)==null?"":e(Oe).id),f(_t,e(Oe).name)}),r(He,Ge)});var Be=s(Ne,2);{var Ae=He=>{var Oe=pn(),Ge=U(Oe),Qe=a(Ge),_t=a(Qe),kt=s(Qe),gt=a(kt),Tt=a(gt);u(()=>{e(M),At(()=>{})}),ie(Tt,5,()=>Et,oe,(ut,Je)=>{var lt=cn(),Ct={},qt=a(lt);u(()=>{Ct!==(Ct=e(Je).id)&&(lt.value=(lt.__value=e(Je).id)==null?"":e(Je).id),f(qt,e(Je).name)}),r(ut,lt)});var Ht=s(Tt,2),Ot=a(Ht),Nt=s(Ge,2);{var It=ut=>{var Je=un(),lt=a(Je),Ct=a(lt),qt=s(lt),ga=a(qt),ma=a(ga);u(()=>{e(M),At(()=>{e(R)})});var ea=a(ma);ea.value=(ea.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Ua=s(ea);ie(Ua,1,()=>e(R),oe,(ta,Rt)=>{var Wt=_n(),ba={},Fa=a(Wt);u(()=>{ba!==(ba=e(Rt).id)&&(Wt.value=(Wt.__value=e(Rt).id)==null?"":e(Rt).id),f(Fa,e(Rt).name)}),r(ta,Wt)}),ae(3,Ct,()=>fe,()=>({duration:200})),ae(3,lt,()=>fe,()=>({duration:200})),Yt(ma,()=>e(M).previousNpcDeckId,ta=>e(M).previousNpcDeckId=ta),ae(3,ga,()=>fe,()=>({duration:200})),ae(3,qt,()=>fe,()=>({duration:200})),ae(3,Je,()=>fe,()=>({duration:200})),r(ut,Je)};b(Nt,ut=>{var Je;((Je=e(D))==null?void 0:Je.npcType)!=="FtkChallenge"&&ut(It)})}var xt=s(Nt,2),wt=a(xt),Pt=a(wt),Lt=s(wt),fa=a(Lt),pa=a(fa);u(()=>{e(M),At(()=>{})}),ie(pa,5,()=>oa(Ta),oe,(ut,Je)=>{var lt=fn(),Ct={},qt=a(lt);u(()=>{Ct!==(Ct=e(Je))&&(lt.value=(lt.__value=e(Je))==null?"":e(Je)),f(qt,Ta[e(Je)])}),r(ut,lt)}),u(()=>f(Ot,`※${e(P)??""}`)),ae(3,_t,()=>fe,()=>({duration:200})),ae(3,Qe,()=>fe,()=>({duration:200})),be("change",Tt,ce),Yt(Tt,()=>e(M).previousNpcId,ut=>e(M).previousNpcId=ut),ae(3,gt,()=>fe,()=>({duration:200})),ae(3,kt,()=>fe,()=>({duration:200})),ae(3,Ge,()=>fe,()=>({duration:200})),ae(3,Pt,()=>fe,()=>({duration:200})),ae(3,wt,()=>fe,()=>({duration:200})),Yt(pa,()=>e(M).previousStartMode,ut=>e(M).previousStartMode=ut),ae(3,fa,()=>fe,()=>({duration:200})),ae(3,Lt,()=>fe,()=>({duration:200})),ae(3,xt,()=>fe,()=>({duration:200})),r(He,Oe)},Ve=He=>{var Oe=Me(),Ge=U(Oe);{var Qe=_t=>{var kt=mn(),gt=a(kt),Tt=a(gt),Ht=s(gt),Ot=a(Ht),Nt=a(Ot);u(()=>{e(M),At(()=>{})}),ie(Nt,5,()=>mr,oe,(It,xt)=>{var wt=gn(),Pt={},Lt=a(wt);u(()=>{Pt!==(Pt=e(xt))&&(wt.value=(wt.__value=e(xt))==null?"":e(xt)),f(Lt,e(xt))}),r(It,wt)}),ae(3,Tt,()=>fe,()=>({duration:200})),ae(3,gt,()=>fe,()=>({duration:200})),Yt(Nt,()=>e(M).previousDifficulty,It=>e(M).previousDifficulty=It),ae(3,Ot,()=>fe,()=>({duration:200})),ae(3,Ht,()=>fe,()=>({duration:200})),ae(3,kt,()=>fe,()=>({duration:200})),r(_t,kt)};b(Ge,_t=>{e(g)==="FtkChallenge"&&_t(Qe)},!0)}r(He,Oe)};b(Be,He=>{e(g)==="Free"?He(Ae):He(Ve,!1)})}var vt=s(Be,2),nt=a(vt),mt=a(nt),Xe=a(mt);ae(3,xe,()=>fe,()=>({duration:200})),ae(3,G,()=>fe,()=>({duration:200})),ae(3,We,()=>fe,()=>({duration:200})),ae(3,qe,()=>fe,()=>({duration:200})),ae(3,Ie,()=>fe,()=>({duration:200})),ae(3,ot,()=>fe,()=>({duration:200})),ae(3,ze,()=>fe,()=>({duration:200})),Yt(Ce,()=>e(E),He=>S(E,He)),ae(3,et,()=>fe,()=>({duration:200})),ae(3,ct,()=>fe,()=>({duration:200})),ae(3,Ne,()=>fe,()=>({duration:200})),be("click",Xe,T),ae(3,mt,()=>fe,()=>({duration:200})),r(x,Se)});var k=s(Ke,2);{var h=x=>{var R=yn(),Se=a(R),Ie=a(Se),G=a(Ie);be("click",G,C),ae(3,Ie,()=>fe,()=>({duration:200})),ae(3,Se,()=>fe,()=>({duration:200})),ae(3,R,()=>fe,()=>({duration:200})),r(x,R)};b(k,x=>{e(g)==="Free"&&x(h)})}ae(3,Le,()=>fe,()=>({duration:200})),ae(3,$e,()=>fe,()=>({duration:200})),sa(Fe,()=>e(M).name,x=>e(M).name=x),be("keypress",Fe,V),ae(3,Te,()=>fe,()=>({duration:200})),ae(3,Ye,()=>fe,()=>({duration:200})),ae(3,me,()=>fe,()=>({duration:200})),r(ue,O)}),r(y,Z)};b(j,y=>{e(l)==="DeckEdit"?y(L):y(w,!1)},!0)}r(p,q)};b(le,p=>{e(c)?p(pe):p(_e,!1)})}var I=s(le,2),m=a(I),X=a(m),te=s(m,2),ve=a(te),$=s(te,2),H=a($),Q=s(I,2);{var ee=p=>{var q=Mn(),j=a(q);{var L=M=>{var O=Me(),me=U(O);{var $e=Ye=>{var Te=Cn();r(Ye,Te)},Le=Ye=>{var Te=Me(),Fe=U(Te);{var Ke=k=>{var h=Dn();r(k,h)};b(Fe,k=>{e(c).winner.seat==="Above"&&k(Ke)},!0)}r(Ye,Te)};b(me,Ye=>{e(c).winner.seat==="Below"?Ye($e):Ye(Le,!1)})}r(M,O)},w=M=>{var O=$n();r(M,O)};b(j,M=>{e(c).winner?M(L):M(w,!1)})}var y=s(j,2),Z=a(y),we=s(y,2);{var De=M=>{var O=Sn(),me=a(O);u(()=>pt(me,"href",`https://x.com/share?url=${o}&text=${e(c).twitterShareText??""}&hashtags=${W}&via=${F}`)),r(M,O)};b(we,M=>{e(c).twitterShareText&&M(De)})}var ge=s(we,2),ue=a(ge);u(()=>f(Z,e(c).reasonOfEnd)),be("click",ue,se),ae(3,q,()=>yr,()=>({delay:200,duration:200})),r(p,q)};b(Q,p=>{e(c)&&e(c).isEnded&&p(ee)})}u(()=>{f(X,"build at: 20251231_164009"),f(ve,ur.text),f(H,`w:${e(d)??""}px h:${e(_)??""}px`)}),Kt("innerWidth",p=>S(d,p)),Kt("innerHeight",p=>S(_,p)),be("click",N,se),r(v,ke),it()}br(Tn,{target:document.getElementById("app")});
