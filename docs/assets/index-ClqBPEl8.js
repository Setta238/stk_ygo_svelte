var Ja=Object.defineProperty;var Ta=_=>{throw TypeError(_)};var Za=(_,i,t)=>i in _?Ja(_,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):_[i]=t;var nt=(_,i,t)=>Za(_,typeof i!="symbol"?i+"":i,t),Ea=(_,i,t)=>i.has(_)||Ta("Cannot "+t);var ht=(_,i,t)=>(Ea(_,i,"read from private field"),t?t.call(_):i.get(_)),ia=(_,i,t)=>i.has(_)?Ta("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(_):i.set(_,t),ya=(_,i,t,d)=>(Ea(_,i,"write to private field"),d?d.call(_,t):i.set(_,t),t);import{s as ja,r as er,a as x,b as tr,l as ar,g as e,d as Ka,p as ct,c as je,m as le,i as _t,t as l,e as a,f as C,h as f,j as ne,k as Le,n as ot,o as z,q as r,u as ut,v as he,D as rr,w as ke,x as H,y as s,z as _e,A as Xt,B as oe,C as fe,E as b,F as sr,G as lt,H as Gt,I as ir,J as Wa,K as ea,L as da,M as Ca,N as na,O as ha,P as Ot,Q as mt,R as xa,S as ma,T as Da,U as la,V as va,W as za,X as pa,Y as ga,Z as nr,_ as lr,$ as or,a0 as dr,a1 as vr,a2 as cr,a3 as _r,a4 as ca,a5 as Va,a6 as ta,a7 as Xa,a8 as _a,a9 as qt,aa as ur,ab as fr,ac as aa,ad as mr,ae as Tt,af as pr,ag as gr,ah as yr,ai as Aa,aj as Ba,ak as La,al as Ya,am as qa,an as Ua,ao as hr,ap as Bt,aq as Nt,ar as Ft,as as br,at as It,au as kr,av as wr,aw as Pa,ax as Zt,ay as Vt,az as Cr,aA as xr,aB as Dr,aC as Ha,aD as $r,aE as Sr,aF as Mr}from"../chunk/entity_proc_20260207_185018.js";import"../chunk/json_20260207_185018.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))d(m);new MutationObserver(m=>{for(const p of m)if(p.type==="childList")for(const c of p.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function t(m){const p={};return m.integrity&&(p.integrity=m.integrity),m.referrerPolicy&&(p.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?p.credentials="include":m.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function d(m){if(m.ep)return;m.ep=!0;const p=t(m);fetch(m.href,p)}})();const Tr=_=>_;function $a(_){const i=_-1;return i*i*i+1}function Na(_){const i=typeof _=="string"&&_.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[_,"px"]}function Er(_,{delay:i=0,duration:t=400,easing:d=Tr}={}){const m=+getComputedStyle(_).opacity;return{delay:i,duration:t,easing:d,css:p=>`opacity: ${p*m}`}}function jr(_,{delay:i=0,duration:t=400,easing:d=$a,x:m=0,y:p=0,opacity:c=0}={}){const o=getComputedStyle(_),q=+o.opacity,E=o.transform==="none"?"":o.transform,S=q*(1-c),[T,B]=Na(m),[n,V]=Na(p);return{delay:i,duration:t,easing:d,css:(U,h)=>`
			transform: ${E} translate(${(1-U)*T}${B}, ${(1-U)*n}${V});
			opacity: ${q-S*h}`}}function be(_,{delay:i=0,duration:t=400,easing:d=$a,axis:m="y"}={}){const p=getComputedStyle(_),c=+p.opacity,o=m==="y"?"height":"width",q=parseFloat(p[o]),E=m==="y"?["top","bottom"]:["left","right"],S=E.map(g=>`${g[0].toUpperCase()}${g.slice(1)}`),T=parseFloat(p[`padding${S[0]}`]),B=parseFloat(p[`padding${S[1]}`]),n=parseFloat(p[`margin${S[0]}`]),V=parseFloat(p[`margin${S[1]}`]),U=parseFloat(p[`border${S[0]}Width`]),h=parseFloat(p[`border${S[1]}Width`]);return{delay:i,duration:t,easing:d,css:g=>`overflow: hidden;opacity: ${Math.min(g*20,1)*c};${o}: ${g*q}px;padding-${E[0]}: ${g*T}px;padding-${E[1]}: ${g*B}px;margin-${E[0]}: ${g*n}px;margin-${E[1]}: ${g*V}px;border-${E[0]}-width: ${g*U}px;border-${E[1]}-width: ${g*h}px;min-${o}: 0`}}function Fa(_,i){for(const t in i)_[t]=i[t];return _}function Ar({fallback:_,...i}){const t=new Map,d=new Map;function m(c,o,q){const{delay:E=0,duration:S=j=>Math.sqrt(j)*30,easing:T=$a}=Fa(Fa({},i),q),B=c.getBoundingClientRect(),n=o.getBoundingClientRect(),V=B.left-n.left,U=B.top-n.top,h=B.width/n.width,g=B.height/n.height,P=Math.sqrt(V*V+U*U),G=getComputedStyle(o),ye=G.transform==="none"?"":G.transform,A=+G.opacity;return{delay:E,duration:typeof S=="function"?S(P):S,easing:T,css:(j,ce)=>`
			   opacity: ${j*A};
			   transform-origin: top left;
			   transform: ${ye} translate(${ce*V}px,${ce*U}px) scale(${j+(1-j)*h}, ${j+(1-j)*g});
		   `}}function p(c,o,q){return(E,S)=>(c.set(S.key,E),()=>{if(o.has(S.key)){const T=o.get(S.key);return o.delete(S.key),m(T,E,S)}return c.delete(S.key),_&&_(E,S,q)})}return[p(d,t,!1),p(t,d,!0)]}function Ia(_){return Object.prototype.toString.call(_)==="[object Date]"}function Br(_){return _}function ba(_){const i=_-1;return i*i*i+1}function ka(_,i){if(_===i||_!==_)return()=>_;const t=typeof _;if(t!==typeof i||Array.isArray(_)!==Array.isArray(i))throw new Error("Cannot interpolate values of different type");if(Array.isArray(_)){const d=i.map((m,p)=>ka(_[p],m));return m=>d.map(p=>p(m))}if(t==="object"){if(!_||!i)throw new Error("Object cannot be null");if(Ia(_)&&Ia(i)){const p=_.getTime(),o=i.getTime()-p;return q=>new Date(p+q*o)}const d=Object.keys(i),m={};return d.forEach(p=>{m[p]=ka(_[p],i[p])}),p=>{const c={};return d.forEach(o=>{c[o]=m[o](p)}),c}}if(t==="number"){const d=i-_;return m=>_+m*d}return()=>i}var Ut,ra,oa,Qt;const Sa=class Sa{constructor(i,t={}){ia(this,Ut,ja(void 0));ia(this,ra,ja(void 0));ia(this,oa);ia(this,Qt,null);ht(this,Ut).v=ht(this,ra).v=i,ya(this,oa,t)}static of(i,t){const d=new Sa(i(),t);return er(()=>{d.set(i())}),d}set(i,t){var T;x(ht(this,ra),i);let{delay:d=0,duration:m=400,easing:p=Br,interpolate:c=ka}={...ht(this,oa),...t};if(m===0)return(T=ht(this,Qt))==null||T.abort(),x(ht(this,Ut),i),Promise.resolve();const o=tr.now()+d;let q,E=!1,S=ht(this,Qt);return ya(this,Qt,ar(B=>{if(B<o)return!0;if(!E){E=!0;const V=ht(this,Ut).v;q=c(V,i),typeof m=="function"&&(m=m(V,i)),S==null||S.abort()}const n=B-o;return n>m?(x(ht(this,Ut),i),!1):(x(ht(this,Ut),q(p(n/m))),!0)})),ht(this,Qt).promise}get current(){return e(ht(this,Ut))}get target(){return e(ht(this,ra))}set target(i){this.set(i)}};Ut=new WeakMap,ra=new WeakMap,oa=new WeakMap,Qt=new WeakMap;let ua=Sa;var Lr=l('<div class="phase_display svelte-1boxe40"><span class="svelte-1boxe40"> </span> </div>'),Yr=l('<div class="lifepoint_display svelte-1boxe40"><div class="svelte-1boxe40"> </div> <div class="svelte-1boxe40"> </div></div>'),qr=(_,i,t)=>i(e(t)),Ur=l('<div class="svelte-1boxe40"><button class="phase_button svelte-1boxe40"> </button></div>'),Pr=l("<div><!></div>"),Hr=l('<div class="svelte-1boxe40"><!></div>'),Nr=l("<div><!></div>"),Fr=l('<div class="config_button_wrapper svelte-1boxe40"><button id="config_button" class="svelte-1boxe40">⚙</button></div>'),Ir=l("<!> <!> <!> <!>",1),Or=l('<div style="position: absolute;" class="card_animation_receiver svelte-1boxe40"><!></div>'),Rr=l('<div style="position: absolute; top:0rem" class="svelte-1boxe40">｛効果対象｝</div>'),Kr=l('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Wr=l(" <!> 】",1),zr=l('<div style="position: absolute; bottom:0rem" class="svelte-1boxe40"> <!></div>'),Vr=l("<!> <!>",1),Xr=l('<div class="badge svelte-1boxe40"> </div>'),Gr=l('<div class="card_animation_receiver svelte-1boxe40"><!></div>'),Qr=l("<!> <!> <!> <!>",1),Jr=l('<td><div role="listitem"><!></div></td>');function Zr(_,i){ct(i,!1);let t=je(i,"view",12),d=je(i,"row",8),m=je(i,"column",8),p=je(i,"selectedEntities",28,()=>[]),c=je(i,"selectedCells",28,()=>[]),o=le(t().getCell(d(),m())),q=le(new ua(e(o).field.duel.duelists.Above.lp,{duration:400,easing:ba})),E=le(new ua(e(o).field.duel.duelists.Below.lp,{duration:400,easing:ba}));const S=()=>{x(o,t().getCell(d(),m())),he(q,e(q).target=e(o).field.duel.duelists.Above.lp),he(E,e(E).target=e(o).field.duel.duelists.Below.lp)};e(o).onUpdate.append(S),t().onDuelUpdate.append(S),t().modalController.onUpdate.append(S);let T,B=le([]),n=()=>console.log("hoge"),V,U=le([]),h=le(!1),g=le(!1),P=!1;const G=M=>{var K,F;x(ee,[]),p().reset(),T=M.activator,n=M.resolve,x(B,M.dummyActionInfos),x(U,M.chainBlockInfos.flatMap(O=>O.selectedEntities).getDistinct()),V=M.entitiesChoices,x(h,!1),x(g,((K=M.cellsChoices)==null?void 0:K.selectables.includes(e(o)))??!1),P=e(g)&&((F=M.cellsChoices)==null?void 0:F.qty)===1,S()};t().onWaitStart.append(G);const ye=()=>{T=void 0,x(B,[]),n=()=>{console.log("hoge")},V=void 0,x(U,[]),x(h,!1),x(g,!1),P=!1};t().onWaitEnd.append(ye);let A=le(!1),j=[];const ce=M=>{j=M.filter(K=>K.dests.includes(e(o))),x(A,j.length>0),S()},Te=()=>{j=[],x(A,!1),S()};t().onDragStart.append(ce),t().onDragEnd.append(Te);const[De,de]=_i;let ee=le([]);const Ae=M=>{if(T=void 0,e(o)===M.to||e(o).entities.includes(M.entity)){x(ee,[...e(ee),M]);const K=M.resolve;x(o,e(o)),setTimeout(()=>{x(ee,e(ee).filter(F=>F!==M)),M.count++,M.count>1&&K()},600)}};t().onAnimation.append(Ae);const Ce=M=>{n({phaseChange:M})},N=()=>e(o).isStackCell&&e(o).entities.flatMap(M=>M.actions).filter(M=>e(B).map(K=>K.action.seq).some(K=>K===M.seq)).length>0,L=M=>{var K;if(((K=M.target)==null?void 0:K.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),P)n({selectedCells:[e(o)]});else if(e(g))x(h,!e(h)),c(e(h)?[...c(),e(o)]:c().filter(F=>F!==e(o)));else if(e(o).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(o),!0),t().requireUpdate();const F=e(o).entities.flatMap(X=>X.actions).map(X=>X.seq),O=e(B).filter(X=>F.includes(X.action.seq));if(O.length){if(!T)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:T,dummyActionInfos:O,cancelable:!0}).then(X=>{X&&n({actionInfo:X})});return}}t().requireUpdate(),console.info(e(o),se(...e(o).visibleEntities))},Q=M=>{M.preventDefault(),M.dataTransfer&&(M.dataTransfer.dropEffect="move")},me=M=>{M.preventDefault(),console.info("drop",M,e(A),j),M.dataTransfer&&(M.dataTransfer.dropEffect="move");try{if(e(A)&&j){if(j.length===1){const K=j[0];n({actionInfo:{...K,dest:e(o)}})}else if(j.length>1){if(!T)throw new rr("想定されない状態");e(o).field.duel.view.modalController.terminateAll(),e(o).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:T,dummyActionInfos:j.map(K=>({...K,dest:e(o)})),cancelable:!1}).then(K=>{n({actionInfo:K})})}}}finally{t().removeDraggingActions()}},se=(...M)=>{if(t().waitMode==="Animation")return"Disabled";if(V&&V.selectables.find(F=>M.find(O=>F===O)))return"Selectable";if(!e(B)||e(B).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(F=>F.state==="Shown"))return"Disabled";const K=e(B).filter(F=>M.includes(F.action.entity));return K.length===0?"Disabled":e(o).isStackCell||K[0].action.entity!==M[0]?"Clickable":K.some(F=>F.dests.length)?"Draggable":"Clickable"};_t();var te=Jr(),R=a(te);R.__click=L;var D=a(R);{var Y=M=>{var K=ke(),F=H(K);{var O=X=>{var ue=ke(),xe=H(ue);{var k=u=>{var $=Lr(),Z=a($),W=a(Z),pe=s(Z,1,!0);f((ve,ie)=>{b(W,ve),b(pe,ie)},[()=>String(e(o).field.duel.clock.turn).padStart(2,"0"),()=>e(o).field.duel.phase.toUpperCase()],ne),r(u,$)},v=u=>{var $=ke(),Z=H($);{var W=ve=>{var ie=Yr(),ae=a(ie),Be=a(ae),re=s(ae,2),Re=a(re);f((Ne,Ke)=>{b(Be,Ne),b(Re,Ke)},[()=>Math.floor(e(q).current),()=>Math.floor(e(E).current)],ne),r(ve,ie)},pe=ve=>{var ie=ke(),ae=H(ie);{var Be=re=>{var Re=ke(),Ne=H(Re);{var Ke=ze=>{var Ge=ke(),it=H(Ge);{var qe=we=>{var Ee=ke(),Ve=H(Ee);_e(Ve,1,()=>t().duel.nextPhaseList,fe,(Xe,Ze)=>{var et=Ur(),st=a(et);st.__click=[qr,Ce,Ze];var pt=a(st);f(ft=>b(pt,ft),[()=>e(Ze).toUpperCase()],ne),r(Xe,et)}),r(we,Ee)};C(it,we=>{t().duel.isEnded||we(qe)})}r(ze,Ge)};C(Ne,ze=>{t().waitMode==="Free"&&ze(Ke)})}r(re,Re)};C(ae,re=>{e(o).column===5&&re(Be)},!0)}r(ve,ie)};C(Z,ve=>{e(o).column===3?ve(W):ve(pe,!1)},!0)}r(u,$)};C(xe,u=>{e(o).column===1?u(k):u(v,!1)})}r(X,ue)};C(F,X=>{e(o).row===3&&X(O)})}r(M,K)},J=M=>{var K=ke(),F=H(K);{var O=ue=>{var xe=Ir();const k=ne(()=>e(ee).find(ie=>ie.to===e(o)));var v=H(xe);{var u=ie=>{var ae=Pr(),Be=a(ae);Xt(Be,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),f(()=>Le(ae,`card_animation_receiver ${e(o).cellType??""} svelte-1boxe40`)),oe(1,ae,()=>de,()=>({key:e(k).entity.seq})),r(ie,ae)};C(v,ie=>{e(k)&&e(k).index==="Top"&&ie(u)})}var $=s(v,2);_e($,1,()=>e(o).visibleEntities,fe,(ie,ae)=>{var Be=ke(),re=H(Be);{var Re=Ne=>{var Ke=Hr(),ze=a(Ke);const Ge=ne(()=>se(e(ae))),it=ne(()=>e(B).filter(qe=>qe.action.entity===e(ae)));Xt(ze,{get entity(){return e(ae)},get state(){return e(Ge)},get dummyActionInfos(){return e(it)},cardActionResolve:void 0,get selectedList(){return p()},set selectedList(qe){p(qe)},$$legacy:!0}),oe(2,Ke,()=>De,()=>({key:e(ae).seq})),r(Ne,Ke)};C(re,Ne=>{e(ee).every(Ke=>Ke.entity.seq!==e(ae).seq)&&Ne(Re)})}r(ie,Be)});var Z=s($,2);{var W=ie=>{var ae=Nr(),Be=a(ae);Xt(Be,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),f(()=>Le(ae,`card_animation_receiver ${e(o).cellType??""} svelte-1boxe40`)),oe(1,ae,()=>de,()=>({key:e(k).entity.seq})),r(ie,ae)};C(Z,ie=>{e(k)&&e(k).index!=="Top"&&ie(W)})}var pe=s(Z,2);{var ve=ie=>{var ae=Fr();r(ie,ae)};C(pe,ie=>{e(o).owner.seat==="Below"&&ie(ve)})}r(ue,xe)},X=ue=>{var xe=Qr();const k=ne(()=>e(ee).find(ae=>ae.to===e(o)));var v=H(xe);{var u=ae=>{var Be=Or(),re=a(Be);Xt(re,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),oe(1,Be,()=>de,()=>({key:e(k).entity.seq})),r(ae,Be)};C(v,ae=>{e(k)&&e(k).index!=="Top"&&ae(u)})}var $=s(v,2);{var Z=ae=>{var Be=Vr(),re=H(Be);_e(re,1,()=>e(o).visibleEntities.map((Ke,ze)=>({index:ze,entity:Ke})).toReversed(),fe,(Ke,ze)=>{var Ge=ke(),it=H(Ge);{var qe=we=>{var Ee=Kr();const Ve=ne(()=>!e(o).isStackCell&&e(ze).index===0?se(...e(o).visibleEntities):void 0);var Xe=H(Ee);{var Ze=ft=>{var Dt=Rr();r(ft,Dt)};C(Xe,ft=>{e(U).includes(e(ze).entity)&&ft(Ze)})}var et=s(Xe,2),st=a(et);const pt=ne(()=>e(ze).index===0?e(B).filter(ft=>e(o).visibleEntities.includes(ft.action.entity)):void 0);Xt(st,{get entity(){return e(ze).entity},get state(){return e(Ve)},get dummyActionInfos(){return e(pt)},cardActionResolve:void 0,get selectedList(){return p()},set selectedList(ft){p(ft)},$$legacy:!0}),f(()=>Le(et,`duel_card_wrapper ${(e(ze).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1boxe40`)),oe(2,et,()=>De,()=>({key:e(ze).entity.seq})),r(we,Ee)};C(it,we=>{e(ee).every(Ee=>Ee.entity.seq!==e(ze).entity.seq)&&we(qe)})}r(Ke,Ge)});var Re=s(re,2);{var Ne=Ke=>{var ze=zr(),Ge=a(ze),it=s(Ge);_e(it,1,()=>Gt(e(o).visibleEntities[0].status.maxCounterQty),fe,(qe,we)=>{var Ee=Wr(),Ve=H(Ee),Xe=s(Ve);{var Ze=et=>{var st=lt();f(()=>b(st,`/${e(o).visibleEntities[0].status.maxCounterQty[e(we)]??""}`)),r(et,st)};C(Xe,et=>{(e(o).visibleEntities[0].status.maxCounterQty[e(we)]??9999)<100&&et(Ze)})}f((et,st)=>b(Ve,`【
              ${et??""}${st??""} `),[()=>sr(e(we)),()=>e(o).visibleEntities[0].counterHolder.getQty(e(we))],ne),r(qe,Ee)}),f(()=>b(Ge,`【${e(o).visibleEntities[0].battlePositionName??""}】 `)),r(Ke,ze)};C(Re,Ke=>{e(o).visibleEntities[0].battlePosition&&Ke(Ne)})}r(ae,Be)};C($,ae=>{e(o).visibleEntities.length>0&&ae(Z)})}var W=s($,2);{var pe=ae=>{var Be=Xr(),re=a(Be);f(()=>b(re,e(o).visibleEntities.length)),r(ae,Be)};C(W,ae=>{e(o).isStackCell&&ae(pe)})}var ve=s(W,2);{var ie=ae=>{var Be=Gr(),re=a(Be);Xt(re,{get entity(){return e(k).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),oe(1,Be,()=>de,()=>({key:e(k).entity.seq})),r(ae,Be)};C(ve,ae=>{e(k)&&e(k).index==="Top"&&ae(ie)})}r(ue,xe)};C(F,ue=>{e(o).cellType==="Hand"?ue(O):ue(X,!1)},!0)}r(M,K)};C(D,M=>{e(o).isDisabledCell?M(Y):M(J,!1)})}f(M=>{Le(te,`${`duel_field_cell duel_field_cell_${e(o).cellType} ${e(o).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1boxe40`),ot(te,"colspan",e(o).cellType==="Hand"?7:1),Le(R,`${M??""} svelte-1boxe40`)},[()=>`duel_field_cell_inner_box ${e(o).cellType} ${e(A)?"can_accept_drop":""} ${N()?"can_action":""} ${e(h)?"is_selected":e(g)?"is_selectable":""} `],ne),z("dragover",R,Q),z("drop",R,me),r(_,te),ut()}Ka(["click"]);const es=(_,i,t=void 0,d="!!!circular reference!!!")=>{let m=[];return JSON.stringify(_,(p,c)=>{if(typeof c=="object"){if(m.indexOf(c)>-1)return d;m.push(c)}let o=c;if(i&&(o=i(p,c)),typeof o=="function")return o.toString();if(o!==c&&typeof o=="object"){if(m.indexOf(o)>-1)return d;m.push(o)}return o},t)};var ts=l('<div class="title svelte-14z6bdh"> </div>'),as=l('<div class="title svelte-14z6bdh"> </div>'),rs=l('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),ss=l('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),is=l("<div><!> <!></div>"),ns=l('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),ls=l("<div><!> <!></div>"),os=l("<div><!> <!></div>"),ds=l('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function vs(_,i){ct(i,!1);let t=le(void 0),d=je(i,"log",8),m,p=le([]);const c=()=>{const S=((m==null?void 0:m.seq)??-1)+1;d().records.slice(S).forEach(T=>{if(!m){x(p,[[[[T]]]]),m=T;return}if(!e(p)[T.clock.turn]){he(p,e(p)[T.clock.turn]=[[[T]]]),m=T;return}if(!e(p)[T.clock.turn][T.clock.phaseSeq]){he(p,e(p)[T.clock.turn][T.clock.phaseSeq]=[[T]]),m=T;return}if(m.clock.chainSeq===T.clock.chainSeq&&m.clock.chainBlockSeq===T.clock.chainBlockSeq&&m.duelist===T.duelist){e(p)[T.clock.turn][T.clock.phaseSeq].slice(-1)[0].push(T),m=T;return}e(p)[T.clock.turn][T.clock.phaseSeq].push([T]),m=T}),x(p,e(p)),ir().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};d().onUpdate.append(c),d().duel.view.onDuelUpdate.append(c),c(),_t();var o=ke(),q=H(o);{var E=S=>{var T=ds(),B=s(a(T),2);_e(B,5,()=>e(p),fe,(n,V)=>{var U=os(),h=a(U);{var g=G=>{var ye=ts(),A=a(ye);f(()=>b(A,`ターン：${e(V)[0][0][0].clock.turn??""}`)),r(G,ye)};C(h,G=>{e(V)[0][0][0].clock.turn>0&&G(g)})}var P=s(h,2);_e(P,1,()=>e(V),fe,(G,ye)=>{var A=ls(),j=a(A);{var ce=De=>{var de=as(),ee=a(de);f(()=>b(ee,e(ye)[0][0].clock.period.name)),r(De,de)};C(j,De=>{e(ye)[0][0].clock.turn>0&&De(ce)})}var Te=s(j,2);_e(Te,1,()=>e(ye),fe,(De,de)=>{var ee=ns();const Ae=ne(()=>{var te;return((te=e(de).find(R=>R.chainNumber!==void 0))==null?void 0:te.chainNumber)??0});var Ce=a(ee),N=a(Ce),L=a(N),Q=s(N,2);{var me=te=>{var R=rs(),D=a(R);f(()=>b(D,`チェーン：${e(Ae)??""}`)),r(te,R)};C(Q,te=>{e(Ae)&&te(me)})}var se=s(Ce,2);_e(se,1,()=>e(de),fe,(te,R)=>{var D=is(),Y=a(D);{var J=O=>{var X=lt();f(()=>b(X,e(R).text)),r(O,X)},M=O=>{var X=ke(),ue=H(X);{var xe=v=>{var u=lt();f(($,Z,W)=>b(u,`移動：${$??""} ${Z??""} ⇒ ${W??""}`),[()=>{var $;return($=e(R).mainEntity)==null?void 0:$.toString()},()=>{var $;return($=e(R).from)==null?void 0:$.toString()},()=>{var $;return($=e(R).to)==null?void 0:$.toString()}],ne),r(v,u)},k=v=>{var u=ke(),$=H(u);{var Z=pe=>{var ve=lt();f((ie,ae)=>b(ve,`生成：${ie??""} void ⇒ ${ae??""}`),[()=>{var ie;return(ie=e(R).mainEntity)==null?void 0:ie.toString()},()=>{var ie;return(ie=e(R).to)==null?void 0:ie.toString()}],ne),r(pe,ve)},W=pe=>{var ve=ke(),ie=H(ve);{var ae=re=>{var Re=lt();f((Ne,Ke)=>b(Re,`消滅：${Ne??""} ${Ke??""} ⇒ void`),[()=>{var Ne;return(Ne=e(R).mainEntity)==null?void 0:Ne.toString()},()=>{var Ne;return(Ne=e(R).from)==null?void 0:Ne.toString()}],ne),r(re,Re)},Be=re=>{var Re=lt();f(()=>b(Re,e(R).text)),r(re,Re)};C(ie,re=>{e(R).type==="EntityDisappear"?re(ae):re(Be,!1)},!0)}r(pe,ve)};C($,pe=>{e(R).type==="EntityAppear"?pe(Z):pe(W,!1)},!0)}r(v,u)};C(ue,v=>{e(R).type==="EntityMove"?v(xe):v(k,!1)},!0)}r(O,X)};C(Y,O=>{e(R).type==="ChainBlockHeader"?O(J):O(M,!1)})}var K=s(Y,2);{var F=O=>{var X=ss(),ue=a(X);f(xe=>ot(ue,"href",xe),[()=>window.URL.createObjectURL(new Blob([es(e(R).error,(xe,k)=>["pool","bundles","duel"].includes(xe)||typeof k=="function"?void 0:k,4)],{type:"text/plain"}))],ne),r(O,X)};C(K,O=>{e(R).error&&O(F)})}f(O=>Le(D,`duel_log_record duel_log_record_${O??""} svelte-14z6bdh`),[()=>e(R).type.toSnakeCase()],ne),r(te,D)}),f(()=>{var te,R,D;Le(ee,`duel_log_block_duelist duel_log_block_duelist_${((te=e(de)[0].duelist)==null?void 0:te.seat)??"system"} svelte-14z6bdh`),Le(N,`duelist ${((R=e(de)[0].duelist)==null?void 0:R.seat)??""} svelte-14z6bdh`),b(L,((D=e(de)[0].duelist)==null?void 0:D.profile.name)||"SYSTEM")}),r(De,ee)}),f(()=>Le(A,`duel_log_block_phase duel_log_block_phase_${e(ye)[0][0].clock.period.key??""} svelte-14z6bdh`)),r(G,A)}),f(()=>Le(U,`duel_log_block_turn duel_log_block_turn_${e(V)[0][0][0].clock.turn??""} svelte-14z6bdh`)),r(n,U)}),Wa(B,n=>x(t,n),()=>e(t)),r(S,T)};C(q,S=>{(d().duel.view.infoBoardState==="Log"||d().duel.view.infoBoardState==="Default")&&S(E)})}r(_,o),ut()}var cs=l("<div><div> </div> <div> </div></div>");function Oa(_,i){ct(i,!1);let t=je(i,"duelist",12),d=le(0),m=le();const p=async()=>{const B=t().lp-e(d);if(!e(m)||Math.abs(B)<10){x(d,t().lp),e(m)&&(e(m)(),x(m,void 0));return}x(d,e(d)+Math.floor(Math.random()*B)),await ea(100),p()},c=()=>{t(t()),!e(m)&&t().lp!==e(d)&&new Promise(B=>{x(m,B),Math.abs(t().lp-e(d)),p()})};t().duel.log.onUpdate.append(c),p(),_t();var o=cs(),q=a(o),E=a(q),S=s(q,2),T=a(S);f(B=>{Le(o,`duelist duelist_${B??""} svelte-1sy3trd`),Le(q,`duelist_name duelist_${B??""}_name svelte-1sy3trd`),b(E,t().profile.name),Le(S,`duelist_lp ${(e(m)?"vibration":"")??""} svelte-1sy3trd`),b(T,e(d))},[()=>t().seat.toLowerCase()],ne),r(_,o),ut()}const _s=(_,i,t)=>(i(i()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),us=(_,i,t)=>(i(i()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var fs=l('<div class="svelte-1uevs9j"> </div>'),ms=l('<div class="svelte-1uevs9j"> </div>'),ps=l('<div class="link_arrow_emoji svelte-1uevs9j"> </div>'),gs=l('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),ys=l('<div></div> <div class="svelte-1uevs9j"> </div>',1),hs=l("<div> </div>"),bs=l('<span class="svelte-1uevs9j">/</span> <div class="monster_defense svelte-1uevs9j"> </div>',1),ks=l("<div> </div>"),ws=l('<div class="duel_card_info_row svelte-1uevs9j"><!> <!> <div style="flex-grow: 1;" class="svelte-1uevs9j"></div> <div class="monster_attack svelte-1uevs9j"> </div> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),Cs=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),xs=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),Ds=l("<!> <!>",1),$s=l('<pre class="description svelte-1uevs9j"> </pre>'),Ss=l('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),Ms=l('<pre class="description svelte-1uevs9j"> </pre>'),Ts=l('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),Es=l('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),js=l('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),As=l("[ <!> ],",1),Bs=l('<div class="svelte-1uevs9j"> <!></div>'),Ls=l('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),Ys=l('<div class="svelte-1uevs9j"> </div>'),qs=l('<div class="svelte-1uevs9j"> </div>'),Us=l('<div class="svelte-1uevs9j"> </div>'),Ps=l('<div class="svelte-1uevs9j"> </div>'),Hs=l('<div class="svelte-1uevs9j"> </div>'),Ns=l('<div class="svelte-1uevs9j"> </div>'),Fs=l('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Is=l('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Os=l('<div class="svelte-1uevs9j">※テスト用カードです</div>'),Rs=l('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),Ks=l('<a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a>'),Ws=l('<div class="duel_card_info_links svelte-1uevs9j"><!> <!> <a target="_blank" rel="noopener noreferrer" title="google" class="svelte-1uevs9j">⇒google検索</a></div>'),zs=l("<!> <!>",1),Vs=l('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><!> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Xs(_,i){ct(i,!1);let t=je(i,"entity",8),d=je(i,"mode",12,"Normal"),m=le(new Promise(()=>{}));const p=()=>{var S,T;let E=t()&&t().entityType==="Card"?t().origin.cardId:(T=(S=t())==null?void 0:S.parent)==null?void 0:T.origin.cardId;return E??!1?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${E}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:""};da(()=>(Ot(t()),ha),()=>{x(m,na.then(async E=>{if(t().origin.description||t().origin.pendulumDescription||t().origin.wikiEncodedName)return t().origin;const S=E.getCardInfo(t().origin.name);if(S)return S.cardId!==void 0&&!S.description&&!S.pendulumDescription&&await ha([S.cardId]),S}))}),Ca(),_t();var c=ke(),o=H(c);{var q=E=>{var S=Vs();S.__click=[_s,d,t],S.__contextmenu=[us,d,t];var T=a(S),B=a(T),n=a(B),V=a(n),U=s(B,2),h=a(U);{var g=N=>{var L=fs(),Q=a(L);f(me=>b(Q,me),[()=>"★".repeat(t().lvl)],ne),r(N,L)},P=N=>{var L=ke(),Q=H(L);{var me=te=>{var R=ms(),D=a(R);f(Y=>b(D,Y),[()=>"☆".repeat(t().rank)],ne),r(te,R)},se=te=>{var R=ke(),D=H(R);{var Y=J=>{var M=ps(),K=a(M);f(F=>b(K,F),[()=>t().origin.linkArrowKeys.map(F=>za[F].emoji).join("")],ne),r(J,M)};C(D,J=>{t().origin.linkArrowKeys&&J(Y)},!0)}r(te,R)};C(Q,te=>{t().rank&&t().rank>0?te(me):te(se,!1)},!0)}r(N,L)};C(h,N=>{t().lvl&&t().lvl>0?N(g):N(P,!1)})}var G=s(h,2),ye=a(G),A=s(U,2);{var j=N=>{var L=Ds(),Q=H(L);{var me=D=>{var Y=gs(),J=a(Y),M=a(J),K=s(J,2),F=a(K);f(()=>{b(M,`◀ ${t().psL??""}`),b(F,`${t().psR??""} ▶`)}),r(D,Y)};C(Q,D=>{var Y;(Y=t().origin.monsterCategories)!=null&&Y.includes("Pendulum")&&D(me)})}var se=s(Q,2);{var te=D=>{var Y=ws(),J=H(Y),M=a(J);_e(M,1,()=>t().attr,fe,(k,v)=>{var u=ys(),$=H(u),Z=s($,2),W=a(Z);f(()=>{Le($,`monster_attr ${e(v)??""} svelte-1uevs9j`),b(W,`${xa[e(v)]??""}属性`)}),r(k,u)});var K=s(M,2);_e(K,1,()=>t().types,fe,(k,v)=>{var u=hs(),$=a(u);f(()=>{Le(u,`monster_cat ${e(v)??""} svelte-1uevs9j`),b($,`${ma[e(v)]??""}${Da[e(v)]??""}族`)}),r(k,u)});var F=s(K,4),O=a(F),X=s(F,2);{var ue=k=>{var v=bs(),u=s(H(v),2),$=a(u);f(()=>b($,t().def??"?")),r(k,v)};C(X,k=>{var v;(v=t().status.monsterCategories)!=null&&v.includes("Link")||k(ue)})}var xe=s(J,2);_e(xe,5,()=>t().status.monsterCategories??[],fe,(k,v)=>{var u=ks(),$=a(u);f(()=>{Le(u,`monster_cat ${e(v)??""} svelte-1uevs9j`),b($,`${la[e(v)]??""}${va[e(v)]??""}`)}),r(k,u)}),f(()=>b(O,t().atk??"?")),r(D,Y)},R=D=>{var Y=ke(),J=H(Y);{var M=F=>{var O=Cs(),X=s(a(O),2),ue=a(X);f(()=>b(ue,`${pa[t().status.spellCategory]??""}魔法`)),r(F,O)},K=F=>{var O=ke(),X=H(O);{var ue=xe=>{var k=xs(),v=s(a(k),2),u=a(v);f(()=>b(u,`${ga[t().status.trapCategory]??""}罠`)),r(xe,k)};C(X,xe=>{t().kind==="Trap"&&t().status.trapCategory&&xe(ue)},!0)}r(F,O)};C(J,F=>{t().kind==="Spell"&&t().status.spellCategory?F(M):F(K,!1)},!0)}r(D,Y)};C(se,D=>{t().kind==="Monster"?D(te):D(R,!1)})}r(N,L)};C(A,N=>{d()!=="Debug"&&N(j)})}var ce=s(T,2),Te=a(ce);{var De=N=>{var L=Ts(),Q=H(L);{var me=R=>{var D=Ss(),Y=a(D);mt(Y,()=>e(m),J=>{var M=lt('"読み込み中"');r(J,M)},(J,M)=>{var K=$s(),F=a(K);f(()=>{var O;return b(F,(O=e(M))==null?void 0:O.pendulumDescription)}),r(J,K)}),r(R,D)};C(Q,R=>{var D;(D=t().status.monsterCategories)!=null&&D.includes("Pendulum")&&R(me)})}var se=s(Q,2),te=a(se);mt(te,()=>e(m),R=>{var D=lt('"読み込み中"');r(R,D)},(R,D)=>{var Y=Ms(),J=a(Y);f(()=>{var M;return b(J,(M=e(D))==null?void 0:M.description)}),r(R,Y)}),r(N,L)},de=N=>{var L=ke(),Q=H(L);{var me=te=>{var R=ke(),D=H(R);{var Y=J=>{var M=js(),K=s(a(M),2);_e(K,5,()=>t().actions,fe,(F,O)=>{var X=ke();const ue=ne(()=>e(O).actionCountUpperBound),xe=ne(()=>e(O).actionCount);var k=H(X);{var v=u=>{var $=Es(),Z=a($),W=a(Z),pe=s(Z,2),ve=a(pe),ie=s(pe,4),ae=a(ie);f(()=>{b(W,e(O).title),b(ve,e(xe)),b(ae,e(ue))}),r(u,$)};C(k,u=>{e(ue)!==void 0&&e(xe)!==void 0&&u(v)})}r(F,X)}),r(J,M)};C(D,J=>{t().actions.some(M=>M.actionCountUpperBoundKey)&&J(Y)})}r(te,R)},se=te=>{var R=Fs(),D=a(R),Y=a(D);_e(Y,0,()=>["info","status"],fe,(qe,we)=>{var Ee=Ls(),Ve=H(Ee),Xe=a(Ve),Ze=s(Ve,2);_e(Ze,1,()=>Object.entries(t()[we]),fe,(st,pt)=>{let ft=()=>e(pt)[0],Dt=()=>e(pt)[1];var Rt=Bs(),Pt=a(Rt),Kt=s(Pt);{var sa=$t=>{var Et=As(),y=s(H(Et));_e(y,1,Dt,fe,(w,I)=>{var ge=lt();f(Ye=>b(ge,`${Ye??""},`),[()=>e(I).toString()],ne),r(w,ge)}),r($t,Et)},Wt=$t=>{var Et=lt();f(y=>b(Et,`${y??""},`),[()=>{var y;return(y=Dt())==null?void 0:y.toString()}],ne),r($t,Et)};C(Kt,$t=>{Array.isArray(Dt())?$t(sa):$t(Wt,!1)})}f(()=>b(Pt,`"${ft()??""}" : `)),r(st,Rt)});var et=s(Ze,2);et.textContent="},",f(()=>b(Xe,`"${we??""}" :{`)),r(qe,Ee)});var J=s(Y,2);J.textContent='"actions" :[';var M=s(J,2);_e(M,1,()=>t().actions,fe,(qe,we)=>{var Ee=Ys(),Ve=a(Ee);f(()=>b(Ve,`"${e(we).playType??""} ${e(we).title??""}",`)),r(qe,Ee)});var K=s(M,2);K.textContent="],";var F=s(K,2);F.textContent='"substituteEffects" :[';var O=s(F,2);_e(O,1,()=>t().substituteEffects,fe,(qe,we)=>{var Ee=qs(),Ve=a(Ee);f(()=>b(Ve,`"${e(we).title??""}",`)),r(qe,Ee)});var X=s(O,2);X.textContent="],";var ue=s(X,2);ue.textContent='"continuousEffects" :[';var xe=s(ue,2);_e(xe,1,()=>t().continuousEffects,fe,(qe,we)=>{var Ee=Us(),Ve=a(Ee);f(()=>b(Ve,`"${e(we).isStarted??""}",`)),r(qe,Ee)});var k=s(xe,2);k.textContent="],";var v=s(k,2);v.textContent='"procFilters" :[';var u=s(v,2);_e(u,1,()=>t().procFilterBundle.operators,fe,(qe,we)=>{var Ee=Ps(),Ve=a(Ee);f(Xe=>b(Ve,`"${Xe??""} ${e(we).title??""} ${e(we).isEffective??""} ",`),[()=>e(we).isSpawnedBy.toString()],ne),r(qe,Ee)});var $=s(u,2);$.textContent="],";var Z=s($,2);Z.textContent='"numericStateOperators" :[';var W=s(Z,2);_e(W,1,()=>t().numericOprsBundle.operators,fe,(qe,we)=>{var Ee=Hs(),Ve=a(Ee);f(Xe=>b(Ve,`"${Xe??""} ${e(we).title??""} ${e(we).isEffective??""} ${e(we).isContinuous??""} ${e(we).targetState??""} ${e(we).targetStateGen??""} ",`),[()=>e(we).isSpawnedBy.toString()],ne),r(qe,Ee)});var pe=s(W,2);pe.textContent="],";var ve=s(pe,2);ve.textContent='"stateOperators" :[';var ie=s(ve,2);_e(ie,1,()=>t().statusOperatorBundle.operators,fe,(qe,we)=>{var Ee=Ns(),Ve=a(Ee);f(Xe=>b(Ve,`"${Xe??""} ${e(we).title??""} ${e(we).isEffective??""} ",`),[()=>e(we).isSpawnedBy.toString()],ne),r(qe,Ee)});var ae=s(ie,2);ae.textContent="],";var Be=s(ae,2);Be.textContent='"lastMoveLogRecord" :{';var re=s(Be,2),Re=a(re),Ne=s(re,2),Ke=a(Ne),ze=s(Ne,2),Ge=a(ze),it=s(ze,2);it.textContent="},",f((qe,we)=>{b(Re,`"movedBy":"${qe??""}",`),b(Ke,`"movedAs":"${we??""}",`),b(Ge,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var qe;return(qe=t().moveLog.latestRecord.movedBy)==null?void 0:qe.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],ne),r(te,R)};C(Q,te=>{d()==="Detail"?te(me):te(se,!1)},!0)}r(N,L)};C(Te,N=>{d()==="Normal"?N(De):N(de,!1)})}var ee=s(ce,2),Ae=a(ee);{var Ce=N=>{var L=zs(),Q=H(L);{var me=D=>{var Y=Is();r(D,Y)};C(Q,D=>{t().origin.isOldVersion&&D(me)})}var se=s(Q,2);{var te=D=>{var Y=Os();r(D,Y)},R=D=>{var Y=Ws(),J=a(Y);{var M=O=>{var X=Rs();const ue=ne(()=>t().entityType==="Card"?t():t().parent);var xe=a(X);f(k=>{var v;ot(X,"href",k),b(xe,`⇒${((v=e(ue))!=null&&v.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[p],ne),r(O,X)};C(J,O=>{var X;t()&&(t().entityType==="Card"||((X=t().parent)==null?void 0:X.entityType)==="Card")&&O(M)})}var K=s(J,2);mt(K,()=>e(m),null,(O,X)=>{var ue=ke(),xe=H(ue);{var k=v=>{var u=Ks();f(()=>ot(u,"href",`https://yugioh-wiki.net/index.php?${e(X).wikiEncodedName}`)),r(v,u)};C(xe,v=>{e(X)&&e(X).wikiEncodedName&&v(k)})}r(O,ue)});var F=s(K,2);f(()=>ot(F,"href",`https://www.google.com/search?q=遊戯王 ${t().origin.name}`)),r(D,Y)};C(se,D=>{t().origin.isForTest?D(te):D(R,!1)})}r(N,L)};C(Ae,N=>{t()&&N(Ce)})}f((N,L)=>{Le(S,`duel_card duel_card_info ${t().origin.kind??""} ${N??""} svelte-1uevs9j`),b(V,t().nm),b(ye,L)},[()=>{var N;return(N=t().origin.monsterCategories)==null?void 0:N.join(" ")},()=>"★".repeat(t().lvl||0)],ne),r(E,S)};C(o,E=>{t()&&E(q)})}r(_,c),ut()}Ka(["click","contextmenu"]);var Gs=l('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),Qs=l('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),Js=l('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Zs(_,i){ct(i,!1);let t=je(i,"cell",12);const d=()=>{t(t())},m=q=>t().cardEntities.filter(E=>E.face===q);t().field.duel.view.onDuelUpdate.append(d),_t();var p=ke(),c=H(p);{var o=q=>{var E=Js(),S=a(E),T=a(S),B=a(T),n=s(T,2),V=a(n),U=s(S,2);_e(U,4,()=>["FaceUp","FaceDown"],fe,(h,g)=>{var P=ke(),G=H(P);{var ye=A=>{var j=Qs(),ce=a(j),Te=a(ce),De=s(ce,2);_e(De,1,()=>m(g).toSorted(nr),fe,(de,ee)=>{var Ae=Gs(),Ce=a(Ae);const N=ne(()=>t().owner===t().field.duel.duelists.Below);Xt(Ce,{get entity(){return e(ee)},get isVisibleForcibly(){return e(N)},isWideMode:!0,cardActionResolve:void 0}),r(de,Ae)}),f(()=>b(Te,g==="FaceUp"?"表向き":"裏向き")),r(A,j)};C(G,A=>{m(g).length&&A(ye)})}r(h,P)}),f(()=>{var h;b(B,(h=t().owner)==null?void 0:h.profile.name),b(V,t().cellType)}),r(q,E)};C(c,q=>{t().field.duel.view.infoBoardState==="CellInfo"&&q(o)})}r(_,p),ut()}var ei=l('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),ti=l('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function ai(_,i){ct(i,!1);let t=je(i,"viewController",8),d=je(i,"userProfile",12);_t();var m=ke(),p=H(m);{var c=o=>{var q=ti(),E=s(a(q),2),S=s(a(E),2);_e(S,1,()=>dr,fe,(T,B)=>{var n=ei(),V=a(n),U=a(V),h=s(V,2),g=a(h);f(()=>b(g,lr[e(B)])),or(U,()=>d().chainConfig[e(B)],P=>d(d().chainConfig[e(B)]=P,!0)),z("change",U,()=>d().save()),r(T,n)}),r(o,q)};C(p,o=>{t().infoBoardState==="Config"&&o(c)})}r(_,m),ut()}function ri(_,{from:i,to:t},d={}){var{delay:m=0,duration:p=j=>Math.sqrt(j)*120,easing:c=ba}=d,o=getComputedStyle(_),q=o.transform==="none"?"":o.transform,[E,S]=o.transformOrigin.split(" ").map(parseFloat);E/=_.clientWidth,S/=_.clientHeight;var T=si(_),B=_.clientWidth/t.width/T,n=_.clientHeight/t.height/T,V=i.left+i.width*E,U=i.top+i.height*S,h=t.left+t.width*E,g=t.top+t.height*S,P=(V-h)*B,G=(U-g)*n,ye=i.width/t.width,A=i.height/t.height;return{delay:m,duration:typeof p=="function"?p(Math.sqrt(P*P+G*G)):p,easing:c,css:(j,ce)=>{var Te=ce*P,De=ce*G,de=j+ce*ye,ee=j+ce*A;return`transform: ${q} translate(${Te}px, ${De}px) scale(${de}, ${ee});`}}}function si(_){if("currentCSSZoom"in _)return _.currentCSSZoom;for(var i=_,t=1;i!==null;)t*=+getComputedStyle(i).zoom,i=i.parentElement;return t}var ii=l('<div class="chain_number svelte-lqu21u"> </div>'),ni=l('<div class="duel_card_row svelte-lqu21u"> </div>'),li=l('<div class="appendix svelte-lqu21u"> </div>'),oi=l('<div class="appendix_wrapper svelte-lqu21u"></div>'),di=l('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),vi=l("<div></div>");function ci(_,i){ct(i,!1);let t=je(i,"duel",8),d=je(i,"position",8,"left");const m=-100,p=()=>d()==="left"?-100:100;let c=le([]),o=Promise.resolve(),q=Promise.resolve();const E=1e3,S=500,T=400,B=V=>{const U={...V};U.isKnown=V.chainBlockInfo.action.entity.controller.duelistType==="Player"||V.chainBlockInfo.action.entity.face==="FaceUp",U.chainBlockInfo.onStateChange.append(h=>{if(h==="done"||h==="failed"||h==="negated")return o=o.then(async()=>{const g=new Date().getTime()-U.chainBlockInfo.wasSpawnedAt.getTime();g<E&&await ea(E-g),x(c,e(c).filter(P=>P.seq!==U.seq)),await ea(S+T)}).then(),"RemoveMe";x(c,e(c))}),q=q.then(async()=>{x(c,[U,...e(c)].sort((h,g)=>vr.isSameChain(h.clock,g.clock)&&h.chainBlockInfo.action.isWithChainBlock&&g.chainBlockInfo.action.isWithChainBlock?g.clock.totalProcSeq-h.clock.totalProcSeq:h.clock.totalProcSeq-g.clock.totalProcSeq)),await ea(300)}),o=o.then(()=>ea(1e3))};t().chainBlockLog.onInsert.append(B),_t();var n=vi();_e(n,13,()=>e(c),V=>V.seq,(V,U)=>{var h=di();const g=ne(()=>{const{activator:L,action:Q,appendix:me}=e(U).chainBlockInfo;return{activator:L,action:Q,appendix:me}});var P=a(h),G=a(P);{var ye=L=>{var Q=ii(),me=a(Q);f(()=>b(me,`チェーン：${e(U).chainBlockInfo.chainNumber??""}`)),r(L,Q)};C(G,L=>{e(U).chainBlockInfo.chainNumber&&L(ye)})}var A=s(G,2),j=a(A),ce=s(A,2),Te=a(ce);{var De=L=>{var Q=ni(),me=a(Q);f(()=>b(me,e(U).isKnown?e(g).action.entity.nm:"？？？")),r(L,Q)};C(Te,L=>{(e(g).action.entity.entityType==="Card"||e(g).action.entity.entityType==="Token")&&L(De)})}var de=s(Te,2),ee=a(de),Ae=a(ee),Ce=s(ee,2);{var N=L=>{var Q=oi();_e(Q,5,()=>e(g).appendix,fe,(me,se)=>{var te=li(),R=a(te);f(()=>b(R,e(se))),r(me,te)}),r(L,Q)};C(Ce,L=>{e(g).appendix&&L(N)})}f((L,Q,me)=>{Le(h,`cut_in_row ${(!e(U).chainBlockInfo.chainNumber||e(U).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Le(P,`cut_in_item cut_in_item_${L??""} cut_in_item_${e(U).chainBlockInfo.state??""} svelte-lqu21u`),Le(A,`duelist_name duelist_${L??""}_name svelte-lqu21u`),b(j,e(g).activator.profile.name),Le(ce,`duel_card duel_card_${L??""} ${Q??""} ${(e(U).isKnown?e(g).action.entity.origin.kind:"")??""} ${e(g).action.entity.entityType??""}  svelte-lqu21u`),b(Ae,me)},[()=>e(g).activator.seat.toLowerCase(),()=>e(U).isKnown?(e(g).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(g).action.toString()],ne),oe(3,P,()=>jr,()=>new Date().getTime()-e(U).chainBlockInfo.wasSpawnedAt.getTime()<E?{x:p(),duration:T}:{y:m,duration:T}),cr(h,()=>ri,()=>({duration:S})),r(V,h)}),f(()=>Le(n,`cut_in_container cut_in_container_${d()??""} svelte-lqu21u`)),r(_,n),ut()}const _i=Ar({duration:400});var ui=l('<div class="duel_desk_left v_flex svelte-1w535im"><!> <!> <!></div>'),fi=l('<button class="duel_field_header_message svelte-1w535im"> </button> <div class="duel_field_header_buttons svelte-1w535im"><button class="svelte-1w535im">サレンダー</button></div>',1),mi=l("<tr></tr>"),pi=l('<table class="duel_field svelte-1w535im"><tbody class="svelte-1w535im"></tbody></table>'),gi=l('<button class="svelte-1w535im">OK</button>'),yi=l('<button class="svelte-1w535im">cancel</button>'),hi=l("<!> <!>",1),bi=l('<button class="svelte-1w535im"> </button>'),ki=l('<div style="text-align: left;"><!> <!> <!></div>'),wi=l('<div><!> <div class=" duel_desk_center v_flex svelte-1w535im"><div class="duel_field_header svelte-1w535im"><!></div> <div class="duel_field_body svelte-1w535im"><!></div> <div class="duel_field_footer svelte-1w535im"><!></div></div> <!></div> <div style="position:fixed;bottom:0"> </div> <!> <div><!></div>',1);function Ci(_,i){ct(i,!1);let t=je(i,"duel",12),d=je(i,"userProfile",8),m=le(0),p=le(0),c=le([]),o=le([]),q=()=>{},E=le([]),S=le(),T=le(),B=le(()=>!1),n=le(!1);const V=v=>{q=v.resolve,x(E,v.dummyActionInfos.filter(u=>u.action.entity.entityType==="Duelist").filter(u=>u.action.entity.controller.seat==="Below")),x(S,void 0),x(T,void 0),x(o,[]),x(c,[]),x(n,!1),v.entitiesChoices&&(x(S,v.entitiesChoices),x(B,()=>{var u;return((u=v.entitiesChoices)==null?void 0:u.validator(e(c)))??!1}),x(n,v.entitiesChoices.cancelable),e(S).selectables.every(u=>u.cell.isPlayFieldCell&&u.getIndexInCell()===0||u.cell.cellType==="Hand"&&u.controller.duelistType==="Player"||u.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:v.entitiesChoices,chainBlockInfos:v.chainBlockInfos,cancelable:v.entitiesChoices.cancelable}).then(u=>{q({selectedEntities:u})})),v.cellsChoices&&(x(T,v.cellsChoices),x(B,()=>{var u;return((u=v.cellsChoices)==null?void 0:u.validator(e(o)))??!1}),x(n,v.cellsChoices.cancelable))};t().view.onWaitStart.append(V);const U=()=>{q=()=>{},x(T,void 0),x(S,void 0),x(o,[]),x(c,[]),x(B,()=>!1),x(n,!1)};t().view.onWaitEnd.append(U);let h=le(void 0),g=le("Normal");const P=({card:v,mode:u})=>{x(h,v),x(g,u??(e(h)===v||e(g)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(P);const G=()=>{t(t())};t().view.onDuelUpdate.append(G),t().log.onUpdate.append(G);const ye=()=>{e(S)&&e(S).validator(e(c))&&q({selectedEntities:e(c)}),e(T)&&e(T).validator(e(o))&&q({selectedCells:e(o)})},A=()=>{q({})},j=v=>{q({actionInfo:v})},ce=()=>{q({surrender:!0})};t().main();const Te=()=>e(m)<=1400?"compact":"wide";_t();var De=wi(),de=H(De),ee=a(de);{var Ae=v=>{var u=ui(),$=a(u);Oa($,{get duelist(){return t().duelists.Above}});var Z=s($,2);{var W=ve=>{Xs(ve,{get entity(){return e(h)},get mode(){return e(g)}})};C(Z,ve=>{e(h)&&ve(W)})}var pe=s(Z,2);Oa(pe,{get duelist(){return t().duelists.Below}}),r(v,u)};C(ee,v=>{Te()==="wide"&&v(Ae)})}var Ce=s(ee,2),N=a(Ce),L=a(N);{var Q=v=>{var u=fi(),$=H(u),Z=a($),W=s($,2),pe=a(W);f(()=>b(Z,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),z("click",$,()=>{t(t().view.infoBoardState="Log",!0)}),z("click",pe,ce),r(v,u)};C(L,v=>{t().isEnded||v(Q)})}var me=s(N,2),se=a(me);{var te=v=>{var u=pi(),$=a(u);_e($,5,()=>t().field.cells,fe,(Z,W,pe)=>{var ve=mi();Le(ve,`${`duel_desk_row_${pe}`??""} svelte-1w535im`),_e(ve,5,()=>e(W),fe,(ie,ae,Be)=>{Zr(ie,{get view(){return t().view},row:pe,column:Be,get selectedEntities(){return e(c)},set selectedEntities(re){x(c,re)},get selectedCells(){return e(o)},set selectedCells(re){x(o,re)},$$legacy:!0})}),r(Z,ve)}),r(v,u)};C(se,v=>{t().clock.turn>0&&v(te)})}var R=s(me,2),D=a(R);{var Y=v=>{var u=hi(),$=H(u);{var Z=ve=>{var ie=gi();f(ae=>ie.disabled=ae,[()=>!e(B)()],ne),z("click",ie,ye),r(ve,ie)};C($,ve=>{((e(S)&&e(S).qty)??(e(T)&&e(T).qty)??9999)>1&&ve(Z)})}var W=s($,2);{var pe=ve=>{var ie=yi();z("click",ie,A),r(ve,ie)};C(W,ve=>{e(n)&&ve(pe)})}r(v,u)},J=v=>{var u=ke(),$=H(u);_e($,1,()=>e(E),fe,(Z,W)=>{var pe=bi(),ve=a(pe);f(()=>b(ve,e(W).action.title)),z("click",pe,()=>j(e(W))),r(Z,pe)}),r(v,u)};C(D,v=>{e(S)&&e(S).selectables.length||e(T)&&e(T).selectables?v(Y):v(J,!1)})}var M=s(Ce,2);{var K=v=>{var u=ki(),$=a(u);vs($,{get log(){return t().log}});var Z=s($,2);Zs(Z,{get cell(){return t().view.infoBoardCell}});var W=s(Z,2);ai(W,{get userProfile(){return d()},get viewController(){return t().view}}),f(pe=>Le(u,`duel_desk_right duel_desk_right_${pe??""}  svelte-1w535im`),[()=>t().view.infoBoardState.toLowerCase()],ne),oe(3,u,()=>be,()=>({duration:e(m)>1400?0:200,axis:"x"})),r(v,u)};C(M,v=>{(e(m)>1400||t().view.infoBoardState!=="Default")&&v(K)})}var F=s(de,2),O=a(F),X=s(F,2);_r(X,{get modalController(){return t().view.modalController}});var ue=s(X,2),xe=a(ue);const k=ne(()=>Te()==="wide"?"right":"left");ci(xe,{get duel(){return t()},get position(){return e(k)}}),f((v,u)=>{Le(de,`flex duel_desk ${v??""}_mode svelte-1w535im`),b(O,u),Le(ue,`cutin ${v??""}_mode svelte-1w535im`)},[Te,()=>t().clock.toFullString()],ne),ca("innerWidth",v=>x(m,v)),ca("innerHeight",v=>x(p,v)),r(_,De),ut()}var xi=l("<div></div>"),Di=l("<!> <!> <!> <!>",1),$i=l('<span class="atk svelte-1y1qbq4"> </span> <span class="slash svelte-1y1qbq4">/</span> <span class="def svelte-1y1qbq4"> </span>',1),Si=l('<div role="listitem"><div class="svelte-1y1qbq4"><div class="duel_card_row card_name svelte-1y1qbq4"> </div> <div style="display:flex; flex-wrap: wrap;" class="svelte-1y1qbq4"><div style="" class="svelte-1y1qbq4"><!> <!> <!></div> <div class="atk_def svelte-1y1qbq4"><!></div></div></div></div>');function Ga(_,i){ct(i,!1);let t=je(i,"mode",8),d=je(i,"cardInfo",8),m=je(i,"onAttention",8),p=je(i,"cardControlEventHandlers",8);_t();var c=Si(),o=a(c),q=a(o),E=a(q),S=s(q,2),T=a(S),B=a(T);{var n=A=>{var j=Di(),ce=H(j);{var Te=Ce=>{var N=lt();f(()=>b(N,`★${d().level??""}`)),r(Ce,N)},De=Ce=>{var N=ke(),L=H(N);{var Q=se=>{var te=lt();f(()=>b(te,`☆${d().rank??""}`)),r(se,te)},me=se=>{var te=ke(),R=H(te);{var D=Y=>{var J=lt();f(()=>b(J,`Ｌ${d().link??""}`)),r(Y,J)};C(R,Y=>{d().link&&Y(D)},!0)}r(se,te)};C(L,se=>{d().rank?se(Q):se(me,!1)},!0)}r(Ce,N)};C(ce,Ce=>{d().level?Ce(Te):Ce(De,!1)})}var de=s(ce,2);_e(de,1,()=>d().attributes??[],fe,(Ce,N)=>{var L=xi();f(()=>Le(L,`monster_attr ${e(N)??""} svelte-1y1qbq4`)),r(Ce,L)});var ee=s(de,2);_e(ee,1,()=>d().types??[],fe,(Ce,N)=>{var L=lt();f(()=>b(L,ma[e(N)])),r(Ce,L)});var Ae=s(ee,2);_e(Ae,1,()=>d().monsterCategories??[],fe,(Ce,N)=>{var L=lt();f(()=>b(L,la[e(N)])),r(Ce,L)}),r(A,j)};C(B,A=>{d().kind==="Monster"&&A(n)})}var V=s(B,2);{var U=A=>{var j=lt();f(()=>b(j,`${pa[d().spellCategory]??""}魔法`)),r(A,j)};C(V,A=>{d().spellCategory&&A(U)})}var h=s(V,2);{var g=A=>{var j=lt();f(()=>b(j,`${ga[d().trapCategory]??""}罠`)),r(A,j)};C(h,A=>{d().trapCategory&&A(g)})}var P=s(T,2),G=a(P);{var ye=A=>{var j=$i(),ce=H(j),Te=a(ce),De=s(ce,4),de=a(De);f(()=>{b(Te,d().attack??"?"),b(de,d().defense??"?")}),r(A,j)};C(G,A=>{d().kind==="Monster"&&A(ye)})}f(A=>{Le(c,`${A??""} svelte-1y1qbq4`),b(E,d().name)},[()=>{var A,j;return`deck_editor_card duel_card ${d().kind} ${(j=(A=d())==null?void 0:A.monsterCategories)==null?void 0:j.join(" ")} ${d().isImplemented?"is_implemented":"is_not_implemented"} card_id_${d().cardId}`}],ne),z("click",c,()=>m()(d())),z("touchstart",c,A=>p().onCardDragStart(A,t(),d())),z("touchmove",c,A=>p().onCardDragging(A,t())),z("touchend",c,function(...A){var j;(j=p().onCardDragEnd)==null||j.apply(this,A)}),z("touchcancel",c,function(...A){var j;(j=p().onCardDragCancel)==null||j.apply(this,A)}),z("mousedown",c,A=>p().onCardDragStart(A,t(),d())),z("mousemove",c,A=>p().onCardDragging(A,t())),z("mouseup",c,function(...A){var j;(j=p().onCardDragEnd)==null||j.apply(this,A)}),r(_,c),ut()}var Mi=l('<button class="button_style_reset plus_minus_button svelte-1ty6ui7">+</button> <button class="button_style_reset plus_minus_button svelte-1ty6ui7">-</button>',1),Ti=l('<li class="deck_editor_item svelte-1ty6ui7"><!> <!></li>'),Ei=l('<div class="deck_editor_card_list_wrapper svelte-1ty6ui7"><ul></ul></div>');function ji(_,i){ct(i,!1);let t=je(i,"cardList",8),d=je(i,"mode",8),m=je(i,"state",8),p=je(i,"onAttention",8),c=je(i,"cardControlEventHandlers",8);const o=20;let q=le(0),E=le(o),S=le(0),T=le(0),B=le(0),n=le();da(()=>(e(n),Ot(d()),Ot(t()),e(B),e(T),Ot(m())),()=>{if(e(n))if(he(n,e(n).scrollTop=0),d()==="List"){const h=t().length>o?o:t().length;e(B)||(x(T,e(n).scrollHeight/h),x(B,Math.ceil(e(T)))),console.log(m(),t().length),t().length>o?x(S,e(B)*(t().length-o*2)+Math.ceil(e(T)*(o*2-1))):x(S,e(B)*t().length)}else x(E,t().length)}),Ca(),_t();var V=Ei(),U=a(V);_e(U,5,t,fe,(h,g,P)=>{var G=ke(),ye=H(G);{var A=j=>{var ce=Ti(),Te=a(ce);Ga(Te,{get mode(){return d()},get cardInfo(){return e(g)},get onAttention(){return p()},get cardControlEventHandlers(){return c()}});var De=s(Te,2);{var de=ee=>{var Ae=Mi(),Ce=H(Ae),N=s(Ce,2);f(L=>{Ce.disabled=!e(g).isImplemented,ot(Ce,"title",e(g).isImplemented?`※shiftキー同時押しで一括投入
※ctrlキー同時押しで枚数制限無視`:""),N.disabled=L,ot(N,"title",e(g).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>t().every(L=>L.name!==e(g).name)],ne),z("click",Ce,L=>c().onCardAppend(L,e(g))),z("click",N,L=>c().onCardRemove(L,e(g))),r(ee,Ae)};C(De,ee=>{d()==="Deck"&&ee(de)})}r(j,ce)};C(ye,j=>{P>=e(q)&&P<=e(E)&&j(A)})}r(h,G)}),Wa(U,h=>x(n,h),()=>e(n)),f(h=>{Le(U,`deck_editor_card_list ${h??""}  indexLowerBound_${e(q)??""} indexUpperBound=${e(E)??""} svelte-1ty6ui7`),ot(U,"style",`height: ${(e(S)?e(S)+"px":"fit-content")??""};padding-top: ${e(q)*e(B)}px`)},[()=>m().toLowerCase()],ne),z("scroll",V,h=>{if(!e(B))return;const g=Math.ceil(h.currentTarget.scrollTop/e(B));x(q,g<o?0:g-o),x(E,g+o)}),r(_,V),ut()}var Ai=l('<div class="svelte-bxy0h6"><button class="button_style_reset svelte-bxy0h6">クリア</button></div>'),Bi=l('<div><div class="deck_editor_card_kind_header svelte-bxy0h6"><div class="svelte-bxy0h6"> <!> 枚）</div> <div style="display: flex;" class="svelte-bxy0h6"><!> <div class="triangle svelte-bxy0h6">▲</div></div></div> <div class="deck_editor_card_kind_body svelte-bxy0h6"><!></div></div>'),Li=l('<div class="deck_editor_card_list svelte-bxy0h6"></div>');function Ra(_,i){ct(i,!1);let t=je(i,"allCardTree",8),d=je(i,"deckCardTree",12),m=je(i,"mode",8),p=je(i,"onAttention",8),c=je(i,"searchCondition",8,void 0),o=je(i,"cardControlEventHandlers",8),q=le("ExtraMonster");const E=le(m()==="List"?t():d()),S=(...h)=>{const g=h.length?h:Gt(e(E)),P=(G,ye)=>{var A;return Xa(G,ye,(A=c())==null?void 0:A.sort.filter(j=>j.priority>0).toSorted((j,ce)=>j.priority-ce.priority))};g.forEach(G=>e(E)[G].sort(P))},T=(h,g)=>{d(d()[g]=[],!0)};let B=le(m()==="Deck"?structuredClone(e(E)):{ExtraMonster:[],Monster:[],Spell:[],Trap:[]}),n=le("");const V=h=>{if(!c())return!0;if(h.kind==="XyzMaterial")return!1;const g=_a(h);if(!c().deckCardKinds.includes(g)||c().name.trim().length&&[h.name,...h.nameTags??[],...h.textTags??[]].every(G=>!G.includes(c().name))||!h.isImplemented&&!c().others.includes("implemented")||h.isForTest&&!c().others.includes("test")||h.isOldVersion&&!c().others.includes("oldVersion"))return!1;if(h.kind==="Monster"){if(h.attributes&&!c().monsterAttributes.union(h.attributes).length||h.types&&!c().monsterTypes.union(h.types).length)return!1;const P=h.level??h.rank??h.link;return qt(c().starLowerBound)&&(P??0)<c().starLowerBound||qt(c().starUpperBound)&&(P??0)>c().starUpperBound||qt(c().atkLowerBound)&&(h.attack??0)<c().atkLowerBound||qt(c().atkUpperBound)&&(h.attack??0)>c().atkUpperBound||qt(c().defLowerBound)&&(h.defense??0)<c().defLowerBound||qt(c().defUpperBound)&&(h.defense??0)>c().defUpperBound||qt(c().atkPlusDef)&&(!qt(h.attack)||!qt(h.defense)||h.attack+h.defense!==c().atkPlusDef)||!h.monsterCategories||g==="ExtraMonster"&&!h.monsterCategories.union(c().exMonsterCategories).length?!1:h.monsterCategories.union(c().monsterCategories).length}if(h.kind==="Spell")return h.spellCategory&&c().spellCategories.includes(h.spellCategory);if(h.kind==="Trap")return h.trapCategory&&c().trapCategories.includes(h.trapCategory)};da(()=>(Ot(m()),e(E),Ot(d()),e(q),e(B)),()=>{if(m()==="Deck"){if(Gt(e(E)).forEach(h=>he(E,e(E)[h]=d()[h])),e(E)[e(q)].length){const h=Gt(e(E)).map(g=>({kind:g,cardInfos:e(E)[g]})).filter(({cardInfos:g})=>g.length).find(({kind:g,cardInfos:P})=>P.length!==e(B)[g].length);h&&e(q)!==h.kind&&x(q,h.kind)}else x(q,Gt(e(E)).find(h=>e(E)[h].find(V))??"ExtraMonster");x(B,structuredClone(e(E)))}}),da(()=>(Ot(m()),Ot(c()),e(n)),()=>{var h;if(m()==="List"){const g=JSON.stringify((h=c())==null?void 0:h.sort);e(n)!==g&&(x(n,g),S())}}),Ca(),_t();var U=Li();_e(U,5,()=>ta,fe,(h,g,P)=>{var G=Bi();const ye=ne(()=>e(E)[e(g)].filter(V));var A=a(G),j=a(A),ce=a(j),Te=s(ce);{var De=Q=>{var me=lt();f(se=>b(me,`/ ${se??""}`),[()=>e(E)[e(g)].length.toLocaleString()],ne),r(Q,me)};C(Te,Q=>{m()==="List"&&Q(De)})}var de=s(j,2),ee=a(de);{var Ae=Q=>{var me=Ai(),se=a(me);z("click",se,te=>T(te,e(g))),r(Q,me)};C(ee,Q=>{m()==="Deck"&&e(ye).length&&Q(Ae)})}var Ce=s(A,2),N=a(Ce);const L=ne(()=>e(q)===e(g)?"Open":"Close");ji(N,{get mode(){return m()},get cardList(){return e(ye)},get onAttention(){return p()},get cardControlEventHandlers(){return o()},get state(){return e(L)}}),f(Q=>{Le(G,`deck_editor_card_kind deckCardKind ${(e(g)===e(q)?"selected":"")??""} ${(e(ye).length?"":"empty")??""} svelte-bxy0h6`),b(ce,`${Va[e(g)]??""}（${Q??""} `)},[()=>e(ye).length.toLocaleString()],ne),z("click",A,()=>{if(e(q)!==e(g)){x(q,e(g));return}x(q,ta.map((Q,me)=>me+P).map(Q=>Q%ta.length).map(Q=>ta[Q]).filter(Q=>Q!==e(g)).find(Q=>e(E)[Q].some(V))??e(g))}),r(h,G)}),r(_,U),ut()}var Yi=l('<div class="svelte-1e9s0mh"> </div>'),qi=l('<div class="svelte-1e9s0mh"> </div>'),Ui=l('<div class="link_arrow_emoji svelte-1e9s0mh"> </div>'),Pi=l('<div class="duel_card_info_row svelte-1e9s0mh" style="position:sticky; top:0;"><!></div>'),Hi=l('<div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"><pre class="description svelte-1e9s0mh"> </pre></div></div> <div class="duel_card_info_row svelte-1e9s0mh" style=" justify-content: space-between;"><div class="svelte-1e9s0mh"> </div> <div class="svelte-1e9s0mh"> </div></div>',1),Ni=l('<div></div> <div class="svelte-1e9s0mh"> </div>',1),Fi=l("<div> </div>"),Ii=l('<span class="svelte-1e9s0mh">/</span> <div class="monster_defense svelte-1e9s0mh"> </div>',1),Oi=l("<div> </div>"),Ri=l('<div class="duel_card_info_row svelte-1e9s0mh"><!> <!> <div style="flex-grow: 1;" class="svelte-1e9s0mh"></div> <div class="monster_attack svelte-1e9s0mh"> </div> <!></div> <div class="duel_card_info_row svelte-1e9s0mh"></div>',1),Ki=l('<div class="duel_card_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"></div> <div class="svelte-1e9s0mh"> </div></div>'),Wi=l('<div class="duel_card_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"></div> <div class="svelte-1e9s0mh"> </div></div>'),zi=l('<div class="svelte-1e9s0mh"> </div>'),Vi=l('<div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh">※エラッタ前カードです</div></div>'),Xi=l('<div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh">※テスト用カードです</div></div>'),Gi=l('<div class="duel_card_info_links svelte-1e9s0mh"><a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1e9s0mh"> </a> <a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1e9s0mh">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="google" class="svelte-1e9s0mh">⇒google検索</a></div>'),Qi=l('<div><div class="duel_card_info_header svelte-1e9s0mh"><div class="duel_card_info_row svelte-1e9s0mh"><div class="svelte-1e9s0mh"> </div></div> <!> <div class="plus_minus_button_area svelte-1e9s0mh"><button class="button_style_reset plus_minus_button svelte-1e9s0mh">+</button> <button class="button_style_reset plus_minus_button svelte-1e9s0mh">-</button></div></div> <div class="duel_card_info_body svelte-1e9s0mh"><!> <!> <div class="duel_card_info_row description svelte-1e9s0mh"><div class="svelte-1e9s0mh"><pre class="description svelte-1e9s0mh"> </pre></div> <!></div> <!> <!></div></div>');function Ji(_,i){ct(i,!1);let t=je(i,"cardInfo",8,void 0),d=je(i,"onAttention",8),m=je(i,"cardControlEventHandlers",8),p=je(i,"deckCardTree",8);_t();var c=ke(),o=H(c);{var q=E=>{var S=Qi(),T=a(S),B=a(T),n=a(B),V=a(n),U=s(B,2);{var h=D=>{var Y=Pi(),J=a(Y);{var M=F=>{var O=Yi(),X=a(O);f(ue=>b(X,ue),[()=>"★".repeat(t().level)],ne),r(F,O)},K=F=>{var O=ke(),X=H(O);{var ue=k=>{var v=qi(),u=a(v);f($=>b(u,$),[()=>"★".repeat(t().rank)],ne),r(k,v)},xe=k=>{var v=ke(),u=H(v);{var $=Z=>{var W=Ui(),pe=a(W);f(ve=>b(pe,ve),[()=>t().linkArrowKeys.map(ve=>za[ve].emoji).join("")],ne),r(Z,W)};C(u,Z=>{t().linkArrowKeys&&Z($)},!0)}r(k,v)};C(X,k=>{t().rank&&t().rank>0?k(ue):k(xe,!1)},!0)}r(F,O)};C(J,F=>{t().level&&t().level>0?F(M):F(K,!1)})}r(D,Y)};C(U,D=>{t().kind==="Monster"&&D(h)})}var g=s(U,2),P=a(g),G=s(P,2),ye=s(T,2),A=a(ye);{var j=D=>{var Y=Hi(),J=H(Y),M=a(J),K=a(M),F=a(K),O=s(J,2),X=a(O),ue=a(X),xe=s(X,2),k=a(xe);f(()=>{b(F,t().pendulumDescription),b(ue,`◀ ${t().pendulumScaleL??""}`),b(k,`${t().pendulumScaleR??""} ▶`)}),r(D,Y)};C(A,D=>{var Y;(Y=t().monsterCategories)!=null&&Y.includes("Pendulum")&&D(j)})}var ce=s(A,2);{var Te=D=>{var Y=Ri(),J=H(Y),M=a(J);{var K=u=>{var $=Ni(),Z=H($),W=s(Z,2),pe=a(W);f(()=>{Le(Z,`monster_attr ${t().attributes[0]??""} svelte-1e9s0mh`),b(pe,`${xa[t().attributes[0]]??""}属性`)}),r(u,$)};C(M,u=>{t().attributes&&u(K)})}var F=s(M,2);{var O=u=>{var $=Fi(),Z=a($);f(()=>{Le($,`monster_cat ${t().types[0]??""} svelte-1e9s0mh`),b(Z,`${ma[t().types[0]]??""}${Da[t().types[0]]??""}族`)}),r(u,$)};C(F,u=>{t().types&&u(O)})}var X=s(F,4),ue=a(X),xe=s(X,2);{var k=u=>{var $=Ii(),Z=s(H($),2),W=a(Z);f(()=>b(W,t().defense??"?")),r(u,$)};C(xe,u=>{var $;($=t().monsterCategories)!=null&&$.includes("Link")||u(k)})}var v=s(J,2);_e(v,5,()=>t().monsterCategories??[],fe,(u,$)=>{var Z=Oi(),W=a(Z);f(()=>{Le(Z,`monster_cat ${e($)??""} svelte-1e9s0mh`),b(W,`${la[e($)]??""}${va[e($)]??""}`)}),r(u,Z)}),f(()=>b(ue,t().attack??"?")),r(D,Y)},De=D=>{var Y=ke(),J=H(Y);{var M=F=>{var O=Ki(),X=s(a(O),2),ue=a(X);f(()=>b(ue,`${pa[t().spellCategory]??""}魔法`)),r(F,O)},K=F=>{var O=ke(),X=H(O);{var ue=xe=>{var k=Wi(),v=s(a(k),2),u=a(v);f(()=>b(u,`${ga[t().trapCategory]??""}罠`)),r(xe,k)};C(X,xe=>{t().kind==="Trap"&&t().trapCategory&&xe(ue)},!0)}r(F,O)};C(J,F=>{t().kind==="Spell"&&t().spellCategory?F(M):F(K,!1)},!0)}r(D,Y)};C(ce,D=>{t().kind==="Monster"?D(Te):D(De,!1)})}var de=s(ce,2),ee=a(de),Ae=a(ee),Ce=a(Ae),N=s(ee,2);{var L=D=>{var Y=zi(),J=a(Y);f(M=>b(J,`初版発売日：${M??""}`),[()=>t().releaseDate.formatToYYYYMMDD("-")],ne),r(D,Y)};C(N,D=>{t().releaseDate&&D(L)})}var Q=s(de,2);{var me=D=>{var Y=Vi();r(D,Y)};C(Q,D=>{t().isOldVersion&&D(me)})}var se=s(Q,2);{var te=D=>{var Y=Xi();r(D,Y)},R=D=>{var Y=Gi(),J=a(Y),M=a(J),K=s(J,2),F=s(K,2);f(O=>{ot(J,"href",O),b(M,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`),ot(K,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),ot(F,"href",`https://www.google.com/search?q=遊戯王 ${t().name}`)},[()=>ur(t())],ne),r(D,Y)};C(se,D=>{t().isForTest?D(te):D(R,!1)})}f((D,Y)=>{Le(S,`duel_card duel_card_info ${t().kind??""} ${D??""} svelte-1e9s0mh`),b(V,t().name),P.disabled=!t().isImplemented,ot(P,"title",t().isImplemented?`※shiftキー同時押しで一括投入
※ctrlキー同時押しで枚数制限無視`:""),G.disabled=Y,ot(G,"title",t().isImplemented?"※shiftキー同時押しで一括外し":""),b(Ce,t().description)},[()=>{var D;return(D=t().monsterCategories)==null?void 0:D.join(" ")},()=>p()[_a(t())].every(D=>D.name!==t().name)],ne),z("click",P,D=>m().onCardAppend(D,t())),z("click",G,D=>m().onCardRemove(D,t())),z("click",S,()=>d()(t())),r(E,S)};C(o,E=>{t()&&E(q)})}r(_,c),ut()}const Zi={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class en{constructor(){nt(this,"DefaultSeparator1","/");nt(this,"DefaultSeparator2"," ");nt(this,"DefaultSeparator3",":");nt(this,"createDate",i=>{if(!i)return;const t=new Date(i);if(!isNaN(t.getTime()))return t});nt(this,"createDateOr",(i,t)=>this.createDate(i)||t||new Date);nt(this,"truncateDate",i=>{const t=i||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});nt(this,"addDate",(i,t)=>{const d=this.createDateOr(i);return d.setDate(d.getDate()+t),d});nt(this,"addMonth",(i,t)=>{const d=this.createDateOr(i);return d.setMonth(d.getMonth()+t),d});nt(this,"addYear",(i,t)=>{const d=this.createDateOr(i);return d.setFullYear(d.getFullYear()+t),d});nt(this,"getDayOfWeek",(i,t="dddd")=>{const d=this.createDate(i);return d?Zi[d.getDay()][t]:""});nt(this,"formatToYYYYMMDD",(i,t=this.DefaultSeparator1)=>{const d=this.createDate(i);if(!d)return"";const m=d.getFullYear().toString(),p=("0"+(d.getMonth()+1)).slice(-2),c=("0"+d.getDate()).slice(-2);return m+t+p+t+c});nt(this,"formatToYYYYMM",(i,t=this.DefaultSeparator1)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const m=d.getFullYear().toString(),p=("0"+(d.getMonth()+1)).slice(-2);return m+t+p});nt(this,"formatToHHMMSS",(i,t=this.DefaultSeparator3)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const m=d.getHours(),p=d.getMinutes(),c=d.getSeconds();return("0"+m).slice(-2)+t+("0"+p).slice(-2)+t+("0"+c).slice(-2)});nt(this,"formatToHHMM",(i,t=this.DefaultSeparator3)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const m=("0"+d.getHours()).slice(-2),p=("0"+d.getMinutes()).slice(-2);return m+t+p});nt(this,"formatToYYYYMMDD_HHMM",(i,t=this.DefaultSeparator1,d=this.DefaultSeparator2,m=this.DefaultSeparator3)=>{const p=this.createDate(i);return p?this.formatToYYYYMMDD(p,t)+d+this.formatToHHMM(p,m):""});nt(this,"formatToYYYYMMDD_HHMMSS",(i,t=this.DefaultSeparator1,d=this.DefaultSeparator2,m=this.DefaultSeparator3)=>{const p=this.createDate(i);return p?this.formatToYYYYMMDD(p,t)+d+this.formatToHHMMSS(p,m):""})}}const xt=new en;Date.prototype.truncateDate=function(){return xt.truncateDate(this)};Date.prototype.getCloneOr=function(_){return xt.createDateOr(this,_)};Date.prototype.addDate=function(_){return xt.addDate(this,_)};Date.prototype.addMonth=function(_){return xt.addDate(this,_)};Date.prototype.addYear=function(_){return xt.addDate(this,_)};Date.prototype.getDayOfWeek=function(_="dddd"){return xt.getDayOfWeek(this,_)};Date.prototype.formatToYYYYMM=function(_){return xt.formatToYYYYMM(this,_)};Date.prototype.formatToYYYYMMDD=function(_){return xt.formatToYYYYMMDD(this,_)};Date.prototype.formatToYYYYMMDD_HHMM=function(_,i,t){return xt.formatToYYYYMMDD_HHMM(this,_,i,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(_,i,t){return xt.formatToYYYYMMDD_HHMMSS(this,_,i,t)};Date.prototype.formatToHHMM=function(_){return xt.formatToHHMM(this,_)};Date.prototype.formatToHHMMSS=function(_){return xt.formatToHHMMSS(this,_)};var tn=l('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),an=l('<ul class="deck_info_list svelte-2wdgc8"></ul>'),rn=l('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),sn=l('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),nn=l('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),ln=l('<button class="svelte-2wdgc8">Cancel</button>'),on=l('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function dn(_,i){ct(i,!1);let t=je(i,"eventHolder",8),d=je(i,"args",8),m=je(i,"resolve",8),p=le(Promise.resolve([])),c=le();const o=()=>{x(c,new DataTransfer().files),x(p,Promise.resolve([]))},q=async n=>{n.preventDefault(),console.log("hoge",n)},E=async n=>{n.preventDefault(),n.dataTransfer&&T(n.dataTransfer.files)},S=()=>{T(e(c))},T=async n=>{if(!n.length)return;const V=[],U=[];for(const h of n)try{U.push(...await Tt.createfromJson(h))}catch(g){g instanceof Error&&V.push(g.message)}if(V.length){console.log(...V);return}x(p,e(p).then(()=>U))},B=o;_t(),fr(_,{get eventHolder(){return t()},get args(){return d()},$$slots:{body:(n,V)=>{var U=sn(),h=a(U);mt(h,()=>na,null,(g,P)=>{var G=ke(),ye=H(G);mt(ye,()=>e(p),null,(A,j)=>{var ce=ke(),Te=H(ce);{var De=ee=>{var Ae=an();_e(Ae,5,()=>e(j),fe,(Ce,N)=>{var L=tn(),Q=a(L),me=a(Q),se=s(Q,2),te=a(se),R=s(se,2),D=a(R);f((Y,J,M)=>{b(me,e(N).name),b(te,`${Y??""}
                  /
                  ${J??""}`),b(D,`最終使用日時 ： ${M??""}`)},[()=>e(N).cardNames.filter(Y=>{var J,M;return!((M=(J=e(P).getCardInfo(Y))==null?void 0:J.monsterCategories)!=null&&M.union(aa).length)}).length,()=>e(N).cardNames.filter(Y=>{var J,M;return(M=(J=e(P).getCardInfo(Y))==null?void 0:J.monsterCategories)==null?void 0:M.union(aa).length}).length,()=>e(N).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],ne),r(Ce,L)}),r(ee,Ae)},de=ee=>{var Ae=rn(),Ce=s(a(Ae),2),N=a(Ce);mr(N,()=>e(c),L=>x(c,L)),z("change",N,S),z("cancel",N,B),z("drop",Ae,E),z("dragover",Ae,q),r(ee,Ae)};C(Te,ee=>{e(j).length?ee(De):ee(de,!1)})}r(A,ce)}),r(g,G)}),r(n,U)},footer:(n,V)=>{var U=on(),h=a(U);mt(h,()=>e(p),null,(g,P)=>{var G=ke(),ye=H(G);{var A=ce=>{var Te=nn(),De=H(Te),de=s(De,2),ee=s(de,2);f(()=>{De.disabled=e(P).length===0,de.disabled=e(P).length===0}),z("click",De,()=>m()({deckInfos:e(P),replaceAll:!1})),z("click",de,()=>m()({deckInfos:e(P),replaceAll:!0})),z("click",ee,B),r(ce,Te)},j=ce=>{var Te=ke(),De=H(Te);{var de=ee=>{var Ae=ln();z("click",Ae,()=>m()(void 0)),r(ee,Ae)};C(De,ee=>{d().cancelable&&ee(de)},!0)}r(ce,Te)};C(ye,ce=>{e(P).length?ce(A):ce(j,!1)})}r(g,G)}),r(n,U)}}}),ut()}const fa=class fa extends gr{constructor(i,t){super(i,...Object.values(t))}};nt(fa,"createModalController",i=>{const t={deckUploader:new yr({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new fa(i,t),t)});let wa=fa;function vn(_,i){ct(i,!1);let t=je(i,"modalController",8);_t(),pr(_,{get modalController(){return t()},children:(d,m)=>{var p=ke(),c=H(p);{var o=q=>{dn(q,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};C(c,q=>{t().deckUploader.state==="Shown"&&q(o)})}r(d,p)},$$slots:{default:!0}}),ut()}var cn=l("<button> </button>"),_n=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),un=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),fn=l('<div class="deck_editor_search_box_row monster_ex_categories svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">エクストラ</button></div> <div class="svelte-1m129ml"></div></div>'),mn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),pn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> <div style="display: inline-block;"></div> </label>'),gn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),yn=l('<option class="svelte-1m129ml"></option>'),hn=l('<option class="svelte-1m129ml"></option>'),bn=l('<div class="deck_editor_search_box_row monster_categories svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">モンスター</button></div> <div class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row monster_attributes svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">属性</button></div> <div class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">種族</button></div> <div class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">星攻守</button></div> <div class="svelte-1m129ml"><div class="star_range svelte-1m129ml"><span class="svelte-1m129ml">星</span> <select class="svelte-1m129ml"></select> <span class="svelte-1m129ml">～</span> <select class="svelte-1m129ml"></select></div> <div class="atk_range svelte-1m129ml"><span class="svelte-1m129ml">攻</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"> <span class="svelte-1m129ml">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"></div> <div class="def_range svelte-1m129ml"><span class="svelte-1m129ml">守</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"> <span class="svelte-1m129ml">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-1m129ml"></div> <div class="atk_plus_def svelte-1m129ml"><span class="svelte-1m129ml">攻+守</span> <input type="number" min="0" max="10000" step="100" class="svelte-1m129ml"></div></div></div>',1),kn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),wn=l('<div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">魔法</button></div> <div class="svelte-1m129ml"></div></div>'),Cn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),xn=l('<div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">罠</button></div> <div class="svelte-1m129ml"></div></div>'),Dn=l('<label class="svelte-1m129ml"><input type="checkbox" class="search_condition svelte-1m129ml"> </label>'),$n=l('<div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">その他</button></div> <div class="svelte-1m129ml"></div></div>'),Sn=l('<div class="deck_editor_card_detail svelte-1m129ml"><!></div>'),Mn=l("<div>カード情報整理中</div>"),Tn=l("<div>カード情報読込中</div>"),En=l("<option> </option>"),jn=l('<div class="svelte-1m129ml"><a class="white_button svelte-1m129ml" download="SVS_DeckInfos.json">ダウンロード</a></div>'),An=l('<div class="svelte-1m129ml"></div>'),Bn=l('<div class="svelte-1m129ml"><a class="white_button svelte-1m129ml" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),Ln=l('<div class="svelte-1m129ml"></div>'),Yn=l('<div class="deck_editor_body_right_header svelte-1m129ml"><div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">編集対象</div> <div class="svelte-1m129ml"><select style="width:100%" class="svelte-1m129ml"></select></div></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">新規名称</div> <div class="svelte-1m129ml"><input type="text" style="width:100%" class="svelte-1m129ml"></div></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">基本操作</div> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml">デッキを保存</button></div> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml">デッキを複製</button></div> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-1m129ml"><div class="svelte-1m129ml">DL/UL</div> <!> <!> <div class="svelte-1m129ml"><button class="white_button svelte-1m129ml">アップロード</button></div></div></div> <div><!></div>',1),qn=l("<div>デッキ情報読込中</div>"),Un=l('<div class="deck_editor_body_right_dummy svelte-1m129ml"></div>'),Pn=l('<div class="deck_editor_body_right svelte-1m129ml"><!></div>'),Hn=l("<div><!></div>"),Nn=l('<div><div class="deck_editor_header svelte-1m129ml"></div> <div class="deck_editor_body svelte-1m129ml"><div class="deck_editor_body_left svelte-1m129ml"><div role="contentinfo" class="deck_editor_search_box svelte-1m129ml"><div class="deck_editor_search_box_header svelte-1m129ml"><div class="svelte-1m129ml"><button class="deck_editor_search_box_title svelte-1m129ml">検索条件</button></div> <div class="deck_editor_sort_setting_container svelte-1m129ml"></div></div> <div class="deck_editor_search_box_body svelte-1m129ml"><div class="deck_editor_search_box_row svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">名称</button></div> <div class="svelte-1m129ml"><input type="text" style="width:100%" placeholder="※ルビには対応していません" class="svelte-1m129ml"></div></div> <div class="deck_editor_search_box_row card_kind svelte-1m129ml"><div class="svelte-1m129ml"><button class="search_condition_title black_button svelte-1m129ml">種類</button></div> <div class="svelte-1m129ml"></div></div> <!> <!> <!> <!> <!></div></div> <!></div> <div class="deck_editor_body_center svelte-1m129ml"><div class="deck_editor_body_center_body svelte-1m129ml"><!></div></div> <!></div> <div class="footer svelte-1m129ml"></div></div> <!> <!>',1);function Fn(_,i){ct(i,!1);const t=[],d=[],m=[],p=[],c=[],o=[],q=[],E=[];let S=je(i,"refOnly",8);const T=wa.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),B={name:"",deckCardKinds:[...ta],exMonsterCategories:[...aa],monsterCategories:qa.filter(y=>!aa.includes(y)),monsterAttributes:[...Ya],monsterTypes:[...La],spellCategories:Ba.filter(y=>y!=="PendulumScale"),trapCategories:[...Aa],starLowerBound:0,starUpperBound:13,atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:S()?["implemented"]:["oldVersion"],sort:[...Ua]},n=le(structuredClone(B));he(n,e(n).monsterCategories=["Effect","Tuner","Pendulum"]);let V=le("DeckEdit"),U=le("SearchCondition");const h=()=>{if(!e(n).deckCardKinds.length){Gt(e(n)).forEach(y=>{Array.isArray(e(n)[y])&&Array.isArray(B[y])?he(n,e(n)[y]=[...B[y]]):he(n,e(n)[y]=B[y])});return}he(n,e(n).name=""),he(n,e(n).deckCardKinds=[]),he(n,e(n).exMonsterCategories=[]),he(n,e(n).monsterCategories=[]),he(n,e(n).monsterAttributes=[]),he(n,e(n).monsterTypes=[]),he(n,e(n).spellCategories=[]),he(n,e(n).trapCategories=[]),he(n,e(n).others=[]),he(n,e(n).atkLowerBound=0),he(n,e(n).atkUpperBound=5e3),he(n,e(n).defLowerBound=0),he(n,e(n).defUpperBound=5e3),he(n,e(n).atkPlusDef=void 0),he(n,e(n).sort=[...Ua])},g=y=>{y.forEach(w=>{Array.isArray(e(n)[w])&&Array.isArray(B[w])?he(n,e(n)[w]=e(n)[w].length?[]:[...B[w]]):he(n,e(n)[w]=B[w])})};let P=le(),G,ye=le(!1);const A=200,j=()=>{x(ye,!1),x(P,void 0),G=void 0},ce=(y,w)=>{const I=_a(w),ge=e(se).cardTree[I].filter(Fe=>Fe.name===w.name).length;let Ye=y.shiftKey?3-ge:1;console.debug(w,I,ge,Ye),!y.ctrlKey&&ge>2&&(Ye=0),Ye&&he(se,e(se).cardTree[I]=[...e(se).cardTree[I],...Array(Ye).fill(w)].sort(Xa)),j(),D(w)},Te=(y,w)=>{const I=_a(w);let ge=0;he(se,e(se).cardTree[I]=e(se).cardTree[I].filter(Ye=>Ye.name!==w.name?!0:(ge++,!y.shiftKey&&ge>1))),j(),D(w)},De=y=>{if(y.changedTouches&&y.changedTouches.length!==1)return;const{clientX:w,clientY:I}=y.changedTouches?y.changedTouches[0]:y;return{clientX:w,clientY:I}},de={onCardAppend:ce,onCardRemove:Te,onCardDragCancel:j,onCardDragStart:(y,w,I)=>{if(D(I),S()){j();return}if(w!=="List"&&w!=="Deck"){j();return}if(w==="List"&&!I.isImplemented){j();return}const ge=De(y);if(!ge){j();return}G={from:w,cardInfo:I,pos:ge,startPos:ge},ea(A).then(()=>{(G==null?void 0:G.cardInfo)===I&&x(P,G)}),x(ye,!1)},onCardDragging:(y,w)=>{if(e(P)&&y.preventDefault&&y.preventDefault(),e(P)&&y.stopPropagation&&y.stopPropagation(),!G){j();return}const I=De(y);if(!I){j();return}const ge=e(P)||G;x(ye,!!(ge.from==="List"&&ge.cardInfo.isImplemented&&document.elementsFromPoint(I.clientX,I.clientY).some(Ye=>Ye.classList.contains("deck_editor_body_right_body")||Ye.classList.contains("deck_editor_body_right_dummy")))),e(ye)&&x(V,"DeckEdit"),e(P)?x(P,{...e(P),pos:I}):G.pos={...I}},onCardDragEnd:y=>{if(!G||!e(P)){j();return}const w=De(y);if(!w){j();return}e(P).from==="List"&&e(P).cardInfo.isImplemented&&document.elementsFromPoint(w.clientX,w.clientY).some(I=>I.classList.contains("deck_editor_body_right_body"))&&ce(y,e(P).cardInfo),e(P).from==="Deck"&&!document.elementsFromPoint(w.clientX,w.clientY).some(I=>I.classList.contains("deck_editor_body_right_body"))&&Te(y,e(P).cardInfo),j()}},ee=(y,w,I)=>{Array.isArray(e(n)[w])&&Array.isArray(B[w])&&he(n,e(n)[w]=[I])},Ae=async()=>{const w=(await e(L)).find(ge=>ge.id===e(N));if(!w)return;const I=await na;x(se,{...w,cardTree:br(w.cardNames.map(ge=>{const Ye=I.getCardInfo(ge);return Ye===void 0&&console.error(ge),Ye}).filter(ge=>ge!==void 0))})},Ce=()=>Tt.getAllDeckInfo().then(y=>(x(N,(y.find(w=>w.lastUsedAt.getTime()===Math.max(...y.map(I=>I.lastUsedAt.getTime())))??y[0]).id),y));let N=le(-1),L=le(Ce()),Q=le(e(L).then(y=>Tt.convertToObjectURL(y)));e(L).then(Ae);const me=()=>{x(L,Ce()),x(Q,e(L).then(y=>Tt.convertToObjectURL(y))),Ae()};let se=le({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardTree:{ExtraMonster:[],Monster:[],Spell:[],Trap:[]}}),te=le(void 0),R=0;const D=y=>{x(U,"CardDetail"),y.cardId!==void 0&&!y.description&&!y.pendulumDescription&&(R=y.cardId,ha([y.cardId]).then(()=>{y.cardId===R&&x(te,y)})),x(te,y)},Y=async()=>{const w=(await e(L)).find(I=>I.id===e(N));if(!w)throw new Error("illegal state");return w},J=async()=>{const y=await Y();await y.saveDeckInfo({...y,name:e(se).name,cardNames:Object.values(e(se).cardTree).flatMap(w=>w).map(w=>w.name),lastUsedAt:new Date}),me()},M=async()=>{(await Tt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,Object.values(e(se).cardTree).flatMap(w=>w).map(w=>w.name))).saveDeckInfo(),me()},K=async y=>{const w=await Y();!y.shiftKey&&!confirm(`デッキ【${w.name}】を削除します。
よろしいですか？`)||(await w.delete(),me())},F=async()=>{const y=await T.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!y)return;const w=[];if(y.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;w.push(...(await e(L)).map(I=>I.id))}await Promise.all(y.deckInfos.map(I=>Tt.createNewDeck(I.name,I.description,I.cardNames,I.lastUsedAt))),w.length&&await Promise.all(w.map(Tt.remove)),me()},O=()=>innerWidth<=1400?"compact":"wide";_t();var X=Nn(),ue=H(X),xe=s(a(ue),2),k=a(xe),v=a(k),u=a(v),$=a(u),Z=a($),W=s($,2);_e(W,5,()=>e(n).sort,fe,(y,w,I)=>{var ge=cn(),Ye=a(ge);f(()=>{Le(ge,`deck_editor_sort_setting_item ${e(w).order??""} priority_${e(w).priority??""} svelte-1m129ml`),b(Ye,`${hr[e(w).key]??""}
                ${(e(w).order==="asc"?"▲":"▼")??""}`)}),z("click",ge,()=>{e(n).sort.forEach(Fe=>Fe.priority++),e(w).order=e(w).order==="asc"?"desc":"asc",Bt(()=>e(n).sort),e(w).priority=1,Bt(()=>e(n).sort)}),r(y,ge)});var pe=s(u,2),ve=a(pe),ie=a(ve),ae=a(ie),Be=s(ie,2),re=a(Be),Re=s(ve,2),Ne=a(Re),Ke=a(Ne),ze=s(Ne,2);_e(ze,5,()=>ta,fe,(y,w)=>{var I=_n(),ge=a(I),Ye,Fe=s(ge);f(()=>{Ye!==(Ye=e(w))&&(ge.value=(ge.__value=e(w))==null?"":e(w)),b(Fe,` ${Va[e(w)]??""}`)}),Nt(t,[],ge,()=>(e(w),e(n).deckCardKinds),$e=>he(n,e(n).deckCardKinds=$e)),z("dblclick",I,$e=>ee($e,"deckCardKinds",e(w))),r(y,I)});var Ge=s(Re,2);{var it=y=>{var w=fn(),I=a(w),ge=a(I),Ye=s(I,2);_e(Ye,5,()=>aa,fe,(Fe,$e)=>{var Pe=un(),Me=a(Pe),He,We=s(Me);f(()=>{He!==(He=e($e))&&(Me.value=(Me.__value=e($e))==null?"":e($e)),b(We,` ${la[e($e)]??""}${va[e($e)]??""}`)}),Nt(d,[],Me,()=>(e($e),e(n).exMonsterCategories),Ie=>he(n,e(n).exMonsterCategories=Ie)),z("dblclick",Pe,Ie=>ee(Ie,"exMonsterCategories",e($e))),r(Fe,Pe)}),z("click",ge,()=>g(["exMonsterCategories"])),oe(3,w,()=>be,()=>({delay:0,duration:100})),r(y,w)};C(Ge,y=>{e(n).deckCardKinds.includes("ExtraMonster")&&y(it)})}var qe=s(Ge,2);{var we=y=>{var w=bn(),I=H(w),ge=a(I),Ye=a(ge),Fe=s(ge,2);_e(Fe,5,()=>qa.filter(Ue=>!aa.includes(Ue)).filter(Ue=>Ue!=="Token"),fe,(Ue,Oe)=>{var Qe=mn(),Se=a(Qe),Je,at=s(Se);f(()=>{Je!==(Je=e(Oe))&&(Se.value=(Se.__value=e(Oe))==null?"":e(Oe)),b(at,` ${la[e(Oe)]??""}${va[e(Oe)]??""}`)}),Nt(m,[],Se,()=>(e(Oe),e(n).monsterCategories),rt=>he(n,e(n).monsterCategories=rt)),z("dblclick",Qe,rt=>ee(rt,"monsterCategories",e(Oe))),r(Ue,Qe)});var $e=s(I,2),Pe=a($e),Me=a(Pe),He=s(Pe,2);_e(He,5,()=>Ya,fe,(Ue,Oe)=>{var Qe=pn(),Se=a(Qe),Je,at=s(Se,2),rt=s(at);f(()=>{Je!==(Je=e(Oe))&&(Se.value=(Se.__value=e(Oe))==null?"":e(Oe)),Le(at,`monster_attr ${e(Oe)??""} svelte-1m129ml`),b(rt,` ${xa[e(Oe)]??""}`)}),Nt(p,[],Se,()=>(e(Oe),e(n).monsterAttributes),Ct=>he(n,e(n).monsterAttributes=Ct)),z("dblclick",Qe,Ct=>ee(Ct,"monsterAttributes",e(Oe))),r(Ue,Qe)});var We=s($e,2),Ie=a(We),bt=a(Ie),gt=s(Ie,2);_e(gt,5,()=>La,fe,(Ue,Oe)=>{var Qe=gn(),Se=a(Qe),Je,at=s(Se);f(()=>{Je!==(Je=e(Oe))&&(Se.value=(Se.__value=e(Oe))==null?"":e(Oe)),b(at,` ${ma[e(Oe)]??""}
                    ${Da[e(Oe)]??""}`)}),Nt(c,[],Se,()=>(e(Oe),e(n).monsterTypes),rt=>he(n,e(n).monsterTypes=rt)),z("dblclick",Qe,rt=>ee(rt,"monsterTypes",e(Oe))),r(Ue,Qe)});var kt=s(We,2),jt=a(kt),Ht=a(jt),Lt=s(jt,2),St=a(Lt),yt=s(a(St),2);f(()=>{e(n),Bt(()=>{})}),_e(yt,4,()=>Array(14),fe,(Ue,Oe,Qe)=>{var Se=yn();Se.value=(Se.__value=Qe)==null?"":Qe,Se.textContent=Qe,r(Ue,Se)});var wt=s(yt,4);f(()=>{e(n),Bt(()=>{})}),_e(wt,4,()=>Array(14),fe,(Ue,Oe,Qe)=>{var Se=hn();Se.value=(Se.__value=Qe)==null?"":Qe,Se.textContent=Qe,r(Ue,Se)});var At=s(St,2),Yt=s(a(At),2),Jt=s(Yt,4),zt=s(At,2),vt=s(a(zt),2),tt=s(vt,4),dt=s(zt,2),Mt=s(a(dt),2);z("click",Ye,()=>g(["monsterCategories"])),oe(3,I,()=>be,()=>({delay:0,duration:100})),z("click",Me,()=>g(["monsterAttributes"])),oe(3,$e,()=>be,()=>({delay:0,duration:100})),z("click",bt,()=>g(["monsterTypes"])),oe(3,We,()=>be,()=>({delay:0,duration:100})),z("click",Ht,()=>g(["starLowerBound","starUpperBound","atkLowerBound","atkUpperBound","defLowerBound","defUpperBound","atkPlusDef"])),It(yt,()=>e(n).starLowerBound,Ue=>he(n,e(n).starLowerBound=Ue)),It(wt,()=>e(n).starUpperBound,Ue=>he(n,e(n).starUpperBound=Ue)),Ft(Yt,()=>e(n).atkLowerBound,Ue=>he(n,e(n).atkLowerBound=Ue)),Ft(Jt,()=>e(n).atkUpperBound,Ue=>he(n,e(n).atkUpperBound=Ue)),Ft(vt,()=>e(n).defLowerBound,Ue=>he(n,e(n).defLowerBound=Ue)),Ft(tt,()=>e(n).defUpperBound,Ue=>he(n,e(n).defUpperBound=Ue)),Ft(Mt,()=>e(n).atkPlusDef,Ue=>he(n,e(n).atkPlusDef=Ue)),oe(3,kt,()=>be,()=>({delay:0,duration:100})),r(y,w)};C(qe,y=>{(e(n).deckCardKinds.includes("Monster")||e(n).deckCardKinds.includes("ExtraMonster"))&&y(we)})}var Ee=s(qe,2);{var Ve=y=>{var w=wn(),I=a(w),ge=a(I),Ye=s(I,2);_e(Ye,5,()=>Ba.filter(Fe=>Fe!=="PendulumScale"),fe,(Fe,$e)=>{var Pe=kn(),Me=a(Pe),He,We=s(Me);f(()=>{He!==(He=e($e))&&(Me.value=(Me.__value=e($e))==null?"":e($e)),b(We,` ${pa[e($e)]??""}`)}),Nt(o,[],Me,()=>(e($e),e(n).spellCategories),Ie=>he(n,e(n).spellCategories=Ie)),z("dblclick",Pe,Ie=>ee(Ie,"spellCategories",e($e))),r(Fe,Pe)}),z("click",ge,()=>g(["spellCategories"])),oe(3,w,()=>be,()=>({delay:0,duration:100})),r(y,w)};C(Ee,y=>{e(n).deckCardKinds.includes("Spell")&&y(Ve)})}var Xe=s(Ee,2);{var Ze=y=>{var w=xn(),I=a(w),ge=a(I),Ye=s(I,2);_e(Ye,5,()=>Aa,fe,(Fe,$e)=>{var Pe=Cn(),Me=a(Pe),He,We=s(Me);f(()=>{He!==(He=e($e))&&(Me.value=(Me.__value=e($e))==null?"":e($e)),b(We,` ${ga[e($e)]??""}`)}),Nt(q,[],Me,()=>(e($e),e(n).trapCategories),Ie=>he(n,e(n).trapCategories=Ie)),z("dblclick",Pe,Ie=>ee(Ie,"trapCategories",e($e))),r(Fe,Pe)}),z("click",ge,()=>g(["trapCategories"])),oe(3,w,()=>be,()=>({delay:0,duration:100})),r(y,w)};C(Xe,y=>{e(n).deckCardKinds.includes("Trap")&&y(Ze)})}var et=s(Xe,2);{var st=y=>{var w=$n(),I=a(w),ge=a(I),Ye=s(I,2);_e(Ye,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],fe,(Fe,$e)=>{var Pe=Dn(),Me=a(Pe),He,We=s(Me);f(()=>{He!==(He=$e.key)&&(Me.value=(Me.__value=$e.key)==null?"":$e.key),b(We,` ${$e.text??""}`)}),Nt(E,[],Me,()=>($e.key,e(n).others),Ie=>he(n,e(n).others=Ie)),r(Fe,Pe)}),z("click",ge,()=>g(["others"])),oe(3,w,()=>be,()=>({delay:0,duration:100})),r(y,w)};C(et,y=>{S()||y(st)})}var pt=s(v,2);{var ft=y=>{var w=Sn(),I=a(w);Ji(I,{get cardInfo(){return e(te)},onAttention:D,cardControlEventHandlers:de,get deckCardTree(){return e(se).cardTree}}),r(y,w)};C(pt,y=>{e(U)==="CardDetail"&&e(te)&&y(ft)})}var Dt=s(k,2),Rt=a(Dt),Pt=a(Rt);mt(Pt,()=>na,y=>{var w=Tn();r(y,w)},(y,w)=>{var I=ke(),ge=H(I);mt(ge,()=>e(w).treePrms,Ye=>{var Fe=Mn();r(Ye,Fe)},(Ye,Fe)=>{Ra(Ye,{mode:"List",get allCardTree(){return e(Fe)},onAttention:D,get searchCondition(){return e(n)},cardControlEventHandlers:de,get deckCardTree(){return e(se).cardTree},set deckCardTree($e){he(se,e(se).cardTree=$e)},$$legacy:!0})}),r(y,I)});var Kt=s(Dt,2);{var sa=y=>{var w=Pn(),I=a(w);{var ge=Fe=>{var $e=ke(),Pe=H($e);mt(Pe,()=>e(L),Me=>{var He=qn();r(Me,He)},(Me,He)=>{var We=Yn(),Ie=H(We),bt=a(Ie),gt=s(a(bt),2),kt=a(gt);f(()=>{e(N),Bt(()=>{e(He)})}),_e(kt,5,()=>e(He),fe,(Se,Je)=>{var at=En(),rt={},Ct=a(at);f(()=>{rt!==(rt=e(Je).id)&&(at.value=(at.__value=e(Je).id)==null?"":e(Je).id),b(Ct,e(Je).name)}),r(Se,at)});var jt=s(bt,2),Ht=s(a(jt),2),Lt=a(Ht),St=s(jt,4),yt=s(a(St),2),wt=a(yt),At=s(yt,2),Yt=a(At),Jt=s(At,2),zt=a(Jt),vt=s(St,2),tt=s(a(vt),2);mt(tt,Y,Se=>{var Je=An();r(Se,Je)},(Se,Je)=>{var at=jn(),rt=a(at);f(Ct=>ot(rt,"href",Ct),[()=>Tt.convertToObjectURL([e(Je)])],ne),r(Se,at)});var dt=s(tt,2);mt(dt,()=>e(Q),Se=>{var Je=Ln();r(Se,Je)},(Se,Je)=>{var at=Bn(),rt=a(at);f(()=>ot(rt,"href",e(Je))),r(Se,at)});var Mt=s(dt,2),Ue=a(Mt),Oe=s(Ie,2),Qe=a(Oe);Ra(Qe,{mode:"Deck",allCardTree:{ExtraMonster:[],Monster:[],Spell:[],Trap:[]},onAttention:D,cardControlEventHandlers:de,get deckCardTree(){return e(se).cardTree},set deckCardTree(Se){he(se,e(se).cardTree=Se)},$$legacy:!0}),f(()=>Le(Oe,`deck_editor_body_right_body ${(e(ye)?"can_drop":"")??""} svelte-1m129ml`)),It(kt,()=>e(N),Se=>x(N,Se)),z("change",kt,Ae),Ft(Lt,()=>e(se).name,Se=>he(se,e(se).name=Se)),z("click",wt,J),z("click",Yt,M),z("click",zt,K),z("click",Ue,F),r(Me,We)}),r(Fe,$e)},Ye=Fe=>{var $e=Un();r(Fe,$e)};C(I,Fe=>{e(V)==="DeckEdit"||O()==="wide"?Fe(ge):Fe(Ye,!1)})}z("click",w,()=>{x(V,"DeckEdit")}),z("focusin",w,()=>{x(V,"DeckEdit")}),r(y,w)};C(Kt,y=>{S()||y(sa)})}var Wt=s(ue,2);{var $t=y=>{var w=Hn(),I=a(w);Ga(I,{mode:"Dragging",get cardInfo(){return e(P).cardInfo},onAttention:D,cardControlEventHandlers:de}),f(()=>ot(w,"style",`position: fixed;
          top:${e(P).pos.clientY??""}px;
          left:${e(P).pos.clientX??""}px;
          z-index:3; 
          filter: opacity(0.8);
        	transform: translateX(-50%) translateY(-50%);`)),r(y,w)};C(Wt,y=>{e(P)&&y($t)})}var Et=s(Wt,2);vn(Et,{modalController:T}),f((y,w,I)=>Le(ue,`deck_editor
         screen_size_${y??""}
         left_pain_mode_${w??""}
         main_view_mode_${I??""}
         ${(e(P)?"dragging_card":"")??""}
          svelte-1m129ml`),[O,()=>e(U).toLowerCase(),()=>e(V).toLowerCase()],ne),z("click",Z,h),z("click",ae,()=>g(["name"])),Ft(re,()=>e(n).name,y=>he(n,e(n).name=y)),z("click",Ke,()=>g(["deckCardKinds"])),z("focusin",v,()=>{x(U,"SearchCondition"),x(V,"SearchCondition")}),z("click",v,()=>{x(U,"SearchCondition"),x(V,"SearchCondition")}),z("touchmove",ue,y=>e(P)&&de.onCardDragging(y,"Overlay")),z("mousemove",ue,y=>e(P)&&de.onCardDragging(y,"Overlay")),r(_,X),ut()}class In{constructor(){nt(this,"openMode");new URLSearchParams(window.location.search).get("mode")==="search"?this.openMode="CardSearch":this.openMode="Normal"}}const On=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],Rn=3;var Kn=l('<input class="game_mode_radio svelte-sy4ydn" type="radio" name="game_mode"> <label> </label>',1),Wn=l('<option class="svelte-sy4ydn"> </option>'),zn=l('<option class="svelte-sy4ydn"> </option>'),Vn=l('<option class="svelte-sy4ydn"> </option>'),Xn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_deck_selector" class="deck_selector svelte-sy4ydn"><option class="svelte-sy4ydn">デフォルト</option><!></select></div></td></tr>'),Gn=l('<option class="svelte-sy4ydn"> </option>'),Qn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">対戦相手：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select> <div class="svelte-sy4ydn"> </div></div></td></tr> <!> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">先攻後攻：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select></div></td></tr>',1),Jn=l('<option class="svelte-sy4ydn"> </option>'),Zn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-sy4ydn">難易度：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="difficulty_selector" class="difficulty_selector svelte-sy4ydn"></select></div></td></tr>'),el=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label class="config_row_label svelte-sy4ydn" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"></div></td></tr> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="deck_selector" class="deck_selector svelte-sy4ydn"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">duel start!</button></div></td></tr>',1),tl=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),al=l('<tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">deck edit</button></div></td></tr>'),rl=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="duelist_name" class="config_row_label duelist_name svelte-sy4ydn">名前：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><input id="duelist_name" class="duelist_name svelte-sy4ydn" type="text"></div></td></tr> <!> <!>',1),sl=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),il=l('<div class="app_body svelte-sy4ydn"><table class="config_table svelte-sy4ydn"><tbody><!></tbody></table></div>'),nl=l('<span class="svelte-sy4ydn"> </span> <span class="svelte-sy4ydn"> </span>',1),ll=l('<div class="result_title result_win svelte-sy4ydn">YOU WIN</div>'),ol=l('<div class="result_title result_lose svelte-sy4ydn">YOU LOSE</div>'),dl=l('<div class="result_title result_draw svelte-sy4ydn">DRAW</div>'),vl=l('<div class="twitter_share_button_wrapper svelte-sy4ydn"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-sy4ydn">X(twitter)でシェアする</a></div>'),cl=l('<div class="result svelte-sy4ydn"><!> <div class="reason_of_end svelte-sy4ydn"> </div> <!> <div class="svelte-sy4ydn"><button class="white_button svelte-sy4ydn">TOPへ戻る</button></div></div>'),_l=l('<main style="flex-direction: column; display :flex" class="svelte-sy4ydn"><div class="link link_left svelte-sy4ydn"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-sy4ydn">posfie(toggeter)</a></div> <div class="link link_right svelte-sy4ydn"><a class="a_button svelte-sy4ydn" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">現時点とこの先のこと</a></div> <!> <div class="footer card_summary svelte-sy4ydn"><!></div> <div class="footer debug_info svelte-sy4ydn"><span class="svelte-sy4ydn"> </span> <span class="user_agent_info svelte-sy4ydn"> </span> <span class="screen_info svelte-sy4ydn"> </span></div> <!></main>');function ul(_,i){ct(i,!1);const t=new kr("stk_ygo_svelte",Rn,On),d=new In;let m=le(0),p=le(0),c=le(),o=le("FtkChallenge"),q=le(d.openMode==="CardSearch"?"DeckEdit":"None"),E=le(0),S=le(""),T=le(void 0);const B="https://setta238.github.io/stk_ygo_svelte/",n="遊戯王deそりてあ",V="ninja_no",U=wr.getOrCreateNew(t).then(k=>(x(o,Pa.includes(k.previousGameMode)?k.previousGameMode:"FtkChallenge"),Ce(k.previousNpcId),k)),h=k=>{var u;const v=k.find($=>$.lastUsedAt.getTime()===Math.max(...k.map(Z=>Z.lastUsedAt.getTime())))??k[0];x(E,v.id),e(o)==="FtkChallenge"&&v.deckType!=="Preset"&&x(E,((u=Vt.find($=>$.deckType==="Preset"))==null?void 0:u.id)??e(E))};let g=le(Tt.getAllDeckInfo(t).then(k=>(Promise.all(k.filter(v=>!v.lastUsedAt).map(v=>{v.saveDeckInfo()})),h(k),k)));const P=async()=>{const k=e(E);let v=(await e(g)).find($=>$.id===k)??(await ye()).find($=>$.id===k);v&&await v.updateTimestamp();let u=v;if(u||(u=Vt.find($=>$.id===k)),!u)throw new Error("illegal state");return u},G=async()=>{(await U).save({previousGameMode:e(o)})},ye=()=>(x(g,Tt.getAllDeckInfo(t).then(k=>(h(k),k))),e(g)),A=async()=>{(await e(g)).length||(await Tt.prepareSampleDeck(),ye())},j=async()=>{await Promise.all([G(),A()]);const k=await P(),v=await U;let u=Zt.find(W=>W.id===Number.MIN_SAFE_INTEGER)??Zt[0],$=Vt.find(W=>W.id===Number.MIN_SAFE_INTEGER)??Vt[0],Z="PlayFirst";e(o)==="FtkChallenge"?u=Zt.filter(W=>W.npcType==="FtkChallenge").find(W=>W.difficulty===v.previousDifficulty)??u:e(o)==="Free"&&(u=Zt.find(W=>W.id===v.previousNpcId)??u,$=Vt.slice(-1)[0],Z=v.previousStartMode),u.npcType!=="FtkChallenge"&&v.previousNpcDeckId>-1?$=(await e(g)).find(W=>W.id===v.previousNpcDeckId)??$:$=Vt.find(W=>W.id===u.id)??$,x(c,new $r(v,"Player",k,[],u,"NPC",$,[],Z)),e(c).onDuelEnd.append(()=>(x(c,e(c)),"RemoveMe"))},ce=async()=>{await Promise.all([G(),A()]),x(q,"DeckEdit")},Te=async k=>{await G(),k.key==="Enter"&&!k.repeat&&(await U).save()},De=()=>{if(d.openMode==="CardSearch"){window.location.replace(window.location.origin+window.location.pathname);return}x(g,ye()),x(c,void 0),x(q,"None")};let de=Date.now();const ee=k=>{Date.now()-de<200||(de=Date.now(),x(o,k),ye())},Ae=k=>{Ce(Number(k.currentTarget.value))},Ce=k=>{var v;x(T,Zt.find(u=>u.id===k)),x(S,((v=e(T))==null?void 0:v.description)??"")};A(),_t();var N=_l(),L=s(a(N),2),Q=a(L),me=s(L,2);{var se=k=>{var v=ke(),u=H(v);mt(u,()=>U,null,($,Z)=>{Ci($,{get duel(){return e(c)},get userProfile(){return e(Z)}})}),r(k,v)},te=k=>{var v=ke(),u=H(v);{var $=W=>{const pe=ne(()=>d.openMode==="CardSearch");Fn(W,{get refOnly(){return e(pe)}})},Z=W=>{var pe=il(),ve=a(pe),ie=a(ve),ae=a(ie);mt(ae,()=>U,Be=>{var re=sl();r(Be,re)},(Be,re)=>{var Re=rl(),Ne=H(Re),Ke=a(Ne),ze=a(Ke),Ge=s(Ke),it=a(Ge),qe=a(it),we=s(Ne,2);mt(we,()=>e(g),Xe=>{var Ze=tl();r(Xe,Ze)},(Xe,Ze)=>{var et=el(),st=H(et),pt=a(st),ft=a(pt),Dt=s(pt),Rt=a(Dt);_e(Rt,5,()=>Pa,fe,(Pe,Me)=>{var He=Kn(),We=H(He),Ie=s(We,2),bt=a(Ie);f(gt=>{ot(We,"id",`game_mode_radio_${gt??""}`),xr(We,e(Me)),Dr(We,e(o)===e(Me)),Le(Ie,`game_mode_tab_label game_mode_tab_${gt??""} svelte-sy4ydn`),ot(Ie,"for",`game_mode_radio_${gt??""}`),b(bt,e(Me))},[()=>e(Me).toLowerCase()],ne),z("change",We,()=>ee(e(Me))),r(Pe,He)});var Pt=s(st,2),Kt=a(Pt),sa=a(Kt),Wt=s(Kt),$t=a(Wt),Et=a($t);f(()=>{e(E),Bt(()=>{e(o),e(Ze)})}),_e(Et,5,()=>e(o)==="FtkChallenge"?Vt.filter(Pe=>Pe.deckType==="Preset"):e(Ze),fe,(Pe,Me)=>{var He=Wn(),We={},Ie=a(He);f(()=>{We!==(We=e(Me).id)&&(He.value=(He.__value=e(Me).id)==null?"":e(Me).id),b(Ie,e(Me).name)}),r(Pe,He)});var y=s(Pt,2);{var w=Pe=>{var Me=Qn(),He=H(Me),We=a(He),Ie=a(We),bt=s(We),gt=a(bt),kt=a(gt);f(()=>{e(re),Bt(()=>{})}),_e(kt,5,()=>Zt,fe,(vt,tt)=>{var dt=zn(),Mt={},Ue=a(dt);f(()=>{Mt!==(Mt=e(tt).id)&&(dt.value=(dt.__value=e(tt).id)==null?"":e(tt).id),b(Ue,e(tt).name)}),r(vt,dt)});var jt=s(kt,2),Ht=a(jt),Lt=s(He,2);{var St=vt=>{var tt=Xn(),dt=a(tt),Mt=a(dt),Ue=s(dt),Oe=a(Ue),Qe=a(Oe);f(()=>{e(re),Bt(()=>{e(Ze)})});var Se=a(Qe);Se.value=(Se.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Je=s(Se);_e(Je,1,()=>e(Ze),fe,(at,rt)=>{var Ct=Vn(),Ma={},Qa=a(Ct);f(()=>{Ma!==(Ma=e(rt).id)&&(Ct.value=(Ct.__value=e(rt).id)==null?"":e(rt).id),b(Qa,e(rt).name)}),r(at,Ct)}),oe(3,Mt,()=>be,()=>({duration:200})),oe(3,dt,()=>be,()=>({duration:200})),It(Qe,()=>e(re).previousNpcDeckId,at=>e(re).previousNpcDeckId=at),oe(3,Oe,()=>be,()=>({duration:200})),oe(3,Ue,()=>be,()=>({duration:200})),oe(3,tt,()=>be,()=>({duration:200})),r(vt,tt)};C(Lt,vt=>{var tt;((tt=e(T))==null?void 0:tt.npcType)!=="FtkChallenge"&&vt(St)})}var yt=s(Lt,2),wt=a(yt),At=a(wt),Yt=s(wt),Jt=a(Yt),zt=a(Jt);f(()=>{e(re),Bt(()=>{})}),_e(zt,5,()=>Gt(Ha),fe,(vt,tt)=>{var dt=Gn(),Mt={},Ue=a(dt);f(()=>{Mt!==(Mt=e(tt))&&(dt.value=(dt.__value=e(tt))==null?"":e(tt)),b(Ue,Ha[e(tt)])}),r(vt,dt)}),f(()=>b(Ht,`※${e(S)??""}`)),oe(3,Ie,()=>be,()=>({duration:200})),oe(3,We,()=>be,()=>({duration:200})),z("change",kt,Ae),It(kt,()=>e(re).previousNpcId,vt=>e(re).previousNpcId=vt),oe(3,gt,()=>be,()=>({duration:200})),oe(3,bt,()=>be,()=>({duration:200})),oe(3,He,()=>be,()=>({duration:200})),oe(3,At,()=>be,()=>({duration:200})),oe(3,wt,()=>be,()=>({duration:200})),It(zt,()=>e(re).previousStartMode,vt=>e(re).previousStartMode=vt),oe(3,Jt,()=>be,()=>({duration:200})),oe(3,Yt,()=>be,()=>({duration:200})),oe(3,yt,()=>be,()=>({duration:200})),r(Pe,Me)},I=Pe=>{var Me=ke(),He=H(Me);{var We=Ie=>{var bt=Zn(),gt=a(bt),kt=a(gt),jt=s(gt),Ht=a(jt),Lt=a(Ht);f(()=>{e(re),Bt(()=>{})}),_e(Lt,5,()=>Sr,fe,(St,yt)=>{var wt=Jn(),At={},Yt=a(wt);f(()=>{At!==(At=e(yt))&&(wt.value=(wt.__value=e(yt))==null?"":e(yt)),b(Yt,e(yt))}),r(St,wt)}),oe(3,kt,()=>be,()=>({duration:200})),oe(3,gt,()=>be,()=>({duration:200})),It(Lt,()=>e(re).previousDifficulty,St=>e(re).previousDifficulty=St),oe(3,Ht,()=>be,()=>({duration:200})),oe(3,jt,()=>be,()=>({duration:200})),oe(3,bt,()=>be,()=>({duration:200})),r(Ie,bt)};C(He,Ie=>{e(o)==="FtkChallenge"&&Ie(We)},!0)}r(Pe,Me)};C(y,Pe=>{e(o)==="Free"?Pe(w):Pe(I,!1)})}var ge=s(y,2),Ye=a(ge),Fe=a(Ye),$e=a(Fe);oe(3,ft,()=>be,()=>({duration:200})),oe(3,pt,()=>be,()=>({duration:200})),oe(3,Rt,()=>be,()=>({duration:200})),oe(3,Dt,()=>be,()=>({duration:200})),oe(3,st,()=>be,()=>({duration:200})),oe(3,sa,()=>be,()=>({duration:200})),oe(3,Kt,()=>be,()=>({duration:200})),It(Et,()=>e(E),Pe=>x(E,Pe)),oe(3,$t,()=>be,()=>({duration:200})),oe(3,Wt,()=>be,()=>({duration:200})),oe(3,Pt,()=>be,()=>({duration:200})),z("click",$e,j),oe(3,Fe,()=>be,()=>({duration:200})),r(Xe,et)});var Ee=s(we,2);{var Ve=Xe=>{var Ze=al(),et=a(Ze),st=a(et),pt=a(st);z("click",pt,ce),oe(3,st,()=>be,()=>({duration:200})),oe(3,et,()=>be,()=>({duration:200})),oe(3,Ze,()=>be,()=>({duration:200})),r(Xe,Ze)};C(Ee,Xe=>{e(o)==="Free"&&Xe(Ve)})}oe(3,ze,()=>be,()=>({duration:200})),oe(3,Ke,()=>be,()=>({duration:200})),Ft(qe,()=>e(re).name,Xe=>e(re).name=Xe),z("keypress",qe,Te),oe(3,it,()=>be,()=>({duration:200})),oe(3,Ge,()=>be,()=>({duration:200})),oe(3,Ne,()=>be,()=>({duration:200})),r(Be,Re)}),r(W,pe)};C(u,W=>{e(q)==="DeckEdit"?W($):W(Z,!1)},!0)}r(k,v)};C(me,k=>{e(c)?k(se):k(te,!1)})}var R=s(me,2),D=a(R);mt(D,()=>na,k=>{var v=lt("読み込み中");r(k,v)},(k,v)=>{var u=nl(),$=H(u),Z=a($),W=s($,2),pe=a(W);f((ve,ie,ae)=>{b(Z,`公式DB上のカード${ve??""}枚`),b(pe,`実装済カード（効果あり）${ie??""}枚 （効果なし）${ae??""}枚`)},[()=>e(v).knmCount.toLocaleString(),()=>e(v).definitionCount.toLocaleString(),()=>e(v).nonDefinitionCount.toLocaleString()],ne),r(k,u)});var Y=s(R,2),J=a(Y),M=a(J),K=s(J,2),F=a(K),O=s(K,2),X=a(O),ue=s(Y,2);{var xe=k=>{var v=cl(),u=a(v);{var $=re=>{var Re=ke(),Ne=H(Re);{var Ke=Ge=>{var it=ll();r(Ge,it)},ze=Ge=>{var it=ke(),qe=H(it);{var we=Ee=>{var Ve=ol();r(Ee,Ve)};C(qe,Ee=>{e(c).winner.seat==="Above"&&Ee(we)},!0)}r(Ge,it)};C(Ne,Ge=>{e(c).winner.seat==="Below"?Ge(Ke):Ge(ze,!1)})}r(re,Re)},Z=re=>{var Re=dl();r(re,Re)};C(u,re=>{e(c).winner?re($):re(Z,!1)})}var W=s(u,2),pe=a(W),ve=s(W,2);{var ie=re=>{var Re=vl(),Ne=a(Re);f(()=>ot(Ne,"href",`https://x.com/share?url=${B}&text=${e(c).twitterShareText??""}&hashtags=${n}&via=${V}`)),r(re,Re)};C(ve,re=>{e(c).twitterShareText&&re(ie)})}var ae=s(ve,2),Be=a(ae);f(()=>b(pe,e(c).reasonOfEnd)),z("click",Be,De),oe(3,v,()=>Er,()=>({delay:200,duration:200})),r(k,v)};C(ue,k=>{e(c)&&e(c).isEnded&&k(xe)})}f(()=>{b(M,"build at: 20260207_185018"),b(F,Cr.text),b(X,`w:${e(m)??""}px h:${e(p)??""}px`)}),ca("innerWidth",k=>x(m,k)),ca("innerHeight",k=>x(p,k)),z("click",Q,De),r(_,N),ut()}Mr(ul,{target:document.getElementById("app")});
