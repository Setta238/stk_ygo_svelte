var Ia=Object.defineProperty;var ha=d=>{throw TypeError(d)};var Fa=(d,s,t)=>s in d?Ia(d,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[s]=t;var tt=(d,s,t)=>Fa(d,typeof s!="symbol"?s+"":s,t),ya=(d,s,t)=>s.has(d)||ha("Cannot "+t);var nt=(d,s,t)=>(ya(d,s,"read from private field"),t?t.call(d):s.get(d)),It=(d,s,t)=>s.has(d)?ha("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(d):s.set(d,t),ra=(d,s,t,v)=>(ya(d,s,"write to private field"),v?v.call(d,t):s.set(d,t),t);import{s as xa,r as Ha,a as $,b as Oa,l as Ra,g as e,d as Ua,p as lt,c as We,m as ye,i as vt,t as o,e as a,f as y,h as p,j as pe,k as qe,n as ft,o as be,q as r,u as dt,v as je,D as Wa,w as Me,x as L,y as i,z as se,A as Bt,B as te,C as oe,E as b,F as Ka,G as at,H as la,I as za,J as Va,K as At,L as ot,M as Ft,N as qa,O as va,P as Qt,Q as da,R as Jt,S as ca,T as Zt,U as ea,V as Ga,W as Xa,X as Qa,Y as Ja,Z as Za,_ as er,$ as tr,a0 as zt,a1 as Vt,a2 as ia,a3 as La,a4 as ar,a5 as rr,a6 as ir,a7 as sr,a8 as nr,a9 as yt,aa as or,ab as lr,ac as vr,ad as ka,ae as wa,af as Da,ag as Ca,ah as $a,ai as Sa,aj as Lt,ak as Nt,al as St,am as jt,an as dr,ao as cr,ap as Ma,aq as qt,ar as Et,as as _r,at as ur,au as fr,av as pr,aw as Ta,ax as gr,ay as br}from"../chunk/entity_proc_20260102_203032.js";import"../chunk/json_20260102_203032.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))v(_);new MutationObserver(_=>{for(const c of _)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&v(u)}).observe(document,{childList:!0,subtree:!0});function t(_){const c={};return _.integrity&&(c.integrity=_.integrity),_.referrerPolicy&&(c.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?c.credentials="include":_.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function v(_){if(_.ep)return;_.ep=!0;const c=t(_);fetch(_.href,c)}})();const mr=d=>d;function _a(d){const s=d-1;return s*s*s+1}function ja(d){const s=typeof d=="string"&&d.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return s?[parseFloat(s[1]),s[2]||"px"]:[d,"px"]}function hr(d,{delay:s=0,duration:t=400,easing:v=mr}={}){const _=+getComputedStyle(d).opacity;return{delay:s,duration:t,easing:v,css:c=>`opacity: ${c*_}`}}function yr(d,{delay:s=0,duration:t=400,easing:v=_a,x:_=0,y:c=0,opacity:u=0}={}){const l=getComputedStyle(d),Y=+l.opacity,V=l.transform==="none"?"":l.transform,x=Y*(1-u),[n,z]=ja(_),[N,P]=ja(c);return{delay:s,duration:t,easing:v,css:(O,U)=>`
			transform: ${V} translate(${(1-O)*n}${z}, ${(1-O)*N}${P});
			opacity: ${Y-x*U}`}}function fe(d,{delay:s=0,duration:t=400,easing:v=_a,axis:_="y"}={}){const c=getComputedStyle(d),u=+c.opacity,l=_==="y"?"height":"width",Y=parseFloat(c[l]),V=_==="y"?["top","bottom"]:["left","right"],x=V.map(B=>`${B[0].toUpperCase()}${B.slice(1)}`),n=parseFloat(c[`padding${x[0]}`]),z=parseFloat(c[`padding${x[1]}`]),N=parseFloat(c[`margin${x[0]}`]),P=parseFloat(c[`margin${x[1]}`]),O=parseFloat(c[`border${x[0]}Width`]),U=parseFloat(c[`border${x[1]}Width`]);return{delay:s,duration:t,easing:v,css:B=>`overflow: hidden;opacity: ${Math.min(B*20,1)*u};${l}: ${B*Y}px;padding-${V[0]}: ${B*n}px;padding-${V[1]}: ${B*z}px;margin-${V[0]}: ${B*N}px;margin-${V[1]}: ${B*P}px;border-${V[0]}-width: ${B*O}px;border-${V[1]}-width: ${B*U}px;min-${l}: 0`}}function Ea(d,s){for(const t in s)d[t]=s[t];return d}function xr({fallback:d,...s}){const t=new Map,v=new Map;function _(u,l,Y){const{delay:V=0,duration:x=C=>Math.sqrt(C)*30,easing:n=_a}=Ea(Ea({},s),Y),z=u.getBoundingClientRect(),N=l.getBoundingClientRect(),P=z.left-N.left,O=z.top-N.top,U=z.width/N.width,B=z.height/N.height,re=Math.sqrt(P*P+O*O),ne=getComputedStyle(l),Te=ne.transform==="none"?"":ne.transform,S=+ne.opacity;return{delay:V,duration:typeof x=="function"?x(re):x,easing:n,css:(C,X)=>`
			   opacity: ${C*S};
			   transform-origin: top left;
			   transform: ${Te} translate(${X*P}px,${X*O}px) scale(${C+(1-C)*U}, ${C+(1-C)*B});
		   `}}function c(u,l,Y){return(V,x)=>(u.set(x.key,V),()=>{if(l.has(x.key)){const n=l.get(x.key);return l.delete(x.key),_(n,V,x)}return u.delete(x.key),d&&d(V,x,Y)})}return[c(v,t,!1),c(t,v,!0)]}function Ba(d){return Object.prototype.toString.call(d)==="[object Date]"}function kr(d){return d}function sa(d){const s=d-1;return s*s*s+1}function na(d,s){if(d===s||d!==d)return()=>d;const t=typeof d;if(t!==typeof s||Array.isArray(d)!==Array.isArray(s))throw new Error("Cannot interpolate values of different type");if(Array.isArray(d)){const v=s.map((_,c)=>na(d[c],_));return _=>v.map(c=>c(_))}if(t==="object"){if(!d||!s)throw new Error("Object cannot be null");if(Ba(d)&&Ba(s)){const c=d.getTime(),l=s.getTime()-c;return Y=>new Date(c+Y*l)}const v=Object.keys(s),_={};return v.forEach(c=>{_[c]=na(d[c],s[c])}),c=>{const u={};return v.forEach(l=>{u[l]=_[l](c)}),u}}if(t==="number"){const v=s-d;return _=>d+_*v}return()=>s}var Dt,Pt,Ht,Yt;const ua=class ua{constructor(s,t={}){It(this,Dt,xa(void 0));It(this,Pt,xa(void 0));It(this,Ht);It(this,Yt,null);nt(this,Dt).v=nt(this,Pt).v=s,ra(this,Ht,t)}static of(s,t){const v=new ua(s(),t);return Ha(()=>{v.set(s())}),v}set(s,t){var n;$(nt(this,Pt),s);let{delay:v=0,duration:_=400,easing:c=kr,interpolate:u=na}={...nt(this,Ht),...t};if(_===0)return(n=nt(this,Yt))==null||n.abort(),$(nt(this,Dt),s),Promise.resolve();const l=Oa.now()+v;let Y,V=!1,x=nt(this,Yt);return ra(this,Yt,Ra(z=>{if(z<l)return!0;if(!V){V=!0;const P=nt(this,Dt).v;Y=u(P,s),typeof _=="function"&&(_=_(P,s)),x==null||x.abort()}const N=z-l;return N>_?($(nt(this,Dt),s),!1):($(nt(this,Dt),Y(c(N/_))),!0)})),nt(this,Yt).promise}get current(){return e(nt(this,Dt))}get target(){return e(nt(this,Pt))}set target(s){this.set(s)}};Dt=new WeakMap,Pt=new WeakMap,Ht=new WeakMap,Yt=new WeakMap;let Gt=ua;var wr=o('<div class="phase_display svelte-1ycsdg6"><span class="svelte-1ycsdg6"> </span> </div>'),Dr=o('<div class="lifepoint_display svelte-1ycsdg6"><div class="svelte-1ycsdg6"> </div> <div class="svelte-1ycsdg6"> </div></div>'),Cr=(d,s,t)=>s(e(t)),$r=o('<div class="svelte-1ycsdg6"><button class="phase_button svelte-1ycsdg6"> </button></div>'),Sr=o("<div><!></div>"),Mr=o('<div class="svelte-1ycsdg6"><!></div>'),Tr=o("<div><!></div>"),jr=o('<div class="config_button_wrapper svelte-1ycsdg6"><button id="config_button" class="svelte-1ycsdg6">⚙</button></div>'),Er=o("<!> <!> <!> <!>",1),Br=o('<div style="position: absolute;" class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Ar=o('<div style="position: absolute; top:0rem" class="svelte-1ycsdg6">｛効果対象｝</div>'),Yr=o('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Ur=o(" <!> 】",1),qr=o('<div style="position: absolute; bottom:0rem" class="svelte-1ycsdg6"> <!></div>'),Lr=o("<!> <!>",1),Nr=o('<div class="badge svelte-1ycsdg6"> </div>'),Pr=o('<div class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Ir=o("<!> <!> <!> <!>",1),Fr=o('<td><div role="listitem"><!></div></td>');function Hr(d,s){lt(s,!1);let t=We(s,"view",12),v=We(s,"row",8),_=We(s,"column",8),c=We(s,"selectedEntities",28,()=>[]),u=We(s,"selectedCells",28,()=>[]),l=ye(t().getCell(v(),_())),Y=ye(new Gt(e(l).field.duel.duelists.Above.lp,{duration:400,easing:sa})),V=ye(new Gt(e(l).field.duel.duelists.Below.lp,{duration:400,easing:sa}));const x=()=>{$(l,t().getCell(v(),_())),je(Y,e(Y).target=e(l).field.duel.duelists.Above.lp),je(V,e(V).target=e(l).field.duel.duelists.Below.lp)};e(l).onUpdate.append(x),t().onDuelUpdate.append(x),t().modalController.onUpdate.append(x);let n,z=ye([]),N=()=>console.log("hoge"),P,O=ye([]),U=ye(!1),B=ye(!1),re=!1;const ne=D=>{var F,J;$(le,[]),c().reset(),n=D.activator,N=D.resolve,$(z,D.dummyActionInfos),$(O,D.chainBlockInfos.flatMap(ae=>ae.selectedEntities).getDistinct()),P=D.entitiesChoices,$(U,!1),$(B,((F=D.cellsChoices)==null?void 0:F.selectables.includes(e(l)))??!1),re=e(B)&&((J=D.cellsChoices)==null?void 0:J.qty)===1,x()};t().onWaitStart.append(ne);const Te=()=>{n=void 0,$(z,[]),N=()=>{console.log("hoge")},P=void 0,$(O,[]),$(U,!1),$(B,!1),re=!1};t().onWaitEnd.append(Te);let S=ye(!1),C=[];const X=D=>{C=D.filter(F=>F.dests.includes(e(l))),$(S,C.length>0),x()},ce=()=>{C=[],$(S,!1),x()};t().onDragStart.append(X),t().onDragEnd.append(ce);const[$e,ie]=Xi;let le=ye([]);const Ae=D=>{if(n=void 0,e(l)===D.to||e(l).entities.includes(D.entity)){$(le,[...e(le),D]);const F=D.resolve;$(l,e(l)),setTimeout(()=>{$(le,e(le).filter(J=>J!==D)),D.count++,D.count>1&&F()},600)}};t().onAnimation.append(Ae);const E=D=>{N({phaseChange:D})},I=()=>e(l).isStackCell&&e(l).entities.flatMap(D=>D.actions).filter(D=>e(z).map(F=>F.action.seq).some(F=>F===D.seq)).length>0,G=D=>{var F;if(((F=D.target)==null?void 0:F.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),re)N({selectedCells:[e(l)]});else if(e(B))$(U,!e(U)),u(e(U)?[...u(),e(l)]:u().filter(J=>J!==e(l)));else if(e(l).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(l),!0),t().requireUpdate();const J=e(l).entities.flatMap(m=>m.actions).map(m=>m.seq),ae=e(z).filter(m=>J.includes(m.action.seq));if(ae.length){if(!n)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:n,dummyActionInfos:ae,cancelable:!0}).then(m=>{m&&N({actionInfo:m})});return}}t().requireUpdate(),console.info(e(l),ue(...e(l).visibleEntities))},ve=D=>{D.preventDefault(),D.dataTransfer&&(D.dataTransfer.dropEffect="move")},xe=D=>{D.preventDefault(),console.info("drop",D,e(S),C),D.dataTransfer&&(D.dataTransfer.dropEffect="move");try{if(e(S)&&C){if(C.length===1){const F=C[0];N({actionInfo:{...F,dest:e(l)}})}else if(C.length>1){if(!n)throw new Wa("想定されない状態");e(l).field.duel.view.modalController.terminateAll(),e(l).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:n,dummyActionInfos:C.map(F=>({...F,dest:e(l)})),cancelable:!1}).then(F=>{N({actionInfo:F})})}}}finally{t().removeDraggingActions()}},ue=(...D)=>{if(t().waitMode==="Animation")return"Disabled";if(P&&P.selectables.find(J=>D.find(ae=>J===ae)))return"Selectable";if(!e(z)||e(z).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(J=>J.state==="Shown"))return"Disabled";const F=e(z).filter(J=>D.includes(J.action.entity));return F.length===0?"Disabled":e(l).isStackCell||F[0].action.entity!==D[0]?"Clickable":F.some(J=>J.dests.length)?"Draggable":"Clickable"};vt();var A=Fr(),h=a(A);h.__click=G;var q=a(h);{var R=D=>{var F=Me(),J=L(F);{var ae=m=>{var j=Me(),T=L(j);{var W=k=>{var Z=wr(),ke=a(Z),Ce=a(ke),we=i(ke,1,!0);p((_e,M)=>{b(Ce,_e),b(we,M)},[()=>String(e(l).field.duel.clock.turn).padStart(2,"0"),()=>e(l).field.duel.phase.toUpperCase()],pe),r(k,Z)},w=k=>{var Z=Me(),ke=L(Z);{var Ce=_e=>{var M=Dr(),H=a(M),De=a(H),Se=i(H,2),He=a(Se);p((Le,Ye)=>{b(De,Le),b(He,Ye)},[()=>Math.floor(e(Y).current),()=>Math.floor(e(V).current)],pe),r(_e,M)},we=_e=>{var M=Me(),H=L(M);{var De=Se=>{var He=Me(),Le=L(He);{var Ye=Pe=>{var Ge=Me(),Ee=L(Ge);{var me=f=>{var g=Me(),K=L(g);se(K,1,()=>t().duel.nextPhaseList,oe,(de,ee)=>{var he=$r(),ge=a(he);ge.__click=[Cr,E,ee];var Ke=a(ge);p(Be=>b(Ke,Be),[()=>e(ee).toUpperCase()],pe),r(de,he)}),r(f,g)};y(Ee,f=>{t().duel.isEnded||f(me)})}r(Pe,Ge)};y(Le,Pe=>{t().waitMode==="Free"&&Pe(Ye)})}r(Se,He)};y(H,Se=>{e(l).column===5&&Se(De)},!0)}r(_e,M)};y(ke,_e=>{e(l).column===3?_e(Ce):_e(we,!1)},!0)}r(k,Z)};y(T,k=>{e(l).column===1?k(W):k(w,!1)})}r(m,j)};y(J,m=>{e(l).row===3&&m(ae)})}r(D,F)},Q=D=>{var F=Me(),J=L(F);{var ae=j=>{var T=Er();const W=pe(()=>e(le).find(M=>M.to===e(l)));var w=L(T);{var k=M=>{var H=Sr(),De=a(H);Bt(De,{get entity(){return e(W).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),p(()=>qe(H,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),te(1,H,()=>ie,()=>({key:e(W).entity.seq})),r(M,H)};y(w,M=>{e(W)&&e(W).index==="Top"&&M(k)})}var Z=i(w,2);se(Z,1,()=>e(l).visibleEntities,oe,(M,H)=>{var De=Me(),Se=L(De);{var He=Le=>{var Ye=Mr(),Pe=a(Ye);const Ge=pe(()=>ue(e(H))),Ee=pe(()=>e(z).filter(me=>me.action.entity===e(H)));Bt(Pe,{get entity(){return e(H)},get state(){return e(Ge)},get dummyActionInfos(){return e(Ee)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(me){c(me)},$$legacy:!0}),te(2,Ye,()=>$e,()=>({key:e(H).seq})),r(Le,Ye)};y(Se,Le=>{e(le).every(Ye=>Ye.entity.seq!==e(H).seq)&&Le(He)})}r(M,De)});var ke=i(Z,2);{var Ce=M=>{var H=Tr(),De=a(H);Bt(De,{get entity(){return e(W).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),p(()=>qe(H,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),te(1,H,()=>ie,()=>({key:e(W).entity.seq})),r(M,H)};y(ke,M=>{e(W)&&e(W).index!=="Top"&&M(Ce)})}var we=i(ke,2);{var _e=M=>{var H=jr();r(M,H)};y(we,M=>{e(l).owner.seat==="Below"&&M(_e)})}r(j,T)},m=j=>{var T=Ir();const W=pe(()=>e(le).find(H=>H.to===e(l)));var w=L(T);{var k=H=>{var De=Br(),Se=a(De);Bt(Se,{get entity(){return e(W).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),te(1,De,()=>ie,()=>({key:e(W).entity.seq})),r(H,De)};y(w,H=>{e(W)&&e(W).index!=="Top"&&H(k)})}var Z=i(w,2);{var ke=H=>{var De=Lr(),Se=L(De);se(Se,1,()=>e(l).visibleEntities.map((Ye,Pe)=>({index:Pe,entity:Ye})).toReversed(),oe,(Ye,Pe)=>{var Ge=Me(),Ee=L(Ge);{var me=f=>{var g=Yr();const K=pe(()=>!e(l).isStackCell&&e(Pe).index===0?ue(...e(l).visibleEntities):void 0);var de=L(g);{var ee=Be=>{var ze=Ar();r(Be,ze)};y(de,Be=>{e(O).includes(e(Pe).entity)&&Be(ee)})}var he=i(de,2),ge=a(he);const Ke=pe(()=>e(Pe).index===0?e(z).filter(Be=>e(l).visibleEntities.includes(Be.action.entity)):void 0);Bt(ge,{get entity(){return e(Pe).entity},get state(){return e(K)},get dummyActionInfos(){return e(Ke)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(Be){c(Be)},$$legacy:!0}),p(()=>qe(he,`duel_card_wrapper ${(e(Pe).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1ycsdg6`)),te(2,he,()=>$e,()=>({key:e(Pe).entity.seq})),r(f,g)};y(Ee,f=>{e(le).every(g=>g.entity.seq!==e(Pe).entity.seq)&&f(me)})}r(Ye,Ge)});var He=i(Se,2);{var Le=Ye=>{var Pe=qr(),Ge=a(Pe),Ee=i(Ge);se(Ee,1,()=>la(e(l).visibleEntities[0].status.maxCounterQty),oe,(me,f)=>{var g=Ur(),K=L(g),de=i(K);{var ee=he=>{var ge=at();p(()=>b(ge,`/${e(l).visibleEntities[0].status.maxCounterQty[e(f)]??""}`)),r(he,ge)};y(de,he=>{(e(l).visibleEntities[0].status.maxCounterQty[e(f)]??9999)<100&&he(ee)})}p((he,ge)=>b(K,`【
              ${he??""}${ge??""} `),[()=>Ka(e(f)),()=>e(l).visibleEntities[0].counterHolder.getQty(e(f))],pe),r(me,g)}),p(()=>b(Ge,`【${e(l).visibleEntities[0].battlePositionName??""}】 `)),r(Ye,Pe)};y(He,Ye=>{e(l).visibleEntities[0].battlePosition&&Ye(Le)})}r(H,De)};y(Z,H=>{e(l).visibleEntities.length>0&&H(ke)})}var Ce=i(Z,2);{var we=H=>{var De=Nr(),Se=a(De);p(()=>b(Se,e(l).visibleEntities.length)),r(H,De)};y(Ce,H=>{e(l).isStackCell&&H(we)})}var _e=i(Ce,2);{var M=H=>{var De=Pr(),Se=a(De);Bt(Se,{get entity(){return e(W).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),te(1,De,()=>ie,()=>({key:e(W).entity.seq})),r(H,De)};y(_e,H=>{e(W)&&e(W).index==="Top"&&H(M)})}r(j,T)};y(J,j=>{e(l).cellType==="Hand"?j(ae):j(m,!1)},!0)}r(D,F)};y(q,D=>{e(l).isDisabledCell?D(R):D(Q,!1)})}p(D=>{qe(A,`${`duel_field_cell duel_field_cell_${e(l).cellType} ${e(l).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1ycsdg6`),ft(A,"colspan",e(l).cellType==="Hand"?7:1),qe(h,`${D??""} svelte-1ycsdg6`)},[()=>`duel_field_cell_inner_box ${e(l).cellType} ${e(S)?"can_accept_drop":""} ${I()?"can_action":""} ${e(U)?"is_selected":e(B)?"is_selectable":""} `],pe),be("dragover",h,ve),be("drop",h,xe),r(d,A),dt()}Ua(["click"]);const Or=(d,s,t=void 0,v="!!!circular reference!!!")=>{let _=[];return JSON.stringify(d,(c,u)=>{if(typeof u=="object"){if(_.indexOf(u)>-1)return v;_.push(u)}let l=u;if(s&&(l=s(c,u)),typeof l=="function")return l.toString();if(l!==u&&typeof l=="object"){if(_.indexOf(l)>-1)return v;_.push(l)}return l},t)};var Rr=o('<div class="title svelte-14z6bdh"> </div>'),Wr=o('<div class="title svelte-14z6bdh"> </div>'),Kr=o('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),zr=o('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),Vr=o("<div><!> <!></div>"),Gr=o('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),Xr=o("<div><!> <!></div>"),Qr=o("<div><!> <!></div>"),Jr=o('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function Zr(d,s){lt(s,!1);let t=ye(void 0),v=We(s,"log",8),_,c=ye([]);const u=()=>{const x=((_==null?void 0:_.seq)??-1)+1;v().records.slice(x).forEach(n=>{if(!_){$(c,[[[[n]]]]),_=n;return}if(!e(c)[n.clock.turn]){je(c,e(c)[n.clock.turn]=[[[n]]]),_=n;return}if(!e(c)[n.clock.turn][n.clock.phaseSeq]){je(c,e(c)[n.clock.turn][n.clock.phaseSeq]=[[n]]),_=n;return}if(_.clock.chainSeq===n.clock.chainSeq&&_.clock.chainBlockSeq===n.clock.chainBlockSeq&&_.duelist===n.duelist){e(c)[n.clock.turn][n.clock.phaseSeq].slice(-1)[0].push(n),_=n;return}e(c)[n.clock.turn][n.clock.phaseSeq].push([n]),_=n}),$(c,e(c)),za().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};v().onUpdate.append(u),v().duel.view.onDuelUpdate.append(u),u(),vt();var l=Me(),Y=L(l);{var V=x=>{var n=Jr(),z=i(a(n),2);se(z,5,()=>e(c),oe,(N,P)=>{var O=Qr(),U=a(O);{var B=ne=>{var Te=Rr(),S=a(Te);p(()=>b(S,`ターン：${e(P)[0][0][0].clock.turn??""}`)),r(ne,Te)};y(U,ne=>{e(P)[0][0][0].clock.turn>0&&ne(B)})}var re=i(U,2);se(re,1,()=>e(P),oe,(ne,Te)=>{var S=Xr(),C=a(S);{var X=$e=>{var ie=Wr(),le=a(ie);p(()=>b(le,e(Te)[0][0].clock.period.name)),r($e,ie)};y(C,$e=>{e(Te)[0][0].clock.turn>0&&$e(X)})}var ce=i(C,2);se(ce,1,()=>e(Te),oe,($e,ie)=>{var le=Gr();const Ae=pe(()=>{var A;return((A=e(ie).find(h=>h.chainNumber!==void 0))==null?void 0:A.chainNumber)??0});var E=a(le),I=a(E),G=a(I),ve=i(I,2);{var xe=A=>{var h=Kr(),q=a(h);p(()=>b(q,`チェーン：${e(Ae)??""}`)),r(A,h)};y(ve,A=>{e(Ae)&&A(xe)})}var ue=i(E,2);se(ue,1,()=>e(ie),oe,(A,h)=>{var q=Vr(),R=a(q);{var Q=ae=>{var m=at();p(()=>b(m,e(h).text)),r(ae,m)},D=ae=>{var m=Me(),j=L(m);{var T=w=>{var k=at();p((Z,ke,Ce)=>b(k,`移動：${Z??""} ${ke??""} ⇒ ${Ce??""}`),[()=>{var Z;return(Z=e(h).mainEntity)==null?void 0:Z.toString()},()=>{var Z;return(Z=e(h).from)==null?void 0:Z.toString()},()=>{var Z;return(Z=e(h).to)==null?void 0:Z.toString()}],pe),r(w,k)},W=w=>{var k=Me(),Z=L(k);{var ke=we=>{var _e=at();p((M,H)=>b(_e,`生成：${M??""} void ⇒ ${H??""}`),[()=>{var M;return(M=e(h).mainEntity)==null?void 0:M.toString()},()=>{var M;return(M=e(h).to)==null?void 0:M.toString()}],pe),r(we,_e)},Ce=we=>{var _e=Me(),M=L(_e);{var H=Se=>{var He=at();p((Le,Ye)=>b(He,`消滅：${Le??""} ${Ye??""} ⇒ void`),[()=>{var Le;return(Le=e(h).mainEntity)==null?void 0:Le.toString()},()=>{var Le;return(Le=e(h).from)==null?void 0:Le.toString()}],pe),r(Se,He)},De=Se=>{var He=at();p(()=>b(He,e(h).text)),r(Se,He)};y(M,Se=>{e(h).type==="EntityDisappear"?Se(H):Se(De,!1)},!0)}r(we,_e)};y(Z,we=>{e(h).type==="EntityAppear"?we(ke):we(Ce,!1)},!0)}r(w,k)};y(j,w=>{e(h).type==="EntityMove"?w(T):w(W,!1)},!0)}r(ae,m)};y(R,ae=>{e(h).type==="ChainBlockHeader"?ae(Q):ae(D,!1)})}var F=i(R,2);{var J=ae=>{var m=zr(),j=a(m);p(T=>ft(j,"href",T),[()=>window.URL.createObjectURL(new Blob([Or(e(h).error,(T,W)=>["pool","bundles","duel"].includes(T)||typeof W=="function"?void 0:W,4)],{type:"text/plain"}))],pe),r(ae,m)};y(F,ae=>{e(h).error&&ae(J)})}p(ae=>qe(q,`duel_log_record duel_log_record_${ae??""} svelte-14z6bdh`),[()=>e(h).type.toSnakeCase()],pe),r(A,q)}),p(()=>{var A,h,q;qe(le,`duel_log_block_duelist duel_log_block_duelist_${((A=e(ie)[0].duelist)==null?void 0:A.seat)??"system"} svelte-14z6bdh`),qe(I,`duelist ${((h=e(ie)[0].duelist)==null?void 0:h.seat)??""} svelte-14z6bdh`),b(G,((q=e(ie)[0].duelist)==null?void 0:q.profile.name)||"SYSTEM")}),r($e,le)}),p(()=>qe(S,`duel_log_block_phase duel_log_block_phase_${e(Te)[0][0].clock.period.key??""} svelte-14z6bdh`)),r(ne,S)}),p(()=>qe(O,`duel_log_block_turn duel_log_block_turn_${e(P)[0][0][0].clock.turn??""} svelte-14z6bdh`)),r(N,O)}),Va(z,N=>$(t,N),()=>e(t)),r(x,n)};y(Y,x=>{(v().duel.view.infoBoardState==="Log"||v().duel.view.infoBoardState==="Default")&&x(V)})}r(d,l),dt()}var ei=o("<div><div> </div> <div> </div></div>");function Aa(d,s){lt(s,!1);let t=We(s,"duelist",12),v=ye(0),_=ye();const c=async()=>{const z=t().lp-e(v);if(!e(_)||Math.abs(z)<10){$(v,t().lp),e(_)&&(e(_)(),$(_,void 0));return}$(v,e(v)+Math.floor(Math.random()*z)),await At(100),c()},u=()=>{t(t()),!e(_)&&t().lp!==e(v)&&new Promise(z=>{$(_,z),Math.abs(t().lp-e(v)),c()})};t().duel.log.onUpdate.append(u),c(),vt();var l=ei(),Y=a(l),V=a(Y),x=i(Y,2),n=a(x);p(z=>{qe(l,`duelist duelist_${z??""} svelte-1sy3trd`),qe(Y,`duelist_name duelist_${z??""}_name svelte-1sy3trd`),b(V,t().profile.name),qe(x,`duelist_lp ${(e(_)?"vibration":"")??""} svelte-1sy3trd`),b(n,e(v))},[()=>t().seat.toLowerCase()],pe),r(d,l),dt()}const ti=(d,s,t)=>(s(s()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),ai=(d,s,t)=>(s(s()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var ri=o('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),ii=o('<div></div> <div class="svelte-1uevs9j"> </div>',1),si=o("<div> </div>"),ni=o("<div> </div>"),oi=o('<div class="duel_card_info_row svelte-1uevs9j"><!> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),li=o('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),vi=o('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),di=o("<!> <!>",1),ci=o('<pre class="description svelte-1uevs9j"> </pre>'),_i=o('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),ui=o('<pre class="description svelte-1uevs9j"> </pre>'),fi=o('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),pi=o('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),gi=o('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),bi=o("[ <!> ],",1),mi=o('<div class="svelte-1uevs9j"> <!></div>'),hi=o('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),yi=o('<div class="svelte-1uevs9j"> </div>'),xi=o('<div class="svelte-1uevs9j"> </div>'),ki=o('<div class="svelte-1uevs9j"> </div>'),wi=o('<div class="svelte-1uevs9j"> </div>'),Di=o('<div class="svelte-1uevs9j"> </div>'),Ci=o('<div class="svelte-1uevs9j"> </div>'),$i=o('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Si=o('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Mi=o('<div class="svelte-1uevs9j">※テスト用カードです</div>'),Ti=o('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),ji=o('<div class="duel_card_info_links svelte-1uevs9j"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a> <!></div>'),Ei=o("<!> <!>",1),Bi=o('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Ai(d,s){lt(s,!1);let t=We(s,"entity",8,void 0),v=We(s,"mode",12,"Normal");const _=async()=>{if(!t())return;const x=(await Ft).getCardInfo(t().origin.name);if(x)return x.cardId!==void 0&&!x.description&&!x.pendulumDescription&&await qa([x.cardId]),x},c=()=>t()&&t().entityType==="Card"&&(t().origin.cardId??!1)?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t().origin.cardId}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:"";vt();var u=Me(),l=L(u);{var Y=V=>{var x=Bi();x.__click=[ti,v,t],x.__contextmenu=[ai,v,t];var n=a(x),z=a(n),N=a(z),P=a(N),O=i(z,2),U=a(O),B=a(U),re=i(U,2),ne=a(re),Te=i(O,2);{var S=E=>{var I=di(),G=L(I);{var ve=h=>{var q=ri(),R=a(q),Q=a(R),D=i(R,2),F=a(D);p(()=>{b(Q,`◀ ${t().psL??""}`),b(F,`${t().psR??""} ▶`)}),r(h,q)};y(G,h=>{var q;(q=t().origin.monsterCategories)!=null&&q.includes("Pendulum")&&h(ve)})}var xe=i(G,2);{var ue=h=>{var q=oi(),R=L(q),Q=a(R);se(Q,1,()=>t().attr,oe,(J,ae)=>{var m=ii(),j=L(m),T=i(j,2),W=a(T);p(()=>{qe(j,`monster_attr ${e(ae)??""} svelte-1uevs9j`),b(W,`${va[e(ae)]??""}属性`)}),r(J,m)});var D=i(Q,2);se(D,1,()=>t().types,oe,(J,ae)=>{var m=si(),j=a(m);p(()=>{qe(m,`monster_cat ${e(ae)??""} svelte-1uevs9j`),b(j,`${Qt[e(ae)]??""}${da[e(ae)]??""}族`)}),r(J,m)});var F=i(R,2);se(F,5,()=>t().status.monsterCategories??[],oe,(J,ae)=>{var m=ni(),j=a(m);p(()=>{qe(m,`monster_cat ${e(ae)??""} svelte-1uevs9j`),b(j,`${Jt[e(ae)]??""}${ca[e(ae)]??""}`)}),r(J,m)}),r(h,q)},A=h=>{var q=Me(),R=L(q);{var Q=F=>{var J=li(),ae=i(a(J),2),m=a(ae);p(()=>b(m,`${Zt[t().status.spellCategory]??""}魔法`)),r(F,J)},D=F=>{var J=Me(),ae=L(J);{var m=j=>{var T=vi(),W=i(a(T),2),w=a(W);p(()=>b(w,`${ea[t().status.trapCategory]??""}罠`)),r(j,T)};y(ae,j=>{t().kind==="Trap"&&t().status.trapCategory&&j(m)},!0)}r(F,J)};y(R,F=>{t().kind==="Spell"&&t().status.spellCategory?F(Q):F(D,!1)},!0)}r(h,q)};y(xe,h=>{t().kind==="Monster"?h(ue):h(A,!1)})}r(E,I)};y(Te,E=>{v()!=="Debug"&&E(S)})}var C=i(n,2),X=a(C);{var ce=E=>{var I=fi(),G=L(I);{var ve=A=>{var h=_i(),q=a(h);ot(q,_,R=>{var Q=at('"読み込み中"');r(R,Q)},(R,Q)=>{var D=ci(),F=a(D);p(()=>{var J;return b(F,(J=e(Q))==null?void 0:J.pendulumDescription)}),r(R,D)}),r(A,h)};y(G,A=>{var h;(h=t().status.monsterCategories)!=null&&h.includes("Pendulum")&&A(ve)})}var xe=i(G,2),ue=a(xe);ot(ue,_,A=>{var h=at('"読み込み中"');r(A,h)},(A,h)=>{var q=ui(),R=a(q);p(()=>{var Q;return b(R,(Q=e(h))==null?void 0:Q.description)}),r(A,q)}),r(E,I)},$e=E=>{var I=Me(),G=L(I);{var ve=ue=>{var A=Me(),h=L(A);{var q=R=>{var Q=gi(),D=i(a(Q),2);se(D,5,()=>t().actions,oe,(F,J)=>{var ae=Me();const m=pe(()=>e(J).actionCountUpperBound),j=pe(()=>e(J).actionCount);var T=L(ae);{var W=w=>{var k=pi(),Z=a(k),ke=a(Z),Ce=i(Z,2),we=a(Ce),_e=i(Ce,4),M=a(_e);p(()=>{b(ke,e(J).title),b(we,e(j)),b(M,e(m))}),r(w,k)};y(T,w=>{e(m)!==void 0&&e(j)!==void 0&&w(W)})}r(F,ae)}),r(R,Q)};y(h,R=>{t().actions.some(Q=>Q.actionCountUpperBoundKey)&&R(q)})}r(ue,A)},xe=ue=>{var A=$i(),h=a(A),q=a(h);se(q,0,()=>["info","status"],oe,(Ee,me)=>{var f=hi(),g=L(f),K=a(g),de=i(g,2);se(de,1,()=>Object.entries(t()[me]),oe,(he,ge)=>{let Ke=()=>e(ge)[0],Be=()=>e(ge)[1];var ze=mi(),et=a(ze),rt=i(et);{var mt=Re=>{var Xe=bi(),pt=i(L(Xe));se(pt,1,Be,oe,(Ct,kt)=>{var xt=at();p(Mt=>b(xt,`${Mt??""},`),[()=>e(kt).toString()],pe),r(Ct,xt)}),r(Re,Xe)},Ve=Re=>{var Xe=at();p(pt=>b(Xe,`${pt??""},`),[()=>{var pt;return(pt=Be())==null?void 0:pt.toString()}],pe),r(Re,Xe)};y(rt,Re=>{Array.isArray(Be())?Re(mt):Re(Ve,!1)})}p(()=>b(et,`"${Ke()??""}" : `)),r(he,ze)});var ee=i(de,2);ee.textContent="},",p(()=>b(K,`"${me??""}" :{`)),r(Ee,f)});var R=i(q,2);R.textContent='"actions" :[';var Q=i(R,2);se(Q,1,()=>t().actions,oe,(Ee,me)=>{var f=yi(),g=a(f);p(()=>b(g,`"${e(me).playType??""} ${e(me).title??""}",`)),r(Ee,f)});var D=i(Q,2);D.textContent="],";var F=i(D,2);F.textContent='"substituteEffects" :[';var J=i(F,2);se(J,1,()=>t().substituteEffects,oe,(Ee,me)=>{var f=xi(),g=a(f);p(()=>b(g,`"${e(me).title??""}",`)),r(Ee,f)});var ae=i(J,2);ae.textContent="],";var m=i(ae,2);m.textContent='"continuousEffects" :[';var j=i(m,2);se(j,1,()=>t().continuousEffects,oe,(Ee,me)=>{var f=ki(),g=a(f);p(()=>b(g,`"${e(me).isStarted??""}",`)),r(Ee,f)});var T=i(j,2);T.textContent="],";var W=i(T,2);W.textContent='"procFilters" :[';var w=i(W,2);se(w,1,()=>t().procFilterBundle.operators,oe,(Ee,me)=>{var f=wi(),g=a(f);p(K=>b(g,`"${K??""} ${e(me).title??""} ${e(me).isEffective??""} ",`),[()=>e(me).isSpawnedBy.toString()],pe),r(Ee,f)});var k=i(w,2);k.textContent="],";var Z=i(k,2);Z.textContent='"numericStateOperators" :[';var ke=i(Z,2);se(ke,1,()=>t().numericOprsBundle.operators,oe,(Ee,me)=>{var f=Di(),g=a(f);p(K=>b(g,`"${K??""} ${e(me).title??""} ${e(me).isEffective??""} ${e(me).isContinuous??""} ${e(me).targetState??""} ${e(me).targetStateGen??""} ",`),[()=>e(me).isSpawnedBy.toString()],pe),r(Ee,f)});var Ce=i(ke,2);Ce.textContent="],";var we=i(Ce,2);we.textContent='"stateOperators" :[';var _e=i(we,2);se(_e,1,()=>t().statusOperatorBundle.operators,oe,(Ee,me)=>{var f=Ci(),g=a(f);p(K=>b(g,`"${K??""} ${e(me).title??""} ${e(me).isEffective??""} ",`),[()=>e(me).isSpawnedBy.toString()],pe),r(Ee,f)});var M=i(_e,2);M.textContent="],";var H=i(M,2);H.textContent='"lastMoveLogRecord" :{';var De=i(H,2),Se=a(De),He=i(De,2),Le=a(He),Ye=i(He,2),Pe=a(Ye),Ge=i(Ye,2);Ge.textContent="},",p((Ee,me)=>{b(Se,`"movedBy":"${Ee??""}",`),b(Le,`"movedAs":"${me??""}",`),b(Pe,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var Ee;return(Ee=t().moveLog.latestRecord.movedBy)==null?void 0:Ee.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],pe),r(ue,A)};y(G,ue=>{v()==="Detail"?ue(ve):ue(xe,!1)},!0)}r(E,I)};y(X,E=>{v()==="Normal"?E(ce):E($e,!1)})}var ie=i(C,2),le=a(ie);{var Ae=E=>{var I=Ei(),G=L(I);{var ve=h=>{var q=Si();r(h,q)};y(G,h=>{t().origin.isOldVersion&&h(ve)})}var xe=i(G,2);{var ue=h=>{var q=Mi();r(h,q)},A=h=>{var q=ji(),R=a(q),Q=i(R,2);{var D=F=>{var J=Ti(),ae=a(J);p(m=>{var j;ft(J,"href",m),b(ae,`⇒${((j=t())!=null&&j.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[c],pe),r(F,J)};y(Q,F=>{t()&&t().entityType==="Card"&&F(D)})}p(()=>ft(R,"href",`https://yugioh-wiki.net/index.php?${t().origin.wikiEncodedName}`)),r(h,q)};y(xe,h=>{t().origin.isForTest?h(ue):h(A,!1)})}r(E,I)};y(le,E=>{t()&&E(Ae)})}p((E,I,G)=>{qe(x,`duel_card duel_card_info ${t().origin.kind??""} ${E??""} svelte-1uevs9j`),b(P,t().nm),b(B,I),b(ne,G)},[()=>{var E;return(E=t().origin.monsterCategories)==null?void 0:E.join(" ")},()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],pe),r(V,x)};y(l,V=>{t()&&V(Y)})}r(d,u),dt()}Ua(["click","contextmenu"]);var Yi=o('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),Ui=o('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),qi=o('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Li(d,s){lt(s,!1);let t=We(s,"cell",12);const v=()=>{t(t())},_=Y=>t().cardEntities.filter(V=>V.face===Y);t().field.duel.view.onDuelUpdate.append(v),vt();var c=Me(),u=L(c);{var l=Y=>{var V=qi(),x=a(V),n=a(x),z=a(n),N=i(n,2),P=a(N),O=i(x,2);se(O,4,()=>["FaceUp","FaceDown"],oe,(U,B)=>{var re=Me(),ne=L(re);{var Te=S=>{var C=Ui(),X=a(C),ce=a(X),$e=i(X,2);se($e,1,()=>_(B).toSorted(Ga),oe,(ie,le)=>{var Ae=Yi(),E=a(Ae);const I=pe(()=>t().owner===t().field.duel.duelists.Below);Bt(E,{get entity(){return e(le)},get isVisibleForcibly(){return e(I)},isWideMode:!0,cardActionResolve:void 0}),r(ie,Ae)}),p(()=>b(ce,B==="FaceUp"?"表向き":"裏向き")),r(S,C)};y(ne,S=>{_(B).length&&S(Te)})}r(U,re)}),p(()=>{var U;b(z,(U=t().owner)==null?void 0:U.profile.name),b(P,t().cellType)}),r(Y,V)};y(u,Y=>{t().field.duel.view.infoBoardState==="CellInfo"&&Y(l)})}r(d,c),dt()}var Ni=o('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),Pi=o('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function Ii(d,s){lt(s,!1);let t=We(s,"viewController",8),v=We(s,"userProfile",12);vt();var _=Me(),c=L(_);{var u=l=>{var Y=Pi(),V=i(a(Y),2),x=i(a(V),2);se(x,1,()=>Ja,oe,(n,z)=>{var N=Ni(),P=a(N),O=a(P),U=i(P,2),B=a(U);p(()=>b(B,Xa[e(z)])),Qa(O,()=>v().chainConfig[e(z)],re=>v(v().chainConfig[e(z)]=re,!0)),be("change",O,()=>v().save()),r(n,N)}),r(l,Y)};y(c,l=>{t().infoBoardState==="Config"&&l(u)})}r(d,_),dt()}function Fi(d,{from:s,to:t},v={}){var{delay:_=0,duration:c=C=>Math.sqrt(C)*120,easing:u=sa}=v,l=getComputedStyle(d),Y=l.transform==="none"?"":l.transform,[V,x]=l.transformOrigin.split(" ").map(parseFloat);V/=d.clientWidth,x/=d.clientHeight;var n=Hi(d),z=d.clientWidth/t.width/n,N=d.clientHeight/t.height/n,P=s.left+s.width*V,O=s.top+s.height*x,U=t.left+t.width*V,B=t.top+t.height*x,re=(P-U)*z,ne=(O-B)*N,Te=s.width/t.width,S=s.height/t.height;return{delay:_,duration:typeof c=="function"?c(Math.sqrt(re*re+ne*ne)):c,easing:u,css:(C,X)=>{var ce=X*re,$e=X*ne,ie=C+X*Te,le=C+X*S;return`transform: ${Y} translate(${ce}px, ${$e}px) scale(${ie}, ${le});`}}}function Hi(d){if("currentCSSZoom"in d)return d.currentCSSZoom;for(var s=d,t=1;s!==null;)t*=+getComputedStyle(s).zoom,s=s.parentElement;return t}var Oi=o('<div class="chain_number svelte-lqu21u"> </div>'),Ri=o('<div class="duel_card_row svelte-lqu21u"> </div>'),Wi=o('<div class="appendix svelte-lqu21u"> </div>'),Ki=o('<div class="appendix_wrapper svelte-lqu21u"></div>'),zi=o('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),Vi=o("<div></div>");function Gi(d,s){lt(s,!1);let t=We(s,"duel",8),v=We(s,"position",8,"left");const _=-100,c=()=>v()==="left"?-100:100;let u=ye([]),l=Promise.resolve(),Y=Promise.resolve();const V=1e3,x=500,n=400,z=P=>{const O={...P};O.isKnown=P.chainBlockInfo.action.entity.controller.duelistType==="Player"||P.chainBlockInfo.action.entity.face==="FaceUp",O.chainBlockInfo.onStateChange.append(U=>{if(U==="done"||U==="failed"||U==="negated")return l=l.then(async()=>{const B=new Date().getTime()-O.chainBlockInfo.wasSpawnedAt.getTime();B<V&&await At(V-B),$(u,e(u).filter(re=>re.seq!==O.seq)),await At(x+n)}).then(),"RemoveMe";$(u,e(u))}),Y=Y.then(async()=>{$(u,[O,...e(u)].sort((U,B)=>Za.isSameChain(U.clock,B.clock)&&U.chainBlockInfo.action.isWithChainBlock&&B.chainBlockInfo.action.isWithChainBlock?B.clock.totalProcSeq-U.clock.totalProcSeq:U.clock.totalProcSeq-B.clock.totalProcSeq)),await At(300)}),l=l.then(()=>At(1e3))};t().chainBlockLog.onInsert.append(z),vt();var N=Vi();se(N,13,()=>e(u),P=>P.seq,(P,O)=>{var U=zi();const B=pe(()=>{const{activator:G,action:ve,appendix:xe}=e(O).chainBlockInfo;return{activator:G,action:ve,appendix:xe}});var re=a(U),ne=a(re);{var Te=G=>{var ve=Oi(),xe=a(ve);p(()=>b(xe,`チェーン：${e(O).chainBlockInfo.chainNumber??""}`)),r(G,ve)};y(ne,G=>{e(O).chainBlockInfo.chainNumber&&G(Te)})}var S=i(ne,2),C=a(S),X=i(S,2),ce=a(X);{var $e=G=>{var ve=Ri(),xe=a(ve);p(()=>b(xe,e(O).isKnown?e(B).action.entity.nm:"？？？")),r(G,ve)};y(ce,G=>{(e(B).action.entity.entityType==="Card"||e(B).action.entity.entityType==="Token")&&G($e)})}var ie=i(ce,2),le=a(ie),Ae=a(le),E=i(le,2);{var I=G=>{var ve=Ki();se(ve,5,()=>e(B).appendix,oe,(xe,ue)=>{var A=Wi(),h=a(A);p(()=>b(h,e(ue))),r(xe,A)}),r(G,ve)};y(E,G=>{e(B).appendix&&G(I)})}p((G,ve,xe)=>{qe(U,`cut_in_row ${(!e(O).chainBlockInfo.chainNumber||e(O).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),qe(re,`cut_in_item cut_in_item_${G??""} cut_in_item_${e(O).chainBlockInfo.state??""} svelte-lqu21u`),qe(S,`duelist_name duelist_${G??""}_name svelte-lqu21u`),b(C,e(B).activator.profile.name),qe(X,`duel_card duel_card_${G??""} ${ve??""} ${(e(O).isKnown?e(B).action.entity.origin.kind:"")??""} ${e(B).action.entity.entityType??""}  svelte-lqu21u`),b(Ae,xe)},[()=>e(B).activator.seat.toLowerCase(),()=>e(O).isKnown?(e(B).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(B).action.toString()],pe),te(3,re,()=>yr,()=>new Date().getTime()-e(O).chainBlockInfo.wasSpawnedAt.getTime()<V?{x:c(),duration:n}:{y:_,duration:n}),er(U,()=>Fi,()=>({duration:x})),r(P,U)}),p(()=>qe(N,`cut_in_container cut_in_container_${v()??""} svelte-lqu21u`)),r(d,N),dt()}const Xi=xr({duration:400});var Qi=o('<div class="duel_desk_left v_flex svelte-1i63tk9"><!> <!> <!></div>'),Ji=o('<button class="duel_field_header_message svelte-1i63tk9"> </button> <div class="duel_field_header_buttons svelte-1i63tk9"><button class="svelte-1i63tk9">サレンダー</button></div>',1),Zi=o("<tr></tr>"),es=o('<table class="duel_field svelte-1i63tk9"><tbody class="svelte-1i63tk9"></tbody></table>'),ts=o('<button class="svelte-1i63tk9">OK</button>'),as=o('<button class="svelte-1i63tk9">cancel</button>'),rs=o("<!> <!>",1),is=o('<button class="svelte-1i63tk9"> </button>'),ss=o('<div style="text-align: left;"><!> <!> <!></div>'),ns=o('<div><!> <div class=" duel_desk_center v_flex svelte-1i63tk9"><div class="duel_field_header svelte-1i63tk9"><!></div> <div class="duel_field_body svelte-1i63tk9"><!></div> <div class="duel_field_footer svelte-1i63tk9"><!></div></div> <!></div> <div style="position:fixed;left:0;bottom:0"> </div> <!> <div><!></div>',1);function os(d,s){lt(s,!1);let t=We(s,"duel",12),v=We(s,"userProfile",8),_=ye(0),c=ye(0),u=ye([]),l=ye([]),Y=()=>{},V=ye([]),x=ye(),n=ye(),z=ye(()=>!1),N=ye(!1);const P=w=>{Y=w.resolve,$(V,w.dummyActionInfos.filter(k=>k.action.entity.entityType==="Duelist").filter(k=>k.action.entity.controller.seat==="Below")),$(x,void 0),$(n,void 0),$(l,[]),$(u,[]),$(N,!1),w.entitiesChoices&&($(x,w.entitiesChoices),$(z,()=>{var k;return((k=w.entitiesChoices)==null?void 0:k.validator(e(u)))??!1}),$(N,w.entitiesChoices.cancelable),e(x).selectables.every(k=>k.cell.isPlayFieldCell&&k.getIndexInCell()===0||k.cell.cellType==="Hand"&&k.controller.duelistType==="Player"||k.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:w.entitiesChoices,chainBlockInfos:w.chainBlockInfos,cancelable:w.entitiesChoices.cancelable}).then(k=>{Y({selectedEntities:k})})),w.cellsChoices&&($(n,w.cellsChoices),$(z,()=>{var k;return((k=w.cellsChoices)==null?void 0:k.validator(e(l)))??!1}),$(N,w.cellsChoices.cancelable))};t().view.onWaitStart.append(P);const O=()=>{Y=()=>{},$(n,void 0),$(x,void 0),$(l,[]),$(u,[]),$(z,()=>!1),$(N,!1)};t().view.onWaitEnd.append(O);let U=ye(void 0),B=ye("Normal");const re=({card:w,mode:k})=>{$(U,w),$(B,k??(e(U)===w||e(B)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(re);const ne=()=>{t(t())};t().view.onDuelUpdate.append(ne),t().log.onUpdate.append(ne);const Te=()=>{e(x)&&e(x).validator(e(u))&&Y({selectedEntities:e(u)}),e(n)&&e(n).validator(e(l))&&Y({selectedCells:e(l)})},S=()=>{Y({})},C=w=>{Y({actionInfo:w})},X=()=>{Y({surrender:!0})};t().main();const ce=()=>e(_)<=1400?"compact":"wide";vt();var $e=ns(),ie=L($e),le=a(ie);{var Ae=w=>{var k=Qi(),Z=a(k);Aa(Z,{get duelist(){return t().duelists.Above}});var ke=i(Z,2);Ai(ke,{get entity(){return e(U)},get mode(){return e(B)}});var Ce=i(ke,2);Aa(Ce,{get duelist(){return t().duelists.Below}}),r(w,k)};y(le,w=>{ce()==="wide"&&w(Ae)})}var E=i(le,2),I=a(E),G=a(I);{var ve=w=>{var k=Ji(),Z=L(k),ke=a(Z),Ce=i(Z,2),we=a(Ce);p(()=>b(ke,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),be("click",Z,()=>{t(t().view.infoBoardState="Log",!0)}),be("click",we,X),r(w,k)};y(G,w=>{t().isEnded||w(ve)})}var xe=i(I,2),ue=a(xe);{var A=w=>{var k=es(),Z=a(k);se(Z,5,()=>t().field.cells,oe,(ke,Ce,we)=>{var _e=Zi();qe(_e,`${`duel_desk_row_${we}`??""} svelte-1i63tk9`),se(_e,5,()=>e(Ce),oe,(M,H,De)=>{Hr(M,{get view(){return t().view},row:we,column:De,get selectedEntities(){return e(u)},set selectedEntities(Se){$(u,Se)},get selectedCells(){return e(l)},set selectedCells(Se){$(l,Se)},$$legacy:!0})}),r(ke,_e)}),r(w,k)};y(ue,w=>{t().clock.turn>0&&w(A)})}var h=i(xe,2),q=a(h);{var R=w=>{var k=rs(),Z=L(k);{var ke=_e=>{var M=ts();p(H=>M.disabled=H,[()=>!e(z)()],pe),be("click",M,Te),r(_e,M)};y(Z,_e=>{((e(x)&&e(x).qty)??(e(n)&&e(n).qty)??9999)>1&&_e(ke)})}var Ce=i(Z,2);{var we=_e=>{var M=as();be("click",M,S),r(_e,M)};y(Ce,_e=>{e(N)&&_e(we)})}r(w,k)},Q=w=>{var k=Me(),Z=L(k);se(Z,1,()=>e(V),oe,(ke,Ce)=>{var we=is(),_e=a(we);p(()=>b(_e,e(Ce).action.title)),be("click",we,()=>C(e(Ce))),r(ke,we)}),r(w,k)};y(q,w=>{e(x)&&e(x).selectables.length||e(n)&&e(n).selectables?w(R):w(Q,!1)})}var D=i(E,2);{var F=w=>{var k=ss(),Z=a(k);Zr(Z,{get log(){return t().log}});var ke=i(Z,2);Li(ke,{get cell(){return t().view.infoBoardCell}});var Ce=i(ke,2);Ii(Ce,{get userProfile(){return v()},get viewController(){return t().view}}),p(we=>qe(k,`duel_desk_right duel_desk_right_${we??""}  svelte-1i63tk9`),[()=>t().view.infoBoardState.toLowerCase()],pe),te(3,k,()=>fe,()=>({duration:e(_)>1400?0:200,axis:"x"})),r(w,k)};y(D,w=>{(e(_)>1400||t().view.infoBoardState!=="Default")&&w(F)})}var J=i(ie,2),ae=a(J),m=i(J,2);tr(m,{get modalController(){return t().view.modalController}});var j=i(m,2),T=a(j);const W=pe(()=>ce()==="wide"?"right":"left");Gi(T,{get duel(){return t()},get position(){return e(W)}}),p((w,k)=>{qe(ie,`flex duel_desk ${w??""}_mode svelte-1i63tk9`),b(ae,k),qe(j,`cutin ${w??""}_mode svelte-1i63tk9`)},[ce,()=>t().clock.toFullString()],pe),zt("innerWidth",w=>$(_,w)),zt("innerHeight",w=>$(c,w)),r(d,$e),dt()}var ls=o('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),vs=o('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),ds=o("<div></div>"),cs=o("<!> <!> <!> <!> <!>",1),_s=o('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),us=o('<li class="deck_editor_item svelte-niobyr"><div role="listitem"><div class="svelte-niobyr"><div class="svelte-niobyr"> </div> <div style="display:flex" class="svelte-niobyr"><div class="svelte-niobyr"><!> <!> <!></div> <div style="flex-grow: 1; width:0.1rem" class="svelte-niobyr"></div> <div class="svelte-niobyr"><!></div></div></div></div> <button class="button_style_reset svelte-niobyr">+</button> <button class="button_style_reset svelte-niobyr">-</button></li>'),fs=o('<div class="deck_editor_card_kind svelte-niobyr"><div class="deck_editor_card_kind_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <ul class="svelte-niobyr"></ul></div>'),ps=o('<div class="deck_editor_deck_type svelte-niobyr"><div class="deck_editor_deck_type_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <!></div>'),gs=o('<div class="svelte-niobyr">読み込み中...</div>'),bs=o('<div class="deck_editor_card_list svelte-niobyr"><!></div>');function Ya(d,s){lt(s,!1);let t=We(s,"allCardInfos",8),v=We(s,"deckCardInfos",12),_=We(s,"mode",8),c=We(s,"onAttention",8),u=We(s,"searchCondition",8,void 0);const l={Deck:["Monster","Spell","Trap"],ExtraDeck:["Monster"]},Y={Deck:{Monster:[],Spell:[],Trap:[]},ExtraDeck:{Monster:[],Spell:[],Trap:[]}},V=S=>{var C;return(C=S.monsterCategories)!=null&&C.union(Vt).length?"ExtraDeck":"Deck"},x=S=>{Object.values(Y).forEach(C=>Object.values(C).forEach(X=>X.reset())),S.filter(C=>C.kind!=="XyzMaterial").forEach(C=>{var ce;if(C.kind==="XyzMaterial")return;const X=(ce=C.monsterCategories)!=null&&ce.union(Vt).length?"ExtraDeck":"Deck";Y[X][C.kind].push(C)}),Object.values(Y).forEach(C=>Object.values(C).forEach(X=>X.sort(ia)))},n=_()==="List"?new Promise(S=>{x(t()),S()}):Promise.resolve(),z=()=>(_()==="Deck"&&(x(v()),$(U,v().length)),Y),N=(S,C,X)=>{v(v().filter(ce=>V(ce)!==C||ce.kind!==X&&X))},P=(S,C)=>{try{if(S.ctrlKey){v().push(C);return}const X=v().filter($e=>$e.name===C.name).length;if(X>2)return;const ce=S.shiftKey?3-X:1;if(ce<1)return;v().push(...Array(ce).fill(C))}finally{v().sort(ia),v(v())}},O=(S,C)=>{let X=0;v(v().filter(ce=>ce.name!==C.name?!0:(X++,!S.shiftKey&&X>1))),v().sort(ia)};let U=ye(100);const B=()=>{e(U)>t().length+v().length||($(U,e(U)+100),At(100).then(B))},re=(S,C,X,ce)=>{if(C===0&&ce==="Monster"&&($(U,100),At(100).then(B)),!u())return!0;if(!u().cardKinds.includes(S.kind)||u().name.trim().length&&[S.name,...S.nameTags??[],...S.textTags??[]].every(ie=>!ie.includes(u().name))||!S.isImplemented&&!u().others.includes("implemented")||S.isForTest&&!u().others.includes("test")||S.isOldVersion&&!u().others.includes("oldVersion"))return!1;if(S.kind==="Monster")return S.attributes&&!u().monsterAttributes.union(S.attributes).length||S.types&&!u().monsterTypes.union(S.types).length||u().atkLowerBound!==void 0&&(S.attack??0)<u().atkLowerBound||u().atkUpperBound!==void 0&&(S.attack??0)>u().atkUpperBound||u().defLowerBound!==void 0&&(S.defense??0)<u().defLowerBound||u().defUpperBound!==void 0&&(S.defense??0)>u().defUpperBound||u().defLowerBound!==void 0&&(S.defense??0)<u().defLowerBound||u().atkPlusDef!==void 0&&(S.attack??0)+(S.defense??0)!==u().atkPlusDef||!S.monsterCategories?!1:S.monsterCategories.union(u().monsterCategories).length;if(S.kind==="Spell")return S.spellCategory&&u().spellCategories.includes(S.spellCategory);if(S.kind==="Trap")return S.trapCategory&&u().trapCategories.includes(S.trapCategory)};vt();var ne=bs(),Te=a(ne);ot(Te,()=>n,S=>{var C=gs();r(S,C)},S=>{var C=Me();const X=pe(z);var ce=L(C);se(ce,1,()=>rr,oe,($e,ie)=>{var le=ps();const Ae=pe(()=>Object.values(e(X)[e(ie)]).flatMap(A=>A));var E=a(le),I=a(E),G=a(I),ve=i(I,2);{var xe=A=>{var h=ls(),q=a(h);be("click",q,R=>N(R,e(ie),void 0)),r(A,h)};y(ve,A=>{_()==="Deck"&&e(Ae).some(re)&&A(xe)})}var ue=i(E,2);se(ue,1,()=>la(e(X)[e(ie)]).filter(A=>l[e(ie)].includes(A)),oe,(A,h)=>{var q=fs();const R=pe(()=>e(X)[e(ie)][e(h)].filter((...j)=>re(...j,e(h))));var Q=a(q),D=a(Q),F=a(D),J=i(D,2);{var ae=j=>{var T=vs(),W=a(T);be("click",W,w=>N(w,e(ie),e(h))),r(j,T)};y(J,j=>{_()==="Deck"&&e(R).length&&j(ae)})}var m=i(Q,2);se(m,5,()=>e(R),oe,(j,T,W)=>{var w=Me(),k=L(w);{var Z=ke=>{var Ce=us(),we=a(Ce),_e=a(we),M=a(_e),H=a(M),De=i(M,2),Se=a(De),He=a(Se);{var Le=ee=>{var he=cs(),ge=L(he);{var Ke=Ve=>{var Re=at();p(()=>b(Re,`★${e(T).level??""}`)),r(Ve,Re)};y(ge,Ve=>{e(T).level&&Ve(Ke)})}var Be=i(ge,2);{var ze=Ve=>{var Re=at();p(()=>b(Re,`☆${e(T).rank??""}`)),r(Ve,Re)};y(Be,Ve=>{e(T).rank&&Ve(ze)})}var et=i(Be,2);se(et,1,()=>e(T).attributes??[],oe,(Ve,Re)=>{var Xe=ds();p(()=>qe(Xe,`monster_attr ${e(Re)??""} svelte-niobyr`)),r(Ve,Xe)});var rt=i(et,2);se(rt,1,()=>e(T).types??[],oe,(Ve,Re)=>{var Xe=at();p(()=>b(Xe,Qt[e(Re)])),r(Ve,Xe)});var mt=i(rt,2);se(mt,1,()=>e(T).monsterCategories??[],oe,(Ve,Re)=>{var Xe=at();p(()=>b(Xe,Jt[e(Re)])),r(Ve,Xe)}),r(ee,he)};y(He,ee=>{e(T).kind==="Monster"&&ee(Le)})}var Ye=i(He,2);{var Pe=ee=>{var he=at();p(()=>b(he,`${Zt[e(T).spellCategory]??""}魔法`)),r(ee,he)};y(Ye,ee=>{e(T).spellCategory&&ee(Pe)})}var Ge=i(Ye,2);{var Ee=ee=>{var he=at();p(()=>b(he,`${ea[e(T).trapCategory]??""}罠`)),r(ee,he)};y(Ge,ee=>{e(T).trapCategory&&ee(Ee)})}var me=i(Se,4),f=a(me);{var g=ee=>{var he=_s(),ge=L(he),Ke=a(ge),Be=i(ge,2),ze=a(Be);p(()=>{b(Ke,e(T).attack??"?"),b(ze,e(T).defense??"?")}),r(ee,he)};y(f,ee=>{e(T).kind==="Monster"&&ee(g)})}var K=i(we,2),de=i(K,2);p(ee=>{qe(we,`${ee??""} svelte-niobyr`),b(H,e(T).name),K.disabled=!e(T).isImplemented,ft(K,"title",e(T).isImplemented?"※shiftキー同時押しで一括投入":""),de.disabled=!e(T).isImplemented,ft(de,"title",e(T).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>{var ee,he;return`deck_editor_card duel_card ${e(T).kind} ${(he=(ee=e(T))==null?void 0:ee.monsterCategories)==null?void 0:he.join(" ")} ${e(T).isImplemented?"is_implemented":"is_not_implemented"}`}],pe),be("mouseenter",we,()=>c()(e(T))),be("click",K,ee=>P(ee,e(T))),be("click",de,ee=>O(ee,e(T))),r(ke,Ce)};y(k,ke=>{W<e(U)&&ke(Z)})}r(j,w)}),p(()=>b(F,`${La[e(h)]??""}（${e(R).length??""} / ${e(X)[e(ie)][e(h)].length??""}枚）`)),r(A,q)}),p(A=>b(G,`${ar[e(ie)]??""}（${A??""} / ${e(Ae).length??""}枚）`),[()=>e(Ae).filter(re).length],pe),r($e,le)}),r(S,C)}),r(d,ne),dt()}var ms=o('<div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>'),hs=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),ys=o('<div></div> <div class="svelte-rccxcp"> </div>',1),xs=o("<div> </div>"),ks=o("<div> </div>"),ws=o('<div class="duel_card_info_row svelte-rccxcp"><!> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),Ds=o('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Cs=o('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),$s=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※エラッタ前カードです</div></div>'),Ss=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),Ms=o('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),Ts=o('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <!></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!> <!></div></div>');function js(d,s){lt(s,!1);let t=We(s,"cardInfo",8,void 0);vt();var v=Me(),_=L(v);{var c=u=>{var l=Ts(),Y=a(l),V=a(Y),x=a(V),n=a(x),z=i(V,2);{var N=E=>{var I=ms(),G=a(I),ve=a(G),xe=i(G,2),ue=a(xe);p((A,h)=>{b(ve,A),b(ue,h)},[()=>"★".repeat(t().level||0),()=>"☆".repeat(t().rank||0)],pe),r(E,I)};y(z,E=>{t().kind==="Monster"&&E(N)})}var P=i(Y,2),O=a(P);{var U=E=>{var I=hs(),G=L(I),ve=a(G),xe=a(ve),ue=a(xe),A=i(G,2),h=a(A),q=a(h),R=i(h,2),Q=a(R);p(()=>{b(ue,t().pendulumDescription),b(q,`◀ ${t().pendulumScaleL??""}`),b(Q,`${t().pendulumScaleR??""} ▶`)}),r(E,I)};y(O,E=>{var I;(I=t().monsterCategories)!=null&&I.includes("Pendulum")&&E(U)})}var B=i(O,2);{var re=E=>{var I=ws(),G=L(I),ve=a(G);{var xe=q=>{var R=ys(),Q=L(R),D=i(Q,2),F=a(D);p(()=>{qe(Q,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),b(F,`${va[t().attributes[0]]??""}属性`)}),r(q,R)};y(ve,q=>{t().attributes&&q(xe)})}var ue=i(ve,2);{var A=q=>{var R=xs(),Q=a(R);p(()=>{qe(R,`monster_cat ${t().types[0]??""} svelte-rccxcp`),b(Q,`${Qt[t().types[0]]??""}${da[t().types[0]]??""}族`)}),r(q,R)};y(ue,q=>{t().types&&q(A)})}var h=i(G,2);se(h,5,()=>t().monsterCategories??[],oe,(q,R)=>{var Q=ks(),D=a(Q);p(()=>{qe(Q,`monster_cat ${e(R)??""} svelte-rccxcp`),b(D,`${Jt[e(R)]??""}${ca[e(R)]??""}`)}),r(q,Q)}),r(E,I)},ne=E=>{var I=Me(),G=L(I);{var ve=ue=>{var A=Ds(),h=i(a(A),2),q=a(h);p(()=>b(q,`${Zt[t().spellCategory]??""}魔法`)),r(ue,A)},xe=ue=>{var A=Me(),h=L(A);{var q=R=>{var Q=Cs(),D=i(a(Q),2),F=a(D);p(()=>b(F,`${ea[t().trapCategory]??""}罠`)),r(R,Q)};y(h,R=>{t().kind==="Trap"&&t().trapCategory&&R(q)},!0)}r(ue,A)};y(G,ue=>{t().kind==="Spell"&&t().spellCategory?ue(ve):ue(xe,!1)},!0)}r(E,I)};y(B,E=>{t().kind==="Monster"?E(re):E(ne,!1)})}var Te=i(B,2),S=a(Te),C=a(S),X=a(C),ce=i(Te,2);{var $e=E=>{var I=$s();r(E,I)};y(ce,E=>{t().isOldVersion&&E($e)})}var ie=i(ce,2);{var le=E=>{var I=Ss();r(E,I)},Ae=E=>{var I=Ms(),G=a(I),ve=i(G,2),xe=a(ve);p(ue=>{ft(G,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),ft(ve,"href",ue),b(xe,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>ir(t())],pe),r(E,I)};y(ie,E=>{t().isForTest?E(le):E(Ae,!1)})}p(E=>{qe(l,`duel_card duel_card_info ${t().kind??""} ${E??""} svelte-rccxcp`),b(n,t().name),b(X,t().description)},[()=>{var E;return(E=t().monsterCategories)==null?void 0:E.join(" ")}],pe),r(u,l)};y(_,u=>{t()&&u(c)})}r(d,v),dt()}const Es={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class Bs{constructor(){tt(this,"DefaultSeparator1","/");tt(this,"DefaultSeparator2"," ");tt(this,"DefaultSeparator3",":");tt(this,"createDate",s=>{if(!s)return;const t=new Date(s);if(!isNaN(t.getTime()))return t});tt(this,"createDateOr",(s,t)=>this.createDate(s)||t||new Date);tt(this,"truncateDate",s=>{const t=s||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});tt(this,"addDate",(s,t)=>{const v=this.createDateOr(s);return v.setDate(v.getDate()+t),v});tt(this,"addMonth",(s,t)=>{const v=this.createDateOr(s);return v.setMonth(v.getMonth()+t),v});tt(this,"addYear",(s,t)=>{const v=this.createDateOr(s);return v.setFullYear(v.getFullYear()+t),v});tt(this,"getDayOfWeek",(s,t="dddd")=>{const v=this.createDate(s);return v?Es[v.getDay()][t]:""});tt(this,"formatToYYYYMMDD",(s,t=this.DefaultSeparator1)=>{const v=this.createDate(s);if(!v)return"";const _=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2),u=("0"+v.getDate()).slice(-2);return _+t+c+t+u});tt(this,"formatToYYYYMM",(s,t=this.DefaultSeparator1)=>{const v=this.createDate(s);if(!v)return"";t||(t="");const _=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2);return _+t+c});tt(this,"formatToHHMMSS",(s,t=this.DefaultSeparator3)=>{const v=this.createDate(s);if(!v)return"";t||(t="");const _=v.getHours(),c=v.getMinutes(),u=v.getSeconds();return("0"+_).slice(-2)+t+("0"+c).slice(-2)+t+("0"+u).slice(-2)});tt(this,"formatToHHMM",(s,t=this.DefaultSeparator3)=>{const v=this.createDate(s);if(!v)return"";t||(t="");const _=("0"+v.getHours()).slice(-2),c=("0"+v.getMinutes()).slice(-2);return _+t+c});tt(this,"formatToYYYYMMDD_HHMM",(s,t=this.DefaultSeparator1,v=this.DefaultSeparator2,_=this.DefaultSeparator3)=>{const c=this.createDate(s);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMM(c,_):""});tt(this,"formatToYYYYMMDD_HHMMSS",(s,t=this.DefaultSeparator1,v=this.DefaultSeparator2,_=this.DefaultSeparator3)=>{const c=this.createDate(s);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMMSS(c,_):""})}}const bt=new Bs;Date.prototype.truncateDate=function(){return bt.truncateDate(this)};Date.prototype.getCloneOr=function(d){return bt.createDateOr(this,d)};Date.prototype.addDate=function(d){return bt.addDate(this,d)};Date.prototype.addMonth=function(d){return bt.addDate(this,d)};Date.prototype.addYear=function(d){return bt.addDate(this,d)};Date.prototype.getDayOfWeek=function(d="dddd"){return bt.getDayOfWeek(this,d)};Date.prototype.formatToYYYYMM=function(d){return bt.formatToYYYYMM(this,d)};Date.prototype.formatToYYYYMMDD=function(d){return bt.formatToYYYYMMDD(this,d)};Date.prototype.formatToYYYYMMDD_HHMM=function(d,s,t){return bt.formatToYYYYMMDD_HHMM(this,d,s,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(d,s,t){return bt.formatToYYYYMMDD_HHMMSS(this,d,s,t)};Date.prototype.formatToHHMM=function(d){return bt.formatToHHMM(this,d)};Date.prototype.formatToHHMMSS=function(d){return bt.formatToHHMMSS(this,d)};var As=o('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),Ys=o('<ul class="deck_info_list svelte-2wdgc8"></ul>'),Us=o('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),qs=o('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),Ls=o('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),Ns=o('<button class="svelte-2wdgc8">Cancel</button>'),Ps=o('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function Is(d,s){lt(s,!1);let t=We(s,"eventHolder",8),v=We(s,"args",8),_=We(s,"resolve",8),c=ye(Promise.resolve([])),u=ye();const l=()=>{$(u,new DataTransfer().files),$(c,Promise.resolve([]))},Y=async N=>{N.preventDefault(),console.log("hoge",N)},V=async N=>{N.preventDefault(),N.dataTransfer&&n(N.dataTransfer.files)},x=()=>{n(e(u))},n=async N=>{if(!N.length)return;const P=[],O=[];for(const U of N)try{O.push(...await yt.createfromJson(U))}catch(B){B instanceof Error&&P.push(B.message)}if(P.length){console.log(...P);return}$(c,e(c).then(()=>O))},z=l;vt(),sr(d,{get eventHolder(){return t()},get args(){return v()},$$slots:{body:(N,P)=>{var O=qs(),U=a(O);ot(U,()=>Ft,null,(B,re)=>{var ne=Me(),Te=L(ne);ot(Te,()=>e(c),null,(S,C)=>{var X=Me(),ce=L(X);{var $e=le=>{var Ae=Ys();se(Ae,5,()=>e(C),oe,(E,I)=>{var G=As(),ve=a(G),xe=a(ve),ue=i(ve,2),A=a(ue),h=i(ue,2),q=a(h);p((R,Q,D)=>{b(xe,e(I).name),b(A,`${R??""}
                  /
                  ${Q??""}`),b(q,`最終使用日時 ： ${D??""}`)},[()=>e(I).cardNames.filter(R=>{var Q,D;return!((D=(Q=e(re).getCardInfo(R))==null?void 0:Q.monsterCategories)!=null&&D.union(Vt).length)}).length,()=>e(I).cardNames.filter(R=>{var Q,D;return(D=(Q=e(re).getCardInfo(R))==null?void 0:Q.monsterCategories)==null?void 0:D.union(Vt).length}).length,()=>e(I).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],pe),r(E,G)}),r(le,Ae)},ie=le=>{var Ae=Us(),E=i(a(Ae),2),I=a(E);nr(I,()=>e(u),G=>$(u,G)),be("change",I,x),be("cancel",I,z),be("drop",Ae,V),be("dragover",Ae,Y),r(le,Ae)};y(ce,le=>{e(C).length?le($e):le(ie,!1)})}r(S,X)}),r(B,ne)}),r(N,O)},footer:(N,P)=>{var O=Ps(),U=a(O);ot(U,()=>e(c),null,(B,re)=>{var ne=Me(),Te=L(ne);{var S=X=>{var ce=Ls(),$e=L(ce),ie=i($e,2),le=i(ie,2);p(()=>{$e.disabled=e(re).length===0,ie.disabled=e(re).length===0}),be("click",$e,()=>_()({deckInfos:e(re),replaceAll:!1})),be("click",ie,()=>_()({deckInfos:e(re),replaceAll:!0})),be("click",le,z),r(X,ce)},C=X=>{var ce=Me(),$e=L(ce);{var ie=le=>{var Ae=Ns();be("click",Ae,()=>_()(void 0)),r(le,Ae)};y($e,le=>{v().cancelable&&le(ie)},!0)}r(X,ce)};y(Te,X=>{e(re).length?X(S):X(C,!1)})}r(B,ne)}),r(N,O)}}}),dt()}const Xt=class Xt extends lr{constructor(s,t){super(s,...Object.values(t))}};tt(Xt,"createModalController",s=>{const t={deckUploader:new vr({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new Xt(s,t),t)});let oa=Xt;function Fs(d,s){lt(s,!1);let t=We(s,"modalController",8);vt(),or(d,{get modalController(){return t()},children:(v,_)=>{var c=Me(),u=L(c);{var l=Y=>{Is(Y,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};y(u,Y=>{t().deckUploader.state==="Shown"&&Y(l)})}r(v,c)},$$slots:{default:!0}}),dt()}var Hs=o('<label><input type="checkbox"> </label>'),Os=o('<label><input type="checkbox"> </label>'),Rs=o('<label><input type="checkbox"> <div style="display: inline-block;"></div> </label>'),Ws=o('<label><input type="checkbox"> </label>'),Ks=o('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">モンスター</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">属性</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">種族</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">攻守</button></div> <div class="svelte-xd4rv4"><div><span>攻</span> <input type="number" min="0" max="5000" step="100"> <span>～</span> <input type="number" min="0" max="5000" step="100"></div> <div><span>守</span> <input type="number" min="0" max="5000" step="100"> <span>～</span> <input type="number" min="0" max="5000" step="100"></div> <div><span>攻+守</span> <input type="number" min="0" max="5000" step="100"></div></div></div>',1),zs=o('<label><input type="checkbox"> </label>'),Vs=o('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">魔法</button></div> <div class="svelte-xd4rv4"></div></div>'),Gs=o('<label><input type="checkbox"> </label>'),Xs=o('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">罠</button></div> <div class="svelte-xd4rv4"></div></div>'),Qs=o('<label><input type="checkbox"> </label>'),Js=o("<div>カード情報読込中</div>"),Zs=o("<option> </option>"),en=o('<div class="svelte-xd4rv4"><a class="white_button svelte-xd4rv4" download="SVS_DeckInfos.json">ダウンロード</a></div>'),tn=o('<div class="svelte-xd4rv4"></div>'),an=o('<div class="svelte-xd4rv4"><a class="white_button svelte-xd4rv4" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),rn=o('<div class="svelte-xd4rv4"></div>'),sn=o('<div class="deck_editor_body_right_header svelte-xd4rv4"><div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">編集対象 <select></select></div> <div class="svelte-xd4rv4"></div> <div class="svelte-xd4rv4">新規名称 <input type="text"></div></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">基本操作</div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">デッキを保存</button></div> <div class="svelte-xd4rv4"></div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">デッキを複製</button></div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">DL/UL</div> <!> <!> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">アップロード</button></div></div></div> <!>',1),nn=o("<div>デッキ情報読込中</div>"),on=o('<div class="deck_editor svelte-xd4rv4"><div class="deck_editor_header"></div> <div class="deck_editor_body svelte-xd4rv4"><div class="deck_editor_body_left svelte-xd4rv4"><div role="contentinfo"><div class="deck_editor_search_box_header svelte-xd4rv4"><div>検索条件</div> <div><button class="white_button svelte-xd4rv4">条件クリア</button></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">名称</button></div> <div class="svelte-xd4rv4"><input type="text" style="width:70%"> <span>※ルビには対応していません</span></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">種類</button></div> <div class="svelte-xd4rv4"></div></div> <!> <!> <!> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">その他</button></div> <div class="svelte-xd4rv4"></div></div></div> <!></div> <div class="deck_editor_body_center svelte-xd4rv4"><!></div> <div class="deck_editor_body_right svelte-xd4rv4"><!></div></div> <div class="footer svelte-xd4rv4"><!></div></div> <!>',1);function ln(d,s){lt(s,!1);const t=[],v=[],_=[],c=[],u=[],l=[],Y=[],V=oa.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),x={name:"",cardKinds:$a.filter(f=>f!=="XyzMaterial"),monsterCategories:[...Sa],monsterAttributes:[...Ca],monsterTypes:[...Da],spellCategories:[...wa],trapCategories:[...ka],atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:["test","oldVersion","implemented"]},n=ye(structuredClone(x));je(n,e(n).others=["oldVersion"]);let z=ye("SearchCondition");const N=async()=>{je(n,e(n).name=""),je(n,e(n).cardKinds=[]),je(n,e(n).monsterCategories=[]),je(n,e(n).monsterAttributes=[]),je(n,e(n).monsterTypes=[]),je(n,e(n).spellCategories=[]),je(n,e(n).trapCategories=[]),je(n,e(n).others=[]),je(n,e(n).atkLowerBound=0),je(n,e(n).atkUpperBound=5e3),je(n,e(n).defLowerBound=0),je(n,e(n).defUpperBound=5e3),je(n,e(n).atkPlusDef=void 0)},P=f=>{f.forEach(g=>{Array.isArray(e(n)[g])&&Array.isArray(x[g])?je(n,e(n)[g]=e(n)[g].length?[]:[...x[g]]):je(n,e(n)[g]=x[g])})},O=(f,g,K)=>{Array.isArray(e(n)[g])&&Array.isArray(x[g])&&je(n,e(n)[g]=[K])},U=async()=>{const g=(await e(ne)).find(de=>de.id===e(re));if(!g)return;const K=await Ft;$(C,{...g,cardInfos:g.cardNames.map(de=>{const ee=K.getCardInfo(de);return ee===void 0&&console.error(de),ee}).filter(de=>de!==void 0)})},B=()=>yt.getAllDeckInfo().then(f=>($(re,(f.find(g=>g.lastUsedAt.getTime()===Math.max(...f.map(K=>K.lastUsedAt.getTime())))??f[0]).id),f));let re=ye(-1),ne=ye(B()),Te=ye(e(ne).then(f=>yt.convertToObjectURL(f)));e(ne).then(U);const S=()=>{$(ne,B()),$(Te,e(ne).then(f=>yt.convertToObjectURL(f))),U()};let C=ye({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),X=ye(void 0),ce=0;const $e=f=>{$(z,"CardDetail"),f.cardId!==void 0&&!f.description&&!f.pendulumDescription&&(ce=f.cardId,qa([f.cardId]).then(()=>{f.cardId===ce&&$(X,f)})),$(X,f)},ie=async()=>{const g=(await e(ne)).find(K=>K.id===e(re));if(!g)throw new Error("illegal state");return g},le=async()=>{const f=await ie();await f.saveDeckInfo({...f,name:e(C).name,cardNames:e(C).cardInfos.map(g=>g.name),lastUsedAt:new Date}),S()},Ae=async()=>{(await yt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,e(C).cardInfos.map(g=>g.name))).saveDeckInfo(),S()},E=async f=>{const g=await ie();!f.shiftKey&&!confirm(`デッキ【${g.name}】を削除します。
よろしいですか？`)||(await g.delete(),S())},I=async()=>{const f=await V.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!f)return;const g=[];if(f.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;g.push(...(await e(ne)).map(K=>K.id))}await Promise.all(f.deckInfos.map(K=>yt.createNewDeck(K.name,K.description,K.cardNames,K.lastUsedAt))),g.length&&await Promise.all(g.map(yt.remove)),S()};vt();var G=on(),ve=L(G),xe=i(a(ve),2),ue=a(xe),A=a(ue),h=a(A),q=i(a(h),2),R=a(q),Q=i(h,2),D=a(Q),F=a(D),J=i(D,2),ae=a(J),m=i(Q,2),j=a(m),T=a(j),W=i(j,2);se(W,5,()=>$a.filter(f=>f!=="XyzMaterial"),oe,(f,g)=>{var K=Hs(),de=a(K),ee,he=i(de);p(()=>{ee!==(ee=e(g))&&(de.value=(de.__value=e(g))==null?"":e(g)),b(he,` ${La[e(g)]??""}`)}),jt(t,[],de,()=>(e(g),e(n).cardKinds),ge=>je(n,e(n).cardKinds=ge)),r(f,K)});var w=i(m,2);{var k=f=>{var g=Ks(),K=L(g),de=a(K),ee=a(de),he=i(de,2);se(he,5,()=>Sa,oe,(Fe,Ne)=>{var it=Os(),Ze=a(it),ct,gt=i(Ze);p(()=>{ct!==(ct=e(Ne))&&(Ze.value=(Ze.__value=e(Ne))==null?"":e(Ne)),b(gt,` ${Jt[e(Ne)]??""}${ca[e(Ne)]??""}`)}),jt(v,[],Ze,()=>(e(Ne),e(n).monsterCategories),_t=>je(n,e(n).monsterCategories=_t)),r(Fe,it)});var ge=i(K,2),Ke=a(ge),Be=a(Ke),ze=i(Ke,2);se(ze,5,()=>Ca,oe,(Fe,Ne)=>{var it=Rs(),Ze=a(it),ct,gt=i(Ze,2),_t=i(gt);p(()=>{ct!==(ct=e(Ne))&&(Ze.value=(Ze.__value=e(Ne))==null?"":e(Ne)),qe(gt,`monster_attr ${e(Ne)??""} svelte-xd4rv4`),b(_t,` ${va[e(Ne)]??""}`)}),jt(_,[],Ze,()=>(e(Ne),e(n).monsterAttributes),wt=>je(n,e(n).monsterAttributes=wt)),r(Fe,it)});var et=i(ge,2),rt=a(et),mt=a(rt),Ve=i(rt,2);se(Ve,5,()=>Da,oe,(Fe,Ne)=>{var it=Ws(),Ze=a(it),ct,gt=i(Ze);p(()=>{ct!==(ct=e(Ne))&&(Ze.value=(Ze.__value=e(Ne))==null?"":e(Ne)),b(gt,` ${Qt[e(Ne)]??""}
                  ${da[e(Ne)]??""}`)}),jt(c,[],Ze,()=>(e(Ne),e(n).monsterTypes),_t=>je(n,e(n).monsterTypes=_t)),be("dblclick",it,_t=>O(_t,"monsterTypes",e(Ne))),r(Fe,it)});var Re=i(et,2),Xe=a(Re),pt=a(Xe),Ct=i(Xe,2),kt=a(Ct),xt=i(a(kt),2),Mt=i(xt,4),Je=i(kt,2),Ue=i(a(Je),2),Ie=i(Ue,4),Oe=i(Je,2),Qe=i(a(Oe),2);be("click",ee,()=>P(["monsterCategories"])),te(3,K,()=>fe,()=>({delay:0,duration:100})),be("click",Be,()=>P(["monsterAttributes"])),te(3,ge,()=>fe,()=>({delay:0,duration:100})),be("click",mt,()=>P(["monsterTypes"])),te(3,et,()=>fe,()=>({delay:0,duration:100})),be("click",pt,()=>P(["atkLowerBound","atkUpperBound","defLowerBound","defUpperBound"])),St(xt,()=>e(n).atkLowerBound,Fe=>je(n,e(n).atkLowerBound=Fe)),St(Mt,()=>e(n).atkUpperBound,Fe=>je(n,e(n).atkUpperBound=Fe)),St(Ue,()=>e(n).defLowerBound,Fe=>je(n,e(n).defLowerBound=Fe)),St(Ie,()=>e(n).defUpperBound,Fe=>je(n,e(n).defUpperBound=Fe)),St(Qe,()=>e(n).atkPlusDef,Fe=>je(n,e(n).atkPlusDef=Fe)),te(3,Re,()=>fe,()=>({delay:0,duration:100})),r(f,g)};y(w,f=>{e(n).cardKinds.includes("Monster")&&f(k)})}var Z=i(w,2);{var ke=f=>{var g=Vs(),K=a(g),de=a(K),ee=i(K,2);se(ee,5,()=>wa,oe,(he,ge)=>{var Ke=zs(),Be=a(Ke),ze,et=i(Be);p(()=>{ze!==(ze=e(ge))&&(Be.value=(Be.__value=e(ge))==null?"":e(ge)),b(et,` ${Zt[e(ge)]??""}`)}),jt(u,[],Be,()=>(e(ge),e(n).spellCategories),rt=>je(n,e(n).spellCategories=rt)),r(he,Ke)}),be("click",de,()=>P(["spellCategories"])),te(3,g,()=>fe,()=>({delay:0,duration:100})),r(f,g)};y(Z,f=>{e(n).cardKinds.includes("Spell")&&f(ke)})}var Ce=i(Z,2);{var we=f=>{var g=Xs(),K=a(g),de=a(K),ee=i(K,2);se(ee,5,()=>ka,oe,(he,ge)=>{var Ke=Gs(),Be=a(Ke),ze,et=i(Be);p(()=>{ze!==(ze=e(ge))&&(Be.value=(Be.__value=e(ge))==null?"":e(ge)),b(et,` ${ea[e(ge)]??""}`)}),jt(l,[],Be,()=>(e(ge),e(n).trapCategories),rt=>je(n,e(n).trapCategories=rt)),r(he,Ke)}),be("click",de,()=>P(["trapCategories"])),te(3,g,()=>fe,()=>({delay:0,duration:100})),r(f,g)};y(Ce,f=>{e(n).cardKinds.includes("Trap")&&f(we)})}var _e=i(Ce,2),M=a(_e),H=a(M),De=i(M,2);se(De,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],oe,(f,g)=>{var K=Qs(),de=a(K),ee,he=i(de);p(()=>{ee!==(ee=g.key)&&(de.value=(de.__value=g.key)==null?"":g.key),b(he,` ${g.text??""}`)}),jt(Y,[],de,()=>(g.key,e(n).others),ge=>je(n,e(n).others=ge)),r(f,K)});var Se=i(A,2);js(Se,{get cardInfo(){return e(X)}});var He=i(ue,2),Le=a(He);ot(Le,()=>Ft,f=>{var g=Js();r(f,g)},(f,g)=>{const K=pe(()=>Object.values(e(g).dic));Ya(f,{mode:"List",get allCardInfos(){return e(K)},onAttention:$e,get searchCondition(){return e(n)},get deckCardInfos(){return e(C).cardInfos},set deckCardInfos(de){je(C,e(C).cardInfos=de)},$$legacy:!0})});var Ye=i(He,2),Pe=a(Ye);ot(Pe,()=>e(ne),f=>{var g=nn();r(f,g)},(f,g)=>{var K=sn(),de=L(K),ee=a(de),he=a(ee),ge=i(a(he));p(()=>{e(re),Lt(()=>{e(g)})}),se(ge,5,()=>e(g),oe,(Ue,Ie)=>{var Oe=Zs(),Qe={},Fe=a(Oe);p(()=>{Qe!==(Qe=e(Ie).id)&&(Oe.value=(Oe.__value=e(Ie).id)==null?"":e(Ie).id),b(Fe,e(Ie).name)}),r(Ue,Oe)});var Ke=i(he,4),Be=i(a(Ke)),ze=i(ee,4),et=i(a(ze),2),rt=a(et),mt=i(et,4),Ve=a(mt),Re=i(mt,2),Xe=a(Re),pt=i(ze,2),Ct=i(a(pt),2);ot(Ct,ie,Ue=>{var Ie=tn();r(Ue,Ie)},(Ue,Ie)=>{var Oe=en(),Qe=a(Oe);p(Fe=>ft(Qe,"href",Fe),[()=>yt.convertToObjectURL([e(Ie)])],pe),r(Ue,Oe)});var kt=i(Ct,2);ot(kt,()=>e(Te),Ue=>{var Ie=rn();r(Ue,Ie)},(Ue,Ie)=>{var Oe=an(),Qe=a(Oe);p(()=>ft(Qe,"href",e(Ie))),r(Ue,Oe)});var xt=i(kt,2),Mt=a(xt),Je=i(de,2);Ya(Je,{mode:"Deck",allCardInfos:[],onAttention:$e,get deckCardInfos(){return e(C).cardInfos},set deckCardInfos(Ue){je(C,e(C).cardInfos=Ue)},$$legacy:!0}),Nt(ge,()=>e(re),Ue=>$(re,Ue)),be("change",ge,U),St(Be,()=>e(C).name,Ue=>je(C,e(C).name=Ue)),be("click",rt,le),be("click",Ve,Ae),be("click",Xe,E),be("click",Mt,I),r(f,K)});var Ge=i(xe,2),Ee=a(Ge);ot(Ee,()=>Ft,f=>{var g=at("読み込み中");r(f,g)},(f,g)=>{var K=at();p(()=>b(K,`実装済カード${e(g).definitionCount+e(g).nonDefinitionCount}枚（内、効果のないモンスター${e(g).nonDefinitionCount??""}枚）`)),r(f,K)});var me=i(ve,2);Fs(me,{modalController:V}),p(()=>qe(A,`deck_editor_search_box ${(e(z)==="SearchCondition"?"":"minimum")??""} svelte-xd4rv4`)),be("click",R,N),be("click",F,()=>P(["name"])),St(ae,()=>e(n).name,f=>je(n,e(n).name=f)),be("click",T,()=>P(["cardKinds"])),be("click",H,()=>P(["others"])),te(3,_e,()=>fe,()=>({delay:0,duration:100})),be("mouseenter",A,()=>$(z,"SearchCondition")),r(d,G),dt()}const vn=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],dn=3;var cn=o('<input class="game_mode_radio svelte-abgng1" type="radio" name="game_mode"> <label> </label>',1),_n=o('<option class="svelte-abgng1"> </option>'),un=o('<option class="svelte-abgng1"> </option>'),fn=o('<option class="svelte-abgng1"> </option>'),pn=o('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-abgng1">デッキ：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_deck_selector" class="deck_selector svelte-abgng1"><option class="svelte-abgng1">デフォルト</option><!></select></div></td></tr>'),gn=o('<option class="svelte-abgng1"> </option>'),bn=o('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_selector" class="config_row_label npc_selector svelte-abgng1">対戦相手：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_selector" class="npc_selector svelte-abgng1"></select> <div class="svelte-abgng1"> </div></div></td></tr> <!> <tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_selector" class="config_row_label npc_selector svelte-abgng1">先攻後攻：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_selector" class="npc_selector svelte-abgng1"></select></div></td></tr>',1),mn=o('<option class="svelte-abgng1"> </option>'),hn=o('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-abgng1">難易度：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="difficulty_selector" class="difficulty_selector svelte-abgng1"></select></div></td></tr>'),yn=o('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label class="config_row_label svelte-abgng1" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"></div></td></tr> <tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="deck_selector" class="config_row_label deck_selector svelte-abgng1">デッキ：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="deck_selector" class="deck_selector svelte-abgng1"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-abgng1"><div><button class="btn svelte-abgng1">duel start!</button></div></td></tr>',1),xn=o('<tr><td colspan="2" class="svelte-abgng1"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),kn=o('<tr><td colspan="2" class="svelte-abgng1"><div><button class="btn svelte-abgng1">deck edit</button></div></td></tr>'),wn=o('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="duelist_name" class="config_row_label duelist_name svelte-abgng1">名前：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><input id="duelist_name" class="duelist_name svelte-abgng1" type="text"></div></td></tr> <!> <!>',1),Dn=o('<tr><td colspan="2" class="svelte-abgng1"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),Cn=o('<div class="app_body svelte-abgng1"><table class="config_table svelte-abgng1"><tbody><!></tbody></table></div>'),$n=o('<div class="result_title result_win svelte-abgng1">YOU WIN</div>'),Sn=o('<div class="result_title result_lose svelte-abgng1">YOU LOSE</div>'),Mn=o('<div class="result_title result_draw svelte-abgng1">DRAW</div>'),Tn=o('<div class="twitter_share_button_wrapper svelte-abgng1"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-abgng1">X(twitter)でシェアする</a></div>'),jn=o('<div class="result svelte-abgng1"><!> <div class="reason_of_end svelte-abgng1"> </div> <!> <div class="svelte-abgng1"><button class="white_button svelte-abgng1">TOPへ戻る</button></div></div>'),En=o('<main style="flex-direction: column; display :flex" class="svelte-abgng1"><div class="link link_left svelte-abgng1"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-abgng1">posfie(toggeter)</a></div> <div class="link link_right svelte-abgng1"><a class="a_button svelte-abgng1" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">現時点とこの先のこと</a></div> <!> <div class="debug_info svelte-abgng1"><span class="svelte-abgng1"> </span> <span class="user_agent_info svelte-abgng1"> </span> <span class="screen_info svelte-abgng1"> </span></div> <!></main>');function Bn(d,s){lt(s,!1);const t=new dr("stk_ygo_svelte",dn,vn);let v=ye(0),_=ye(0),c=ye(),u=ye("FtkChallenge"),l=ye("None"),Y=ye(0),V=ye(""),x=ye(void 0);const n="https://setta238.github.io/stk_ygo_svelte/",z="遊戯王deそりてあ",N="ninja_no",P=cr.getOrCreateNew(t).then(m=>($(u,Ma.includes(m.previousGameMode)?m.previousGameMode:"FtkChallenge"),Ae(m.previousNpcId),m)),O=m=>{var T;const j=m.find(W=>W.lastUsedAt.getTime()===Math.max(...m.map(w=>w.lastUsedAt.getTime())))??m[0];$(Y,j.id),e(u)==="FtkChallenge"&&j.deckType!=="Preset"&&$(Y,((T=Et.find(W=>W.deckType==="Preset"))==null?void 0:T.id)??e(Y))};let U=ye(yt.getAllDeckInfo(t).then(m=>(Promise.all(m.filter(j=>!j.lastUsedAt).map(j=>{j.saveDeckInfo()})),O(m),m)));const B=async()=>{const m=e(Y);let j=(await e(U)).find(W=>W.id===m)??(await ne()).find(W=>W.id===m);j&&await j.updateTimestamp();let T=j;if(T||(T=Et.find(W=>W.id===m)),!T)throw new Error("illegal state");return T},re=async()=>{(await P).save({previousGameMode:e(u)})},ne=()=>($(U,yt.getAllDeckInfo(t).then(m=>(O(m),m))),e(U)),Te=async()=>{(await e(U)).length||(await yt.prepareSampleDeck(),ne())},S=async()=>{await Promise.all([re(),Te()]);const m=await B(),j=await P;let T=qt.find(k=>k.id===Number.MIN_SAFE_INTEGER)??qt[0],W=Et.find(k=>k.id===Number.MIN_SAFE_INTEGER)??Et[0],w="PlayFirst";e(u)==="FtkChallenge"?T=qt.filter(k=>k.npcType==="FtkChallenge").find(k=>k.difficulty===j.previousDifficulty)??T:e(u)==="Free"&&(T=qt.find(k=>k.id===j.previousNpcId)??T,W=Et.slice(-1)[0],w=j.previousStartMode),T.npcType!=="FtkChallenge"&&j.previousNpcDeckId>-1?W=(await e(U)).find(k=>k.id===j.previousNpcDeckId)??W:W=Et.find(k=>k.id===T.id)??W,$(c,new ur(j,"Player",m,[],T,"NPC",W,[],w)),e(c).onDuelEnd.append(()=>($(c,e(c)),"RemoveMe"))},C=async()=>{await Promise.all([re(),Te()]),$(l,"DeckEdit")},X=async m=>{await re(),m.key==="Enter"&&!m.repeat&&(await P).save()},ce=()=>{$(U,ne()),$(c,void 0),$(l,"None")};let $e=Date.now();const ie=m=>{Date.now()-$e<200||($e=Date.now(),$(u,m),ne())},le=m=>{Ae(Number(m.currentTarget.value))},Ae=m=>{var j;$(x,qt.find(T=>T.id===m)),$(V,((j=e(x))==null?void 0:j.description)??"")};Te(),vt();var E=En(),I=i(a(E),2),G=a(I),ve=i(I,2);{var xe=m=>{var j=Me(),T=L(j);ot(T,()=>P,null,(W,w)=>{os(W,{get duel(){return e(c)},get userProfile(){return e(w)}})}),r(m,j)},ue=m=>{var j=Me(),T=L(j);{var W=k=>{ln(k,{})},w=k=>{var Z=Cn(),ke=a(Z),Ce=a(ke),we=a(Ce);ot(we,()=>P,_e=>{var M=Dn();r(_e,M)},(_e,M)=>{var H=wn(),De=L(H),Se=a(De),He=a(Se),Le=i(Se),Ye=a(Le),Pe=a(Ye),Ge=i(De,2);ot(Ge,()=>e(U),f=>{var g=xn();r(f,g)},(f,g)=>{var K=yn(),de=L(K),ee=a(de),he=a(ee),ge=i(ee),Ke=a(ge);se(Ke,5,()=>Ma,oe,(Je,Ue)=>{var Ie=cn(),Oe=L(Ie),Qe=i(Oe,2),Fe=a(Qe);p(Ne=>{ft(Oe,"id",`game_mode_radio_${Ne??""}`),fr(Oe,e(Ue)),pr(Oe,e(u)===e(Ue)),qe(Qe,`game_mode_tab_label game_mode_tab_${Ne??""} svelte-abgng1`),ft(Qe,"for",`game_mode_radio_${Ne??""}`),b(Fe,e(Ue))},[()=>e(Ue).toLowerCase()],pe),be("change",Oe,()=>ie(e(Ue))),r(Je,Ie)});var Be=i(de,2),ze=a(Be),et=a(ze),rt=i(ze),mt=a(rt),Ve=a(mt);p(()=>{e(Y),Lt(()=>{e(u),e(g)})}),se(Ve,5,()=>e(u)==="FtkChallenge"?Et.filter(Je=>Je.deckType==="Preset"):e(g),oe,(Je,Ue)=>{var Ie=_n(),Oe={},Qe=a(Ie);p(()=>{Oe!==(Oe=e(Ue).id)&&(Ie.value=(Ie.__value=e(Ue).id)==null?"":e(Ue).id),b(Qe,e(Ue).name)}),r(Je,Ie)});var Re=i(Be,2);{var Xe=Je=>{var Ue=bn(),Ie=L(Ue),Oe=a(Ie),Qe=a(Oe),Fe=i(Oe),Ne=a(Fe),it=a(Ne);p(()=>{e(M),Lt(()=>{})}),se(it,5,()=>qt,oe,(ht,st)=>{var ut=un(),Tt={},Ut=a(ut);p(()=>{Tt!==(Tt=e(st).id)&&(ut.value=(ut.__value=e(st).id)==null?"":e(st).id),b(Ut,e(st).name)}),r(ht,ut)});var Ze=i(it,2),ct=a(Ze),gt=i(Ie,2);{var _t=ht=>{var st=pn(),ut=a(st),Tt=a(ut),Ut=i(ut),ga=a(Ut),ba=a(ga);p(()=>{e(M),Lt(()=>{e(g)})});var ta=a(ba);ta.value=(ta.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Na=i(ta);se(Na,1,()=>e(g),oe,(aa,Wt)=>{var Kt=fn(),ma={},Pa=a(Kt);p(()=>{ma!==(ma=e(Wt).id)&&(Kt.value=(Kt.__value=e(Wt).id)==null?"":e(Wt).id),b(Pa,e(Wt).name)}),r(aa,Kt)}),te(3,Tt,()=>fe,()=>({duration:200})),te(3,ut,()=>fe,()=>({duration:200})),Nt(ba,()=>e(M).previousNpcDeckId,aa=>e(M).previousNpcDeckId=aa),te(3,ga,()=>fe,()=>({duration:200})),te(3,Ut,()=>fe,()=>({duration:200})),te(3,st,()=>fe,()=>({duration:200})),r(ht,st)};y(gt,ht=>{var st;((st=e(x))==null?void 0:st.npcType)!=="FtkChallenge"&&ht(_t)})}var wt=i(gt,2),$t=a(wt),Ot=a($t),Rt=i($t),fa=a(Rt),pa=a(fa);p(()=>{e(M),Lt(()=>{})}),se(pa,5,()=>la(Ta),oe,(ht,st)=>{var ut=gn(),Tt={},Ut=a(ut);p(()=>{Tt!==(Tt=e(st))&&(ut.value=(ut.__value=e(st))==null?"":e(st)),b(Ut,Ta[e(st)])}),r(ht,ut)}),p(()=>b(ct,`※${e(V)??""}`)),te(3,Qe,()=>fe,()=>({duration:200})),te(3,Oe,()=>fe,()=>({duration:200})),be("change",it,le),Nt(it,()=>e(M).previousNpcId,ht=>e(M).previousNpcId=ht),te(3,Ne,()=>fe,()=>({duration:200})),te(3,Fe,()=>fe,()=>({duration:200})),te(3,Ie,()=>fe,()=>({duration:200})),te(3,Ot,()=>fe,()=>({duration:200})),te(3,$t,()=>fe,()=>({duration:200})),Nt(pa,()=>e(M).previousStartMode,ht=>e(M).previousStartMode=ht),te(3,fa,()=>fe,()=>({duration:200})),te(3,Rt,()=>fe,()=>({duration:200})),te(3,wt,()=>fe,()=>({duration:200})),r(Je,Ue)},pt=Je=>{var Ue=Me(),Ie=L(Ue);{var Oe=Qe=>{var Fe=hn(),Ne=a(Fe),it=a(Ne),Ze=i(Ne),ct=a(Ze),gt=a(ct);p(()=>{e(M),Lt(()=>{})}),se(gt,5,()=>gr,oe,(_t,wt)=>{var $t=mn(),Ot={},Rt=a($t);p(()=>{Ot!==(Ot=e(wt))&&($t.value=($t.__value=e(wt))==null?"":e(wt)),b(Rt,e(wt))}),r(_t,$t)}),te(3,it,()=>fe,()=>({duration:200})),te(3,Ne,()=>fe,()=>({duration:200})),Nt(gt,()=>e(M).previousDifficulty,_t=>e(M).previousDifficulty=_t),te(3,ct,()=>fe,()=>({duration:200})),te(3,Ze,()=>fe,()=>({duration:200})),te(3,Fe,()=>fe,()=>({duration:200})),r(Qe,Fe)};y(Ie,Qe=>{e(u)==="FtkChallenge"&&Qe(Oe)},!0)}r(Je,Ue)};y(Re,Je=>{e(u)==="Free"?Je(Xe):Je(pt,!1)})}var Ct=i(Re,2),kt=a(Ct),xt=a(kt),Mt=a(xt);te(3,he,()=>fe,()=>({duration:200})),te(3,ee,()=>fe,()=>({duration:200})),te(3,Ke,()=>fe,()=>({duration:200})),te(3,ge,()=>fe,()=>({duration:200})),te(3,de,()=>fe,()=>({duration:200})),te(3,et,()=>fe,()=>({duration:200})),te(3,ze,()=>fe,()=>({duration:200})),Nt(Ve,()=>e(Y),Je=>$(Y,Je)),te(3,mt,()=>fe,()=>({duration:200})),te(3,rt,()=>fe,()=>({duration:200})),te(3,Be,()=>fe,()=>({duration:200})),be("click",Mt,S),te(3,xt,()=>fe,()=>({duration:200})),r(f,K)});var Ee=i(Ge,2);{var me=f=>{var g=kn(),K=a(g),de=a(K),ee=a(de);be("click",ee,C),te(3,de,()=>fe,()=>({duration:200})),te(3,K,()=>fe,()=>({duration:200})),te(3,g,()=>fe,()=>({duration:200})),r(f,g)};y(Ee,f=>{e(u)==="Free"&&f(me)})}te(3,He,()=>fe,()=>({duration:200})),te(3,Se,()=>fe,()=>({duration:200})),St(Pe,()=>e(M).name,f=>e(M).name=f),be("keypress",Pe,X),te(3,Ye,()=>fe,()=>({duration:200})),te(3,Le,()=>fe,()=>({duration:200})),te(3,De,()=>fe,()=>({duration:200})),r(_e,H)}),r(k,Z)};y(T,k=>{e(l)==="DeckEdit"?k(W):k(w,!1)},!0)}r(m,j)};y(ve,m=>{e(c)?m(xe):m(ue,!1)})}var A=i(ve,2),h=a(A),q=a(h),R=i(h,2),Q=a(R),D=i(R,2),F=a(D),J=i(A,2);{var ae=m=>{var j=jn(),T=a(j);{var W=M=>{var H=Me(),De=L(H);{var Se=Le=>{var Ye=$n();r(Le,Ye)},He=Le=>{var Ye=Me(),Pe=L(Ye);{var Ge=Ee=>{var me=Sn();r(Ee,me)};y(Pe,Ee=>{e(c).winner.seat==="Above"&&Ee(Ge)},!0)}r(Le,Ye)};y(De,Le=>{e(c).winner.seat==="Below"?Le(Se):Le(He,!1)})}r(M,H)},w=M=>{var H=Mn();r(M,H)};y(T,M=>{e(c).winner?M(W):M(w,!1)})}var k=i(T,2),Z=a(k),ke=i(k,2);{var Ce=M=>{var H=Tn(),De=a(H);p(()=>ft(De,"href",`https://x.com/share?url=${n}&text=${e(c).twitterShareText??""}&hashtags=${z}&via=${N}`)),r(M,H)};y(ke,M=>{e(c).twitterShareText&&M(Ce)})}var we=i(ke,2),_e=a(we);p(()=>b(Z,e(c).reasonOfEnd)),be("click",_e,ce),te(3,j,()=>hr,()=>({delay:200,duration:200})),r(m,j)};y(J,m=>{e(c)&&e(c).isEnded&&m(ae)})}p(()=>{b(q,"build at: 20260102_203032"),b(Q,_r.text),b(F,`w:${e(v)??""}px h:${e(_)??""}px`)}),zt("innerWidth",m=>$(v,m)),zt("innerHeight",m=>$(_,m)),be("click",G,ce),r(d,E),dt()}br(Bn,{target:document.getElementById("app")});
