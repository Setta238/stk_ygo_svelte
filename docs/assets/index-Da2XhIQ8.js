var Ia=Object.defineProperty;var ya=d=>{throw TypeError(d)};var Ha=(d,s,t)=>s in d?Ia(d,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[s]=t;var tt=(d,s,t)=>Ha(d,typeof s!="symbol"?s+"":s,t),xa=(d,s,t)=>s.has(d)||ya("Cannot "+t);var nt=(d,s,t)=>(xa(d,s,"read from private field"),t?t.call(d):s.get(d)),It=(d,s,t)=>s.has(d)?ya("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(d):s.set(d,t),ia=(d,s,t,v)=>(xa(d,s,"write to private field"),v?v.call(d,t):s.set(d,t),t);import{s as ka,r as Oa,a as $,b as Ra,l as Wa,g as e,d as Na,p as lt,c as We,m as ye,i as vt,t as o,e as a,f as y,h as p,j as pe,k as Ne,n as ft,o as be,q as r,u as dt,v as je,D as Ka,w as Me,x as q,y as i,z as se,A as At,B as te,C as oe,E as b,F as za,G as at,H as va,I as Va,J as Ga,K as Yt,L as ot,M as Ht,N as qa,O as da,P as Jt,Q as ca,R as Zt,S as _a,T as ea,U as ta,V as Xa,W as Qa,X as Ja,Y as Za,Z as er,_ as tr,$ as ar,a0 as Vt,a1 as Gt,a2 as sa,a3 as La,a4 as rr,a5 as ir,a6 as jt,a7 as sr,a8 as nr,a9 as or,aa as yt,ab as lr,ac as vr,ad as dr,ae as wa,af as Da,ag as Ca,ah as $a,ai as Sa,aj as Ma,ak as Lt,al as Pt,am as St,an as Et,ao as cr,ap as _r,aq as Ta,ar as qt,as as Bt,at as ur,au as fr,av as pr,aw as gr,ax as ja,ay as br,az as mr}from"../chunk/entity_proc_20260102_205053.js";import"../chunk/json_20260102_205053.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))v(_);new MutationObserver(_=>{for(const c of _)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&v(u)}).observe(document,{childList:!0,subtree:!0});function t(_){const c={};return _.integrity&&(c.integrity=_.integrity),_.referrerPolicy&&(c.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?c.credentials="include":_.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function v(_){if(_.ep)return;_.ep=!0;const c=t(_);fetch(_.href,c)}})();const hr=d=>d;function ua(d){const s=d-1;return s*s*s+1}function Ea(d){const s=typeof d=="string"&&d.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return s?[parseFloat(s[1]),s[2]||"px"]:[d,"px"]}function yr(d,{delay:s=0,duration:t=400,easing:v=hr}={}){const _=+getComputedStyle(d).opacity;return{delay:s,duration:t,easing:v,css:c=>`opacity: ${c*_}`}}function xr(d,{delay:s=0,duration:t=400,easing:v=ua,x:_=0,y:c=0,opacity:u=0}={}){const l=getComputedStyle(d),Y=+l.opacity,V=l.transform==="none"?"":l.transform,x=Y*(1-u),[n,z]=Ea(_),[L,P]=Ea(c);return{delay:s,duration:t,easing:v,css:(O,U)=>`
			transform: ${V} translate(${(1-O)*n}${z}, ${(1-O)*L}${P});
			opacity: ${Y-x*U}`}}function fe(d,{delay:s=0,duration:t=400,easing:v=ua,axis:_="y"}={}){const c=getComputedStyle(d),u=+c.opacity,l=_==="y"?"height":"width",Y=parseFloat(c[l]),V=_==="y"?["top","bottom"]:["left","right"],x=V.map(B=>`${B[0].toUpperCase()}${B.slice(1)}`),n=parseFloat(c[`padding${x[0]}`]),z=parseFloat(c[`padding${x[1]}`]),L=parseFloat(c[`margin${x[0]}`]),P=parseFloat(c[`margin${x[1]}`]),O=parseFloat(c[`border${x[0]}Width`]),U=parseFloat(c[`border${x[1]}Width`]);return{delay:s,duration:t,easing:v,css:B=>`overflow: hidden;opacity: ${Math.min(B*20,1)*u};${l}: ${B*Y}px;padding-${V[0]}: ${B*n}px;padding-${V[1]}: ${B*z}px;margin-${V[0]}: ${B*L}px;margin-${V[1]}: ${B*P}px;border-${V[0]}-width: ${B*O}px;border-${V[1]}-width: ${B*U}px;min-${l}: 0`}}function Ba(d,s){for(const t in s)d[t]=s[t];return d}function kr({fallback:d,...s}){const t=new Map,v=new Map;function _(u,l,Y){const{delay:V=0,duration:x=C=>Math.sqrt(C)*30,easing:n=ua}=Ba(Ba({},s),Y),z=u.getBoundingClientRect(),L=l.getBoundingClientRect(),P=z.left-L.left,O=z.top-L.top,U=z.width/L.width,B=z.height/L.height,re=Math.sqrt(P*P+O*O),ne=getComputedStyle(l),Te=ne.transform==="none"?"":ne.transform,S=+ne.opacity;return{delay:V,duration:typeof x=="function"?x(re):x,easing:n,css:(C,X)=>`
			   opacity: ${C*S};
			   transform-origin: top left;
			   transform: ${Te} translate(${X*P}px,${X*O}px) scale(${C+(1-C)*U}, ${C+(1-C)*B});
		   `}}function c(u,l,Y){return(V,x)=>(u.set(x.key,V),()=>{if(l.has(x.key)){const n=l.get(x.key);return l.delete(x.key),_(n,V,x)}return u.delete(x.key),d&&d(V,x,Y)})}return[c(v,t,!1),c(t,v,!0)]}function Aa(d){return Object.prototype.toString.call(d)==="[object Date]"}function wr(d){return d}function na(d){const s=d-1;return s*s*s+1}function oa(d,s){if(d===s||d!==d)return()=>d;const t=typeof d;if(t!==typeof s||Array.isArray(d)!==Array.isArray(s))throw new Error("Cannot interpolate values of different type");if(Array.isArray(d)){const v=s.map((_,c)=>oa(d[c],_));return _=>v.map(c=>c(_))}if(t==="object"){if(!d||!s)throw new Error("Object cannot be null");if(Aa(d)&&Aa(s)){const c=d.getTime(),l=s.getTime()-c;return Y=>new Date(c+Y*l)}const v=Object.keys(s),_={};return v.forEach(c=>{_[c]=oa(d[c],s[c])}),c=>{const u={};return v.forEach(l=>{u[l]=_[l](c)}),u}}if(t==="number"){const v=s-d;return _=>d+_*v}return()=>s}var Dt,Ft,Ot,Ut;const fa=class fa{constructor(s,t={}){It(this,Dt,ka(void 0));It(this,Ft,ka(void 0));It(this,Ot);It(this,Ut,null);nt(this,Dt).v=nt(this,Ft).v=s,ia(this,Ot,t)}static of(s,t){const v=new fa(s(),t);return Oa(()=>{v.set(s())}),v}set(s,t){var n;$(nt(this,Ft),s);let{delay:v=0,duration:_=400,easing:c=wr,interpolate:u=oa}={...nt(this,Ot),...t};if(_===0)return(n=nt(this,Ut))==null||n.abort(),$(nt(this,Dt),s),Promise.resolve();const l=Ra.now()+v;let Y,V=!1,x=nt(this,Ut);return ia(this,Ut,Wa(z=>{if(z<l)return!0;if(!V){V=!0;const P=nt(this,Dt).v;Y=u(P,s),typeof _=="function"&&(_=_(P,s)),x==null||x.abort()}const L=z-l;return L>_?($(nt(this,Dt),s),!1):($(nt(this,Dt),Y(c(L/_))),!0)})),nt(this,Ut).promise}get current(){return e(nt(this,Dt))}get target(){return e(nt(this,Ft))}set target(s){this.set(s)}};Dt=new WeakMap,Ft=new WeakMap,Ot=new WeakMap,Ut=new WeakMap;let Xt=fa;var Dr=o('<div class="phase_display svelte-1ycsdg6"><span class="svelte-1ycsdg6"> </span> </div>'),Cr=o('<div class="lifepoint_display svelte-1ycsdg6"><div class="svelte-1ycsdg6"> </div> <div class="svelte-1ycsdg6"> </div></div>'),$r=(d,s,t)=>s(e(t)),Sr=o('<div class="svelte-1ycsdg6"><button class="phase_button svelte-1ycsdg6"> </button></div>'),Mr=o("<div><!></div>"),Tr=o('<div class="svelte-1ycsdg6"><!></div>'),jr=o("<div><!></div>"),Er=o('<div class="config_button_wrapper svelte-1ycsdg6"><button id="config_button" class="svelte-1ycsdg6">⚙</button></div>'),Br=o("<!> <!> <!> <!>",1),Ar=o('<div style="position: absolute;" class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Yr=o('<div style="position: absolute; top:0rem" class="svelte-1ycsdg6">｛効果対象｝</div>'),Ur=o('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Nr=o(" <!> 】",1),qr=o('<div style="position: absolute; bottom:0rem" class="svelte-1ycsdg6"> <!></div>'),Lr=o("<!> <!>",1),Pr=o('<div class="badge svelte-1ycsdg6"> </div>'),Fr=o('<div class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Ir=o("<!> <!> <!> <!>",1),Hr=o('<td><div role="listitem"><!></div></td>');function Or(d,s){lt(s,!1);let t=We(s,"view",12),v=We(s,"row",8),_=We(s,"column",8),c=We(s,"selectedEntities",28,()=>[]),u=We(s,"selectedCells",28,()=>[]),l=ye(t().getCell(v(),_())),Y=ye(new Xt(e(l).field.duel.duelists.Above.lp,{duration:400,easing:na})),V=ye(new Xt(e(l).field.duel.duelists.Below.lp,{duration:400,easing:na}));const x=()=>{$(l,t().getCell(v(),_())),je(Y,e(Y).target=e(l).field.duel.duelists.Above.lp),je(V,e(V).target=e(l).field.duel.duelists.Below.lp)};e(l).onUpdate.append(x),t().onDuelUpdate.append(x),t().modalController.onUpdate.append(x);let n,z=ye([]),L=()=>console.log("hoge"),P,O=ye([]),U=ye(!1),B=ye(!1),re=!1;const ne=D=>{var I,J;$(le,[]),c().reset(),n=D.activator,L=D.resolve,$(z,D.dummyActionInfos),$(O,D.chainBlockInfos.flatMap(ae=>ae.selectedEntities).getDistinct()),P=D.entitiesChoices,$(U,!1),$(B,((I=D.cellsChoices)==null?void 0:I.selectables.includes(e(l)))??!1),re=e(B)&&((J=D.cellsChoices)==null?void 0:J.qty)===1,x()};t().onWaitStart.append(ne);const Te=()=>{n=void 0,$(z,[]),L=()=>{console.log("hoge")},P=void 0,$(O,[]),$(U,!1),$(B,!1),re=!1};t().onWaitEnd.append(Te);let S=ye(!1),C=[];const X=D=>{C=D.filter(I=>I.dests.includes(e(l))),$(S,C.length>0),x()},ce=()=>{C=[],$(S,!1),x()};t().onDragStart.append(X),t().onDragEnd.append(ce);const[$e,ie]=Qi;let le=ye([]);const Ae=D=>{if(n=void 0,e(l)===D.to||e(l).entities.includes(D.entity)){$(le,[...e(le),D]);const I=D.resolve;$(l,e(l)),setTimeout(()=>{$(le,e(le).filter(J=>J!==D)),D.count++,D.count>1&&I()},600)}};t().onAnimation.append(Ae);const E=D=>{L({phaseChange:D})},F=()=>e(l).isStackCell&&e(l).entities.flatMap(D=>D.actions).filter(D=>e(z).map(I=>I.action.seq).some(I=>I===D.seq)).length>0,G=D=>{var I;if(((I=D.target)==null?void 0:I.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),re)L({selectedCells:[e(l)]});else if(e(B))$(U,!e(U)),u(e(U)?[...u(),e(l)]:u().filter(J=>J!==e(l)));else if(e(l).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(l),!0),t().requireUpdate();const J=e(l).entities.flatMap(m=>m.actions).map(m=>m.seq),ae=e(z).filter(m=>J.includes(m.action.seq));if(ae.length){if(!n)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:n,dummyActionInfos:ae,cancelable:!0}).then(m=>{m&&L({actionInfo:m})});return}}t().requireUpdate(),console.info(e(l),ue(...e(l).visibleEntities))},ve=D=>{D.preventDefault(),D.dataTransfer&&(D.dataTransfer.dropEffect="move")},xe=D=>{D.preventDefault(),console.info("drop",D,e(S),C),D.dataTransfer&&(D.dataTransfer.dropEffect="move");try{if(e(S)&&C){if(C.length===1){const I=C[0];L({actionInfo:{...I,dest:e(l)}})}else if(C.length>1){if(!n)throw new Ka("想定されない状態");e(l).field.duel.view.modalController.terminateAll(),e(l).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:n,dummyActionInfos:C.map(I=>({...I,dest:e(l)})),cancelable:!1}).then(I=>{L({actionInfo:I})})}}}finally{t().removeDraggingActions()}},ue=(...D)=>{if(t().waitMode==="Animation")return"Disabled";if(P&&P.selectables.find(J=>D.find(ae=>J===ae)))return"Selectable";if(!e(z)||e(z).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(J=>J.state==="Shown"))return"Disabled";const I=e(z).filter(J=>D.includes(J.action.entity));return I.length===0?"Disabled":e(l).isStackCell||I[0].action.entity!==D[0]?"Clickable":I.some(J=>J.dests.length)?"Draggable":"Clickable"};vt();var A=Hr(),h=a(A);h.__click=G;var N=a(h);{var R=D=>{var I=Me(),J=q(I);{var ae=m=>{var j=Me(),T=q(j);{var W=k=>{var Z=Dr(),ke=a(Z),Ce=a(ke),we=i(ke,1,!0);p((_e,M)=>{b(Ce,_e),b(we,M)},[()=>String(e(l).field.duel.clock.turn).padStart(2,"0"),()=>e(l).field.duel.phase.toUpperCase()],pe),r(k,Z)},w=k=>{var Z=Me(),ke=q(Z);{var Ce=_e=>{var M=Cr(),H=a(M),De=a(H),Se=i(H,2),He=a(Se);p((qe,Ye)=>{b(De,qe),b(He,Ye)},[()=>Math.floor(e(Y).current),()=>Math.floor(e(V).current)],pe),r(_e,M)},we=_e=>{var M=Me(),H=q(M);{var De=Se=>{var He=Me(),qe=q(He);{var Ye=Pe=>{var Ge=Me(),Ee=q(Ge);{var me=f=>{var g=Me(),K=q(g);se(K,1,()=>t().duel.nextPhaseList,oe,(de,ee)=>{var he=Sr(),ge=a(he);ge.__click=[$r,E,ee];var Ke=a(ge);p(Be=>b(Ke,Be),[()=>e(ee).toUpperCase()],pe),r(de,he)}),r(f,g)};y(Ee,f=>{t().duel.isEnded||f(me)})}r(Pe,Ge)};y(qe,Pe=>{t().waitMode==="Free"&&Pe(Ye)})}r(Se,He)};y(H,Se=>{e(l).column===5&&Se(De)},!0)}r(_e,M)};y(ke,_e=>{e(l).column===3?_e(Ce):_e(we,!1)},!0)}r(k,Z)};y(T,k=>{e(l).column===1?k(W):k(w,!1)})}r(m,j)};y(J,m=>{e(l).row===3&&m(ae)})}r(D,I)},Q=D=>{var I=Me(),J=q(I);{var ae=j=>{var T=Br();const W=pe(()=>e(le).find(M=>M.to===e(l)));var w=q(T);{var k=M=>{var H=Mr(),De=a(H);At(De,{get entity(){return e(W).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),p(()=>Ne(H,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),te(1,H,()=>ie,()=>({key:e(W).entity.seq})),r(M,H)};y(w,M=>{e(W)&&e(W).index==="Top"&&M(k)})}var Z=i(w,2);se(Z,1,()=>e(l).visibleEntities,oe,(M,H)=>{var De=Me(),Se=q(De);{var He=qe=>{var Ye=Tr(),Pe=a(Ye);const Ge=pe(()=>ue(e(H))),Ee=pe(()=>e(z).filter(me=>me.action.entity===e(H)));At(Pe,{get entity(){return e(H)},get state(){return e(Ge)},get dummyActionInfos(){return e(Ee)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(me){c(me)},$$legacy:!0}),te(2,Ye,()=>$e,()=>({key:e(H).seq})),r(qe,Ye)};y(Se,qe=>{e(le).every(Ye=>Ye.entity.seq!==e(H).seq)&&qe(He)})}r(M,De)});var ke=i(Z,2);{var Ce=M=>{var H=jr(),De=a(H);At(De,{get entity(){return e(W).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),p(()=>Ne(H,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),te(1,H,()=>ie,()=>({key:e(W).entity.seq})),r(M,H)};y(ke,M=>{e(W)&&e(W).index!=="Top"&&M(Ce)})}var we=i(ke,2);{var _e=M=>{var H=Er();r(M,H)};y(we,M=>{e(l).owner.seat==="Below"&&M(_e)})}r(j,T)},m=j=>{var T=Ir();const W=pe(()=>e(le).find(H=>H.to===e(l)));var w=q(T);{var k=H=>{var De=Ar(),Se=a(De);At(Se,{get entity(){return e(W).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),te(1,De,()=>ie,()=>({key:e(W).entity.seq})),r(H,De)};y(w,H=>{e(W)&&e(W).index!=="Top"&&H(k)})}var Z=i(w,2);{var ke=H=>{var De=Lr(),Se=q(De);se(Se,1,()=>e(l).visibleEntities.map((Ye,Pe)=>({index:Pe,entity:Ye})).toReversed(),oe,(Ye,Pe)=>{var Ge=Me(),Ee=q(Ge);{var me=f=>{var g=Ur();const K=pe(()=>!e(l).isStackCell&&e(Pe).index===0?ue(...e(l).visibleEntities):void 0);var de=q(g);{var ee=Be=>{var ze=Yr();r(Be,ze)};y(de,Be=>{e(O).includes(e(Pe).entity)&&Be(ee)})}var he=i(de,2),ge=a(he);const Ke=pe(()=>e(Pe).index===0?e(z).filter(Be=>e(l).visibleEntities.includes(Be.action.entity)):void 0);At(ge,{get entity(){return e(Pe).entity},get state(){return e(K)},get dummyActionInfos(){return e(Ke)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(Be){c(Be)},$$legacy:!0}),p(()=>Ne(he,`duel_card_wrapper ${(e(Pe).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1ycsdg6`)),te(2,he,()=>$e,()=>({key:e(Pe).entity.seq})),r(f,g)};y(Ee,f=>{e(le).every(g=>g.entity.seq!==e(Pe).entity.seq)&&f(me)})}r(Ye,Ge)});var He=i(Se,2);{var qe=Ye=>{var Pe=qr(),Ge=a(Pe),Ee=i(Ge);se(Ee,1,()=>va(e(l).visibleEntities[0].status.maxCounterQty),oe,(me,f)=>{var g=Nr(),K=q(g),de=i(K);{var ee=he=>{var ge=at();p(()=>b(ge,`/${e(l).visibleEntities[0].status.maxCounterQty[e(f)]??""}`)),r(he,ge)};y(de,he=>{(e(l).visibleEntities[0].status.maxCounterQty[e(f)]??9999)<100&&he(ee)})}p((he,ge)=>b(K,`【
              ${he??""}${ge??""} `),[()=>za(e(f)),()=>e(l).visibleEntities[0].counterHolder.getQty(e(f))],pe),r(me,g)}),p(()=>b(Ge,`【${e(l).visibleEntities[0].battlePositionName??""}】 `)),r(Ye,Pe)};y(He,Ye=>{e(l).visibleEntities[0].battlePosition&&Ye(qe)})}r(H,De)};y(Z,H=>{e(l).visibleEntities.length>0&&H(ke)})}var Ce=i(Z,2);{var we=H=>{var De=Pr(),Se=a(De);p(()=>b(Se,e(l).visibleEntities.length)),r(H,De)};y(Ce,H=>{e(l).isStackCell&&H(we)})}var _e=i(Ce,2);{var M=H=>{var De=Fr(),Se=a(De);At(Se,{get entity(){return e(W).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),te(1,De,()=>ie,()=>({key:e(W).entity.seq})),r(H,De)};y(_e,H=>{e(W)&&e(W).index==="Top"&&H(M)})}r(j,T)};y(J,j=>{e(l).cellType==="Hand"?j(ae):j(m,!1)},!0)}r(D,I)};y(N,D=>{e(l).isDisabledCell?D(R):D(Q,!1)})}p(D=>{Ne(A,`${`duel_field_cell duel_field_cell_${e(l).cellType} ${e(l).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1ycsdg6`),ft(A,"colspan",e(l).cellType==="Hand"?7:1),Ne(h,`${D??""} svelte-1ycsdg6`)},[()=>`duel_field_cell_inner_box ${e(l).cellType} ${e(S)?"can_accept_drop":""} ${F()?"can_action":""} ${e(U)?"is_selected":e(B)?"is_selectable":""} `],pe),be("dragover",h,ve),be("drop",h,xe),r(d,A),dt()}Na(["click"]);const Rr=(d,s,t=void 0,v="!!!circular reference!!!")=>{let _=[];return JSON.stringify(d,(c,u)=>{if(typeof u=="object"){if(_.indexOf(u)>-1)return v;_.push(u)}let l=u;if(s&&(l=s(c,u)),typeof l=="function")return l.toString();if(l!==u&&typeof l=="object"){if(_.indexOf(l)>-1)return v;_.push(l)}return l},t)};var Wr=o('<div class="title svelte-14z6bdh"> </div>'),Kr=o('<div class="title svelte-14z6bdh"> </div>'),zr=o('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),Vr=o('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),Gr=o("<div><!> <!></div>"),Xr=o('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),Qr=o("<div><!> <!></div>"),Jr=o("<div><!> <!></div>"),Zr=o('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function ei(d,s){lt(s,!1);let t=ye(void 0),v=We(s,"log",8),_,c=ye([]);const u=()=>{const x=((_==null?void 0:_.seq)??-1)+1;v().records.slice(x).forEach(n=>{if(!_){$(c,[[[[n]]]]),_=n;return}if(!e(c)[n.clock.turn]){je(c,e(c)[n.clock.turn]=[[[n]]]),_=n;return}if(!e(c)[n.clock.turn][n.clock.phaseSeq]){je(c,e(c)[n.clock.turn][n.clock.phaseSeq]=[[n]]),_=n;return}if(_.clock.chainSeq===n.clock.chainSeq&&_.clock.chainBlockSeq===n.clock.chainBlockSeq&&_.duelist===n.duelist){e(c)[n.clock.turn][n.clock.phaseSeq].slice(-1)[0].push(n),_=n;return}e(c)[n.clock.turn][n.clock.phaseSeq].push([n]),_=n}),$(c,e(c)),Va().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};v().onUpdate.append(u),v().duel.view.onDuelUpdate.append(u),u(),vt();var l=Me(),Y=q(l);{var V=x=>{var n=Zr(),z=i(a(n),2);se(z,5,()=>e(c),oe,(L,P)=>{var O=Jr(),U=a(O);{var B=ne=>{var Te=Wr(),S=a(Te);p(()=>b(S,`ターン：${e(P)[0][0][0].clock.turn??""}`)),r(ne,Te)};y(U,ne=>{e(P)[0][0][0].clock.turn>0&&ne(B)})}var re=i(U,2);se(re,1,()=>e(P),oe,(ne,Te)=>{var S=Qr(),C=a(S);{var X=$e=>{var ie=Kr(),le=a(ie);p(()=>b(le,e(Te)[0][0].clock.period.name)),r($e,ie)};y(C,$e=>{e(Te)[0][0].clock.turn>0&&$e(X)})}var ce=i(C,2);se(ce,1,()=>e(Te),oe,($e,ie)=>{var le=Xr();const Ae=pe(()=>{var A;return((A=e(ie).find(h=>h.chainNumber!==void 0))==null?void 0:A.chainNumber)??0});var E=a(le),F=a(E),G=a(F),ve=i(F,2);{var xe=A=>{var h=zr(),N=a(h);p(()=>b(N,`チェーン：${e(Ae)??""}`)),r(A,h)};y(ve,A=>{e(Ae)&&A(xe)})}var ue=i(E,2);se(ue,1,()=>e(ie),oe,(A,h)=>{var N=Gr(),R=a(N);{var Q=ae=>{var m=at();p(()=>b(m,e(h).text)),r(ae,m)},D=ae=>{var m=Me(),j=q(m);{var T=w=>{var k=at();p((Z,ke,Ce)=>b(k,`移動：${Z??""} ${ke??""} ⇒ ${Ce??""}`),[()=>{var Z;return(Z=e(h).mainEntity)==null?void 0:Z.toString()},()=>{var Z;return(Z=e(h).from)==null?void 0:Z.toString()},()=>{var Z;return(Z=e(h).to)==null?void 0:Z.toString()}],pe),r(w,k)},W=w=>{var k=Me(),Z=q(k);{var ke=we=>{var _e=at();p((M,H)=>b(_e,`生成：${M??""} void ⇒ ${H??""}`),[()=>{var M;return(M=e(h).mainEntity)==null?void 0:M.toString()},()=>{var M;return(M=e(h).to)==null?void 0:M.toString()}],pe),r(we,_e)},Ce=we=>{var _e=Me(),M=q(_e);{var H=Se=>{var He=at();p((qe,Ye)=>b(He,`消滅：${qe??""} ${Ye??""} ⇒ void`),[()=>{var qe;return(qe=e(h).mainEntity)==null?void 0:qe.toString()},()=>{var qe;return(qe=e(h).from)==null?void 0:qe.toString()}],pe),r(Se,He)},De=Se=>{var He=at();p(()=>b(He,e(h).text)),r(Se,He)};y(M,Se=>{e(h).type==="EntityDisappear"?Se(H):Se(De,!1)},!0)}r(we,_e)};y(Z,we=>{e(h).type==="EntityAppear"?we(ke):we(Ce,!1)},!0)}r(w,k)};y(j,w=>{e(h).type==="EntityMove"?w(T):w(W,!1)},!0)}r(ae,m)};y(R,ae=>{e(h).type==="ChainBlockHeader"?ae(Q):ae(D,!1)})}var I=i(R,2);{var J=ae=>{var m=Vr(),j=a(m);p(T=>ft(j,"href",T),[()=>window.URL.createObjectURL(new Blob([Rr(e(h).error,(T,W)=>["pool","bundles","duel"].includes(T)||typeof W=="function"?void 0:W,4)],{type:"text/plain"}))],pe),r(ae,m)};y(I,ae=>{e(h).error&&ae(J)})}p(ae=>Ne(N,`duel_log_record duel_log_record_${ae??""} svelte-14z6bdh`),[()=>e(h).type.toSnakeCase()],pe),r(A,N)}),p(()=>{var A,h,N;Ne(le,`duel_log_block_duelist duel_log_block_duelist_${((A=e(ie)[0].duelist)==null?void 0:A.seat)??"system"} svelte-14z6bdh`),Ne(F,`duelist ${((h=e(ie)[0].duelist)==null?void 0:h.seat)??""} svelte-14z6bdh`),b(G,((N=e(ie)[0].duelist)==null?void 0:N.profile.name)||"SYSTEM")}),r($e,le)}),p(()=>Ne(S,`duel_log_block_phase duel_log_block_phase_${e(Te)[0][0].clock.period.key??""} svelte-14z6bdh`)),r(ne,S)}),p(()=>Ne(O,`duel_log_block_turn duel_log_block_turn_${e(P)[0][0][0].clock.turn??""} svelte-14z6bdh`)),r(L,O)}),Ga(z,L=>$(t,L),()=>e(t)),r(x,n)};y(Y,x=>{(v().duel.view.infoBoardState==="Log"||v().duel.view.infoBoardState==="Default")&&x(V)})}r(d,l),dt()}var ti=o("<div><div> </div> <div> </div></div>");function Ya(d,s){lt(s,!1);let t=We(s,"duelist",12),v=ye(0),_=ye();const c=async()=>{const z=t().lp-e(v);if(!e(_)||Math.abs(z)<10){$(v,t().lp),e(_)&&(e(_)(),$(_,void 0));return}$(v,e(v)+Math.floor(Math.random()*z)),await Yt(100),c()},u=()=>{t(t()),!e(_)&&t().lp!==e(v)&&new Promise(z=>{$(_,z),Math.abs(t().lp-e(v)),c()})};t().duel.log.onUpdate.append(u),c(),vt();var l=ti(),Y=a(l),V=a(Y),x=i(Y,2),n=a(x);p(z=>{Ne(l,`duelist duelist_${z??""} svelte-1sy3trd`),Ne(Y,`duelist_name duelist_${z??""}_name svelte-1sy3trd`),b(V,t().profile.name),Ne(x,`duelist_lp ${(e(_)?"vibration":"")??""} svelte-1sy3trd`),b(n,e(v))},[()=>t().seat.toLowerCase()],pe),r(d,l),dt()}const ai=(d,s,t)=>(s(s()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),ri=(d,s,t)=>(s(s()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var ii=o('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),si=o('<div></div> <div class="svelte-1uevs9j"> </div>',1),ni=o("<div> </div>"),oi=o("<div> </div>"),li=o('<div class="duel_card_info_row svelte-1uevs9j"><!> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),vi=o('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),di=o('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),ci=o("<!> <!>",1),_i=o('<pre class="description svelte-1uevs9j"> </pre>'),ui=o('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),fi=o('<pre class="description svelte-1uevs9j"> </pre>'),pi=o('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),gi=o('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),bi=o('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),mi=o("[ <!> ],",1),hi=o('<div class="svelte-1uevs9j"> <!></div>'),yi=o('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),xi=o('<div class="svelte-1uevs9j"> </div>'),ki=o('<div class="svelte-1uevs9j"> </div>'),wi=o('<div class="svelte-1uevs9j"> </div>'),Di=o('<div class="svelte-1uevs9j"> </div>'),Ci=o('<div class="svelte-1uevs9j"> </div>'),$i=o('<div class="svelte-1uevs9j"> </div>'),Si=o('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Mi=o('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Ti=o('<div class="svelte-1uevs9j">※テスト用カードです</div>'),ji=o('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),Ei=o('<div class="duel_card_info_links svelte-1uevs9j"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a> <!></div>'),Bi=o("<!> <!>",1),Ai=o('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Yi(d,s){lt(s,!1);let t=We(s,"entity",8,void 0),v=We(s,"mode",12,"Normal");const _=async()=>{if(!t())return;const x=(await Ht).getCardInfo(t().origin.name);if(x)return x.cardId!==void 0&&!x.description&&!x.pendulumDescription&&await qa([x.cardId]),x},c=()=>t()&&t().entityType==="Card"&&(t().origin.cardId??!1)?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t().origin.cardId}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:"";vt();var u=Me(),l=q(u);{var Y=V=>{var x=Ai();x.__click=[ai,v,t],x.__contextmenu=[ri,v,t];var n=a(x),z=a(n),L=a(z),P=a(L),O=i(z,2),U=a(O),B=a(U),re=i(U,2),ne=a(re),Te=i(O,2);{var S=E=>{var F=ci(),G=q(F);{var ve=h=>{var N=ii(),R=a(N),Q=a(R),D=i(R,2),I=a(D);p(()=>{b(Q,`◀ ${t().psL??""}`),b(I,`${t().psR??""} ▶`)}),r(h,N)};y(G,h=>{var N;(N=t().origin.monsterCategories)!=null&&N.includes("Pendulum")&&h(ve)})}var xe=i(G,2);{var ue=h=>{var N=li(),R=q(N),Q=a(R);se(Q,1,()=>t().attr,oe,(J,ae)=>{var m=si(),j=q(m),T=i(j,2),W=a(T);p(()=>{Ne(j,`monster_attr ${e(ae)??""} svelte-1uevs9j`),b(W,`${da[e(ae)]??""}属性`)}),r(J,m)});var D=i(Q,2);se(D,1,()=>t().types,oe,(J,ae)=>{var m=ni(),j=a(m);p(()=>{Ne(m,`monster_cat ${e(ae)??""} svelte-1uevs9j`),b(j,`${Jt[e(ae)]??""}${ca[e(ae)]??""}族`)}),r(J,m)});var I=i(R,2);se(I,5,()=>t().status.monsterCategories??[],oe,(J,ae)=>{var m=oi(),j=a(m);p(()=>{Ne(m,`monster_cat ${e(ae)??""} svelte-1uevs9j`),b(j,`${Zt[e(ae)]??""}${_a[e(ae)]??""}`)}),r(J,m)}),r(h,N)},A=h=>{var N=Me(),R=q(N);{var Q=I=>{var J=vi(),ae=i(a(J),2),m=a(ae);p(()=>b(m,`${ea[t().status.spellCategory]??""}魔法`)),r(I,J)},D=I=>{var J=Me(),ae=q(J);{var m=j=>{var T=di(),W=i(a(T),2),w=a(W);p(()=>b(w,`${ta[t().status.trapCategory]??""}罠`)),r(j,T)};y(ae,j=>{t().kind==="Trap"&&t().status.trapCategory&&j(m)},!0)}r(I,J)};y(R,I=>{t().kind==="Spell"&&t().status.spellCategory?I(Q):I(D,!1)},!0)}r(h,N)};y(xe,h=>{t().kind==="Monster"?h(ue):h(A,!1)})}r(E,F)};y(Te,E=>{v()!=="Debug"&&E(S)})}var C=i(n,2),X=a(C);{var ce=E=>{var F=pi(),G=q(F);{var ve=A=>{var h=ui(),N=a(h);ot(N,_,R=>{var Q=at('"読み込み中"');r(R,Q)},(R,Q)=>{var D=_i(),I=a(D);p(()=>{var J;return b(I,(J=e(Q))==null?void 0:J.pendulumDescription)}),r(R,D)}),r(A,h)};y(G,A=>{var h;(h=t().status.monsterCategories)!=null&&h.includes("Pendulum")&&A(ve)})}var xe=i(G,2),ue=a(xe);ot(ue,_,A=>{var h=at('"読み込み中"');r(A,h)},(A,h)=>{var N=fi(),R=a(N);p(()=>{var Q;return b(R,(Q=e(h))==null?void 0:Q.description)}),r(A,N)}),r(E,F)},$e=E=>{var F=Me(),G=q(F);{var ve=ue=>{var A=Me(),h=q(A);{var N=R=>{var Q=bi(),D=i(a(Q),2);se(D,5,()=>t().actions,oe,(I,J)=>{var ae=Me();const m=pe(()=>e(J).actionCountUpperBound),j=pe(()=>e(J).actionCount);var T=q(ae);{var W=w=>{var k=gi(),Z=a(k),ke=a(Z),Ce=i(Z,2),we=a(Ce),_e=i(Ce,4),M=a(_e);p(()=>{b(ke,e(J).title),b(we,e(j)),b(M,e(m))}),r(w,k)};y(T,w=>{e(m)!==void 0&&e(j)!==void 0&&w(W)})}r(I,ae)}),r(R,Q)};y(h,R=>{t().actions.some(Q=>Q.actionCountUpperBoundKey)&&R(N)})}r(ue,A)},xe=ue=>{var A=Si(),h=a(A),N=a(h);se(N,0,()=>["info","status"],oe,(Ee,me)=>{var f=yi(),g=q(f),K=a(g),de=i(g,2);se(de,1,()=>Object.entries(t()[me]),oe,(he,ge)=>{let Ke=()=>e(ge)[0],Be=()=>e(ge)[1];var ze=hi(),et=a(ze),rt=i(et);{var mt=Re=>{var Xe=mi(),pt=i(q(Xe));se(pt,1,Be,oe,(Ct,kt)=>{var xt=at();p(Mt=>b(xt,`${Mt??""},`),[()=>e(kt).toString()],pe),r(Ct,xt)}),r(Re,Xe)},Ve=Re=>{var Xe=at();p(pt=>b(Xe,`${pt??""},`),[()=>{var pt;return(pt=Be())==null?void 0:pt.toString()}],pe),r(Re,Xe)};y(rt,Re=>{Array.isArray(Be())?Re(mt):Re(Ve,!1)})}p(()=>b(et,`"${Ke()??""}" : `)),r(he,ze)});var ee=i(de,2);ee.textContent="},",p(()=>b(K,`"${me??""}" :{`)),r(Ee,f)});var R=i(N,2);R.textContent='"actions" :[';var Q=i(R,2);se(Q,1,()=>t().actions,oe,(Ee,me)=>{var f=xi(),g=a(f);p(()=>b(g,`"${e(me).playType??""} ${e(me).title??""}",`)),r(Ee,f)});var D=i(Q,2);D.textContent="],";var I=i(D,2);I.textContent='"substituteEffects" :[';var J=i(I,2);se(J,1,()=>t().substituteEffects,oe,(Ee,me)=>{var f=ki(),g=a(f);p(()=>b(g,`"${e(me).title??""}",`)),r(Ee,f)});var ae=i(J,2);ae.textContent="],";var m=i(ae,2);m.textContent='"continuousEffects" :[';var j=i(m,2);se(j,1,()=>t().continuousEffects,oe,(Ee,me)=>{var f=wi(),g=a(f);p(()=>b(g,`"${e(me).isStarted??""}",`)),r(Ee,f)});var T=i(j,2);T.textContent="],";var W=i(T,2);W.textContent='"procFilters" :[';var w=i(W,2);se(w,1,()=>t().procFilterBundle.operators,oe,(Ee,me)=>{var f=Di(),g=a(f);p(K=>b(g,`"${K??""} ${e(me).title??""} ${e(me).isEffective??""} ",`),[()=>e(me).isSpawnedBy.toString()],pe),r(Ee,f)});var k=i(w,2);k.textContent="],";var Z=i(k,2);Z.textContent='"numericStateOperators" :[';var ke=i(Z,2);se(ke,1,()=>t().numericOprsBundle.operators,oe,(Ee,me)=>{var f=Ci(),g=a(f);p(K=>b(g,`"${K??""} ${e(me).title??""} ${e(me).isEffective??""} ${e(me).isContinuous??""} ${e(me).targetState??""} ${e(me).targetStateGen??""} ",`),[()=>e(me).isSpawnedBy.toString()],pe),r(Ee,f)});var Ce=i(ke,2);Ce.textContent="],";var we=i(Ce,2);we.textContent='"stateOperators" :[';var _e=i(we,2);se(_e,1,()=>t().statusOperatorBundle.operators,oe,(Ee,me)=>{var f=$i(),g=a(f);p(K=>b(g,`"${K??""} ${e(me).title??""} ${e(me).isEffective??""} ",`),[()=>e(me).isSpawnedBy.toString()],pe),r(Ee,f)});var M=i(_e,2);M.textContent="],";var H=i(M,2);H.textContent='"lastMoveLogRecord" :{';var De=i(H,2),Se=a(De),He=i(De,2),qe=a(He),Ye=i(He,2),Pe=a(Ye),Ge=i(Ye,2);Ge.textContent="},",p((Ee,me)=>{b(Se,`"movedBy":"${Ee??""}",`),b(qe,`"movedAs":"${me??""}",`),b(Pe,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var Ee;return(Ee=t().moveLog.latestRecord.movedBy)==null?void 0:Ee.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],pe),r(ue,A)};y(G,ue=>{v()==="Detail"?ue(ve):ue(xe,!1)},!0)}r(E,F)};y(X,E=>{v()==="Normal"?E(ce):E($e,!1)})}var ie=i(C,2),le=a(ie);{var Ae=E=>{var F=Bi(),G=q(F);{var ve=h=>{var N=Mi();r(h,N)};y(G,h=>{t().origin.isOldVersion&&h(ve)})}var xe=i(G,2);{var ue=h=>{var N=Ti();r(h,N)},A=h=>{var N=Ei(),R=a(N),Q=i(R,2);{var D=I=>{var J=ji(),ae=a(J);p(m=>{var j;ft(J,"href",m),b(ae,`⇒${((j=t())!=null&&j.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[c],pe),r(I,J)};y(Q,I=>{t()&&t().entityType==="Card"&&I(D)})}p(()=>ft(R,"href",`https://yugioh-wiki.net/index.php?${t().origin.wikiEncodedName}`)),r(h,N)};y(xe,h=>{t().origin.isForTest?h(ue):h(A,!1)})}r(E,F)};y(le,E=>{t()&&E(Ae)})}p((E,F,G)=>{Ne(x,`duel_card duel_card_info ${t().origin.kind??""} ${E??""} svelte-1uevs9j`),b(P,t().nm),b(B,F),b(ne,G)},[()=>{var E;return(E=t().origin.monsterCategories)==null?void 0:E.join(" ")},()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],pe),r(V,x)};y(l,V=>{t()&&V(Y)})}r(d,u),dt()}Na(["click","contextmenu"]);var Ui=o('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),Ni=o('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),qi=o('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Li(d,s){lt(s,!1);let t=We(s,"cell",12);const v=()=>{t(t())},_=Y=>t().cardEntities.filter(V=>V.face===Y);t().field.duel.view.onDuelUpdate.append(v),vt();var c=Me(),u=q(c);{var l=Y=>{var V=qi(),x=a(V),n=a(x),z=a(n),L=i(n,2),P=a(L),O=i(x,2);se(O,4,()=>["FaceUp","FaceDown"],oe,(U,B)=>{var re=Me(),ne=q(re);{var Te=S=>{var C=Ni(),X=a(C),ce=a(X),$e=i(X,2);se($e,1,()=>_(B).toSorted(Xa),oe,(ie,le)=>{var Ae=Ui(),E=a(Ae);const F=pe(()=>t().owner===t().field.duel.duelists.Below);At(E,{get entity(){return e(le)},get isVisibleForcibly(){return e(F)},isWideMode:!0,cardActionResolve:void 0}),r(ie,Ae)}),p(()=>b(ce,B==="FaceUp"?"表向き":"裏向き")),r(S,C)};y(ne,S=>{_(B).length&&S(Te)})}r(U,re)}),p(()=>{var U;b(z,(U=t().owner)==null?void 0:U.profile.name),b(P,t().cellType)}),r(Y,V)};y(u,Y=>{t().field.duel.view.infoBoardState==="CellInfo"&&Y(l)})}r(d,c),dt()}var Pi=o('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),Fi=o('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function Ii(d,s){lt(s,!1);let t=We(s,"viewController",8),v=We(s,"userProfile",12);vt();var _=Me(),c=q(_);{var u=l=>{var Y=Fi(),V=i(a(Y),2),x=i(a(V),2);se(x,1,()=>Za,oe,(n,z)=>{var L=Pi(),P=a(L),O=a(P),U=i(P,2),B=a(U);p(()=>b(B,Qa[e(z)])),Ja(O,()=>v().chainConfig[e(z)],re=>v(v().chainConfig[e(z)]=re,!0)),be("change",O,()=>v().save()),r(n,L)}),r(l,Y)};y(c,l=>{t().infoBoardState==="Config"&&l(u)})}r(d,_),dt()}function Hi(d,{from:s,to:t},v={}){var{delay:_=0,duration:c=C=>Math.sqrt(C)*120,easing:u=na}=v,l=getComputedStyle(d),Y=l.transform==="none"?"":l.transform,[V,x]=l.transformOrigin.split(" ").map(parseFloat);V/=d.clientWidth,x/=d.clientHeight;var n=Oi(d),z=d.clientWidth/t.width/n,L=d.clientHeight/t.height/n,P=s.left+s.width*V,O=s.top+s.height*x,U=t.left+t.width*V,B=t.top+t.height*x,re=(P-U)*z,ne=(O-B)*L,Te=s.width/t.width,S=s.height/t.height;return{delay:_,duration:typeof c=="function"?c(Math.sqrt(re*re+ne*ne)):c,easing:u,css:(C,X)=>{var ce=X*re,$e=X*ne,ie=C+X*Te,le=C+X*S;return`transform: ${Y} translate(${ce}px, ${$e}px) scale(${ie}, ${le});`}}}function Oi(d){if("currentCSSZoom"in d)return d.currentCSSZoom;for(var s=d,t=1;s!==null;)t*=+getComputedStyle(s).zoom,s=s.parentElement;return t}var Ri=o('<div class="chain_number svelte-lqu21u"> </div>'),Wi=o('<div class="duel_card_row svelte-lqu21u"> </div>'),Ki=o('<div class="appendix svelte-lqu21u"> </div>'),zi=o('<div class="appendix_wrapper svelte-lqu21u"></div>'),Vi=o('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),Gi=o("<div></div>");function Xi(d,s){lt(s,!1);let t=We(s,"duel",8),v=We(s,"position",8,"left");const _=-100,c=()=>v()==="left"?-100:100;let u=ye([]),l=Promise.resolve(),Y=Promise.resolve();const V=1e3,x=500,n=400,z=P=>{const O={...P};O.isKnown=P.chainBlockInfo.action.entity.controller.duelistType==="Player"||P.chainBlockInfo.action.entity.face==="FaceUp",O.chainBlockInfo.onStateChange.append(U=>{if(U==="done"||U==="failed"||U==="negated")return l=l.then(async()=>{const B=new Date().getTime()-O.chainBlockInfo.wasSpawnedAt.getTime();B<V&&await Yt(V-B),$(u,e(u).filter(re=>re.seq!==O.seq)),await Yt(x+n)}).then(),"RemoveMe";$(u,e(u))}),Y=Y.then(async()=>{$(u,[O,...e(u)].sort((U,B)=>er.isSameChain(U.clock,B.clock)&&U.chainBlockInfo.action.isWithChainBlock&&B.chainBlockInfo.action.isWithChainBlock?B.clock.totalProcSeq-U.clock.totalProcSeq:U.clock.totalProcSeq-B.clock.totalProcSeq)),await Yt(300)}),l=l.then(()=>Yt(1e3))};t().chainBlockLog.onInsert.append(z),vt();var L=Gi();se(L,13,()=>e(u),P=>P.seq,(P,O)=>{var U=Vi();const B=pe(()=>{const{activator:G,action:ve,appendix:xe}=e(O).chainBlockInfo;return{activator:G,action:ve,appendix:xe}});var re=a(U),ne=a(re);{var Te=G=>{var ve=Ri(),xe=a(ve);p(()=>b(xe,`チェーン：${e(O).chainBlockInfo.chainNumber??""}`)),r(G,ve)};y(ne,G=>{e(O).chainBlockInfo.chainNumber&&G(Te)})}var S=i(ne,2),C=a(S),X=i(S,2),ce=a(X);{var $e=G=>{var ve=Wi(),xe=a(ve);p(()=>b(xe,e(O).isKnown?e(B).action.entity.nm:"？？？")),r(G,ve)};y(ce,G=>{(e(B).action.entity.entityType==="Card"||e(B).action.entity.entityType==="Token")&&G($e)})}var ie=i(ce,2),le=a(ie),Ae=a(le),E=i(le,2);{var F=G=>{var ve=zi();se(ve,5,()=>e(B).appendix,oe,(xe,ue)=>{var A=Ki(),h=a(A);p(()=>b(h,e(ue))),r(xe,A)}),r(G,ve)};y(E,G=>{e(B).appendix&&G(F)})}p((G,ve,xe)=>{Ne(U,`cut_in_row ${(!e(O).chainBlockInfo.chainNumber||e(O).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Ne(re,`cut_in_item cut_in_item_${G??""} cut_in_item_${e(O).chainBlockInfo.state??""} svelte-lqu21u`),Ne(S,`duelist_name duelist_${G??""}_name svelte-lqu21u`),b(C,e(B).activator.profile.name),Ne(X,`duel_card duel_card_${G??""} ${ve??""} ${(e(O).isKnown?e(B).action.entity.origin.kind:"")??""} ${e(B).action.entity.entityType??""}  svelte-lqu21u`),b(Ae,xe)},[()=>e(B).activator.seat.toLowerCase(),()=>e(O).isKnown?(e(B).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(B).action.toString()],pe),te(3,re,()=>xr,()=>new Date().getTime()-e(O).chainBlockInfo.wasSpawnedAt.getTime()<V?{x:c(),duration:n}:{y:_,duration:n}),tr(U,()=>Hi,()=>({duration:x})),r(P,U)}),p(()=>Ne(L,`cut_in_container cut_in_container_${v()??""} svelte-lqu21u`)),r(d,L),dt()}const Qi=kr({duration:400});var Ji=o('<div class="duel_desk_left v_flex svelte-1i63tk9"><!> <!> <!></div>'),Zi=o('<button class="duel_field_header_message svelte-1i63tk9"> </button> <div class="duel_field_header_buttons svelte-1i63tk9"><button class="svelte-1i63tk9">サレンダー</button></div>',1),es=o("<tr></tr>"),ts=o('<table class="duel_field svelte-1i63tk9"><tbody class="svelte-1i63tk9"></tbody></table>'),as=o('<button class="svelte-1i63tk9">OK</button>'),rs=o('<button class="svelte-1i63tk9">cancel</button>'),is=o("<!> <!>",1),ss=o('<button class="svelte-1i63tk9"> </button>'),ns=o('<div style="text-align: left;"><!> <!> <!></div>'),os=o('<div><!> <div class=" duel_desk_center v_flex svelte-1i63tk9"><div class="duel_field_header svelte-1i63tk9"><!></div> <div class="duel_field_body svelte-1i63tk9"><!></div> <div class="duel_field_footer svelte-1i63tk9"><!></div></div> <!></div> <div style="position:fixed;left:0;bottom:0"> </div> <!> <div><!></div>',1);function ls(d,s){lt(s,!1);let t=We(s,"duel",12),v=We(s,"userProfile",8),_=ye(0),c=ye(0),u=ye([]),l=ye([]),Y=()=>{},V=ye([]),x=ye(),n=ye(),z=ye(()=>!1),L=ye(!1);const P=w=>{Y=w.resolve,$(V,w.dummyActionInfos.filter(k=>k.action.entity.entityType==="Duelist").filter(k=>k.action.entity.controller.seat==="Below")),$(x,void 0),$(n,void 0),$(l,[]),$(u,[]),$(L,!1),w.entitiesChoices&&($(x,w.entitiesChoices),$(z,()=>{var k;return((k=w.entitiesChoices)==null?void 0:k.validator(e(u)))??!1}),$(L,w.entitiesChoices.cancelable),e(x).selectables.every(k=>k.cell.isPlayFieldCell&&k.getIndexInCell()===0||k.cell.cellType==="Hand"&&k.controller.duelistType==="Player"||k.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:w.entitiesChoices,chainBlockInfos:w.chainBlockInfos,cancelable:w.entitiesChoices.cancelable}).then(k=>{Y({selectedEntities:k})})),w.cellsChoices&&($(n,w.cellsChoices),$(z,()=>{var k;return((k=w.cellsChoices)==null?void 0:k.validator(e(l)))??!1}),$(L,w.cellsChoices.cancelable))};t().view.onWaitStart.append(P);const O=()=>{Y=()=>{},$(n,void 0),$(x,void 0),$(l,[]),$(u,[]),$(z,()=>!1),$(L,!1)};t().view.onWaitEnd.append(O);let U=ye(void 0),B=ye("Normal");const re=({card:w,mode:k})=>{$(U,w),$(B,k??(e(U)===w||e(B)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(re);const ne=()=>{t(t())};t().view.onDuelUpdate.append(ne),t().log.onUpdate.append(ne);const Te=()=>{e(x)&&e(x).validator(e(u))&&Y({selectedEntities:e(u)}),e(n)&&e(n).validator(e(l))&&Y({selectedCells:e(l)})},S=()=>{Y({})},C=w=>{Y({actionInfo:w})},X=()=>{Y({surrender:!0})};t().main();const ce=()=>e(_)<=1400?"compact":"wide";vt();var $e=os(),ie=q($e),le=a(ie);{var Ae=w=>{var k=Ji(),Z=a(k);Ya(Z,{get duelist(){return t().duelists.Above}});var ke=i(Z,2);Yi(ke,{get entity(){return e(U)},get mode(){return e(B)}});var Ce=i(ke,2);Ya(Ce,{get duelist(){return t().duelists.Below}}),r(w,k)};y(le,w=>{ce()==="wide"&&w(Ae)})}var E=i(le,2),F=a(E),G=a(F);{var ve=w=>{var k=Zi(),Z=q(k),ke=a(Z),Ce=i(Z,2),we=a(Ce);p(()=>b(ke,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),be("click",Z,()=>{t(t().view.infoBoardState="Log",!0)}),be("click",we,X),r(w,k)};y(G,w=>{t().isEnded||w(ve)})}var xe=i(F,2),ue=a(xe);{var A=w=>{var k=ts(),Z=a(k);se(Z,5,()=>t().field.cells,oe,(ke,Ce,we)=>{var _e=es();Ne(_e,`${`duel_desk_row_${we}`??""} svelte-1i63tk9`),se(_e,5,()=>e(Ce),oe,(M,H,De)=>{Or(M,{get view(){return t().view},row:we,column:De,get selectedEntities(){return e(u)},set selectedEntities(Se){$(u,Se)},get selectedCells(){return e(l)},set selectedCells(Se){$(l,Se)},$$legacy:!0})}),r(ke,_e)}),r(w,k)};y(ue,w=>{t().clock.turn>0&&w(A)})}var h=i(xe,2),N=a(h);{var R=w=>{var k=is(),Z=q(k);{var ke=_e=>{var M=as();p(H=>M.disabled=H,[()=>!e(z)()],pe),be("click",M,Te),r(_e,M)};y(Z,_e=>{((e(x)&&e(x).qty)??(e(n)&&e(n).qty)??9999)>1&&_e(ke)})}var Ce=i(Z,2);{var we=_e=>{var M=rs();be("click",M,S),r(_e,M)};y(Ce,_e=>{e(L)&&_e(we)})}r(w,k)},Q=w=>{var k=Me(),Z=q(k);se(Z,1,()=>e(V),oe,(ke,Ce)=>{var we=ss(),_e=a(we);p(()=>b(_e,e(Ce).action.title)),be("click",we,()=>C(e(Ce))),r(ke,we)}),r(w,k)};y(N,w=>{e(x)&&e(x).selectables.length||e(n)&&e(n).selectables?w(R):w(Q,!1)})}var D=i(E,2);{var I=w=>{var k=ns(),Z=a(k);ei(Z,{get log(){return t().log}});var ke=i(Z,2);Li(ke,{get cell(){return t().view.infoBoardCell}});var Ce=i(ke,2);Ii(Ce,{get userProfile(){return v()},get viewController(){return t().view}}),p(we=>Ne(k,`duel_desk_right duel_desk_right_${we??""}  svelte-1i63tk9`),[()=>t().view.infoBoardState.toLowerCase()],pe),te(3,k,()=>fe,()=>({duration:e(_)>1400?0:200,axis:"x"})),r(w,k)};y(D,w=>{(e(_)>1400||t().view.infoBoardState!=="Default")&&w(I)})}var J=i(ie,2),ae=a(J),m=i(J,2);ar(m,{get modalController(){return t().view.modalController}});var j=i(m,2),T=a(j);const W=pe(()=>ce()==="wide"?"right":"left");Xi(T,{get duel(){return t()},get position(){return e(W)}}),p((w,k)=>{Ne(ie,`flex duel_desk ${w??""}_mode svelte-1i63tk9`),b(ae,k),Ne(j,`cutin ${w??""}_mode svelte-1i63tk9`)},[ce,()=>t().clock.toFullString()],pe),Vt("innerWidth",w=>$(_,w)),Vt("innerHeight",w=>$(c,w)),r(d,$e),dt()}var vs=o('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),ds=o('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),cs=o("<div></div>"),_s=o("<!> <!> <!> <!> <!>",1),us=o('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),fs=o('<li class="deck_editor_item svelte-niobyr"><div role="listitem"><div class="svelte-niobyr"><div class="svelte-niobyr"> </div> <div style="display:flex" class="svelte-niobyr"><div class="svelte-niobyr"><!> <!> <!></div> <div style="flex-grow: 1; width:0.1rem" class="svelte-niobyr"></div> <div class="svelte-niobyr"><!></div></div></div></div> <button class="button_style_reset svelte-niobyr">+</button> <button class="button_style_reset svelte-niobyr">-</button></li>'),ps=o('<div class="deck_editor_card_kind svelte-niobyr"><div class="deck_editor_card_kind_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <ul class="svelte-niobyr"></ul></div>'),gs=o('<div class="deck_editor_deck_type svelte-niobyr"><div class="deck_editor_deck_type_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <!></div>'),bs=o('<div class="svelte-niobyr">読み込み中...</div>'),ms=o('<div class="deck_editor_card_list svelte-niobyr"><!></div>');function Ua(d,s){lt(s,!1);let t=We(s,"allCardInfos",8),v=We(s,"deckCardInfos",12),_=We(s,"mode",8),c=We(s,"onAttention",8),u=We(s,"searchCondition",8,void 0);const l={Deck:["Monster","Spell","Trap"],ExtraDeck:["Monster"]},Y={Deck:{Monster:[],Spell:[],Trap:[]},ExtraDeck:{Monster:[],Spell:[],Trap:[]}},V=S=>{var C;return(C=S.monsterCategories)!=null&&C.union(Gt).length?"ExtraDeck":"Deck"},x=S=>{Object.values(Y).forEach(C=>Object.values(C).forEach(X=>X.reset())),S.filter(C=>C.kind!=="XyzMaterial").forEach(C=>{var ce;if(C.kind==="XyzMaterial")return;const X=(ce=C.monsterCategories)!=null&&ce.union(Gt).length?"ExtraDeck":"Deck";Y[X][C.kind].push(C)}),Object.values(Y).forEach(C=>Object.values(C).forEach(X=>X.sort(sa)))},n=_()==="List"?new Promise(S=>{x(t()),S()}):Promise.resolve(),z=()=>(_()==="Deck"&&(x(v()),$(U,v().length)),Y),L=(S,C,X)=>{v(v().filter(ce=>V(ce)!==C||ce.kind!==X&&X))},P=(S,C)=>{try{if(S.ctrlKey){v().push(C);return}const X=v().filter($e=>$e.name===C.name).length;if(X>2)return;const ce=S.shiftKey?3-X:1;if(ce<1)return;v().push(...Array(ce).fill(C))}finally{v().sort(sa),v(v())}},O=(S,C)=>{let X=0;v(v().filter(ce=>ce.name!==C.name?!0:(X++,!S.shiftKey&&X>1))),v().sort(sa)};let U=ye(100);const B=()=>{e(U)>t().length+v().length||($(U,e(U)+100),Yt(100).then(B))},re=(S,C,X,ce)=>{if(C===0&&ce==="Monster"&&($(U,100),Yt(100).then(B)),!u())return!0;if(!u().cardKinds.includes(S.kind)||u().name.trim().length&&[S.name,...S.nameTags??[],...S.textTags??[]].every(ie=>!ie.includes(u().name))||!S.isImplemented&&!u().others.includes("implemented")||S.isForTest&&!u().others.includes("test")||S.isOldVersion&&!u().others.includes("oldVersion"))return!1;if(S.kind==="Monster")return S.attributes&&!u().monsterAttributes.union(S.attributes).length||S.types&&!u().monsterTypes.union(S.types).length||jt(u().atkLowerBound)&&(S.attack??0)<u().atkLowerBound||jt(u().atkUpperBound)&&(S.attack??0)>u().atkUpperBound||jt(u().defLowerBound)&&(S.defense??0)<u().defLowerBound||jt(u().defUpperBound)&&(S.defense??0)>u().defUpperBound||jt(u().atkPlusDef)&&(!jt(S.attack)||!jt(S.defense)||S.attack+S.defense!==u().atkPlusDef)||!S.monsterCategories?!1:S.monsterCategories.union(u().monsterCategories).length;if(S.kind==="Spell")return S.spellCategory&&u().spellCategories.includes(S.spellCategory);if(S.kind==="Trap")return S.trapCategory&&u().trapCategories.includes(S.trapCategory)};vt();var ne=ms(),Te=a(ne);ot(Te,()=>n,S=>{var C=bs();r(S,C)},S=>{var C=Me();const X=pe(z);var ce=q(C);se(ce,1,()=>ir,oe,($e,ie)=>{var le=gs();const Ae=pe(()=>Object.values(e(X)[e(ie)]).flatMap(A=>A));var E=a(le),F=a(E),G=a(F),ve=i(F,2);{var xe=A=>{var h=vs(),N=a(h);be("click",N,R=>L(R,e(ie),void 0)),r(A,h)};y(ve,A=>{_()==="Deck"&&e(Ae).some(re)&&A(xe)})}var ue=i(E,2);se(ue,1,()=>va(e(X)[e(ie)]).filter(A=>l[e(ie)].includes(A)),oe,(A,h)=>{var N=ps();const R=pe(()=>e(X)[e(ie)][e(h)].filter((...j)=>re(...j,e(h))));var Q=a(N),D=a(Q),I=a(D),J=i(D,2);{var ae=j=>{var T=ds(),W=a(T);be("click",W,w=>L(w,e(ie),e(h))),r(j,T)};y(J,j=>{_()==="Deck"&&e(R).length&&j(ae)})}var m=i(Q,2);se(m,5,()=>e(R),oe,(j,T,W)=>{var w=Me(),k=q(w);{var Z=ke=>{var Ce=fs(),we=a(Ce),_e=a(we),M=a(_e),H=a(M),De=i(M,2),Se=a(De),He=a(Se);{var qe=ee=>{var he=_s(),ge=q(he);{var Ke=Ve=>{var Re=at();p(()=>b(Re,`★${e(T).level??""}`)),r(Ve,Re)};y(ge,Ve=>{e(T).level&&Ve(Ke)})}var Be=i(ge,2);{var ze=Ve=>{var Re=at();p(()=>b(Re,`☆${e(T).rank??""}`)),r(Ve,Re)};y(Be,Ve=>{e(T).rank&&Ve(ze)})}var et=i(Be,2);se(et,1,()=>e(T).attributes??[],oe,(Ve,Re)=>{var Xe=cs();p(()=>Ne(Xe,`monster_attr ${e(Re)??""} svelte-niobyr`)),r(Ve,Xe)});var rt=i(et,2);se(rt,1,()=>e(T).types??[],oe,(Ve,Re)=>{var Xe=at();p(()=>b(Xe,Jt[e(Re)])),r(Ve,Xe)});var mt=i(rt,2);se(mt,1,()=>e(T).monsterCategories??[],oe,(Ve,Re)=>{var Xe=at();p(()=>b(Xe,Zt[e(Re)])),r(Ve,Xe)}),r(ee,he)};y(He,ee=>{e(T).kind==="Monster"&&ee(qe)})}var Ye=i(He,2);{var Pe=ee=>{var he=at();p(()=>b(he,`${ea[e(T).spellCategory]??""}魔法`)),r(ee,he)};y(Ye,ee=>{e(T).spellCategory&&ee(Pe)})}var Ge=i(Ye,2);{var Ee=ee=>{var he=at();p(()=>b(he,`${ta[e(T).trapCategory]??""}罠`)),r(ee,he)};y(Ge,ee=>{e(T).trapCategory&&ee(Ee)})}var me=i(Se,4),f=a(me);{var g=ee=>{var he=us(),ge=q(he),Ke=a(ge),Be=i(ge,2),ze=a(Be);p(()=>{b(Ke,e(T).attack??"?"),b(ze,e(T).defense??"?")}),r(ee,he)};y(f,ee=>{e(T).kind==="Monster"&&ee(g)})}var K=i(we,2),de=i(K,2);p(ee=>{Ne(we,`${ee??""} svelte-niobyr`),b(H,e(T).name),K.disabled=!e(T).isImplemented,ft(K,"title",e(T).isImplemented?"※shiftキー同時押しで一括投入":""),de.disabled=!e(T).isImplemented,ft(de,"title",e(T).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>{var ee,he;return`deck_editor_card duel_card ${e(T).kind} ${(he=(ee=e(T))==null?void 0:ee.monsterCategories)==null?void 0:he.join(" ")} ${e(T).isImplemented?"is_implemented":"is_not_implemented"}`}],pe),be("mouseenter",we,()=>c()(e(T))),be("click",K,ee=>P(ee,e(T))),be("click",de,ee=>O(ee,e(T))),r(ke,Ce)};y(k,ke=>{W<e(U)&&ke(Z)})}r(j,w)}),p(()=>b(I,`${La[e(h)]??""}（${e(R).length??""} / ${e(X)[e(ie)][e(h)].length??""}枚）`)),r(A,N)}),p(A=>b(G,`${rr[e(ie)]??""}（${A??""} / ${e(Ae).length??""}枚）`),[()=>e(Ae).filter(re).length],pe),r($e,le)}),r(S,C)}),r(d,ne),dt()}var hs=o('<div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>'),ys=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),xs=o('<div></div> <div class="svelte-rccxcp"> </div>',1),ks=o("<div> </div>"),ws=o("<div> </div>"),Ds=o('<div class="duel_card_info_row svelte-rccxcp"><!> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),Cs=o('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),$s=o('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Ss=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※エラッタ前カードです</div></div>'),Ms=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),Ts=o('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),js=o('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <!></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!> <!></div></div>');function Es(d,s){lt(s,!1);let t=We(s,"cardInfo",8,void 0);vt();var v=Me(),_=q(v);{var c=u=>{var l=js(),Y=a(l),V=a(Y),x=a(V),n=a(x),z=i(V,2);{var L=E=>{var F=hs(),G=a(F),ve=a(G),xe=i(G,2),ue=a(xe);p((A,h)=>{b(ve,A),b(ue,h)},[()=>"★".repeat(t().level||0),()=>"☆".repeat(t().rank||0)],pe),r(E,F)};y(z,E=>{t().kind==="Monster"&&E(L)})}var P=i(Y,2),O=a(P);{var U=E=>{var F=ys(),G=q(F),ve=a(G),xe=a(ve),ue=a(xe),A=i(G,2),h=a(A),N=a(h),R=i(h,2),Q=a(R);p(()=>{b(ue,t().pendulumDescription),b(N,`◀ ${t().pendulumScaleL??""}`),b(Q,`${t().pendulumScaleR??""} ▶`)}),r(E,F)};y(O,E=>{var F;(F=t().monsterCategories)!=null&&F.includes("Pendulum")&&E(U)})}var B=i(O,2);{var re=E=>{var F=Ds(),G=q(F),ve=a(G);{var xe=N=>{var R=xs(),Q=q(R),D=i(Q,2),I=a(D);p(()=>{Ne(Q,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),b(I,`${da[t().attributes[0]]??""}属性`)}),r(N,R)};y(ve,N=>{t().attributes&&N(xe)})}var ue=i(ve,2);{var A=N=>{var R=ks(),Q=a(R);p(()=>{Ne(R,`monster_cat ${t().types[0]??""} svelte-rccxcp`),b(Q,`${Jt[t().types[0]]??""}${ca[t().types[0]]??""}族`)}),r(N,R)};y(ue,N=>{t().types&&N(A)})}var h=i(G,2);se(h,5,()=>t().monsterCategories??[],oe,(N,R)=>{var Q=ws(),D=a(Q);p(()=>{Ne(Q,`monster_cat ${e(R)??""} svelte-rccxcp`),b(D,`${Zt[e(R)]??""}${_a[e(R)]??""}`)}),r(N,Q)}),r(E,F)},ne=E=>{var F=Me(),G=q(F);{var ve=ue=>{var A=Cs(),h=i(a(A),2),N=a(h);p(()=>b(N,`${ea[t().spellCategory]??""}魔法`)),r(ue,A)},xe=ue=>{var A=Me(),h=q(A);{var N=R=>{var Q=$s(),D=i(a(Q),2),I=a(D);p(()=>b(I,`${ta[t().trapCategory]??""}罠`)),r(R,Q)};y(h,R=>{t().kind==="Trap"&&t().trapCategory&&R(N)},!0)}r(ue,A)};y(G,ue=>{t().kind==="Spell"&&t().spellCategory?ue(ve):ue(xe,!1)},!0)}r(E,F)};y(B,E=>{t().kind==="Monster"?E(re):E(ne,!1)})}var Te=i(B,2),S=a(Te),C=a(S),X=a(C),ce=i(Te,2);{var $e=E=>{var F=Ss();r(E,F)};y(ce,E=>{t().isOldVersion&&E($e)})}var ie=i(ce,2);{var le=E=>{var F=Ms();r(E,F)},Ae=E=>{var F=Ts(),G=a(F),ve=i(G,2),xe=a(ve);p(ue=>{ft(G,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),ft(ve,"href",ue),b(xe,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>sr(t())],pe),r(E,F)};y(ie,E=>{t().isForTest?E(le):E(Ae,!1)})}p(E=>{Ne(l,`duel_card duel_card_info ${t().kind??""} ${E??""} svelte-rccxcp`),b(n,t().name),b(X,t().description)},[()=>{var E;return(E=t().monsterCategories)==null?void 0:E.join(" ")}],pe),r(u,l)};y(_,u=>{t()&&u(c)})}r(d,v),dt()}const Bs={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class As{constructor(){tt(this,"DefaultSeparator1","/");tt(this,"DefaultSeparator2"," ");tt(this,"DefaultSeparator3",":");tt(this,"createDate",s=>{if(!s)return;const t=new Date(s);if(!isNaN(t.getTime()))return t});tt(this,"createDateOr",(s,t)=>this.createDate(s)||t||new Date);tt(this,"truncateDate",s=>{const t=s||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});tt(this,"addDate",(s,t)=>{const v=this.createDateOr(s);return v.setDate(v.getDate()+t),v});tt(this,"addMonth",(s,t)=>{const v=this.createDateOr(s);return v.setMonth(v.getMonth()+t),v});tt(this,"addYear",(s,t)=>{const v=this.createDateOr(s);return v.setFullYear(v.getFullYear()+t),v});tt(this,"getDayOfWeek",(s,t="dddd")=>{const v=this.createDate(s);return v?Bs[v.getDay()][t]:""});tt(this,"formatToYYYYMMDD",(s,t=this.DefaultSeparator1)=>{const v=this.createDate(s);if(!v)return"";const _=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2),u=("0"+v.getDate()).slice(-2);return _+t+c+t+u});tt(this,"formatToYYYYMM",(s,t=this.DefaultSeparator1)=>{const v=this.createDate(s);if(!v)return"";t||(t="");const _=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2);return _+t+c});tt(this,"formatToHHMMSS",(s,t=this.DefaultSeparator3)=>{const v=this.createDate(s);if(!v)return"";t||(t="");const _=v.getHours(),c=v.getMinutes(),u=v.getSeconds();return("0"+_).slice(-2)+t+("0"+c).slice(-2)+t+("0"+u).slice(-2)});tt(this,"formatToHHMM",(s,t=this.DefaultSeparator3)=>{const v=this.createDate(s);if(!v)return"";t||(t="");const _=("0"+v.getHours()).slice(-2),c=("0"+v.getMinutes()).slice(-2);return _+t+c});tt(this,"formatToYYYYMMDD_HHMM",(s,t=this.DefaultSeparator1,v=this.DefaultSeparator2,_=this.DefaultSeparator3)=>{const c=this.createDate(s);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMM(c,_):""});tt(this,"formatToYYYYMMDD_HHMMSS",(s,t=this.DefaultSeparator1,v=this.DefaultSeparator2,_=this.DefaultSeparator3)=>{const c=this.createDate(s);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMMSS(c,_):""})}}const bt=new As;Date.prototype.truncateDate=function(){return bt.truncateDate(this)};Date.prototype.getCloneOr=function(d){return bt.createDateOr(this,d)};Date.prototype.addDate=function(d){return bt.addDate(this,d)};Date.prototype.addMonth=function(d){return bt.addDate(this,d)};Date.prototype.addYear=function(d){return bt.addDate(this,d)};Date.prototype.getDayOfWeek=function(d="dddd"){return bt.getDayOfWeek(this,d)};Date.prototype.formatToYYYYMM=function(d){return bt.formatToYYYYMM(this,d)};Date.prototype.formatToYYYYMMDD=function(d){return bt.formatToYYYYMMDD(this,d)};Date.prototype.formatToYYYYMMDD_HHMM=function(d,s,t){return bt.formatToYYYYMMDD_HHMM(this,d,s,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(d,s,t){return bt.formatToYYYYMMDD_HHMMSS(this,d,s,t)};Date.prototype.formatToHHMM=function(d){return bt.formatToHHMM(this,d)};Date.prototype.formatToHHMMSS=function(d){return bt.formatToHHMMSS(this,d)};var Ys=o('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),Us=o('<ul class="deck_info_list svelte-2wdgc8"></ul>'),Ns=o('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),qs=o('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),Ls=o('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),Ps=o('<button class="svelte-2wdgc8">Cancel</button>'),Fs=o('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function Is(d,s){lt(s,!1);let t=We(s,"eventHolder",8),v=We(s,"args",8),_=We(s,"resolve",8),c=ye(Promise.resolve([])),u=ye();const l=()=>{$(u,new DataTransfer().files),$(c,Promise.resolve([]))},Y=async L=>{L.preventDefault(),console.log("hoge",L)},V=async L=>{L.preventDefault(),L.dataTransfer&&n(L.dataTransfer.files)},x=()=>{n(e(u))},n=async L=>{if(!L.length)return;const P=[],O=[];for(const U of L)try{O.push(...await yt.createfromJson(U))}catch(B){B instanceof Error&&P.push(B.message)}if(P.length){console.log(...P);return}$(c,e(c).then(()=>O))},z=l;vt(),nr(d,{get eventHolder(){return t()},get args(){return v()},$$slots:{body:(L,P)=>{var O=qs(),U=a(O);ot(U,()=>Ht,null,(B,re)=>{var ne=Me(),Te=q(ne);ot(Te,()=>e(c),null,(S,C)=>{var X=Me(),ce=q(X);{var $e=le=>{var Ae=Us();se(Ae,5,()=>e(C),oe,(E,F)=>{var G=Ys(),ve=a(G),xe=a(ve),ue=i(ve,2),A=a(ue),h=i(ue,2),N=a(h);p((R,Q,D)=>{b(xe,e(F).name),b(A,`${R??""}
                  /
                  ${Q??""}`),b(N,`最終使用日時 ： ${D??""}`)},[()=>e(F).cardNames.filter(R=>{var Q,D;return!((D=(Q=e(re).getCardInfo(R))==null?void 0:Q.monsterCategories)!=null&&D.union(Gt).length)}).length,()=>e(F).cardNames.filter(R=>{var Q,D;return(D=(Q=e(re).getCardInfo(R))==null?void 0:Q.monsterCategories)==null?void 0:D.union(Gt).length}).length,()=>e(F).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],pe),r(E,G)}),r(le,Ae)},ie=le=>{var Ae=Ns(),E=i(a(Ae),2),F=a(E);or(F,()=>e(u),G=>$(u,G)),be("change",F,x),be("cancel",F,z),be("drop",Ae,V),be("dragover",Ae,Y),r(le,Ae)};y(ce,le=>{e(C).length?le($e):le(ie,!1)})}r(S,X)}),r(B,ne)}),r(L,O)},footer:(L,P)=>{var O=Fs(),U=a(O);ot(U,()=>e(c),null,(B,re)=>{var ne=Me(),Te=q(ne);{var S=X=>{var ce=Ls(),$e=q(ce),ie=i($e,2),le=i(ie,2);p(()=>{$e.disabled=e(re).length===0,ie.disabled=e(re).length===0}),be("click",$e,()=>_()({deckInfos:e(re),replaceAll:!1})),be("click",ie,()=>_()({deckInfos:e(re),replaceAll:!0})),be("click",le,z),r(X,ce)},C=X=>{var ce=Me(),$e=q(ce);{var ie=le=>{var Ae=Ps();be("click",Ae,()=>_()(void 0)),r(le,Ae)};y($e,le=>{v().cancelable&&le(ie)},!0)}r(X,ce)};y(Te,X=>{e(re).length?X(S):X(C,!1)})}r(B,ne)}),r(L,O)}}}),dt()}const Qt=class Qt extends vr{constructor(s,t){super(s,...Object.values(t))}};tt(Qt,"createModalController",s=>{const t={deckUploader:new dr({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new Qt(s,t),t)});let la=Qt;function Hs(d,s){lt(s,!1);let t=We(s,"modalController",8);vt(),lr(d,{get modalController(){return t()},children:(v,_)=>{var c=Me(),u=q(c);{var l=Y=>{Is(Y,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};y(u,Y=>{t().deckUploader.state==="Shown"&&Y(l)})}r(v,c)},$$slots:{default:!0}}),dt()}var Os=o('<label><input type="checkbox"> </label>'),Rs=o('<label><input type="checkbox"> </label>'),Ws=o('<label><input type="checkbox"> <div style="display: inline-block;"></div> </label>'),Ks=o('<label><input type="checkbox"> </label>'),zs=o('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">モンスター</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">属性</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">種族</button></div> <div class="svelte-xd4rv4"></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">攻守</button></div> <div class="svelte-xd4rv4"><div><span>攻</span> <input type="number" min="0" max="5000" step="100"> <span>～</span> <input type="number" min="0" max="5000" step="100"></div> <div><span>守</span> <input type="number" min="0" max="5000" step="100"> <span>～</span> <input type="number" min="0" max="5000" step="100"></div> <div><span>攻+守</span> <input type="number" min="0" max="5000" step="100"></div></div></div>',1),Vs=o('<label><input type="checkbox"> </label>'),Gs=o('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">魔法</button></div> <div class="svelte-xd4rv4"></div></div>'),Xs=o('<label><input type="checkbox"> </label>'),Qs=o('<div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">罠</button></div> <div class="svelte-xd4rv4"></div></div>'),Js=o('<label><input type="checkbox"> </label>'),Zs=o("<div>カード情報読込中</div>"),en=o("<option> </option>"),tn=o('<div class="svelte-xd4rv4"><a class="white_button svelte-xd4rv4" download="SVS_DeckInfos.json">ダウンロード</a></div>'),an=o('<div class="svelte-xd4rv4"></div>'),rn=o('<div class="svelte-xd4rv4"><a class="white_button svelte-xd4rv4" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),sn=o('<div class="svelte-xd4rv4"></div>'),nn=o('<div class="deck_editor_body_right_header svelte-xd4rv4"><div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">編集対象 <select></select></div> <div class="svelte-xd4rv4"></div> <div class="svelte-xd4rv4">新規名称 <input type="text"></div></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">基本操作</div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">デッキを保存</button></div> <div class="svelte-xd4rv4"></div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">デッキを複製</button></div> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-xd4rv4"><div class="svelte-xd4rv4">DL/UL</div> <!> <!> <div class="svelte-xd4rv4"><button class="white_button svelte-xd4rv4">アップロード</button></div></div></div> <!>',1),on=o("<div>デッキ情報読込中</div>"),ln=o('<div class="deck_editor svelte-xd4rv4"><div class="deck_editor_header"></div> <div class="deck_editor_body svelte-xd4rv4"><div class="deck_editor_body_left svelte-xd4rv4"><div role="contentinfo"><div class="deck_editor_search_box_header svelte-xd4rv4"><div>検索条件</div> <div><button class="white_button svelte-xd4rv4">条件クリア</button></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">名称</button></div> <div class="svelte-xd4rv4"><input type="text" style="width:70%"> <span>※ルビには対応していません</span></div></div> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">種類</button></div> <div class="svelte-xd4rv4"></div></div> <!> <!> <!> <div class="deck_editor_search_box_row svelte-xd4rv4"><div class="svelte-xd4rv4"><button class="search_condition_title black_button svelte-xd4rv4">その他</button></div> <div class="svelte-xd4rv4"></div></div></div> <!></div> <div class="deck_editor_body_center svelte-xd4rv4"><!></div> <div class="deck_editor_body_right svelte-xd4rv4"><!></div></div> <div class="footer svelte-xd4rv4"><!></div></div> <!>',1);function vn(d,s){lt(s,!1);const t=[],v=[],_=[],c=[],u=[],l=[],Y=[],V=la.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),x={name:"",cardKinds:Sa.filter(f=>f!=="XyzMaterial"),monsterCategories:[...Ma],monsterAttributes:[...$a],monsterTypes:[...Ca],spellCategories:[...Da],trapCategories:[...wa],atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:["test","oldVersion","implemented"]},n=ye(structuredClone(x));je(n,e(n).others=["oldVersion"]);let z=ye("SearchCondition");const L=async()=>{je(n,e(n).name=""),je(n,e(n).cardKinds=[]),je(n,e(n).monsterCategories=[]),je(n,e(n).monsterAttributes=[]),je(n,e(n).monsterTypes=[]),je(n,e(n).spellCategories=[]),je(n,e(n).trapCategories=[]),je(n,e(n).others=[]),je(n,e(n).atkLowerBound=0),je(n,e(n).atkUpperBound=5e3),je(n,e(n).defLowerBound=0),je(n,e(n).defUpperBound=5e3),je(n,e(n).atkPlusDef=void 0)},P=f=>{f.forEach(g=>{Array.isArray(e(n)[g])&&Array.isArray(x[g])?je(n,e(n)[g]=e(n)[g].length?[]:[...x[g]]):je(n,e(n)[g]=x[g])})},O=(f,g,K)=>{Array.isArray(e(n)[g])&&Array.isArray(x[g])&&je(n,e(n)[g]=[K])},U=async()=>{const g=(await e(ne)).find(de=>de.id===e(re));if(!g)return;const K=await Ht;$(C,{...g,cardInfos:g.cardNames.map(de=>{const ee=K.getCardInfo(de);return ee===void 0&&console.error(de),ee}).filter(de=>de!==void 0)})},B=()=>yt.getAllDeckInfo().then(f=>($(re,(f.find(g=>g.lastUsedAt.getTime()===Math.max(...f.map(K=>K.lastUsedAt.getTime())))??f[0]).id),f));let re=ye(-1),ne=ye(B()),Te=ye(e(ne).then(f=>yt.convertToObjectURL(f)));e(ne).then(U);const S=()=>{$(ne,B()),$(Te,e(ne).then(f=>yt.convertToObjectURL(f))),U()};let C=ye({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),X=ye(void 0),ce=0;const $e=f=>{$(z,"CardDetail"),f.cardId!==void 0&&!f.description&&!f.pendulumDescription&&(ce=f.cardId,qa([f.cardId]).then(()=>{f.cardId===ce&&$(X,f)})),$(X,f)},ie=async()=>{const g=(await e(ne)).find(K=>K.id===e(re));if(!g)throw new Error("illegal state");return g},le=async()=>{const f=await ie();await f.saveDeckInfo({...f,name:e(C).name,cardNames:e(C).cardInfos.map(g=>g.name),lastUsedAt:new Date}),S()},Ae=async()=>{(await yt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,e(C).cardInfos.map(g=>g.name))).saveDeckInfo(),S()},E=async f=>{const g=await ie();!f.shiftKey&&!confirm(`デッキ【${g.name}】を削除します。
よろしいですか？`)||(await g.delete(),S())},F=async()=>{const f=await V.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!f)return;const g=[];if(f.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;g.push(...(await e(ne)).map(K=>K.id))}await Promise.all(f.deckInfos.map(K=>yt.createNewDeck(K.name,K.description,K.cardNames,K.lastUsedAt))),g.length&&await Promise.all(g.map(yt.remove)),S()};vt();var G=ln(),ve=q(G),xe=i(a(ve),2),ue=a(xe),A=a(ue),h=a(A),N=i(a(h),2),R=a(N),Q=i(h,2),D=a(Q),I=a(D),J=i(D,2),ae=a(J),m=i(Q,2),j=a(m),T=a(j),W=i(j,2);se(W,5,()=>Sa.filter(f=>f!=="XyzMaterial"),oe,(f,g)=>{var K=Os(),de=a(K),ee,he=i(de);p(()=>{ee!==(ee=e(g))&&(de.value=(de.__value=e(g))==null?"":e(g)),b(he,` ${La[e(g)]??""}`)}),Et(t,[],de,()=>(e(g),e(n).cardKinds),ge=>je(n,e(n).cardKinds=ge)),r(f,K)});var w=i(m,2);{var k=f=>{var g=zs(),K=q(g),de=a(K),ee=a(de),he=i(de,2);se(he,5,()=>Ma,oe,(Ie,Le)=>{var it=Rs(),Ze=a(it),ct,gt=i(Ze);p(()=>{ct!==(ct=e(Le))&&(Ze.value=(Ze.__value=e(Le))==null?"":e(Le)),b(gt,` ${Zt[e(Le)]??""}${_a[e(Le)]??""}`)}),Et(v,[],Ze,()=>(e(Le),e(n).monsterCategories),_t=>je(n,e(n).monsterCategories=_t)),r(Ie,it)});var ge=i(K,2),Ke=a(ge),Be=a(Ke),ze=i(Ke,2);se(ze,5,()=>$a,oe,(Ie,Le)=>{var it=Ws(),Ze=a(it),ct,gt=i(Ze,2),_t=i(gt);p(()=>{ct!==(ct=e(Le))&&(Ze.value=(Ze.__value=e(Le))==null?"":e(Le)),Ne(gt,`monster_attr ${e(Le)??""} svelte-xd4rv4`),b(_t,` ${da[e(Le)]??""}`)}),Et(_,[],Ze,()=>(e(Le),e(n).monsterAttributes),wt=>je(n,e(n).monsterAttributes=wt)),r(Ie,it)});var et=i(ge,2),rt=a(et),mt=a(rt),Ve=i(rt,2);se(Ve,5,()=>Ca,oe,(Ie,Le)=>{var it=Ks(),Ze=a(it),ct,gt=i(Ze);p(()=>{ct!==(ct=e(Le))&&(Ze.value=(Ze.__value=e(Le))==null?"":e(Le)),b(gt,` ${Jt[e(Le)]??""}
                  ${ca[e(Le)]??""}`)}),Et(c,[],Ze,()=>(e(Le),e(n).monsterTypes),_t=>je(n,e(n).monsterTypes=_t)),be("dblclick",it,_t=>O(_t,"monsterTypes",e(Le))),r(Ie,it)});var Re=i(et,2),Xe=a(Re),pt=a(Xe),Ct=i(Xe,2),kt=a(Ct),xt=i(a(kt),2),Mt=i(xt,4),Je=i(kt,2),Ue=i(a(Je),2),Fe=i(Ue,4),Oe=i(Je,2),Qe=i(a(Oe),2);be("click",ee,()=>P(["monsterCategories"])),te(3,K,()=>fe,()=>({delay:0,duration:100})),be("click",Be,()=>P(["monsterAttributes"])),te(3,ge,()=>fe,()=>({delay:0,duration:100})),be("click",mt,()=>P(["monsterTypes"])),te(3,et,()=>fe,()=>({delay:0,duration:100})),be("click",pt,()=>P(["atkLowerBound","atkUpperBound","defLowerBound","defUpperBound"])),St(xt,()=>e(n).atkLowerBound,Ie=>je(n,e(n).atkLowerBound=Ie)),St(Mt,()=>e(n).atkUpperBound,Ie=>je(n,e(n).atkUpperBound=Ie)),St(Ue,()=>e(n).defLowerBound,Ie=>je(n,e(n).defLowerBound=Ie)),St(Fe,()=>e(n).defUpperBound,Ie=>je(n,e(n).defUpperBound=Ie)),St(Qe,()=>e(n).atkPlusDef,Ie=>je(n,e(n).atkPlusDef=Ie)),te(3,Re,()=>fe,()=>({delay:0,duration:100})),r(f,g)};y(w,f=>{e(n).cardKinds.includes("Monster")&&f(k)})}var Z=i(w,2);{var ke=f=>{var g=Gs(),K=a(g),de=a(K),ee=i(K,2);se(ee,5,()=>Da,oe,(he,ge)=>{var Ke=Vs(),Be=a(Ke),ze,et=i(Be);p(()=>{ze!==(ze=e(ge))&&(Be.value=(Be.__value=e(ge))==null?"":e(ge)),b(et,` ${ea[e(ge)]??""}`)}),Et(u,[],Be,()=>(e(ge),e(n).spellCategories),rt=>je(n,e(n).spellCategories=rt)),r(he,Ke)}),be("click",de,()=>P(["spellCategories"])),te(3,g,()=>fe,()=>({delay:0,duration:100})),r(f,g)};y(Z,f=>{e(n).cardKinds.includes("Spell")&&f(ke)})}var Ce=i(Z,2);{var we=f=>{var g=Qs(),K=a(g),de=a(K),ee=i(K,2);se(ee,5,()=>wa,oe,(he,ge)=>{var Ke=Xs(),Be=a(Ke),ze,et=i(Be);p(()=>{ze!==(ze=e(ge))&&(Be.value=(Be.__value=e(ge))==null?"":e(ge)),b(et,` ${ta[e(ge)]??""}`)}),Et(l,[],Be,()=>(e(ge),e(n).trapCategories),rt=>je(n,e(n).trapCategories=rt)),r(he,Ke)}),be("click",de,()=>P(["trapCategories"])),te(3,g,()=>fe,()=>({delay:0,duration:100})),r(f,g)};y(Ce,f=>{e(n).cardKinds.includes("Trap")&&f(we)})}var _e=i(Ce,2),M=a(_e),H=a(M),De=i(M,2);se(De,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],oe,(f,g)=>{var K=Js(),de=a(K),ee,he=i(de);p(()=>{ee!==(ee=g.key)&&(de.value=(de.__value=g.key)==null?"":g.key),b(he,` ${g.text??""}`)}),Et(Y,[],de,()=>(g.key,e(n).others),ge=>je(n,e(n).others=ge)),r(f,K)});var Se=i(A,2);Es(Se,{get cardInfo(){return e(X)}});var He=i(ue,2),qe=a(He);ot(qe,()=>Ht,f=>{var g=Zs();r(f,g)},(f,g)=>{const K=pe(()=>Object.values(e(g).dic));Ua(f,{mode:"List",get allCardInfos(){return e(K)},onAttention:$e,get searchCondition(){return e(n)},get deckCardInfos(){return e(C).cardInfos},set deckCardInfos(de){je(C,e(C).cardInfos=de)},$$legacy:!0})});var Ye=i(He,2),Pe=a(Ye);ot(Pe,()=>e(ne),f=>{var g=on();r(f,g)},(f,g)=>{var K=nn(),de=q(K),ee=a(de),he=a(ee),ge=i(a(he));p(()=>{e(re),Lt(()=>{e(g)})}),se(ge,5,()=>e(g),oe,(Ue,Fe)=>{var Oe=en(),Qe={},Ie=a(Oe);p(()=>{Qe!==(Qe=e(Fe).id)&&(Oe.value=(Oe.__value=e(Fe).id)==null?"":e(Fe).id),b(Ie,e(Fe).name)}),r(Ue,Oe)});var Ke=i(he,4),Be=i(a(Ke)),ze=i(ee,4),et=i(a(ze),2),rt=a(et),mt=i(et,4),Ve=a(mt),Re=i(mt,2),Xe=a(Re),pt=i(ze,2),Ct=i(a(pt),2);ot(Ct,ie,Ue=>{var Fe=an();r(Ue,Fe)},(Ue,Fe)=>{var Oe=tn(),Qe=a(Oe);p(Ie=>ft(Qe,"href",Ie),[()=>yt.convertToObjectURL([e(Fe)])],pe),r(Ue,Oe)});var kt=i(Ct,2);ot(kt,()=>e(Te),Ue=>{var Fe=sn();r(Ue,Fe)},(Ue,Fe)=>{var Oe=rn(),Qe=a(Oe);p(()=>ft(Qe,"href",e(Fe))),r(Ue,Oe)});var xt=i(kt,2),Mt=a(xt),Je=i(de,2);Ua(Je,{mode:"Deck",allCardInfos:[],onAttention:$e,get deckCardInfos(){return e(C).cardInfos},set deckCardInfos(Ue){je(C,e(C).cardInfos=Ue)},$$legacy:!0}),Pt(ge,()=>e(re),Ue=>$(re,Ue)),be("change",ge,U),St(Be,()=>e(C).name,Ue=>je(C,e(C).name=Ue)),be("click",rt,le),be("click",Ve,Ae),be("click",Xe,E),be("click",Mt,F),r(f,K)});var Ge=i(xe,2),Ee=a(Ge);ot(Ee,()=>Ht,f=>{var g=at("読み込み中");r(f,g)},(f,g)=>{var K=at();p(()=>b(K,`実装済カード${e(g).definitionCount+e(g).nonDefinitionCount}枚（内、効果のないモンスター${e(g).nonDefinitionCount??""}枚）`)),r(f,K)});var me=i(ve,2);Hs(me,{modalController:V}),p(()=>Ne(A,`deck_editor_search_box ${(e(z)==="SearchCondition"?"":"minimum")??""} svelte-xd4rv4`)),be("click",R,L),be("click",I,()=>P(["name"])),St(ae,()=>e(n).name,f=>je(n,e(n).name=f)),be("click",T,()=>P(["cardKinds"])),be("click",H,()=>P(["others"])),te(3,_e,()=>fe,()=>({delay:0,duration:100})),be("mouseenter",A,()=>$(z,"SearchCondition")),r(d,G),dt()}const dn=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],cn=3;var _n=o('<input class="game_mode_radio svelte-abgng1" type="radio" name="game_mode"> <label> </label>',1),un=o('<option class="svelte-abgng1"> </option>'),fn=o('<option class="svelte-abgng1"> </option>'),pn=o('<option class="svelte-abgng1"> </option>'),gn=o('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-abgng1">デッキ：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_deck_selector" class="deck_selector svelte-abgng1"><option class="svelte-abgng1">デフォルト</option><!></select></div></td></tr>'),bn=o('<option class="svelte-abgng1"> </option>'),mn=o('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_selector" class="config_row_label npc_selector svelte-abgng1">対戦相手：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_selector" class="npc_selector svelte-abgng1"></select> <div class="svelte-abgng1"> </div></div></td></tr> <!> <tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="npc_selector" class="config_row_label npc_selector svelte-abgng1">先攻後攻：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="npc_selector" class="npc_selector svelte-abgng1"></select></div></td></tr>',1),hn=o('<option class="svelte-abgng1"> </option>'),yn=o('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-abgng1">難易度：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="difficulty_selector" class="difficulty_selector svelte-abgng1"></select></div></td></tr>'),xn=o('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label class="config_row_label svelte-abgng1" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"></div></td></tr> <tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="deck_selector" class="config_row_label deck_selector svelte-abgng1">デッキ：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><select id="deck_selector" class="deck_selector svelte-abgng1"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-abgng1"><div><button class="btn svelte-abgng1">duel start!</button></div></td></tr>',1),kn=o('<tr><td colspan="2" class="svelte-abgng1"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),wn=o('<tr><td colspan="2" class="svelte-abgng1"><div><button class="btn svelte-abgng1">deck edit</button></div></td></tr>'),Dn=o('<tr class="config_row svelte-abgng1"><td class="svelte-abgng1"><div class="svelte-abgng1"><label for="duelist_name" class="config_row_label duelist_name svelte-abgng1">名前：</label></div></td><td class="svelte-abgng1"><div class="svelte-abgng1"><input id="duelist_name" class="duelist_name svelte-abgng1" type="text"></div></td></tr> <!> <!>',1),Cn=o('<tr><td colspan="2" class="svelte-abgng1"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),$n=o('<div class="app_body svelte-abgng1"><table class="config_table svelte-abgng1"><tbody><!></tbody></table></div>'),Sn=o('<div class="result_title result_win svelte-abgng1">YOU WIN</div>'),Mn=o('<div class="result_title result_lose svelte-abgng1">YOU LOSE</div>'),Tn=o('<div class="result_title result_draw svelte-abgng1">DRAW</div>'),jn=o('<div class="twitter_share_button_wrapper svelte-abgng1"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-abgng1">X(twitter)でシェアする</a></div>'),En=o('<div class="result svelte-abgng1"><!> <div class="reason_of_end svelte-abgng1"> </div> <!> <div class="svelte-abgng1"><button class="white_button svelte-abgng1">TOPへ戻る</button></div></div>'),Bn=o('<main style="flex-direction: column; display :flex" class="svelte-abgng1"><div class="link link_left svelte-abgng1"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-abgng1">posfie(toggeter)</a></div> <div class="link link_right svelte-abgng1"><a class="a_button svelte-abgng1" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-abgng1">現時点とこの先のこと</a></div> <!> <div class="debug_info svelte-abgng1"><span class="svelte-abgng1"> </span> <span class="user_agent_info svelte-abgng1"> </span> <span class="screen_info svelte-abgng1"> </span></div> <!></main>');function An(d,s){lt(s,!1);const t=new cr("stk_ygo_svelte",cn,dn);let v=ye(0),_=ye(0),c=ye(),u=ye("FtkChallenge"),l=ye("None"),Y=ye(0),V=ye(""),x=ye(void 0);const n="https://setta238.github.io/stk_ygo_svelte/",z="遊戯王deそりてあ",L="ninja_no",P=_r.getOrCreateNew(t).then(m=>($(u,Ta.includes(m.previousGameMode)?m.previousGameMode:"FtkChallenge"),Ae(m.previousNpcId),m)),O=m=>{var T;const j=m.find(W=>W.lastUsedAt.getTime()===Math.max(...m.map(w=>w.lastUsedAt.getTime())))??m[0];$(Y,j.id),e(u)==="FtkChallenge"&&j.deckType!=="Preset"&&$(Y,((T=Bt.find(W=>W.deckType==="Preset"))==null?void 0:T.id)??e(Y))};let U=ye(yt.getAllDeckInfo(t).then(m=>(Promise.all(m.filter(j=>!j.lastUsedAt).map(j=>{j.saveDeckInfo()})),O(m),m)));const B=async()=>{const m=e(Y);let j=(await e(U)).find(W=>W.id===m)??(await ne()).find(W=>W.id===m);j&&await j.updateTimestamp();let T=j;if(T||(T=Bt.find(W=>W.id===m)),!T)throw new Error("illegal state");return T},re=async()=>{(await P).save({previousGameMode:e(u)})},ne=()=>($(U,yt.getAllDeckInfo(t).then(m=>(O(m),m))),e(U)),Te=async()=>{(await e(U)).length||(await yt.prepareSampleDeck(),ne())},S=async()=>{await Promise.all([re(),Te()]);const m=await B(),j=await P;let T=qt.find(k=>k.id===Number.MIN_SAFE_INTEGER)??qt[0],W=Bt.find(k=>k.id===Number.MIN_SAFE_INTEGER)??Bt[0],w="PlayFirst";e(u)==="FtkChallenge"?T=qt.filter(k=>k.npcType==="FtkChallenge").find(k=>k.difficulty===j.previousDifficulty)??T:e(u)==="Free"&&(T=qt.find(k=>k.id===j.previousNpcId)??T,W=Bt.slice(-1)[0],w=j.previousStartMode),T.npcType!=="FtkChallenge"&&j.previousNpcDeckId>-1?W=(await e(U)).find(k=>k.id===j.previousNpcDeckId)??W:W=Bt.find(k=>k.id===T.id)??W,$(c,new fr(j,"Player",m,[],T,"NPC",W,[],w)),e(c).onDuelEnd.append(()=>($(c,e(c)),"RemoveMe"))},C=async()=>{await Promise.all([re(),Te()]),$(l,"DeckEdit")},X=async m=>{await re(),m.key==="Enter"&&!m.repeat&&(await P).save()},ce=()=>{$(U,ne()),$(c,void 0),$(l,"None")};let $e=Date.now();const ie=m=>{Date.now()-$e<200||($e=Date.now(),$(u,m),ne())},le=m=>{Ae(Number(m.currentTarget.value))},Ae=m=>{var j;$(x,qt.find(T=>T.id===m)),$(V,((j=e(x))==null?void 0:j.description)??"")};Te(),vt();var E=Bn(),F=i(a(E),2),G=a(F),ve=i(F,2);{var xe=m=>{var j=Me(),T=q(j);ot(T,()=>P,null,(W,w)=>{ls(W,{get duel(){return e(c)},get userProfile(){return e(w)}})}),r(m,j)},ue=m=>{var j=Me(),T=q(j);{var W=k=>{vn(k,{})},w=k=>{var Z=$n(),ke=a(Z),Ce=a(ke),we=a(Ce);ot(we,()=>P,_e=>{var M=Cn();r(_e,M)},(_e,M)=>{var H=Dn(),De=q(H),Se=a(De),He=a(Se),qe=i(Se),Ye=a(qe),Pe=a(Ye),Ge=i(De,2);ot(Ge,()=>e(U),f=>{var g=kn();r(f,g)},(f,g)=>{var K=xn(),de=q(K),ee=a(de),he=a(ee),ge=i(ee),Ke=a(ge);se(Ke,5,()=>Ta,oe,(Je,Ue)=>{var Fe=_n(),Oe=q(Fe),Qe=i(Oe,2),Ie=a(Qe);p(Le=>{ft(Oe,"id",`game_mode_radio_${Le??""}`),pr(Oe,e(Ue)),gr(Oe,e(u)===e(Ue)),Ne(Qe,`game_mode_tab_label game_mode_tab_${Le??""} svelte-abgng1`),ft(Qe,"for",`game_mode_radio_${Le??""}`),b(Ie,e(Ue))},[()=>e(Ue).toLowerCase()],pe),be("change",Oe,()=>ie(e(Ue))),r(Je,Fe)});var Be=i(de,2),ze=a(Be),et=a(ze),rt=i(ze),mt=a(rt),Ve=a(mt);p(()=>{e(Y),Lt(()=>{e(u),e(g)})}),se(Ve,5,()=>e(u)==="FtkChallenge"?Bt.filter(Je=>Je.deckType==="Preset"):e(g),oe,(Je,Ue)=>{var Fe=un(),Oe={},Qe=a(Fe);p(()=>{Oe!==(Oe=e(Ue).id)&&(Fe.value=(Fe.__value=e(Ue).id)==null?"":e(Ue).id),b(Qe,e(Ue).name)}),r(Je,Fe)});var Re=i(Be,2);{var Xe=Je=>{var Ue=mn(),Fe=q(Ue),Oe=a(Fe),Qe=a(Oe),Ie=i(Oe),Le=a(Ie),it=a(Le);p(()=>{e(M),Lt(()=>{})}),se(it,5,()=>qt,oe,(ht,st)=>{var ut=fn(),Tt={},Nt=a(ut);p(()=>{Tt!==(Tt=e(st).id)&&(ut.value=(ut.__value=e(st).id)==null?"":e(st).id),b(Nt,e(st).name)}),r(ht,ut)});var Ze=i(it,2),ct=a(Ze),gt=i(Fe,2);{var _t=ht=>{var st=gn(),ut=a(st),Tt=a(ut),Nt=i(ut),ba=a(Nt),ma=a(ba);p(()=>{e(M),Lt(()=>{e(g)})});var aa=a(ma);aa.value=(aa.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Pa=i(aa);se(Pa,1,()=>e(g),oe,(ra,Kt)=>{var zt=pn(),ha={},Fa=a(zt);p(()=>{ha!==(ha=e(Kt).id)&&(zt.value=(zt.__value=e(Kt).id)==null?"":e(Kt).id),b(Fa,e(Kt).name)}),r(ra,zt)}),te(3,Tt,()=>fe,()=>({duration:200})),te(3,ut,()=>fe,()=>({duration:200})),Pt(ma,()=>e(M).previousNpcDeckId,ra=>e(M).previousNpcDeckId=ra),te(3,ba,()=>fe,()=>({duration:200})),te(3,Nt,()=>fe,()=>({duration:200})),te(3,st,()=>fe,()=>({duration:200})),r(ht,st)};y(gt,ht=>{var st;((st=e(x))==null?void 0:st.npcType)!=="FtkChallenge"&&ht(_t)})}var wt=i(gt,2),$t=a(wt),Rt=a($t),Wt=i($t),pa=a(Wt),ga=a(pa);p(()=>{e(M),Lt(()=>{})}),se(ga,5,()=>va(ja),oe,(ht,st)=>{var ut=bn(),Tt={},Nt=a(ut);p(()=>{Tt!==(Tt=e(st))&&(ut.value=(ut.__value=e(st))==null?"":e(st)),b(Nt,ja[e(st)])}),r(ht,ut)}),p(()=>b(ct,`※${e(V)??""}`)),te(3,Qe,()=>fe,()=>({duration:200})),te(3,Oe,()=>fe,()=>({duration:200})),be("change",it,le),Pt(it,()=>e(M).previousNpcId,ht=>e(M).previousNpcId=ht),te(3,Le,()=>fe,()=>({duration:200})),te(3,Ie,()=>fe,()=>({duration:200})),te(3,Fe,()=>fe,()=>({duration:200})),te(3,Rt,()=>fe,()=>({duration:200})),te(3,$t,()=>fe,()=>({duration:200})),Pt(ga,()=>e(M).previousStartMode,ht=>e(M).previousStartMode=ht),te(3,pa,()=>fe,()=>({duration:200})),te(3,Wt,()=>fe,()=>({duration:200})),te(3,wt,()=>fe,()=>({duration:200})),r(Je,Ue)},pt=Je=>{var Ue=Me(),Fe=q(Ue);{var Oe=Qe=>{var Ie=yn(),Le=a(Ie),it=a(Le),Ze=i(Le),ct=a(Ze),gt=a(ct);p(()=>{e(M),Lt(()=>{})}),se(gt,5,()=>br,oe,(_t,wt)=>{var $t=hn(),Rt={},Wt=a($t);p(()=>{Rt!==(Rt=e(wt))&&($t.value=($t.__value=e(wt))==null?"":e(wt)),b(Wt,e(wt))}),r(_t,$t)}),te(3,it,()=>fe,()=>({duration:200})),te(3,Le,()=>fe,()=>({duration:200})),Pt(gt,()=>e(M).previousDifficulty,_t=>e(M).previousDifficulty=_t),te(3,ct,()=>fe,()=>({duration:200})),te(3,Ze,()=>fe,()=>({duration:200})),te(3,Ie,()=>fe,()=>({duration:200})),r(Qe,Ie)};y(Fe,Qe=>{e(u)==="FtkChallenge"&&Qe(Oe)},!0)}r(Je,Ue)};y(Re,Je=>{e(u)==="Free"?Je(Xe):Je(pt,!1)})}var Ct=i(Re,2),kt=a(Ct),xt=a(kt),Mt=a(xt);te(3,he,()=>fe,()=>({duration:200})),te(3,ee,()=>fe,()=>({duration:200})),te(3,Ke,()=>fe,()=>({duration:200})),te(3,ge,()=>fe,()=>({duration:200})),te(3,de,()=>fe,()=>({duration:200})),te(3,et,()=>fe,()=>({duration:200})),te(3,ze,()=>fe,()=>({duration:200})),Pt(Ve,()=>e(Y),Je=>$(Y,Je)),te(3,mt,()=>fe,()=>({duration:200})),te(3,rt,()=>fe,()=>({duration:200})),te(3,Be,()=>fe,()=>({duration:200})),be("click",Mt,S),te(3,xt,()=>fe,()=>({duration:200})),r(f,K)});var Ee=i(Ge,2);{var me=f=>{var g=wn(),K=a(g),de=a(K),ee=a(de);be("click",ee,C),te(3,de,()=>fe,()=>({duration:200})),te(3,K,()=>fe,()=>({duration:200})),te(3,g,()=>fe,()=>({duration:200})),r(f,g)};y(Ee,f=>{e(u)==="Free"&&f(me)})}te(3,He,()=>fe,()=>({duration:200})),te(3,Se,()=>fe,()=>({duration:200})),St(Pe,()=>e(M).name,f=>e(M).name=f),be("keypress",Pe,X),te(3,Ye,()=>fe,()=>({duration:200})),te(3,qe,()=>fe,()=>({duration:200})),te(3,De,()=>fe,()=>({duration:200})),r(_e,H)}),r(k,Z)};y(T,k=>{e(l)==="DeckEdit"?k(W):k(w,!1)},!0)}r(m,j)};y(ve,m=>{e(c)?m(xe):m(ue,!1)})}var A=i(ve,2),h=a(A),N=a(h),R=i(h,2),Q=a(R),D=i(R,2),I=a(D),J=i(A,2);{var ae=m=>{var j=En(),T=a(j);{var W=M=>{var H=Me(),De=q(H);{var Se=qe=>{var Ye=Sn();r(qe,Ye)},He=qe=>{var Ye=Me(),Pe=q(Ye);{var Ge=Ee=>{var me=Mn();r(Ee,me)};y(Pe,Ee=>{e(c).winner.seat==="Above"&&Ee(Ge)},!0)}r(qe,Ye)};y(De,qe=>{e(c).winner.seat==="Below"?qe(Se):qe(He,!1)})}r(M,H)},w=M=>{var H=Tn();r(M,H)};y(T,M=>{e(c).winner?M(W):M(w,!1)})}var k=i(T,2),Z=a(k),ke=i(k,2);{var Ce=M=>{var H=jn(),De=a(H);p(()=>ft(De,"href",`https://x.com/share?url=${n}&text=${e(c).twitterShareText??""}&hashtags=${z}&via=${L}`)),r(M,H)};y(ke,M=>{e(c).twitterShareText&&M(Ce)})}var we=i(ke,2),_e=a(we);p(()=>b(Z,e(c).reasonOfEnd)),be("click",_e,ce),te(3,j,()=>yr,()=>({delay:200,duration:200})),r(m,j)};y(J,m=>{e(c)&&e(c).isEnded&&m(ae)})}p(()=>{b(N,"build at: 20260102_205053"),b(Q,ur.text),b(I,`w:${e(v)??""}px h:${e(_)??""}px`)}),Vt("innerWidth",m=>$(v,m)),Vt("innerHeight",m=>$(_,m)),be("click",G,ce),r(d,E),dt()}mr(An,{target:document.getElementById("app")});
