var Qa=Object.defineProperty;var Sa=d=>{throw TypeError(d)};var Xa=(d,i,t)=>i in d?Qa(d,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[i]=t;var dt=(d,i,t)=>Xa(d,typeof i!="symbol"?i+"":i,t),Ma=(d,i,t)=>i.has(d)||Sa("Cannot "+t);var mt=(d,i,t)=>(Ma(d,i,"read from private field"),t?t.call(d):i.get(d)),Qt=(d,i,t)=>i.has(d)?Sa("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(d):i.set(d,t),_a=(d,i,t,c)=>(Ma(d,i,"write to private field"),c?c.call(d,t):i.set(d,t),t);import{s as Ta,r as Ja,a as D,b as Za,l as er,g as e,d as Wa,p as bt,c as We,m as ye,i as kt,t as l,e as a,f as h,h as u,j as ne,k as Ee,n as pt,o as fe,q as r,u as xt,v as we,D as tr,w as Ce,x as L,y as s,z as _e,A as Pt,B as se,C as pe,E as p,F as ar,G as rt,H as Ft,I as rr,J as sr,K as It,L as fa,M as Ka,N as Jt,O as pa,P as Xt,Q as ht,R as ba,S as la,T as ka,U as Zt,V as ra,W as Ia,X as oa,Y as va,Z as ir,_ as nr,$ as lr,a0 as or,a1 as vr,a2 as dr,a3 as cr,a4 as sa,a5 as za,a6 as _r,a7 as zt,a8 as ga,a9 as ur,aa as ja,ab as ua,ac as At,ad as fr,ae as pr,af as Vt,ag as gr,ah as Dt,ai as yr,aj as mr,ak as hr,al as Ba,am as Ea,an as Aa,ao as La,ap as Ua,aq as Ya,ar as br,as as Yt,at as Ut,au as Tt,av as kr,aw as Kt,ax as xr,ay as wr,az as Na,aA as Wt,aB as qt,aC as Cr,aD as Dr,aE as qa,aF as $r,aG as Sr,aH as Mr}from"../chunk/entity_proc_20260112_172647.js";import"../chunk/json_20260112_172647.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))c(f);new MutationObserver(f=>{for(const v of f)if(v.type==="childList")for(const g of v.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&c(g)}).observe(document,{childList:!0,subtree:!0});function t(f){const v={};return f.integrity&&(v.integrity=f.integrity),f.referrerPolicy&&(v.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?v.credentials="include":f.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function c(f){if(f.ep)return;f.ep=!0;const v=t(f);fetch(f.href,v)}})();const Tr=d=>d;function xa(d){const i=d-1;return i*i*i+1}function Pa(d){const i=typeof d=="string"&&d.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[d,"px"]}function jr(d,{delay:i=0,duration:t=400,easing:c=Tr}={}){const f=+getComputedStyle(d).opacity;return{delay:i,duration:t,easing:c,css:v=>`opacity: ${v*f}`}}function Br(d,{delay:i=0,duration:t=400,easing:c=xa,x:f=0,y:v=0,opacity:g=0}={}){const o=getComputedStyle(d),P=+o.opacity,K=o.transform==="none"?"":o.transform,w=P*(1-g),[$,n]=Pa(f),[R,Z]=Pa(v);return{delay:i,duration:t,easing:c,css:(G,N)=>`
			transform: ${K} translate(${(1-G)*$}${n}, ${(1-G)*R}${Z});
			opacity: ${P-w*N}`}}function he(d,{delay:i=0,duration:t=400,easing:c=xa,axis:f="y"}={}){const v=getComputedStyle(d),g=+v.opacity,o=f==="y"?"height":"width",P=parseFloat(v[o]),K=f==="y"?["top","bottom"]:["left","right"],w=K.map(H=>`${H[0].toUpperCase()}${H.slice(1)}`),$=parseFloat(v[`padding${w[0]}`]),n=parseFloat(v[`padding${w[1]}`]),R=parseFloat(v[`margin${w[0]}`]),Z=parseFloat(v[`margin${w[1]}`]),G=parseFloat(v[`border${w[0]}Width`]),N=parseFloat(v[`border${w[1]}Width`]);return{delay:i,duration:t,easing:c,css:H=>`overflow: hidden;opacity: ${Math.min(H*20,1)*g};${o}: ${H*P}px;padding-${K[0]}: ${H*$}px;padding-${K[1]}: ${H*n}px;margin-${K[0]}: ${H*R}px;margin-${K[1]}: ${H*Z}px;border-${K[0]}-width: ${H*G}px;border-${K[1]}-width: ${H*N}px;min-${o}: 0`}}function Fa(d,i){for(const t in i)d[t]=i[t];return d}function Er({fallback:d,...i}){const t=new Map,c=new Map;function f(g,o,P){const{delay:K=0,duration:w=j=>Math.sqrt(j)*30,easing:$=xa}=Fa(Fa({},i),P),n=g.getBoundingClientRect(),R=o.getBoundingClientRect(),Z=n.left-R.left,G=n.top-R.top,N=n.width/R.width,H=n.height/R.height,ge=Math.sqrt(Z*Z+G*G),De=getComputedStyle(o),Se=De.transform==="none"?"":De.transform,k=+De.opacity;return{delay:K,duration:typeof w=="function"?w(ge):w,easing:$,css:(j,te)=>`
			   opacity: ${j*k};
			   transform-origin: top left;
			   transform: ${Se} translate(${te*Z}px,${te*G}px) scale(${j+(1-j)*N}, ${j+(1-j)*H});
		   `}}function v(g,o,P){return(K,w)=>(g.set(w.key,K),()=>{if(o.has(w.key)){const $=o.get(w.key);return o.delete(w.key),f($,K,w)}return g.delete(w.key),d&&d(K,w,P)})}return[v(c,t,!1),v(t,c,!0)]}function Ha(d){return Object.prototype.toString.call(d)==="[object Date]"}function Ar(d){return d}function ya(d){const i=d-1;return i*i*i+1}function ma(d,i){if(d===i||d!==d)return()=>d;const t=typeof d;if(t!==typeof i||Array.isArray(d)!==Array.isArray(i))throw new Error("Cannot interpolate values of different type");if(Array.isArray(d)){const c=i.map((f,v)=>ma(d[v],f));return f=>c.map(v=>v(f))}if(t==="object"){if(!d||!i)throw new Error("Object cannot be null");if(Ha(d)&&Ha(i)){const v=d.getTime(),o=i.getTime()-v;return P=>new Date(v+P*o)}const c=Object.keys(i),f={};return c.forEach(v=>{f[v]=ma(d[v],i[v])}),v=>{const g={};return c.forEach(o=>{g[o]=f[o](v)}),g}}if(t==="number"){const c=i-d;return f=>d+f*c}return()=>i}var Lt,Gt,ea,Ht;const wa=class wa{constructor(i,t={}){Qt(this,Lt,Ta(void 0));Qt(this,Gt,Ta(void 0));Qt(this,ea);Qt(this,Ht,null);mt(this,Lt).v=mt(this,Gt).v=i,_a(this,ea,t)}static of(i,t){const c=new wa(i(),t);return Ja(()=>{c.set(i())}),c}set(i,t){var $;D(mt(this,Gt),i);let{delay:c=0,duration:f=400,easing:v=Ar,interpolate:g=ma}={...mt(this,ea),...t};if(f===0)return($=mt(this,Ht))==null||$.abort(),D(mt(this,Lt),i),Promise.resolve();const o=Za.now()+c;let P,K=!1,w=mt(this,Ht);return _a(this,Ht,er(n=>{if(n<o)return!0;if(!K){K=!0;const Z=mt(this,Lt).v;P=g(Z,i),typeof f=="function"&&(f=f(Z,i)),w==null||w.abort()}const R=n-o;return R>f?(D(mt(this,Lt),i),!1):(D(mt(this,Lt),P(v(R/f))),!0)})),mt(this,Ht).promise}get current(){return e(mt(this,Lt))}get target(){return e(mt(this,Gt))}set target(i){this.set(i)}};Lt=new WeakMap,Gt=new WeakMap,ea=new WeakMap,Ht=new WeakMap;let ia=wa;var Lr=l('<div class="phase_display svelte-1boxe40"><span class="svelte-1boxe40"> </span> </div>'),Ur=l('<div class="lifepoint_display svelte-1boxe40"><div class="svelte-1boxe40"> </div> <div class="svelte-1boxe40"> </div></div>'),Yr=(d,i,t)=>i(e(t)),Nr=l('<div class="svelte-1boxe40"><button class="phase_button svelte-1boxe40"> </button></div>'),qr=l("<div><!></div>"),Pr=l('<div class="svelte-1boxe40"><!></div>'),Fr=l("<div><!></div>"),Hr=l('<div class="config_button_wrapper svelte-1boxe40"><button id="config_button" class="svelte-1boxe40">⚙</button></div>'),Or=l("<!> <!> <!> <!>",1),Rr=l('<div style="position: absolute;" class="card_animation_receiver svelte-1boxe40"><!></div>'),Wr=l('<div style="position: absolute; top:0rem" class="svelte-1boxe40">｛効果対象｝</div>'),Kr=l('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Ir=l(" <!> 】",1),zr=l('<div style="position: absolute; bottom:0rem" class="svelte-1boxe40"> <!></div>'),Vr=l("<!> <!>",1),Gr=l('<div class="badge svelte-1boxe40"> </div>'),Qr=l('<div class="card_animation_receiver svelte-1boxe40"><!></div>'),Xr=l("<!> <!> <!> <!>",1),Jr=l('<td><div role="listitem"><!></div></td>');function Zr(d,i){bt(i,!1);let t=We(i,"view",12),c=We(i,"row",8),f=We(i,"column",8),v=We(i,"selectedEntities",28,()=>[]),g=We(i,"selectedCells",28,()=>[]),o=ye(t().getCell(c(),f())),P=ye(new ia(e(o).field.duel.duelists.Above.lp,{duration:400,easing:ya})),K=ye(new ia(e(o).field.duel.duelists.Below.lp,{duration:400,easing:ya}));const w=()=>{D(o,t().getCell(c(),f())),we(P,e(P).target=e(o).field.duel.duelists.Above.lp),we(K,e(K).target=e(o).field.duel.duelists.Below.lp)};e(o).onUpdate.append(w),t().onDuelUpdate.append(w),t().modalController.onUpdate.append(w);let $,n=ye([]),R=()=>console.log("hoge"),Z,G=ye([]),N=ye(!1),H=ye(!1),ge=!1;const De=b=>{var O,x;D(ie,[]),v().reset(),$=b.activator,R=b.resolve,D(n,b.dummyActionInfos),D(G,b.chainBlockInfos.flatMap(m=>m.selectedEntities).getDistinct()),Z=b.entitiesChoices,D(N,!1),D(H,((O=b.cellsChoices)==null?void 0:O.selectables.includes(e(o)))??!1),ge=e(H)&&((x=b.cellsChoices)==null?void 0:x.qty)===1,w()};t().onWaitStart.append(De);const Se=()=>{$=void 0,D(n,[]),R=()=>{console.log("hoge")},Z=void 0,D(G,[]),D(N,!1),D(H,!1),ge=!1};t().onWaitEnd.append(Se);let k=ye(!1),j=[];const te=b=>{j=b.filter(O=>O.dests.includes(e(o))),D(k,j.length>0),w()},ee=()=>{j=[],D(k,!1),w()};t().onDragStart.append(te),t().onDragEnd.append(ee);const[le,be]=_i;let ie=ye([]);const Be=b=>{if($=void 0,e(o)===b.to||e(o).entities.includes(b.entity)){D(ie,[...e(ie),b]);const O=b.resolve;D(o,e(o)),setTimeout(()=>{D(ie,e(ie).filter(x=>x!==b)),b.count++,b.count>1&&O()},600)}};t().onAnimation.append(Be);const Oe=b=>{R({phaseChange:b})},B=()=>e(o).isStackCell&&e(o).entities.flatMap(b=>b.actions).filter(b=>e(n).map(O=>O.action.seq).some(O=>O===b.seq)).length>0,U=b=>{var O;if(((O=b.target)==null?void 0:O.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),ge)R({selectedCells:[e(o)]});else if(e(H))D(N,!e(N)),g(e(N)?[...g(),e(o)]:g().filter(x=>x!==e(o)));else if(e(o).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(o),!0),t().requireUpdate();const x=e(o).entities.flatMap(A=>A.actions).map(A=>A.seq),m=e(n).filter(A=>x.includes(A.action.seq));if(m.length){if(!$)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:$,dummyActionInfos:m,cancelable:!0}).then(A=>{A&&R({actionInfo:A})});return}}t().requireUpdate(),console.info(e(o),Te(...e(o).visibleEntities))},ae=b=>{b.preventDefault(),b.dataTransfer&&(b.dataTransfer.dropEffect="move")},me=b=>{b.preventDefault(),console.info("drop",b,e(k),j),b.dataTransfer&&(b.dataTransfer.dropEffect="move");try{if(e(k)&&j){if(j.length===1){const O=j[0];R({actionInfo:{...O,dest:e(o)}})}else if(j.length>1){if(!$)throw new tr("想定されない状態");e(o).field.duel.view.modalController.terminateAll(),e(o).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:$,dummyActionInfos:j.map(O=>({...O,dest:e(o)})),cancelable:!1}).then(O=>{R({actionInfo:O})})}}}finally{t().removeDraggingActions()}},Te=(...b)=>{if(t().waitMode==="Animation")return"Disabled";if(Z&&Z.selectables.find(x=>b.find(m=>x===m)))return"Selectable";if(!e(n)||e(n).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(x=>x.state==="Shown"))return"Disabled";const O=e(n).filter(x=>b.includes(x.action.entity));return O.length===0?"Disabled":e(o).isStackCell||O[0].action.entity!==b[0]?"Clickable":O.some(x=>x.dests.length)?"Draggable":"Clickable"};kt();var F=Jr(),E=a(F);E.__click=U;var q=a(E);{var W=b=>{var O=Ce(),x=L(O);{var m=A=>{var ve=Ce(),T=L(ve);{var S=y=>{var Y=Lr(),I=a(Y),$e=a(I),ke=s(I,1,!0);u((ue,J)=>{p($e,ue),p(ke,J)},[()=>String(e(o).field.duel.clock.turn).padStart(2,"0"),()=>e(o).field.duel.phase.toUpperCase()],ne),r(y,Y)},_=y=>{var Y=Ce(),I=L(Y);{var $e=ue=>{var J=Ur(),Q=a(J),z=a(Q),xe=s(Q,2),He=a(xe);u((qe,Pe)=>{p(z,qe),p(He,Pe)},[()=>Math.floor(e(P).current),()=>Math.floor(e(K).current)],ne),r(ue,J)},ke=ue=>{var J=Ce(),Q=L(J);{var z=xe=>{var He=Ce(),qe=L(He);{var Pe=Le=>{var ze=Ce(),nt=L(ze);{var je=de=>{var V=Ce(),ce=L(V);_e(ce,1,()=>t().duel.nextPhaseList,pe,(Ne,Ze)=>{var Re=Nr(),Ve=a(Re);Ve.__click=[Yr,Oe,Ze];var M=a(Ve);u(C=>p(M,C),[()=>e(Ze).toUpperCase()],ne),r(Ne,Re)}),r(de,V)};h(nt,de=>{t().duel.isEnded||de(je)})}r(Le,ze)};h(qe,Le=>{t().waitMode==="Free"&&Le(Pe)})}r(xe,He)};h(Q,xe=>{e(o).column===5&&xe(z)},!0)}r(ue,J)};h(I,ue=>{e(o).column===3?ue($e):ue(ke,!1)},!0)}r(y,Y)};h(T,y=>{e(o).column===1?y(S):y(_,!1)})}r(A,ve)};h(x,A=>{e(o).row===3&&A(m)})}r(b,O)},re=b=>{var O=Ce(),x=L(O);{var m=ve=>{var T=Or();const S=ne(()=>e(ie).find(J=>J.to===e(o)));var _=L(T);{var y=J=>{var Q=qr(),z=a(Q);Pt(z,{get entity(){return e(S).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),u(()=>Ee(Q,`card_animation_receiver ${e(o).cellType??""} svelte-1boxe40`)),se(1,Q,()=>be,()=>({key:e(S).entity.seq})),r(J,Q)};h(_,J=>{e(S)&&e(S).index==="Top"&&J(y)})}var Y=s(_,2);_e(Y,1,()=>e(o).visibleEntities,pe,(J,Q)=>{var z=Ce(),xe=L(z);{var He=qe=>{var Pe=Pr(),Le=a(Pe);const ze=ne(()=>Te(e(Q))),nt=ne(()=>e(n).filter(je=>je.action.entity===e(Q)));Pt(Le,{get entity(){return e(Q)},get state(){return e(ze)},get dummyActionInfos(){return e(nt)},cardActionResolve:void 0,get selectedList(){return v()},set selectedList(je){v(je)},$$legacy:!0}),se(2,Pe,()=>le,()=>({key:e(Q).seq})),r(qe,Pe)};h(xe,qe=>{e(ie).every(Pe=>Pe.entity.seq!==e(Q).seq)&&qe(He)})}r(J,z)});var I=s(Y,2);{var $e=J=>{var Q=Fr(),z=a(Q);Pt(z,{get entity(){return e(S).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),u(()=>Ee(Q,`card_animation_receiver ${e(o).cellType??""} svelte-1boxe40`)),se(1,Q,()=>be,()=>({key:e(S).entity.seq})),r(J,Q)};h(I,J=>{e(S)&&e(S).index!=="Top"&&J($e)})}var ke=s(I,2);{var ue=J=>{var Q=Hr();r(J,Q)};h(ke,J=>{e(o).owner.seat==="Below"&&J(ue)})}r(ve,T)},A=ve=>{var T=Xr();const S=ne(()=>e(ie).find(Q=>Q.to===e(o)));var _=L(T);{var y=Q=>{var z=Rr(),xe=a(z);Pt(xe,{get entity(){return e(S).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),se(1,z,()=>be,()=>({key:e(S).entity.seq})),r(Q,z)};h(_,Q=>{e(S)&&e(S).index!=="Top"&&Q(y)})}var Y=s(_,2);{var I=Q=>{var z=Vr(),xe=L(z);_e(xe,1,()=>e(o).visibleEntities.map((Pe,Le)=>({index:Le,entity:Pe})).toReversed(),pe,(Pe,Le)=>{var ze=Ce(),nt=L(ze);{var je=de=>{var V=Kr();const ce=ne(()=>!e(o).isStackCell&&e(Le).index===0?Te(...e(o).visibleEntities):void 0);var Ne=L(V);{var Ze=C=>{var X=Wr();r(C,X)};h(Ne,C=>{e(G).includes(e(Le).entity)&&C(Ze)})}var Re=s(Ne,2),Ve=a(Re);const M=ne(()=>e(Le).index===0?e(n).filter(C=>e(o).visibleEntities.includes(C.action.entity)):void 0);Pt(Ve,{get entity(){return e(Le).entity},get state(){return e(ce)},get dummyActionInfos(){return e(M)},cardActionResolve:void 0,get selectedList(){return v()},set selectedList(C){v(C)},$$legacy:!0}),u(()=>Ee(Re,`duel_card_wrapper ${(e(Le).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1boxe40`)),se(2,Re,()=>le,()=>({key:e(Le).entity.seq})),r(de,V)};h(nt,de=>{e(ie).every(V=>V.entity.seq!==e(Le).entity.seq)&&de(je)})}r(Pe,ze)});var He=s(xe,2);{var qe=Pe=>{var Le=zr(),ze=a(Le),nt=s(ze);_e(nt,1,()=>Ft(e(o).visibleEntities[0].status.maxCounterQty),pe,(je,de)=>{var V=Ir(),ce=L(V),Ne=s(ce);{var Ze=Re=>{var Ve=rt();u(()=>p(Ve,`/${e(o).visibleEntities[0].status.maxCounterQty[e(de)]??""}`)),r(Re,Ve)};h(Ne,Re=>{(e(o).visibleEntities[0].status.maxCounterQty[e(de)]??9999)<100&&Re(Ze)})}u((Re,Ve)=>p(ce,`【
              ${Re??""}${Ve??""} `),[()=>ar(e(de)),()=>e(o).visibleEntities[0].counterHolder.getQty(e(de))],ne),r(je,V)}),u(()=>p(ze,`【${e(o).visibleEntities[0].battlePositionName??""}】 `)),r(Pe,Le)};h(He,Pe=>{e(o).visibleEntities[0].battlePosition&&Pe(qe)})}r(Q,z)};h(Y,Q=>{e(o).visibleEntities.length>0&&Q(I)})}var $e=s(Y,2);{var ke=Q=>{var z=Gr(),xe=a(z);u(()=>p(xe,e(o).visibleEntities.length)),r(Q,z)};h($e,Q=>{e(o).isStackCell&&Q(ke)})}var ue=s($e,2);{var J=Q=>{var z=Qr(),xe=a(z);Pt(xe,{get entity(){return e(S).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),se(1,z,()=>be,()=>({key:e(S).entity.seq})),r(Q,z)};h(ue,Q=>{e(S)&&e(S).index==="Top"&&Q(J)})}r(ve,T)};h(x,ve=>{e(o).cellType==="Hand"?ve(m):ve(A,!1)},!0)}r(b,O)};h(q,b=>{e(o).isDisabledCell?b(W):b(re,!1)})}u(b=>{Ee(F,`${`duel_field_cell duel_field_cell_${e(o).cellType} ${e(o).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1boxe40`),pt(F,"colspan",e(o).cellType==="Hand"?7:1),Ee(E,`${b??""} svelte-1boxe40`)},[()=>`duel_field_cell_inner_box ${e(o).cellType} ${e(k)?"can_accept_drop":""} ${B()?"can_action":""} ${e(N)?"is_selected":e(H)?"is_selectable":""} `],ne),fe("dragover",E,ae),fe("drop",E,me),r(d,F),xt()}Wa(["click"]);const es=(d,i,t=void 0,c="!!!circular reference!!!")=>{let f=[];return JSON.stringify(d,(v,g)=>{if(typeof g=="object"){if(f.indexOf(g)>-1)return c;f.push(g)}let o=g;if(i&&(o=i(v,g)),typeof o=="function")return o.toString();if(o!==g&&typeof o=="object"){if(f.indexOf(o)>-1)return c;f.push(o)}return o},t)};var ts=l('<div class="title svelte-14z6bdh"> </div>'),as=l('<div class="title svelte-14z6bdh"> </div>'),rs=l('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),ss=l('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),is=l("<div><!> <!></div>"),ns=l('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),ls=l("<div><!> <!></div>"),os=l("<div><!> <!></div>"),vs=l('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function ds(d,i){bt(i,!1);let t=ye(void 0),c=We(i,"log",8),f,v=ye([]);const g=()=>{const w=((f==null?void 0:f.seq)??-1)+1;c().records.slice(w).forEach($=>{if(!f){D(v,[[[[$]]]]),f=$;return}if(!e(v)[$.clock.turn]){we(v,e(v)[$.clock.turn]=[[[$]]]),f=$;return}if(!e(v)[$.clock.turn][$.clock.phaseSeq]){we(v,e(v)[$.clock.turn][$.clock.phaseSeq]=[[$]]),f=$;return}if(f.clock.chainSeq===$.clock.chainSeq&&f.clock.chainBlockSeq===$.clock.chainBlockSeq&&f.duelist===$.duelist){e(v)[$.clock.turn][$.clock.phaseSeq].slice(-1)[0].push($),f=$;return}e(v)[$.clock.turn][$.clock.phaseSeq].push([$]),f=$}),D(v,e(v)),rr().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};c().onUpdate.append(g),c().duel.view.onDuelUpdate.append(g),g(),kt();var o=Ce(),P=L(o);{var K=w=>{var $=vs(),n=s(a($),2);_e(n,5,()=>e(v),pe,(R,Z)=>{var G=os(),N=a(G);{var H=De=>{var Se=ts(),k=a(Se);u(()=>p(k,`ターン：${e(Z)[0][0][0].clock.turn??""}`)),r(De,Se)};h(N,De=>{e(Z)[0][0][0].clock.turn>0&&De(H)})}var ge=s(N,2);_e(ge,1,()=>e(Z),pe,(De,Se)=>{var k=ls(),j=a(k);{var te=le=>{var be=as(),ie=a(be);u(()=>p(ie,e(Se)[0][0].clock.period.name)),r(le,be)};h(j,le=>{e(Se)[0][0].clock.turn>0&&le(te)})}var ee=s(j,2);_e(ee,1,()=>e(Se),pe,(le,be)=>{var ie=ns();const Be=ne(()=>{var F;return((F=e(be).find(E=>E.chainNumber!==void 0))==null?void 0:F.chainNumber)??0});var Oe=a(ie),B=a(Oe),U=a(B),ae=s(B,2);{var me=F=>{var E=rs(),q=a(E);u(()=>p(q,`チェーン：${e(Be)??""}`)),r(F,E)};h(ae,F=>{e(Be)&&F(me)})}var Te=s(Oe,2);_e(Te,1,()=>e(be),pe,(F,E)=>{var q=is(),W=a(q);{var re=m=>{var A=rt();u(()=>p(A,e(E).text)),r(m,A)},b=m=>{var A=Ce(),ve=L(A);{var T=_=>{var y=rt();u((Y,I,$e)=>p(y,`移動：${Y??""} ${I??""} ⇒ ${$e??""}`),[()=>{var Y;return(Y=e(E).mainEntity)==null?void 0:Y.toString()},()=>{var Y;return(Y=e(E).from)==null?void 0:Y.toString()},()=>{var Y;return(Y=e(E).to)==null?void 0:Y.toString()}],ne),r(_,y)},S=_=>{var y=Ce(),Y=L(y);{var I=ke=>{var ue=rt();u((J,Q)=>p(ue,`生成：${J??""} void ⇒ ${Q??""}`),[()=>{var J;return(J=e(E).mainEntity)==null?void 0:J.toString()},()=>{var J;return(J=e(E).to)==null?void 0:J.toString()}],ne),r(ke,ue)},$e=ke=>{var ue=Ce(),J=L(ue);{var Q=xe=>{var He=rt();u((qe,Pe)=>p(He,`消滅：${qe??""} ${Pe??""} ⇒ void`),[()=>{var qe;return(qe=e(E).mainEntity)==null?void 0:qe.toString()},()=>{var qe;return(qe=e(E).from)==null?void 0:qe.toString()}],ne),r(xe,He)},z=xe=>{var He=rt();u(()=>p(He,e(E).text)),r(xe,He)};h(J,xe=>{e(E).type==="EntityDisappear"?xe(Q):xe(z,!1)},!0)}r(ke,ue)};h(Y,ke=>{e(E).type==="EntityAppear"?ke(I):ke($e,!1)},!0)}r(_,y)};h(ve,_=>{e(E).type==="EntityMove"?_(T):_(S,!1)},!0)}r(m,A)};h(W,m=>{e(E).type==="ChainBlockHeader"?m(re):m(b,!1)})}var O=s(W,2);{var x=m=>{var A=ss(),ve=a(A);u(T=>pt(ve,"href",T),[()=>window.URL.createObjectURL(new Blob([es(e(E).error,(T,S)=>["pool","bundles","duel"].includes(T)||typeof S=="function"?void 0:S,4)],{type:"text/plain"}))],ne),r(m,A)};h(O,m=>{e(E).error&&m(x)})}u(m=>Ee(q,`duel_log_record duel_log_record_${m??""} svelte-14z6bdh`),[()=>e(E).type.toSnakeCase()],ne),r(F,q)}),u(()=>{var F,E,q;Ee(ie,`duel_log_block_duelist duel_log_block_duelist_${((F=e(be)[0].duelist)==null?void 0:F.seat)??"system"} svelte-14z6bdh`),Ee(B,`duelist ${((E=e(be)[0].duelist)==null?void 0:E.seat)??""} svelte-14z6bdh`),p(U,((q=e(be)[0].duelist)==null?void 0:q.profile.name)||"SYSTEM")}),r(le,ie)}),u(()=>Ee(k,`duel_log_block_phase duel_log_block_phase_${e(Se)[0][0].clock.period.key??""} svelte-14z6bdh`)),r(De,k)}),u(()=>Ee(G,`duel_log_block_turn duel_log_block_turn_${e(Z)[0][0][0].clock.turn??""} svelte-14z6bdh`)),r(R,G)}),sr(n,R=>D(t,R),()=>e(t)),r(w,$)};h(P,w=>{(c().duel.view.infoBoardState==="Log"||c().duel.view.infoBoardState==="Default")&&w(K)})}r(d,o),xt()}var cs=l("<div><div> </div> <div> </div></div>");function Oa(d,i){bt(i,!1);let t=We(i,"duelist",12),c=ye(0),f=ye();const v=async()=>{const n=t().lp-e(c);if(!e(f)||Math.abs(n)<10){D(c,t().lp),e(f)&&(e(f)(),D(f,void 0));return}D(c,e(c)+Math.floor(Math.random()*n)),await It(100),v()},g=()=>{t(t()),!e(f)&&t().lp!==e(c)&&new Promise(n=>{D(f,n),Math.abs(t().lp-e(c)),v()})};t().duel.log.onUpdate.append(g),v(),kt();var o=cs(),P=a(o),K=a(P),w=s(P,2),$=a(w);u(n=>{Ee(o,`duelist duelist_${n??""} svelte-1sy3trd`),Ee(P,`duelist_name duelist_${n??""}_name svelte-1sy3trd`),p(K,t().profile.name),Ee(w,`duelist_lp ${(e(f)?"vibration":"")??""} svelte-1sy3trd`),p($,e(c))},[()=>t().seat.toLowerCase()],ne),r(d,o),xt()}const _s=(d,i,t)=>(i(i()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),us=(d,i,t)=>(i(i()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var fs=l('<div class="svelte-1uevs9j"> </div>'),ps=l('<div class="svelte-1uevs9j"> </div>'),gs=l('<div class="link_arrow_emoji svelte-1uevs9j"> </div>'),ys=l('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),ms=l('<div></div> <div class="svelte-1uevs9j"> </div>',1),hs=l("<div> </div>"),bs=l('<span class="svelte-1uevs9j">/</span> <div class="monster_defense svelte-1uevs9j"> </div>',1),ks=l("<div> </div>"),xs=l('<div class="duel_card_info_row svelte-1uevs9j"><!> <!> <div style="flex-grow: 1;" class="svelte-1uevs9j"></div> <div class="monster_attack svelte-1uevs9j"> </div> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),ws=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),Cs=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),Ds=l("<!> <!>",1),$s=l('<pre class="description svelte-1uevs9j"> </pre>'),Ss=l('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),Ms=l('<pre class="description svelte-1uevs9j"> </pre>'),Ts=l('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),js=l('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),Bs=l('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),Es=l("[ <!> ],",1),As=l('<div class="svelte-1uevs9j"> <!></div>'),Ls=l('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),Us=l('<div class="svelte-1uevs9j"> </div>'),Ys=l('<div class="svelte-1uevs9j"> </div>'),Ns=l('<div class="svelte-1uevs9j"> </div>'),qs=l('<div class="svelte-1uevs9j"> </div>'),Ps=l('<div class="svelte-1uevs9j"> </div>'),Fs=l('<div class="svelte-1uevs9j"> </div>'),Hs=l('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Os=l('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Rs=l('<div class="svelte-1uevs9j">※テスト用カードです</div>'),Ws=l('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),Ks=l('<a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a>'),Is=l('<div class="duel_card_info_links svelte-1uevs9j"><!> <!> <a target="_blank" rel="noopener noreferrer" title="google" class="svelte-1uevs9j">⇒google検索</a></div>'),zs=l("<!> <!>",1),Vs=l('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><!> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Gs(d,i){bt(i,!1);let t=We(i,"entity",8),c=We(i,"mode",12,"Normal"),f=ye(new Promise(()=>{}));const v=()=>{var w,$;let K=t()&&t().entityType==="Card"?t().origin.cardId:($=(w=t())==null?void 0:w.parent)==null?void 0:$.origin.cardId;return K??!1?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${K}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:""};fa(()=>(Xt(t()),pa),()=>{D(f,Jt.then(async K=>{if(t().origin.description||t().origin.pendulumDescription||t().origin.wikiEncodedName)return t().origin;const w=K.getCardInfo(t().origin.name);if(w)return w.cardId!==void 0&&!w.description&&!w.pendulumDescription&&await pa([w.cardId]),w}))}),Ka(),kt();var g=Ce(),o=L(g);{var P=K=>{var w=Vs();w.__click=[_s,c,t],w.__contextmenu=[us,c,t];var $=a(w),n=a($),R=a(n),Z=a(R),G=s(n,2),N=a(G);{var H=B=>{var U=fs(),ae=a(U);u(me=>p(ae,me),[()=>"★".repeat(t().lvl)],ne),r(B,U)},ge=B=>{var U=Ce(),ae=L(U);{var me=F=>{var E=ps(),q=a(E);u(W=>p(q,W),[()=>"☆".repeat(t().rank)],ne),r(F,E)},Te=F=>{var E=Ce(),q=L(E);{var W=re=>{var b=gs(),O=a(b);u(x=>p(O,x),[()=>t().origin.linkArrowKeys.map(x=>Ia[x].emoji).join("")],ne),r(re,b)};h(q,re=>{t().origin.linkArrowKeys&&re(W)},!0)}r(F,E)};h(ae,F=>{t().rank&&t().rank>0?F(me):F(Te,!1)},!0)}r(B,U)};h(N,B=>{t().lvl&&t().lvl>0?B(H):B(ge,!1)})}var De=s(N,2),Se=a(De),k=s(G,2);{var j=B=>{var U=Ds(),ae=L(U);{var me=q=>{var W=ys(),re=a(W),b=a(re),O=s(re,2),x=a(O);u(()=>{p(b,`◀ ${t().psL??""}`),p(x,`${t().psR??""} ▶`)}),r(q,W)};h(ae,q=>{var W;(W=t().origin.monsterCategories)!=null&&W.includes("Pendulum")&&q(me)})}var Te=s(ae,2);{var F=q=>{var W=xs(),re=L(W),b=a(re);_e(b,1,()=>t().attr,pe,(S,_)=>{var y=ms(),Y=L(y),I=s(Y,2),$e=a(I);u(()=>{Ee(Y,`monster_attr ${e(_)??""} svelte-1uevs9j`),p($e,`${ba[e(_)]??""}属性`)}),r(S,y)});var O=s(b,2);_e(O,1,()=>t().types,pe,(S,_)=>{var y=hs(),Y=a(y);u(()=>{Ee(y,`monster_cat ${e(_)??""} svelte-1uevs9j`),p(Y,`${la[e(_)]??""}${ka[e(_)]??""}族`)}),r(S,y)});var x=s(O,4),m=a(x),A=s(x,2);{var ve=S=>{var _=bs(),y=s(L(_),2),Y=a(y);u(()=>p(Y,t().def??"?")),r(S,_)};h(A,S=>{var _;(_=t().status.monsterCategories)!=null&&_.includes("Link")||S(ve)})}var T=s(re,2);_e(T,5,()=>t().status.monsterCategories??[],pe,(S,_)=>{var y=ks(),Y=a(y);u(()=>{Ee(y,`monster_cat ${e(_)??""} svelte-1uevs9j`),p(Y,`${Zt[e(_)]??""}${ra[e(_)]??""}`)}),r(S,y)}),u(()=>p(m,t().atk??"?")),r(q,W)},E=q=>{var W=Ce(),re=L(W);{var b=x=>{var m=ws(),A=s(a(m),2),ve=a(A);u(()=>p(ve,`${oa[t().status.spellCategory]??""}魔法`)),r(x,m)},O=x=>{var m=Ce(),A=L(m);{var ve=T=>{var S=Cs(),_=s(a(S),2),y=a(_);u(()=>p(y,`${va[t().status.trapCategory]??""}罠`)),r(T,S)};h(A,T=>{t().kind==="Trap"&&t().status.trapCategory&&T(ve)},!0)}r(x,m)};h(re,x=>{t().kind==="Spell"&&t().status.spellCategory?x(b):x(O,!1)},!0)}r(q,W)};h(Te,q=>{t().kind==="Monster"?q(F):q(E,!1)})}r(B,U)};h(k,B=>{c()!=="Debug"&&B(j)})}var te=s($,2),ee=a(te);{var le=B=>{var U=Ts(),ae=L(U);{var me=E=>{var q=Ss(),W=a(q);ht(W,()=>e(f),re=>{var b=rt('"読み込み中"');r(re,b)},(re,b)=>{var O=$s(),x=a(O);u(()=>{var m;return p(x,(m=e(b))==null?void 0:m.pendulumDescription)}),r(re,O)}),r(E,q)};h(ae,E=>{var q;(q=t().status.monsterCategories)!=null&&q.includes("Pendulum")&&E(me)})}var Te=s(ae,2),F=a(Te);ht(F,()=>e(f),E=>{var q=rt('"読み込み中"');r(E,q)},(E,q)=>{var W=Ms(),re=a(W);u(()=>{var b;return p(re,(b=e(q))==null?void 0:b.description)}),r(E,W)}),r(B,U)},be=B=>{var U=Ce(),ae=L(U);{var me=F=>{var E=Ce(),q=L(E);{var W=re=>{var b=Bs(),O=s(a(b),2);_e(O,5,()=>t().actions,pe,(x,m)=>{var A=Ce();const ve=ne(()=>e(m).actionCountUpperBound),T=ne(()=>e(m).actionCount);var S=L(A);{var _=y=>{var Y=js(),I=a(Y),$e=a(I),ke=s(I,2),ue=a(ke),J=s(ke,4),Q=a(J);u(()=>{p($e,e(m).title),p(ue,e(T)),p(Q,e(ve))}),r(y,Y)};h(S,y=>{e(ve)!==void 0&&e(T)!==void 0&&y(_)})}r(x,A)}),r(re,b)};h(q,re=>{t().actions.some(b=>b.actionCountUpperBoundKey)&&re(W)})}r(F,E)},Te=F=>{var E=Hs(),q=a(E),W=a(q);_e(W,0,()=>["info","status"],pe,(je,de)=>{var V=Ls(),ce=L(V),Ne=a(ce),Ze=s(ce,2);_e(Ze,1,()=>Object.entries(t()[de]),pe,(Ve,M)=>{let C=()=>e(M)[0],X=()=>e(M)[1];var oe=As(),Me=a(oe),Ge=s(Me);{var Ue=Ye=>{var Ie=Es(),Xe=s(L(Ie));_e(Xe,1,X,pe,(lt,$t)=>{var jt=rt();u(St=>p(jt,`${St??""},`),[()=>e($t).toString()],ne),r(lt,jt)}),r(Ye,Ie)},Ke=Ye=>{var Ie=rt();u(Xe=>p(Ie,`${Xe??""},`),[()=>{var Xe;return(Xe=X())==null?void 0:Xe.toString()}],ne),r(Ye,Ie)};h(Ge,Ye=>{Array.isArray(X())?Ye(Ue):Ye(Ke,!1)})}u(()=>p(Me,`"${C()??""}" : `)),r(Ve,oe)});var Re=s(Ze,2);Re.textContent="},",u(()=>p(Ne,`"${de??""}" :{`)),r(je,V)});var re=s(W,2);re.textContent='"actions" :[';var b=s(re,2);_e(b,1,()=>t().actions,pe,(je,de)=>{var V=Us(),ce=a(V);u(()=>p(ce,`"${e(de).playType??""} ${e(de).title??""}",`)),r(je,V)});var O=s(b,2);O.textContent="],";var x=s(O,2);x.textContent='"substituteEffects" :[';var m=s(x,2);_e(m,1,()=>t().substituteEffects,pe,(je,de)=>{var V=Ys(),ce=a(V);u(()=>p(ce,`"${e(de).title??""}",`)),r(je,V)});var A=s(m,2);A.textContent="],";var ve=s(A,2);ve.textContent='"continuousEffects" :[';var T=s(ve,2);_e(T,1,()=>t().continuousEffects,pe,(je,de)=>{var V=Ns(),ce=a(V);u(()=>p(ce,`"${e(de).isStarted??""}",`)),r(je,V)});var S=s(T,2);S.textContent="],";var _=s(S,2);_.textContent='"procFilters" :[';var y=s(_,2);_e(y,1,()=>t().procFilterBundle.operators,pe,(je,de)=>{var V=qs(),ce=a(V);u(Ne=>p(ce,`"${Ne??""} ${e(de).title??""} ${e(de).isEffective??""} ",`),[()=>e(de).isSpawnedBy.toString()],ne),r(je,V)});var Y=s(y,2);Y.textContent="],";var I=s(Y,2);I.textContent='"numericStateOperators" :[';var $e=s(I,2);_e($e,1,()=>t().numericOprsBundle.operators,pe,(je,de)=>{var V=Ps(),ce=a(V);u(Ne=>p(ce,`"${Ne??""} ${e(de).title??""} ${e(de).isEffective??""} ${e(de).isContinuous??""} ${e(de).targetState??""} ${e(de).targetStateGen??""} ",`),[()=>e(de).isSpawnedBy.toString()],ne),r(je,V)});var ke=s($e,2);ke.textContent="],";var ue=s(ke,2);ue.textContent='"stateOperators" :[';var J=s(ue,2);_e(J,1,()=>t().statusOperatorBundle.operators,pe,(je,de)=>{var V=Fs(),ce=a(V);u(Ne=>p(ce,`"${Ne??""} ${e(de).title??""} ${e(de).isEffective??""} ",`),[()=>e(de).isSpawnedBy.toString()],ne),r(je,V)});var Q=s(J,2);Q.textContent="],";var z=s(Q,2);z.textContent='"lastMoveLogRecord" :{';var xe=s(z,2),He=a(xe),qe=s(xe,2),Pe=a(qe),Le=s(qe,2),ze=a(Le),nt=s(Le,2);nt.textContent="},",u((je,de)=>{p(He,`"movedBy":"${je??""}",`),p(Pe,`"movedAs":"${de??""}",`),p(ze,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var je;return(je=t().moveLog.latestRecord.movedBy)==null?void 0:je.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],ne),r(F,E)};h(ae,F=>{c()==="Detail"?F(me):F(Te,!1)},!0)}r(B,U)};h(ee,B=>{c()==="Normal"?B(le):B(be,!1)})}var ie=s(te,2),Be=a(ie);{var Oe=B=>{var U=zs(),ae=L(U);{var me=q=>{var W=Os();r(q,W)};h(ae,q=>{t().origin.isOldVersion&&q(me)})}var Te=s(ae,2);{var F=q=>{var W=Rs();r(q,W)},E=q=>{var W=Is(),re=a(W);{var b=m=>{var A=Ws();const ve=ne(()=>t().entityType==="Card"?t():t().parent);var T=a(A);u(S=>{var _;pt(A,"href",S),p(T,`⇒${((_=e(ve))!=null&&_.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[v],ne),r(m,A)};h(re,m=>{var A;t()&&(t().entityType==="Card"||((A=t().parent)==null?void 0:A.entityType)==="Card")&&m(b)})}var O=s(re,2);ht(O,()=>e(f),null,(m,A)=>{var ve=Ce(),T=L(ve);{var S=_=>{var y=Ks();u(()=>pt(y,"href",`https://yugioh-wiki.net/index.php?${e(A).wikiEncodedName}`)),r(_,y)};h(T,_=>{e(A)&&e(A).wikiEncodedName&&_(S)})}r(m,ve)});var x=s(O,2);u(()=>pt(x,"href",`https://www.google.com/search?q=遊戯王 ${t().origin.name}`)),r(q,W)};h(Te,q=>{t().origin.isForTest?q(F):q(E,!1)})}r(B,U)};h(Be,B=>{t()&&B(Oe)})}u((B,U)=>{Ee(w,`duel_card duel_card_info ${t().origin.kind??""} ${B??""} svelte-1uevs9j`),p(Z,t().nm),p(Se,U)},[()=>{var B;return(B=t().origin.monsterCategories)==null?void 0:B.join(" ")},()=>"★".repeat(t().lvl||0)],ne),r(K,w)};h(o,K=>{t()&&K(P)})}r(d,g),xt()}Wa(["click","contextmenu"]);var Qs=l('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),Xs=l('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),Js=l('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Zs(d,i){bt(i,!1);let t=We(i,"cell",12);const c=()=>{t(t())},f=P=>t().cardEntities.filter(K=>K.face===P);t().field.duel.view.onDuelUpdate.append(c),kt();var v=Ce(),g=L(v);{var o=P=>{var K=Js(),w=a(K),$=a(w),n=a($),R=s($,2),Z=a(R),G=s(w,2);_e(G,4,()=>["FaceUp","FaceDown"],pe,(N,H)=>{var ge=Ce(),De=L(ge);{var Se=k=>{var j=Xs(),te=a(j),ee=a(te),le=s(te,2);_e(le,1,()=>f(H).toSorted(ir),pe,(be,ie)=>{var Be=Qs(),Oe=a(Be);const B=ne(()=>t().owner===t().field.duel.duelists.Below);Pt(Oe,{get entity(){return e(ie)},get isVisibleForcibly(){return e(B)},isWideMode:!0,cardActionResolve:void 0}),r(be,Be)}),u(()=>p(ee,H==="FaceUp"?"表向き":"裏向き")),r(k,j)};h(De,k=>{f(H).length&&k(Se)})}r(N,ge)}),u(()=>{var N;p(n,(N=t().owner)==null?void 0:N.profile.name),p(Z,t().cellType)}),r(P,K)};h(g,P=>{t().field.duel.view.infoBoardState==="CellInfo"&&P(o)})}r(d,v),xt()}var ei=l('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),ti=l('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function ai(d,i){bt(i,!1);let t=We(i,"viewController",8),c=We(i,"userProfile",12);kt();var f=Ce(),v=L(f);{var g=o=>{var P=ti(),K=s(a(P),2),w=s(a(K),2);_e(w,1,()=>or,pe,($,n)=>{var R=ei(),Z=a(R),G=a(Z),N=s(Z,2),H=a(N);u(()=>p(H,nr[e(n)])),lr(G,()=>c().chainConfig[e(n)],ge=>c(c().chainConfig[e(n)]=ge,!0)),fe("change",G,()=>c().save()),r($,R)}),r(o,P)};h(v,o=>{t().infoBoardState==="Config"&&o(g)})}r(d,f),xt()}function ri(d,{from:i,to:t},c={}){var{delay:f=0,duration:v=j=>Math.sqrt(j)*120,easing:g=ya}=c,o=getComputedStyle(d),P=o.transform==="none"?"":o.transform,[K,w]=o.transformOrigin.split(" ").map(parseFloat);K/=d.clientWidth,w/=d.clientHeight;var $=si(d),n=d.clientWidth/t.width/$,R=d.clientHeight/t.height/$,Z=i.left+i.width*K,G=i.top+i.height*w,N=t.left+t.width*K,H=t.top+t.height*w,ge=(Z-N)*n,De=(G-H)*R,Se=i.width/t.width,k=i.height/t.height;return{delay:f,duration:typeof v=="function"?v(Math.sqrt(ge*ge+De*De)):v,easing:g,css:(j,te)=>{var ee=te*ge,le=te*De,be=j+te*Se,ie=j+te*k;return`transform: ${P} translate(${ee}px, ${le}px) scale(${be}, ${ie});`}}}function si(d){if("currentCSSZoom"in d)return d.currentCSSZoom;for(var i=d,t=1;i!==null;)t*=+getComputedStyle(i).zoom,i=i.parentElement;return t}var ii=l('<div class="chain_number svelte-lqu21u"> </div>'),ni=l('<div class="duel_card_row svelte-lqu21u"> </div>'),li=l('<div class="appendix svelte-lqu21u"> </div>'),oi=l('<div class="appendix_wrapper svelte-lqu21u"></div>'),vi=l('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),di=l("<div></div>");function ci(d,i){bt(i,!1);let t=We(i,"duel",8),c=We(i,"position",8,"left");const f=-100,v=()=>c()==="left"?-100:100;let g=ye([]),o=Promise.resolve(),P=Promise.resolve();const K=1e3,w=500,$=400,n=Z=>{const G={...Z};G.isKnown=Z.chainBlockInfo.action.entity.controller.duelistType==="Player"||Z.chainBlockInfo.action.entity.face==="FaceUp",G.chainBlockInfo.onStateChange.append(N=>{if(N==="done"||N==="failed"||N==="negated")return o=o.then(async()=>{const H=new Date().getTime()-G.chainBlockInfo.wasSpawnedAt.getTime();H<K&&await It(K-H),D(g,e(g).filter(ge=>ge.seq!==G.seq)),await It(w+$)}).then(),"RemoveMe";D(g,e(g))}),P=P.then(async()=>{D(g,[G,...e(g)].sort((N,H)=>vr.isSameChain(N.clock,H.clock)&&N.chainBlockInfo.action.isWithChainBlock&&H.chainBlockInfo.action.isWithChainBlock?H.clock.totalProcSeq-N.clock.totalProcSeq:N.clock.totalProcSeq-H.clock.totalProcSeq)),await It(300)}),o=o.then(()=>It(1e3))};t().chainBlockLog.onInsert.append(n),kt();var R=di();_e(R,13,()=>e(g),Z=>Z.seq,(Z,G)=>{var N=vi();const H=ne(()=>{const{activator:U,action:ae,appendix:me}=e(G).chainBlockInfo;return{activator:U,action:ae,appendix:me}});var ge=a(N),De=a(ge);{var Se=U=>{var ae=ii(),me=a(ae);u(()=>p(me,`チェーン：${e(G).chainBlockInfo.chainNumber??""}`)),r(U,ae)};h(De,U=>{e(G).chainBlockInfo.chainNumber&&U(Se)})}var k=s(De,2),j=a(k),te=s(k,2),ee=a(te);{var le=U=>{var ae=ni(),me=a(ae);u(()=>p(me,e(G).isKnown?e(H).action.entity.nm:"？？？")),r(U,ae)};h(ee,U=>{(e(H).action.entity.entityType==="Card"||e(H).action.entity.entityType==="Token")&&U(le)})}var be=s(ee,2),ie=a(be),Be=a(ie),Oe=s(ie,2);{var B=U=>{var ae=oi();_e(ae,5,()=>e(H).appendix,pe,(me,Te)=>{var F=li(),E=a(F);u(()=>p(E,e(Te))),r(me,F)}),r(U,ae)};h(Oe,U=>{e(H).appendix&&U(B)})}u((U,ae,me)=>{Ee(N,`cut_in_row ${(!e(G).chainBlockInfo.chainNumber||e(G).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Ee(ge,`cut_in_item cut_in_item_${U??""} cut_in_item_${e(G).chainBlockInfo.state??""} svelte-lqu21u`),Ee(k,`duelist_name duelist_${U??""}_name svelte-lqu21u`),p(j,e(H).activator.profile.name),Ee(te,`duel_card duel_card_${U??""} ${ae??""} ${(e(G).isKnown?e(H).action.entity.origin.kind:"")??""} ${e(H).action.entity.entityType??""}  svelte-lqu21u`),p(Be,me)},[()=>e(H).activator.seat.toLowerCase(),()=>e(G).isKnown?(e(H).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(H).action.toString()],ne),se(3,ge,()=>Br,()=>new Date().getTime()-e(G).chainBlockInfo.wasSpawnedAt.getTime()<K?{x:v(),duration:$}:{y:f,duration:$}),dr(N,()=>ri,()=>({duration:w})),r(Z,N)}),u(()=>Ee(R,`cut_in_container cut_in_container_${c()??""} svelte-lqu21u`)),r(d,R),xt()}const _i=Er({duration:400});var ui=l('<div class="duel_desk_left v_flex svelte-1w535im"><!> <!> <!></div>'),fi=l('<button class="duel_field_header_message svelte-1w535im"> </button> <div class="duel_field_header_buttons svelte-1w535im"><button class="svelte-1w535im">サレンダー</button></div>',1),pi=l("<tr></tr>"),gi=l('<table class="duel_field svelte-1w535im"><tbody class="svelte-1w535im"></tbody></table>'),yi=l('<button class="svelte-1w535im">OK</button>'),mi=l('<button class="svelte-1w535im">cancel</button>'),hi=l("<!> <!>",1),bi=l('<button class="svelte-1w535im"> </button>'),ki=l('<div style="text-align: left;"><!> <!> <!></div>'),xi=l('<div><!> <div class=" duel_desk_center v_flex svelte-1w535im"><div class="duel_field_header svelte-1w535im"><!></div> <div class="duel_field_body svelte-1w535im"><!></div> <div class="duel_field_footer svelte-1w535im"><!></div></div> <!></div> <div style="position:fixed;bottom:0"> </div> <!> <div><!></div>',1);function wi(d,i){bt(i,!1);let t=We(i,"duel",12),c=We(i,"userProfile",8),f=ye(0),v=ye(0),g=ye([]),o=ye([]),P=()=>{},K=ye([]),w=ye(),$=ye(),n=ye(()=>!1),R=ye(!1);const Z=_=>{P=_.resolve,D(K,_.dummyActionInfos.filter(y=>y.action.entity.entityType==="Duelist").filter(y=>y.action.entity.controller.seat==="Below")),D(w,void 0),D($,void 0),D(o,[]),D(g,[]),D(R,!1),_.entitiesChoices&&(D(w,_.entitiesChoices),D(n,()=>{var y;return((y=_.entitiesChoices)==null?void 0:y.validator(e(g)))??!1}),D(R,_.entitiesChoices.cancelable),e(w).selectables.every(y=>y.cell.isPlayFieldCell&&y.getIndexInCell()===0||y.cell.cellType==="Hand"&&y.controller.duelistType==="Player"||y.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:_.entitiesChoices,chainBlockInfos:_.chainBlockInfos,cancelable:_.entitiesChoices.cancelable}).then(y=>{P({selectedEntities:y})})),_.cellsChoices&&(D($,_.cellsChoices),D(n,()=>{var y;return((y=_.cellsChoices)==null?void 0:y.validator(e(o)))??!1}),D(R,_.cellsChoices.cancelable))};t().view.onWaitStart.append(Z);const G=()=>{P=()=>{},D($,void 0),D(w,void 0),D(o,[]),D(g,[]),D(n,()=>!1),D(R,!1)};t().view.onWaitEnd.append(G);let N=ye(void 0),H=ye("Normal");const ge=({card:_,mode:y})=>{D(N,_),D(H,y??(e(N)===_||e(H)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(ge);const De=()=>{t(t())};t().view.onDuelUpdate.append(De),t().log.onUpdate.append(De);const Se=()=>{e(w)&&e(w).validator(e(g))&&P({selectedEntities:e(g)}),e($)&&e($).validator(e(o))&&P({selectedCells:e(o)})},k=()=>{P({})},j=_=>{P({actionInfo:_})},te=()=>{P({surrender:!0})};t().main();const ee=()=>e(f)<=1400?"compact":"wide";kt();var le=xi(),be=L(le),ie=a(be);{var Be=_=>{var y=ui(),Y=a(y);Oa(Y,{get duelist(){return t().duelists.Above}});var I=s(Y,2);{var $e=ue=>{Gs(ue,{get entity(){return e(N)},get mode(){return e(H)}})};h(I,ue=>{e(N)&&ue($e)})}var ke=s(I,2);Oa(ke,{get duelist(){return t().duelists.Below}}),r(_,y)};h(ie,_=>{ee()==="wide"&&_(Be)})}var Oe=s(ie,2),B=a(Oe),U=a(B);{var ae=_=>{var y=fi(),Y=L(y),I=a(Y),$e=s(Y,2),ke=a($e);u(()=>p(I,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),fe("click",Y,()=>{t(t().view.infoBoardState="Log",!0)}),fe("click",ke,te),r(_,y)};h(U,_=>{t().isEnded||_(ae)})}var me=s(B,2),Te=a(me);{var F=_=>{var y=gi(),Y=a(y);_e(Y,5,()=>t().field.cells,pe,(I,$e,ke)=>{var ue=pi();Ee(ue,`${`duel_desk_row_${ke}`??""} svelte-1w535im`),_e(ue,5,()=>e($e),pe,(J,Q,z)=>{Zr(J,{get view(){return t().view},row:ke,column:z,get selectedEntities(){return e(g)},set selectedEntities(xe){D(g,xe)},get selectedCells(){return e(o)},set selectedCells(xe){D(o,xe)},$$legacy:!0})}),r(I,ue)}),r(_,y)};h(Te,_=>{t().clock.turn>0&&_(F)})}var E=s(me,2),q=a(E);{var W=_=>{var y=hi(),Y=L(y);{var I=ue=>{var J=yi();u(Q=>J.disabled=Q,[()=>!e(n)()],ne),fe("click",J,Se),r(ue,J)};h(Y,ue=>{((e(w)&&e(w).qty)??(e($)&&e($).qty)??9999)>1&&ue(I)})}var $e=s(Y,2);{var ke=ue=>{var J=mi();fe("click",J,k),r(ue,J)};h($e,ue=>{e(R)&&ue(ke)})}r(_,y)},re=_=>{var y=Ce(),Y=L(y);_e(Y,1,()=>e(K),pe,(I,$e)=>{var ke=bi(),ue=a(ke);u(()=>p(ue,e($e).action.title)),fe("click",ke,()=>j(e($e))),r(I,ke)}),r(_,y)};h(q,_=>{e(w)&&e(w).selectables.length||e($)&&e($).selectables?_(W):_(re,!1)})}var b=s(Oe,2);{var O=_=>{var y=ki(),Y=a(y);ds(Y,{get log(){return t().log}});var I=s(Y,2);Zs(I,{get cell(){return t().view.infoBoardCell}});var $e=s(I,2);ai($e,{get userProfile(){return c()},get viewController(){return t().view}}),u(ke=>Ee(y,`duel_desk_right duel_desk_right_${ke??""}  svelte-1w535im`),[()=>t().view.infoBoardState.toLowerCase()],ne),se(3,y,()=>he,()=>({duration:e(f)>1400?0:200,axis:"x"})),r(_,y)};h(b,_=>{(e(f)>1400||t().view.infoBoardState!=="Default")&&_(O)})}var x=s(be,2),m=a(x),A=s(x,2);cr(A,{get modalController(){return t().view.modalController}});var ve=s(A,2),T=a(ve);const S=ne(()=>ee()==="wide"?"right":"left");ci(T,{get duel(){return t()},get position(){return e(S)}}),u((_,y)=>{Ee(be,`flex duel_desk ${_??""}_mode svelte-1w535im`),p(m,y),Ee(ve,`cutin ${_??""}_mode svelte-1w535im`)},[ee,()=>t().clock.toFullString()],ne),sa("innerWidth",_=>D(f,_)),sa("innerHeight",_=>D(v,_)),r(d,le),xt()}var Ci=l('<div class="svelte-1yfuu8d"><button class="button_style_reset svelte-1yfuu8d">クリア</button></div>'),Di=l("<div></div>"),$i=l("<!> <!> <!> <!>",1),Si=l('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),Mi=l('<li class="deck_editor_item svelte-1yfuu8d"><div role="listitem"><div class="svelte-1yfuu8d"><div class="svelte-1yfuu8d"> </div> <div style="display:flex; flex-wrap: wrap;" class="svelte-1yfuu8d"><div style="text-wrap-mode: nowrap;" class="svelte-1yfuu8d"><!> <!> <!></div> <div style="flex-grow: 1; height:0px; width:0px" class="svelte-1yfuu8d"></div> <div style="text-wrap-mode: nowrap;" class="svelte-1yfuu8d"><!></div></div></div></div> <button class="button_style_reset plus_minus_button svelte-1yfuu8d">+</button> <button class="button_style_reset plus_minus_button svelte-1yfuu8d">-</button></li>'),Ti=l('<div class="deck_editor_card_kind_header svelte-1yfuu8d"><div class="svelte-1yfuu8d"> <!> 枚） <!></div> <div style="display: flex;" class="svelte-1yfuu8d"><!> <div class="triangle svelte-1yfuu8d">▲</div></div></div> <div class="deck_editor_card_kind_body svelte-1yfuu8d"><ul></ul></div>',1),ji=l("<div><!></div>"),Bi=l('<div class="deck_editor_card_list svelte-1yfuu8d"></div>');function Ra(d,i){bt(i,!1);let t=We(i,"allCardTree",8),c=We(i,"deckCardTree",12),f=We(i,"mode",8),v=We(i,"onAttention",8),g=We(i,"searchCondition",8,void 0),o=ye("ExtraMonster");const P=ga.terminalTypeName==="PC"?500:ga.terminalTypeName==="Tablet Device"?300:100,K=20;let w=ye(K);const $=(k=!1)=>{if(k||D(w,K),D(w,e(w)+10),f()==="List"){if(e(w)>=P)return}else if(e(w)>ur(...Object.values(c()).map(j=>j.length)))return;It(100).then(()=>$(!0))},n=ye(f()==="List"?t():c()),R=(...k)=>{const j=k.length?k:Ft(e(n)),te=(ee,le)=>{var be;return ja(ee,le,(be=g())==null?void 0:be.sort.filter(ie=>ie.priority>0).toSorted((ie,Be)=>ie.priority-Be.priority))};j.forEach(ee=>e(n)[ee].sort(te))},Z=(k,j)=>{c(c()[j]=[],!0)},G=(k,j)=>{const te=ua(j),ee=c()[te].filter(be=>be.name===j.name).length;let le=k.shiftKey?3-ee:1;console.debug(j,te,ee,le),!k.ctrlKey&&ee>2&&(le=0),le&&c(c()[te]=[...c()[te],...Array(le).fill(j)].sort(ja),!0),v()(j)},N=(k,j)=>{const te=ua(j);let ee=0;c(c()[te]=c()[te].filter(le=>le.name!==j.name?!0:(ee++,!k.shiftKey&&ee>1)),!0),v()(j)};let H=ye(structuredClone(e(n))),ge=ye("");const De=k=>{if(!g())return!0;if(k.kind==="XyzMaterial")return!1;const j=ua(k);if(!g().deckCardKinds.includes(j)||g().name.trim().length&&[k.name,...k.nameTags??[],...k.textTags??[]].every(ee=>!ee.includes(g().name))||!k.isImplemented&&!g().others.includes("implemented")||k.isForTest&&!g().others.includes("test")||k.isOldVersion&&!g().others.includes("oldVersion"))return!1;if(k.kind==="Monster"){if(k.attributes&&!g().monsterAttributes.union(k.attributes).length||k.types&&!g().monsterTypes.union(k.types).length)return!1;const te=k.level??k.rank??k.link;return At(g().starLowerBound)&&(te??0)<g().starLowerBound||At(g().starUpperBound)&&(te??0)>g().starUpperBound||At(g().atkLowerBound)&&(k.attack??0)<g().atkLowerBound||At(g().atkUpperBound)&&(k.attack??0)>g().atkUpperBound||At(g().defLowerBound)&&(k.defense??0)<g().defLowerBound||At(g().defUpperBound)&&(k.defense??0)>g().defUpperBound||At(g().atkPlusDef)&&(!At(k.attack)||!At(k.defense)||k.attack+k.defense!==g().atkPlusDef)||!k.monsterCategories||j==="ExtraMonster"&&!k.monsterCategories.union(g().exMonsterCategories).length?!1:k.monsterCategories.union(g().monsterCategories).length}if(k.kind==="Spell")return k.spellCategory&&g().spellCategories.includes(k.spellCategory);if(k.kind==="Trap")return k.trapCategory&&g().trapCategories.includes(k.trapCategory)};fa(()=>(Xt(f()),e(n),Xt(c()),e(o),e(H)),()=>{if(f()==="Deck"){if(Ft(e(n)).forEach(k=>we(n,e(n)[k]=c()[k])),!e(n)[e(o)].length)D(o,Ft(e(n)).find(k=>e(n)[k].find(De))??"ExtraMonster");else{const k=Ft(e(n)).map(j=>({kind:j,cardInfos:e(n)[j]})).filter(({cardInfos:j})=>j.length).find(({kind:j,cardInfos:te})=>te.length!==e(H)[j].length);k&&e(o)!==k.kind&&D(o,k.kind)}D(H,structuredClone(e(n)))}}),fa(()=>(Xt(f()),Xt(g()),e(ge)),()=>{var k;if(f()==="List"){const j=JSON.stringify((k=g())==null?void 0:k.sort);e(ge)!==j&&(D(ge,j),R()),$()}}),Ka(),kt();var Se=Bi();_e(Se,5,()=>zt,pe,(k,j,te)=>{var ee=ji();const le=ne(()=>e(n)[e(j)].filter(De));var be=a(ee);{var ie=Be=>{var Oe=Ti(),B=L(Oe),U=a(B),ae=a(U),me=s(ae);{var Te=x=>{var m=rt();u(A=>p(m,`/ ${A??""}`),[()=>e(n)[e(j)].length.toLocaleString()],ne),r(x,m)};h(me,x=>{f()==="List"&&x(Te)})}var F=s(me,2);{var E=x=>{var m=rt();u(A=>p(m,`※表示上限${A??""}枚`),[()=>P.toLocaleString()],ne),r(x,m)};h(F,x=>{e(le).length>P&&x(E)})}var q=s(U,2),W=a(q);{var re=x=>{var m=Ci(),A=a(m);fe("click",A,ve=>Z(ve,e(j))),r(x,m)};h(W,x=>{f()==="Deck"&&e(le).length&&x(re)})}var b=s(B,2),O=a(b);_e(O,5,()=>e(le),pe,(x,m,A)=>{var ve=Ce(),T=L(ve);{var S=_=>{var y=Mi(),Y=a(y),I=a(Y),$e=a(I),ke=a($e),ue=s($e,2),J=a(ue),Q=a(J);{var z=V=>{var ce=$i(),Ne=L(ce);{var Ze=X=>{var oe=rt();u(()=>p(oe,`★${e(m).level??""}`)),r(X,oe)},Re=X=>{var oe=Ce(),Me=L(oe);{var Ge=Ke=>{var Ye=rt();u(()=>p(Ye,`☆${e(m).rank??""}`)),r(Ke,Ye)},Ue=Ke=>{var Ye=Ce(),Ie=L(Ye);{var Xe=lt=>{var $t=rt();u(()=>p($t,`Ｌ${e(m).link??""}`)),r(lt,$t)};h(Ie,lt=>{e(m).link&&lt(Xe)},!0)}r(Ke,Ye)};h(Me,Ke=>{e(m).rank?Ke(Ge):Ke(Ue,!1)},!0)}r(X,oe)};h(Ne,X=>{e(m).level?X(Ze):X(Re,!1)})}var Ve=s(Ne,2);_e(Ve,1,()=>e(m).attributes??[],pe,(X,oe)=>{var Me=Di();u(()=>Ee(Me,`monster_attr ${e(oe)??""} svelte-1yfuu8d`)),r(X,Me)});var M=s(Ve,2);_e(M,1,()=>e(m).types??[],pe,(X,oe)=>{var Me=rt();u(()=>p(Me,la[e(oe)])),r(X,Me)});var C=s(M,2);_e(C,1,()=>e(m).monsterCategories??[],pe,(X,oe)=>{var Me=rt();u(()=>p(Me,Zt[e(oe)])),r(X,Me)}),r(V,ce)};h(Q,V=>{e(m).kind==="Monster"&&V(z)})}var xe=s(Q,2);{var He=V=>{var ce=rt();u(()=>p(ce,`${oa[e(m).spellCategory]??""}魔法`)),r(V,ce)};h(xe,V=>{e(m).spellCategory&&V(He)})}var qe=s(xe,2);{var Pe=V=>{var ce=rt();u(()=>p(ce,`${va[e(m).trapCategory]??""}罠`)),r(V,ce)};h(qe,V=>{e(m).trapCategory&&V(Pe)})}var Le=s(J,4),ze=a(Le);{var nt=V=>{var ce=Si(),Ne=L(ce),Ze=a(Ne),Re=s(Ne,2),Ve=a(Re);u(()=>{p(Ze,e(m).attack??"?"),p(Ve,e(m).defense??"?")}),r(V,ce)};h(ze,V=>{e(m).kind==="Monster"&&V(nt)})}var je=s(Y,2),de=s(je,2);u((V,ce)=>{Ee(Y,`${V??""} svelte-1yfuu8d`),p(ke,e(m).name),je.disabled=!e(m).isImplemented,pt(je,"title",e(m).isImplemented?`※shiftキー同時押しで一括投入
※ctrlキー同時押しで枚数制限無視`:""),de.disabled=ce,pt(de,"title",e(m).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>{var V,ce;return`deck_editor_card duel_card ${e(m).kind} ${(ce=(V=e(m))==null?void 0:V.monsterCategories)==null?void 0:ce.join(" ")} ${e(m).isImplemented?"is_implemented":"is_not_implemented"}`},()=>f()!=="Deck"&&c()[e(j)].every(V=>V.name!==e(m).name)],ne),fe("click",Y,()=>v()(e(m))),fe("click",je,V=>G(V,e(m))),fe("click",de,V=>N(V,e(m))),r(_,y)};h(T,_=>{A<e(w)&&(A<20||e(o)===e(j))&&_(S)})}r(x,ve)}),u(x=>{p(ae,`${za[e(j)]??""}（${x??""} `),Ee(O,_r(e(j)),"svelte-1yfuu8d")},[()=>e(le).length.toLocaleString()],ne),fe("click",B,()=>{if(e(o)!==e(j)){D(o,e(j));return}D(o,zt.map((x,m)=>m+te).map(x=>x%zt.length).map(x=>zt[x]).filter(x=>x!==e(j)).find(x=>e(n)[x].find(De))??e(j))}),r(Be,Oe)};h(be,Be=>{e(le).length&&Be(ie)})}u(()=>Ee(ee,`deck_editor_card_kind deckCardKind ${(e(j)===e(o)?"selected":"")??""} ${(e(le).length?"":"empty")??""} svelte-1yfuu8d`)),r(k,ee)}),r(d,Se),xt()}var Ei=l('<div class="svelte-rccxcp"> </div>'),Ai=l('<div class="svelte-rccxcp"> </div>'),Li=l('<div class="link_arrow_emoji svelte-rccxcp"> </div>'),Ui=l('<div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><!></div>'),Yi=l('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),Ni=l('<div></div> <div class="svelte-rccxcp"> </div>',1),qi=l("<div> </div>"),Pi=l('<span class="svelte-rccxcp">/</span> <div class="monster_defense svelte-rccxcp"> </div>',1),Fi=l("<div> </div>"),Hi=l('<div class="duel_card_info_row svelte-rccxcp"><!> <!> <div style="flex-grow: 1;" class="svelte-rccxcp"></div> <div class="monster_attack svelte-rccxcp"> </div> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),Oi=l('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Ri=l('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Wi=l('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※エラッタ前カードです</div></div>'),Ki=l('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),Ii=l('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a> <a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="google" class="svelte-rccxcp">⇒google検索</a></div>'),zi=l('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <!></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!> <!></div></div>');function Vi(d,i){bt(i,!1);let t=We(i,"cardInfo",8,void 0),c=We(i,"onAttention",8);kt();var f=Ce(),v=L(f);{var g=o=>{var P=zi(),K=a(P),w=a(K),$=a(w),n=a($),R=s(w,2);{var Z=B=>{var U=Ui(),ae=a(U);{var me=F=>{var E=Ei(),q=a(E);u(W=>p(q,W),[()=>"★".repeat(t().level)],ne),r(F,E)},Te=F=>{var E=Ce(),q=L(E);{var W=b=>{var O=Ai(),x=a(O);u(m=>p(x,m),[()=>"★".repeat(t().rank)],ne),r(b,O)},re=b=>{var O=Ce(),x=L(O);{var m=A=>{var ve=Li(),T=a(ve);u(S=>p(T,S),[()=>t().linkArrowKeys.map(S=>Ia[S].emoji).join("")],ne),r(A,ve)};h(x,A=>{t().linkArrowKeys&&A(m)},!0)}r(b,O)};h(q,b=>{t().rank&&t().rank>0?b(W):b(re,!1)},!0)}r(F,E)};h(ae,F=>{t().level&&t().level>0?F(me):F(Te,!1)})}r(B,U)};h(R,B=>{t().kind==="Monster"&&B(Z)})}var G=s(K,2),N=a(G);{var H=B=>{var U=Yi(),ae=L(U),me=a(ae),Te=a(me),F=a(Te),E=s(ae,2),q=a(E),W=a(q),re=s(q,2),b=a(re);u(()=>{p(F,t().pendulumDescription),p(W,`◀ ${t().pendulumScaleL??""}`),p(b,`${t().pendulumScaleR??""} ▶`)}),r(B,U)};h(N,B=>{var U;(U=t().monsterCategories)!=null&&U.includes("Pendulum")&&B(H)})}var ge=s(N,2);{var De=B=>{var U=Hi(),ae=L(U),me=a(ae);{var Te=x=>{var m=Ni(),A=L(m),ve=s(A,2),T=a(ve);u(()=>{Ee(A,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),p(T,`${ba[t().attributes[0]]??""}属性`)}),r(x,m)};h(me,x=>{t().attributes&&x(Te)})}var F=s(me,2);{var E=x=>{var m=qi(),A=a(m);u(()=>{Ee(m,`monster_cat ${t().types[0]??""} svelte-rccxcp`),p(A,`${la[t().types[0]]??""}${ka[t().types[0]]??""}族`)}),r(x,m)};h(F,x=>{t().types&&x(E)})}var q=s(F,4),W=a(q),re=s(q,2);{var b=x=>{var m=Pi(),A=s(L(m),2),ve=a(A);u(()=>p(ve,t().defense??"?")),r(x,m)};h(re,x=>{var m;(m=t().monsterCategories)!=null&&m.includes("Link")||x(b)})}var O=s(ae,2);_e(O,5,()=>t().monsterCategories??[],pe,(x,m)=>{var A=Fi(),ve=a(A);u(()=>{Ee(A,`monster_cat ${e(m)??""} svelte-rccxcp`),p(ve,`${Zt[e(m)]??""}${ra[e(m)]??""}`)}),r(x,A)}),u(()=>p(W,t().attack??"?")),r(B,U)},Se=B=>{var U=Ce(),ae=L(U);{var me=F=>{var E=Oi(),q=s(a(E),2),W=a(q);u(()=>p(W,`${oa[t().spellCategory]??""}魔法`)),r(F,E)},Te=F=>{var E=Ce(),q=L(E);{var W=re=>{var b=Ri(),O=s(a(b),2),x=a(O);u(()=>p(x,`${va[t().trapCategory]??""}罠`)),r(re,b)};h(q,re=>{t().kind==="Trap"&&t().trapCategory&&re(W)},!0)}r(F,E)};h(ae,F=>{t().kind==="Spell"&&t().spellCategory?F(me):F(Te,!1)},!0)}r(B,U)};h(ge,B=>{t().kind==="Monster"?B(De):B(Se,!1)})}var k=s(ge,2),j=a(k),te=a(j),ee=a(te),le=s(k,2);{var be=B=>{var U=Wi();r(B,U)};h(le,B=>{t().isOldVersion&&B(be)})}var ie=s(le,2);{var Be=B=>{var U=Ki();r(B,U)},Oe=B=>{var U=Ii(),ae=a(U),me=a(ae),Te=s(ae,2),F=s(Te,2);u(E=>{pt(ae,"href",E),p(me,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`),pt(Te,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),pt(F,"href",`https://www.google.com/search?q=遊戯王 ${t().name}`)},[()=>fr(t())],ne),r(B,U)};h(ie,B=>{t().isForTest?B(Be):B(Oe,!1)})}u(B=>{Ee(P,`duel_card duel_card_info ${t().kind??""} ${B??""} svelte-rccxcp`),p(n,t().name),p(ee,t().description)},[()=>{var B;return(B=t().monsterCategories)==null?void 0:B.join(" ")}],ne),fe("click",P,()=>c()(t())),r(o,P)};h(v,o=>{t()&&o(g)})}r(d,f),xt()}const Gi={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class Qi{constructor(){dt(this,"DefaultSeparator1","/");dt(this,"DefaultSeparator2"," ");dt(this,"DefaultSeparator3",":");dt(this,"createDate",i=>{if(!i)return;const t=new Date(i);if(!isNaN(t.getTime()))return t});dt(this,"createDateOr",(i,t)=>this.createDate(i)||t||new Date);dt(this,"truncateDate",i=>{const t=i||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});dt(this,"addDate",(i,t)=>{const c=this.createDateOr(i);return c.setDate(c.getDate()+t),c});dt(this,"addMonth",(i,t)=>{const c=this.createDateOr(i);return c.setMonth(c.getMonth()+t),c});dt(this,"addYear",(i,t)=>{const c=this.createDateOr(i);return c.setFullYear(c.getFullYear()+t),c});dt(this,"getDayOfWeek",(i,t="dddd")=>{const c=this.createDate(i);return c?Gi[c.getDay()][t]:""});dt(this,"formatToYYYYMMDD",(i,t=this.DefaultSeparator1)=>{const c=this.createDate(i);if(!c)return"";const f=c.getFullYear().toString(),v=("0"+(c.getMonth()+1)).slice(-2),g=("0"+c.getDate()).slice(-2);return f+t+v+t+g});dt(this,"formatToYYYYMM",(i,t=this.DefaultSeparator1)=>{const c=this.createDate(i);if(!c)return"";t||(t="");const f=c.getFullYear().toString(),v=("0"+(c.getMonth()+1)).slice(-2);return f+t+v});dt(this,"formatToHHMMSS",(i,t=this.DefaultSeparator3)=>{const c=this.createDate(i);if(!c)return"";t||(t="");const f=c.getHours(),v=c.getMinutes(),g=c.getSeconds();return("0"+f).slice(-2)+t+("0"+v).slice(-2)+t+("0"+g).slice(-2)});dt(this,"formatToHHMM",(i,t=this.DefaultSeparator3)=>{const c=this.createDate(i);if(!c)return"";t||(t="");const f=("0"+c.getHours()).slice(-2),v=("0"+c.getMinutes()).slice(-2);return f+t+v});dt(this,"formatToYYYYMMDD_HHMM",(i,t=this.DefaultSeparator1,c=this.DefaultSeparator2,f=this.DefaultSeparator3)=>{const v=this.createDate(i);return v?this.formatToYYYYMMDD(v,t)+c+this.formatToHHMM(v,f):""});dt(this,"formatToYYYYMMDD_HHMMSS",(i,t=this.DefaultSeparator1,c=this.DefaultSeparator2,f=this.DefaultSeparator3)=>{const v=this.createDate(i);return v?this.formatToYYYYMMDD(v,t)+c+this.formatToHHMMSS(v,f):""})}}const wt=new Qi;Date.prototype.truncateDate=function(){return wt.truncateDate(this)};Date.prototype.getCloneOr=function(d){return wt.createDateOr(this,d)};Date.prototype.addDate=function(d){return wt.addDate(this,d)};Date.prototype.addMonth=function(d){return wt.addDate(this,d)};Date.prototype.addYear=function(d){return wt.addDate(this,d)};Date.prototype.getDayOfWeek=function(d="dddd"){return wt.getDayOfWeek(this,d)};Date.prototype.formatToYYYYMM=function(d){return wt.formatToYYYYMM(this,d)};Date.prototype.formatToYYYYMMDD=function(d){return wt.formatToYYYYMMDD(this,d)};Date.prototype.formatToYYYYMMDD_HHMM=function(d,i,t){return wt.formatToYYYYMMDD_HHMM(this,d,i,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(d,i,t){return wt.formatToYYYYMMDD_HHMMSS(this,d,i,t)};Date.prototype.formatToHHMM=function(d){return wt.formatToHHMM(this,d)};Date.prototype.formatToHHMMSS=function(d){return wt.formatToHHMMSS(this,d)};var Xi=l('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),Ji=l('<ul class="deck_info_list svelte-2wdgc8"></ul>'),Zi=l('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),en=l('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),tn=l('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),an=l('<button class="svelte-2wdgc8">Cancel</button>'),rn=l('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function sn(d,i){bt(i,!1);let t=We(i,"eventHolder",8),c=We(i,"args",8),f=We(i,"resolve",8),v=ye(Promise.resolve([])),g=ye();const o=()=>{D(g,new DataTransfer().files),D(v,Promise.resolve([]))},P=async R=>{R.preventDefault(),console.log("hoge",R)},K=async R=>{R.preventDefault(),R.dataTransfer&&$(R.dataTransfer.files)},w=()=>{$(e(g))},$=async R=>{if(!R.length)return;const Z=[],G=[];for(const N of R)try{G.push(...await Dt.createfromJson(N))}catch(H){H instanceof Error&&Z.push(H.message)}if(Z.length){console.log(...Z);return}D(v,e(v).then(()=>G))},n=o;kt(),pr(d,{get eventHolder(){return t()},get args(){return c()},$$slots:{body:(R,Z)=>{var G=en(),N=a(G);ht(N,()=>Jt,null,(H,ge)=>{var De=Ce(),Se=L(De);ht(Se,()=>e(v),null,(k,j)=>{var te=Ce(),ee=L(te);{var le=ie=>{var Be=Ji();_e(Be,5,()=>e(j),pe,(Oe,B)=>{var U=Xi(),ae=a(U),me=a(ae),Te=s(ae,2),F=a(Te),E=s(Te,2),q=a(E);u((W,re,b)=>{p(me,e(B).name),p(F,`${W??""}
                  /
                  ${re??""}`),p(q,`最終使用日時 ： ${b??""}`)},[()=>e(B).cardNames.filter(W=>{var re,b;return!((b=(re=e(ge).getCardInfo(W))==null?void 0:re.monsterCategories)!=null&&b.union(Vt).length)}).length,()=>e(B).cardNames.filter(W=>{var re,b;return(b=(re=e(ge).getCardInfo(W))==null?void 0:re.monsterCategories)==null?void 0:b.union(Vt).length}).length,()=>e(B).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],ne),r(Oe,U)}),r(ie,Be)},be=ie=>{var Be=Zi(),Oe=s(a(Be),2),B=a(Oe);gr(B,()=>e(g),U=>D(g,U)),fe("change",B,w),fe("cancel",B,n),fe("drop",Be,K),fe("dragover",Be,P),r(ie,Be)};h(ee,ie=>{e(j).length?ie(le):ie(be,!1)})}r(k,te)}),r(H,De)}),r(R,G)},footer:(R,Z)=>{var G=rn(),N=a(G);ht(N,()=>e(v),null,(H,ge)=>{var De=Ce(),Se=L(De);{var k=te=>{var ee=tn(),le=L(ee),be=s(le,2),ie=s(be,2);u(()=>{le.disabled=e(ge).length===0,be.disabled=e(ge).length===0}),fe("click",le,()=>f()({deckInfos:e(ge),replaceAll:!1})),fe("click",be,()=>f()({deckInfos:e(ge),replaceAll:!0})),fe("click",ie,n),r(te,ee)},j=te=>{var ee=Ce(),le=L(ee);{var be=ie=>{var Be=an();fe("click",Be,()=>f()(void 0)),r(ie,Be)};h(le,ie=>{c().cancelable&&ie(be)},!0)}r(te,ee)};h(Se,te=>{e(ge).length?te(k):te(j,!1)})}r(H,De)}),r(R,G)}}}),xt()}const na=class na extends mr{constructor(i,t){super(i,...Object.values(t))}};dt(na,"createModalController",i=>{const t={deckUploader:new hr({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new na(i,t),t)});let ha=na;function nn(d,i){bt(i,!1);let t=We(i,"modalController",8);kt(),yr(d,{get modalController(){return t()},children:(c,f)=>{var v=Ce(),g=L(v);{var o=P=>{sn(P,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};h(g,P=>{t().deckUploader.state==="Shown"&&P(o)})}r(c,v)},$$slots:{default:!0}}),xt()}var ln=l("<button> </button>"),on=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),vn=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),dn=l('<div class="deck_editor_search_box_row monster_ex_categories svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">エクストラ</button></div> <div class="svelte-n46fl7"></div></div>'),cn=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),_n=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> <div style="display: inline-block;"></div> </label>'),un=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),fn=l('<div class="deck_editor_search_box_row monster_categories svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">モンスター</button></div> <div class="svelte-n46fl7"></div></div> <div class="deck_editor_search_box_row monster_attributes svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">属性</button></div> <div class="svelte-n46fl7"></div></div> <div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">種族</button></div> <div class="svelte-n46fl7"></div></div> <div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">星攻守</button></div> <div class="svelte-n46fl7"><div class="star_range svelte-n46fl7"><span class="svelte-n46fl7">星</span> <input type="number" min="0" max="13" class="svelte-n46fl7"> <span class="svelte-n46fl7">～</span> <input type="number" min="0" max="13" class="svelte-n46fl7"></div> <div class="atk_range svelte-n46fl7"><span class="svelte-n46fl7">攻</span> <input type="number" min="0" max="5000" step="100" class="svelte-n46fl7"> <span class="svelte-n46fl7">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-n46fl7"></div> <div class="def_range svelte-n46fl7"><span class="svelte-n46fl7">守</span> <input type="number" min="0" max="5000" step="100" class="svelte-n46fl7"> <span class="svelte-n46fl7">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-n46fl7"></div> <div class="atk_plus_def svelte-n46fl7"><span class="svelte-n46fl7">攻+守</span> <input type="number" min="0" max="10000" step="100" class="svelte-n46fl7"></div></div></div>',1),pn=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),gn=l('<div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">魔法</button></div> <div class="svelte-n46fl7"></div></div>'),yn=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),mn=l('<div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">罠</button></div> <div class="svelte-n46fl7"></div></div>'),hn=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),bn=l("<div>カード情報読込中</div>"),kn=l("<option> </option>"),xn=l('<div class="svelte-n46fl7"><a class="white_button svelte-n46fl7" download="SVS_DeckInfos.json">ダウンロード</a></div>'),wn=l('<div class="svelte-n46fl7"></div>'),Cn=l('<div class="svelte-n46fl7"><a class="white_button svelte-n46fl7" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),Dn=l('<div class="svelte-n46fl7"></div>'),$n=l('<div class="deck_editor_body_right_header svelte-n46fl7"><div class="deck_editor_body_right_header_row svelte-n46fl7"><div class="svelte-n46fl7">編集対象</div> <div class="svelte-n46fl7"><select style="width:100%" class="svelte-n46fl7"></select></div></div> <div class="deck_editor_body_right_header_row svelte-n46fl7"><div class="svelte-n46fl7">新規名称</div> <div class="svelte-n46fl7"><input type="text" style="width:100%" class="svelte-n46fl7"></div></div> <div class="deck_editor_body_right_header_row svelte-n46fl7"></div> <div class="deck_editor_body_right_header_row svelte-n46fl7"><div class="svelte-n46fl7">基本操作</div> <div class="svelte-n46fl7"><button class="white_button svelte-n46fl7">デッキを保存</button></div> <div class="svelte-n46fl7"><button class="white_button svelte-n46fl7">デッキを複製</button></div> <div class="svelte-n46fl7"><button class="white_button svelte-n46fl7" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-n46fl7"><div class="svelte-n46fl7">DL/UL</div> <!> <!> <div class="svelte-n46fl7"><button class="white_button svelte-n46fl7">アップロード</button></div></div></div> <!>',1),Sn=l('<div class="svelte-n46fl7">デッキ情報読込中</div>'),Mn=l('<div class="svelte-n46fl7"></div>'),Tn=l('<div><div class="deck_editor_header svelte-n46fl7"></div> <div class="deck_editor_body svelte-n46fl7"><div class="deck_editor_body_left svelte-n46fl7"><div role="contentinfo" class="deck_editor_search_box svelte-n46fl7"><div class="deck_editor_search_box_header svelte-n46fl7"><div class="svelte-n46fl7"><button class="deck_editor_search_box_title svelte-n46fl7">検索条件</button></div> <div class="deck_editor_sort_setting_container svelte-n46fl7"></div></div> <div class="deck_editor_search_box_body svelte-n46fl7"><div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">名称</button></div> <div class="svelte-n46fl7"><input type="text" style="width:100%" placeholder="※ルビには対応していません" class="svelte-n46fl7"></div></div> <div class="deck_editor_search_box_row card_kind svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">種類</button></div> <div class="svelte-n46fl7"></div></div> <!> <!> <!> <!> <div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">その他</button></div> <div class="svelte-n46fl7"></div></div></div></div> <!></div> <div class="deck_editor_body_center svelte-n46fl7"><!></div>  <div class="deck_editor_body_right svelte-n46fl7"><!></div></div> <div class="footer svelte-n46fl7"></div></div> <!>',1);function jn(d,i){bt(i,!1);const t=[],c=[],f=[],v=[],g=[],o=[],P=[],K=[],w=ha.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),$={name:"",deckCardKinds:[...zt],exMonsterCategories:[...Vt],monsterCategories:Ua.filter(M=>!Vt.includes(M)),monsterAttributes:[...La],monsterTypes:[...Aa],spellCategories:Ea.filter(M=>M!=="PendulumScale"),trapCategories:[...Ba],starLowerBound:0,starUpperBound:13,atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:["test","oldVersion","implemented"],sort:[...Ya]},n=ye(structuredClone($));we(n,e(n).others=["oldVersion"]),we(n,e(n).monsterCategories=e(n).monsterCategories.filter(M=>M!=="Normal"));let R=ye("DeckEdit"),Z=ye("SearchCondition");const G=()=>{if(!e(n).deckCardKinds.length){Ft(e(n)).forEach(M=>{Array.isArray(e(n)[M])&&Array.isArray($[M])?we(n,e(n)[M]=[...$[M]]):we(n,e(n)[M]=$[M])});return}we(n,e(n).name=""),we(n,e(n).deckCardKinds=[]),we(n,e(n).exMonsterCategories=[]),we(n,e(n).monsterCategories=[]),we(n,e(n).monsterAttributes=[]),we(n,e(n).monsterTypes=[]),we(n,e(n).spellCategories=[]),we(n,e(n).trapCategories=[]),we(n,e(n).others=[]),we(n,e(n).atkLowerBound=0),we(n,e(n).atkUpperBound=5e3),we(n,e(n).defLowerBound=0),we(n,e(n).defUpperBound=5e3),we(n,e(n).atkPlusDef=void 0),we(n,e(n).sort=[...Ya])},N=M=>{M.forEach(C=>{Array.isArray(e(n)[C])&&Array.isArray($[C])?we(n,e(n)[C]=e(n)[C].length?[]:[...$[C]]):we(n,e(n)[C]=$[C])})},H=(M,C,X)=>{Array.isArray(e(n)[C])&&Array.isArray($[C])&&we(n,e(n)[C]=[X])},ge=async()=>{const C=(await e(k)).find(oe=>oe.id===e(Se));if(!C)return;const X=await Jt;D(ee,{...C,cardTree:kr(C.cardNames.map(oe=>{const Me=X.getCardInfo(oe);return Me===void 0&&console.error(oe),Me}).filter(oe=>oe!==void 0))})},De=()=>Dt.getAllDeckInfo().then(M=>(D(Se,(M.find(C=>C.lastUsedAt.getTime()===Math.max(...M.map(X=>X.lastUsedAt.getTime())))??M[0]).id),M));let Se=ye(-1),k=ye(De()),j=ye(e(k).then(M=>Dt.convertToObjectURL(M)));e(k).then(ge);const te=()=>{D(k,De()),D(j,e(k).then(M=>Dt.convertToObjectURL(M))),ge()};let ee=ye({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardTree:{ExtraMonster:[],Monster:[],Spell:[],Trap:[]}}),le=ye(void 0),be=0;const ie=M=>{D(Z,"CardDetail"),M.cardId!==void 0&&!M.description&&!M.pendulumDescription&&(be=M.cardId,pa([M.cardId]).then(()=>{M.cardId===be&&D(le,M)})),D(le,M)},Be=async()=>{const C=(await e(k)).find(X=>X.id===e(Se));if(!C)throw new Error("illegal state");return C},Oe=async()=>{const M=await Be();await M.saveDeckInfo({...M,name:e(ee).name,cardNames:Object.values(e(ee).cardTree).flatMap(C=>C).map(C=>C.name),lastUsedAt:new Date}),te()},B=async()=>{(await Dt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,Object.values(e(ee).cardTree).flatMap(C=>C).map(C=>C.name))).saveDeckInfo(),te()},U=async M=>{const C=await Be();!M.shiftKey&&!confirm(`デッキ【${C.name}】を削除します。
よろしいですか？`)||(await C.delete(),te())},ae=async()=>{const M=await w.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!M)return;const C=[];if(M.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;C.push(...(await e(k)).map(X=>X.id))}await Promise.all(M.deckInfos.map(X=>Dt.createNewDeck(X.name,X.description,X.cardNames,X.lastUsedAt))),C.length&&await Promise.all(C.map(Dt.remove)),te()},me=()=>innerWidth<=1400?"compact":"wide";kt();var Te=Tn(),F=L(Te),E=s(a(F),2),q=a(E),W=a(q),re=a(W),b=a(re),O=a(b),x=s(b,2);_e(x,5,()=>e(n).sort,pe,(M,C,X)=>{var oe=ln(),Me=a(oe);u(()=>{Ee(oe,`deck_editor_sort_setting_item ${e(C).order??""} priority_${e(C).priority??""} svelte-n46fl7`),p(Me,`${br[e(C).key]??""}
                ${(e(C).order==="asc"?"▲":"▼")??""}`)}),fe("click",oe,()=>{e(n).sort.forEach(Ge=>Ge.priority++),e(C).order=e(C).order==="asc"?"desc":"asc",Yt(()=>e(n).sort),e(C).priority=1,Yt(()=>e(n).sort)}),r(M,oe)});var m=s(re,2),A=a(m),ve=a(A),T=a(ve),S=s(ve,2),_=a(S),y=s(A,2),Y=a(y),I=a(Y),$e=s(Y,2);_e($e,5,()=>zt,pe,(M,C)=>{var X=on(),oe=a(X),Me,Ge=s(oe);u(()=>{Me!==(Me=e(C))&&(oe.value=(oe.__value=e(C))==null?"":e(C)),p(Ge,` ${za[e(C)]??""}`)}),Ut(t,[],oe,()=>(e(C),e(n).deckCardKinds),Ue=>we(n,e(n).deckCardKinds=Ue)),r(M,X)});var ke=s(y,2);{var ue=M=>{var C=dn(),X=a(C),oe=a(X),Me=s(X,2);_e(Me,5,()=>Vt,pe,(Ge,Ue)=>{var Ke=vn(),Ye=a(Ke),Ie,Xe=s(Ye);u(()=>{Ie!==(Ie=e(Ue))&&(Ye.value=(Ye.__value=e(Ue))==null?"":e(Ue)),p(Xe,` ${Zt[e(Ue)]??""}${ra[e(Ue)]??""}`)}),Ut(c,[],Ye,()=>(e(Ue),e(n).exMonsterCategories),lt=>we(n,e(n).exMonsterCategories=lt)),r(Ge,Ke)}),fe("click",oe,()=>N(["exMonsterCategories"])),se(3,C,()=>he,()=>({delay:0,duration:100})),r(M,C)};h(ke,M=>{e(n).deckCardKinds.includes("ExtraMonster")&&M(ue)})}var J=s(ke,2);{var Q=M=>{var C=fn(),X=L(C),oe=a(X),Me=a(oe),Ge=s(oe,2);_e(Ge,5,()=>Ua.filter(Ae=>!Vt.includes(Ae)),pe,(Ae,Fe)=>{var yt=cn(),ct=a(yt),Ct,vt=s(ct);u(()=>{Ct!==(Ct=e(Fe))&&(ct.value=(ct.__value=e(Fe))==null?"":e(Fe)),p(vt,` ${Zt[e(Fe)]??""}${ra[e(Fe)]??""}`)}),Ut(f,[],ct,()=>(e(Fe),e(n).monsterCategories),Qe=>we(n,e(n).monsterCategories=Qe)),r(Ae,yt)});var Ue=s(X,2),Ke=a(Ue),Ye=a(Ke),Ie=s(Ke,2);_e(Ie,5,()=>La,pe,(Ae,Fe)=>{var yt=_n(),ct=a(yt),Ct,vt=s(ct,2),Qe=s(vt);u(()=>{Ct!==(Ct=e(Fe))&&(ct.value=(ct.__value=e(Fe))==null?"":e(Fe)),Ee(vt,`monster_attr ${e(Fe)??""} svelte-n46fl7`),p(Qe,` ${ba[e(Fe)]??""}`)}),Ut(v,[],ct,()=>(e(Fe),e(n).monsterAttributes),ft=>we(n,e(n).monsterAttributes=ft)),r(Ae,yt)});var Xe=s(Ue,2),lt=a(Xe),$t=a(lt),jt=s(lt,2);_e(jt,5,()=>Aa,pe,(Ae,Fe)=>{var yt=un(),ct=a(yt),Ct,vt=s(ct);u(()=>{Ct!==(Ct=e(Fe))&&(ct.value=(ct.__value=e(Fe))==null?"":e(Fe)),p(vt,` ${la[e(Fe)]??""}
                    ${ka[e(Fe)]??""}`)}),Ut(g,[],ct,()=>(e(Fe),e(n).monsterTypes),Qe=>we(n,e(n).monsterTypes=Qe)),fe("dblclick",yt,Qe=>H(Qe,"monsterTypes",e(Fe))),r(Ae,yt)});var St=s(Xe,2),Ot=a(St),st=a(Ot),et=s(Ot,2),ot=a(et),it=s(a(ot),2),ut=s(it,4),gt=s(ot,2),_t=s(a(gt),2),Mt=s(_t,4),Bt=s(gt,2),Et=s(a(Bt),2),Je=s(Et,4),tt=s(Bt,2),at=s(a(tt),2);fe("click",Me,()=>N(["monsterCategories"])),se(3,X,()=>he,()=>({delay:0,duration:100})),fe("click",Ye,()=>N(["monsterAttributes"])),se(3,Ue,()=>he,()=>({delay:0,duration:100})),fe("click",$t,()=>N(["monsterTypes"])),se(3,Xe,()=>he,()=>({delay:0,duration:100})),fe("click",st,()=>N(["starLowerBound","starUpperBound","atkLowerBound","atkUpperBound","defLowerBound","defUpperBound","atkPlusDef"])),Tt(it,()=>e(n).starLowerBound,Ae=>we(n,e(n).starLowerBound=Ae)),Tt(ut,()=>e(n).starUpperBound,Ae=>we(n,e(n).starUpperBound=Ae)),Tt(_t,()=>e(n).atkLowerBound,Ae=>we(n,e(n).atkLowerBound=Ae)),Tt(Mt,()=>e(n).atkUpperBound,Ae=>we(n,e(n).atkUpperBound=Ae)),Tt(Et,()=>e(n).defLowerBound,Ae=>we(n,e(n).defLowerBound=Ae)),Tt(Je,()=>e(n).defUpperBound,Ae=>we(n,e(n).defUpperBound=Ae)),Tt(at,()=>e(n).atkPlusDef,Ae=>we(n,e(n).atkPlusDef=Ae)),se(3,St,()=>he,()=>({delay:0,duration:100})),r(M,C)};h(J,M=>{(e(n).deckCardKinds.includes("Monster")||e(n).deckCardKinds.includes("ExtraMonster"))&&M(Q)})}var z=s(J,2);{var xe=M=>{var C=gn(),X=a(C),oe=a(X),Me=s(X,2);_e(Me,5,()=>Ea.filter(Ge=>Ge!=="PendulumScale"),pe,(Ge,Ue)=>{var Ke=pn(),Ye=a(Ke),Ie,Xe=s(Ye);u(()=>{Ie!==(Ie=e(Ue))&&(Ye.value=(Ye.__value=e(Ue))==null?"":e(Ue)),p(Xe,` ${oa[e(Ue)]??""}`)}),Ut(o,[],Ye,()=>(e(Ue),e(n).spellCategories),lt=>we(n,e(n).spellCategories=lt)),r(Ge,Ke)}),fe("click",oe,()=>N(["spellCategories"])),se(3,C,()=>he,()=>({delay:0,duration:100})),r(M,C)};h(z,M=>{e(n).deckCardKinds.includes("Spell")&&M(xe)})}var He=s(z,2);{var qe=M=>{var C=mn(),X=a(C),oe=a(X),Me=s(X,2);_e(Me,5,()=>Ba,pe,(Ge,Ue)=>{var Ke=yn(),Ye=a(Ke),Ie,Xe=s(Ye);u(()=>{Ie!==(Ie=e(Ue))&&(Ye.value=(Ye.__value=e(Ue))==null?"":e(Ue)),p(Xe,` ${va[e(Ue)]??""}`)}),Ut(P,[],Ye,()=>(e(Ue),e(n).trapCategories),lt=>we(n,e(n).trapCategories=lt)),r(Ge,Ke)}),fe("click",oe,()=>N(["trapCategories"])),se(3,C,()=>he,()=>({delay:0,duration:100})),r(M,C)};h(He,M=>{e(n).deckCardKinds.includes("Trap")&&M(qe)})}var Pe=s(He,2),Le=a(Pe),ze=a(Le),nt=s(Le,2);_e(nt,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],pe,(M,C)=>{var X=hn(),oe=a(X),Me,Ge=s(oe);u(()=>{Me!==(Me=C.key)&&(oe.value=(oe.__value=C.key)==null?"":C.key),p(Ge,` ${C.text??""}`)}),Ut(K,[],oe,()=>(C.key,e(n).others),Ue=>we(n,e(n).others=Ue)),r(M,X)});var je=s(W,2);Vi(je,{get cardInfo(){return e(le)},onAttention:ie});var de=s(q,2),V=a(de);ht(V,()=>Jt,M=>{var C=bn();r(M,C)},(M,C)=>{Ra(M,{mode:"List",get allCardTree(){return e(C).tree},onAttention:ie,get searchCondition(){return e(n)},get deckCardTree(){return e(ee).cardTree},set deckCardTree(X){we(ee,e(ee).cardTree=X)},$$legacy:!0})});var ce=s(de,2),Ne=a(ce);{var Ze=M=>{var C=Ce(),X=L(C);ht(X,()=>e(k),oe=>{var Me=Sn();r(oe,Me)},(oe,Me)=>{var Ge=$n(),Ue=L(Ge),Ke=a(Ue),Ye=s(a(Ke),2),Ie=a(Ye);u(()=>{e(Se),Yt(()=>{e(Me)})}),_e(Ie,5,()=>e(Me),pe,(Je,tt)=>{var at=kn(),Ae={},Fe=a(at);u(()=>{Ae!==(Ae=e(tt).id)&&(at.value=(at.__value=e(tt).id)==null?"":e(tt).id),p(Fe,e(tt).name)}),r(Je,at)});var Xe=s(Ke,2),lt=s(a(Xe),2),$t=a(lt),jt=s(Xe,4),St=s(a(jt),2),Ot=a(St),st=s(St,2),et=a(st),ot=s(st,2),it=a(ot),ut=s(jt,2),gt=s(a(ut),2);ht(gt,Be,Je=>{var tt=wn();r(Je,tt)},(Je,tt)=>{var at=xn(),Ae=a(at);u(Fe=>pt(Ae,"href",Fe),[()=>Dt.convertToObjectURL([e(tt)])],ne),r(Je,at)});var _t=s(gt,2);ht(_t,()=>e(j),Je=>{var tt=Dn();r(Je,tt)},(Je,tt)=>{var at=Cn(),Ae=a(at);u(()=>pt(Ae,"href",e(tt))),r(Je,at)});var Mt=s(_t,2),Bt=a(Mt),Et=s(Ue,2);Ra(Et,{mode:"Deck",allCardTree:{ExtraMonster:[],Monster:[],Spell:[],Trap:[]},onAttention:ie,get deckCardTree(){return e(ee).cardTree},set deckCardTree(Je){we(ee,e(ee).cardTree=Je)},$$legacy:!0}),Kt(Ie,()=>e(Se),Je=>D(Se,Je)),fe("change",Ie,ge),Tt($t,()=>e(ee).name,Je=>we(ee,e(ee).name=Je)),fe("click",Ot,Oe),fe("click",et,B),fe("click",it,U),fe("click",Bt,ae),r(oe,Ge)}),r(M,C)},Re=M=>{var C=Mn();r(M,C)};h(Ne,M=>{e(R)==="DeckEdit"||me()==="wide"?M(Ze):M(Re,!1)})}var Ve=s(F,2);nn(Ve,{modalController:w}),u((M,C,X)=>Ee(F,`deck_editor screen_size_${M??""} left_pain_mode_${C??""} main_view_mode_${X??""} svelte-n46fl7`),[me,()=>e(Z).toLowerCase(),()=>e(R).toLowerCase()],ne),fe("click",O,G),fe("click",T,()=>N(["name"])),Tt(_,()=>e(n).name,M=>we(n,e(n).name=M)),fe("click",I,()=>N(["deckCardKinds"])),fe("click",ze,()=>N(["others"])),se(3,Pe,()=>he,()=>({delay:0,duration:100})),fe("focusin",W,()=>{D(Z,"SearchCondition"),D(R,"SearchCondition")}),fe("click",W,()=>{D(Z,"SearchCondition"),D(R,"SearchCondition")}),fe("click",ce,()=>{D(R,"DeckEdit")}),fe("focusin",ce,()=>{D(R,"DeckEdit")}),r(d,Te),xt()}const Bn=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],En=3;var An=l('<input class="game_mode_radio svelte-sy4ydn" type="radio" name="game_mode"> <label> </label>',1),Ln=l('<option class="svelte-sy4ydn"> </option>'),Un=l('<option class="svelte-sy4ydn"> </option>'),Yn=l('<option class="svelte-sy4ydn"> </option>'),Nn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_deck_selector" class="deck_selector svelte-sy4ydn"><option class="svelte-sy4ydn">デフォルト</option><!></select></div></td></tr>'),qn=l('<option class="svelte-sy4ydn"> </option>'),Pn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">対戦相手：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select> <div class="svelte-sy4ydn"> </div></div></td></tr> <!> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">先攻後攻：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select></div></td></tr>',1),Fn=l('<option class="svelte-sy4ydn"> </option>'),Hn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-sy4ydn">難易度：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="difficulty_selector" class="difficulty_selector svelte-sy4ydn"></select></div></td></tr>'),On=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label class="config_row_label svelte-sy4ydn" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"></div></td></tr> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="deck_selector" class="deck_selector svelte-sy4ydn"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">duel start!</button></div></td></tr>',1),Rn=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),Wn=l('<tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">deck edit</button></div></td></tr>'),Kn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="duelist_name" class="config_row_label duelist_name svelte-sy4ydn">名前：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><input id="duelist_name" class="duelist_name svelte-sy4ydn" type="text"></div></td></tr> <!> <!>',1),In=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),zn=l('<div class="app_body svelte-sy4ydn"><table class="config_table svelte-sy4ydn"><tbody><!></tbody></table></div>'),Vn=l('<span class="svelte-sy4ydn"> </span> <span class="svelte-sy4ydn"> </span>',1),Gn=l('<div class="result_title result_win svelte-sy4ydn">YOU WIN</div>'),Qn=l('<div class="result_title result_lose svelte-sy4ydn">YOU LOSE</div>'),Xn=l('<div class="result_title result_draw svelte-sy4ydn">DRAW</div>'),Jn=l('<div class="twitter_share_button_wrapper svelte-sy4ydn"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-sy4ydn">X(twitter)でシェアする</a></div>'),Zn=l('<div class="result svelte-sy4ydn"><!> <div class="reason_of_end svelte-sy4ydn"> </div> <!> <div class="svelte-sy4ydn"><button class="white_button svelte-sy4ydn">TOPへ戻る</button></div></div>'),el=l('<main style="flex-direction: column; display :flex" class="svelte-sy4ydn"><div class="link link_left svelte-sy4ydn"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-sy4ydn">posfie(toggeter)</a></div> <div class="link link_right svelte-sy4ydn"><a class="a_button svelte-sy4ydn" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">現時点とこの先のこと</a></div> <!> <div class="footer card_summary svelte-sy4ydn"><!></div> <div class="footer debug_info svelte-sy4ydn"><span class="svelte-sy4ydn"> </span> <span class="user_agent_info svelte-sy4ydn"> </span> <span class="screen_info svelte-sy4ydn"> </span></div> <!></main>');function tl(d,i){bt(i,!1);const t=new xr("stk_ygo_svelte",En,Bn);let c=ye(0),f=ye(0),v=ye(),g=ye("FtkChallenge"),o=ye("None"),P=ye(0),K=ye(""),w=ye(void 0);const $="https://setta238.github.io/stk_ygo_svelte/",n="遊戯王deそりてあ",R="ninja_no",Z=wr.getOrCreateNew(t).then(T=>(D(g,Na.includes(T.previousGameMode)?T.previousGameMode:"FtkChallenge"),Be(T.previousNpcId),T)),G=T=>{var _;const S=T.find(y=>y.lastUsedAt.getTime()===Math.max(...T.map(Y=>Y.lastUsedAt.getTime())))??T[0];D(P,S.id),e(g)==="FtkChallenge"&&S.deckType!=="Preset"&&D(P,((_=qt.find(y=>y.deckType==="Preset"))==null?void 0:_.id)??e(P))};let N=ye(Dt.getAllDeckInfo(t).then(T=>(Promise.all(T.filter(S=>!S.lastUsedAt).map(S=>{S.saveDeckInfo()})),G(T),T)));const H=async()=>{const T=e(P);let S=(await e(N)).find(y=>y.id===T)??(await De()).find(y=>y.id===T);S&&await S.updateTimestamp();let _=S;if(_||(_=qt.find(y=>y.id===T)),!_)throw new Error("illegal state");return _},ge=async()=>{(await Z).save({previousGameMode:e(g)})},De=()=>(D(N,Dt.getAllDeckInfo(t).then(T=>(G(T),T))),e(N)),Se=async()=>{(await e(N)).length||(await Dt.prepareSampleDeck(),De())},k=async()=>{await Promise.all([ge(),Se()]);const T=await H(),S=await Z;let _=Wt.find(I=>I.id===Number.MIN_SAFE_INTEGER)??Wt[0],y=qt.find(I=>I.id===Number.MIN_SAFE_INTEGER)??qt[0],Y="PlayFirst";e(g)==="FtkChallenge"?_=Wt.filter(I=>I.npcType==="FtkChallenge").find(I=>I.difficulty===S.previousDifficulty)??_:e(g)==="Free"&&(_=Wt.find(I=>I.id===S.previousNpcId)??_,y=qt.slice(-1)[0],Y=S.previousStartMode),_.npcType!=="FtkChallenge"&&S.previousNpcDeckId>-1?y=(await e(N)).find(I=>I.id===S.previousNpcDeckId)??y:y=qt.find(I=>I.id===_.id)??y,D(v,new $r(S,"Player",T,[],_,"NPC",y,[],Y)),e(v).onDuelEnd.append(()=>(D(v,e(v)),"RemoveMe"))},j=async()=>{await Promise.all([ge(),Se()]),D(o,"DeckEdit")},te=async T=>{await ge(),T.key==="Enter"&&!T.repeat&&(await Z).save()},ee=()=>{D(N,De()),D(v,void 0),D(o,"None")};let le=Date.now();const be=T=>{Date.now()-le<200||(le=Date.now(),D(g,T),De())},ie=T=>{Be(Number(T.currentTarget.value))},Be=T=>{var S;D(w,Wt.find(_=>_.id===T)),D(K,((S=e(w))==null?void 0:S.description)??"")};Se(),kt();var Oe=el(),B=s(a(Oe),2),U=a(B),ae=s(B,2);{var me=T=>{var S=Ce(),_=L(S);ht(_,()=>Z,null,(y,Y)=>{wi(y,{get duel(){return e(v)},get userProfile(){return e(Y)}})}),r(T,S)},Te=T=>{var S=Ce(),_=L(S);{var y=I=>{jn(I,{})},Y=I=>{var $e=zn(),ke=a($e),ue=a(ke),J=a(ue);ht(J,()=>Z,Q=>{var z=In();r(Q,z)},(Q,z)=>{var xe=Kn(),He=L(xe),qe=a(He),Pe=a(qe),Le=s(qe),ze=a(Le),nt=a(ze),je=s(He,2);ht(je,()=>e(N),ce=>{var Ne=Rn();r(ce,Ne)},(ce,Ne)=>{var Ze=On(),Re=L(Ze),Ve=a(Re),M=a(Ve),C=s(Ve),X=a(C);_e(X,5,()=>Na,pe,(st,et)=>{var ot=An(),it=L(ot),ut=s(it,2),gt=a(ut);u(_t=>{pt(it,"id",`game_mode_radio_${_t??""}`),Cr(it,e(et)),Dr(it,e(g)===e(et)),Ee(ut,`game_mode_tab_label game_mode_tab_${_t??""} svelte-sy4ydn`),pt(ut,"for",`game_mode_radio_${_t??""}`),p(gt,e(et))},[()=>e(et).toLowerCase()],ne),fe("change",it,()=>be(e(et))),r(st,ot)});var oe=s(Re,2),Me=a(oe),Ge=a(Me),Ue=s(Me),Ke=a(Ue),Ye=a(Ke);u(()=>{e(P),Yt(()=>{e(g),e(Ne)})}),_e(Ye,5,()=>e(g)==="FtkChallenge"?qt.filter(st=>st.deckType==="Preset"):e(Ne),pe,(st,et)=>{var ot=Ln(),it={},ut=a(ot);u(()=>{it!==(it=e(et).id)&&(ot.value=(ot.__value=e(et).id)==null?"":e(et).id),p(ut,e(et).name)}),r(st,ot)});var Ie=s(oe,2);{var Xe=st=>{var et=Pn(),ot=L(et),it=a(ot),ut=a(it),gt=s(it),_t=a(gt),Mt=a(_t);u(()=>{e(z),Yt(()=>{})}),_e(Mt,5,()=>Wt,pe,(vt,Qe)=>{var ft=Un(),Nt={},Rt=a(ft);u(()=>{Nt!==(Nt=e(Qe).id)&&(ft.value=(ft.__value=e(Qe).id)==null?"":e(Qe).id),p(Rt,e(Qe).name)}),r(vt,ft)});var Bt=s(Mt,2),Et=a(Bt),Je=s(ot,2);{var tt=vt=>{var Qe=Nn(),ft=a(Qe),Nt=a(ft),Rt=s(ft),Ca=a(Rt),Da=a(Ca);u(()=>{e(z),Yt(()=>{e(Ne)})});var da=a(Da);da.value=(da.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Va=s(da);_e(Va,1,()=>e(Ne),pe,(ca,ta)=>{var aa=Yn(),$a={},Ga=a(aa);u(()=>{$a!==($a=e(ta).id)&&(aa.value=(aa.__value=e(ta).id)==null?"":e(ta).id),p(Ga,e(ta).name)}),r(ca,aa)}),se(3,Nt,()=>he,()=>({duration:200})),se(3,ft,()=>he,()=>({duration:200})),Kt(Da,()=>e(z).previousNpcDeckId,ca=>e(z).previousNpcDeckId=ca),se(3,Ca,()=>he,()=>({duration:200})),se(3,Rt,()=>he,()=>({duration:200})),se(3,Qe,()=>he,()=>({duration:200})),r(vt,Qe)};h(Je,vt=>{var Qe;((Qe=e(w))==null?void 0:Qe.npcType)!=="FtkChallenge"&&vt(tt)})}var at=s(Je,2),Ae=a(at),Fe=a(Ae),yt=s(Ae),ct=a(yt),Ct=a(ct);u(()=>{e(z),Yt(()=>{})}),_e(Ct,5,()=>Ft(qa),pe,(vt,Qe)=>{var ft=qn(),Nt={},Rt=a(ft);u(()=>{Nt!==(Nt=e(Qe))&&(ft.value=(ft.__value=e(Qe))==null?"":e(Qe)),p(Rt,qa[e(Qe)])}),r(vt,ft)}),u(()=>p(Et,`※${e(K)??""}`)),se(3,ut,()=>he,()=>({duration:200})),se(3,it,()=>he,()=>({duration:200})),fe("change",Mt,ie),Kt(Mt,()=>e(z).previousNpcId,vt=>e(z).previousNpcId=vt),se(3,_t,()=>he,()=>({duration:200})),se(3,gt,()=>he,()=>({duration:200})),se(3,ot,()=>he,()=>({duration:200})),se(3,Fe,()=>he,()=>({duration:200})),se(3,Ae,()=>he,()=>({duration:200})),Kt(Ct,()=>e(z).previousStartMode,vt=>e(z).previousStartMode=vt),se(3,ct,()=>he,()=>({duration:200})),se(3,yt,()=>he,()=>({duration:200})),se(3,at,()=>he,()=>({duration:200})),r(st,et)},lt=st=>{var et=Ce(),ot=L(et);{var it=ut=>{var gt=Hn(),_t=a(gt),Mt=a(_t),Bt=s(_t),Et=a(Bt),Je=a(Et);u(()=>{e(z),Yt(()=>{})}),_e(Je,5,()=>Sr,pe,(tt,at)=>{var Ae=Fn(),Fe={},yt=a(Ae);u(()=>{Fe!==(Fe=e(at))&&(Ae.value=(Ae.__value=e(at))==null?"":e(at)),p(yt,e(at))}),r(tt,Ae)}),se(3,Mt,()=>he,()=>({duration:200})),se(3,_t,()=>he,()=>({duration:200})),Kt(Je,()=>e(z).previousDifficulty,tt=>e(z).previousDifficulty=tt),se(3,Et,()=>he,()=>({duration:200})),se(3,Bt,()=>he,()=>({duration:200})),se(3,gt,()=>he,()=>({duration:200})),r(ut,gt)};h(ot,ut=>{e(g)==="FtkChallenge"&&ut(it)},!0)}r(st,et)};h(Ie,st=>{e(g)==="Free"?st(Xe):st(lt,!1)})}var $t=s(Ie,2),jt=a($t),St=a(jt),Ot=a(St);se(3,M,()=>he,()=>({duration:200})),se(3,Ve,()=>he,()=>({duration:200})),se(3,X,()=>he,()=>({duration:200})),se(3,C,()=>he,()=>({duration:200})),se(3,Re,()=>he,()=>({duration:200})),se(3,Ge,()=>he,()=>({duration:200})),se(3,Me,()=>he,()=>({duration:200})),Kt(Ye,()=>e(P),st=>D(P,st)),se(3,Ke,()=>he,()=>({duration:200})),se(3,Ue,()=>he,()=>({duration:200})),se(3,oe,()=>he,()=>({duration:200})),fe("click",Ot,k),se(3,St,()=>he,()=>({duration:200})),r(ce,Ze)});var de=s(je,2);{var V=ce=>{var Ne=Wn(),Ze=a(Ne),Re=a(Ze),Ve=a(Re);fe("click",Ve,j),se(3,Re,()=>he,()=>({duration:200})),se(3,Ze,()=>he,()=>({duration:200})),se(3,Ne,()=>he,()=>({duration:200})),r(ce,Ne)};h(de,ce=>{e(g)==="Free"&&ce(V)})}se(3,Pe,()=>he,()=>({duration:200})),se(3,qe,()=>he,()=>({duration:200})),Tt(nt,()=>e(z).name,ce=>e(z).name=ce),fe("keypress",nt,te),se(3,ze,()=>he,()=>({duration:200})),se(3,Le,()=>he,()=>({duration:200})),se(3,He,()=>he,()=>({duration:200})),r(Q,xe)}),r(I,$e)};h(_,I=>{e(o)==="DeckEdit"?I(y):I(Y,!1)},!0)}r(T,S)};h(ae,T=>{e(v)?T(me):T(Te,!1)})}var F=s(ae,2),E=a(F);ht(E,()=>Jt,T=>{var S=rt("読み込み中");r(T,S)},(T,S)=>{var _=Vn(),y=L(_),Y=a(y),I=s(y,2),$e=a(I);u((ke,ue,J)=>{p(Y,`公式DB上のカード${ke??""}枚`),p($e,`実装済カード（効果あり）${ue??""}枚 （効果なし）${J??""}枚`)},[()=>e(S).knmCount.toLocaleString(),()=>e(S).definitionCount.toLocaleString(),()=>e(S).nonDefinitionCount.toLocaleString()],ne),r(T,_)});var q=s(F,2),W=a(q),re=a(W),b=s(W,2),O=a(b),x=s(b,2),m=a(x),A=s(q,2);{var ve=T=>{var S=Zn(),_=a(S);{var y=z=>{var xe=Ce(),He=L(xe);{var qe=Le=>{var ze=Gn();r(Le,ze)},Pe=Le=>{var ze=Ce(),nt=L(ze);{var je=de=>{var V=Qn();r(de,V)};h(nt,de=>{e(v).winner.seat==="Above"&&de(je)},!0)}r(Le,ze)};h(He,Le=>{e(v).winner.seat==="Below"?Le(qe):Le(Pe,!1)})}r(z,xe)},Y=z=>{var xe=Xn();r(z,xe)};h(_,z=>{e(v).winner?z(y):z(Y,!1)})}var I=s(_,2),$e=a(I),ke=s(I,2);{var ue=z=>{var xe=Jn(),He=a(xe);u(()=>pt(He,"href",`https://x.com/share?url=${$}&text=${e(v).twitterShareText??""}&hashtags=${n}&via=${R}`)),r(z,xe)};h(ke,z=>{e(v).twitterShareText&&z(ue)})}var J=s(ke,2),Q=a(J);u(()=>p($e,e(v).reasonOfEnd)),fe("click",Q,ee),se(3,S,()=>jr,()=>({delay:200,duration:200})),r(T,S)};h(A,T=>{e(v)&&e(v).isEnded&&T(ve)})}u(()=>{p(re,"build at: 20260112_172647"),p(O,ga.text),p(m,`w:${e(c)??""}px h:${e(f)??""}px`)}),sa("innerWidth",T=>D(c,T)),sa("innerHeight",T=>D(f,T)),fe("click",U,ee),r(d,Oe),xt()}Mr(tl,{target:document.getElementById("app")});
