var Oa=Object.defineProperty;var ka=v=>{throw TypeError(v)};var Ra=(v,i,t)=>i in v?Oa(v,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):v[i]=t;var et=(v,i,t)=>Ra(v,typeof i!="symbol"?i+"":i,t),xa=(v,i,t)=>i.has(v)||ka("Cannot "+t);var nt=(v,i,t)=>(xa(v,i,"read from private field"),t?t.call(v):i.get(v)),Ot=(v,i,t)=>i.has(v)?ka("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(v):i.set(v,t),na=(v,i,t,d)=>(xa(v,i,"write to private field"),d?d.call(v,t):i.set(v,t),t);import{s as Da,r as Wa,a as S,b as Ka,l as za,g as e,d as Pa,p as lt,c as Ie,m as De,i as dt,t as o,e as a,f as k,h as y,j as ye,k as Ae,n as yt,o as ke,q as s,u as vt,v as $e,D as Va,w as Se,x as N,y as r,z as oe,A as Ut,B as ae,C as de,E as g,F as Ga,G as at,H as ca,I as Xa,J as Qa,K as Lt,L as ot,M as Rt,N as qa,O as _a,P as ea,Q as ua,R as ta,S as fa,T as aa,U as ra,V as Ja,W as Za,X as er,Y as tr,Z as ar,_ as rr,$ as sr,a0 as Xt,a1 as Fa,a2 as ir,a3 as nr,a4 as Qt,a5 as oa,a6 as Ct,a7 as or,a8 as lr,a9 as dr,aa as bt,ab as vr,ac as cr,ad as _r,ae as Ca,af as ja,ag as $a,ah as Sa,ai as Ma,aj as Ta,ak as At,al as Ft,am as Ht,an as kt,ao as ur,ap as fr,aq as Ba,ar as qt,as as Yt,at as pr,au as yr,av as gr,aw as Ea,ax as mr,ay as hr,az as br}from"../chunk/entity_proc_20260103_222910.js";import"../chunk/json_20260103_222910.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const c of p)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&d(u)}).observe(document,{childList:!0,subtree:!0});function t(p){const c={};return p.integrity&&(c.integrity=p.integrity),p.referrerPolicy&&(c.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?c.credentials="include":p.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function d(p){if(p.ep)return;p.ep=!0;const c=t(p);fetch(p.href,c)}})();const wr=v=>v;function pa(v){const i=v-1;return i*i*i+1}function Aa(v){const i=typeof v=="string"&&v.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[v,"px"]}function kr(v,{delay:i=0,duration:t=400,easing:d=wr}={}){const p=+getComputedStyle(v).opacity;return{delay:i,duration:t,easing:d,css:c=>`opacity: ${c*p}`}}function xr(v,{delay:i=0,duration:t=400,easing:d=pa,x:p=0,y:c=0,opacity:u=0}={}){const l=getComputedStyle(v),U=+l.opacity,z=l.transform==="none"?"":l.transform,D=U*(1-u),[n,R]=Aa(p),[F,H]=Aa(c);return{delay:i,duration:t,easing:d,css:(O,E)=>`
			transform: ${z} translate(${(1-O)*n}${R}, ${(1-O)*F}${H});
			opacity: ${U-D*E}`}}function me(v,{delay:i=0,duration:t=400,easing:d=pa,axis:p="y"}={}){const c=getComputedStyle(v),u=+c.opacity,l=p==="y"?"height":"width",U=parseFloat(c[l]),z=p==="y"?["top","bottom"]:["left","right"],D=z.map(A=>`${A[0].toUpperCase()}${A.slice(1)}`),n=parseFloat(c[`padding${D[0]}`]),R=parseFloat(c[`padding${D[1]}`]),F=parseFloat(c[`margin${D[0]}`]),H=parseFloat(c[`margin${D[1]}`]),O=parseFloat(c[`border${D[0]}Width`]),E=parseFloat(c[`border${D[1]}Width`]);return{delay:i,duration:t,easing:d,css:A=>`overflow: hidden;opacity: ${Math.min(A*20,1)*u};${l}: ${A*U}px;padding-${z[0]}: ${A*n}px;padding-${z[1]}: ${A*R}px;margin-${z[0]}: ${A*F}px;margin-${z[1]}: ${A*H}px;border-${z[0]}-width: ${A*O}px;border-${z[1]}-width: ${A*E}px;min-${l}: 0`}}function Ya(v,i){for(const t in i)v[t]=i[t];return v}function Dr({fallback:v,...i}){const t=new Map,d=new Map;function p(u,l,U){const{delay:z=0,duration:D=$=>Math.sqrt($)*30,easing:n=pa}=Ya(Ya({},i),U),R=u.getBoundingClientRect(),F=l.getBoundingClientRect(),H=R.left-F.left,O=R.top-F.top,E=R.width/F.width,A=R.height/F.height,se=Math.sqrt(H*H+O*O),le=getComputedStyle(l),Be=le.transform==="none"?"":le.transform,j=+le.opacity;return{delay:z,duration:typeof D=="function"?D(se):D,easing:n,css:($,Q)=>`
			   opacity: ${$*j};
			   transform-origin: top left;
			   transform: ${Be} translate(${Q*H}px,${Q*O}px) scale(${$+(1-$)*E}, ${$+(1-$)*A});
		   `}}function c(u,l,U){return(z,D)=>(u.set(D.key,z),()=>{if(l.has(D.key)){const n=l.get(D.key);return l.delete(D.key),p(n,z,D)}return u.delete(D.key),v&&v(z,D,U)})}return[c(d,t,!1),c(t,d,!0)]}function Ua(v){return Object.prototype.toString.call(v)==="[object Date]"}function Cr(v){return v}function la(v){const i=v-1;return i*i*i+1}function da(v,i){if(v===i||v!==v)return()=>v;const t=typeof v;if(t!==typeof i||Array.isArray(v)!==Array.isArray(i))throw new Error("Cannot interpolate values of different type");if(Array.isArray(v)){const d=i.map((p,c)=>da(v[c],p));return p=>d.map(c=>c(p))}if(t==="object"){if(!v||!i)throw new Error("Object cannot be null");if(Ua(v)&&Ua(i)){const c=v.getTime(),l=i.getTime()-c;return U=>new Date(c+U*l)}const d=Object.keys(i),p={};return d.forEach(c=>{p[c]=da(v[c],i[c])}),c=>{const u={};return d.forEach(l=>{u[l]=p[l](c)}),u}}if(t==="number"){const d=i-v;return p=>v+p*d}return()=>i}var jt,It,Wt,Nt;const ya=class ya{constructor(i,t={}){Ot(this,jt,Da(void 0));Ot(this,It,Da(void 0));Ot(this,Wt);Ot(this,Nt,null);nt(this,jt).v=nt(this,It).v=i,na(this,Wt,t)}static of(i,t){const d=new ya(i(),t);return Wa(()=>{d.set(i())}),d}set(i,t){var n;S(nt(this,It),i);let{delay:d=0,duration:p=400,easing:c=Cr,interpolate:u=da}={...nt(this,Wt),...t};if(p===0)return(n=nt(this,Nt))==null||n.abort(),S(nt(this,jt),i),Promise.resolve();const l=Ka.now()+d;let U,z=!1,D=nt(this,Nt);return na(this,Nt,za(R=>{if(R<l)return!0;if(!z){z=!0;const H=nt(this,jt).v;U=u(H,i),typeof p=="function"&&(p=p(H,i)),D==null||D.abort()}const F=R-l;return F>p?(S(nt(this,jt),i),!1):(S(nt(this,jt),U(c(F/p))),!0)})),nt(this,Nt).promise}get current(){return e(nt(this,jt))}get target(){return e(nt(this,It))}set target(i){this.set(i)}};jt=new WeakMap,It=new WeakMap,Wt=new WeakMap,Nt=new WeakMap;let Jt=ya;var jr=o('<div class="phase_display svelte-1ycsdg6"><span class="svelte-1ycsdg6"> </span> </div>'),$r=o('<div class="lifepoint_display svelte-1ycsdg6"><div class="svelte-1ycsdg6"> </div> <div class="svelte-1ycsdg6"> </div></div>'),Sr=(v,i,t)=>i(e(t)),Mr=o('<div class="svelte-1ycsdg6"><button class="phase_button svelte-1ycsdg6"> </button></div>'),Tr=o("<div><!></div>"),Br=o('<div class="svelte-1ycsdg6"><!></div>'),Er=o("<div><!></div>"),Ar=o('<div class="config_button_wrapper svelte-1ycsdg6"><button id="config_button" class="svelte-1ycsdg6">⚙</button></div>'),Yr=o("<!> <!> <!> <!>",1),Ur=o('<div style="position: absolute;" class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Lr=o('<div style="position: absolute; top:0rem" class="svelte-1ycsdg6">｛効果対象｝</div>'),Nr=o('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Pr=o(" <!> 】",1),qr=o('<div style="position: absolute; bottom:0rem" class="svelte-1ycsdg6"> <!></div>'),Fr=o("<!> <!>",1),Hr=o('<div class="badge svelte-1ycsdg6"> </div>'),Ir=o('<div class="card_animation_receiver svelte-1ycsdg6"><!></div>'),Or=o("<!> <!> <!> <!>",1),Rr=o('<td><div role="listitem"><!></div></td>');function Wr(v,i){lt(i,!1);let t=Ie(i,"view",12),d=Ie(i,"row",8),p=Ie(i,"column",8),c=Ie(i,"selectedEntities",28,()=>[]),u=Ie(i,"selectedCells",28,()=>[]),l=De(t().getCell(d(),p())),U=De(new Jt(e(l).field.duel.duelists.Above.lp,{duration:400,easing:la})),z=De(new Jt(e(l).field.duel.duelists.Below.lp,{duration:400,easing:la}));const D=()=>{S(l,t().getCell(d(),p())),$e(U,e(U).target=e(l).field.duel.duelists.Above.lp),$e(z,e(z).target=e(l).field.duel.duelists.Below.lp)};e(l).onUpdate.append(D),t().onDuelUpdate.append(D),t().modalController.onUpdate.append(D);let n,R=De([]),F=()=>console.log("hoge"),H,O=De([]),E=De(!1),A=De(!1),se=!1;const le=C=>{var M,L;S(ve,[]),c().reset(),n=C.activator,F=C.resolve,S(R,C.dummyActionInfos),S(O,C.chainBlockInfos.flatMap(ee=>ee.selectedEntities).getDistinct()),H=C.entitiesChoices,S(E,!1),S(A,((M=C.cellsChoices)==null?void 0:M.selectables.includes(e(l)))??!1),se=e(A)&&((L=C.cellsChoices)==null?void 0:L.qty)===1,D()};t().onWaitStart.append(le);const Be=()=>{n=void 0,S(R,[]),F=()=>{console.log("hoge")},H=void 0,S(O,[]),S(E,!1),S(A,!1),se=!1};t().onWaitEnd.append(Be);let j=De(!1),$=[];const Q=C=>{$=C.filter(M=>M.dests.includes(e(l))),S(j,$.length>0),D()},_e=()=>{$=[],S(j,!1),D()};t().onDragStart.append(Q),t().onDragEnd.append(_e);const[Ce,ie]=ei;let ve=De([]);const Ee=C=>{if(n=void 0,e(l)===C.to||e(l).entities.includes(C.entity)){S(ve,[...e(ve),C]);const M=C.resolve;S(l,e(l)),setTimeout(()=>{S(ve,e(ve).filter(L=>L!==C)),C.count++,C.count>1&&M()},600)}};t().onAnimation.append(Ee);const B=C=>{F({phaseChange:C})},I=()=>e(l).isStackCell&&e(l).entities.flatMap(C=>C.actions).filter(C=>e(R).map(M=>M.action.seq).some(M=>M===C.seq)).length>0,V=C=>{var M;if(((M=C.target)==null?void 0:M.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),se)F({selectedCells:[e(l)]});else if(e(A))S(E,!e(E)),u(e(E)?[...u(),e(l)]:u().filter(L=>L!==e(l)));else if(e(l).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(l),!0),t().requireUpdate();const L=e(l).entities.flatMap(re=>re.actions).map(re=>re.seq),ee=e(R).filter(re=>L.includes(re.action.seq));if(ee.length){if(!n)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:n,dummyActionInfos:ee,cancelable:!0}).then(re=>{re&&F({actionInfo:re})});return}}t().requireUpdate(),console.info(e(l),ue(...e(l).visibleEntities))},ce=C=>{C.preventDefault(),C.dataTransfer&&(C.dataTransfer.dropEffect="move")},je=C=>{C.preventDefault(),console.info("drop",C,e(j),$),C.dataTransfer&&(C.dataTransfer.dropEffect="move");try{if(e(j)&&$){if($.length===1){const M=$[0];F({actionInfo:{...M,dest:e(l)}})}else if($.length>1){if(!n)throw new Va("想定されない状態");e(l).field.duel.view.modalController.terminateAll(),e(l).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:n,dummyActionInfos:$.map(M=>({...M,dest:e(l)})),cancelable:!1}).then(M=>{F({actionInfo:M})})}}}finally{t().removeDraggingActions()}},ue=(...C)=>{if(t().waitMode==="Animation")return"Disabled";if(H&&H.selectables.find(L=>C.find(ee=>L===ee)))return"Selectable";if(!e(R)||e(R).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(L=>L.state==="Shown"))return"Disabled";const M=e(R).filter(L=>C.includes(L.action.entity));return M.length===0?"Disabled":e(l).isStackCell||M[0].action.entity!==C[0]?"Clickable":M.some(L=>L.dests.length)?"Draggable":"Clickable"};dt();var Y=Rr(),b=a(Y);b.__click=V;var G=a(b);{var te=C=>{var M=Se(),L=N(M);{var ee=re=>{var he=Se(),f=N(he);{var x=h=>{var P=jr(),q=a(P),xe=a(q),be=r(q,1,!0);y((fe,X)=>{g(xe,fe),g(be,X)},[()=>String(e(l).field.duel.clock.turn).padStart(2,"0"),()=>e(l).field.duel.phase.toUpperCase()],ye),s(h,P)},_=h=>{var P=Se(),q=N(P);{var xe=fe=>{var X=$r(),J=a(X),W=a(J),we=r(J,2),Le=a(we);y((Fe,Ne)=>{g(W,Fe),g(Le,Ne)},[()=>Math.floor(e(U).current),()=>Math.floor(e(z).current)],ye),s(fe,X)},be=fe=>{var X=Se(),J=N(X);{var W=we=>{var Le=Se(),Fe=N(Le);{var Ne=Ye=>{var We=Se(),w=N(We);{var m=T=>{var Z=Se(),ge=N(Z);oe(ge,1,()=>t().duel.nextPhaseList,de,(Me,K)=>{var pe=Mr(),Te=a(pe);Te.__click=[Sr,B,K];var ze=a(Te);y(Ue=>g(ze,Ue),[()=>e(K).toUpperCase()],ye),s(Me,pe)}),s(T,Z)};k(w,T=>{t().duel.isEnded||T(m)})}s(Ye,We)};k(Fe,Ye=>{t().waitMode==="Free"&&Ye(Ne)})}s(we,Le)};k(J,we=>{e(l).column===5&&we(W)},!0)}s(fe,X)};k(q,fe=>{e(l).column===3?fe(xe):fe(be,!1)},!0)}s(h,P)};k(f,h=>{e(l).column===1?h(x):h(_,!1)})}s(re,he)};k(L,re=>{e(l).row===3&&re(ee)})}s(C,M)},ne=C=>{var M=Se(),L=N(M);{var ee=he=>{var f=Yr();const x=ye(()=>e(ve).find(X=>X.to===e(l)));var _=N(f);{var h=X=>{var J=Tr(),W=a(J);Ut(W,{get entity(){return e(x).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),y(()=>Ae(J,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),ae(1,J,()=>ie,()=>({key:e(x).entity.seq})),s(X,J)};k(_,X=>{e(x)&&e(x).index==="Top"&&X(h)})}var P=r(_,2);oe(P,1,()=>e(l).visibleEntities,de,(X,J)=>{var W=Se(),we=N(W);{var Le=Fe=>{var Ne=Br(),Ye=a(Ne);const We=ye(()=>ue(e(J))),w=ye(()=>e(R).filter(m=>m.action.entity===e(J)));Ut(Ye,{get entity(){return e(J)},get state(){return e(We)},get dummyActionInfos(){return e(w)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(m){c(m)},$$legacy:!0}),ae(2,Ne,()=>Ce,()=>({key:e(J).seq})),s(Fe,Ne)};k(we,Fe=>{e(ve).every(Ne=>Ne.entity.seq!==e(J).seq)&&Fe(Le)})}s(X,W)});var q=r(P,2);{var xe=X=>{var J=Er(),W=a(J);Ut(W,{get entity(){return e(x).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),y(()=>Ae(J,`card_animation_receiver ${e(l).cellType??""} svelte-1ycsdg6`)),ae(1,J,()=>ie,()=>({key:e(x).entity.seq})),s(X,J)};k(q,X=>{e(x)&&e(x).index!=="Top"&&X(xe)})}var be=r(q,2);{var fe=X=>{var J=Ar();s(X,J)};k(be,X=>{e(l).owner.seat==="Below"&&X(fe)})}s(he,f)},re=he=>{var f=Or();const x=ye(()=>e(ve).find(J=>J.to===e(l)));var _=N(f);{var h=J=>{var W=Ur(),we=a(W);Ut(we,{get entity(){return e(x).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),ae(1,W,()=>ie,()=>({key:e(x).entity.seq})),s(J,W)};k(_,J=>{e(x)&&e(x).index!=="Top"&&J(h)})}var P=r(_,2);{var q=J=>{var W=Fr(),we=N(W);oe(we,1,()=>e(l).visibleEntities.map((Ne,Ye)=>({index:Ye,entity:Ne})).toReversed(),de,(Ne,Ye)=>{var We=Se(),w=N(We);{var m=T=>{var Z=Nr();const ge=ye(()=>!e(l).isStackCell&&e(Ye).index===0?ue(...e(l).visibleEntities):void 0);var Me=N(Z);{var K=Ue=>{var Ve=Lr();s(Ue,Ve)};k(Me,Ue=>{e(O).includes(e(Ye).entity)&&Ue(K)})}var pe=r(Me,2),Te=a(pe);const ze=ye(()=>e(Ye).index===0?e(R).filter(Ue=>e(l).visibleEntities.includes(Ue.action.entity)):void 0);Ut(Te,{get entity(){return e(Ye).entity},get state(){return e(ge)},get dummyActionInfos(){return e(ze)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(Ue){c(Ue)},$$legacy:!0}),y(()=>Ae(pe,`duel_card_wrapper ${(e(Ye).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1ycsdg6`)),ae(2,pe,()=>Ce,()=>({key:e(Ye).entity.seq})),s(T,Z)};k(w,T=>{e(ve).every(Z=>Z.entity.seq!==e(Ye).entity.seq)&&T(m)})}s(Ne,We)});var Le=r(we,2);{var Fe=Ne=>{var Ye=qr(),We=a(Ye),w=r(We);oe(w,1,()=>ca(e(l).visibleEntities[0].status.maxCounterQty),de,(m,T)=>{var Z=Pr(),ge=N(Z),Me=r(ge);{var K=pe=>{var Te=at();y(()=>g(Te,`/${e(l).visibleEntities[0].status.maxCounterQty[e(T)]??""}`)),s(pe,Te)};k(Me,pe=>{(e(l).visibleEntities[0].status.maxCounterQty[e(T)]??9999)<100&&pe(K)})}y((pe,Te)=>g(ge,`【
              ${pe??""}${Te??""} `),[()=>Ga(e(T)),()=>e(l).visibleEntities[0].counterHolder.getQty(e(T))],ye),s(m,Z)}),y(()=>g(We,`【${e(l).visibleEntities[0].battlePositionName??""}】 `)),s(Ne,Ye)};k(Le,Ne=>{e(l).visibleEntities[0].battlePosition&&Ne(Fe)})}s(J,W)};k(P,J=>{e(l).visibleEntities.length>0&&J(q)})}var xe=r(P,2);{var be=J=>{var W=Hr(),we=a(W);y(()=>g(we,e(l).visibleEntities.length)),s(J,W)};k(xe,J=>{e(l).isStackCell&&J(be)})}var fe=r(xe,2);{var X=J=>{var W=Ir(),we=a(W);Ut(we,{get entity(){return e(x).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),ae(1,W,()=>ie,()=>({key:e(x).entity.seq})),s(J,W)};k(fe,J=>{e(x)&&e(x).index==="Top"&&J(X)})}s(he,f)};k(L,he=>{e(l).cellType==="Hand"?he(ee):he(re,!1)},!0)}s(C,M)};k(G,C=>{e(l).isDisabledCell?C(te):C(ne,!1)})}y(C=>{Ae(Y,`${`duel_field_cell duel_field_cell_${e(l).cellType} ${e(l).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1ycsdg6`),yt(Y,"colspan",e(l).cellType==="Hand"?7:1),Ae(b,`${C??""} svelte-1ycsdg6`)},[()=>`duel_field_cell_inner_box ${e(l).cellType} ${e(j)?"can_accept_drop":""} ${I()?"can_action":""} ${e(E)?"is_selected":e(A)?"is_selectable":""} `],ye),ke("dragover",b,ce),ke("drop",b,je),s(v,Y),vt()}Pa(["click"]);const Kr=(v,i,t=void 0,d="!!!circular reference!!!")=>{let p=[];return JSON.stringify(v,(c,u)=>{if(typeof u=="object"){if(p.indexOf(u)>-1)return d;p.push(u)}let l=u;if(i&&(l=i(c,u)),typeof l=="function")return l.toString();if(l!==u&&typeof l=="object"){if(p.indexOf(l)>-1)return d;p.push(l)}return l},t)};var zr=o('<div class="title svelte-14z6bdh"> </div>'),Vr=o('<div class="title svelte-14z6bdh"> </div>'),Gr=o('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),Xr=o('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),Qr=o("<div><!> <!></div>"),Jr=o('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),Zr=o("<div><!> <!></div>"),es=o("<div><!> <!></div>"),ts=o('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function as(v,i){lt(i,!1);let t=De(void 0),d=Ie(i,"log",8),p,c=De([]);const u=()=>{const D=((p==null?void 0:p.seq)??-1)+1;d().records.slice(D).forEach(n=>{if(!p){S(c,[[[[n]]]]),p=n;return}if(!e(c)[n.clock.turn]){$e(c,e(c)[n.clock.turn]=[[[n]]]),p=n;return}if(!e(c)[n.clock.turn][n.clock.phaseSeq]){$e(c,e(c)[n.clock.turn][n.clock.phaseSeq]=[[n]]),p=n;return}if(p.clock.chainSeq===n.clock.chainSeq&&p.clock.chainBlockSeq===n.clock.chainBlockSeq&&p.duelist===n.duelist){e(c)[n.clock.turn][n.clock.phaseSeq].slice(-1)[0].push(n),p=n;return}e(c)[n.clock.turn][n.clock.phaseSeq].push([n]),p=n}),S(c,e(c)),Xa().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};d().onUpdate.append(u),d().duel.view.onDuelUpdate.append(u),u(),dt();var l=Se(),U=N(l);{var z=D=>{var n=ts(),R=r(a(n),2);oe(R,5,()=>e(c),de,(F,H)=>{var O=es(),E=a(O);{var A=le=>{var Be=zr(),j=a(Be);y(()=>g(j,`ターン：${e(H)[0][0][0].clock.turn??""}`)),s(le,Be)};k(E,le=>{e(H)[0][0][0].clock.turn>0&&le(A)})}var se=r(E,2);oe(se,1,()=>e(H),de,(le,Be)=>{var j=Zr(),$=a(j);{var Q=Ce=>{var ie=Vr(),ve=a(ie);y(()=>g(ve,e(Be)[0][0].clock.period.name)),s(Ce,ie)};k($,Ce=>{e(Be)[0][0].clock.turn>0&&Ce(Q)})}var _e=r($,2);oe(_e,1,()=>e(Be),de,(Ce,ie)=>{var ve=Jr();const Ee=ye(()=>{var Y;return((Y=e(ie).find(b=>b.chainNumber!==void 0))==null?void 0:Y.chainNumber)??0});var B=a(ve),I=a(B),V=a(I),ce=r(I,2);{var je=Y=>{var b=Gr(),G=a(b);y(()=>g(G,`チェーン：${e(Ee)??""}`)),s(Y,b)};k(ce,Y=>{e(Ee)&&Y(je)})}var ue=r(B,2);oe(ue,1,()=>e(ie),de,(Y,b)=>{var G=Qr(),te=a(G);{var ne=ee=>{var re=at();y(()=>g(re,e(b).text)),s(ee,re)},C=ee=>{var re=Se(),he=N(re);{var f=_=>{var h=at();y((P,q,xe)=>g(h,`移動：${P??""} ${q??""} ⇒ ${xe??""}`),[()=>{var P;return(P=e(b).mainEntity)==null?void 0:P.toString()},()=>{var P;return(P=e(b).from)==null?void 0:P.toString()},()=>{var P;return(P=e(b).to)==null?void 0:P.toString()}],ye),s(_,h)},x=_=>{var h=Se(),P=N(h);{var q=be=>{var fe=at();y((X,J)=>g(fe,`生成：${X??""} void ⇒ ${J??""}`),[()=>{var X;return(X=e(b).mainEntity)==null?void 0:X.toString()},()=>{var X;return(X=e(b).to)==null?void 0:X.toString()}],ye),s(be,fe)},xe=be=>{var fe=Se(),X=N(fe);{var J=we=>{var Le=at();y((Fe,Ne)=>g(Le,`消滅：${Fe??""} ${Ne??""} ⇒ void`),[()=>{var Fe;return(Fe=e(b).mainEntity)==null?void 0:Fe.toString()},()=>{var Fe;return(Fe=e(b).from)==null?void 0:Fe.toString()}],ye),s(we,Le)},W=we=>{var Le=at();y(()=>g(Le,e(b).text)),s(we,Le)};k(X,we=>{e(b).type==="EntityDisappear"?we(J):we(W,!1)},!0)}s(be,fe)};k(P,be=>{e(b).type==="EntityAppear"?be(q):be(xe,!1)},!0)}s(_,h)};k(he,_=>{e(b).type==="EntityMove"?_(f):_(x,!1)},!0)}s(ee,re)};k(te,ee=>{e(b).type==="ChainBlockHeader"?ee(ne):ee(C,!1)})}var M=r(te,2);{var L=ee=>{var re=Xr(),he=a(re);y(f=>yt(he,"href",f),[()=>window.URL.createObjectURL(new Blob([Kr(e(b).error,(f,x)=>["pool","bundles","duel"].includes(f)||typeof x=="function"?void 0:x,4)],{type:"text/plain"}))],ye),s(ee,re)};k(M,ee=>{e(b).error&&ee(L)})}y(ee=>Ae(G,`duel_log_record duel_log_record_${ee??""} svelte-14z6bdh`),[()=>e(b).type.toSnakeCase()],ye),s(Y,G)}),y(()=>{var Y,b,G;Ae(ve,`duel_log_block_duelist duel_log_block_duelist_${((Y=e(ie)[0].duelist)==null?void 0:Y.seat)??"system"} svelte-14z6bdh`),Ae(I,`duelist ${((b=e(ie)[0].duelist)==null?void 0:b.seat)??""} svelte-14z6bdh`),g(V,((G=e(ie)[0].duelist)==null?void 0:G.profile.name)||"SYSTEM")}),s(Ce,ve)}),y(()=>Ae(j,`duel_log_block_phase duel_log_block_phase_${e(Be)[0][0].clock.period.key??""} svelte-14z6bdh`)),s(le,j)}),y(()=>Ae(O,`duel_log_block_turn duel_log_block_turn_${e(H)[0][0][0].clock.turn??""} svelte-14z6bdh`)),s(F,O)}),Qa(R,F=>S(t,F),()=>e(t)),s(D,n)};k(U,D=>{(d().duel.view.infoBoardState==="Log"||d().duel.view.infoBoardState==="Default")&&D(z)})}s(v,l),vt()}var rs=o("<div><div> </div> <div> </div></div>");function La(v,i){lt(i,!1);let t=Ie(i,"duelist",12),d=De(0),p=De();const c=async()=>{const R=t().lp-e(d);if(!e(p)||Math.abs(R)<10){S(d,t().lp),e(p)&&(e(p)(),S(p,void 0));return}S(d,e(d)+Math.floor(Math.random()*R)),await Lt(100),c()},u=()=>{t(t()),!e(p)&&t().lp!==e(d)&&new Promise(R=>{S(p,R),Math.abs(t().lp-e(d)),c()})};t().duel.log.onUpdate.append(u),c(),dt();var l=rs(),U=a(l),z=a(U),D=r(U,2),n=a(D);y(R=>{Ae(l,`duelist duelist_${R??""} svelte-1sy3trd`),Ae(U,`duelist_name duelist_${R??""}_name svelte-1sy3trd`),g(z,t().profile.name),Ae(D,`duelist_lp ${(e(p)?"vibration":"")??""} svelte-1sy3trd`),g(n,e(d))},[()=>t().seat.toLowerCase()],ye),s(v,l),vt()}const ss=(v,i,t)=>(i(i()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),is=(v,i,t)=>(i(i()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var ns=o('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),os=o('<div></div> <div class="svelte-1uevs9j"> </div>',1),ls=o("<div> </div>"),ds=o('<span class="svelte-1uevs9j">/</span> <div class="monster_defense svelte-1uevs9j"> </div>',1),vs=o("<div> </div>"),cs=o('<div class="duel_card_info_row svelte-1uevs9j"><!> <!> <div style="flex-grow: 1;" class="svelte-1uevs9j"></div> <div class="monster_attack svelte-1uevs9j"> </div> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),_s=o('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),us=o('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),fs=o("<!> <!>",1),ps=o('<pre class="description svelte-1uevs9j"> </pre>'),ys=o('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),gs=o('<pre class="description svelte-1uevs9j"> </pre>'),ms=o('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),hs=o('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),bs=o('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),ws=o("[ <!> ],",1),ks=o('<div class="svelte-1uevs9j"> <!></div>'),xs=o('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),Ds=o('<div class="svelte-1uevs9j"> </div>'),Cs=o('<div class="svelte-1uevs9j"> </div>'),js=o('<div class="svelte-1uevs9j"> </div>'),$s=o('<div class="svelte-1uevs9j"> </div>'),Ss=o('<div class="svelte-1uevs9j"> </div>'),Ms=o('<div class="svelte-1uevs9j"> </div>'),Ts=o('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Bs=o('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Es=o('<div class="svelte-1uevs9j">※テスト用カードです</div>'),As=o('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),Ys=o('<div class="duel_card_info_links svelte-1uevs9j"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a> <!></div>'),Us=o("<!> <!>",1),Ls=o('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Ns(v,i){lt(i,!1);let t=Ie(i,"entity",8,void 0),d=Ie(i,"mode",12,"Normal");const p=async()=>{if(!t())return;const D=(await Rt).getCardInfo(t().origin.name);if(D)return D.cardId!==void 0&&!D.description&&!D.pendulumDescription&&await qa([D.cardId]),D},c=()=>t()&&t().entityType==="Card"&&(t().origin.cardId??!1)?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t().origin.cardId}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:"";dt();var u=Se(),l=N(u);{var U=z=>{var D=Ls();D.__click=[ss,d,t],D.__contextmenu=[is,d,t];var n=a(D),R=a(n),F=a(R),H=a(F),O=r(R,2),E=a(O),A=a(E),se=r(E,2),le=a(se),Be=r(O,2);{var j=B=>{var I=fs(),V=N(I);{var ce=b=>{var G=ns(),te=a(G),ne=a(te),C=r(te,2),M=a(C);y(()=>{g(ne,`◀ ${t().psL??""}`),g(M,`${t().psR??""} ▶`)}),s(b,G)};k(V,b=>{var G;(G=t().origin.monsterCategories)!=null&&G.includes("Pendulum")&&b(ce)})}var je=r(V,2);{var ue=b=>{var G=cs(),te=N(G),ne=a(te);oe(ne,1,()=>t().attr,de,(f,x)=>{var _=os(),h=N(_),P=r(h,2),q=a(P);y(()=>{Ae(h,`monster_attr ${e(x)??""} svelte-1uevs9j`),g(q,`${_a[e(x)]??""}属性`)}),s(f,_)});var C=r(ne,2);oe(C,1,()=>t().types,de,(f,x)=>{var _=ls(),h=a(_);y(()=>{Ae(_,`monster_cat ${e(x)??""} svelte-1uevs9j`),g(h,`${ea[e(x)]??""}${ua[e(x)]??""}族`)}),s(f,_)});var M=r(C,4),L=a(M),ee=r(M,2);{var re=f=>{var x=ds(),_=r(N(x),2),h=a(_);y(()=>g(h,t().def??"?")),s(f,x)};k(ee,f=>{var x;(x=t().status.monsterCategories)!=null&&x.includes("Link")||f(re)})}var he=r(te,2);oe(he,5,()=>t().status.monsterCategories??[],de,(f,x)=>{var _=vs(),h=a(_);y(()=>{Ae(_,`monster_cat ${e(x)??""} svelte-1uevs9j`),g(h,`${ta[e(x)]??""}${fa[e(x)]??""}`)}),s(f,_)}),y(()=>g(L,t().atk??"?")),s(b,G)},Y=b=>{var G=Se(),te=N(G);{var ne=M=>{var L=_s(),ee=r(a(L),2),re=a(ee);y(()=>g(re,`${aa[t().status.spellCategory]??""}魔法`)),s(M,L)},C=M=>{var L=Se(),ee=N(L);{var re=he=>{var f=us(),x=r(a(f),2),_=a(x);y(()=>g(_,`${ra[t().status.trapCategory]??""}罠`)),s(he,f)};k(ee,he=>{t().kind==="Trap"&&t().status.trapCategory&&he(re)},!0)}s(M,L)};k(te,M=>{t().kind==="Spell"&&t().status.spellCategory?M(ne):M(C,!1)},!0)}s(b,G)};k(je,b=>{t().kind==="Monster"?b(ue):b(Y,!1)})}s(B,I)};k(Be,B=>{d()!=="Debug"&&B(j)})}var $=r(n,2),Q=a($);{var _e=B=>{var I=ms(),V=N(I);{var ce=Y=>{var b=ys(),G=a(b);ot(G,p,te=>{var ne=at('"読み込み中"');s(te,ne)},(te,ne)=>{var C=ps(),M=a(C);y(()=>{var L;return g(M,(L=e(ne))==null?void 0:L.pendulumDescription)}),s(te,C)}),s(Y,b)};k(V,Y=>{var b;(b=t().status.monsterCategories)!=null&&b.includes("Pendulum")&&Y(ce)})}var je=r(V,2),ue=a(je);ot(ue,p,Y=>{var b=at('"読み込み中"');s(Y,b)},(Y,b)=>{var G=gs(),te=a(G);y(()=>{var ne;return g(te,(ne=e(b))==null?void 0:ne.description)}),s(Y,G)}),s(B,I)},Ce=B=>{var I=Se(),V=N(I);{var ce=ue=>{var Y=Se(),b=N(Y);{var G=te=>{var ne=bs(),C=r(a(ne),2);oe(C,5,()=>t().actions,de,(M,L)=>{var ee=Se();const re=ye(()=>e(L).actionCountUpperBound),he=ye(()=>e(L).actionCount);var f=N(ee);{var x=_=>{var h=hs(),P=a(h),q=a(P),xe=r(P,2),be=a(xe),fe=r(xe,4),X=a(fe);y(()=>{g(q,e(L).title),g(be,e(he)),g(X,e(re))}),s(_,h)};k(f,_=>{e(re)!==void 0&&e(he)!==void 0&&_(x)})}s(M,ee)}),s(te,ne)};k(b,te=>{t().actions.some(ne=>ne.actionCountUpperBoundKey)&&te(G)})}s(ue,Y)},je=ue=>{var Y=Ts(),b=a(Y),G=a(b);oe(G,0,()=>["info","status"],de,(w,m)=>{var T=xs(),Z=N(T),ge=a(Z),Me=r(Z,2);oe(Me,1,()=>Object.entries(t()[m]),de,(pe,Te)=>{let ze=()=>e(Te)[0],Ue=()=>e(Te)[1];var Ve=ks(),ct=a(Ve),_t=r(ct);{var wt=Oe=>{var Ge=ws(),it=r(N(Ge));oe(it,1,Ue,de,(xt,Mt)=>{var Dt=at();y($t=>g(Dt,`${$t??""},`),[()=>e(Mt).toString()],ye),s(xt,Dt)}),s(Oe,Ge)},Ke=Oe=>{var Ge=at();y(it=>g(Ge,`${it??""},`),[()=>{var it;return(it=Ue())==null?void 0:it.toString()}],ye),s(Oe,Ge)};k(_t,Oe=>{Array.isArray(Ue())?Oe(wt):Oe(Ke,!1)})}y(()=>g(ct,`"${ze()??""}" : `)),s(pe,Ve)});var K=r(Me,2);K.textContent="},",y(()=>g(ge,`"${m??""}" :{`)),s(w,T)});var te=r(G,2);te.textContent='"actions" :[';var ne=r(te,2);oe(ne,1,()=>t().actions,de,(w,m)=>{var T=Ds(),Z=a(T);y(()=>g(Z,`"${e(m).playType??""} ${e(m).title??""}",`)),s(w,T)});var C=r(ne,2);C.textContent="],";var M=r(C,2);M.textContent='"substituteEffects" :[';var L=r(M,2);oe(L,1,()=>t().substituteEffects,de,(w,m)=>{var T=Cs(),Z=a(T);y(()=>g(Z,`"${e(m).title??""}",`)),s(w,T)});var ee=r(L,2);ee.textContent="],";var re=r(ee,2);re.textContent='"continuousEffects" :[';var he=r(re,2);oe(he,1,()=>t().continuousEffects,de,(w,m)=>{var T=js(),Z=a(T);y(()=>g(Z,`"${e(m).isStarted??""}",`)),s(w,T)});var f=r(he,2);f.textContent="],";var x=r(f,2);x.textContent='"procFilters" :[';var _=r(x,2);oe(_,1,()=>t().procFilterBundle.operators,de,(w,m)=>{var T=$s(),Z=a(T);y(ge=>g(Z,`"${ge??""} ${e(m).title??""} ${e(m).isEffective??""} ",`),[()=>e(m).isSpawnedBy.toString()],ye),s(w,T)});var h=r(_,2);h.textContent="],";var P=r(h,2);P.textContent='"numericStateOperators" :[';var q=r(P,2);oe(q,1,()=>t().numericOprsBundle.operators,de,(w,m)=>{var T=Ss(),Z=a(T);y(ge=>g(Z,`"${ge??""} ${e(m).title??""} ${e(m).isEffective??""} ${e(m).isContinuous??""} ${e(m).targetState??""} ${e(m).targetStateGen??""} ",`),[()=>e(m).isSpawnedBy.toString()],ye),s(w,T)});var xe=r(q,2);xe.textContent="],";var be=r(xe,2);be.textContent='"stateOperators" :[';var fe=r(be,2);oe(fe,1,()=>t().statusOperatorBundle.operators,de,(w,m)=>{var T=Ms(),Z=a(T);y(ge=>g(Z,`"${ge??""} ${e(m).title??""} ${e(m).isEffective??""} ",`),[()=>e(m).isSpawnedBy.toString()],ye),s(w,T)});var X=r(fe,2);X.textContent="],";var J=r(X,2);J.textContent='"lastMoveLogRecord" :{';var W=r(J,2),we=a(W),Le=r(W,2),Fe=a(Le),Ne=r(Le,2),Ye=a(Ne),We=r(Ne,2);We.textContent="},",y((w,m)=>{g(we,`"movedBy":"${w??""}",`),g(Fe,`"movedAs":"${m??""}",`),g(Ye,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var w;return(w=t().moveLog.latestRecord.movedBy)==null?void 0:w.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],ye),s(ue,Y)};k(V,ue=>{d()==="Detail"?ue(ce):ue(je,!1)},!0)}s(B,I)};k(Q,B=>{d()==="Normal"?B(_e):B(Ce,!1)})}var ie=r($,2),ve=a(ie);{var Ee=B=>{var I=Us(),V=N(I);{var ce=b=>{var G=Bs();s(b,G)};k(V,b=>{t().origin.isOldVersion&&b(ce)})}var je=r(V,2);{var ue=b=>{var G=Es();s(b,G)},Y=b=>{var G=Ys(),te=a(G),ne=r(te,2);{var C=M=>{var L=As(),ee=a(L);y(re=>{var he;yt(L,"href",re),g(ee,`⇒${((he=t())!=null&&he.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[c],ye),s(M,L)};k(ne,M=>{t()&&t().entityType==="Card"&&M(C)})}y(()=>yt(te,"href",`https://yugioh-wiki.net/index.php?${t().origin.wikiEncodedName}`)),s(b,G)};k(je,b=>{t().origin.isForTest?b(ue):b(Y,!1)})}s(B,I)};k(ve,B=>{t()&&B(Ee)})}y((B,I,V)=>{Ae(D,`duel_card duel_card_info ${t().origin.kind??""} ${B??""} svelte-1uevs9j`),g(H,t().nm),g(A,I),g(le,V)},[()=>{var B;return(B=t().origin.monsterCategories)==null?void 0:B.join(" ")},()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],ye),s(z,D)};k(l,z=>{t()&&z(U)})}s(v,u),vt()}Pa(["click","contextmenu"]);var Ps=o('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),qs=o('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),Fs=o('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function Hs(v,i){lt(i,!1);let t=Ie(i,"cell",12);const d=()=>{t(t())},p=U=>t().cardEntities.filter(z=>z.face===U);t().field.duel.view.onDuelUpdate.append(d),dt();var c=Se(),u=N(c);{var l=U=>{var z=Fs(),D=a(z),n=a(D),R=a(n),F=r(n,2),H=a(F),O=r(D,2);oe(O,4,()=>["FaceUp","FaceDown"],de,(E,A)=>{var se=Se(),le=N(se);{var Be=j=>{var $=qs(),Q=a($),_e=a(Q),Ce=r(Q,2);oe(Ce,1,()=>p(A).toSorted(Ja),de,(ie,ve)=>{var Ee=Ps(),B=a(Ee);const I=ye(()=>t().owner===t().field.duel.duelists.Below);Ut(B,{get entity(){return e(ve)},get isVisibleForcibly(){return e(I)},isWideMode:!0,cardActionResolve:void 0}),s(ie,Ee)}),y(()=>g(_e,A==="FaceUp"?"表向き":"裏向き")),s(j,$)};k(le,j=>{p(A).length&&j(Be)})}s(E,se)}),y(()=>{var E;g(R,(E=t().owner)==null?void 0:E.profile.name),g(H,t().cellType)}),s(U,z)};k(u,U=>{t().field.duel.view.infoBoardState==="CellInfo"&&U(l)})}s(v,c),vt()}var Is=o('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),Os=o('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function Rs(v,i){lt(i,!1);let t=Ie(i,"viewController",8),d=Ie(i,"userProfile",12);dt();var p=Se(),c=N(p);{var u=l=>{var U=Os(),z=r(a(U),2),D=r(a(z),2);oe(D,1,()=>tr,de,(n,R)=>{var F=Is(),H=a(F),O=a(H),E=r(H,2),A=a(E);y(()=>g(A,Za[e(R)])),er(O,()=>d().chainConfig[e(R)],se=>d(d().chainConfig[e(R)]=se,!0)),ke("change",O,()=>d().save()),s(n,F)}),s(l,U)};k(c,l=>{t().infoBoardState==="Config"&&l(u)})}s(v,p),vt()}function Ws(v,{from:i,to:t},d={}){var{delay:p=0,duration:c=$=>Math.sqrt($)*120,easing:u=la}=d,l=getComputedStyle(v),U=l.transform==="none"?"":l.transform,[z,D]=l.transformOrigin.split(" ").map(parseFloat);z/=v.clientWidth,D/=v.clientHeight;var n=Ks(v),R=v.clientWidth/t.width/n,F=v.clientHeight/t.height/n,H=i.left+i.width*z,O=i.top+i.height*D,E=t.left+t.width*z,A=t.top+t.height*D,se=(H-E)*R,le=(O-A)*F,Be=i.width/t.width,j=i.height/t.height;return{delay:p,duration:typeof c=="function"?c(Math.sqrt(se*se+le*le)):c,easing:u,css:($,Q)=>{var _e=Q*se,Ce=Q*le,ie=$+Q*Be,ve=$+Q*j;return`transform: ${U} translate(${_e}px, ${Ce}px) scale(${ie}, ${ve});`}}}function Ks(v){if("currentCSSZoom"in v)return v.currentCSSZoom;for(var i=v,t=1;i!==null;)t*=+getComputedStyle(i).zoom,i=i.parentElement;return t}var zs=o('<div class="chain_number svelte-lqu21u"> </div>'),Vs=o('<div class="duel_card_row svelte-lqu21u"> </div>'),Gs=o('<div class="appendix svelte-lqu21u"> </div>'),Xs=o('<div class="appendix_wrapper svelte-lqu21u"></div>'),Qs=o('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),Js=o("<div></div>");function Zs(v,i){lt(i,!1);let t=Ie(i,"duel",8),d=Ie(i,"position",8,"left");const p=-100,c=()=>d()==="left"?-100:100;let u=De([]),l=Promise.resolve(),U=Promise.resolve();const z=1e3,D=500,n=400,R=H=>{const O={...H};O.isKnown=H.chainBlockInfo.action.entity.controller.duelistType==="Player"||H.chainBlockInfo.action.entity.face==="FaceUp",O.chainBlockInfo.onStateChange.append(E=>{if(E==="done"||E==="failed"||E==="negated")return l=l.then(async()=>{const A=new Date().getTime()-O.chainBlockInfo.wasSpawnedAt.getTime();A<z&&await Lt(z-A),S(u,e(u).filter(se=>se.seq!==O.seq)),await Lt(D+n)}).then(),"RemoveMe";S(u,e(u))}),U=U.then(async()=>{S(u,[O,...e(u)].sort((E,A)=>ar.isSameChain(E.clock,A.clock)&&E.chainBlockInfo.action.isWithChainBlock&&A.chainBlockInfo.action.isWithChainBlock?A.clock.totalProcSeq-E.clock.totalProcSeq:E.clock.totalProcSeq-A.clock.totalProcSeq)),await Lt(300)}),l=l.then(()=>Lt(1e3))};t().chainBlockLog.onInsert.append(R),dt();var F=Js();oe(F,13,()=>e(u),H=>H.seq,(H,O)=>{var E=Qs();const A=ye(()=>{const{activator:V,action:ce,appendix:je}=e(O).chainBlockInfo;return{activator:V,action:ce,appendix:je}});var se=a(E),le=a(se);{var Be=V=>{var ce=zs(),je=a(ce);y(()=>g(je,`チェーン：${e(O).chainBlockInfo.chainNumber??""}`)),s(V,ce)};k(le,V=>{e(O).chainBlockInfo.chainNumber&&V(Be)})}var j=r(le,2),$=a(j),Q=r(j,2),_e=a(Q);{var Ce=V=>{var ce=Vs(),je=a(ce);y(()=>g(je,e(O).isKnown?e(A).action.entity.nm:"？？？")),s(V,ce)};k(_e,V=>{(e(A).action.entity.entityType==="Card"||e(A).action.entity.entityType==="Token")&&V(Ce)})}var ie=r(_e,2),ve=a(ie),Ee=a(ve),B=r(ve,2);{var I=V=>{var ce=Xs();oe(ce,5,()=>e(A).appendix,de,(je,ue)=>{var Y=Gs(),b=a(Y);y(()=>g(b,e(ue))),s(je,Y)}),s(V,ce)};k(B,V=>{e(A).appendix&&V(I)})}y((V,ce,je)=>{Ae(E,`cut_in_row ${(!e(O).chainBlockInfo.chainNumber||e(O).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Ae(se,`cut_in_item cut_in_item_${V??""} cut_in_item_${e(O).chainBlockInfo.state??""} svelte-lqu21u`),Ae(j,`duelist_name duelist_${V??""}_name svelte-lqu21u`),g($,e(A).activator.profile.name),Ae(Q,`duel_card duel_card_${V??""} ${ce??""} ${(e(O).isKnown?e(A).action.entity.origin.kind:"")??""} ${e(A).action.entity.entityType??""}  svelte-lqu21u`),g(Ee,je)},[()=>e(A).activator.seat.toLowerCase(),()=>e(O).isKnown?(e(A).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(A).action.toString()],ye),ae(3,se,()=>xr,()=>new Date().getTime()-e(O).chainBlockInfo.wasSpawnedAt.getTime()<z?{x:c(),duration:n}:{y:p,duration:n}),rr(E,()=>Ws,()=>({duration:D})),s(H,E)}),y(()=>Ae(F,`cut_in_container cut_in_container_${d()??""} svelte-lqu21u`)),s(v,F),vt()}const ei=Dr({duration:400});var ti=o('<div class="duel_desk_left v_flex svelte-1i63tk9"><!> <!> <!></div>'),ai=o('<button class="duel_field_header_message svelte-1i63tk9"> </button> <div class="duel_field_header_buttons svelte-1i63tk9"><button class="svelte-1i63tk9">サレンダー</button></div>',1),ri=o("<tr></tr>"),si=o('<table class="duel_field svelte-1i63tk9"><tbody class="svelte-1i63tk9"></tbody></table>'),ii=o('<button class="svelte-1i63tk9">OK</button>'),ni=o('<button class="svelte-1i63tk9">cancel</button>'),oi=o("<!> <!>",1),li=o('<button class="svelte-1i63tk9"> </button>'),di=o('<div style="text-align: left;"><!> <!> <!></div>'),vi=o('<div><!> <div class=" duel_desk_center v_flex svelte-1i63tk9"><div class="duel_field_header svelte-1i63tk9"><!></div> <div class="duel_field_body svelte-1i63tk9"><!></div> <div class="duel_field_footer svelte-1i63tk9"><!></div></div> <!></div> <div style="position:fixed;left:0;bottom:0"> </div> <!> <div><!></div>',1);function ci(v,i){lt(i,!1);let t=Ie(i,"duel",12),d=Ie(i,"userProfile",8),p=De(0),c=De(0),u=De([]),l=De([]),U=()=>{},z=De([]),D=De(),n=De(),R=De(()=>!1),F=De(!1);const H=_=>{U=_.resolve,S(z,_.dummyActionInfos.filter(h=>h.action.entity.entityType==="Duelist").filter(h=>h.action.entity.controller.seat==="Below")),S(D,void 0),S(n,void 0),S(l,[]),S(u,[]),S(F,!1),_.entitiesChoices&&(S(D,_.entitiesChoices),S(R,()=>{var h;return((h=_.entitiesChoices)==null?void 0:h.validator(e(u)))??!1}),S(F,_.entitiesChoices.cancelable),e(D).selectables.every(h=>h.cell.isPlayFieldCell&&h.getIndexInCell()===0||h.cell.cellType==="Hand"&&h.controller.duelistType==="Player"||h.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:_.entitiesChoices,chainBlockInfos:_.chainBlockInfos,cancelable:_.entitiesChoices.cancelable}).then(h=>{U({selectedEntities:h})})),_.cellsChoices&&(S(n,_.cellsChoices),S(R,()=>{var h;return((h=_.cellsChoices)==null?void 0:h.validator(e(l)))??!1}),S(F,_.cellsChoices.cancelable))};t().view.onWaitStart.append(H);const O=()=>{U=()=>{},S(n,void 0),S(D,void 0),S(l,[]),S(u,[]),S(R,()=>!1),S(F,!1)};t().view.onWaitEnd.append(O);let E=De(void 0),A=De("Normal");const se=({card:_,mode:h})=>{S(E,_),S(A,h??(e(E)===_||e(A)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(se);const le=()=>{t(t())};t().view.onDuelUpdate.append(le),t().log.onUpdate.append(le);const Be=()=>{e(D)&&e(D).validator(e(u))&&U({selectedEntities:e(u)}),e(n)&&e(n).validator(e(l))&&U({selectedCells:e(l)})},j=()=>{U({})},$=_=>{U({actionInfo:_})},Q=()=>{U({surrender:!0})};t().main();const _e=()=>e(p)<=1400?"compact":"wide";dt();var Ce=vi(),ie=N(Ce),ve=a(ie);{var Ee=_=>{var h=ti(),P=a(h);La(P,{get duelist(){return t().duelists.Above}});var q=r(P,2);Ns(q,{get entity(){return e(E)},get mode(){return e(A)}});var xe=r(q,2);La(xe,{get duelist(){return t().duelists.Below}}),s(_,h)};k(ve,_=>{_e()==="wide"&&_(Ee)})}var B=r(ve,2),I=a(B),V=a(I);{var ce=_=>{var h=ai(),P=N(h),q=a(P),xe=r(P,2),be=a(xe);y(()=>g(q,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),ke("click",P,()=>{t(t().view.infoBoardState="Log",!0)}),ke("click",be,Q),s(_,h)};k(V,_=>{t().isEnded||_(ce)})}var je=r(I,2),ue=a(je);{var Y=_=>{var h=si(),P=a(h);oe(P,5,()=>t().field.cells,de,(q,xe,be)=>{var fe=ri();Ae(fe,`${`duel_desk_row_${be}`??""} svelte-1i63tk9`),oe(fe,5,()=>e(xe),de,(X,J,W)=>{Wr(X,{get view(){return t().view},row:be,column:W,get selectedEntities(){return e(u)},set selectedEntities(we){S(u,we)},get selectedCells(){return e(l)},set selectedCells(we){S(l,we)},$$legacy:!0})}),s(q,fe)}),s(_,h)};k(ue,_=>{t().clock.turn>0&&_(Y)})}var b=r(je,2),G=a(b);{var te=_=>{var h=oi(),P=N(h);{var q=fe=>{var X=ii();y(J=>X.disabled=J,[()=>!e(R)()],ye),ke("click",X,Be),s(fe,X)};k(P,fe=>{((e(D)&&e(D).qty)??(e(n)&&e(n).qty)??9999)>1&&fe(q)})}var xe=r(P,2);{var be=fe=>{var X=ni();ke("click",X,j),s(fe,X)};k(xe,fe=>{e(F)&&fe(be)})}s(_,h)},ne=_=>{var h=Se(),P=N(h);oe(P,1,()=>e(z),de,(q,xe)=>{var be=li(),fe=a(be);y(()=>g(fe,e(xe).action.title)),ke("click",be,()=>$(e(xe))),s(q,be)}),s(_,h)};k(G,_=>{e(D)&&e(D).selectables.length||e(n)&&e(n).selectables?_(te):_(ne,!1)})}var C=r(B,2);{var M=_=>{var h=di(),P=a(h);as(P,{get log(){return t().log}});var q=r(P,2);Hs(q,{get cell(){return t().view.infoBoardCell}});var xe=r(q,2);Rs(xe,{get userProfile(){return d()},get viewController(){return t().view}}),y(be=>Ae(h,`duel_desk_right duel_desk_right_${be??""}  svelte-1i63tk9`),[()=>t().view.infoBoardState.toLowerCase()],ye),ae(3,h,()=>me,()=>({duration:e(p)>1400?0:200,axis:"x"})),s(_,h)};k(C,_=>{(e(p)>1400||t().view.infoBoardState!=="Default")&&_(M)})}var L=r(ie,2),ee=a(L),re=r(L,2);sr(re,{get modalController(){return t().view.modalController}});var he=r(re,2),f=a(he);const x=ye(()=>_e()==="wide"?"right":"left");Zs(f,{get duel(){return t()},get position(){return e(x)}}),y((_,h)=>{Ae(ie,`flex duel_desk ${_??""}_mode svelte-1i63tk9`),g(ee,h),Ae(he,`cutin ${_??""}_mode svelte-1i63tk9`)},[_e,()=>t().clock.toFullString()],ye),Xt("innerWidth",_=>S(p,_)),Xt("innerHeight",_=>S(c,_)),s(v,Ce),vt()}var _i=o('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),ui=o('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),fi=o("<div></div>"),pi=o("<!> <!> <!> <!> <!>",1),yi=o('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),gi=o('<li class="deck_editor_item svelte-niobyr"><div role="listitem"><div class="svelte-niobyr"><div class="svelte-niobyr"> </div> <div style="display:flex" class="svelte-niobyr"><div class="svelte-niobyr"><!> <!> <!></div> <div style="flex-grow: 1; width:0.1rem" class="svelte-niobyr"></div> <div class="svelte-niobyr"><!></div></div></div></div> <button class="button_style_reset svelte-niobyr">+</button> <button class="button_style_reset svelte-niobyr">-</button></li>'),mi=o('<div class="deck_editor_card_kind svelte-niobyr"><div class="deck_editor_card_kind_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <ul class="svelte-niobyr"></ul></div>'),hi=o('<div class="deck_editor_deck_type svelte-niobyr"><div class="deck_editor_deck_type_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <!></div>'),bi=o('<div class="svelte-niobyr">読み込み中...</div>'),wi=o('<div class="deck_editor_card_list svelte-niobyr"><!></div>');function Na(v,i){lt(i,!1);let t=Ie(i,"allCardInfos",8),d=Ie(i,"deckCardInfos",12),p=Ie(i,"mode",8),c=Ie(i,"onAttention",8),u=Ie(i,"searchCondition",8,void 0);const l={Deck:["Monster","Spell","Trap"],ExtraDeck:["Monster"]},U={Deck:{Monster:[],Spell:[],Trap:[]},ExtraDeck:{Monster:[],Spell:[],Trap:[]}},z=j=>{var $;return($=j.monsterCategories)!=null&&$.union(Qt).length?"ExtraDeck":"Deck"},D=j=>{Object.values(U).forEach($=>Object.values($).forEach(Q=>Q.reset())),j.filter($=>$.kind!=="XyzMaterial").forEach($=>{var _e;if($.kind==="XyzMaterial")return;const Q=(_e=$.monsterCategories)!=null&&_e.union(Qt).length?"ExtraDeck":"Deck";U[Q][$.kind].push($)}),Object.values(U).forEach($=>Object.values($).forEach(Q=>Q.sort(oa)))},n=p()==="List"?new Promise(j=>{D(t()),j()}):Promise.resolve(),R=()=>(p()==="Deck"&&(D(d()),S(E,d().length)),U),F=(j,$,Q)=>{d(d().filter(_e=>z(_e)!==$||_e.kind!==Q&&Q))},H=(j,$)=>{try{if(j.ctrlKey){d().push($);return}const Q=d().filter(Ce=>Ce.name===$.name).length;if(Q>2)return;const _e=j.shiftKey?3-Q:1;if(_e<1)return;d().push(...Array(_e).fill($))}finally{d().sort(oa),d(d())}},O=(j,$)=>{let Q=0;d(d().filter(_e=>_e.name!==$.name?!0:(Q++,!j.shiftKey&&Q>1))),d().sort(oa)};let E=De(100);const A=()=>{S(E,e(E)+10),!(e(E)>499)&&(e(E)>t().length+d().length||Lt(100).then(A))},se=(j,$,Q,_e)=>{if($===0&&_e==="Monster"&&(S(E,100),Lt(100).then(A)),!u())return!0;if(!u().cardKinds.includes(j.kind)||u().name.trim().length&&[j.name,...j.nameTags??[],...j.textTags??[]].every(ie=>!ie.includes(u().name))||!j.isImplemented&&!u().others.includes("implemented")||j.isForTest&&!u().others.includes("test")||j.isOldVersion&&!u().others.includes("oldVersion"))return!1;if(j.kind==="Monster"){if(j.attributes&&!u().monsterAttributes.union(j.attributes).length||j.types&&!u().monsterTypes.union(j.types).length)return!1;const Ce=j.level??j.rank??j.link;return Ct(u().starLowerBound)&&(Ce??0)<u().starLowerBound||Ct(u().starUpperBound)&&(Ce??0)>u().starUpperBound||Ct(u().atkLowerBound)&&(j.attack??0)<u().atkLowerBound||Ct(u().atkUpperBound)&&(j.attack??0)>u().atkUpperBound||Ct(u().defLowerBound)&&(j.defense??0)<u().defLowerBound||Ct(u().defUpperBound)&&(j.defense??0)>u().defUpperBound||Ct(u().atkPlusDef)&&(!Ct(j.attack)||!Ct(j.defense)||j.attack+j.defense!==u().atkPlusDef)||!j.monsterCategories?!1:j.monsterCategories.union(u().monsterCategories).length}if(j.kind==="Spell")return j.spellCategory&&u().spellCategories.includes(j.spellCategory);if(j.kind==="Trap")return j.trapCategory&&u().trapCategories.includes(j.trapCategory)};dt();var le=wi(),Be=a(le);ot(Be,()=>n,j=>{var $=bi();s(j,$)},j=>{var $=Se();const Q=ye(R);var _e=N($);oe(_e,1,()=>nr,de,(Ce,ie)=>{var ve=hi();const Ee=ye(()=>Object.values(e(Q)[e(ie)]).flatMap(Y=>Y));var B=a(ve),I=a(B),V=a(I),ce=r(I,2);{var je=Y=>{var b=_i(),G=a(b);ke("click",G,te=>F(te,e(ie),void 0)),s(Y,b)};k(ce,Y=>{p()==="Deck"&&e(Ee).some(se)&&Y(je)})}var ue=r(B,2);oe(ue,1,()=>ca(e(Q)[e(ie)]).filter(Y=>l[e(ie)].includes(Y)),de,(Y,b)=>{var G=mi();const te=ye(()=>e(Q)[e(ie)][e(b)].filter((...he)=>se(...he,e(b))));var ne=a(G),C=a(ne),M=a(C),L=r(C,2);{var ee=he=>{var f=ui(),x=a(f);ke("click",x,_=>F(_,e(ie),e(b))),s(he,f)};k(L,he=>{p()==="Deck"&&e(te).length&&he(ee)})}var re=r(ne,2);oe(re,5,()=>e(te),de,(he,f,x)=>{var _=Se(),h=N(_);{var P=q=>{var xe=gi(),be=a(xe),fe=a(be),X=a(fe),J=a(X),W=r(X,2),we=a(W),Le=a(we);{var Fe=K=>{var pe=pi(),Te=N(pe);{var ze=Ke=>{var Oe=at();y(()=>g(Oe,`★${e(f).level??""}`)),s(Ke,Oe)};k(Te,Ke=>{e(f).level&&Ke(ze)})}var Ue=r(Te,2);{var Ve=Ke=>{var Oe=at();y(()=>g(Oe,`☆${e(f).rank??""}`)),s(Ke,Oe)};k(Ue,Ke=>{e(f).rank&&Ke(Ve)})}var ct=r(Ue,2);oe(ct,1,()=>e(f).attributes??[],de,(Ke,Oe)=>{var Ge=fi();y(()=>Ae(Ge,`monster_attr ${e(Oe)??""} svelte-niobyr`)),s(Ke,Ge)});var _t=r(ct,2);oe(_t,1,()=>e(f).types??[],de,(Ke,Oe)=>{var Ge=at();y(()=>g(Ge,ea[e(Oe)])),s(Ke,Ge)});var wt=r(_t,2);oe(wt,1,()=>e(f).monsterCategories??[],de,(Ke,Oe)=>{var Ge=at();y(()=>g(Ge,ta[e(Oe)])),s(Ke,Ge)}),s(K,pe)};k(Le,K=>{e(f).kind==="Monster"&&K(Fe)})}var Ne=r(Le,2);{var Ye=K=>{var pe=at();y(()=>g(pe,`${aa[e(f).spellCategory]??""}魔法`)),s(K,pe)};k(Ne,K=>{e(f).spellCategory&&K(Ye)})}var We=r(Ne,2);{var w=K=>{var pe=at();y(()=>g(pe,`${ra[e(f).trapCategory]??""}罠`)),s(K,pe)};k(We,K=>{e(f).trapCategory&&K(w)})}var m=r(we,4),T=a(m);{var Z=K=>{var pe=yi(),Te=N(pe),ze=a(Te),Ue=r(Te,2),Ve=a(Ue);y(()=>{g(ze,e(f).attack??"?"),g(Ve,e(f).defense??"?")}),s(K,pe)};k(T,K=>{e(f).kind==="Monster"&&K(Z)})}var ge=r(be,2),Me=r(ge,2);y(K=>{Ae(be,`${K??""} svelte-niobyr`),g(J,e(f).name),ge.disabled=!e(f).isImplemented,yt(ge,"title",e(f).isImplemented?"※shiftキー同時押しで一括投入":""),Me.disabled=!e(f).isImplemented,yt(Me,"title",e(f).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>{var K,pe;return`deck_editor_card duel_card ${e(f).kind} ${(pe=(K=e(f))==null?void 0:K.monsterCategories)==null?void 0:pe.join(" ")} ${e(f).isImplemented?"is_implemented":"is_not_implemented"}`}],ye),ke("mouseenter",be,()=>c()(e(f))),ke("click",ge,K=>H(K,e(f))),ke("click",Me,K=>O(K,e(f))),s(q,xe)};k(h,q=>{x<e(E)&&q(P)})}s(he,_)}),y(()=>g(M,`${Fa[e(b)]??""}（${e(te).length??""} / ${e(Q)[e(ie)][e(b)].length??""}枚）`)),s(Y,G)}),y(Y=>g(V,`${ir[e(ie)]??""}（${Y??""} / ${e(Ee).length??""}枚）`),[()=>e(Ee).filter(se).length],ye),s(Ce,ve)}),s(j,$)}),s(v,le),vt()}var ki=o('<div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>'),xi=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),Di=o('<div></div> <div class="svelte-rccxcp"> </div>',1),Ci=o("<div> </div>"),ji=o('<span class="svelte-rccxcp">/</span> <div class="monster_defense svelte-rccxcp"> </div>',1),$i=o("<div> </div>"),Si=o('<div class="duel_card_info_row svelte-rccxcp"><!> <!> <div style="flex-grow: 1;" class="svelte-rccxcp"></div> <div class="monster_attack svelte-rccxcp"> </div> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),Mi=o('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Ti=o('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Bi=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※エラッタ前カードです</div></div>'),Ei=o('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),Ai=o('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),Yi=o('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <!></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!> <!></div></div>');function Ui(v,i){lt(i,!1);let t=Ie(i,"cardInfo",8,void 0);dt();var d=Se(),p=N(d);{var c=u=>{var l=Yi(),U=a(l),z=a(U),D=a(z),n=a(D),R=r(z,2);{var F=B=>{var I=ki(),V=a(I),ce=a(V),je=r(V,2),ue=a(je);y((Y,b)=>{g(ce,Y),g(ue,b)},[()=>"★".repeat(t().level||0),()=>"☆".repeat(t().rank||0)],ye),s(B,I)};k(R,B=>{t().kind==="Monster"&&B(F)})}var H=r(U,2),O=a(H);{var E=B=>{var I=xi(),V=N(I),ce=a(V),je=a(ce),ue=a(je),Y=r(V,2),b=a(Y),G=a(b),te=r(b,2),ne=a(te);y(()=>{g(ue,t().pendulumDescription),g(G,`◀ ${t().pendulumScaleL??""}`),g(ne,`${t().pendulumScaleR??""} ▶`)}),s(B,I)};k(O,B=>{var I;(I=t().monsterCategories)!=null&&I.includes("Pendulum")&&B(E)})}var A=r(O,2);{var se=B=>{var I=Si(),V=N(I),ce=a(V);{var je=M=>{var L=Di(),ee=N(L),re=r(ee,2),he=a(re);y(()=>{Ae(ee,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),g(he,`${_a[t().attributes[0]]??""}属性`)}),s(M,L)};k(ce,M=>{t().attributes&&M(je)})}var ue=r(ce,2);{var Y=M=>{var L=Ci(),ee=a(L);y(()=>{Ae(L,`monster_cat ${t().types[0]??""} svelte-rccxcp`),g(ee,`${ea[t().types[0]]??""}${ua[t().types[0]]??""}族`)}),s(M,L)};k(ue,M=>{t().types&&M(Y)})}var b=r(ue,4),G=a(b),te=r(b,2);{var ne=M=>{var L=ji(),ee=r(N(L),2),re=a(ee);y(()=>g(re,t().defense??"?")),s(M,L)};k(te,M=>{var L;(L=t().monsterCategories)!=null&&L.includes("Link")||M(ne)})}var C=r(V,2);oe(C,5,()=>t().monsterCategories??[],de,(M,L)=>{var ee=$i(),re=a(ee);y(()=>{Ae(ee,`monster_cat ${e(L)??""} svelte-rccxcp`),g(re,`${ta[e(L)]??""}${fa[e(L)]??""}`)}),s(M,ee)}),y(()=>g(G,t().attack??"?")),s(B,I)},le=B=>{var I=Se(),V=N(I);{var ce=ue=>{var Y=Mi(),b=r(a(Y),2),G=a(b);y(()=>g(G,`${aa[t().spellCategory]??""}魔法`)),s(ue,Y)},je=ue=>{var Y=Se(),b=N(Y);{var G=te=>{var ne=Ti(),C=r(a(ne),2),M=a(C);y(()=>g(M,`${ra[t().trapCategory]??""}罠`)),s(te,ne)};k(b,te=>{t().kind==="Trap"&&t().trapCategory&&te(G)},!0)}s(ue,Y)};k(V,ue=>{t().kind==="Spell"&&t().spellCategory?ue(ce):ue(je,!1)},!0)}s(B,I)};k(A,B=>{t().kind==="Monster"?B(se):B(le,!1)})}var Be=r(A,2),j=a(Be),$=a(j),Q=a($),_e=r(Be,2);{var Ce=B=>{var I=Bi();s(B,I)};k(_e,B=>{t().isOldVersion&&B(Ce)})}var ie=r(_e,2);{var ve=B=>{var I=Ei();s(B,I)},Ee=B=>{var I=Ai(),V=a(I),ce=r(V,2),je=a(ce);y(ue=>{yt(V,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),yt(ce,"href",ue),g(je,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>or(t())],ye),s(B,I)};k(ie,B=>{t().isForTest?B(ve):B(Ee,!1)})}y(B=>{Ae(l,`duel_card duel_card_info ${t().kind??""} ${B??""} svelte-rccxcp`),g(n,t().name),g(Q,t().description)},[()=>{var B;return(B=t().monsterCategories)==null?void 0:B.join(" ")}],ye),s(u,l)};k(p,u=>{t()&&u(c)})}s(v,d),vt()}const Li={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class Ni{constructor(){et(this,"DefaultSeparator1","/");et(this,"DefaultSeparator2"," ");et(this,"DefaultSeparator3",":");et(this,"createDate",i=>{if(!i)return;const t=new Date(i);if(!isNaN(t.getTime()))return t});et(this,"createDateOr",(i,t)=>this.createDate(i)||t||new Date);et(this,"truncateDate",i=>{const t=i||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});et(this,"addDate",(i,t)=>{const d=this.createDateOr(i);return d.setDate(d.getDate()+t),d});et(this,"addMonth",(i,t)=>{const d=this.createDateOr(i);return d.setMonth(d.getMonth()+t),d});et(this,"addYear",(i,t)=>{const d=this.createDateOr(i);return d.setFullYear(d.getFullYear()+t),d});et(this,"getDayOfWeek",(i,t="dddd")=>{const d=this.createDate(i);return d?Li[d.getDay()][t]:""});et(this,"formatToYYYYMMDD",(i,t=this.DefaultSeparator1)=>{const d=this.createDate(i);if(!d)return"";const p=d.getFullYear().toString(),c=("0"+(d.getMonth()+1)).slice(-2),u=("0"+d.getDate()).slice(-2);return p+t+c+t+u});et(this,"formatToYYYYMM",(i,t=this.DefaultSeparator1)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const p=d.getFullYear().toString(),c=("0"+(d.getMonth()+1)).slice(-2);return p+t+c});et(this,"formatToHHMMSS",(i,t=this.DefaultSeparator3)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const p=d.getHours(),c=d.getMinutes(),u=d.getSeconds();return("0"+p).slice(-2)+t+("0"+c).slice(-2)+t+("0"+u).slice(-2)});et(this,"formatToHHMM",(i,t=this.DefaultSeparator3)=>{const d=this.createDate(i);if(!d)return"";t||(t="");const p=("0"+d.getHours()).slice(-2),c=("0"+d.getMinutes()).slice(-2);return p+t+c});et(this,"formatToYYYYMMDD_HHMM",(i,t=this.DefaultSeparator1,d=this.DefaultSeparator2,p=this.DefaultSeparator3)=>{const c=this.createDate(i);return c?this.formatToYYYYMMDD(c,t)+d+this.formatToHHMM(c,p):""});et(this,"formatToYYYYMMDD_HHMMSS",(i,t=this.DefaultSeparator1,d=this.DefaultSeparator2,p=this.DefaultSeparator3)=>{const c=this.createDate(i);return c?this.formatToYYYYMMDD(c,t)+d+this.formatToHHMMSS(c,p):""})}}const gt=new Ni;Date.prototype.truncateDate=function(){return gt.truncateDate(this)};Date.prototype.getCloneOr=function(v){return gt.createDateOr(this,v)};Date.prototype.addDate=function(v){return gt.addDate(this,v)};Date.prototype.addMonth=function(v){return gt.addDate(this,v)};Date.prototype.addYear=function(v){return gt.addDate(this,v)};Date.prototype.getDayOfWeek=function(v="dddd"){return gt.getDayOfWeek(this,v)};Date.prototype.formatToYYYYMM=function(v){return gt.formatToYYYYMM(this,v)};Date.prototype.formatToYYYYMMDD=function(v){return gt.formatToYYYYMMDD(this,v)};Date.prototype.formatToYYYYMMDD_HHMM=function(v,i,t){return gt.formatToYYYYMMDD_HHMM(this,v,i,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(v,i,t){return gt.formatToYYYYMMDD_HHMMSS(this,v,i,t)};Date.prototype.formatToHHMM=function(v){return gt.formatToHHMM(this,v)};Date.prototype.formatToHHMMSS=function(v){return gt.formatToHHMMSS(this,v)};var Pi=o('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),qi=o('<ul class="deck_info_list svelte-2wdgc8"></ul>'),Fi=o('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),Hi=o('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),Ii=o('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),Oi=o('<button class="svelte-2wdgc8">Cancel</button>'),Ri=o('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function Wi(v,i){lt(i,!1);let t=Ie(i,"eventHolder",8),d=Ie(i,"args",8),p=Ie(i,"resolve",8),c=De(Promise.resolve([])),u=De();const l=()=>{S(u,new DataTransfer().files),S(c,Promise.resolve([]))},U=async F=>{F.preventDefault(),console.log("hoge",F)},z=async F=>{F.preventDefault(),F.dataTransfer&&n(F.dataTransfer.files)},D=()=>{n(e(u))},n=async F=>{if(!F.length)return;const H=[],O=[];for(const E of F)try{O.push(...await bt.createfromJson(E))}catch(A){A instanceof Error&&H.push(A.message)}if(H.length){console.log(...H);return}S(c,e(c).then(()=>O))},R=l;dt(),lr(v,{get eventHolder(){return t()},get args(){return d()},$$slots:{body:(F,H)=>{var O=Hi(),E=a(O);ot(E,()=>Rt,null,(A,se)=>{var le=Se(),Be=N(le);ot(Be,()=>e(c),null,(j,$)=>{var Q=Se(),_e=N(Q);{var Ce=ve=>{var Ee=qi();oe(Ee,5,()=>e($),de,(B,I)=>{var V=Pi(),ce=a(V),je=a(ce),ue=r(ce,2),Y=a(ue),b=r(ue,2),G=a(b);y((te,ne,C)=>{g(je,e(I).name),g(Y,`${te??""}
                  /
                  ${ne??""}`),g(G,`最終使用日時 ： ${C??""}`)},[()=>e(I).cardNames.filter(te=>{var ne,C;return!((C=(ne=e(se).getCardInfo(te))==null?void 0:ne.monsterCategories)!=null&&C.union(Qt).length)}).length,()=>e(I).cardNames.filter(te=>{var ne,C;return(C=(ne=e(se).getCardInfo(te))==null?void 0:ne.monsterCategories)==null?void 0:C.union(Qt).length}).length,()=>e(I).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],ye),s(B,V)}),s(ve,Ee)},ie=ve=>{var Ee=Fi(),B=r(a(Ee),2),I=a(B);dr(I,()=>e(u),V=>S(u,V)),ke("change",I,D),ke("cancel",I,R),ke("drop",Ee,z),ke("dragover",Ee,U),s(ve,Ee)};k(_e,ve=>{e($).length?ve(Ce):ve(ie,!1)})}s(j,Q)}),s(A,le)}),s(F,O)},footer:(F,H)=>{var O=Ri(),E=a(O);ot(E,()=>e(c),null,(A,se)=>{var le=Se(),Be=N(le);{var j=Q=>{var _e=Ii(),Ce=N(_e),ie=r(Ce,2),ve=r(ie,2);y(()=>{Ce.disabled=e(se).length===0,ie.disabled=e(se).length===0}),ke("click",Ce,()=>p()({deckInfos:e(se),replaceAll:!1})),ke("click",ie,()=>p()({deckInfos:e(se),replaceAll:!0})),ke("click",ve,R),s(Q,_e)},$=Q=>{var _e=Se(),Ce=N(_e);{var ie=ve=>{var Ee=Oi();ke("click",Ee,()=>p()(void 0)),s(ve,Ee)};k(Ce,ve=>{d().cancelable&&ve(ie)},!0)}s(Q,_e)};k(Be,Q=>{e(se).length?Q(j):Q($,!1)})}s(A,le)}),s(F,O)}}}),vt()}const Zt=class Zt extends cr{constructor(i,t){super(i,...Object.values(t))}};et(Zt,"createModalController",i=>{const t={deckUploader:new _r({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new Zt(i,t),t)});let va=Zt;function Ki(v,i){lt(i,!1);let t=Ie(i,"modalController",8);dt(),vr(v,{get modalController(){return t()},children:(d,p)=>{var c=Se(),u=N(c);{var l=U=>{Wi(U,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};k(u,U=>{t().deckUploader.state==="Shown"&&U(l)})}s(d,c)},$$slots:{default:!0}}),vt()}var zi=o('<label class="svelte-9dd5wj"><input type="checkbox" class="search_condition svelte-9dd5wj"> </label>'),Vi=o('<label class="svelte-9dd5wj"><input type="checkbox" class="search_condition svelte-9dd5wj"> </label>'),Gi=o('<label class="svelte-9dd5wj"><input type="checkbox" class="search_condition svelte-9dd5wj"> <div style="display: inline-block;"></div> </label>'),Xi=o('<label class="svelte-9dd5wj"><input type="checkbox" class="search_condition svelte-9dd5wj"> </label>'),Qi=o('<div class="deck_editor_search_box_row svelte-9dd5wj"><div class="svelte-9dd5wj"><button class="search_condition_title black_button svelte-9dd5wj">モンスター</button></div> <div class="svelte-9dd5wj"></div></div> <div class="deck_editor_search_box_row monster_attributes svelte-9dd5wj"><div class="svelte-9dd5wj"><button class="search_condition_title black_button svelte-9dd5wj">属性</button></div> <div class="svelte-9dd5wj"></div></div> <div class="deck_editor_search_box_row svelte-9dd5wj"><div class="svelte-9dd5wj"><button class="search_condition_title black_button svelte-9dd5wj">種族</button></div> <div class="svelte-9dd5wj"></div></div> <div class="deck_editor_search_box_row svelte-9dd5wj"><div class="svelte-9dd5wj"><button class="search_condition_title black_button svelte-9dd5wj">星攻守</button></div> <div class="svelte-9dd5wj"><div><span>星</span> <input type="number" min="0" max="13" style="width: 2.5rem;" class="svelte-9dd5wj"> <span>～</span> <input type="number" min="0" max="13" style="width: 2.5rem;" class="svelte-9dd5wj"></div> <div><span>攻</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;" class="svelte-9dd5wj"> <span>～</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;" class="svelte-9dd5wj"></div> <div><span>守</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;" class="svelte-9dd5wj"> <span>～</span> <input type="number" min="0" max="5000" step="100" style="width: 3.5rem;" class="svelte-9dd5wj"></div> <div><span>攻+守</span> <input type="number" min="0" max="10000" step="100" style="width: 4rem;" class="svelte-9dd5wj"></div></div></div>',1),Ji=o('<label class="svelte-9dd5wj"><input type="checkbox" class="search_condition svelte-9dd5wj"> </label>'),Zi=o('<div class="deck_editor_search_box_row svelte-9dd5wj"><div class="svelte-9dd5wj"><button class="search_condition_title black_button svelte-9dd5wj">魔法</button></div> <div class="svelte-9dd5wj"></div></div>'),en=o('<label class="svelte-9dd5wj"><input type="checkbox" class="search_condition svelte-9dd5wj"> </label>'),tn=o('<div class="deck_editor_search_box_row svelte-9dd5wj"><div class="svelte-9dd5wj"><button class="search_condition_title black_button svelte-9dd5wj">罠</button></div> <div class="svelte-9dd5wj"></div></div>'),an=o('<label class="svelte-9dd5wj"><input type="checkbox" class="search_condition svelte-9dd5wj"> </label>'),rn=o("<div>カード情報読込中</div>"),sn=o("<option> </option>"),nn=o('<div class="svelte-9dd5wj"><a class="white_button svelte-9dd5wj" download="SVS_DeckInfos.json">ダウンロード</a></div>'),on=o('<div class="svelte-9dd5wj"></div>'),ln=o('<div class="svelte-9dd5wj"><a class="white_button svelte-9dd5wj" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),dn=o('<div class="svelte-9dd5wj"></div>'),vn=o('<div class="deck_editor_body_right_header svelte-9dd5wj"><div class="deck_editor_body_right_header_row svelte-9dd5wj"><div class="svelte-9dd5wj">編集対象</div> <div class="svelte-9dd5wj"><select style="width:100%" class="svelte-9dd5wj"></select></div></div> <div class="deck_editor_body_right_header_row svelte-9dd5wj"><div class="svelte-9dd5wj">新規名称</div> <div class="svelte-9dd5wj"><input type="text" style="width:100%" class="svelte-9dd5wj"></div></div> <div class="deck_editor_body_right_header_row svelte-9dd5wj"></div> <div class="deck_editor_body_right_header_row svelte-9dd5wj"><div class="svelte-9dd5wj">基本操作</div> <div class="svelte-9dd5wj"><button class="white_button svelte-9dd5wj">デッキを保存</button></div> <div class="svelte-9dd5wj"><button class="white_button svelte-9dd5wj">デッキを複製</button></div> <div class="svelte-9dd5wj"><button class="white_button svelte-9dd5wj" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-9dd5wj"><div class="svelte-9dd5wj">DL/UL</div> <!> <!> <div class="svelte-9dd5wj"><button class="white_button svelte-9dd5wj">アップロード</button></div></div></div> <!>',1),cn=o("<div>デッキ情報読込中</div>"),_n=o('<div class="deck_editor svelte-9dd5wj"><div class="deck_editor_header"></div> <div class="deck_editor_body svelte-9dd5wj"><div class="deck_editor_body_left svelte-9dd5wj"><div role="contentinfo"><div class="deck_editor_search_box_header svelte-9dd5wj"><div>検索条件</div> <div><button class="white_button svelte-9dd5wj">条件クリア</button></div></div> <div class="deck_editor_search_box_row svelte-9dd5wj"><div class="svelte-9dd5wj"><button class="search_condition_title black_button svelte-9dd5wj">名称</button></div> <div class="svelte-9dd5wj"><input type="text" style="width:100%" placeholder="※ルビには対応していません" class="svelte-9dd5wj"></div></div> <div class="deck_editor_search_box_row card_kind svelte-9dd5wj"><div class="svelte-9dd5wj"><button class="search_condition_title black_button svelte-9dd5wj">種類</button></div> <div class="svelte-9dd5wj"></div></div> <!> <!> <!> <div class="deck_editor_search_box_row svelte-9dd5wj"><div class="svelte-9dd5wj"><button class="search_condition_title black_button svelte-9dd5wj">その他</button></div> <div class="svelte-9dd5wj"></div></div></div> <!></div> <div class="deck_editor_body_center svelte-9dd5wj"><!></div> <div class="deck_editor_body_right svelte-9dd5wj"><!></div></div> <div class="footer svelte-9dd5wj"></div></div> <!>',1);function un(v,i){lt(i,!1);const t=[],d=[],p=[],c=[],u=[],l=[],U=[],z=va.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),D={name:"",cardKinds:Ma.filter(w=>w!=="XyzMaterial"),monsterCategories:[...Ta],monsterAttributes:[...Sa],monsterTypes:[...$a],spellCategories:ja.filter(w=>w!=="PendulumScale"),trapCategories:[...Ca],starLowerBound:0,starUpperBound:13,atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:["test","oldVersion","implemented"]},n=De(structuredClone(D));$e(n,e(n).others=["oldVersion"]);let R=De("SearchCondition");const F=async()=>{$e(n,e(n).name=""),$e(n,e(n).cardKinds=[]),$e(n,e(n).monsterCategories=[]),$e(n,e(n).monsterAttributes=[]),$e(n,e(n).monsterTypes=[]),$e(n,e(n).spellCategories=[]),$e(n,e(n).trapCategories=[]),$e(n,e(n).others=[]),$e(n,e(n).atkLowerBound=0),$e(n,e(n).atkUpperBound=5e3),$e(n,e(n).defLowerBound=0),$e(n,e(n).defUpperBound=5e3),$e(n,e(n).atkPlusDef=void 0)},H=w=>{w.forEach(m=>{Array.isArray(e(n)[m])&&Array.isArray(D[m])?$e(n,e(n)[m]=e(n)[m].length?[]:[...D[m]]):$e(n,e(n)[m]=D[m])})},O=(w,m,T)=>{Array.isArray(e(n)[m])&&Array.isArray(D[m])&&$e(n,e(n)[m]=[T])},E=async()=>{const m=(await e(le)).find(Z=>Z.id===e(se));if(!m)return;const T=await Rt;S($,{...m,cardInfos:m.cardNames.map(Z=>{const ge=T.getCardInfo(Z);return ge===void 0&&console.error(Z),ge}).filter(Z=>Z!==void 0)})},A=()=>bt.getAllDeckInfo().then(w=>(S(se,(w.find(m=>m.lastUsedAt.getTime()===Math.max(...w.map(T=>T.lastUsedAt.getTime())))??w[0]).id),w));let se=De(-1),le=De(A()),Be=De(e(le).then(w=>bt.convertToObjectURL(w)));e(le).then(E);const j=()=>{S(le,A()),S(Be,e(le).then(w=>bt.convertToObjectURL(w))),E()};let $=De({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),Q=De(void 0),_e=0;const Ce=w=>{S(R,"CardDetail"),w.cardId!==void 0&&!w.description&&!w.pendulumDescription&&(_e=w.cardId,qa([w.cardId]).then(()=>{w.cardId===_e&&S(Q,w)})),S(Q,w)},ie=async()=>{const m=(await e(le)).find(T=>T.id===e(se));if(!m)throw new Error("illegal state");return m},ve=async()=>{const w=await ie();await w.saveDeckInfo({...w,name:e($).name,cardNames:e($).cardInfos.map(m=>m.name),lastUsedAt:new Date}),j()},Ee=async()=>{(await bt.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,e($).cardInfos.map(m=>m.name))).saveDeckInfo(),j()},B=async w=>{const m=await ie();!w.shiftKey&&!confirm(`デッキ【${m.name}】を削除します。
よろしいですか？`)||(await m.delete(),j())},I=async()=>{const w=await z.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!w)return;const m=[];if(w.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;m.push(...(await e(le)).map(T=>T.id))}await Promise.all(w.deckInfos.map(T=>bt.createNewDeck(T.name,T.description,T.cardNames,T.lastUsedAt))),m.length&&await Promise.all(m.map(bt.remove)),j()};dt();var V=_n(),ce=N(V),je=r(a(ce),2),ue=a(je),Y=a(ue),b=a(Y),G=r(a(b),2),te=a(G),ne=r(b,2),C=a(ne),M=a(C),L=r(C,2),ee=a(L),re=r(ne,2),he=a(re),f=a(he),x=r(he,2);oe(x,5,()=>Ma.filter(w=>w!=="XyzMaterial"),de,(w,m)=>{var T=zi(),Z=a(T),ge,Me=r(Z);y(()=>{ge!==(ge=e(m))&&(Z.value=(Z.__value=e(m))==null?"":e(m)),g(Me,` ${Fa[e(m)]??""}`)}),At(t,[],Z,()=>(e(m),e(n).cardKinds),K=>$e(n,e(n).cardKinds=K)),s(w,T)});var _=r(re,2);{var h=w=>{var m=Qi(),T=N(m),Z=a(T),ge=a(Z),Me=r(Z,2);oe(Me,5,()=>Ta,de,(Pe,qe)=>{var Je=Vi(),Xe=a(Je),ut,mt=r(Xe);y(()=>{ut!==(ut=e(qe))&&(Xe.value=(Xe.__value=e(qe))==null?"":e(qe)),g(mt,` ${ta[e(qe)]??""}${fa[e(qe)]??""}`)}),At(d,[],Xe,()=>(e(qe),e(n).monsterCategories),ft=>$e(n,e(n).monsterCategories=ft)),s(Pe,Je)});var K=r(T,2),pe=a(K),Te=a(pe),ze=r(pe,2);oe(ze,5,()=>Sa,de,(Pe,qe)=>{var Je=Gi(),Xe=a(Je),ut,mt=r(Xe,2),ft=r(mt);y(()=>{ut!==(ut=e(qe))&&(Xe.value=(Xe.__value=e(qe))==null?"":e(qe)),Ae(mt,`monster_attr ${e(qe)??""} svelte-9dd5wj`),g(ft,` ${_a[e(qe)]??""}`)}),At(p,[],Xe,()=>(e(qe),e(n).monsterAttributes),Tt=>$e(n,e(n).monsterAttributes=Tt)),s(Pe,Je)});var Ue=r(K,2),Ve=a(Ue),ct=a(Ve),_t=r(Ve,2);oe(_t,5,()=>$a,de,(Pe,qe)=>{var Je=Xi(),Xe=a(Je),ut,mt=r(Xe);y(()=>{ut!==(ut=e(qe))&&(Xe.value=(Xe.__value=e(qe))==null?"":e(qe)),g(mt,` ${ea[e(qe)]??""}
                  ${ua[e(qe)]??""}`)}),At(c,[],Xe,()=>(e(qe),e(n).monsterTypes),ft=>$e(n,e(n).monsterTypes=ft)),ke("dblclick",Je,ft=>O(ft,"monsterTypes",e(qe))),s(Pe,Je)});var wt=r(Ue,2),Ke=a(wt),Oe=a(Ke),Ge=r(Ke,2),it=a(Ge),xt=r(a(it),2),Mt=r(xt,4),Dt=r(it,2),$t=r(a(Dt),2),Qe=r($t,4),tt=r(Dt,2),He=r(a(tt),2),Re=r(He,4),Ze=r(tt,2),rt=r(a(Ze),2);ke("click",ge,()=>H(["monsterCategories"])),ae(3,T,()=>me,()=>({delay:0,duration:100})),ke("click",Te,()=>H(["monsterAttributes"])),ae(3,K,()=>me,()=>({delay:0,duration:100})),ke("click",ct,()=>H(["monsterTypes"])),ae(3,Ue,()=>me,()=>({delay:0,duration:100})),ke("click",Oe,()=>H(["starLowerBound","starUpperBound","atkLowerBound","atkUpperBound","defLowerBound","defUpperBound","atkPlusDef"])),kt(xt,()=>e(n).starLowerBound,Pe=>$e(n,e(n).starLowerBound=Pe)),kt(Mt,()=>e(n).starUpperBound,Pe=>$e(n,e(n).starUpperBound=Pe)),kt($t,()=>e(n).atkLowerBound,Pe=>$e(n,e(n).atkLowerBound=Pe)),kt(Qe,()=>e(n).atkUpperBound,Pe=>$e(n,e(n).atkUpperBound=Pe)),kt(He,()=>e(n).defLowerBound,Pe=>$e(n,e(n).defLowerBound=Pe)),kt(Re,()=>e(n).defUpperBound,Pe=>$e(n,e(n).defUpperBound=Pe)),kt(rt,()=>e(n).atkPlusDef,Pe=>$e(n,e(n).atkPlusDef=Pe)),ae(3,wt,()=>me,()=>({delay:0,duration:100})),s(w,m)};k(_,w=>{e(n).cardKinds.includes("Monster")&&w(h)})}var P=r(_,2);{var q=w=>{var m=Zi(),T=a(m),Z=a(T),ge=r(T,2);oe(ge,5,()=>ja.filter(Me=>Me!=="PendulumScale"),de,(Me,K)=>{var pe=Ji(),Te=a(pe),ze,Ue=r(Te);y(()=>{ze!==(ze=e(K))&&(Te.value=(Te.__value=e(K))==null?"":e(K)),g(Ue,` ${aa[e(K)]??""}`)}),At(u,[],Te,()=>(e(K),e(n).spellCategories),Ve=>$e(n,e(n).spellCategories=Ve)),s(Me,pe)}),ke("click",Z,()=>H(["spellCategories"])),ae(3,m,()=>me,()=>({delay:0,duration:100})),s(w,m)};k(P,w=>{e(n).cardKinds.includes("Spell")&&w(q)})}var xe=r(P,2);{var be=w=>{var m=tn(),T=a(m),Z=a(T),ge=r(T,2);oe(ge,5,()=>Ca,de,(Me,K)=>{var pe=en(),Te=a(pe),ze,Ue=r(Te);y(()=>{ze!==(ze=e(K))&&(Te.value=(Te.__value=e(K))==null?"":e(K)),g(Ue,` ${ra[e(K)]??""}`)}),At(l,[],Te,()=>(e(K),e(n).trapCategories),Ve=>$e(n,e(n).trapCategories=Ve)),s(Me,pe)}),ke("click",Z,()=>H(["trapCategories"])),ae(3,m,()=>me,()=>({delay:0,duration:100})),s(w,m)};k(xe,w=>{e(n).cardKinds.includes("Trap")&&w(be)})}var fe=r(xe,2),X=a(fe),J=a(X),W=r(X,2);oe(W,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],de,(w,m)=>{var T=an(),Z=a(T),ge,Me=r(Z);y(()=>{ge!==(ge=m.key)&&(Z.value=(Z.__value=m.key)==null?"":m.key),g(Me,` ${m.text??""}`)}),At(U,[],Z,()=>(m.key,e(n).others),K=>$e(n,e(n).others=K)),s(w,T)});var we=r(Y,2);Ui(we,{get cardInfo(){return e(Q)}});var Le=r(ue,2),Fe=a(Le);ot(Fe,()=>Rt,w=>{var m=rn();s(w,m)},(w,m)=>{const T=ye(()=>Object.values(e(m).dic));Na(w,{mode:"List",get allCardInfos(){return e(T)},onAttention:Ce,get searchCondition(){return e(n)},get deckCardInfos(){return e($).cardInfos},set deckCardInfos(Z){$e($,e($).cardInfos=Z)},$$legacy:!0})});var Ne=r(Le,2),Ye=a(Ne);ot(Ye,()=>e(le),w=>{var m=cn();s(w,m)},(w,m)=>{var T=vn(),Z=N(T),ge=a(Z),Me=r(a(ge),2),K=a(Me);y(()=>{e(se),Ft(()=>{e(m)})}),oe(K,5,()=>e(m),de,(Qe,tt)=>{var He=sn(),Re={},Ze=a(He);y(()=>{Re!==(Re=e(tt).id)&&(He.value=(He.__value=e(tt).id)==null?"":e(tt).id),g(Ze,e(tt).name)}),s(Qe,He)});var pe=r(ge,2),Te=r(a(pe),2),ze=a(Te),Ue=r(pe,4),Ve=r(a(Ue),2),ct=a(Ve),_t=r(Ve,2),wt=a(_t),Ke=r(_t,2),Oe=a(Ke),Ge=r(Ue,2),it=r(a(Ge),2);ot(it,ie,Qe=>{var tt=on();s(Qe,tt)},(Qe,tt)=>{var He=nn(),Re=a(He);y(Ze=>yt(Re,"href",Ze),[()=>bt.convertToObjectURL([e(tt)])],ye),s(Qe,He)});var xt=r(it,2);ot(xt,()=>e(Be),Qe=>{var tt=dn();s(Qe,tt)},(Qe,tt)=>{var He=ln(),Re=a(He);y(()=>yt(Re,"href",e(tt))),s(Qe,He)});var Mt=r(xt,2),Dt=a(Mt),$t=r(Z,2);Na($t,{mode:"Deck",allCardInfos:[],onAttention:Ce,get deckCardInfos(){return e($).cardInfos},set deckCardInfos(Qe){$e($,e($).cardInfos=Qe)},$$legacy:!0}),Ht(K,()=>e(se),Qe=>S(se,Qe)),ke("change",K,E),kt(ze,()=>e($).name,Qe=>$e($,e($).name=Qe)),ke("click",ct,ve),ke("click",wt,Ee),ke("click",Oe,B),ke("click",Dt,I),s(w,T)});var We=r(ce,2);Ki(We,{modalController:z}),y(()=>Ae(Y,`deck_editor_search_box ${(e(R)==="SearchCondition"?"":"minimum")??""} svelte-9dd5wj`)),ke("click",te,F),ke("click",M,()=>H(["name"])),kt(ee,()=>e(n).name,w=>$e(n,e(n).name=w)),ke("click",f,()=>H(["cardKinds"])),ke("click",J,()=>H(["others"])),ae(3,fe,()=>me,()=>({delay:0,duration:100})),ke("mouseenter",Y,()=>S(R,"SearchCondition")),s(v,V),vt()}const fn=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],pn=3;var yn=o('<input class="game_mode_radio svelte-sy4ydn" type="radio" name="game_mode"> <label> </label>',1),gn=o('<option class="svelte-sy4ydn"> </option>'),mn=o('<option class="svelte-sy4ydn"> </option>'),hn=o('<option class="svelte-sy4ydn"> </option>'),bn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_deck_selector" class="deck_selector svelte-sy4ydn"><option class="svelte-sy4ydn">デフォルト</option><!></select></div></td></tr>'),wn=o('<option class="svelte-sy4ydn"> </option>'),kn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">対戦相手：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select> <div class="svelte-sy4ydn"> </div></div></td></tr> <!> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">先攻後攻：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select></div></td></tr>',1),xn=o('<option class="svelte-sy4ydn"> </option>'),Dn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-sy4ydn">難易度：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="difficulty_selector" class="difficulty_selector svelte-sy4ydn"></select></div></td></tr>'),Cn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label class="config_row_label svelte-sy4ydn" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"></div></td></tr> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="deck_selector" class="deck_selector svelte-sy4ydn"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">duel start!</button></div></td></tr>',1),jn=o('<tr><td colspan="2" class="svelte-sy4ydn"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),$n=o('<tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">deck edit</button></div></td></tr>'),Sn=o('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="duelist_name" class="config_row_label duelist_name svelte-sy4ydn">名前：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><input id="duelist_name" class="duelist_name svelte-sy4ydn" type="text"></div></td></tr> <!> <!>',1),Mn=o('<tr><td colspan="2" class="svelte-sy4ydn"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),Tn=o('<div class="app_body svelte-sy4ydn"><table class="config_table svelte-sy4ydn"><tbody><!></tbody></table></div>'),Bn=o('<span class="svelte-sy4ydn"> </span> <span class="svelte-sy4ydn"> </span>',1),En=o('<div class="result_title result_win svelte-sy4ydn">YOU WIN</div>'),An=o('<div class="result_title result_lose svelte-sy4ydn">YOU LOSE</div>'),Yn=o('<div class="result_title result_draw svelte-sy4ydn">DRAW</div>'),Un=o('<div class="twitter_share_button_wrapper svelte-sy4ydn"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-sy4ydn">X(twitter)でシェアする</a></div>'),Ln=o('<div class="result svelte-sy4ydn"><!> <div class="reason_of_end svelte-sy4ydn"> </div> <!> <div class="svelte-sy4ydn"><button class="white_button svelte-sy4ydn">TOPへ戻る</button></div></div>'),Nn=o('<main style="flex-direction: column; display :flex" class="svelte-sy4ydn"><div class="link link_left svelte-sy4ydn"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-sy4ydn">posfie(toggeter)</a></div> <div class="link link_right svelte-sy4ydn"><a class="a_button svelte-sy4ydn" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">現時点とこの先のこと</a></div> <!> <div class="footer card_summary svelte-sy4ydn"><!></div> <div class="footer debug_info svelte-sy4ydn"><span class="svelte-sy4ydn"> </span> <span class="user_agent_info svelte-sy4ydn"> </span> <span class="screen_info svelte-sy4ydn"> </span></div> <!></main>');function Pn(v,i){lt(i,!1);const t=new ur("stk_ygo_svelte",pn,fn);let d=De(0),p=De(0),c=De(),u=De("FtkChallenge"),l=De("None"),U=De(0),z=De(""),D=De(void 0);const n="https://setta238.github.io/stk_ygo_svelte/",R="遊戯王deそりてあ",F="ninja_no",H=fr.getOrCreateNew(t).then(f=>(S(u,Ba.includes(f.previousGameMode)?f.previousGameMode:"FtkChallenge"),Ee(f.previousNpcId),f)),O=f=>{var _;const x=f.find(h=>h.lastUsedAt.getTime()===Math.max(...f.map(P=>P.lastUsedAt.getTime())))??f[0];S(U,x.id),e(u)==="FtkChallenge"&&x.deckType!=="Preset"&&S(U,((_=Yt.find(h=>h.deckType==="Preset"))==null?void 0:_.id)??e(U))};let E=De(bt.getAllDeckInfo(t).then(f=>(Promise.all(f.filter(x=>!x.lastUsedAt).map(x=>{x.saveDeckInfo()})),O(f),f)));const A=async()=>{const f=e(U);let x=(await e(E)).find(h=>h.id===f)??(await le()).find(h=>h.id===f);x&&await x.updateTimestamp();let _=x;if(_||(_=Yt.find(h=>h.id===f)),!_)throw new Error("illegal state");return _},se=async()=>{(await H).save({previousGameMode:e(u)})},le=()=>(S(E,bt.getAllDeckInfo(t).then(f=>(O(f),f))),e(E)),Be=async()=>{(await e(E)).length||(await bt.prepareSampleDeck(),le())},j=async()=>{await Promise.all([se(),Be()]);const f=await A(),x=await H;let _=qt.find(q=>q.id===Number.MIN_SAFE_INTEGER)??qt[0],h=Yt.find(q=>q.id===Number.MIN_SAFE_INTEGER)??Yt[0],P="PlayFirst";e(u)==="FtkChallenge"?_=qt.filter(q=>q.npcType==="FtkChallenge").find(q=>q.difficulty===x.previousDifficulty)??_:e(u)==="Free"&&(_=qt.find(q=>q.id===x.previousNpcId)??_,h=Yt.slice(-1)[0],P=x.previousStartMode),_.npcType!=="FtkChallenge"&&x.previousNpcDeckId>-1?h=(await e(E)).find(q=>q.id===x.previousNpcDeckId)??h:h=Yt.find(q=>q.id===_.id)??h,S(c,new mr(x,"Player",f,[],_,"NPC",h,[],P)),e(c).onDuelEnd.append(()=>(S(c,e(c)),"RemoveMe"))},$=async()=>{await Promise.all([se(),Be()]),S(l,"DeckEdit")},Q=async f=>{await se(),f.key==="Enter"&&!f.repeat&&(await H).save()},_e=()=>{S(E,le()),S(c,void 0),S(l,"None")};let Ce=Date.now();const ie=f=>{Date.now()-Ce<200||(Ce=Date.now(),S(u,f),le())},ve=f=>{Ee(Number(f.currentTarget.value))},Ee=f=>{var x;S(D,qt.find(_=>_.id===f)),S(z,((x=e(D))==null?void 0:x.description)??"")};Be(),dt();var B=Nn(),I=r(a(B),2),V=a(I),ce=r(I,2);{var je=f=>{var x=Se(),_=N(x);ot(_,()=>H,null,(h,P)=>{ci(h,{get duel(){return e(c)},get userProfile(){return e(P)}})}),s(f,x)},ue=f=>{var x=Se(),_=N(x);{var h=q=>{un(q,{})},P=q=>{var xe=Tn(),be=a(xe),fe=a(be),X=a(fe);ot(X,()=>H,J=>{var W=Mn();s(J,W)},(J,W)=>{var we=Sn(),Le=N(we),Fe=a(Le),Ne=a(Fe),Ye=r(Fe),We=a(Ye),w=a(We),m=r(Le,2);ot(m,()=>e(E),ge=>{var Me=jn();s(ge,Me)},(ge,Me)=>{var K=Cn(),pe=N(K),Te=a(pe),ze=a(Te),Ue=r(Te),Ve=a(Ue);oe(Ve,5,()=>Ba,de,(He,Re)=>{var Ze=yn(),rt=N(Ze),Pe=r(rt,2),qe=a(Pe);y(Je=>{yt(rt,"id",`game_mode_radio_${Je??""}`),yr(rt,e(Re)),gr(rt,e(u)===e(Re)),Ae(Pe,`game_mode_tab_label game_mode_tab_${Je??""} svelte-sy4ydn`),yt(Pe,"for",`game_mode_radio_${Je??""}`),g(qe,e(Re))},[()=>e(Re).toLowerCase()],ye),ke("change",rt,()=>ie(e(Re))),s(He,Ze)});var ct=r(pe,2),_t=a(ct),wt=a(_t),Ke=r(_t),Oe=a(Ke),Ge=a(Oe);y(()=>{e(U),Ft(()=>{e(u),e(Me)})}),oe(Ge,5,()=>e(u)==="FtkChallenge"?Yt.filter(He=>He.deckType==="Preset"):e(Me),de,(He,Re)=>{var Ze=gn(),rt={},Pe=a(Ze);y(()=>{rt!==(rt=e(Re).id)&&(Ze.value=(Ze.__value=e(Re).id)==null?"":e(Re).id),g(Pe,e(Re).name)}),s(He,Ze)});var it=r(ct,2);{var xt=He=>{var Re=kn(),Ze=N(Re),rt=a(Ze),Pe=a(rt),qe=r(rt),Je=a(qe),Xe=a(Je);y(()=>{e(W),Ft(()=>{})}),oe(Xe,5,()=>qt,de,(ht,st)=>{var pt=mn(),Et={},Pt=a(pt);y(()=>{Et!==(Et=e(st).id)&&(pt.value=(pt.__value=e(st).id)==null?"":e(st).id),g(Pt,e(st).name)}),s(ht,pt)});var ut=r(Xe,2),mt=a(ut),ft=r(Ze,2);{var Tt=ht=>{var st=bn(),pt=a(st),Et=a(pt),Pt=r(pt),ha=a(Pt),ba=a(ha);y(()=>{e(W),Ft(()=>{e(Me)})});var sa=a(ba);sa.value=(sa.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Ha=r(sa);oe(Ha,1,()=>e(Me),de,(ia,Vt)=>{var Gt=hn(),wa={},Ia=a(Gt);y(()=>{wa!==(wa=e(Vt).id)&&(Gt.value=(Gt.__value=e(Vt).id)==null?"":e(Vt).id),g(Ia,e(Vt).name)}),s(ia,Gt)}),ae(3,Et,()=>me,()=>({duration:200})),ae(3,pt,()=>me,()=>({duration:200})),Ht(ba,()=>e(W).previousNpcDeckId,ia=>e(W).previousNpcDeckId=ia),ae(3,ha,()=>me,()=>({duration:200})),ae(3,Pt,()=>me,()=>({duration:200})),ae(3,st,()=>me,()=>({duration:200})),s(ht,st)};k(ft,ht=>{var st;((st=e(D))==null?void 0:st.npcType)!=="FtkChallenge"&&ht(Tt)})}var Bt=r(ft,2),St=a(Bt),Kt=a(St),zt=r(St),ga=a(zt),ma=a(ga);y(()=>{e(W),Ft(()=>{})}),oe(ma,5,()=>ca(Ea),de,(ht,st)=>{var pt=wn(),Et={},Pt=a(pt);y(()=>{Et!==(Et=e(st))&&(pt.value=(pt.__value=e(st))==null?"":e(st)),g(Pt,Ea[e(st)])}),s(ht,pt)}),y(()=>g(mt,`※${e(z)??""}`)),ae(3,Pe,()=>me,()=>({duration:200})),ae(3,rt,()=>me,()=>({duration:200})),ke("change",Xe,ve),Ht(Xe,()=>e(W).previousNpcId,ht=>e(W).previousNpcId=ht),ae(3,Je,()=>me,()=>({duration:200})),ae(3,qe,()=>me,()=>({duration:200})),ae(3,Ze,()=>me,()=>({duration:200})),ae(3,Kt,()=>me,()=>({duration:200})),ae(3,St,()=>me,()=>({duration:200})),Ht(ma,()=>e(W).previousStartMode,ht=>e(W).previousStartMode=ht),ae(3,ga,()=>me,()=>({duration:200})),ae(3,zt,()=>me,()=>({duration:200})),ae(3,Bt,()=>me,()=>({duration:200})),s(He,Re)},Mt=He=>{var Re=Se(),Ze=N(Re);{var rt=Pe=>{var qe=Dn(),Je=a(qe),Xe=a(Je),ut=r(Je),mt=a(ut),ft=a(mt);y(()=>{e(W),Ft(()=>{})}),oe(ft,5,()=>hr,de,(Tt,Bt)=>{var St=xn(),Kt={},zt=a(St);y(()=>{Kt!==(Kt=e(Bt))&&(St.value=(St.__value=e(Bt))==null?"":e(Bt)),g(zt,e(Bt))}),s(Tt,St)}),ae(3,Xe,()=>me,()=>({duration:200})),ae(3,Je,()=>me,()=>({duration:200})),Ht(ft,()=>e(W).previousDifficulty,Tt=>e(W).previousDifficulty=Tt),ae(3,mt,()=>me,()=>({duration:200})),ae(3,ut,()=>me,()=>({duration:200})),ae(3,qe,()=>me,()=>({duration:200})),s(Pe,qe)};k(Ze,Pe=>{e(u)==="FtkChallenge"&&Pe(rt)},!0)}s(He,Re)};k(it,He=>{e(u)==="Free"?He(xt):He(Mt,!1)})}var Dt=r(it,2),$t=a(Dt),Qe=a($t),tt=a(Qe);ae(3,ze,()=>me,()=>({duration:200})),ae(3,Te,()=>me,()=>({duration:200})),ae(3,Ve,()=>me,()=>({duration:200})),ae(3,Ue,()=>me,()=>({duration:200})),ae(3,pe,()=>me,()=>({duration:200})),ae(3,wt,()=>me,()=>({duration:200})),ae(3,_t,()=>me,()=>({duration:200})),Ht(Ge,()=>e(U),He=>S(U,He)),ae(3,Oe,()=>me,()=>({duration:200})),ae(3,Ke,()=>me,()=>({duration:200})),ae(3,ct,()=>me,()=>({duration:200})),ke("click",tt,j),ae(3,Qe,()=>me,()=>({duration:200})),s(ge,K)});var T=r(m,2);{var Z=ge=>{var Me=$n(),K=a(Me),pe=a(K),Te=a(pe);ke("click",Te,$),ae(3,pe,()=>me,()=>({duration:200})),ae(3,K,()=>me,()=>({duration:200})),ae(3,Me,()=>me,()=>({duration:200})),s(ge,Me)};k(T,ge=>{e(u)==="Free"&&ge(Z)})}ae(3,Ne,()=>me,()=>({duration:200})),ae(3,Fe,()=>me,()=>({duration:200})),kt(w,()=>e(W).name,ge=>e(W).name=ge),ke("keypress",w,Q),ae(3,We,()=>me,()=>({duration:200})),ae(3,Ye,()=>me,()=>({duration:200})),ae(3,Le,()=>me,()=>({duration:200})),s(J,we)}),s(q,xe)};k(_,q=>{e(l)==="DeckEdit"?q(h):q(P,!1)},!0)}s(f,x)};k(ce,f=>{e(c)?f(je):f(ue,!1)})}var Y=r(ce,2),b=a(Y);ot(b,()=>Rt,f=>{var x=at("読み込み中");s(f,x)},(f,x)=>{var _=Bn(),h=N(_),P=a(h),q=r(h,2),xe=a(q);y((be,fe,X)=>{g(P,`公式DB上のカード${be??""}枚`),g(xe,`実装済カード（効果あり）${fe??""}枚 （効果なし）${X??""}枚`)},[()=>e(x).knmCount.toLocaleString(),()=>e(x).definitionCount.toLocaleString(),()=>e(x).nonDefinitionCount.toLocaleString()],ye),s(f,_)});var G=r(Y,2),te=a(G),ne=a(te),C=r(te,2),M=a(C),L=r(C,2),ee=a(L),re=r(G,2);{var he=f=>{var x=Ln(),_=a(x);{var h=W=>{var we=Se(),Le=N(we);{var Fe=Ye=>{var We=En();s(Ye,We)},Ne=Ye=>{var We=Se(),w=N(We);{var m=T=>{var Z=An();s(T,Z)};k(w,T=>{e(c).winner.seat==="Above"&&T(m)},!0)}s(Ye,We)};k(Le,Ye=>{e(c).winner.seat==="Below"?Ye(Fe):Ye(Ne,!1)})}s(W,we)},P=W=>{var we=Yn();s(W,we)};k(_,W=>{e(c).winner?W(h):W(P,!1)})}var q=r(_,2),xe=a(q),be=r(q,2);{var fe=W=>{var we=Un(),Le=a(we);y(()=>yt(Le,"href",`https://x.com/share?url=${n}&text=${e(c).twitterShareText??""}&hashtags=${R}&via=${F}`)),s(W,we)};k(be,W=>{e(c).twitterShareText&&W(fe)})}var X=r(be,2),J=a(X);y(()=>g(xe,e(c).reasonOfEnd)),ke("click",J,_e),ae(3,x,()=>kr,()=>({delay:200,duration:200})),s(f,x)};k(re,f=>{e(c)&&e(c).isEnded&&f(he)})}y(()=>{g(ne,"build at: 20260103_222910"),g(M,pr.text),g(ee,`w:${e(d)??""}px h:${e(p)??""}px`)}),Xt("innerWidth",f=>S(d,f)),Xt("innerHeight",f=>S(p,f)),ke("click",V,_e),s(v,B),vt()}br(Pn,{target:document.getElementById("app")});
