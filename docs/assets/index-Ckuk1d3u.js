var Ra=Object.defineProperty;var xa=d=>{throw TypeError(d)};var Ka=(d,i,t)=>i in d?Ra(d,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[i]=t;var dt=(d,i,t)=>Ka(d,typeof i!="symbol"?i+"":i,t),wa=(d,i,t)=>i.has(d)||xa("Cannot "+t);var bt=(d,i,t)=>(wa(d,i,"read from private field"),t?t.call(d):i.get(d)),Vt=(d,i,t)=>i.has(d)?xa("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(d):i.set(d,t),da=(d,i,t,v)=>(wa(d,i,"write to private field"),v?v.call(d,t):i.set(d,t),t);import{s as Ca,r as Wa,a as C,b as za,l as Va,g as e,d as Fa,p as kt,c as ze,m as be,i as xt,t as l,e as a,f as b,h as f,j as oe,k as Ae,n as Ct,o as de,q as s,u as wt,v as De,D as Ga,w as je,x as N,y as r,z as ne,A as Ht,B as re,C as le,E as y,F as Xa,G as ct,H as sa,I as Qa,J as Ja,K as Pt,L as ht,M as Gt,N as Ha,O as pa,P as ia,Q as ya,R as Xt,S as ea,T as na,U as la,V as Za,W as er,X as tr,Y as ar,Z as rr,_ as sr,$ as ir,a0 as ta,a1 as nr,a2 as lr,a3 as or,a4 as vr,a5 as dr,a6 as Lt,a7 as ca,a8 as Et,a9 as Da,aa as cr,ab as _r,ac as ur,ad as St,ae as fr,af as pr,ag as yr,ah as $a,ai as Sa,aj as Ma,ak as ja,al as Ta,am as Ba,an as Ea,ao as gr,ap as Nt,aq as mr,ar as Ut,as as jt,at as Wt,au as br,av as hr,aw as Aa,ax as Kt,ay as Ft,az as kr,aA as xr,aB as wr,aC as La,aD as Cr,aE as Dr,aF as $r}from"../chunk/entity_proc_20260110_171017.js";import"../chunk/json_20260110_171017.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))v(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const _ of c.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&v(_)}).observe(document,{childList:!0,subtree:!0});function t(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function v(u){if(u.ep)return;u.ep=!0;const c=t(u);fetch(u.href,c)}})();const Sr=d=>d;function ga(d){const i=d-1;return i*i*i+1}function Ya(d){const i=typeof d=="string"&&d.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[d,"px"]}function Mr(d,{delay:i=0,duration:t=400,easing:v=Sr}={}){const u=+getComputedStyle(d).opacity;return{delay:i,duration:t,easing:v,css:c=>`opacity: ${c*u}`}}function jr(d,{delay:i=0,duration:t=400,easing:v=ga,x:u=0,y:c=0,opacity:_=0}={}){const o=getComputedStyle(d),P=+o.opacity,K=o.transform==="none"?"":o.transform,M=P*(1-_),[D,n]=Ya(u),[q,Q]=Ya(c);return{delay:i,duration:t,easing:v,css:(O,A)=>`
			transform: ${K} translate(${(1-O)*D}${n}, ${(1-O)*q}${Q});
			opacity: ${P-M*A}`}}function fe(d,{delay:i=0,duration:t=400,easing:v=ga,axis:u="y"}={}){const c=getComputedStyle(d),_=+c.opacity,o=u==="y"?"height":"width",P=parseFloat(c[o]),K=u==="y"?["top","bottom"]:["left","right"],M=K.map(Y=>`${Y[0].toUpperCase()}${Y.slice(1)}`),D=parseFloat(c[`padding${M[0]}`]),n=parseFloat(c[`padding${M[1]}`]),q=parseFloat(c[`margin${M[0]}`]),Q=parseFloat(c[`margin${M[1]}`]),O=parseFloat(c[`border${M[0]}Width`]),A=parseFloat(c[`border${M[1]}Width`]);return{delay:i,duration:t,easing:v,css:Y=>`overflow: hidden;opacity: ${Math.min(Y*20,1)*_};${o}: ${Y*P}px;padding-${K[0]}: ${Y*D}px;padding-${K[1]}: ${Y*n}px;margin-${K[0]}: ${Y*q}px;margin-${K[1]}: ${Y*Q}px;border-${K[0]}-width: ${Y*O}px;border-${K[1]}-width: ${Y*A}px;min-${o}: 0`}}function Ua(d,i){for(const t in i)d[t]=i[t];return d}function Tr({fallback:d,...i}){const t=new Map,v=new Map;function u(_,o,P){const{delay:K=0,duration:M=ve=>Math.sqrt(ve)*30,easing:D=ga}=Ua(Ua({},i),P),n=_.getBoundingClientRect(),q=o.getBoundingClientRect(),Q=n.left-q.left,O=n.top-q.top,A=n.width/q.width,Y=n.height/q.height,ie=Math.sqrt(Q*Q+O*O),xe=getComputedStyle(o),$e=xe.transform==="none"?"":xe.transform,_e=+xe.opacity;return{delay:K,duration:typeof M=="function"?M(ie):M,easing:D,css:(ve,Se)=>`
			   opacity: ${ve*_e};
			   transform-origin: top left;
			   transform: ${$e} translate(${Se*Q}px,${Se*O}px) scale(${ve+(1-ve)*A}, ${ve+(1-ve)*Y});
		   `}}function c(_,o,P){return(K,M)=>(_.set(M.key,K),()=>{if(o.has(M.key)){const D=o.get(M.key);return o.delete(M.key),u(D,K,M)}return _.delete(M.key),d&&d(K,M,P)})}return[c(v,t,!1),c(t,v,!0)]}function Na(d){return Object.prototype.toString.call(d)==="[object Date]"}function Br(d){return d}function _a(d){const i=d-1;return i*i*i+1}function ua(d,i){if(d===i||d!==d)return()=>d;const t=typeof d;if(t!==typeof i||Array.isArray(d)!==Array.isArray(i))throw new Error("Cannot interpolate values of different type");if(Array.isArray(d)){const v=i.map((u,c)=>ua(d[c],u));return u=>v.map(c=>c(u))}if(t==="object"){if(!d||!i)throw new Error("Object cannot be null");if(Na(d)&&Na(i)){const c=d.getTime(),o=i.getTime()-c;return P=>new Date(c+P*o)}const v=Object.keys(i),u={};return v.forEach(c=>{u[c]=ua(d[c],i[c])}),c=>{const _={};return v.forEach(o=>{_[o]=u[o](c)}),_}}if(t==="number"){const v=i-d;return u=>d+u*v}return()=>i}var At,zt,Qt,Ot;const ma=class ma{constructor(i,t={}){Vt(this,At,Ca(void 0));Vt(this,zt,Ca(void 0));Vt(this,Qt);Vt(this,Ot,null);bt(this,At).v=bt(this,zt).v=i,da(this,Qt,t)}static of(i,t){const v=new ma(i(),t);return Wa(()=>{v.set(i())}),v}set(i,t){var D;C(bt(this,zt),i);let{delay:v=0,duration:u=400,easing:c=Br,interpolate:_=ua}={...bt(this,Qt),...t};if(u===0)return(D=bt(this,Ot))==null||D.abort(),C(bt(this,At),i),Promise.resolve();const o=za.now()+v;let P,K=!1,M=bt(this,Ot);return da(this,Ot,Va(n=>{if(n<o)return!0;if(!K){K=!0;const Q=bt(this,At).v;P=_(Q,i),typeof u=="function"&&(u=u(Q,i)),M==null||M.abort()}const q=n-o;return q>u?(C(bt(this,At),i),!1):(C(bt(this,At),P(c(q/u))),!0)})),bt(this,Ot).promise}get current(){return e(bt(this,At))}get target(){return e(bt(this,zt))}set target(i){this.set(i)}};At=new WeakMap,zt=new WeakMap,Qt=new WeakMap,Ot=new WeakMap;let aa=ma;var Er=l('<div class="phase_display svelte-1boxe40"><span class="svelte-1boxe40"> </span> </div>'),Ar=l('<div class="lifepoint_display svelte-1boxe40"><div class="svelte-1boxe40"> </div> <div class="svelte-1boxe40"> </div></div>'),Lr=(d,i,t)=>i(e(t)),Yr=l('<div class="svelte-1boxe40"><button class="phase_button svelte-1boxe40"> </button></div>'),Ur=l("<div><!></div>"),Nr=l('<div class="svelte-1boxe40"><!></div>'),Pr=l("<div><!></div>"),qr=l('<div class="config_button_wrapper svelte-1boxe40"><button id="config_button" class="svelte-1boxe40">⚙</button></div>'),Fr=l("<!> <!> <!> <!>",1),Hr=l('<div style="position: absolute;" class="card_animation_receiver svelte-1boxe40"><!></div>'),Or=l('<div style="position: absolute; top:0rem" class="svelte-1boxe40">｛効果対象｝</div>'),Ir=l('<!> <div style="position: absolute; display:flex;justify-content: center;"><!></div>',1),Rr=l(" <!> 】",1),Kr=l('<div style="position: absolute; bottom:0rem" class="svelte-1boxe40"> <!></div>'),Wr=l("<!> <!>",1),zr=l('<div class="badge svelte-1boxe40"> </div>'),Vr=l('<div class="card_animation_receiver svelte-1boxe40"><!></div>'),Gr=l("<!> <!> <!> <!>",1),Xr=l('<td><div role="listitem"><!></div></td>');function Qr(d,i){kt(i,!1);let t=ze(i,"view",12),v=ze(i,"row",8),u=ze(i,"column",8),c=ze(i,"selectedEntities",28,()=>[]),_=ze(i,"selectedCells",28,()=>[]),o=be(t().getCell(v(),u())),P=be(new aa(e(o).field.duel.duelists.Above.lp,{duration:400,easing:_a})),K=be(new aa(e(o).field.duel.duelists.Below.lp,{duration:400,easing:_a}));const M=()=>{C(o,t().getCell(v(),u())),De(P,e(P).target=e(o).field.duel.duelists.Above.lp),De(K,e(K).target=e(o).field.duel.duelists.Below.lp)};e(o).onUpdate.append(M),t().onDuelUpdate.append(M),t().modalController.onUpdate.append(M);let D,n=be([]),q=()=>console.log("hoge"),Q,O=be([]),A=be(!1),Y=be(!1),ie=!1;const xe=$=>{var B,U;C(W,[]),c().reset(),D=$.activator,q=$.resolve,C(n,$.dummyActionInfos),C(O,$.chainBlockInfos.flatMap(ae=>ae.selectedEntities).getDistinct()),Q=$.entitiesChoices,C(A,!1),C(Y,((B=$.cellsChoices)==null?void 0:B.selectables.includes(e(o)))??!1),ie=e(Y)&&((U=$.cellsChoices)==null?void 0:U.qty)===1,M()};t().onWaitStart.append(xe);const $e=()=>{D=void 0,C(n,[]),q=()=>{console.log("hoge")},Q=void 0,C(O,[]),C(A,!1),C(Y,!1),ie=!1};t().onWaitEnd.append($e);let _e=be(!1),ve=[];const Se=$=>{ve=$.filter(B=>B.dests.includes(e(o))),C(_e,ve.length>0),M()},m=()=>{ve=[],C(_e,!1),M()};t().onDragStart.append(Se),t().onDragEnd.append(m);const[F,V]=ni;let W=be([]);const we=$=>{if(D=void 0,e(o)===$.to||e(o).entities.includes($.entity)){C(W,[...e(W),$]);const B=$.resolve;C(o,e(o)),setTimeout(()=>{C(W,e(W).filter(U=>U!==$)),$.count++,$.count>1&&B()},600)}};t().onAnimation.append(we);const T=$=>{q({phaseChange:$})},H=()=>e(o).isStackCell&&e(o).entities.flatMap($=>$.actions).filter($=>e(n).map(B=>B.action.seq).some(B=>B===$.seq)).length>0,I=$=>{var B;if(((B=$.target)==null?void 0:B.id)==="config_button"){t(t().infoBoardState="Config",!0),t().requireUpdate();return}if(t(t().infoBoardState="Default",!0),ie)q({selectedCells:[e(o)]});else if(e(Y))C(A,!e(A)),_(e(A)?[..._(),e(o)]:_().filter(U=>U!==e(o)));else if(e(o).isStackCell){t(t().infoBoardState="CellInfo",!0),t(t().infoBoardCell=e(o),!0),t().requireUpdate();const U=e(o).entities.flatMap(se=>se.actions).map(se=>se.seq),ae=e(n).filter(se=>U.includes(se.action.seq));if(ae.length){if(!D)return;t().modalController.actionSelector.show({title:"カードを選択。",position:"Bottom",activator:D,dummyActionInfos:ae,cancelable:!0}).then(se=>{se&&q({actionInfo:se})});return}}t().requireUpdate(),console.info(e(o),ue(...e(o).visibleEntities))},ce=$=>{$.preventDefault(),$.dataTransfer&&($.dataTransfer.dropEffect="move")},Ce=$=>{$.preventDefault(),console.info("drop",$,e(_e),ve),$.dataTransfer&&($.dataTransfer.dropEffect="move");try{if(e(_e)&&ve){if(ve.length===1){const B=ve[0];q({actionInfo:{...B,dest:e(o)}})}else if(ve.length>1){if(!D)throw new Ga("想定されない状態");e(o).field.duel.view.modalController.terminateAll(),e(o).field.duel.view.modalController.actionSelector.show({title:"選択",position:"Bottom",activator:D,dummyActionInfos:ve.map(B=>({...B,dest:e(o)})),cancelable:!1}).then(B=>{q({actionInfo:B})})}}}finally{t().removeDraggingActions()}},ue=(...$)=>{if(t().waitMode==="Animation")return"Disabled";if(Q&&Q.selectables.find(U=>$.find(ae=>U===ae)))return"Selectable";if(!e(n)||e(n).length===0||t().waitMode!=="Free"||Object.values(t().modalController.modals).some(U=>U.state==="Shown"))return"Disabled";const B=e(n).filter(U=>$.includes(U.action.entity));return B.length===0?"Disabled":e(o).isStackCell||B[0].action.entity!==$[0]?"Clickable":B.some(U=>U.dests.length)?"Draggable":"Clickable"};xt();var G=Xr(),S=a(G);S.__click=I;var ee=a(S);{var z=$=>{var B=je(),U=N(B);{var ae=se=>{var Me=je(),j=N(Me);{var w=g=>{var E=Er(),k=a(E),me=a(k),pe=r(k,1,!0);f((ye,Z)=>{y(me,ye),y(pe,Z)},[()=>String(e(o).field.duel.clock.turn).padStart(2,"0"),()=>e(o).field.duel.phase.toUpperCase()],oe),s(g,E)},p=g=>{var E=je(),k=N(E);{var me=ye=>{var Z=Ar(),X=a(Z),R=a(X),ge=r(X,2),Pe=a(ge);f((qe,Ne)=>{y(R,qe),y(Pe,Ne)},[()=>Math.floor(e(P).current),()=>Math.floor(e(K).current)],oe),s(ye,Z)},pe=ye=>{var Z=je(),X=N(Z);{var R=ge=>{var Pe=je(),qe=N(Pe);{var Ne=Le=>{var Ve=je(),Ee=N(Ve);{var he=ke=>{var Ue=je(),Fe=N(Ue);ne(Fe,1,()=>t().duel.nextPhaseList,le,(Xe,nt)=>{var Ge=Yr(),Ze=a(Ge);Ze.__click=[Lr,T,nt];var x=a(Ze);f(h=>y(x,h),[()=>e(nt).toUpperCase()],oe),s(Xe,Ge)}),s(ke,Ue)};b(Ee,ke=>{t().duel.isEnded||ke(he)})}s(Le,Ve)};b(qe,Le=>{t().waitMode==="Free"&&Le(Ne)})}s(ge,Pe)};b(X,ge=>{e(o).column===5&&ge(R)},!0)}s(ye,Z)};b(k,ye=>{e(o).column===3?ye(me):ye(pe,!1)},!0)}s(g,E)};b(j,g=>{e(o).column===1?g(w):g(p,!1)})}s(se,Me)};b(U,se=>{e(o).row===3&&se(ae)})}s($,B)},J=$=>{var B=je(),U=N(B);{var ae=Me=>{var j=Fr();const w=oe(()=>e(W).find(Z=>Z.to===e(o)));var p=N(j);{var g=Z=>{var X=Ur(),R=a(X);Ht(R,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),f(()=>Ae(X,`card_animation_receiver ${e(o).cellType??""} svelte-1boxe40`)),re(1,X,()=>V,()=>({key:e(w).entity.seq})),s(Z,X)};b(p,Z=>{e(w)&&e(w).index==="Top"&&Z(g)})}var E=r(p,2);ne(E,1,()=>e(o).visibleEntities,le,(Z,X)=>{var R=je(),ge=N(R);{var Pe=qe=>{var Ne=Nr(),Le=a(Ne);const Ve=oe(()=>ue(e(X))),Ee=oe(()=>e(n).filter(he=>he.action.entity===e(X)));Ht(Le,{get entity(){return e(X)},get state(){return e(Ve)},get dummyActionInfos(){return e(Ee)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(he){c(he)},$$legacy:!0}),re(2,Ne,()=>F,()=>({key:e(X).seq})),s(qe,Ne)};b(ge,qe=>{e(W).every(Ne=>Ne.entity.seq!==e(X).seq)&&qe(Pe)})}s(Z,R)});var k=r(E,2);{var me=Z=>{var X=Pr(),R=a(X);Ht(R,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),f(()=>Ae(X,`card_animation_receiver ${e(o).cellType??""} svelte-1boxe40`)),re(1,X,()=>V,()=>({key:e(w).entity.seq})),s(Z,X)};b(k,Z=>{e(w)&&e(w).index!=="Top"&&Z(me)})}var pe=r(k,2);{var ye=Z=>{var X=qr();s(Z,X)};b(pe,Z=>{e(o).owner.seat==="Below"&&Z(ye)})}s(Me,j)},se=Me=>{var j=Gr();const w=oe(()=>e(W).find(X=>X.to===e(o)));var p=N(j);{var g=X=>{var R=Hr(),ge=a(R);Ht(ge,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),re(1,R,()=>V,()=>({key:e(w).entity.seq})),s(X,R)};b(p,X=>{e(w)&&e(w).index!=="Top"&&X(g)})}var E=r(p,2);{var k=X=>{var R=Wr(),ge=N(R);ne(ge,1,()=>e(o).visibleEntities.map((Ne,Le)=>({index:Le,entity:Ne})).toReversed(),le,(Ne,Le)=>{var Ve=je(),Ee=N(Ve);{var he=ke=>{var Ue=Ir();const Fe=oe(()=>!e(o).isStackCell&&e(Le).index===0?ue(...e(o).visibleEntities):void 0);var Xe=N(Ue);{var nt=h=>{var L=Or();s(h,L)};b(Xe,h=>{e(O).includes(e(Le).entity)&&h(nt)})}var Ge=r(Xe,2),Ze=a(Ge);const x=oe(()=>e(Le).index===0?e(n).filter(h=>e(o).visibleEntities.includes(h.action.entity)):void 0);Ht(Ze,{get entity(){return e(Le).entity},get state(){return e(Fe)},get dummyActionInfos(){return e(x)},cardActionResolve:void 0,get selectedList(){return c()},set selectedList(h){c(h)},$$legacy:!0}),f(()=>Ae(Ge,`duel_card_wrapper ${(e(Le).entity.exist?"duel_card_wrapper_exists":"")??""} svelte-1boxe40`)),re(2,Ge,()=>F,()=>({key:e(Le).entity.seq})),s(ke,Ue)};b(Ee,ke=>{e(W).every(Ue=>Ue.entity.seq!==e(Le).entity.seq)&&ke(he)})}s(Ne,Ve)});var Pe=r(ge,2);{var qe=Ne=>{var Le=Kr(),Ve=a(Le),Ee=r(Ve);ne(Ee,1,()=>sa(e(o).visibleEntities[0].status.maxCounterQty),le,(he,ke)=>{var Ue=Rr(),Fe=N(Ue),Xe=r(Fe);{var nt=Ge=>{var Ze=ct();f(()=>y(Ze,`/${e(o).visibleEntities[0].status.maxCounterQty[e(ke)]??""}`)),s(Ge,Ze)};b(Xe,Ge=>{(e(o).visibleEntities[0].status.maxCounterQty[e(ke)]??9999)<100&&Ge(nt)})}f((Ge,Ze)=>y(Fe,`【
              ${Ge??""}${Ze??""} `),[()=>Xa(e(ke)),()=>e(o).visibleEntities[0].counterHolder.getQty(e(ke))],oe),s(he,Ue)}),f(()=>y(Ve,`【${e(o).visibleEntities[0].battlePositionName??""}】 `)),s(Ne,Le)};b(Pe,Ne=>{e(o).visibleEntities[0].battlePosition&&Ne(qe)})}s(X,R)};b(E,X=>{e(o).visibleEntities.length>0&&X(k)})}var me=r(E,2);{var pe=X=>{var R=zr(),ge=a(R);f(()=>y(ge,e(o).visibleEntities.length)),s(X,R)};b(me,X=>{e(o).isStackCell&&X(pe)})}var ye=r(me,2);{var Z=X=>{var R=Vr(),ge=a(R);Ht(ge,{get entity(){return e(w).entity},state:"Disabled",dummyActionInfos:[],cardActionResolve:void 0}),re(1,R,()=>V,()=>({key:e(w).entity.seq})),s(X,R)};b(ye,X=>{e(w)&&e(w).index==="Top"&&X(Z)})}s(Me,j)};b(U,Me=>{e(o).cellType==="Hand"?Me(ae):Me(se,!1)},!0)}s($,B)};b(ee,$=>{e(o).isDisabledCell?$(z):$(J,!1)})}f($=>{Ae(G,`${`duel_field_cell duel_field_cell_${e(o).cellType} ${e(o).linkArrowSources.length===0?"":"duel_field_cell_linked"}`??""} svelte-1boxe40`),Ct(G,"colspan",e(o).cellType==="Hand"?7:1),Ae(S,`${$??""} svelte-1boxe40`)},[()=>`duel_field_cell_inner_box ${e(o).cellType} ${e(_e)?"can_accept_drop":""} ${H()?"can_action":""} ${e(A)?"is_selected":e(Y)?"is_selectable":""} `],oe),de("dragover",S,ce),de("drop",S,Ce),s(d,G),wt()}Fa(["click"]);const Jr=(d,i,t=void 0,v="!!!circular reference!!!")=>{let u=[];return JSON.stringify(d,(c,_)=>{if(typeof _=="object"){if(u.indexOf(_)>-1)return v;u.push(_)}let o=_;if(i&&(o=i(c,_)),typeof o=="function")return o.toString();if(o!==_&&typeof o=="object"){if(u.indexOf(o)>-1)return v;u.push(o)}return o},t)};var Zr=l('<div class="title svelte-14z6bdh"> </div>'),es=l('<div class="title svelte-14z6bdh"> </div>'),ts=l('<div class="duel_log_chain_number svelte-14z6bdh"> </div>'),as=l('<div><a class="white_button" download="error_info.json">エラー情報ダウンロード</a></div>'),rs=l("<div><!> <!></div>"),ss=l('<div><div style="display: flex;    justify-content: space-between;"><div style=" white-space: nowrap;text-align: center;"> </div> <!></div> <!></div>'),is=l("<div><!> <!></div>"),ns=l("<div><!> <!></div>"),ls=l('<div class="duel_log svelte-14z6bdh"><div class="duel_log_header svelte-14z6bdh"></div> <div class="duel_log_body svelte-14z6bdh"></div> <div class="duel_log_footer svelte-14z6bdh"></div></div>');function os(d,i){kt(i,!1);let t=be(void 0),v=ze(i,"log",8),u,c=be([]);const _=()=>{const M=((u==null?void 0:u.seq)??-1)+1;v().records.slice(M).forEach(D=>{if(!u){C(c,[[[[D]]]]),u=D;return}if(!e(c)[D.clock.turn]){De(c,e(c)[D.clock.turn]=[[[D]]]),u=D;return}if(!e(c)[D.clock.turn][D.clock.phaseSeq]){De(c,e(c)[D.clock.turn][D.clock.phaseSeq]=[[D]]),u=D;return}if(u.clock.chainSeq===D.clock.chainSeq&&u.clock.chainBlockSeq===D.clock.chainBlockSeq&&u.duelist===D.duelist){e(c)[D.clock.turn][D.clock.phaseSeq].slice(-1)[0].push(D),u=D;return}e(c)[D.clock.turn][D.clock.phaseSeq].push([D]),u=D}),C(c,e(c)),Qa().then(()=>e(t)&&e(t).scroll(0,e(t).clientHeight*990))};v().onUpdate.append(_),v().duel.view.onDuelUpdate.append(_),_(),xt();var o=je(),P=N(o);{var K=M=>{var D=ls(),n=r(a(D),2);ne(n,5,()=>e(c),le,(q,Q)=>{var O=ns(),A=a(O);{var Y=xe=>{var $e=Zr(),_e=a($e);f(()=>y(_e,`ターン：${e(Q)[0][0][0].clock.turn??""}`)),s(xe,$e)};b(A,xe=>{e(Q)[0][0][0].clock.turn>0&&xe(Y)})}var ie=r(A,2);ne(ie,1,()=>e(Q),le,(xe,$e)=>{var _e=is(),ve=a(_e);{var Se=F=>{var V=es(),W=a(V);f(()=>y(W,e($e)[0][0].clock.period.name)),s(F,V)};b(ve,F=>{e($e)[0][0].clock.turn>0&&F(Se)})}var m=r(ve,2);ne(m,1,()=>e($e),le,(F,V)=>{var W=ss();const we=oe(()=>{var G;return((G=e(V).find(S=>S.chainNumber!==void 0))==null?void 0:G.chainNumber)??0});var T=a(W),H=a(T),I=a(H),ce=r(H,2);{var Ce=G=>{var S=ts(),ee=a(S);f(()=>y(ee,`チェーン：${e(we)??""}`)),s(G,S)};b(ce,G=>{e(we)&&G(Ce)})}var ue=r(T,2);ne(ue,1,()=>e(V),le,(G,S)=>{var ee=rs(),z=a(ee);{var J=ae=>{var se=ct();f(()=>y(se,e(S).text)),s(ae,se)},$=ae=>{var se=je(),Me=N(se);{var j=p=>{var g=ct();f((E,k,me)=>y(g,`移動：${E??""} ${k??""} ⇒ ${me??""}`),[()=>{var E;return(E=e(S).mainEntity)==null?void 0:E.toString()},()=>{var E;return(E=e(S).from)==null?void 0:E.toString()},()=>{var E;return(E=e(S).to)==null?void 0:E.toString()}],oe),s(p,g)},w=p=>{var g=je(),E=N(g);{var k=pe=>{var ye=ct();f((Z,X)=>y(ye,`生成：${Z??""} void ⇒ ${X??""}`),[()=>{var Z;return(Z=e(S).mainEntity)==null?void 0:Z.toString()},()=>{var Z;return(Z=e(S).to)==null?void 0:Z.toString()}],oe),s(pe,ye)},me=pe=>{var ye=je(),Z=N(ye);{var X=ge=>{var Pe=ct();f((qe,Ne)=>y(Pe,`消滅：${qe??""} ${Ne??""} ⇒ void`),[()=>{var qe;return(qe=e(S).mainEntity)==null?void 0:qe.toString()},()=>{var qe;return(qe=e(S).from)==null?void 0:qe.toString()}],oe),s(ge,Pe)},R=ge=>{var Pe=ct();f(()=>y(Pe,e(S).text)),s(ge,Pe)};b(Z,ge=>{e(S).type==="EntityDisappear"?ge(X):ge(R,!1)},!0)}s(pe,ye)};b(E,pe=>{e(S).type==="EntityAppear"?pe(k):pe(me,!1)},!0)}s(p,g)};b(Me,p=>{e(S).type==="EntityMove"?p(j):p(w,!1)},!0)}s(ae,se)};b(z,ae=>{e(S).type==="ChainBlockHeader"?ae(J):ae($,!1)})}var B=r(z,2);{var U=ae=>{var se=as(),Me=a(se);f(j=>Ct(Me,"href",j),[()=>window.URL.createObjectURL(new Blob([Jr(e(S).error,(j,w)=>["pool","bundles","duel"].includes(j)||typeof w=="function"?void 0:w,4)],{type:"text/plain"}))],oe),s(ae,se)};b(B,ae=>{e(S).error&&ae(U)})}f(ae=>Ae(ee,`duel_log_record duel_log_record_${ae??""} svelte-14z6bdh`),[()=>e(S).type.toSnakeCase()],oe),s(G,ee)}),f(()=>{var G,S,ee;Ae(W,`duel_log_block_duelist duel_log_block_duelist_${((G=e(V)[0].duelist)==null?void 0:G.seat)??"system"} svelte-14z6bdh`),Ae(H,`duelist ${((S=e(V)[0].duelist)==null?void 0:S.seat)??""} svelte-14z6bdh`),y(I,((ee=e(V)[0].duelist)==null?void 0:ee.profile.name)||"SYSTEM")}),s(F,W)}),f(()=>Ae(_e,`duel_log_block_phase duel_log_block_phase_${e($e)[0][0].clock.period.key??""} svelte-14z6bdh`)),s(xe,_e)}),f(()=>Ae(O,`duel_log_block_turn duel_log_block_turn_${e(Q)[0][0][0].clock.turn??""} svelte-14z6bdh`)),s(q,O)}),Ja(n,q=>C(t,q),()=>e(t)),s(M,D)};b(P,M=>{(v().duel.view.infoBoardState==="Log"||v().duel.view.infoBoardState==="Default")&&M(K)})}s(d,o),wt()}var vs=l("<div><div> </div> <div> </div></div>");function Pa(d,i){kt(i,!1);let t=ze(i,"duelist",12),v=be(0),u=be();const c=async()=>{const n=t().lp-e(v);if(!e(u)||Math.abs(n)<10){C(v,t().lp),e(u)&&(e(u)(),C(u,void 0));return}C(v,e(v)+Math.floor(Math.random()*n)),await Pt(100),c()},_=()=>{t(t()),!e(u)&&t().lp!==e(v)&&new Promise(n=>{C(u,n),Math.abs(t().lp-e(v)),c()})};t().duel.log.onUpdate.append(_),c(),xt();var o=vs(),P=a(o),K=a(P),M=r(P,2),D=a(M);f(n=>{Ae(o,`duelist duelist_${n??""} svelte-1sy3trd`),Ae(P,`duelist_name duelist_${n??""}_name svelte-1sy3trd`),y(K,t().profile.name),Ae(M,`duelist_lp ${(e(u)?"vibration":"")??""} svelte-1sy3trd`),y(D,e(v))},[()=>t().seat.toLowerCase()],oe),s(d,o),wt()}const ds=(d,i,t)=>(i(i()!=="Detail"?"Detail":"Normal"),console.info(t()),!0),cs=(d,i,t)=>(i(i()!=="Debug"?"Debug":"Normal"),console.info(t()),!0);var _s=l('<div class="duel_card_info_row svelte-1uevs9j" style=" justify-content: space-between;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div>'),us=l('<div></div> <div class="svelte-1uevs9j"> </div>',1),fs=l("<div> </div>"),ps=l('<span class="svelte-1uevs9j">/</span> <div class="monster_defense svelte-1uevs9j"> </div>',1),ys=l("<div> </div>"),gs=l('<div class="duel_card_info_row svelte-1uevs9j"><!> <!> <div style="flex-grow: 1;" class="svelte-1uevs9j"></div> <div class="monster_attack svelte-1uevs9j"> </div> <!></div> <div class="duel_card_info_row svelte-1uevs9j"></div>',1),ms=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),bs=l('<div class="duel_card_row svelte-1uevs9j"><div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div></div>'),hs=l("<!> <!>",1),ks=l('<pre class="description svelte-1uevs9j"> </pre>'),xs=l('<div class="duel_card_info_row svelte-1uevs9j" style="border-style: solid; border-width: 1px;"><!></div>'),ws=l('<pre class="description svelte-1uevs9j"> </pre>'),Cs=l('<!> <div class="duel_card_info_row svelte-1uevs9j"><!></div>',1),Ds=l('<div class="effect_counter_area_item svelte-1uevs9j"><span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j"> </span> <span class="svelte-1uevs9j">/</span> <span class="svelte-1uevs9j"> </span></div>'),$s=l('<div class="duel_card_info_row effect_counter_area svelte-1uevs9j"><div class="effect_counter_area_title svelte-1uevs9j">効果使用状況</div> <div class="effect_counter_area_body svelte-1uevs9j"></div></div>'),Ss=l("[ <!> ],",1),Ms=l('<div class="svelte-1uevs9j"> <!></div>'),js=l('<div class="svelte-1uevs9j"> </div> <!> <div class="svelte-1uevs9j"></div>',1),Ts=l('<div class="svelte-1uevs9j"> </div>'),Bs=l('<div class="svelte-1uevs9j"> </div>'),Es=l('<div class="svelte-1uevs9j"> </div>'),As=l('<div class="svelte-1uevs9j"> </div>'),Ls=l('<div class="svelte-1uevs9j"> </div>'),Ys=l('<div class="svelte-1uevs9j"> </div>'),Us=l('<div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"><!> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <!> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"></div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"></div></div></div>'),Ns=l('<div class="svelte-1uevs9j">※エラッタ前のカードです</div>'),Ps=l('<div class="svelte-1uevs9j">※テスト用カードです</div>'),qs=l('<a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-1uevs9j"> </a>'),Fs=l('<div class="duel_card_info_links svelte-1uevs9j"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-1uevs9j">⇒遊戯王カードWiki</a> <!></div>'),Hs=l("<!> <!>",1),Os=l('<div role="contentinfo"><div class="duel_card_info_header svelte-1uevs9j"><div class="duel_card_info_row svelte-1uevs9j"><div class="svelte-1uevs9j"> </div></div> <div class="duel_card_info_row svelte-1uevs9j" style="position:sticky; top:0;"><div class="svelte-1uevs9j"> </div> <div class="svelte-1uevs9j"> </div></div> <!></div> <div class="duel_card_info_body svelte-1uevs9j"><!></div> <div class="duel_card_info_footer svelte-1uevs9j"><!></div></div>');function Is(d,i){kt(i,!1);let t=ze(i,"entity",8,void 0),v=ze(i,"mode",12,"Normal");const u=async()=>{if(!t())return;const M=(await Gt).getCardInfo(t().origin.name);if(M)return M.cardId!==void 0&&!M.description&&!M.pendulumDescription&&await Ha([M.cardId]),M},c=()=>t()&&t().entityType==="Card"&&(t().origin.cardId??!1)?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=2&cid=${t().origin.cardId}`:t()?`https://www.db.yugioh-card.com/yugiohdb/card_search.action?ope=1&sess=1&rp=10&mode=&sort=1&keyword=${t().origin.name}&stype=1&ctype=&othercon=2&starfr=&starto=&pscalefr=&pscaleto=&linkmarkerfr=&linkmarkerto=&link_m=2&atkfr=&atkto=&deffr=&defto=&releaseDStart=1&releaseMStart=1&releaseYStart=1999&releaseDEnd=&releaseMEnd=&releaseYEnd=`:"";xt();var _=je(),o=N(_);{var P=K=>{var M=Os();M.__click=[ds,v,t],M.__contextmenu=[cs,v,t];var D=a(M),n=a(D),q=a(n),Q=a(q),O=r(n,2),A=a(O),Y=a(A),ie=r(A,2),xe=a(ie),$e=r(O,2);{var _e=T=>{var H=hs(),I=N(H);{var ce=S=>{var ee=_s(),z=a(ee),J=a(z),$=r(z,2),B=a($);f(()=>{y(J,`◀ ${t().psL??""}`),y(B,`${t().psR??""} ▶`)}),s(S,ee)};b(I,S=>{var ee;(ee=t().origin.monsterCategories)!=null&&ee.includes("Pendulum")&&S(ce)})}var Ce=r(I,2);{var ue=S=>{var ee=gs(),z=N(ee),J=a(z);ne(J,1,()=>t().attr,le,(j,w)=>{var p=us(),g=N(p),E=r(g,2),k=a(E);f(()=>{Ae(g,`monster_attr ${e(w)??""} svelte-1uevs9j`),y(k,`${pa[e(w)]??""}属性`)}),s(j,p)});var $=r(J,2);ne($,1,()=>t().types,le,(j,w)=>{var p=fs(),g=a(p);f(()=>{Ae(p,`monster_cat ${e(w)??""} svelte-1uevs9j`),y(g,`${ia[e(w)]??""}${ya[e(w)]??""}族`)}),s(j,p)});var B=r($,4),U=a(B),ae=r(B,2);{var se=j=>{var w=ps(),p=r(N(w),2),g=a(p);f(()=>y(g,t().def??"?")),s(j,w)};b(ae,j=>{var w;(w=t().status.monsterCategories)!=null&&w.includes("Link")||j(se)})}var Me=r(z,2);ne(Me,5,()=>t().status.monsterCategories??[],le,(j,w)=>{var p=ys(),g=a(p);f(()=>{Ae(p,`monster_cat ${e(w)??""} svelte-1uevs9j`),y(g,`${Xt[e(w)]??""}${ea[e(w)]??""}`)}),s(j,p)}),f(()=>y(U,t().atk??"?")),s(S,ee)},G=S=>{var ee=je(),z=N(ee);{var J=B=>{var U=ms(),ae=r(a(U),2),se=a(ae);f(()=>y(se,`${na[t().status.spellCategory]??""}魔法`)),s(B,U)},$=B=>{var U=je(),ae=N(U);{var se=Me=>{var j=bs(),w=r(a(j),2),p=a(w);f(()=>y(p,`${la[t().status.trapCategory]??""}罠`)),s(Me,j)};b(ae,Me=>{t().kind==="Trap"&&t().status.trapCategory&&Me(se)},!0)}s(B,U)};b(z,B=>{t().kind==="Spell"&&t().status.spellCategory?B(J):B($,!1)},!0)}s(S,ee)};b(Ce,S=>{t().kind==="Monster"?S(ue):S(G,!1)})}s(T,H)};b($e,T=>{v()!=="Debug"&&T(_e)})}var ve=r(D,2),Se=a(ve);{var m=T=>{var H=Cs(),I=N(H);{var ce=G=>{var S=xs(),ee=a(S);ht(ee,u,z=>{var J=ct('"読み込み中"');s(z,J)},(z,J)=>{var $=ks(),B=a($);f(()=>{var U;return y(B,(U=e(J))==null?void 0:U.pendulumDescription)}),s(z,$)}),s(G,S)};b(I,G=>{var S;(S=t().status.monsterCategories)!=null&&S.includes("Pendulum")&&G(ce)})}var Ce=r(I,2),ue=a(Ce);ht(ue,u,G=>{var S=ct('"読み込み中"');s(G,S)},(G,S)=>{var ee=ws(),z=a(ee);f(()=>{var J;return y(z,(J=e(S))==null?void 0:J.description)}),s(G,ee)}),s(T,H)},F=T=>{var H=je(),I=N(H);{var ce=ue=>{var G=je(),S=N(G);{var ee=z=>{var J=$s(),$=r(a(J),2);ne($,5,()=>t().actions,le,(B,U)=>{var ae=je();const se=oe(()=>e(U).actionCountUpperBound),Me=oe(()=>e(U).actionCount);var j=N(ae);{var w=p=>{var g=Ds(),E=a(g),k=a(E),me=r(E,2),pe=a(me),ye=r(me,4),Z=a(ye);f(()=>{y(k,e(U).title),y(pe,e(Me)),y(Z,e(se))}),s(p,g)};b(j,p=>{e(se)!==void 0&&e(Me)!==void 0&&p(w)})}s(B,ae)}),s(z,J)};b(S,z=>{t().actions.some(J=>J.actionCountUpperBoundKey)&&z(ee)})}s(ue,G)},Ce=ue=>{var G=Us(),S=a(G),ee=a(S);ne(ee,0,()=>["info","status"],le,(Ee,he)=>{var ke=js(),Ue=N(ke),Fe=a(Ue),Xe=r(Ue,2);ne(Xe,1,()=>Object.entries(t()[he]),le,(Ge,Ze)=>{let x=()=>e(Ze)[0],h=()=>e(Ze)[1];var L=Ms(),te=a(L),Ye=r(te);{var We=Ie=>{var He=Ss(),Ke=r(N(He));ne(Ke,1,h,le,(lt,Re)=>{var et=ct();f(_t=>y(et,`${_t??""},`),[()=>e(Re).toString()],oe),s(lt,et)}),s(Ie,He)},Te=Ie=>{var He=ct();f(Ke=>y(He,`${Ke??""},`),[()=>{var Ke;return(Ke=h())==null?void 0:Ke.toString()}],oe),s(Ie,He)};b(Ye,Ie=>{Array.isArray(h())?Ie(We):Ie(Te,!1)})}f(()=>y(te,`"${x()??""}" : `)),s(Ge,L)});var nt=r(Xe,2);nt.textContent="},",f(()=>y(Fe,`"${he??""}" :{`)),s(Ee,ke)});var z=r(ee,2);z.textContent='"actions" :[';var J=r(z,2);ne(J,1,()=>t().actions,le,(Ee,he)=>{var ke=Ts(),Ue=a(ke);f(()=>y(Ue,`"${e(he).playType??""} ${e(he).title??""}",`)),s(Ee,ke)});var $=r(J,2);$.textContent="],";var B=r($,2);B.textContent='"substituteEffects" :[';var U=r(B,2);ne(U,1,()=>t().substituteEffects,le,(Ee,he)=>{var ke=Bs(),Ue=a(ke);f(()=>y(Ue,`"${e(he).title??""}",`)),s(Ee,ke)});var ae=r(U,2);ae.textContent="],";var se=r(ae,2);se.textContent='"continuousEffects" :[';var Me=r(se,2);ne(Me,1,()=>t().continuousEffects,le,(Ee,he)=>{var ke=Es(),Ue=a(ke);f(()=>y(Ue,`"${e(he).isStarted??""}",`)),s(Ee,ke)});var j=r(Me,2);j.textContent="],";var w=r(j,2);w.textContent='"procFilters" :[';var p=r(w,2);ne(p,1,()=>t().procFilterBundle.operators,le,(Ee,he)=>{var ke=As(),Ue=a(ke);f(Fe=>y(Ue,`"${Fe??""} ${e(he).title??""} ${e(he).isEffective??""} ",`),[()=>e(he).isSpawnedBy.toString()],oe),s(Ee,ke)});var g=r(p,2);g.textContent="],";var E=r(g,2);E.textContent='"numericStateOperators" :[';var k=r(E,2);ne(k,1,()=>t().numericOprsBundle.operators,le,(Ee,he)=>{var ke=Ls(),Ue=a(ke);f(Fe=>y(Ue,`"${Fe??""} ${e(he).title??""} ${e(he).isEffective??""} ${e(he).isContinuous??""} ${e(he).targetState??""} ${e(he).targetStateGen??""} ",`),[()=>e(he).isSpawnedBy.toString()],oe),s(Ee,ke)});var me=r(k,2);me.textContent="],";var pe=r(me,2);pe.textContent='"stateOperators" :[';var ye=r(pe,2);ne(ye,1,()=>t().statusOperatorBundle.operators,le,(Ee,he)=>{var ke=Ys(),Ue=a(ke);f(Fe=>y(Ue,`"${Fe??""} ${e(he).title??""} ${e(he).isEffective??""} ",`),[()=>e(he).isSpawnedBy.toString()],oe),s(Ee,ke)});var Z=r(ye,2);Z.textContent="],";var X=r(Z,2);X.textContent='"lastMoveLogRecord" :{';var R=r(X,2),ge=a(R),Pe=r(R,2),qe=a(Pe),Ne=r(Pe,2),Le=a(Ne),Ve=r(Ne,2);Ve.textContent="},",f((Ee,he)=>{y(ge,`"movedBy":"${Ee??""}",`),y(qe,`"movedAs":"${he??""}",`),y(Le,`"movedAt":"${t().moveLog.latestRecord.movedAt.totalProcSeq??""}",`)},[()=>{var Ee;return(Ee=t().moveLog.latestRecord.movedBy)==null?void 0:Ee.toString()},()=>t().moveLog.latestRecord.movedAs.join(" ")],oe),s(ue,G)};b(I,ue=>{v()==="Detail"?ue(ce):ue(Ce,!1)},!0)}s(T,H)};b(Se,T=>{v()==="Normal"?T(m):T(F,!1)})}var V=r(ve,2),W=a(V);{var we=T=>{var H=Hs(),I=N(H);{var ce=S=>{var ee=Ns();s(S,ee)};b(I,S=>{t().origin.isOldVersion&&S(ce)})}var Ce=r(I,2);{var ue=S=>{var ee=Ps();s(S,ee)},G=S=>{var ee=Fs(),z=a(ee),J=r(z,2);{var $=B=>{var U=qs(),ae=a(U);f(se=>{var Me;Ct(U,"href",se),y(ae,`⇒${((Me=t())!=null&&Me.origin.cardId?"公式カードページ":"公式で検索")??""}`)},[c],oe),s(B,U)};b(J,B=>{t()&&t().entityType==="Card"&&B($)})}f(()=>Ct(z,"href",`https://yugioh-wiki.net/index.php?${t().origin.wikiEncodedName}`)),s(S,ee)};b(Ce,S=>{t().origin.isForTest?S(ue):S(G,!1)})}s(T,H)};b(W,T=>{t()&&T(we)})}f((T,H,I)=>{Ae(M,`duel_card duel_card_info ${t().origin.kind??""} ${T??""} svelte-1uevs9j`),y(Q,t().nm),y(Y,H),y(xe,I)},[()=>{var T;return(T=t().origin.monsterCategories)==null?void 0:T.join(" ")},()=>"★".repeat(t().lvl||0),()=>"☆".repeat(t().rank||0)],oe),s(K,M)};b(o,K=>{t()&&K(P)})}s(d,_),wt()}Fa(["click","contextmenu"]);var Rs=l('<div class="duel_field_cell_info_item svelte-1xj7qf1"><!></div>'),Ks=l('<div class="duel_field_cell_info_box svelte-1xj7qf1"><div class="duel_field_cell_info_label svelte-1xj7qf1"> </div> <!></div>'),Ws=l('<div class="duel_field_cell_info svelte-1xj7qf1"><div class="duel_field_cell_info_header item_btn svelte-1xj7qf1"><div class="svelte-1xj7qf1"> </div> <div class="svelte-1xj7qf1"> </div></div> <div class="duel_field_cell_info_body svelte-1xj7qf1"></div></div>');function zs(d,i){kt(i,!1);let t=ze(i,"cell",12);const v=()=>{t(t())},u=P=>t().cardEntities.filter(K=>K.face===P);t().field.duel.view.onDuelUpdate.append(v),xt();var c=je(),_=N(c);{var o=P=>{var K=Ws(),M=a(K),D=a(M),n=a(D),q=r(D,2),Q=a(q),O=r(M,2);ne(O,4,()=>["FaceUp","FaceDown"],le,(A,Y)=>{var ie=je(),xe=N(ie);{var $e=_e=>{var ve=Ks(),Se=a(ve),m=a(Se),F=r(Se,2);ne(F,1,()=>u(Y).toSorted(Za),le,(V,W)=>{var we=Rs(),T=a(we);const H=oe(()=>t().owner===t().field.duel.duelists.Below);Ht(T,{get entity(){return e(W)},get isVisibleForcibly(){return e(H)},isWideMode:!0,cardActionResolve:void 0}),s(V,we)}),f(()=>y(m,Y==="FaceUp"?"表向き":"裏向き")),s(_e,ve)};b(xe,_e=>{u(Y).length&&_e($e)})}s(A,ie)}),f(()=>{var A;y(n,(A=t().owner)==null?void 0:A.profile.name),y(Q,t().cellType)}),s(P,K)};b(_,P=>{t().field.duel.view.infoBoardState==="CellInfo"&&P(o)})}s(d,c),wt()}var Vs=l('<div class="duel_config_item svelte-y4u26k"><label class="toggle svelte-y4u26k"><input type="checkbox" class="svelte-y4u26k"></label> <span class="svelte-y4u26k"> </span></div>'),Gs=l('<div class="duel_config svelte-y4u26k"><div class="duel_config_title svelte-y4u26k">デュエル設定</div> <div class="duel_config_group svelte-y4u26k"><div class="duel_config_group_title svelte-y4u26k">チェーン設定</div> <!></div></div>');function Xs(d,i){kt(i,!1);let t=ze(i,"viewController",8),v=ze(i,"userProfile",12);xt();var u=je(),c=N(u);{var _=o=>{var P=Gs(),K=r(a(P),2),M=r(a(K),2);ne(M,1,()=>ar,le,(D,n)=>{var q=Vs(),Q=a(q),O=a(Q),A=r(Q,2),Y=a(A);f(()=>y(Y,er[e(n)])),tr(O,()=>v().chainConfig[e(n)],ie=>v(v().chainConfig[e(n)]=ie,!0)),de("change",O,()=>v().save()),s(D,q)}),s(o,P)};b(c,o=>{t().infoBoardState==="Config"&&o(_)})}s(d,u),wt()}function Qs(d,{from:i,to:t},v={}){var{delay:u=0,duration:c=ve=>Math.sqrt(ve)*120,easing:_=_a}=v,o=getComputedStyle(d),P=o.transform==="none"?"":o.transform,[K,M]=o.transformOrigin.split(" ").map(parseFloat);K/=d.clientWidth,M/=d.clientHeight;var D=Js(d),n=d.clientWidth/t.width/D,q=d.clientHeight/t.height/D,Q=i.left+i.width*K,O=i.top+i.height*M,A=t.left+t.width*K,Y=t.top+t.height*M,ie=(Q-A)*n,xe=(O-Y)*q,$e=i.width/t.width,_e=i.height/t.height;return{delay:u,duration:typeof c=="function"?c(Math.sqrt(ie*ie+xe*xe)):c,easing:_,css:(ve,Se)=>{var m=Se*ie,F=Se*xe,V=ve+Se*$e,W=ve+Se*_e;return`transform: ${P} translate(${m}px, ${F}px) scale(${V}, ${W});`}}}function Js(d){if("currentCSSZoom"in d)return d.currentCSSZoom;for(var i=d,t=1;i!==null;)t*=+getComputedStyle(i).zoom,i=i.parentElement;return t}var Zs=l('<div class="chain_number svelte-lqu21u"> </div>'),ei=l('<div class="duel_card_row svelte-lqu21u"> </div>'),ti=l('<div class="appendix svelte-lqu21u"> </div>'),ai=l('<div class="appendix_wrapper svelte-lqu21u"></div>'),ri=l('<div><div><!> <div> </div> <div><!> <div class="duel_card_row svelte-lqu21u"><div> </div> <!></div></div></div></div>'),si=l("<div></div>");function ii(d,i){kt(i,!1);let t=ze(i,"duel",8),v=ze(i,"position",8,"left");const u=-100,c=()=>v()==="left"?-100:100;let _=be([]),o=Promise.resolve(),P=Promise.resolve();const K=1e3,M=500,D=400,n=Q=>{const O={...Q};O.isKnown=Q.chainBlockInfo.action.entity.controller.duelistType==="Player"||Q.chainBlockInfo.action.entity.face==="FaceUp",O.chainBlockInfo.onStateChange.append(A=>{if(A==="done"||A==="failed"||A==="negated")return o=o.then(async()=>{const Y=new Date().getTime()-O.chainBlockInfo.wasSpawnedAt.getTime();Y<K&&await Pt(K-Y),C(_,e(_).filter(ie=>ie.seq!==O.seq)),await Pt(M+D)}).then(),"RemoveMe";C(_,e(_))}),P=P.then(async()=>{C(_,[O,...e(_)].sort((A,Y)=>rr.isSameChain(A.clock,Y.clock)&&A.chainBlockInfo.action.isWithChainBlock&&Y.chainBlockInfo.action.isWithChainBlock?Y.clock.totalProcSeq-A.clock.totalProcSeq:A.clock.totalProcSeq-Y.clock.totalProcSeq)),await Pt(300)}),o=o.then(()=>Pt(1e3))};t().chainBlockLog.onInsert.append(n),xt();var q=si();ne(q,13,()=>e(_),Q=>Q.seq,(Q,O)=>{var A=ri();const Y=oe(()=>{const{activator:I,action:ce,appendix:Ce}=e(O).chainBlockInfo;return{activator:I,action:ce,appendix:Ce}});var ie=a(A),xe=a(ie);{var $e=I=>{var ce=Zs(),Ce=a(ce);f(()=>y(Ce,`チェーン：${e(O).chainBlockInfo.chainNumber??""}`)),s(I,ce)};b(xe,I=>{e(O).chainBlockInfo.chainNumber&&I($e)})}var _e=r(xe,2),ve=a(_e),Se=r(_e,2),m=a(Se);{var F=I=>{var ce=ei(),Ce=a(ce);f(()=>y(Ce,e(O).isKnown?e(Y).action.entity.nm:"？？？")),s(I,ce)};b(m,I=>{(e(Y).action.entity.entityType==="Card"||e(Y).action.entity.entityType==="Token")&&I(F)})}var V=r(m,2),W=a(V),we=a(W),T=r(W,2);{var H=I=>{var ce=ai();ne(ce,5,()=>e(Y).appendix,le,(Ce,ue)=>{var G=ti(),S=a(G);f(()=>y(S,e(ue))),s(Ce,G)}),s(I,ce)};b(T,I=>{e(Y).appendix&&I(H)})}f((I,ce,Ce)=>{Ae(A,`cut_in_row ${(!e(O).chainBlockInfo.chainNumber||e(O).chainBlockInfo.chainNumber===1?"cut_in_row_first":"")??""} svelte-lqu21u`),Ae(ie,`cut_in_item cut_in_item_${I??""} cut_in_item_${e(O).chainBlockInfo.state??""} svelte-lqu21u`),Ae(_e,`duelist_name duelist_${I??""}_name svelte-lqu21u`),y(ve,e(Y).activator.profile.name),Ae(Se,`duel_card duel_card_${I??""} ${ce??""} ${(e(O).isKnown?e(Y).action.entity.origin.kind:"")??""} ${e(Y).action.entity.entityType??""}  svelte-lqu21u`),y(we,Ce)},[()=>e(Y).activator.seat.toLowerCase(),()=>e(O).isKnown?(e(Y).action.entity.status.monsterCategories??[]).join(" "):"Token",()=>e(Y).action.toString()],oe),re(3,ie,()=>jr,()=>new Date().getTime()-e(O).chainBlockInfo.wasSpawnedAt.getTime()<K?{x:c(),duration:D}:{y:u,duration:D}),sr(A,()=>Qs,()=>({duration:M})),s(Q,A)}),f(()=>Ae(q,`cut_in_container cut_in_container_${v()??""} svelte-lqu21u`)),s(d,q),wt()}const ni=Tr({duration:400});var li=l('<div class="duel_desk_left v_flex svelte-1w535im"><!> <!> <!></div>'),oi=l('<button class="duel_field_header_message svelte-1w535im"> </button> <div class="duel_field_header_buttons svelte-1w535im"><button class="svelte-1w535im">サレンダー</button></div>',1),vi=l("<tr></tr>"),di=l('<table class="duel_field svelte-1w535im"><tbody class="svelte-1w535im"></tbody></table>'),ci=l('<button class="svelte-1w535im">OK</button>'),_i=l('<button class="svelte-1w535im">cancel</button>'),ui=l("<!> <!>",1),fi=l('<button class="svelte-1w535im"> </button>'),pi=l('<div style="text-align: left;"><!> <!> <!></div>'),yi=l('<div><!> <div class=" duel_desk_center v_flex svelte-1w535im"><div class="duel_field_header svelte-1w535im"><!></div> <div class="duel_field_body svelte-1w535im"><!></div> <div class="duel_field_footer svelte-1w535im"><!></div></div> <!></div> <div style="position:fixed;bottom:0"> </div> <!> <div><!></div>',1);function gi(d,i){kt(i,!1);let t=ze(i,"duel",12),v=ze(i,"userProfile",8),u=be(0),c=be(0),_=be([]),o=be([]),P=()=>{},K=be([]),M=be(),D=be(),n=be(()=>!1),q=be(!1);const Q=p=>{P=p.resolve,C(K,p.dummyActionInfos.filter(g=>g.action.entity.entityType==="Duelist").filter(g=>g.action.entity.controller.seat==="Below")),C(M,void 0),C(D,void 0),C(o,[]),C(_,[]),C(q,!1),p.entitiesChoices&&(C(M,p.entitiesChoices),C(n,()=>{var g;return((g=p.entitiesChoices)==null?void 0:g.validator(e(_)))??!1}),C(q,p.entitiesChoices.cancelable),e(M).selectables.every(g=>g.cell.isPlayFieldCell&&g.getIndexInCell()===0||g.cell.cellType==="Hand"&&g.controller.duelistType==="Player"||g.entityType==="Duelist")||t().view.modalController.entitySelector.show({title:t().view.message,position:"Middle",entitiesChoices:p.entitiesChoices,chainBlockInfos:p.chainBlockInfos,cancelable:p.entitiesChoices.cancelable}).then(g=>{P({selectedEntities:g})})),p.cellsChoices&&(C(D,p.cellsChoices),C(n,()=>{var g;return((g=p.cellsChoices)==null?void 0:g.validator(e(o)))??!1}),C(q,p.cellsChoices.cancelable))};t().view.onWaitStart.append(Q);const O=()=>{P=()=>{},C(D,void 0),C(M,void 0),C(o,[]),C(_,[]),C(n,()=>!1),C(q,!1)};t().view.onWaitEnd.append(O);let A=be(void 0),Y=be("Normal");const ie=({card:p,mode:g})=>{C(A,p),C(Y,g??(e(A)===p||e(Y)==="Normal"?"Detail":"Normal"))};t().view.onShowCardEntity.append(ie);const xe=()=>{t(t())};t().view.onDuelUpdate.append(xe),t().log.onUpdate.append(xe);const $e=()=>{e(M)&&e(M).validator(e(_))&&P({selectedEntities:e(_)}),e(D)&&e(D).validator(e(o))&&P({selectedCells:e(o)})},_e=()=>{P({})},ve=p=>{P({actionInfo:p})},Se=()=>{P({surrender:!0})};t().main();const m=()=>e(u)<=1400?"compact":"wide";xt();var F=yi(),V=N(F),W=a(V);{var we=p=>{var g=li(),E=a(g);Pa(E,{get duelist(){return t().duelists.Above}});var k=r(E,2);Is(k,{get entity(){return e(A)},get mode(){return e(Y)}});var me=r(k,2);Pa(me,{get duelist(){return t().duelists.Below}}),s(p,g)};b(W,p=>{m()==="wide"&&p(we)})}var T=r(W,2),H=a(T),I=a(H);{var ce=p=>{var g=oi(),E=N(g),k=a(E),me=r(E,2),pe=a(me);f(()=>y(k,`[TURN:${t().clock.turn}][PHASE:${t().phase}] ${t().view.message}`)),de("click",E,()=>{t(t().view.infoBoardState="Log",!0)}),de("click",pe,Se),s(p,g)};b(I,p=>{t().isEnded||p(ce)})}var Ce=r(H,2),ue=a(Ce);{var G=p=>{var g=di(),E=a(g);ne(E,5,()=>t().field.cells,le,(k,me,pe)=>{var ye=vi();Ae(ye,`${`duel_desk_row_${pe}`??""} svelte-1w535im`),ne(ye,5,()=>e(me),le,(Z,X,R)=>{Qr(Z,{get view(){return t().view},row:pe,column:R,get selectedEntities(){return e(_)},set selectedEntities(ge){C(_,ge)},get selectedCells(){return e(o)},set selectedCells(ge){C(o,ge)},$$legacy:!0})}),s(k,ye)}),s(p,g)};b(ue,p=>{t().clock.turn>0&&p(G)})}var S=r(Ce,2),ee=a(S);{var z=p=>{var g=ui(),E=N(g);{var k=ye=>{var Z=ci();f(X=>Z.disabled=X,[()=>!e(n)()],oe),de("click",Z,$e),s(ye,Z)};b(E,ye=>{((e(M)&&e(M).qty)??(e(D)&&e(D).qty)??9999)>1&&ye(k)})}var me=r(E,2);{var pe=ye=>{var Z=_i();de("click",Z,_e),s(ye,Z)};b(me,ye=>{e(q)&&ye(pe)})}s(p,g)},J=p=>{var g=je(),E=N(g);ne(E,1,()=>e(K),le,(k,me)=>{var pe=fi(),ye=a(pe);f(()=>y(ye,e(me).action.title)),de("click",pe,()=>ve(e(me))),s(k,pe)}),s(p,g)};b(ee,p=>{e(M)&&e(M).selectables.length||e(D)&&e(D).selectables?p(z):p(J,!1)})}var $=r(T,2);{var B=p=>{var g=pi(),E=a(g);os(E,{get log(){return t().log}});var k=r(E,2);zs(k,{get cell(){return t().view.infoBoardCell}});var me=r(k,2);Xs(me,{get userProfile(){return v()},get viewController(){return t().view}}),f(pe=>Ae(g,`duel_desk_right duel_desk_right_${pe??""}  svelte-1w535im`),[()=>t().view.infoBoardState.toLowerCase()],oe),re(3,g,()=>fe,()=>({duration:e(u)>1400?0:200,axis:"x"})),s(p,g)};b($,p=>{(e(u)>1400||t().view.infoBoardState!=="Default")&&p(B)})}var U=r(V,2),ae=a(U),se=r(U,2);ir(se,{get modalController(){return t().view.modalController}});var Me=r(se,2),j=a(Me);const w=oe(()=>m()==="wide"?"right":"left");ii(j,{get duel(){return t()},get position(){return e(w)}}),f((p,g)=>{Ae(V,`flex duel_desk ${p??""}_mode svelte-1w535im`),y(ae,g),Ae(Me,`cutin ${p??""}_mode svelte-1w535im`)},[m,()=>t().clock.toFullString()],oe),ta("innerWidth",p=>C(u,p)),ta("innerHeight",p=>C(c,p)),s(d,F),wt()}var mi=l('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr" title="※shiftキー同時押しで一括外し">クリア</button></div>'),bi=l('<div class="svelte-niobyr"><button class="button_style_reset svelte-niobyr">クリア</button></div>'),hi=l("<div></div>"),ki=l("<!> <!> <!> <!> <!>",1),xi=l('<span> </span> / <span style="display: inline-block;width:2rem;text-align: right;"> </span>',1),wi=l('<li class="deck_editor_item svelte-niobyr"><div role="listitem"><div class="svelte-niobyr"><div class="svelte-niobyr"> </div> <div style="display:flex; flex-wrap: wrap;" class="svelte-niobyr"><div style="text-wrap-mode: nowrap;" class="svelte-niobyr"><!> <!> <!></div> <div style="flex-grow: 1; height:0px; width:0px" class="svelte-niobyr"></div> <div style="text-wrap-mode: nowrap;" class="svelte-niobyr"><!></div></div></div></div> <button class="button_style_reset svelte-niobyr">+</button> <button class="button_style_reset svelte-niobyr">-</button></li>'),Ci=l('<div class="deck_editor_card_kind svelte-niobyr"><div class="deck_editor_card_kind_header svelte-niobyr"><div class="svelte-niobyr"> <!></div> <!></div> <ul class="svelte-niobyr"></ul></div>'),Di=l('<div class="deck_editor_deck_type svelte-niobyr"><div class="deck_editor_deck_type_header svelte-niobyr"><div class="svelte-niobyr"> </div> <!></div> <!></div>'),$i=l('<div class="svelte-niobyr">読み込み中...</div>'),Si=l('<div class="deck_editor_card_list svelte-niobyr"><!></div>');function qa(d,i){kt(i,!1);let t=ze(i,"allCardInfos",8),v=ze(i,"deckCardInfos",12),u=ze(i,"mode",8),c=ze(i,"onAttention",8),_=ze(i,"searchCondition",8,void 0);const o=500,P={Deck:["Monster","Spell","Trap"],ExtraDeck:["Monster"]},K={ExtraDeck:{Monster:[],Spell:[],Trap:[]},Deck:{Monster:[],Spell:[],Trap:[]}},M=m=>{var F;return(F=m.monsterCategories)!=null&&F.union(Lt).length?"ExtraDeck":"Deck"},D=()=>{const m=(F,V)=>{var W;return ca(F,V,(W=_())==null?void 0:W.sort.filter(we=>we.priority>0).toSorted((we,T)=>we.priority-T.priority))};Object.values(K).forEach(F=>Object.values(F).forEach(V=>V.sort(m)))},n=m=>{Object.values(K).forEach(F=>Object.values(F).forEach(V=>V.reset())),m.filter(F=>F.kind!=="XyzMaterial").forEach(F=>{var W;if(F.kind==="XyzMaterial")return;const V=(W=F.monsterCategories)!=null&&W.union(Lt).length?"ExtraDeck":"Deck";K[V][F.kind].push(F)}),D()},q=u()==="List"?new Promise(m=>{n(t()),m()}):Promise.resolve(),Q=()=>(u()==="Deck"&&(n(v()),C(ie,v().length)),K),O=(m,F,V)=>{v(v().filter(W=>M(W)!==F||W.kind!==V&&V))},A=(m,F)=>{try{if(m.ctrlKey){v().push(F);return}const V=v().filter(we=>we.name===F.name).length;if(V>2)return;const W=m.shiftKey?3-V:1;if(W<1)return;v().push(...Array(W).fill(F))}finally{v().sort(ca),v(v())}},Y=(m,F)=>{let V=0;v(v().filter(W=>W.name!==F.name?!0:(V++,!m.shiftKey&&V>1))),v().sort(ca)};let ie=be(100);const xe=()=>{C(ie,e(ie)+10),!(e(ie)>=o)&&(e(ie)>t().length+v().length||Pt(100).then(xe))};let $e=be("");const _e=(m,F,V,W)=>{var T;if(!_())return!0;if(m.kind==="XyzMaterial")return!1;const we=m.kind!=="Monster"?m.kind:(T=m.monsterCategories)!=null&&T.union(Lt).length?"ExtraMonster":"Monster";if(!_().deckCardKinds.includes(we)||_().name.trim().length&&[m.name,...m.nameTags??[],...m.textTags??[]].every(I=>!I.includes(_().name))||!m.isImplemented&&!_().others.includes("implemented")||m.isForTest&&!_().others.includes("test")||m.isOldVersion&&!_().others.includes("oldVersion"))return!1;if(m.kind==="Monster"){if(m.attributes&&!_().monsterAttributes.union(m.attributes).length||m.types&&!_().monsterTypes.union(m.types).length)return!1;const H=m.level??m.rank??m.link;return Et(_().starLowerBound)&&(H??0)<_().starLowerBound||Et(_().starUpperBound)&&(H??0)>_().starUpperBound||Et(_().atkLowerBound)&&(m.attack??0)<_().atkLowerBound||Et(_().atkUpperBound)&&(m.attack??0)>_().atkUpperBound||Et(_().defLowerBound)&&(m.defense??0)<_().defLowerBound||Et(_().defUpperBound)&&(m.defense??0)>_().defUpperBound||Et(_().atkPlusDef)&&(!Et(m.attack)||!Et(m.defense)||m.attack+m.defense!==_().atkPlusDef)||!m.monsterCategories||we==="ExtraMonster"&&!m.monsterCategories.union(_().exMonsterCategories).length?!1:m.monsterCategories.union(_().monsterCategories).length}if(m.kind==="Spell")return m.spellCategory&&_().spellCategories.includes(m.spellCategory);if(m.kind==="Trap")return m.trapCategory&&_().trapCategories.includes(m.trapCategory)};nr(()=>(Da(u()),Da(_()),e($e),Pt),()=>{var m;if(u()==="List"){const F=JSON.stringify((m=_())==null?void 0:m.sort);e($e)!==F&&(C($e,F),D()),C(ie,100),Pt(100).then(xe)}}),lr(),xt();var ve=Si(),Se=a(ve);ht(Se,()=>q,m=>{var F=$i();s(m,F)},m=>{var F=je();const V=oe(Q);var W=N(F);ne(W,1,()=>dr.toReversed(),le,(we,T)=>{var H=Di();const I=oe(()=>Object.values(e(V)[e(T)]).flatMap(z=>z));var ce=a(H),Ce=a(ce),ue=a(Ce),G=r(Ce,2);{var S=z=>{var J=mi(),$=a(J);de("click",$,B=>O(B,e(T),void 0)),s(z,J)};b(G,z=>{u()==="Deck"&&e(I).some(_e)&&z(S)})}var ee=r(ce,2);ne(ee,1,()=>sa(e(V)[e(T)]).filter(z=>P[e(T)].includes(z)),le,(z,J)=>{var $=Ci();const B=oe(()=>e(V)[e(T)][e(J)].filter((...E)=>_e(...E,e(J))));var U=a($),ae=a(U),se=a(ae),Me=r(se);{var j=E=>{var k=ct();f(me=>y(k,`※表示上限${me??""}枚`),[()=>o.toLocaleString()],oe),s(E,k)};b(Me,E=>{e(B).length>o&&E(j)})}var w=r(ae,2);{var p=E=>{var k=bi(),me=a(k);de("click",me,pe=>O(pe,e(T),e(J))),s(E,k)};b(w,E=>{u()==="Deck"&&e(B).length&&E(p)})}var g=r(U,2);ne(g,5,()=>e(B),le,(E,k,me)=>{var pe=je(),ye=N(pe);{var Z=X=>{var R=wi(),ge=a(R),Pe=a(ge),qe=a(Pe),Ne=a(qe),Le=r(qe,2),Ve=a(Le),Ee=a(Ve);{var he=L=>{var te=ki(),Ye=N(te);{var We=Re=>{var et=ct();f(()=>y(et,`★${e(k).level??""}`)),s(Re,et)};b(Ye,Re=>{e(k).level&&Re(We)})}var Te=r(Ye,2);{var Ie=Re=>{var et=ct();f(()=>y(et,`☆${e(k).rank??""}`)),s(Re,et)};b(Te,Re=>{e(k).rank&&Re(Ie)})}var He=r(Te,2);ne(He,1,()=>e(k).attributes??[],le,(Re,et)=>{var _t=hi();f(()=>Ae(_t,`monster_attr ${e(et)??""} svelte-niobyr`)),s(Re,_t)});var Ke=r(He,2);ne(Ke,1,()=>e(k).types??[],le,(Re,et)=>{var _t=ct();f(()=>y(_t,ia[e(et)])),s(Re,_t)});var lt=r(Ke,2);ne(lt,1,()=>e(k).monsterCategories??[],le,(Re,et)=>{var _t=ct();f(()=>y(_t,Xt[e(et)])),s(Re,_t)}),s(L,te)};b(Ee,L=>{e(k).kind==="Monster"&&L(he)})}var ke=r(Ee,2);{var Ue=L=>{var te=ct();f(()=>y(te,`${na[e(k).spellCategory]??""}魔法`)),s(L,te)};b(ke,L=>{e(k).spellCategory&&L(Ue)})}var Fe=r(ke,2);{var Xe=L=>{var te=ct();f(()=>y(te,`${la[e(k).trapCategory]??""}罠`)),s(L,te)};b(Fe,L=>{e(k).trapCategory&&L(Xe)})}var nt=r(Ve,4),Ge=a(nt);{var Ze=L=>{var te=xi(),Ye=N(te),We=a(Ye),Te=r(Ye,2),Ie=a(Te);f(()=>{y(We,e(k).attack??"?"),y(Ie,e(k).defense??"?")}),s(L,te)};b(Ge,L=>{e(k).kind==="Monster"&&L(Ze)})}var x=r(ge,2),h=r(x,2);f(L=>{Ae(ge,`${L??""} svelte-niobyr`),y(Ne,e(k).name),x.disabled=!e(k).isImplemented,Ct(x,"title",e(k).isImplemented?"※shiftキー同時押しで一括投入":""),h.disabled=!e(k).isImplemented,Ct(h,"title",e(k).isImplemented?"※shiftキー同時押しで一括外し":"")},[()=>{var L,te;return`deck_editor_card duel_card ${e(k).kind} ${(te=(L=e(k))==null?void 0:L.monsterCategories)==null?void 0:te.join(" ")} ${e(k).isImplemented?"is_implemented":"is_not_implemented"}`}],oe),de("click",ge,()=>c()(e(k))),de("click",x,L=>A(L,e(k))),de("click",h,L=>Y(L,e(k))),s(X,R)};b(ye,X=>{me<e(ie)&&X(Z)})}s(E,pe)}),f((E,k)=>y(se,`${or[e(J)]??""}（${E??""} / ${k??""}枚） `),[()=>e(B).length.toLocaleString(),()=>e(V)[e(T)][e(J)].length.toLocaleString()],oe),s(z,$)}),f((z,J)=>y(ue,`${vr[e(T)]??""}（${z??""} / ${J??""}枚）`),[()=>e(I).filter(_e).length.toLocaleString(),()=>e(I).length.toLocaleString()],oe),s(we,H)}),s(m,F)}),s(d,ve),wt()}var Mi=l('<div class="duel_card_info_row svelte-rccxcp" style="position:sticky; top:0;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>'),ji=l('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <div class="duel_card_info_row svelte-rccxcp" style=" justify-content: space-between;"><div class="svelte-rccxcp"> </div> <div class="svelte-rccxcp"> </div></div>',1),Ti=l('<div></div> <div class="svelte-rccxcp"> </div>',1),Bi=l("<div> </div>"),Ei=l('<span class="svelte-rccxcp">/</span> <div class="monster_defense svelte-rccxcp"> </div>',1),Ai=l("<div> </div>"),Li=l('<div class="duel_card_info_row svelte-rccxcp"><!> <!> <div style="flex-grow: 1;" class="svelte-rccxcp"></div> <div class="monster_attack svelte-rccxcp"> </div> <!></div> <div class="duel_card_info_row svelte-rccxcp"></div>',1),Yi=l('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Ui=l('<div class="duel_card_row svelte-rccxcp"><div class="svelte-rccxcp"></div> <div class="svelte-rccxcp"> </div></div>'),Ni=l('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※エラッタ前カードです</div></div>'),Pi=l('<div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp">※テスト用カードです</div></div>'),qi=l('<div class="duel_card_info_links svelte-rccxcp"><a target="_blank" rel="noopener noreferrer" title="遊戯王カードWiki" class="svelte-rccxcp">⇒遊戯王カードWiki</a> <a target="_blank" rel="noopener noreferrer" title="コナミカードデータベース" class="svelte-rccxcp"> </a></div>'),Fi=l('<div><div class="duel_card_info_header svelte-rccxcp"><div class="duel_card_info_row svelte-rccxcp"><div class="svelte-rccxcp"> </div></div> <!></div> <div class="duel_card_info_body svelte-rccxcp"><!> <!> <div class="duel_card_info_row description svelte-rccxcp"><div class="svelte-rccxcp"><pre class="description svelte-rccxcp"> </pre></div></div> <!> <!></div></div>');function Hi(d,i){kt(i,!1);let t=ze(i,"cardInfo",8,void 0);xt();var v=je(),u=N(v);{var c=_=>{var o=Fi(),P=a(o),K=a(P),M=a(K),D=a(M),n=r(K,2);{var q=T=>{var H=Mi(),I=a(H),ce=a(I),Ce=r(I,2),ue=a(Ce);f((G,S)=>{y(ce,G),y(ue,S)},[()=>"★".repeat(t().level||0),()=>"☆".repeat(t().rank||0)],oe),s(T,H)};b(n,T=>{t().kind==="Monster"&&T(q)})}var Q=r(P,2),O=a(Q);{var A=T=>{var H=ji(),I=N(H),ce=a(I),Ce=a(ce),ue=a(Ce),G=r(I,2),S=a(G),ee=a(S),z=r(S,2),J=a(z);f(()=>{y(ue,t().pendulumDescription),y(ee,`◀ ${t().pendulumScaleL??""}`),y(J,`${t().pendulumScaleR??""} ▶`)}),s(T,H)};b(O,T=>{var H;(H=t().monsterCategories)!=null&&H.includes("Pendulum")&&T(A)})}var Y=r(O,2);{var ie=T=>{var H=Li(),I=N(H),ce=a(I);{var Ce=B=>{var U=Ti(),ae=N(U),se=r(ae,2),Me=a(se);f(()=>{Ae(ae,`monster_attr ${t().attributes[0]??""} svelte-rccxcp`),y(Me,`${pa[t().attributes[0]]??""}属性`)}),s(B,U)};b(ce,B=>{t().attributes&&B(Ce)})}var ue=r(ce,2);{var G=B=>{var U=Bi(),ae=a(U);f(()=>{Ae(U,`monster_cat ${t().types[0]??""} svelte-rccxcp`),y(ae,`${ia[t().types[0]]??""}${ya[t().types[0]]??""}族`)}),s(B,U)};b(ue,B=>{t().types&&B(G)})}var S=r(ue,4),ee=a(S),z=r(S,2);{var J=B=>{var U=Ei(),ae=r(N(U),2),se=a(ae);f(()=>y(se,t().defense??"?")),s(B,U)};b(z,B=>{var U;(U=t().monsterCategories)!=null&&U.includes("Link")||B(J)})}var $=r(I,2);ne($,5,()=>t().monsterCategories??[],le,(B,U)=>{var ae=Ai(),se=a(ae);f(()=>{Ae(ae,`monster_cat ${e(U)??""} svelte-rccxcp`),y(se,`${Xt[e(U)]??""}${ea[e(U)]??""}`)}),s(B,ae)}),f(()=>y(ee,t().attack??"?")),s(T,H)},xe=T=>{var H=je(),I=N(H);{var ce=ue=>{var G=Yi(),S=r(a(G),2),ee=a(S);f(()=>y(ee,`${na[t().spellCategory]??""}魔法`)),s(ue,G)},Ce=ue=>{var G=je(),S=N(G);{var ee=z=>{var J=Ui(),$=r(a(J),2),B=a($);f(()=>y(B,`${la[t().trapCategory]??""}罠`)),s(z,J)};b(S,z=>{t().kind==="Trap"&&t().trapCategory&&z(ee)},!0)}s(ue,G)};b(I,ue=>{t().kind==="Spell"&&t().spellCategory?ue(ce):ue(Ce,!1)},!0)}s(T,H)};b(Y,T=>{t().kind==="Monster"?T(ie):T(xe,!1)})}var $e=r(Y,2),_e=a($e),ve=a(_e),Se=a(ve),m=r($e,2);{var F=T=>{var H=Ni();s(T,H)};b(m,T=>{t().isOldVersion&&T(F)})}var V=r(m,2);{var W=T=>{var H=Pi();s(T,H)},we=T=>{var H=qi(),I=a(H),ce=r(I,2),Ce=a(ce);f(ue=>{Ct(I,"href",`https://yugioh-wiki.net/index.php?${t().wikiEncodedName}`),Ct(ce,"href",ue),y(Ce,`⇒${(t().cardId?"公式カードページ":"公式で検索")??""}`)},[()=>cr(t())],oe),s(T,H)};b(V,T=>{t().isForTest?T(W):T(we,!1)})}f(T=>{Ae(o,`duel_card duel_card_info ${t().kind??""} ${T??""} svelte-rccxcp`),y(D,t().name),y(Se,t().description)},[()=>{var T;return(T=t().monsterCategories)==null?void 0:T.join(" ")}],oe),s(_,o)};b(u,_=>{t()&&_(c)})}s(d,v),wt()}const Oi={0:{aaa:"日",aaaa:"日曜日",ddd:"Sun",dddd:"Sunday"},1:{aaa:"月",aaaa:"月曜日",ddd:"Mon",dddd:"Monday"},2:{aaa:"火",aaaa:"火曜日",ddd:"Tue",dddd:"Tuesday"},3:{aaa:"水",aaaa:"水曜日",ddd:"Wed",dddd:"Wednesday"},4:{aaa:"木",aaaa:"木曜日",ddd:"Thu",dddd:"Thursday"},5:{aaa:"金",aaaa:"金曜日",ddd:"Fri",dddd:"Friday"},6:{aaa:"土",aaaa:"土曜日",ddd:"Sat",dddd:"Saturday"}};class Ii{constructor(){dt(this,"DefaultSeparator1","/");dt(this,"DefaultSeparator2"," ");dt(this,"DefaultSeparator3",":");dt(this,"createDate",i=>{if(!i)return;const t=new Date(i);if(!isNaN(t.getTime()))return t});dt(this,"createDateOr",(i,t)=>this.createDate(i)||t||new Date);dt(this,"truncateDate",i=>{const t=i||new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())});dt(this,"addDate",(i,t)=>{const v=this.createDateOr(i);return v.setDate(v.getDate()+t),v});dt(this,"addMonth",(i,t)=>{const v=this.createDateOr(i);return v.setMonth(v.getMonth()+t),v});dt(this,"addYear",(i,t)=>{const v=this.createDateOr(i);return v.setFullYear(v.getFullYear()+t),v});dt(this,"getDayOfWeek",(i,t="dddd")=>{const v=this.createDate(i);return v?Oi[v.getDay()][t]:""});dt(this,"formatToYYYYMMDD",(i,t=this.DefaultSeparator1)=>{const v=this.createDate(i);if(!v)return"";const u=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2),_=("0"+v.getDate()).slice(-2);return u+t+c+t+_});dt(this,"formatToYYYYMM",(i,t=this.DefaultSeparator1)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const u=v.getFullYear().toString(),c=("0"+(v.getMonth()+1)).slice(-2);return u+t+c});dt(this,"formatToHHMMSS",(i,t=this.DefaultSeparator3)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const u=v.getHours(),c=v.getMinutes(),_=v.getSeconds();return("0"+u).slice(-2)+t+("0"+c).slice(-2)+t+("0"+_).slice(-2)});dt(this,"formatToHHMM",(i,t=this.DefaultSeparator3)=>{const v=this.createDate(i);if(!v)return"";t||(t="");const u=("0"+v.getHours()).slice(-2),c=("0"+v.getMinutes()).slice(-2);return u+t+c});dt(this,"formatToYYYYMMDD_HHMM",(i,t=this.DefaultSeparator1,v=this.DefaultSeparator2,u=this.DefaultSeparator3)=>{const c=this.createDate(i);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMM(c,u):""});dt(this,"formatToYYYYMMDD_HHMMSS",(i,t=this.DefaultSeparator1,v=this.DefaultSeparator2,u=this.DefaultSeparator3)=>{const c=this.createDate(i);return c?this.formatToYYYYMMDD(c,t)+v+this.formatToHHMMSS(c,u):""})}}const Dt=new Ii;Date.prototype.truncateDate=function(){return Dt.truncateDate(this)};Date.prototype.getCloneOr=function(d){return Dt.createDateOr(this,d)};Date.prototype.addDate=function(d){return Dt.addDate(this,d)};Date.prototype.addMonth=function(d){return Dt.addDate(this,d)};Date.prototype.addYear=function(d){return Dt.addDate(this,d)};Date.prototype.getDayOfWeek=function(d="dddd"){return Dt.getDayOfWeek(this,d)};Date.prototype.formatToYYYYMM=function(d){return Dt.formatToYYYYMM(this,d)};Date.prototype.formatToYYYYMMDD=function(d){return Dt.formatToYYYYMMDD(this,d)};Date.prototype.formatToYYYYMMDD_HHMM=function(d,i,t){return Dt.formatToYYYYMMDD_HHMM(this,d,i,t)};Date.prototype.formatToYYYYMMDD_HHMMSS=function(d,i,t){return Dt.formatToYYYYMMDD_HHMMSS(this,d,i,t)};Date.prototype.formatToHHMM=function(d){return Dt.formatToHHMM(this,d)};Date.prototype.formatToHHMMSS=function(d){return Dt.formatToHHMMSS(this,d)};var Ri=l('<li class="deck_info_list_item svelte-2wdgc8"><div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div> <div class="svelte-2wdgc8"> </div></li>'),Ki=l('<ul class="deck_info_list svelte-2wdgc8"></ul>'),Wi=l('<label for="file_selector" class="upload_area svelte-2wdgc8" role="region" aria-label="ファイルアップロードエリア"><div class="upload_area_message svelte-2wdgc8">ここにファイルをドロップ</div> <div class="upload_area_footer svelte-2wdgc8"><input type="file" id="file_selector" name="file_selector" accept=".json" multiple></div></label>'),zi=l('<div slot="body" class="modal_body svelte-2wdgc8"><!></div>'),Vi=l('<button class="svelte-2wdgc8">追加</button> <button class="svelte-2wdgc8">削除して追加</button> <button class="svelte-2wdgc8">戻る</button>',1),Gi=l('<button class="svelte-2wdgc8">Cancel</button>'),Xi=l('<div slot="footer" class="modal_window_footer svelte-2wdgc8"><!></div>');function Qi(d,i){kt(i,!1);let t=ze(i,"eventHolder",8),v=ze(i,"args",8),u=ze(i,"resolve",8),c=be(Promise.resolve([])),_=be();const o=()=>{C(_,new DataTransfer().files),C(c,Promise.resolve([]))},P=async q=>{q.preventDefault(),console.log("hoge",q)},K=async q=>{q.preventDefault(),q.dataTransfer&&D(q.dataTransfer.files)},M=()=>{D(e(_))},D=async q=>{if(!q.length)return;const Q=[],O=[];for(const A of q)try{O.push(...await St.createfromJson(A))}catch(Y){Y instanceof Error&&Q.push(Y.message)}if(Q.length){console.log(...Q);return}C(c,e(c).then(()=>O))},n=o;xt(),_r(d,{get eventHolder(){return t()},get args(){return v()},$$slots:{body:(q,Q)=>{var O=zi(),A=a(O);ht(A,()=>Gt,null,(Y,ie)=>{var xe=je(),$e=N(xe);ht($e,()=>e(c),null,(_e,ve)=>{var Se=je(),m=N(Se);{var F=W=>{var we=Ki();ne(we,5,()=>e(ve),le,(T,H)=>{var I=Ri(),ce=a(I),Ce=a(ce),ue=r(ce,2),G=a(ue),S=r(ue,2),ee=a(S);f((z,J,$)=>{y(Ce,e(H).name),y(G,`${z??""}
                  /
                  ${J??""}`),y(ee,`最終使用日時 ： ${$??""}`)},[()=>e(H).cardNames.filter(z=>{var J,$;return!(($=(J=e(ie).getCardInfo(z))==null?void 0:J.monsterCategories)!=null&&$.union(Lt).length)}).length,()=>e(H).cardNames.filter(z=>{var J,$;return($=(J=e(ie).getCardInfo(z))==null?void 0:J.monsterCategories)==null?void 0:$.union(Lt).length}).length,()=>e(H).lastUsedAt.formatToYYYYMMDD_HHMM("/"," ",":")],oe),s(T,I)}),s(W,we)},V=W=>{var we=Wi(),T=r(a(we),2),H=a(T);ur(H,()=>e(_),I=>C(_,I)),de("change",H,M),de("cancel",H,n),de("drop",we,K),de("dragover",we,P),s(W,we)};b(m,W=>{e(ve).length?W(F):W(V,!1)})}s(_e,Se)}),s(Y,xe)}),s(q,O)},footer:(q,Q)=>{var O=Xi(),A=a(O);ht(A,()=>e(c),null,(Y,ie)=>{var xe=je(),$e=N(xe);{var _e=Se=>{var m=Vi(),F=N(m),V=r(F,2),W=r(V,2);f(()=>{F.disabled=e(ie).length===0,V.disabled=e(ie).length===0}),de("click",F,()=>u()({deckInfos:e(ie),replaceAll:!1})),de("click",V,()=>u()({deckInfos:e(ie),replaceAll:!0})),de("click",W,n),s(Se,m)},ve=Se=>{var m=je(),F=N(m);{var V=W=>{var we=Gi();de("click",we,()=>u()(void 0)),s(W,we)};b(F,W=>{v().cancelable&&W(V)},!0)}s(Se,m)};b($e,Se=>{e(ie).length?Se(_e):Se(ve,!1)})}s(Y,xe)}),s(q,O)}}}),wt()}const ra=class ra extends pr{constructor(i,t){super(i,...Object.values(t))}};dt(ra,"createModalController",i=>{const t={deckUploader:new yr({title:"デッキ情報をアップロード",position:"Middle",cancelable:!1})};return Object.assign(new ra(i,t),t)});let fa=ra;function Ji(d,i){kt(i,!1);let t=ze(i,"modalController",8);xt(),fr(d,{get modalController(){return t()},children:(v,u)=>{var c=je(),_=N(c);{var o=P=>{Qi(P,{get eventHolder(){return t().eventHolder},get args(){return t().deckUploader.args},get resolve(){return t().deckUploader.resolve}})};b(_,P=>{t().deckUploader.state==="Shown"&&P(o)})}s(v,c)},$$slots:{default:!0}}),wt()}var Zi=l("<button> </button>"),en=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),tn=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),an=l('<div class="deck_editor_search_box_row monster_ex_categories svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">エクストラ</button></div> <div class="svelte-n46fl7"></div></div>'),rn=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),sn=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> <div style="display: inline-block;"></div> </label>'),nn=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),ln=l('<div class="deck_editor_search_box_row monster_categories svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">モンスター</button></div> <div class="svelte-n46fl7"></div></div> <div class="deck_editor_search_box_row monster_attributes svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">属性</button></div> <div class="svelte-n46fl7"></div></div> <div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">種族</button></div> <div class="svelte-n46fl7"></div></div> <div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">星攻守</button></div> <div class="svelte-n46fl7"><div class="star_range svelte-n46fl7"><span class="svelte-n46fl7">星</span> <input type="number" min="0" max="13" class="svelte-n46fl7"> <span class="svelte-n46fl7">～</span> <input type="number" min="0" max="13" class="svelte-n46fl7"></div> <div class="atk_range svelte-n46fl7"><span class="svelte-n46fl7">攻</span> <input type="number" min="0" max="5000" step="100" class="svelte-n46fl7"> <span class="svelte-n46fl7">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-n46fl7"></div> <div class="def_range svelte-n46fl7"><span class="svelte-n46fl7">守</span> <input type="number" min="0" max="5000" step="100" class="svelte-n46fl7"> <span class="svelte-n46fl7">～</span> <input type="number" min="0" max="5000" step="100" class="svelte-n46fl7"></div> <div class="atk_plus_def svelte-n46fl7"><span class="svelte-n46fl7">攻+守</span> <input type="number" min="0" max="10000" step="100" class="svelte-n46fl7"></div></div></div>',1),on=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),vn=l('<div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">魔法</button></div> <div class="svelte-n46fl7"></div></div>'),dn=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),cn=l('<div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">罠</button></div> <div class="svelte-n46fl7"></div></div>'),_n=l('<label class="svelte-n46fl7"><input type="checkbox" class="search_condition svelte-n46fl7"> </label>'),un=l("<div>カード情報読込中</div>"),fn=l("<option> </option>"),pn=l('<div class="svelte-n46fl7"><a class="white_button svelte-n46fl7" download="SVS_DeckInfos.json">ダウンロード</a></div>'),yn=l('<div class="svelte-n46fl7"></div>'),gn=l('<div class="svelte-n46fl7"><a class="white_button svelte-n46fl7" download="SVS_DeckInfos.json">ダウンロード(一括)</a></div>'),mn=l('<div class="svelte-n46fl7"></div>'),bn=l('<div class="deck_editor_body_right_header svelte-n46fl7"><div class="deck_editor_body_right_header_row svelte-n46fl7"><div class="svelte-n46fl7">編集対象</div> <div class="svelte-n46fl7"><select style="width:100%" class="svelte-n46fl7"></select></div></div> <div class="deck_editor_body_right_header_row svelte-n46fl7"><div class="svelte-n46fl7">新規名称</div> <div class="svelte-n46fl7"><input type="text" style="width:100%" class="svelte-n46fl7"></div></div> <div class="deck_editor_body_right_header_row svelte-n46fl7"></div> <div class="deck_editor_body_right_header_row svelte-n46fl7"><div class="svelte-n46fl7">基本操作</div> <div class="svelte-n46fl7"><button class="white_button svelte-n46fl7">デッキを保存</button></div> <div class="svelte-n46fl7"><button class="white_button svelte-n46fl7">デッキを複製</button></div> <div class="svelte-n46fl7"><button class="white_button svelte-n46fl7" title="shiftキー押下で確認メッセージスキップ">デッキを削除</button></div></div> <div class="deck_editor_body_right_header_row svelte-n46fl7"><div class="svelte-n46fl7">DL/UL</div> <!> <!> <div class="svelte-n46fl7"><button class="white_button svelte-n46fl7">アップロード</button></div></div></div> <!>',1),hn=l('<div class="svelte-n46fl7">デッキ情報読込中</div>'),kn=l('<div class="svelte-n46fl7"></div>'),xn=l('<div><div class="deck_editor_header svelte-n46fl7"></div> <div class="deck_editor_body svelte-n46fl7"><div class="deck_editor_body_left svelte-n46fl7"><div role="contentinfo" class="deck_editor_search_box svelte-n46fl7"><div class="deck_editor_search_box_header svelte-n46fl7"><div class="svelte-n46fl7"><button class="deck_editor_search_box_title svelte-n46fl7">検索条件</button></div> <div class="deck_editor_sort_setting_container svelte-n46fl7"></div></div> <div class="deck_editor_search_box_body svelte-n46fl7"><div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">名称</button></div> <div class="svelte-n46fl7"><input type="text" style="width:100%" placeholder="※ルビには対応していません" class="svelte-n46fl7"></div></div> <div class="deck_editor_search_box_row card_kind svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">種類</button></div> <div class="svelte-n46fl7"></div></div> <!> <!> <!> <!> <div class="deck_editor_search_box_row svelte-n46fl7"><div class="svelte-n46fl7"><button class="search_condition_title black_button svelte-n46fl7">その他</button></div> <div class="svelte-n46fl7"></div></div></div></div> <!></div> <div class="deck_editor_body_center svelte-n46fl7"><!></div>  <div class="deck_editor_body_right svelte-n46fl7"><!></div></div> <div class="footer svelte-n46fl7"></div></div> <!>',1);function wn(d,i){kt(i,!1);const t=[],v=[],u=[],c=[],_=[],o=[],P=[],K=[],M=fa.createModalController({onDragStart:{append:()=>{},remove:()=>{}},onDragEnd:{append:()=>{},remove:()=>{}}}),D={name:"",deckCardKinds:[...Ea],exMonsterCategories:[...Lt],monsterCategories:Ta.filter(x=>!Lt.includes(x)),monsterAttributes:[...ja],monsterTypes:[...Ma],spellCategories:Sa.filter(x=>x!=="PendulumScale"),trapCategories:[...$a],starLowerBound:0,starUpperBound:13,atkLowerBound:0,atkUpperBound:5e3,defLowerBound:0,defUpperBound:5e3,atkPlusDef:void 0,others:["test","oldVersion","implemented"],sort:[...Ba]},n=be(structuredClone(D));De(n,e(n).others=["oldVersion"]);let q=be("DeckEdit"),Q=be("SearchCondition");const O=()=>{if(!e(n).deckCardKinds.length){sa(e(n)).forEach(x=>{Array.isArray(e(n)[x])&&Array.isArray(D[x])?De(n,e(n)[x]=[...D[x]]):De(n,e(n)[x]=D[x])});return}De(n,e(n).name=""),De(n,e(n).deckCardKinds=[]),De(n,e(n).exMonsterCategories=[]),De(n,e(n).monsterCategories=[]),De(n,e(n).monsterAttributes=[]),De(n,e(n).monsterTypes=[]),De(n,e(n).spellCategories=[]),De(n,e(n).trapCategories=[]),De(n,e(n).others=[]),De(n,e(n).atkLowerBound=0),De(n,e(n).atkUpperBound=5e3),De(n,e(n).defLowerBound=0),De(n,e(n).defUpperBound=5e3),De(n,e(n).atkPlusDef=void 0),De(n,e(n).sort=[...Ba])},A=x=>{x.forEach(h=>{Array.isArray(e(n)[h])&&Array.isArray(D[h])?De(n,e(n)[h]=e(n)[h].length?[]:[...D[h]]):De(n,e(n)[h]=D[h])})},Y=(x,h,L)=>{Array.isArray(e(n)[h])&&Array.isArray(D[h])&&De(n,e(n)[h]=[L])},ie=async()=>{const h=(await e(_e)).find(te=>te.id===e($e));if(!h)return;const L=await Gt;C(m,{...h,cardInfos:h.cardNames.map(te=>{const Ye=L.getCardInfo(te);return Ye===void 0&&console.error(te),Ye}).filter(te=>te!==void 0)})},xe=()=>St.getAllDeckInfo().then(x=>(C($e,(x.find(h=>h.lastUsedAt.getTime()===Math.max(...x.map(L=>L.lastUsedAt.getTime())))??x[0]).id),x));let $e=be(-1),_e=be(xe()),ve=be(e(_e).then(x=>St.convertToObjectURL(x)));e(_e).then(ie);const Se=()=>{C(_e,xe()),C(ve,e(_e).then(x=>St.convertToObjectURL(x))),ie()};let m=be({id:-Number.MAX_VALUE,name:"",description:"",lastUsedAt:new Date,cardInfos:[]}),F=be(void 0),V=0;const W=x=>{C(Q,"CardDetail"),x.cardId!==void 0&&!x.description&&!x.pendulumDescription&&(V=x.cardId,Ha([x.cardId]).then(()=>{x.cardId===V&&C(F,x)})),C(F,x)},we=async()=>{const h=(await e(_e)).find(L=>L.id===e($e));if(!h)throw new Error("illegal state");return h},T=async()=>{const x=await we();await x.saveDeckInfo({...x,name:e(m).name,cardNames:e(m).cardInfos.map(h=>h.name),lastUsedAt:new Date}),Se()},H=async()=>{(await St.createNewDeck(`デッキ_${new Date().formatToYYYYMMDD_HHMMSS("","","")}`,`コピー日時：${new Date().formatToYYYYMMDD_HHMMSS("-"," ",":")}`,e(m).cardInfos.map(h=>h.name))).saveDeckInfo(),Se()},I=async x=>{const h=await we();!x.shiftKey&&!confirm(`デッキ【${h.name}】を削除します。
よろしいですか？`)||(await h.delete(),Se())},ce=async()=>{const x=await M.deckUploader.show({title:"デッキ情報アップロード",position:"Middle",cancelable:!0});if(!x)return;const h=[];if(x.replaceAll){if(!confirm(`既存デッキ情報を全て削除し、アップロードしたファイルに置き換えます。
よろしいですか？`))return;h.push(...(await e(_e)).map(L=>L.id))}await Promise.all(x.deckInfos.map(L=>St.createNewDeck(L.name,L.description,L.cardNames,L.lastUsedAt))),h.length&&await Promise.all(h.map(St.remove)),Se()},Ce=()=>innerWidth<=1400?"compact":"wide";xt();var ue=xn(),G=N(ue),S=r(a(G),2),ee=a(S),z=a(ee),J=a(z),$=a(J),B=a($),U=r($,2);ne(U,5,()=>e(n).sort,le,(x,h,L)=>{var te=Zi(),Ye=a(te);f(()=>{Ae(te,`deck_editor_sort_setting_item ${e(h).order??""} priority_${e(h).priority??""} svelte-n46fl7`),y(Ye,`${gr[e(h).key]??""}
                ${(e(h).order==="asc"?"▲":"▼")??""}`)}),de("click",te,()=>{e(n).sort.forEach(We=>We.priority++),e(h).order=e(h).order==="asc"?"desc":"asc",Nt(()=>e(n).sort),e(h).priority=1,Nt(()=>e(n).sort)}),s(x,te)});var ae=r(J,2),se=a(ae),Me=a(se),j=a(Me),w=r(Me,2),p=a(w),g=r(se,2),E=a(g),k=a(E),me=r(E,2);ne(me,5,()=>Ea,le,(x,h)=>{var L=en(),te=a(L),Ye,We=r(te);f(()=>{Ye!==(Ye=e(h))&&(te.value=(te.__value=e(h))==null?"":e(h)),y(We,` ${mr[e(h)]??""}`)}),Ut(t,[],te,()=>(e(h),e(n).deckCardKinds),Te=>De(n,e(n).deckCardKinds=Te)),s(x,L)});var pe=r(g,2);{var ye=x=>{var h=an(),L=a(h),te=a(L),Ye=r(L,2);ne(Ye,5,()=>Lt,le,(We,Te)=>{var Ie=tn(),He=a(Ie),Ke,lt=r(He);f(()=>{Ke!==(Ke=e(Te))&&(He.value=(He.__value=e(Te))==null?"":e(Te)),y(lt,` ${Xt[e(Te)]??""}${ea[e(Te)]??""}`)}),Ut(v,[],He,()=>(e(Te),e(n).exMonsterCategories),Re=>De(n,e(n).exMonsterCategories=Re)),s(We,Ie)}),de("click",te,()=>A(["exMonsterCategories"])),re(3,h,()=>fe,()=>({delay:0,duration:100})),s(x,h)};b(pe,x=>{e(n).deckCardKinds.includes("ExtraMonster")&&x(ye)})}var Z=r(pe,2);{var X=x=>{var h=ln(),L=N(h),te=a(L),Ye=a(te),We=r(te,2);ne(We,5,()=>Ta.filter(Be=>!Lt.includes(Be)),le,(Be,Oe)=>{var mt=rn(),ut=a(mt),$t,vt=r(ut);f(()=>{$t!==($t=e(Oe))&&(ut.value=(ut.__value=e(Oe))==null?"":e(Oe)),y(vt,` ${Xt[e(Oe)]??""}${ea[e(Oe)]??""}`)}),Ut(u,[],ut,()=>(e(Oe),e(n).monsterCategories),Qe=>De(n,e(n).monsterCategories=Qe)),s(Be,mt)});var Te=r(L,2),Ie=a(Te),He=a(Ie),Ke=r(Ie,2);ne(Ke,5,()=>ja,le,(Be,Oe)=>{var mt=sn(),ut=a(mt),$t,vt=r(ut,2),Qe=r(vt);f(()=>{$t!==($t=e(Oe))&&(ut.value=(ut.__value=e(Oe))==null?"":e(Oe)),Ae(vt,`monster_attr ${e(Oe)??""} svelte-n46fl7`),y(Qe,` ${pa[e(Oe)]??""}`)}),Ut(c,[],ut,()=>(e(Oe),e(n).monsterAttributes),yt=>De(n,e(n).monsterAttributes=yt)),s(Be,mt)});var lt=r(Te,2),Re=a(lt),et=a(Re),_t=r(Re,2);ne(_t,5,()=>Ma,le,(Be,Oe)=>{var mt=nn(),ut=a(mt),$t,vt=r(ut);f(()=>{$t!==($t=e(Oe))&&(ut.value=(ut.__value=e(Oe))==null?"":e(Oe)),y(vt,` ${ia[e(Oe)]??""}
                    ${ya[e(Oe)]??""}`)}),Ut(_,[],ut,()=>(e(Oe),e(n).monsterTypes),Qe=>De(n,e(n).monsterTypes=Qe)),de("dblclick",mt,Qe=>Y(Qe,"monsterTypes",e(Oe))),s(Be,mt)});var Yt=r(lt,2),It=a(Yt),st=a(It),tt=r(It,2),ot=a(tt),it=r(a(ot),2),pt=r(it,4),gt=r(ot,2),ft=r(a(gt),2),Mt=r(ft,4),Tt=r(gt,2),Bt=r(a(Tt),2),Je=r(Bt,4),at=r(Tt,2),rt=r(a(at),2);de("click",Ye,()=>A(["monsterCategories"])),re(3,L,()=>fe,()=>({delay:0,duration:100})),de("click",He,()=>A(["monsterAttributes"])),re(3,Te,()=>fe,()=>({delay:0,duration:100})),de("click",et,()=>A(["monsterTypes"])),re(3,lt,()=>fe,()=>({delay:0,duration:100})),de("click",st,()=>A(["starLowerBound","starUpperBound","atkLowerBound","atkUpperBound","defLowerBound","defUpperBound","atkPlusDef"])),jt(it,()=>e(n).starLowerBound,Be=>De(n,e(n).starLowerBound=Be)),jt(pt,()=>e(n).starUpperBound,Be=>De(n,e(n).starUpperBound=Be)),jt(ft,()=>e(n).atkLowerBound,Be=>De(n,e(n).atkLowerBound=Be)),jt(Mt,()=>e(n).atkUpperBound,Be=>De(n,e(n).atkUpperBound=Be)),jt(Bt,()=>e(n).defLowerBound,Be=>De(n,e(n).defLowerBound=Be)),jt(Je,()=>e(n).defUpperBound,Be=>De(n,e(n).defUpperBound=Be)),jt(rt,()=>e(n).atkPlusDef,Be=>De(n,e(n).atkPlusDef=Be)),re(3,Yt,()=>fe,()=>({delay:0,duration:100})),s(x,h)};b(Z,x=>{(e(n).deckCardKinds.includes("Monster")||e(n).deckCardKinds.includes("ExtraMonster"))&&x(X)})}var R=r(Z,2);{var ge=x=>{var h=vn(),L=a(h),te=a(L),Ye=r(L,2);ne(Ye,5,()=>Sa.filter(We=>We!=="PendulumScale"),le,(We,Te)=>{var Ie=on(),He=a(Ie),Ke,lt=r(He);f(()=>{Ke!==(Ke=e(Te))&&(He.value=(He.__value=e(Te))==null?"":e(Te)),y(lt,` ${na[e(Te)]??""}`)}),Ut(o,[],He,()=>(e(Te),e(n).spellCategories),Re=>De(n,e(n).spellCategories=Re)),s(We,Ie)}),de("click",te,()=>A(["spellCategories"])),re(3,h,()=>fe,()=>({delay:0,duration:100})),s(x,h)};b(R,x=>{e(n).deckCardKinds.includes("Spell")&&x(ge)})}var Pe=r(R,2);{var qe=x=>{var h=cn(),L=a(h),te=a(L),Ye=r(L,2);ne(Ye,5,()=>$a,le,(We,Te)=>{var Ie=dn(),He=a(Ie),Ke,lt=r(He);f(()=>{Ke!==(Ke=e(Te))&&(He.value=(He.__value=e(Te))==null?"":e(Te)),y(lt,` ${la[e(Te)]??""}`)}),Ut(P,[],He,()=>(e(Te),e(n).trapCategories),Re=>De(n,e(n).trapCategories=Re)),s(We,Ie)}),de("click",te,()=>A(["trapCategories"])),re(3,h,()=>fe,()=>({delay:0,duration:100})),s(x,h)};b(Pe,x=>{e(n).deckCardKinds.includes("Trap")&&x(qe)})}var Ne=r(Pe,2),Le=a(Ne),Ve=a(Le),Ee=r(Le,2);ne(Ee,4,()=>[{key:"test",text:"テスト用カード"},{key:"oldVersion",text:"エラッタ前カード"},{key:"implemented",text:"未実装カード"}],le,(x,h)=>{var L=_n(),te=a(L),Ye,We=r(te);f(()=>{Ye!==(Ye=h.key)&&(te.value=(te.__value=h.key)==null?"":h.key),y(We,` ${h.text??""}`)}),Ut(K,[],te,()=>(h.key,e(n).others),Te=>De(n,e(n).others=Te)),s(x,L)});var he=r(z,2);Hi(he,{get cardInfo(){return e(F)}});var ke=r(ee,2),Ue=a(ke);ht(Ue,()=>Gt,x=>{var h=un();s(x,h)},(x,h)=>{const L=oe(()=>Object.values(e(h).dic));qa(x,{mode:"List",get allCardInfos(){return e(L)},onAttention:W,get searchCondition(){return e(n)},get deckCardInfos(){return e(m).cardInfos},set deckCardInfos(te){De(m,e(m).cardInfos=te)},$$legacy:!0})});var Fe=r(ke,2),Xe=a(Fe);{var nt=x=>{var h=je(),L=N(h);ht(L,()=>e(_e),te=>{var Ye=hn();s(te,Ye)},(te,Ye)=>{var We=bn(),Te=N(We),Ie=a(Te),He=r(a(Ie),2),Ke=a(He);f(()=>{e($e),Nt(()=>{e(Ye)})}),ne(Ke,5,()=>e(Ye),le,(Je,at)=>{var rt=fn(),Be={},Oe=a(rt);f(()=>{Be!==(Be=e(at).id)&&(rt.value=(rt.__value=e(at).id)==null?"":e(at).id),y(Oe,e(at).name)}),s(Je,rt)});var lt=r(Ie,2),Re=r(a(lt),2),et=a(Re),_t=r(lt,4),Yt=r(a(_t),2),It=a(Yt),st=r(Yt,2),tt=a(st),ot=r(st,2),it=a(ot),pt=r(_t,2),gt=r(a(pt),2);ht(gt,we,Je=>{var at=yn();s(Je,at)},(Je,at)=>{var rt=pn(),Be=a(rt);f(Oe=>Ct(Be,"href",Oe),[()=>St.convertToObjectURL([e(at)])],oe),s(Je,rt)});var ft=r(gt,2);ht(ft,()=>e(ve),Je=>{var at=mn();s(Je,at)},(Je,at)=>{var rt=gn(),Be=a(rt);f(()=>Ct(Be,"href",e(at))),s(Je,rt)});var Mt=r(ft,2),Tt=a(Mt),Bt=r(Te,2);qa(Bt,{mode:"Deck",allCardInfos:[],onAttention:W,get deckCardInfos(){return e(m).cardInfos},set deckCardInfos(Je){De(m,e(m).cardInfos=Je)},$$legacy:!0}),Wt(Ke,()=>e($e),Je=>C($e,Je)),de("change",Ke,ie),jt(et,()=>e(m).name,Je=>De(m,e(m).name=Je)),de("click",It,T),de("click",tt,H),de("click",it,I),de("click",Tt,ce),s(te,We)}),s(x,h)},Ge=x=>{var h=kn();s(x,h)};b(Xe,x=>{e(q)==="DeckEdit"||Ce()==="wide"?x(nt):x(Ge,!1)})}var Ze=r(G,2);Ji(Ze,{modalController:M}),f((x,h,L)=>Ae(G,`deck_editor screen_size_${x??""} left_pain_mode_${h??""} main_view_mode_${L??""} svelte-n46fl7`),[Ce,()=>e(Q).toLowerCase(),()=>e(q).toLowerCase()],oe),de("click",B,O),de("click",j,()=>A(["name"])),jt(p,()=>e(n).name,x=>De(n,e(n).name=x)),de("click",k,()=>A(["deckCardKinds"])),de("click",Ve,()=>A(["others"])),re(3,Ne,()=>fe,()=>({delay:0,duration:100})),de("focusin",z,()=>{C(Q,"SearchCondition"),C(q,"SearchCondition")}),de("click",z,()=>{C(Q,"SearchCondition"),C(q,"SearchCondition")}),de("click",Fe,()=>{C(q,"DeckEdit")}),de("focusin",Fe,()=>{C(q,"DeckEdit")}),s(d,ue),wt()}const Cn=["TblDeckHeader","TblDeckDetail","TblDuelistProfile"],Dn=3;var $n=l('<input class="game_mode_radio svelte-sy4ydn" type="radio" name="game_mode"> <label> </label>',1),Sn=l('<option class="svelte-sy4ydn"> </option>'),Mn=l('<option class="svelte-sy4ydn"> </option>'),jn=l('<option class="svelte-sy4ydn"> </option>'),Tn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_deck_selector" class="deck_selector svelte-sy4ydn"><option class="svelte-sy4ydn">デフォルト</option><!></select></div></td></tr>'),Bn=l('<option class="svelte-sy4ydn"> </option>'),En=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">対戦相手：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select> <div class="svelte-sy4ydn"> </div></div></td></tr> <!> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="npc_selector" class="config_row_label npc_selector svelte-sy4ydn">先攻後攻：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="npc_selector" class="npc_selector svelte-sy4ydn"></select></div></td></tr>',1),An=l('<option class="svelte-sy4ydn"> </option>'),Ln=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="difficulty_selector" class="config_row_label difficulty_selector svelte-sy4ydn">難易度：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="difficulty_selector" class="difficulty_selector svelte-sy4ydn"></select></div></td></tr>'),Yn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label class="config_row_label svelte-sy4ydn" for="game_mode_radio_preset">ゲームモード：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"></div></td></tr> <tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="deck_selector" class="config_row_label deck_selector svelte-sy4ydn">デッキ：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><select id="deck_selector" class="deck_selector svelte-sy4ydn"></select></div></td></tr> <!> <tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">duel start!</button></div></td></tr>',1),Un=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デッキ情報の読み込み、もしくは作成中...</div></td></tr>'),Nn=l('<tr><td colspan="2" class="svelte-sy4ydn"><div><button class="btn svelte-sy4ydn">deck edit</button></div></td></tr>'),Pn=l('<tr class="config_row svelte-sy4ydn"><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><label for="duelist_name" class="config_row_label duelist_name svelte-sy4ydn">名前：</label></div></td><td class="svelte-sy4ydn"><div class="svelte-sy4ydn"><input id="duelist_name" class="duelist_name svelte-sy4ydn" type="text"></div></td></tr> <!> <!>',1),qn=l('<tr><td colspan="2" class="svelte-sy4ydn"><div>デュエリスト情報の読み込み、もしくは作成中...</div></td></tr>'),Fn=l('<div class="app_body svelte-sy4ydn"><table class="config_table svelte-sy4ydn"><tbody><!></tbody></table></div>'),Hn=l('<span class="svelte-sy4ydn"> </span> <span class="svelte-sy4ydn"> </span>',1),On=l('<div class="result_title result_win svelte-sy4ydn">YOU WIN</div>'),In=l('<div class="result_title result_lose svelte-sy4ydn">YOU LOSE</div>'),Rn=l('<div class="result_title result_draw svelte-sy4ydn">DRAW</div>'),Kn=l('<div class="twitter_share_button_wrapper svelte-sy4ydn"><a rel="nofollow" target="_blank" class="twitter_share_button svelte-sy4ydn">X(twitter)でシェアする</a></div>'),Wn=l('<div class="result svelte-sy4ydn"><!> <div class="reason_of_end svelte-sy4ydn"> </div> <!> <div class="svelte-sy4ydn"><button class="white_button svelte-sy4ydn">TOPへ戻る</button></div></div>'),zn=l('<main style="flex-direction: column; display :flex" class="svelte-sy4ydn"><div class="link link_left svelte-sy4ydn"><a href="https://github.com/Setta238/stk_ygo_svelte" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">repository</a> <a href="https://x.com/ninja_no" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">X(Twitter)</a> <a href="https://posfie.com/@ninja_no/p/Lx7FLj3" target="_blank" rel="noopener noreferrer" title="posfie" class="svelte-sy4ydn">posfie(toggeter)</a></div> <div class="link link_right svelte-sy4ydn"><a class="a_button svelte-sy4ydn" role="button" tabindex="0">TOPへ戻る</a> <a href="/stk_ygo_svelte/note.html" target="_blank" rel="noopener noreferrer" title="repository" class="svelte-sy4ydn">現時点とこの先のこと</a></div> <!> <div class="footer card_summary svelte-sy4ydn"><!></div> <div class="footer debug_info svelte-sy4ydn"><span class="svelte-sy4ydn"> </span> <span class="user_agent_info svelte-sy4ydn"> </span> <span class="screen_info svelte-sy4ydn"> </span></div> <!></main>');function Vn(d,i){kt(i,!1);const t=new br("stk_ygo_svelte",Dn,Cn);let v=be(0),u=be(0),c=be(),_=be("FtkChallenge"),o=be("None"),P=be(0),K=be(""),M=be(void 0);const D="https://setta238.github.io/stk_ygo_svelte/",n="遊戯王deそりてあ",q="ninja_no",Q=hr.getOrCreateNew(t).then(j=>(C(_,Aa.includes(j.previousGameMode)?j.previousGameMode:"FtkChallenge"),we(j.previousNpcId),j)),O=j=>{var p;const w=j.find(g=>g.lastUsedAt.getTime()===Math.max(...j.map(E=>E.lastUsedAt.getTime())))??j[0];C(P,w.id),e(_)==="FtkChallenge"&&w.deckType!=="Preset"&&C(P,((p=Ft.find(g=>g.deckType==="Preset"))==null?void 0:p.id)??e(P))};let A=be(St.getAllDeckInfo(t).then(j=>(Promise.all(j.filter(w=>!w.lastUsedAt).map(w=>{w.saveDeckInfo()})),O(j),j)));const Y=async()=>{const j=e(P);let w=(await e(A)).find(g=>g.id===j)??(await xe()).find(g=>g.id===j);w&&await w.updateTimestamp();let p=w;if(p||(p=Ft.find(g=>g.id===j)),!p)throw new Error("illegal state");return p},ie=async()=>{(await Q).save({previousGameMode:e(_)})},xe=()=>(C(A,St.getAllDeckInfo(t).then(j=>(O(j),j))),e(A)),$e=async()=>{(await e(A)).length||(await St.prepareSampleDeck(),xe())},_e=async()=>{await Promise.all([ie(),$e()]);const j=await Y(),w=await Q;let p=Kt.find(k=>k.id===Number.MIN_SAFE_INTEGER)??Kt[0],g=Ft.find(k=>k.id===Number.MIN_SAFE_INTEGER)??Ft[0],E="PlayFirst";e(_)==="FtkChallenge"?p=Kt.filter(k=>k.npcType==="FtkChallenge").find(k=>k.difficulty===w.previousDifficulty)??p:e(_)==="Free"&&(p=Kt.find(k=>k.id===w.previousNpcId)??p,g=Ft.slice(-1)[0],E=w.previousStartMode),p.npcType!=="FtkChallenge"&&w.previousNpcDeckId>-1?g=(await e(A)).find(k=>k.id===w.previousNpcDeckId)??g:g=Ft.find(k=>k.id===p.id)??g,C(c,new Cr(w,"Player",j,[],p,"NPC",g,[],E)),e(c).onDuelEnd.append(()=>(C(c,e(c)),"RemoveMe"))},ve=async()=>{await Promise.all([ie(),$e()]),C(o,"DeckEdit")},Se=async j=>{await ie(),j.key==="Enter"&&!j.repeat&&(await Q).save()},m=()=>{C(A,xe()),C(c,void 0),C(o,"None")};let F=Date.now();const V=j=>{Date.now()-F<200||(F=Date.now(),C(_,j),xe())},W=j=>{we(Number(j.currentTarget.value))},we=j=>{var w;C(M,Kt.find(p=>p.id===j)),C(K,((w=e(M))==null?void 0:w.description)??"")};$e(),xt();var T=zn(),H=r(a(T),2),I=a(H),ce=r(H,2);{var Ce=j=>{var w=je(),p=N(w);ht(p,()=>Q,null,(g,E)=>{gi(g,{get duel(){return e(c)},get userProfile(){return e(E)}})}),s(j,w)},ue=j=>{var w=je(),p=N(w);{var g=k=>{wn(k,{})},E=k=>{var me=Fn(),pe=a(me),ye=a(pe),Z=a(ye);ht(Z,()=>Q,X=>{var R=qn();s(X,R)},(X,R)=>{var ge=Pn(),Pe=N(ge),qe=a(Pe),Ne=a(qe),Le=r(qe),Ve=a(Le),Ee=a(Ve),he=r(Pe,2);ht(he,()=>e(A),Fe=>{var Xe=Un();s(Fe,Xe)},(Fe,Xe)=>{var nt=Yn(),Ge=N(nt),Ze=a(Ge),x=a(Ze),h=r(Ze),L=a(h);ne(L,5,()=>Aa,le,(st,tt)=>{var ot=$n(),it=N(ot),pt=r(it,2),gt=a(pt);f(ft=>{Ct(it,"id",`game_mode_radio_${ft??""}`),xr(it,e(tt)),wr(it,e(_)===e(tt)),Ae(pt,`game_mode_tab_label game_mode_tab_${ft??""} svelte-sy4ydn`),Ct(pt,"for",`game_mode_radio_${ft??""}`),y(gt,e(tt))},[()=>e(tt).toLowerCase()],oe),de("change",it,()=>V(e(tt))),s(st,ot)});var te=r(Ge,2),Ye=a(te),We=a(Ye),Te=r(Ye),Ie=a(Te),He=a(Ie);f(()=>{e(P),Nt(()=>{e(_),e(Xe)})}),ne(He,5,()=>e(_)==="FtkChallenge"?Ft.filter(st=>st.deckType==="Preset"):e(Xe),le,(st,tt)=>{var ot=Sn(),it={},pt=a(ot);f(()=>{it!==(it=e(tt).id)&&(ot.value=(ot.__value=e(tt).id)==null?"":e(tt).id),y(pt,e(tt).name)}),s(st,ot)});var Ke=r(te,2);{var lt=st=>{var tt=En(),ot=N(tt),it=a(ot),pt=a(it),gt=r(it),ft=a(gt),Mt=a(ft);f(()=>{e(R),Nt(()=>{})}),ne(Mt,5,()=>Kt,le,(vt,Qe)=>{var yt=Mn(),qt={},Rt=a(yt);f(()=>{qt!==(qt=e(Qe).id)&&(yt.value=(yt.__value=e(Qe).id)==null?"":e(Qe).id),y(Rt,e(Qe).name)}),s(vt,yt)});var Tt=r(Mt,2),Bt=a(Tt),Je=r(ot,2);{var at=vt=>{var Qe=Tn(),yt=a(Qe),qt=a(yt),Rt=r(yt),ba=a(Rt),ha=a(ba);f(()=>{e(R),Nt(()=>{e(Xe)})});var oa=a(ha);oa.value=(oa.__value=Number.MIN_SAFE_INTEGER)==null?"":Number.MIN_SAFE_INTEGER;var Oa=r(oa);ne(Oa,1,()=>e(Xe),le,(va,Jt)=>{var Zt=jn(),ka={},Ia=a(Zt);f(()=>{ka!==(ka=e(Jt).id)&&(Zt.value=(Zt.__value=e(Jt).id)==null?"":e(Jt).id),y(Ia,e(Jt).name)}),s(va,Zt)}),re(3,qt,()=>fe,()=>({duration:200})),re(3,yt,()=>fe,()=>({duration:200})),Wt(ha,()=>e(R).previousNpcDeckId,va=>e(R).previousNpcDeckId=va),re(3,ba,()=>fe,()=>({duration:200})),re(3,Rt,()=>fe,()=>({duration:200})),re(3,Qe,()=>fe,()=>({duration:200})),s(vt,Qe)};b(Je,vt=>{var Qe;((Qe=e(M))==null?void 0:Qe.npcType)!=="FtkChallenge"&&vt(at)})}var rt=r(Je,2),Be=a(rt),Oe=a(Be),mt=r(Be),ut=a(mt),$t=a(ut);f(()=>{e(R),Nt(()=>{})}),ne($t,5,()=>sa(La),le,(vt,Qe)=>{var yt=Bn(),qt={},Rt=a(yt);f(()=>{qt!==(qt=e(Qe))&&(yt.value=(yt.__value=e(Qe))==null?"":e(Qe)),y(Rt,La[e(Qe)])}),s(vt,yt)}),f(()=>y(Bt,`※${e(K)??""}`)),re(3,pt,()=>fe,()=>({duration:200})),re(3,it,()=>fe,()=>({duration:200})),de("change",Mt,W),Wt(Mt,()=>e(R).previousNpcId,vt=>e(R).previousNpcId=vt),re(3,ft,()=>fe,()=>({duration:200})),re(3,gt,()=>fe,()=>({duration:200})),re(3,ot,()=>fe,()=>({duration:200})),re(3,Oe,()=>fe,()=>({duration:200})),re(3,Be,()=>fe,()=>({duration:200})),Wt($t,()=>e(R).previousStartMode,vt=>e(R).previousStartMode=vt),re(3,ut,()=>fe,()=>({duration:200})),re(3,mt,()=>fe,()=>({duration:200})),re(3,rt,()=>fe,()=>({duration:200})),s(st,tt)},Re=st=>{var tt=je(),ot=N(tt);{var it=pt=>{var gt=Ln(),ft=a(gt),Mt=a(ft),Tt=r(ft),Bt=a(Tt),Je=a(Bt);f(()=>{e(R),Nt(()=>{})}),ne(Je,5,()=>Dr,le,(at,rt)=>{var Be=An(),Oe={},mt=a(Be);f(()=>{Oe!==(Oe=e(rt))&&(Be.value=(Be.__value=e(rt))==null?"":e(rt)),y(mt,e(rt))}),s(at,Be)}),re(3,Mt,()=>fe,()=>({duration:200})),re(3,ft,()=>fe,()=>({duration:200})),Wt(Je,()=>e(R).previousDifficulty,at=>e(R).previousDifficulty=at),re(3,Bt,()=>fe,()=>({duration:200})),re(3,Tt,()=>fe,()=>({duration:200})),re(3,gt,()=>fe,()=>({duration:200})),s(pt,gt)};b(ot,pt=>{e(_)==="FtkChallenge"&&pt(it)},!0)}s(st,tt)};b(Ke,st=>{e(_)==="Free"?st(lt):st(Re,!1)})}var et=r(Ke,2),_t=a(et),Yt=a(_t),It=a(Yt);re(3,x,()=>fe,()=>({duration:200})),re(3,Ze,()=>fe,()=>({duration:200})),re(3,L,()=>fe,()=>({duration:200})),re(3,h,()=>fe,()=>({duration:200})),re(3,Ge,()=>fe,()=>({duration:200})),re(3,We,()=>fe,()=>({duration:200})),re(3,Ye,()=>fe,()=>({duration:200})),Wt(He,()=>e(P),st=>C(P,st)),re(3,Ie,()=>fe,()=>({duration:200})),re(3,Te,()=>fe,()=>({duration:200})),re(3,te,()=>fe,()=>({duration:200})),de("click",It,_e),re(3,Yt,()=>fe,()=>({duration:200})),s(Fe,nt)});var ke=r(he,2);{var Ue=Fe=>{var Xe=Nn(),nt=a(Xe),Ge=a(nt),Ze=a(Ge);de("click",Ze,ve),re(3,Ge,()=>fe,()=>({duration:200})),re(3,nt,()=>fe,()=>({duration:200})),re(3,Xe,()=>fe,()=>({duration:200})),s(Fe,Xe)};b(ke,Fe=>{e(_)==="Free"&&Fe(Ue)})}re(3,Ne,()=>fe,()=>({duration:200})),re(3,qe,()=>fe,()=>({duration:200})),jt(Ee,()=>e(R).name,Fe=>e(R).name=Fe),de("keypress",Ee,Se),re(3,Ve,()=>fe,()=>({duration:200})),re(3,Le,()=>fe,()=>({duration:200})),re(3,Pe,()=>fe,()=>({duration:200})),s(X,ge)}),s(k,me)};b(p,k=>{e(o)==="DeckEdit"?k(g):k(E,!1)},!0)}s(j,w)};b(ce,j=>{e(c)?j(Ce):j(ue,!1)})}var G=r(ce,2),S=a(G);ht(S,()=>Gt,j=>{var w=ct("読み込み中");s(j,w)},(j,w)=>{var p=Hn(),g=N(p),E=a(g),k=r(g,2),me=a(k);f((pe,ye,Z)=>{y(E,`公式DB上のカード${pe??""}枚`),y(me,`実装済カード（効果あり）${ye??""}枚 （効果なし）${Z??""}枚`)},[()=>e(w).knmCount.toLocaleString(),()=>e(w).definitionCount.toLocaleString(),()=>e(w).nonDefinitionCount.toLocaleString()],oe),s(j,p)});var ee=r(G,2),z=a(ee),J=a(z),$=r(z,2),B=a($),U=r($,2),ae=a(U),se=r(ee,2);{var Me=j=>{var w=Wn(),p=a(w);{var g=R=>{var ge=je(),Pe=N(ge);{var qe=Le=>{var Ve=On();s(Le,Ve)},Ne=Le=>{var Ve=je(),Ee=N(Ve);{var he=ke=>{var Ue=In();s(ke,Ue)};b(Ee,ke=>{e(c).winner.seat==="Above"&&ke(he)},!0)}s(Le,Ve)};b(Pe,Le=>{e(c).winner.seat==="Below"?Le(qe):Le(Ne,!1)})}s(R,ge)},E=R=>{var ge=Rn();s(R,ge)};b(p,R=>{e(c).winner?R(g):R(E,!1)})}var k=r(p,2),me=a(k),pe=r(k,2);{var ye=R=>{var ge=Kn(),Pe=a(ge);f(()=>Ct(Pe,"href",`https://x.com/share?url=${D}&text=${e(c).twitterShareText??""}&hashtags=${n}&via=${q}`)),s(R,ge)};b(pe,R=>{e(c).twitterShareText&&R(ye)})}var Z=r(pe,2),X=a(Z);f(()=>y(me,e(c).reasonOfEnd)),de("click",X,m),re(3,w,()=>Mr,()=>({delay:200,duration:200})),s(j,w)};b(se,j=>{e(c)&&e(c).isEnded&&j(Me)})}f(()=>{y(J,"build at: 20260110_171017"),y(B,kr.text),y(ae,`w:${e(v)??""}px h:${e(u)??""}px`)}),ta("innerWidth",j=>C(v,j)),ta("innerHeight",j=>C(u,j)),de("click",I,m),s(d,T),wt()}$r(Vn,{target:document.getElementById("app")});
